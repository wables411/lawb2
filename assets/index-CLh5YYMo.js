const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BbA1-IQa.js","assets/if-defined-DLvrSOdW.js","assets/index-C_UCFm1E.js","assets/index-JlV93q9A.js","assets/ref-_fRbN_LN.js","assets/index-VHbjH-yD.js","assets/index-idxDeHYP.js","assets/index-Nsw1R_kO.js","assets/index-BErP6ZU-.js","assets/index-C92BufMv.js","assets/index-CUe5iAPT.js","assets/index-C8zWEnmS.js","assets/email-C3OFWbOp.js","assets/index-C3iaRD8f.js","assets/socials-NLi2QclG.js","assets/index-DrP9Q7NQ.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-Cej60rWC.js","assets/index-BhM2BUr_.js","assets/index-Bkts4-VJ.js","assets/index-Cl2Ka8-C.js","assets/swaps-Bl63uBrC.js","assets/index-BElQKndl.js","assets/index-DjlsW188.js","assets/index-BY4P7fdn.js","assets/send-CoQcj5HL.js","assets/index-DAPwwktN.js","assets/index-hFdRIP1-.js","assets/receive-BGMy5Vnh.js","assets/index-ZR1SJeUc.js","assets/onramp-BzPoP3H1.js","assets/index-C86kIwqN.js","assets/index-DX0Nx_sq.js","assets/index-CKmW_dVk.js","assets/transactions-AWhqjDG-.js","assets/index-Bdg8WAcO.js","assets/index-D_5Cg7w2.js","assets/index-D4JXZBNW.js","assets/index-iUKlLMdH.js","assets/index-0ntgoOXw.js","assets/w3m-modal-BUeX5fR3.js"])))=>i.map(i=>d[i]);
var Kne=Object.defineProperty;var PB=t=>{throw TypeError(t)};var Yne=(t,e,n)=>e in t?Kne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var re=(t,e,n)=>Yne(t,typeof e!="symbol"?e+"":e,n),uR=(t,e,n)=>e.has(t)||PB("Cannot "+n);var _=(t,e,n)=>(uR(t,e,"read from private field"),n?n.call(t):e.get(t)),Y=(t,e,n)=>e.has(t)?PB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(uR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),de=(t,e,n)=>(uR(t,e,"access private method"),n);var Ed=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return _(t,e,r)}});function Qne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VW(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var KW={exports:{}},JI={},YW={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_=Symbol.for("react.element"),Jne=Symbol.for("react.portal"),Zne=Symbol.for("react.fragment"),Xne=Symbol.for("react.strict_mode"),ere=Symbol.for("react.profiler"),tre=Symbol.for("react.provider"),nre=Symbol.for("react.context"),rre=Symbol.for("react.forward_ref"),sre=Symbol.for("react.suspense"),ire=Symbol.for("react.memo"),ore=Symbol.for("react.lazy"),OB=Symbol.iterator;function are(t){return t===null||typeof t!="object"?null:(t=OB&&t[OB]||t["@@iterator"],typeof t=="function"?t:null)}var QW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JW=Object.assign,ZW={};function qw(t,e,n){this.props=t,this.context=e,this.refs=ZW,this.updater=n||QW}qw.prototype.isReactComponent={};qw.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qw.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XW(){}XW.prototype=qw.prototype;function D5(t,e,n){this.props=t,this.context=e,this.refs=ZW,this.updater=n||QW}var M5=D5.prototype=new XW;M5.constructor=D5;JW(M5,qw.prototype);M5.isPureReactComponent=!0;var kB=Array.isArray,ez=Object.prototype.hasOwnProperty,L5={current:null},tz={key:!0,ref:!0,__self:!0,__source:!0};function nz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ez.call(e,r)&&!tz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:N_,type:t,key:i,ref:o,props:s,_owner:L5.current}}function cre(t,e){return{$$typeof:N_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function U5(t){return typeof t=="object"&&t!==null&&t.$$typeof===N_}function lre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DB=/\/+/g;function dR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lre(""+t.key):e.toString(36)}function sS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case N_:case Jne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dR(o,0):r,kB(s)?(n="",t!=null&&(n=t.replace(DB,"$&/")+"/"),sS(s,e,n,"",function(l){return l})):s!=null&&(U5(s)&&(s=cre(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(DB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",kB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+dR(i,a);o+=sS(i,e,n,c,s)}else if(c=are(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+dR(i,a++),o+=sS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function F1(t,e,n){if(t==null)return t;var r=[],s=0;return sS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ure(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ni={current:null},iS={transition:null},dre={ReactCurrentDispatcher:Ni,ReactCurrentBatchConfig:iS,ReactCurrentOwner:L5};function rz(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:F1,forEach:function(t,e,n){F1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return F1(t,function(){e++}),e},toArray:function(t){return F1(t,function(e){return e})||[]},only:function(t){if(!U5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qt.Component=qw;Qt.Fragment=Zne;Qt.Profiler=ere;Qt.PureComponent=D5;Qt.StrictMode=Xne;Qt.Suspense=sre;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dre;Qt.act=rz;Qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JW({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=L5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)ez.call(e,c)&&!tz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:N_,type:t.type,key:s,ref:i,props:r,_owner:o}};Qt.createContext=function(t){return t={$$typeof:nre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tre,_context:t},t.Consumer=t};Qt.createElement=nz;Qt.createFactory=function(t){var e=nz.bind(null,t);return e.type=t,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(t){return{$$typeof:rre,render:t}};Qt.isValidElement=U5;Qt.lazy=function(t){return{$$typeof:ore,_payload:{_status:-1,_result:t},_init:ure}};Qt.memo=function(t,e){return{$$typeof:ire,type:t,compare:e===void 0?null:e}};Qt.startTransition=function(t){var e=iS.transition;iS.transition={};try{t()}finally{iS.transition=e}};Qt.unstable_act=rz;Qt.useCallback=function(t,e){return Ni.current.useCallback(t,e)};Qt.useContext=function(t){return Ni.current.useContext(t)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(t){return Ni.current.useDeferredValue(t)};Qt.useEffect=function(t,e){return Ni.current.useEffect(t,e)};Qt.useId=function(){return Ni.current.useId()};Qt.useImperativeHandle=function(t,e,n){return Ni.current.useImperativeHandle(t,e,n)};Qt.useInsertionEffect=function(t,e){return Ni.current.useInsertionEffect(t,e)};Qt.useLayoutEffect=function(t,e){return Ni.current.useLayoutEffect(t,e)};Qt.useMemo=function(t,e){return Ni.current.useMemo(t,e)};Qt.useReducer=function(t,e,n){return Ni.current.useReducer(t,e,n)};Qt.useRef=function(t){return Ni.current.useRef(t)};Qt.useState=function(t){return Ni.current.useState(t)};Qt.useSyncExternalStore=function(t,e,n){return Ni.current.useSyncExternalStore(t,e,n)};Qt.useTransition=function(){return Ni.current.useTransition()};Qt.version="18.3.1";YW.exports=Qt;var k=YW.exports;const zo=Qg(k),hre=Qne({__proto__:null,default:zo},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fre=k,pre=Symbol.for("react.element"),gre=Symbol.for("react.fragment"),mre=Object.prototype.hasOwnProperty,yre=fre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wre={key:!0,ref:!0,__self:!0,__source:!0};function sz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mre.call(e,r)&&!wre.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pre,type:t,key:i,ref:o,props:s,_owner:yre.current}}JI.Fragment=gre;JI.jsx=sz;JI.jsxs=sz;KW.exports=JI;var y=KW.exports,MB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(t,e){if(!t)throw Vw(e)},Vw=function(t){return new Error("Firebase Database ("+iz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},B5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new vre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const az=function(t){const e=oz(t);return B5.encodeByteArray(e,!0)},ZS=function(t){return az(t).replace(/\./g,"")},g2=function(t){try{return B5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ere(t){return cz(void 0,t)}function cz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Cre(n)||(t[n]=cz(t[n],e[n]));return t}function Cre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Are=()=>_re().__FIREBASE_DEFAULTS__,Sre=()=>{if(typeof process>"u"||typeof MB>"u")return;const t=MB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&g2(t[1]);return e&&JSON.parse(e)},lz=()=>{try{return Are()||Sre()||xre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ire=t=>{var e,n;return(n=(e=lz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nre=t=>{const e=Ire(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uz=()=>{var t;return(t=lz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ZS(JSON.stringify(n)),ZS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rre())}function Pre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ore(){return iz.NODE_ADMIN===!0}function kre(){try{return typeof indexedDB=="object"}catch{return!1}}function Dre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mre="FirebaseError";class T_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Mre,Object.setPrototypeOf(this,T_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hz.prototype.create)}}class hz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Lre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new T_(s,a,r)}}function Lre(t,e){return t.replace(Ure,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ure=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){return JSON.parse(t)}function Yr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=SE(g2(i[0])||""),n=SE(g2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Bre=function(t){const e=fz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},$re=function(t){const e=fz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ew(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function LB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function XS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function m2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(UB(i)&&UB(o)){if(!m2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function UB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fre(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function $5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wre=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XI=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){return t&&t._delegate?t._delegate:t}class xE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gre(e))try{this.getOrInitializeService({instanceIdentifier:Kf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Kf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kf){return this.instances.has(e)}getOptions(e=Kf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kf){return this.component?this.component.multipleInstances?e:Kf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hre(t){return t===Kf?void 0:t}function Gre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Jn||(Jn={}));const Vre={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},Kre=Jn.INFO,Yre={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},Qre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Yre[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pz{constructor(e){this.name=e,this._logLevel=Kre,this._logHandler=Qre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...e),this._logHandler(this,Jn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...e),this._logHandler(this,Jn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...e),this._logHandler(this,Jn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...e),this._logHandler(this,Jn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...e),this._logHandler(this,Jn.ERROR,...e)}}const Jre=(t,e)=>e.some(n=>t instanceof n);let BB,$B;function Zre(){return BB||(BB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xre(){return $B||($B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gz=new WeakMap,y2=new WeakMap,mz=new WeakMap,hR=new WeakMap,F5=new WeakMap;function ese(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Bh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gz.set(n,t)}).catch(()=>{}),F5.set(e,t),e}function tse(t){if(y2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});y2.set(t,e)}let w2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return y2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nse(t){w2=t(w2)}function rse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fR(this),e,...n);return mz.set(r,e.sort?e.sort():[e]),Bh(r)}:Xre().includes(t)?function(...e){return t.apply(fR(this),e),Bh(gz.get(this))}:function(...e){return Bh(t.apply(fR(this),e))}}function sse(t){return typeof t=="function"?rse(t):(t instanceof IDBTransaction&&tse(t),Jre(t,Zre())?new Proxy(t,w2):t)}function Bh(t){if(t instanceof IDBRequest)return ese(t);if(hR.has(t))return hR.get(t);const e=sse(t);return e!==t&&(hR.set(t,e),F5.set(e,t)),e}const fR=t=>F5.get(t);function ise(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Bh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Bh(o.result),c.oldVersion,c.newVersion,Bh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const ose=["get","getKey","getAll","getAllKeys","count"],ase=["put","add","delete","clear"],pR=new Map;function FB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pR.get(e))return pR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ase.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ose.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return pR.set(e,i),i}nse(t=>({...t,get:(e,n,r)=>FB(e,n)||t.get(e,n,r),has:(e,n)=>!!FB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const b2="@firebase/app",jB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new pz("@firebase/app"),use="@firebase/app-compat",dse="@firebase/analytics-compat",hse="@firebase/analytics",fse="@firebase/app-check-compat",pse="@firebase/app-check",gse="@firebase/auth",mse="@firebase/auth-compat",yse="@firebase/database",wse="@firebase/data-connect",bse="@firebase/database-compat",vse="@firebase/functions",Ese="@firebase/functions-compat",Cse="@firebase/installations",_se="@firebase/installations-compat",Ase="@firebase/messaging",Sse="@firebase/messaging-compat",xse="@firebase/performance",Ise="@firebase/performance-compat",Nse="@firebase/remote-config",Tse="@firebase/remote-config-compat",Rse="@firebase/storage",Pse="@firebase/storage-compat",Ose="@firebase/firestore",kse="@firebase/vertexai-preview",Dse="@firebase/firestore-compat",Mse="firebase",Lse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="[DEFAULT]",Use={[b2]:"fire-core",[use]:"fire-core-compat",[hse]:"fire-analytics",[dse]:"fire-analytics-compat",[pse]:"fire-app-check",[fse]:"fire-app-check-compat",[gse]:"fire-auth",[mse]:"fire-auth-compat",[yse]:"fire-rtdb",[wse]:"fire-data-connect",[bse]:"fire-rtdb-compat",[vse]:"fire-fn",[Ese]:"fire-fn-compat",[Cse]:"fire-iid",[_se]:"fire-iid-compat",[Ase]:"fire-fcm",[Sse]:"fire-fcm-compat",[xse]:"fire-perf",[Ise]:"fire-perf-compat",[Nse]:"fire-rc",[Tse]:"fire-rc-compat",[Rse]:"fire-gcs",[Pse]:"fire-gcs-compat",[Ose]:"fire-fst",[Dse]:"fire-fst-compat",[kse]:"fire-vertex","fire-js":"fire-js",[Mse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Map,Bse=new Map,E2=new Map;function WB(t,e){try{t.container.addComponent(e)}catch(n){td.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ex(t){const e=t.name;if(E2.has(e))return td.debug(`There were multiple attempts to register component ${e}.`),!1;E2.set(e,t);for(const n of IE.values())WB(n,t);for(const n of Bse.values())WB(n,t);return!0}function $se(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$h=new hz("app","Firebase",Fse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $h.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wse=Lse;function yz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:v2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $h.create("bad-app-name",{appName:String(s)});if(n||(n=uz()),!n)throw $h.create("no-options");const i=IE.get(s);if(i){if(m2(n,i.options)&&m2(r,i.config))return i;throw $h.create("duplicate-app",{appName:s})}const o=new qre(s);for(const c of E2.values())o.addComponent(c);const a=new jse(n,r,o);return IE.set(s,a),a}function wz(t=v2){const e=IE.get(t);if(!e&&t===v2&&uz())return yz();if(!e)throw $h.create("no-app",{appName:t});return e}function zse(){return Array.from(IE.values())}function My(t,e,n){var r;let s=(r=Use[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),td.warn(a.join(" "));return}ex(new xE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hse="firebase-heartbeat-database",Gse=1,NE="firebase-heartbeat-store";let gR=null;function bz(){return gR||(gR=ise(Hse,Gse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(NE)}catch(n){console.warn(n)}}}}).catch(t=>{throw $h.create("idb-open",{originalErrorMessage:t.message})})),gR}async function qse(t){try{const n=(await bz()).transaction(NE),r=await n.objectStore(NE).get(vz(t));return await n.done,r}catch(e){if(e instanceof T_)td.warn(e.message);else{const n=$h.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});td.warn(n.message)}}}async function zB(t,e){try{const r=(await bz()).transaction(NE,"readwrite");await r.objectStore(NE).put(e,vz(t)),await r.done}catch(n){if(n instanceof T_)td.warn(n.message);else{const r=$h.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});td.warn(r.message)}}}function vz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse=1024,Kse=30*24*60*60*1e3;class Yse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=HB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Kse}),this._storage.overwrite(this._heartbeatsCache))}catch(r){td.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=HB(),{heartbeatsToSend:r,unsentEntries:s}=Qse(this._heartbeatsCache.heartbeats),i=ZS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return td.warn(n),""}}}function HB(){return new Date().toISOString().substring(0,10)}function Qse(t,e=Vse){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),GB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),GB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Jse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kre()?Dre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function GB(t){return ZS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zse(t){ex(new xE("platform-logger",e=>new cse(e),"PRIVATE")),ex(new xE("heartbeat",e=>new Yse(e),"PRIVATE")),My(b2,jB,t),My(b2,jB,"esm2017"),My("fire-js","")}Zse("");var Xse="firebase",eie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */My(Xse,eie,"app");var qB={};const VB="@firebase/database",KB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ez="";function tie(t){Ez=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:SE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return fd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nie(e)}}catch{}return new rie},pp=Cz("localStorage"),sie=Cz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new pz("@firebase/database"),iie=function(){let t=1;return function(){return t++}}(),_z=function(t){const e=Wre(t),n=new jre;n.update(e);const r=n.digest();return B5.encodeByteArray(r)},R_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=R_.apply(null,r):typeof r=="object"?e+=Yr(r):e+=r,e+=" "}return e};let Gv=null,YB=!0;const oie=function(t,e){Ae(!0,"Can't turn on custom loggers persistently."),Ly.logLevel=Jn.VERBOSE,Gv=Ly.log.bind(Ly)},ei=function(...t){if(YB===!0&&(YB=!1,Gv===null&&sie.get("logging_enabled")===!0&&oie()),Gv){const e=R_.apply(null,t);Gv(e)}},P_=function(t){return function(...e){ei(t,...e)}},C2=function(...t){const e="FIREBASE INTERNAL ERROR: "+R_(...t);Ly.error(e)},nd=function(...t){const e=`FIREBASE FATAL ERROR: ${R_(...t)}`;throw Ly.error(e),new Error(e)},io=function(...t){const e="FIREBASE WARNING: "+R_(...t);Ly.warn(e)},aie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&io("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Az=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},cie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},tw="[MIN_NAME]",yg="[MAX_NAME]",Yw=function(t,e){if(t===e)return 0;if(t===tw||e===yg)return-1;if(e===tw||t===yg)return 1;{const n=QB(t),r=QB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},lie=function(t,e){return t===e?0:t<e?-1:1},Mb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Yr(e))},j5=function(t){if(typeof t!="object"||t===null)return Yr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Yr(e[r]),n+=":",n+=j5(t[e[r]]);return n+="}",n},Sz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function fo(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const xz=function(t){Ae(!Az(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},uie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},die=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const fie=new RegExp("^-?(0*)\\d{1,10}$"),pie=-2147483648,gie=2147483647,QB=function(t){if(fie.test(t)){const e=Number(t);if(e>=pie&&e<=gie)return e}return null},Qw=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw io("Exception was thrown by user callback.",n),e},Math.floor(0))}},mie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){io(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',io(e)}}class oS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}oS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="5",Iz="v",Nz="s",Tz="r",Rz="f",Pz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Oz="ls",kz="p",_2="ac",Dz="websocket",Mz="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function bie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Uz(t,e,n){Ae(typeof e=="string","typeof type must == string"),Ae(typeof n=="object","typeof params must == object");let r;if(e===Dz)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Mz)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bie(t)&&(n.ns=t.namespace);const s=[];return fo(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vie{constructor(){this.counters_={}}incrementCounter(e,n=1){fd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ere(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={},yR={};function z5(t){const e=t.toString();return mR[e]||(mR[e]=new vie),mR[e]}function Eie(t,e){const n=t.toString();return yR[n]||(yR[n]=e()),yR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Qw(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB="start",_ie="close",Aie="pLPCommand",Sie="pRTLPCB",Bz="id",$z="pw",Fz="ser",xie="cb",Iie="seg",Nie="ts",Tie="d",Rie="dframe",jz=1870,Wz=30,Pie=jz-Wz,Oie=25e3,kie=3e4;class hy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=P_(e),this.stats_=z5(n),this.urlFn=c=>(this.appCheckToken&&(c[_2]=this.appCheckToken),Uz(n,Mz,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Cie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kie)),cie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new H5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===JB)this.id=a,this.password=c;else if(o===_ie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[JB]="t",r[Fz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[xie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Iz]=W5,this.transportSessionId&&(r[Nz]=this.transportSessionId),this.lastSessionId&&(r[Oz]=this.lastSessionId),this.applicationId&&(r[kz]=this.applicationId),this.appCheckToken&&(r[_2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Pz.test(location.hostname)&&(r[Tz]=Rz);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hy.forceAllow_=!0}static forceDisallow(){hy.forceDisallow_=!0}static isAvailable(){return hy.forceAllow_?!0:!hy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!uie()&&!die()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Yr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=az(n),s=Sz(r,Pie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Rie]="t",r[Bz]=e,r[$z]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Yr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class H5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=iie(),window[Aie+this.uniqueCallbackIdentifier]=e,window[Sie+this.uniqueCallbackIdentifier]=n,this.myIFrame=H5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ei("frame writing exception"),a.stack&&ei(a.stack),ei(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ei("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Bz]=this.myID,e[$z]=this.myPW,e[Fz]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Wz+r.length<=jz;){const o=this.pendingSegs.shift();r=r+"&"+Iie+s+"="+o.seg+"&"+Nie+s+"="+o.ts+"&"+Tie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Oie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Die=16384,Mie=45e3;let tx=null;typeof MozWebSocket<"u"?tx=MozWebSocket:typeof WebSocket<"u"&&(tx=WebSocket);class Ec{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=P_(this.connId),this.stats_=z5(n),this.connURL=Ec.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Iz]=W5,typeof location<"u"&&location.hostname&&Pz.test(location.hostname)&&(o[Tz]=Rz),n&&(o[Nz]=n),r&&(o[Oz]=r),s&&(o[_2]=s),i&&(o[kz]=i),Uz(e,Dz,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pp.set("previous_websocket_failure",!0);try{let r;Ore(),this.mySock=new tx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ec.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&tx!==null&&!Ec.forceDisallow_}static previouslyFailed(){return pp.isInMemoryStorage||pp.get("previous_websocket_failure")===!0}markConnectionHealthy(){pp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=SE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Yr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Sz(n,Die);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Mie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ec.responsesRequiredToBeHealthy=2;Ec.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[hy,Ec]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ec&&Ec.isAvailable();let r=n&&!Ec.previouslyFailed();if(e.webSocketOnly&&(n||io("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ec];else{const s=this.transports_=[];for(const i of TE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);TE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lie=6e4,Uie=5e3,Bie=10*1024,$ie=100*1024,wR="t",ZB="d",Fie="s",XB="r",jie="e",e$="o",t$="a",n$="n",r$="p",Wie="h";class zie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=P_("c:"+this.id+":"),this.transportManager_=new TE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=qv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$ie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Bie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wR in e){const n=e[wR];n===t$?this.upgradeIfSecondaryHealthy_():n===XB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===e$&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Mb("t",e),r=Mb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:r$,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:t$,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:n$,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Mb("t",e),r=Mb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Mb(wR,e);if(ZB in e){const r=e[ZB];if(n===Wie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===n$){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Fie?this.onConnectionShutdown_(r):n===XB?this.onReset_(r):n===jie?C2("Server Error: "+r):n===e$?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),W5!==r&&io("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Lie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Uie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:r$,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hz=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends Hz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!dz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nx}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=32,i$=768;class Gn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function yn(){return new Gn("")}function Gt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lf(t){return t.pieces_.length-t.pieceNum_}function Xn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Gn(t.pieces_,e)}function Gz(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Hie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qz(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Vz(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Gn(e,0)}function Qr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Gn(n,0)}function Yt(t){return t.pieceNum_>=t.pieces_.length}function bi(t,e){const n=Gt(t),r=Gt(e);if(n===null)return e;if(n===r)return bi(Xn(t),Xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function G5(t,e){if(lf(t)!==lf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Sc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(lf(t)>lf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Gie{constructor(e,n){this.errorPrefix_=n,this.parts_=qz(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=XI(this.parts_[r]);Kz(this)}}function qie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=XI(e),Kz(t)}function Vie(t){const e=t.parts_.pop();t.byteLength_-=XI(e),t.parts_.length>0&&(t.byteLength_-=1)}function Kz(t){if(t.byteLength_>i$)throw new Error(t.errorPrefix_+"has a key path longer than "+i$+" bytes ("+t.byteLength_+").");if(t.parts_.length>s$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+s$+") or object contains a cycle "+Yf(t))}function Yf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5 extends Hz{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new q5}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=1e3,Kie=60*5*1e3,o$=30*1e3,Yie=1.3,Qie=3e4,Jie="server_kill",a$=3;class Gu extends zz{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Gu.nextPersistentConnectionId_++,this.log_=P_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lb,this.maxReconnectDelay_=Kie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");q5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Yr(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new ZI,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Gu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&fd(e,"w")){const r=ew(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();io(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||$re(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=o$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Bre(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):C2("Unrecognized action received from server: "+Yr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Qie&&(this.reconnectDelay_=Lb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Yie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Gu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ei("getToken() completed but was canceled"):(ei("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new zie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{io(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(Jie)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&io(d),c())}}}interrupt(e){ei("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ei("Resuming connection for reason: "+e),delete this.interruptReasons_[e],LB(this.interruptReasons_)&&(this.reconnectDelay_=Lb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>j5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Gn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ei("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=a$&&(this.reconnectDelay_=o$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ei("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=a$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ez.replace(/\./g,"-")]=1,dz()?e["framework.cordova"]=1:Pre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nx.getInstance().currentlyOnline();return LB(this.interruptReasons_)&&e}}Gu.nextPersistentConnectionId_=0;Gu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new qt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new qt(tw,e),s=new qt(tw,n);return this.compare(r,s)!==0}minPost(){return qt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1;class Yz extends eN{static get __EMPTY_NODE(){return j1}static set __EMPTY_NODE(e){j1=e}compare(e,n){return Yw(e.name,n.name)}isDefinedOn(e){throw Vw("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return qt.MIN}maxPost(){return new qt(yg,j1)}makePost(e,n){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new qt(e,j1)}toString(){return".key"}}const Uy=new Yz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class us{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??us.RED,this.left=s??no.EMPTY_NODE,this.right=i??no.EMPTY_NODE}copy(e,n,r,s,i){return new us(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return no.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return no.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}us.RED=!0;us.BLACK=!1;class Zie{copy(e,n,r,s,i){return this}insert(e,n,r){return new us(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class no{constructor(e,n=no.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new no(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,us.BLACK,null,null))}remove(e){return new no(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,us.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new W1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new W1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new W1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new W1(this.root_,null,this.comparator_,!0,e)}}no.EMPTY_NODE=new Zie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xie(t,e){return Yw(t.name,e.name)}function V5(t,e){return Yw(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A2;function eoe(t){A2=t}const Qz=function(t){return typeof t=="number"?"number:"+xz(t):"string:"+t},Jz=function(t){if(t.isLeafNode()){const e=t.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fd(e,".sv"),"Priority must be a string or number.")}else Ae(t===A2||t.isEmpty(),"priority of unexpected type.");Ae(t===A2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c$;class ls{constructor(e,n=ls.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Jz(this.priorityNode_)}static set __childrenNodeConstructor(e){c$=e}static get __childrenNodeConstructor(){return c$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ls(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ls.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Yt(e)?this:Gt(e)===".priority"?this.priorityNode_:ls.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ls.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Gt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ae(r!==".priority"||lf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ls.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qz(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=xz(this.value_):e+=this.value_,this.lazyHash_=_z(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ls.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ls.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ls.VALUE_TYPE_ORDER.indexOf(n),i=ls.VALUE_TYPE_ORDER.indexOf(r);return Ae(s>=0,"Unknown leaf type: "+n),Ae(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ls.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zz,Xz;function toe(t){Zz=t}function noe(t){Xz=t}class roe extends eN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Yw(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return qt.MIN}maxPost(){return new qt(yg,new ls("[PRIORITY-POST]",Xz))}makePost(e,n){const r=Zz(e);return new qt(n,new ls("[PRIORITY-POST]",r))}toString(){return".priority"}}const Sr=new roe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const soe=Math.log(2);class ioe{constructor(e){const n=i=>parseInt(Math.log(i)/soe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rx=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new us(h,d.node,us.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new us(h,d.node,us.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,m=d;d-=p;const b=s(w+1,m),v=t[w],A=n?n(v):v;f(new us(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,us.BLACK):(h(w,us.BLACK),h(w,us.RED))}return u},o=new ioe(t.length),a=i(o);return new no(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bR;const Sm={};class $u{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ae(Sm&&Sr,"ChildrenNode.ts has not been loaded"),bR=bR||new $u({".priority":Sm},{".priority":Sr}),bR}get(e){const n=ew(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof no?n:null}hasIndex(e){return fd(this.indexSet_,e.toString())}addIndex(e,n){Ae(e!==Uy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(qt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=rx(r,e.getCompare()):a=Sm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new $u(u,l)}addToIndexes(e,n){const r=XS(this.indexes_,(s,i)=>{const o=ew(this.indexSet_,i);if(Ae(o,"Missing index implementation for "+i),s===Sm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(qt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),rx(a,o.getCompare())}else return Sm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new qt(e.name,a))),c.insert(e,e.node)}});return new $u(r,this.indexSet_)}removeFromIndexes(e,n){const r=XS(this.indexes_,s=>{if(s===Sm)return s;{const i=n.get(e.name);return i?s.remove(new qt(e.name,i)):s}});return new $u(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ub;class _t{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Jz(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ub||(Ub=new _t(new no(V5),null,$u.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ub}updatePriority(e){return this.children_.isEmpty()?this:new _t(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ub:n}}getChild(e){const n=Gt(e);return n===null?this:this.getImmediateChild(n).getChild(Xn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new qt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Ub:this.priorityNode_;return new _t(s,o,i)}}updateChild(e,n){const r=Gt(e);if(r===null)return n;{Ae(Gt(e)!==".priority"||lf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Xn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Sr,(o,a)=>{n[o]=a.val(e),r++,i&&_t.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Qz(this.getPriority().val())+":"),this.forEachChild(Sr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":_z(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new qt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new qt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new qt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,qt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,qt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===O_?-1:0}withIndex(e){if(e===Uy||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _t(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Uy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Sr),s=n.getIterator(Sr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Uy?null:this.indexMap_.get(e.toString())}}_t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ooe extends _t{constructor(){super(new no(V5),_t.EMPTY_NODE,$u.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _t.EMPTY_NODE}isEmpty(){return!1}}const O_=new ooe;Object.defineProperties(qt,{MIN:{value:new qt(tw,_t.EMPTY_NODE)},MAX:{value:new qt(yg,O_)}});Yz.__EMPTY_NODE=_t.EMPTY_NODE;ls.__childrenNodeConstructor=_t;eoe(O_);noe(O_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aoe=!0;function fs(t,e=null){if(t===null)return _t.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ls(n,fs(e))}if(!(t instanceof Array)&&aoe){const n=[];let r=!1;if(fo(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=fs(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new qt(o,c)))}}),n.length===0)return _t.EMPTY_NODE;const i=rx(n,Xie,o=>o.name,V5);if(r){const o=rx(n,Sr.getCompare());return new _t(i,fs(e),new $u({".priority":o},{".priority":Sr}))}else return new _t(i,fs(e),$u.Default)}else{let n=_t.EMPTY_NODE;return fo(t,(r,s)=>{if(fd(t,r)&&r.substring(0,1)!=="."){const i=fs(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(fs(e))}}toe(fs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe extends eN{constructor(e){super(),this.indexPath_=e,Ae(!Yt(e)&&Gt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Yw(e.name,n.name):i}makePost(e,n){const r=fs(e),s=_t.EMPTY_NODE.updateChild(this.indexPath_,r);return new qt(n,s)}maxPost(){const e=_t.EMPTY_NODE.updateChild(this.indexPath_,O_);return new qt(yg,e)}toString(){return qz(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe extends eN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Yw(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return qt.MIN}maxPost(){return qt.MAX}makePost(e,n){const r=fs(e);return new qt(n,r)}toString(){return".value"}}const uoe=new loe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(t){return{type:"value",snapshotNode:t}}function nw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function RE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function PE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function doe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(RE(n,a)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(nw(n,r)):o.trackChildChange(PE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Sr,(s,i)=>{n.hasChild(s)||r.trackChildChange(RE(s,i))}),n.isLeafNode()||n.forEachChild(Sr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(PE(s,i,o))}else r.trackChildChange(nw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?_t.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.indexedFilter_=new K5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=OE.getStartPost_(e),this.endPost_=OE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new qt(n,r))||(r=_t.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=_t.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(_t.EMPTY_NODE);const i=this;return n.forEachChild(Sr,(o,a)=>{i.matches(new qt(o,a))||(s=s.updateImmediateChild(o,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hoe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new OE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new qt(n,r))||(r=_t.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=_t.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=_t.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(_t.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,_t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ae(a.numChildren()===this.limit_,"");const c=new qt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(PE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(RE(n,d));const g=a.updateImmediateChild(n,_t.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(nw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(RE(l.name,l.node)),i.trackChildChange(nw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,_t.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sr}copy(){const e=new Y5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function foe(t){return t.loadsAllData()?new K5(t.getIndex()):t.hasLimit()?new hoe(t):new OE(t)}function l$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Sr?n="$priority":t.index_===uoe?n="$value":t.index_===Uy?n="$key":(Ae(t.index_ instanceof coe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Yr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Yr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Yr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Yr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Yr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function u$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Sr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends zz{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=P_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=sx.getListenId_(e,r),a={};this.listens_[o]=a;const c=l$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),ew(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=sx.getListenId_(e,n);delete this.listens_[r]}get(e){const n=l$(e._queryParams),r=e._path.toString(),s=new ZI;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fre(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=SE(a.responseText)}catch{io("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&io("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return{value:null,children:new Map}}function tH(t,e,n){if(Yt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Gt(e);t.children.has(r)||t.children.set(r,ix());const s=t.children.get(r);e=Xn(e),tH(s,e,n)}}function S2(t,e,n){t.value!==null?n(e,t.value):goe(t,(r,s)=>{const i=new Gn(e.toString()+"/"+r);S2(s,i,n)})}function goe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class moe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fo(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$=10*1e3,yoe=30*1e3,woe=5*60*1e3;class boe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new moe(e);const r=d$+(yoe-d$)*Math.random();qv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;fo(e,(s,i)=>{i>0&&fd(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),qv(this.reportStats_.bind(this),Math.floor(Math.random()*2*woe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xc||(xc={}));function nH(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Q5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function J5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xc.ACK_USER_WRITE,this.source=nH()}operationForChild(e){if(Yt(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Gn(e));return new ox(yn(),n,this.revert)}}else return Ae(Gt(this.path)===e,"operationForChild called for unrelated child."),new ox(Xn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.source=e,this.path=n,this.type=xc.LISTEN_COMPLETE}operationForChild(e){return Yt(this.path)?new kE(this.source,yn()):new kE(this.source,Xn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xc.OVERWRITE}operationForChild(e){return Yt(this.path)?new wg(this.source,yn(),this.snap.getImmediateChild(e)):new wg(this.source,Xn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xc.MERGE}operationForChild(e){if(Yt(this.path)){const n=this.children.subtree(new Gn(e));return n.isEmpty()?null:n.value?new wg(this.source,yn(),n.value):new DE(this.source,yn(),n)}else return Ae(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new DE(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Gt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class voe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Eoe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(doe(o.childName,o.snapshotNode))}),Bb(t,s,"child_removed",e,r,n),Bb(t,s,"child_added",e,r,n),Bb(t,s,"child_moved",i,r,n),Bb(t,s,"child_changed",e,r,n),Bb(t,s,"value",e,r,n),s}function Bb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>_oe(t,a,c)),o.forEach(a=>{const c=Coe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Coe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function _oe(t,e,n){if(e.childName==null||n.childName==null)throw Vw("Should only compare child_ events.");const r=new qt(e.childName,e.snapshotNode),s=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e){return{eventCache:t,serverCache:e}}function Vv(t,e,n,r){return tN(new uf(e,n,r),t.serverCache)}function rH(t,e,n,r){return tN(t.eventCache,new uf(e,n,r))}function ax(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR;const Aoe=()=>(vR||(vR=new no(lie)),vR);class sr{constructor(e,n=Aoe()){this.value=e,this.children=n}static fromObject(e){let n=new sr(null);return fo(e,(r,s)=>{n=n.set(new Gn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:yn(),value:this.value};if(Yt(e))return null;{const r=Gt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Xn(e),n);return i!=null?{path:Qr(new Gn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const n=Gt(e),r=this.children.get(n);return r!==null?r.subtree(Xn(e)):new sr(null)}}set(e,n){if(Yt(e))return new sr(n,this.children);{const r=Gt(e),i=(this.children.get(r)||new sr(null)).set(Xn(e),n),o=this.children.insert(r,i);return new sr(this.value,o)}}remove(e){if(Yt(e))return this.children.isEmpty()?new sr(null):new sr(null,this.children);{const n=Gt(e),r=this.children.get(n);if(r){const s=r.remove(Xn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new sr(null):new sr(this.value,i)}else return this}}get(e){if(Yt(e))return this.value;{const n=Gt(e),r=this.children.get(n);return r?r.get(Xn(e)):null}}setTree(e,n){if(Yt(e))return n;{const r=Gt(e),i=(this.children.get(r)||new sr(null)).setTree(Xn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new sr(this.value,o)}}fold(e){return this.fold_(yn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Qr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,yn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Yt(e))return null;{const i=Gt(e),o=this.children.get(i);return o?o.findOnPath_(Xn(e),Qr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,yn(),n)}foreachOnPath_(e,n,r){if(Yt(e))return this;{this.value&&r(n,this.value);const s=Gt(e),i=this.children.get(s);return i?i.foreachOnPath_(Xn(e),Qr(n,s),r):new sr(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Qr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.writeTree_=e}static empty(){return new Tc(new sr(null))}}function Kv(t,e,n){if(Yt(e))return new Tc(new sr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=bi(s,e);return i=i.updateChild(o,n),new Tc(t.writeTree_.set(s,i))}else{const s=new sr(n),i=t.writeTree_.setTree(e,s);return new Tc(i)}}}function h$(t,e,n){let r=t;return fo(n,(s,i)=>{r=Kv(r,Qr(e,s),i)}),r}function f$(t,e){if(Yt(e))return Tc.empty();{const n=t.writeTree_.setTree(e,new sr(null));return new Tc(n)}}function x2(t,e){return Jg(t,e)!=null}function Jg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(bi(n.path,e)):null}function p$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Sr,(r,s)=>{e.push(new qt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new qt(r,s.value))}),e}function Fh(t,e){if(Yt(e))return t;{const n=Jg(t,e);return n!=null?new Tc(new sr(n)):new Tc(t.writeTree_.subtree(e))}}function I2(t){return t.writeTree_.isEmpty()}function rw(t,e){return sH(yn(),t.writeTree_,e)}function sH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ae(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=sH(Qr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e){return cH(e,t)}function Soe(t,e,n,r,s){Ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Kv(t.visibleWrites,e,n)),t.lastWriteId=r}function xoe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Ioe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Noe(a,r.path)?s=!1:Sc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Toe(t),!0;if(r.snap)t.visibleWrites=f$(t.visibleWrites,r.path);else{const a=r.children;fo(a,c=>{t.visibleWrites=f$(t.visibleWrites,Qr(r.path,c))})}return!0}else return!1}function Noe(t,e){if(t.snap)return Sc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Sc(Qr(t.path,n),e))return!0;return!1}function Toe(t){t.visibleWrites=iH(t.allWrites,Roe,yn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Roe(t){return t.visible}function iH(t,e,n){let r=Tc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Sc(n,o)?(a=bi(n,o),r=Kv(r,a,i.snap)):Sc(o,n)&&(a=bi(o,n),r=Kv(r,yn(),i.snap.getChild(a)));else if(i.children){if(Sc(n,o))a=bi(n,o),r=h$(r,a,i.children);else if(Sc(o,n))if(a=bi(o,n),Yt(a))r=h$(r,yn(),i.children);else{const c=ew(i.children,Gt(a));if(c){const l=c.getChild(Xn(a));r=Kv(r,yn(),l)}}}else throw Vw("WriteRecord should have .snap or .children")}}return r}function oH(t,e,n,r,s){if(!r&&!s){const i=Jg(t.visibleWrites,e);if(i!=null)return i;{const o=Fh(t.visibleWrites,e);if(I2(o))return n;if(n==null&&!x2(o,yn()))return null;{const a=n||_t.EMPTY_NODE;return rw(o,a)}}}else{const i=Fh(t.visibleWrites,e);if(!s&&I2(i))return n;if(!s&&n==null&&!x2(i,yn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Sc(l.path,e)||Sc(e,l.path))},a=iH(t.allWrites,o,e),c=n||_t.EMPTY_NODE;return rw(a,c)}}}function Poe(t,e,n){let r=_t.EMPTY_NODE;const s=Jg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Sr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Fh(t.visibleWrites,e);return n.forEachChild(Sr,(o,a)=>{const c=rw(Fh(i,new Gn(o)),a);r=r.updateImmediateChild(o,c)}),p$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Fh(t.visibleWrites,e);return p$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Ooe(t,e,n,r,s){Ae(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Qr(e,n);if(x2(t.visibleWrites,i))return null;{const o=Fh(t.visibleWrites,i);return I2(o)?s.getChild(n):rw(o,s.getChild(n))}}function koe(t,e,n,r){const s=Qr(e,n),i=Jg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Fh(t.visibleWrites,s);return rw(o,r.getNode().getImmediateChild(n))}else return null}function Doe(t,e){return Jg(t.visibleWrites,e)}function Moe(t,e,n,r,s,i,o){let a;const c=Fh(t.visibleWrites,e),l=Jg(c,yn());if(l!=null)a=l;else if(n!=null)a=rw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Loe(){return{visibleWrites:Tc.empty(),allWrites:[],lastWriteId:-1}}function cx(t,e,n,r){return oH(t.writeTree,t.treePath,e,n,r)}function Z5(t,e){return Poe(t.writeTree,t.treePath,e)}function g$(t,e,n,r){return Ooe(t.writeTree,t.treePath,e,n,r)}function lx(t,e){return Doe(t.writeTree,Qr(t.treePath,e))}function Uoe(t,e,n,r,s,i){return Moe(t.writeTree,t.treePath,e,n,r,s,i)}function X5(t,e,n){return koe(t.writeTree,t.treePath,e,n)}function aH(t,e){return cH(Qr(t.treePath,e),t.writeTree)}function cH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ae(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,PE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,RE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,nw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,PE(r,e.snapshotNode,s.oldSnap));else throw Vw("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const lH=new $oe;class eM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new uf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bg(this.viewCache_),i=Uoe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Foe(t){return{filter:t}}function joe(t,e){Ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Woe(t,e,n,r,s){const i=new Boe;let o,a;if(n.type===xc.OVERWRITE){const l=n;l.source.fromUser?o=N2(t,e,l.path,l.snap,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Yt(l.path),o=ux(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===xc.MERGE){const l=n;l.source.fromUser?o=Hoe(t,e,l.path,l.children,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=T2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===xc.ACK_USER_WRITE){const l=n;l.revert?o=Voe(t,e,l.path,r,s,i):o=Goe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===xc.LISTEN_COMPLETE)o=qoe(t,e,n.path,r,i);else throw Vw("Unknown operation type: "+n.type);const c=i.getChanges();return zoe(e,o,c),{viewCache:o,changes:c}}function zoe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=ax(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(eH(ax(e)))}}function uH(t,e,n,r,s,i){const o=e.eventCache;if(lx(r,n)!=null)return e;{let a,c;if(Yt(n))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=bg(e),u=l instanceof _t?l:_t.EMPTY_NODE,d=Z5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=cx(r,bg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Gt(n);if(l===".priority"){Ae(lf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=g$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Xn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=g$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=X5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Vv(e,a,o.isFullyInitialized()||Yt(n),t.filter.filtersNodes())}}function ux(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Yt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Gt(n);if(!c.isCompleteForPath(n)&&lf(n)>1)return e;const p=Xn(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,lH,null)}const d=rH(e,l,c.isFullyInitialized()||Yt(n),u.filtersNodes()),h=new eM(s,d,i);return uH(t,d,n,s,h,a)}function N2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new eM(s,e,i);if(Yt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Vv(e,l,!0,t.filter.filtersNodes());else{const d=Gt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Vv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Xn(n),f=a.getNode().getImmediateChild(d);let p;if(Yt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?Gz(h)===".priority"&&g.getChild(Vz(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=_t.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Vv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function m$(t,e){return t.eventCache.isCompleteForChild(e)}function Hoe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Qr(n,c);m$(e,Gt(u))&&(a=N2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Qr(n,c);m$(e,Gt(u))||(a=N2(t,a,u,l,s,i,o))}),a}function y$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function T2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Yt(n)?l=r:l=new sr(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=y$(t,f,h);c=ux(t,c,new Gn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=y$(t,p,h);c=ux(t,c,new Gn(d),g,s,i,o,a)}}),c}function Goe(t,e,n,r,s,i,o){if(lx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Yt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ux(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Yt(n)){let l=new sr(null);return c.getNode().forEachChild(Uy,(u,d)=>{l=l.set(new Gn(u),d)}),T2(t,e,n,l,s,i,a,o)}else return e}else{let l=new sr(null);return r.foreach((u,d)=>{const h=Qr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),T2(t,e,n,l,s,i,a,o)}}function qoe(t,e,n,r,s){const i=e.serverCache,o=rH(e,i.getNode(),i.isFullyInitialized()||Yt(n),i.isFiltered());return uH(t,o,n,r,lH,s)}function Voe(t,e,n,r,s,i){let o;if(lx(r,n)!=null)return e;{const a=new eM(r,e,s),c=e.eventCache.getNode();let l;if(Yt(n)||Gt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=cx(r,bg(e));else{const d=e.serverCache.getNode();Ae(d instanceof _t,"serverChildren would be complete if leaf node"),u=Z5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Gt(n);let d=X5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Xn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,_t.EMPTY_NODE,Xn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=cx(r,bg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||lx(r,yn())!=null,Vv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Koe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new K5(r.getIndex()),i=foe(r);this.processor_=Foe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(_t.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(_t.EMPTY_NODE,a.getNode(),null),u=new uf(c,o.isFullyInitialized(),s.filtersNodes()),d=new uf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=tN(d,u),this.eventGenerator_=new voe(this.query_)}get query(){return this.query_}}function Yoe(t){return t.viewCache_.serverCache.getNode()}function Qoe(t){return ax(t.viewCache_)}function Joe(t,e){const n=bg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Yt(e)&&!n.getImmediateChild(Gt(e)).isEmpty())?n.getChild(e):null}function w$(t){return t.eventRegistrations_.length===0}function Zoe(t,e){t.eventRegistrations_.push(e)}function b$(t,e,n){const r=[];if(n){Ae(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function v$(t,e,n,r){e.type===xc.MERGE&&e.source.queryId!==null&&(Ae(bg(t.viewCache_),"We should always have a full cache before handling merges"),Ae(ax(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Woe(t.processor_,s,e,n,r);return joe(t.processor_,i.viewCache),Ae(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,dH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Xoe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Sr,(i,o)=>{r.push(nw(i,o))}),n.isFullyInitialized()&&r.push(eH(n.getNode())),dH(t,r,n.getNode(),e)}function dH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Eoe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dx;class hH{constructor(){this.views=new Map}}function eae(t){Ae(!dx,"__referenceConstructor has already been defined"),dx=t}function tae(){return Ae(dx,"Reference.ts has not been loaded"),dx}function nae(t){return t.views.size===0}function tM(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ae(i!=null,"SyncTree gave us an op for an invalid query."),v$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(v$(o,e,n,r));return i}}function fH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=cx(n,s?r:null),c=!1;a?c=!0:r instanceof _t?(a=Z5(n,r),c=!1):(a=_t.EMPTY_NODE,c=!1);const l=tN(new uf(a,c,!1),new uf(r,s,!1));return new Koe(e,l)}return o}function rae(t,e,n,r,s,i){const o=fH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Zoe(o,n),Xoe(o,n)}function sae(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=df(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(b$(l,n,r)),w$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(b$(c,n,r)),w$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!df(t)&&i.push(new(tae())(e._repo,e._path)),{removed:i,events:o}}function pH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function jh(t,e){let n=null;for(const r of t.views.values())n=n||Joe(r,e);return n}function gH(t,e){if(e._queryParams.loadsAllData())return rN(t);{const r=e._queryIdentifier;return t.views.get(r)}}function mH(t,e){return gH(t,e)!=null}function df(t){return rN(t)!=null}function rN(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hx;function iae(t){Ae(!hx,"__referenceConstructor has already been defined"),hx=t}function oae(){return Ae(hx,"Reference.ts has not been loaded"),hx}let aae=1;class E${constructor(e){this.listenProvider_=e,this.syncPointTree_=new sr(null),this.pendingWriteTree_=Loe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yH(t,e,n,r,s){return Soe(t.pendingWriteTree_,e,n,r,s),s?D_(t,new wg(nH(),e,n)):[]}function gp(t,e,n=!1){const r=xoe(t.pendingWriteTree_,e);if(Ioe(t.pendingWriteTree_,e)){let i=new sr(null);return r.snap!=null?i=i.set(yn(),!0):fo(r.children,o=>{i=i.set(new Gn(o),!0)}),D_(t,new ox(r.path,i,n))}else return[]}function k_(t,e,n){return D_(t,new wg(Q5(),e,n))}function cae(t,e,n){const r=sr.fromObject(n);return D_(t,new DE(Q5(),e,r))}function lae(t,e){return D_(t,new kE(Q5(),e))}function uae(t,e,n){const r=rM(t,n);if(r){const s=sM(r),i=s.path,o=s.queryId,a=bi(i,e),c=new kE(J5(o),a);return iM(t,i,c)}else return[]}function fx(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||mH(o,e))){const c=sae(o,e,n,r);nae(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>df(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=fae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,m=EH(t,g);t.listenProvider_.startListening(Yv(w),ME(t,w),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Yv(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(sN(h));t.listenProvider_.stopListening(Yv(h),f)}))}pae(t,l)}return a}function wH(t,e,n,r){const s=rM(t,r);if(s!=null){const i=sM(s),o=i.path,a=i.queryId,c=bi(o,e),l=new wg(J5(a),c,n);return iM(t,o,l)}else return[]}function dae(t,e,n,r){const s=rM(t,r);if(s){const i=sM(s),o=i.path,a=i.queryId,c=bi(o,e),l=sr.fromObject(n),u=new DE(J5(a),c,l);return iM(t,o,u)}else return[]}function R2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=bi(h,s);i=i||jh(f,p),o=o||df(f)});let a=t.syncPointTree_.get(s);a?(o=o||df(a),i=i||jh(a,yn())):(a=new hH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=_t.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=jh(p,yn());g&&(i=i.updateImmediateChild(f,g))}));const l=mH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=sN(e);Ae(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=gae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=nN(t.pendingWriteTree_,s);let d=rae(a,e,n,u,i,c);if(!l&&!o&&!r){const h=gH(a,e);d=d.concat(mae(t,e,h))}return d}function nM(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=bi(o,e),l=jh(a,c);if(l)return l});return oH(s,e,i,n,!0)}function hae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=bi(l,n);r=r||jh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||jh(s,yn()):(s=new hH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new uf(r,!0,!1):null,a=nN(t.pendingWriteTree_,e._path),c=fH(s,e,a,i?o.getNode():_t.EMPTY_NODE,i);return Qoe(c)}function D_(t,e){return bH(e,t.syncPointTree_,null,nN(t.pendingWriteTree_,yn()))}function bH(t,e,n,r){if(Yt(t.path))return vH(t,e,n,r);{const s=e.get(yn());n==null&&s!=null&&(n=jh(s,yn()));let i=[];const o=Gt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=aH(r,o);i=i.concat(bH(a,c,l,u))}return s&&(i=i.concat(tM(s,t,r,n))),i}}function vH(t,e,n,r){const s=e.get(yn());n==null&&s!=null&&(n=jh(s,yn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=aH(r,o),u=t.operationForChild(o);u&&(i=i.concat(vH(u,a,c,l)))}),s&&(i=i.concat(tM(s,t,r,n))),i}function EH(t,e){const n=e.query,r=ME(t,n);return{hashFn:()=>(Yoe(e)||_t.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?uae(t,n._path,r):lae(t,n._path);{const i=hie(s,n);return fx(t,n,null,i)}}}}function ME(t,e){const n=sN(e);return t.queryToTagMap.get(n)}function sN(t){return t._path.toString()+"$"+t._queryIdentifier}function rM(t,e){return t.tagToQueryMap.get(e)}function sM(t){const e=t.indexOf("$");return Ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Gn(t.substr(0,e))}}function iM(t,e,n){const r=t.syncPointTree_.get(e);Ae(r,"Missing sync point for query tag that we're tracking");const s=nN(t.pendingWriteTree_,e);return tM(r,n,s,null)}function fae(t){return t.fold((e,n,r)=>{if(n&&df(n))return[rN(n)];{let s=[];return n&&(s=pH(n)),fo(r,(i,o)=>{s=s.concat(o)}),s}})}function Yv(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(oae())(t._repo,t._path):t}function pae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=sN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function gae(){return aae++}function mae(t,e,n){const r=e._path,s=ME(t,e),i=EH(t,n),o=t.listenProvider_.startListening(Yv(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ae(!df(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Yt(l)&&u&&df(u))return[rN(u).query];{let h=[];return u&&(h=h.concat(pH(u).map(f=>f.query))),fo(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Yv(u),ME(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new oM(n)}node(){return this.node_}}class aM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qr(this.path_,e);return new aM(this.syncTree_,n)}node(){return nM(this.syncTree_,this.path_)}}const yae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},C$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return wae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bae(t[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},wae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ae(!1,"Unexpected server value: "+t)}},bae=function(t,e,n){t.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ae(!1,"Unexpected increment value: "+r);const s=e.node();if(Ae(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},vae=function(t,e,n,r){return cM(e,new aM(n,t),r)},CH=function(t,e,n){return cM(t,new oM(e),n)};function cM(t,e,n){const r=t.getPriority().val(),s=C$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=C$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ls(a,fs(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ls(s))),o.forEachChild(Sr,(a,c)=>{const l=cM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function uM(t,e){let n=e instanceof Gn?e:new Gn(e),r=t,s=Gt(n);for(;s!==null;){const i=ew(r.node.children,s)||{children:{},childCount:0};r=new lM(s,r,i),n=Xn(n),s=Gt(n)}return r}function Jw(t){return t.node.value}function _H(t,e){t.node.value=e,P2(t)}function AH(t){return t.node.childCount>0}function Eae(t){return Jw(t)===void 0&&!AH(t)}function iN(t,e){fo(t.node.children,(n,r)=>{e(new lM(n,t,r))})}function SH(t,e,n,r){n&&e(t),iN(t,s=>{SH(s,e,!0)})}function Cae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function M_(t){return new Gn(t.parent===null?t.name:M_(t.parent)+"/"+t.name)}function P2(t){t.parent!==null&&_ae(t.parent,t.name,t)}function _ae(t,e,n){const r=Eae(n),s=fd(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,P2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,P2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aae=/[\[\].#$\/\u0000-\u001F\u007F]/,Sae=/[\[\].#$\u0000-\u001F\u007F]/,ER=10*1024*1024,xH=function(t){return typeof t=="string"&&t.length!==0&&!Aae.test(t)},IH=function(t){return typeof t=="string"&&t.length!==0&&!Sae.test(t)},xae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),IH(t)},Iae=function(t,e,n,r){dM($5(t,"value"),e,n)},dM=function(t,e,n){const r=n instanceof Gn?new Gie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yf(r));if(typeof e=="function")throw new Error(t+"contains a function "+Yf(r)+" with contents = "+e.toString());if(Az(e))throw new Error(t+"contains "+e.toString()+" "+Yf(r));if(typeof e=="string"&&e.length>ER/3&&XI(e)>ER)throw new Error(t+"contains a string greater than "+ER+" utf8 bytes "+Yf(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(fo(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!xH(o)))throw new Error(t+" contains an invalid key ("+o+") "+Yf(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qie(r,o),dM(t,a,r),Vie(r)}),s&&i)throw new Error(t+' contains ".value" child '+Yf(r)+" in addition to actual children.")}},NH=function(t,e,n,r){if(!IH(n))throw new Error($5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Nae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),NH(t,e,n)},TH=function(t,e){if(Gt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Tae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xH(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!xae(n))throw new Error($5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hM(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!G5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function RH(t,e,n){hM(t,n),PH(t,r=>G5(r,e))}function $l(t,e,n){hM(t,n),PH(t,r=>Sc(r,e)||Sc(e,r))}function PH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Pae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Pae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Gv&&ei("event: "+n.toString()),Qw(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oae="repo_interrupt",kae=25;class Dae{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ix(),this.transactionQueueTree_=new lM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mae(t,e,n){if(t.stats_=z5(t.repoInfo_),t.forceRestClient_||mie())t.server_=new sx(t.repoInfo_,(r,s,i,o)=>{_$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>A$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Gu(t.repoInfo_,e,(r,s,i,o)=>{_$(t,r,s,i,o)},r=>{A$(t,r)},r=>{Uae(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Eie(t.repoInfo_,()=>new boe(t.stats_,t.server_)),t.infoData_=new poe,t.infoSyncTree_=new E$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=k_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),pM(t,"connected",!1),t.serverSyncTree_=new E$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);$l(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Lae(t){const n=t.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function fM(t){return yae({timestamp:Lae(t)})}function _$(t,e,n,r,s){t.dataUpdateCount++;const i=new Gn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=XS(n,l=>fs(l));o=dae(t.serverSyncTree_,i,c,s)}else{const c=fs(n);o=wH(t.serverSyncTree_,i,c,s)}else if(r){const c=XS(n,l=>fs(l));o=cae(t.serverSyncTree_,i,c)}else{const c=fs(n);o=k_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=aN(t,i)),$l(t.eventQueue_,a,o)}function A$(t,e){pM(t,"connected",e),e===!1&&Fae(t)}function Uae(t,e){fo(e,(n,r)=>{pM(t,n,r)})}function pM(t,e,n){const r=new Gn("/.info/"+e),s=fs(n);t.infoData_.updateSnapshot(r,s);const i=k_(t.infoSyncTree_,r,s);$l(t.eventQueue_,r,i)}function OH(t){return t.nextWriteId_++}function Bae(t,e,n){const r=hae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=fs(s).withIndex(e._queryParams.getIndex());R2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=k_(t.serverSyncTree_,e._path,i);else{const a=ME(t.serverSyncTree_,e);o=wH(t.serverSyncTree_,e._path,i,a)}return $l(t.eventQueue_,e._path,o),fx(t.serverSyncTree_,e,n,null,!0),i},s=>(oN(t,"get for query "+Yr(e)+" failed: "+s),Promise.reject(new Error(s))))}function $ae(t,e,n,r,s){oN(t,"set",{path:e.toString(),value:n,priority:r});const i=fM(t),o=fs(n,r),a=nM(t.serverSyncTree_,e),c=CH(o,a,i),l=OH(t),u=yH(t.serverSyncTree_,e,c,l,!0);hM(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||io("set at "+e+" failed: "+h);const g=gp(t.serverSyncTree_,l,!p);$l(t.eventQueue_,e,g),Hae(t,s,h,f)});const d=UH(t,e);aN(t,d),$l(t.eventQueue_,d,[])}function Fae(t){oN(t,"onDisconnectEvents");const e=fM(t),n=ix();S2(t.onDisconnect_,yn(),(s,i)=>{const o=vae(s,i,t.serverSyncTree_,e);tH(n,s,o)});let r=[];S2(n,yn(),(s,i)=>{r=r.concat(k_(t.serverSyncTree_,s,i));const o=UH(t,s);aN(t,o)}),t.onDisconnect_=ix(),$l(t.eventQueue_,yn(),r)}function jae(t,e,n){let r;Gt(e._path)===".info"?r=R2(t.infoSyncTree_,e,n):r=R2(t.serverSyncTree_,e,n),RH(t.eventQueue_,e._path,r)}function Wae(t,e,n){let r;Gt(e._path)===".info"?r=fx(t.infoSyncTree_,e,n):r=fx(t.serverSyncTree_,e,n),RH(t.eventQueue_,e._path,r)}function zae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Oae)}function oN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ei(n,...e)}function Hae(t,e,n,r){e&&Qw(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function kH(t,e,n){return nM(t.serverSyncTree_,e,n)||_t.EMPTY_NODE}function gM(t,e=t.transactionQueueTree_){if(e||cN(t,e),Jw(e)){const n=MH(t,e);Ae(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Gae(t,M_(e),n)}else AH(e)&&iN(e,n=>{gM(t,n)})}function Gae(t,e,n){const r=n.map(l=>l.currentWriteId),s=kH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ae(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=bi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{oN(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(gp(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();cN(t,uM(t.transactionQueueTree_,e)),gM(t,t.transactionQueueTree_),$l(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Qw(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{io("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}aN(t,e)}},o)}function aN(t,e){const n=DH(t,e),r=M_(n),s=MH(t,n);return qae(t,s,r),r}function qae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=bi(n,c.path);let u=!1,d;if(Ae(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(gp(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=kae)u=!0,d="maxretry",s=s.concat(gp(t.serverSyncTree_,c.currentWriteId,!0));else{const h=kH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){dM("transaction failed: Data returned ",f,c.path);let p=fs(f);typeof f=="object"&&f!=null&&fd(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,m=fM(t),b=CH(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=OH(t),o.splice(o.indexOf(w),1),s=s.concat(yH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(gp(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(gp(t.serverSyncTree_,c.currentWriteId,!0))}$l(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}cN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Qw(r[a]);gM(t,t.transactionQueueTree_)}function DH(t,e){let n,r=t.transactionQueueTree_;for(n=Gt(e);n!==null&&Jw(r)===void 0;)r=uM(r,n),e=Xn(e),n=Gt(e);return r}function MH(t,e){const n=[];return LH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function LH(t,e,n){const r=Jw(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);iN(e,s=>{LH(t,s,n)})}function cN(t,e){const n=Jw(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,_H(e,n.length>0?n:void 0)}iN(e,r=>{cN(t,r)})}function UH(t,e){const n=M_(DH(t,e)),r=uM(t.transactionQueueTree_,e);return Cae(r,s=>{CR(t,s)}),CR(t,r),SH(r,s=>{CR(t,s)}),n}function CR(t,e){const n=Jw(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ae(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(gp(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?_H(e,void 0):n.length=i+1,$l(t.eventQueue_,M_(e),s);for(let o=0;o<r.length;o++)Qw(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Kae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):io(`Invalid query segment '${n}' in query '${t}'`)}return e}const S$=function(t,e){const n=Yae(t),r=n.namespace;n.domain==="firebase.com"&&nd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&nd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||aie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Lz(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Gn(n.pathString)}},Yae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=Vae(t.substring(u,d)));const h=Kae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Yr(this.snapshot.exportVal())}}class Jae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Yt(this._path)?null:Gz(this._path)}get ref(){return new pd(this._repo,this._path)}get _queryIdentifier(){const e=u$(this._queryParams),n=j5(e);return n==="{}"?"default":n}get _queryObject(){return u$(this._queryParams)}isEqual(e){if(e=Kw(e),!(e instanceof mM))return!1;const n=this._repo===e._repo,r=G5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Hie(this._path)}}class pd extends mM{constructor(e,n){super(e,n,new Y5,!1)}get parent(){const e=Vz(this._path);return e===null?null:new pd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class LE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Gn(e),r=O2(this.ref,e);return new LE(this._node.getChild(n),r,Sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new LE(s,O2(this.ref,r),Sr)))}hasChild(e){const n=new Gn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ro(t,e){return t=Kw(t),t._checkNotDeleted("ref"),e!==void 0?O2(t._root,e):t._root}function O2(t,e){return t=Kw(t),Gt(t._path)===null?Nae("child","path",e):NH("child","path",e),new pd(t._repo,Qr(t._path,e))}function $H(t){return TH("remove",t._path),Qv(t,null)}function Qv(t,e){t=Kw(t),TH("set",t._path),Iae("set",e,t._path);const n=new ZI;return $ae(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function rp(t){t=Kw(t);const e=new BH(()=>{}),n=new lN(e);return Bae(t._repo,t,n).then(r=>new LE(r,new pd(t._repo,t._path),t._queryParams.getIndex()))}class lN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Qae("value",this,new LE(e.snapshotNode,new pd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Jae(this,e,n):null}matches(e){return e instanceof lN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Zae(t,e,n,r,s){const i=new BH(n,void 0),o=new lN(i);return jae(t._repo,t,o),()=>Wae(t._repo,t,o)}function x$(t,e,n,r){return Zae(t,"value",e)}eae(pd);iae(pd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xae="FIREBASE_DATABASE_EMULATOR_HOST",k2={};let ece=!1;function tce(t,e,n,r){t.repoInfo_=new Lz(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function nce(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||nd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ei("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=S$(i,s),a=o.repoInfo,c;typeof process<"u"&&qB&&(c=qB[Xae]),c?(i=`http://${c}?ns=${a.namespace}`,o=S$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new wie(t.name,t.options,e);Tae("Invalid Firebase Database URL",o),Yt(o.path)||nd("Database URL must point to the root of a Firebase Database (not including a child path).");const u=sce(a,t,l,new yie(t.name,n));return new ice(u,t)}function rce(t,e){const n=k2[e];(!n||n[t.key]!==t)&&nd(`Database ${e}(${t.repoInfo_}) has already been deleted.`),zae(t),delete n[t.key]}function sce(t,e,n,r){let s=k2[e.name];s||(s={},k2[e.name]=s);let i=s[t.toURLString()];return i&&nd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Dae(t,ece,n,r),s[t.toURLString()]=i,i}class ice{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Mae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pd(this._repo,yn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&nd("Cannot call "+e+" on a deleted database.")}}function oce(t=wz(),e){const n=$se(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Nre("database");r&&ace(n,...r)}return n}function ace(t,e,n,r={}){t=Kw(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&nd("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&nd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new oS(oS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Tre(r.mockUserToken,t.app.options.projectId);i=new oS(o)}tce(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cce(t){tie(Wse),ex(new xE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return nce(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),My(VB,KB,t),My(VB,KB,"esm2017")}Gu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};cce();const lce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},uce=zse().length?wz():yz(lce),px=oce(uce);var D2={},FH={exports:{}},Qo={},jH={exports:{}},WH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,M){var j=O.length;O.push(M);e:for(;0<j;){var V=j-1>>>1,se=O[V];if(0<s(se,M))O[V]=M,O[j]=se,j=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],j=O.pop();if(j!==M){O[0]=j;e:for(var V=0,se=O.length,ie=se>>>1;V<ie;){var Q=2*(V+1)-1,te=O[Q],pe=Q+1,Ze=O[pe];if(0>s(te,j))pe<se&&0>s(Ze,te)?(O[V]=Ze,O[pe]=j,V=pe):(O[V]=te,O[Q]=j,V=Q);else if(pe<se&&0>s(Ze,j))O[V]=Ze,O[pe]=j,V=pe;else break e}}return M}function s(O,M){var j=O.sortIndex-M.sortIndex;return j!==0?j:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=O)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(O){if(g=!1,v(O),!p)if(n(c)!==null)p=!0,R(C);else{var M=n(l);M!==null&&B(A,M.startTime-O)}}function C(O,M){p=!1,g&&(g=!1,m(N),N=-1),f=!0;var j=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||O&&!P());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var se=V(d.expirationTime<=M);M=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var ie=!0;else{var Q=n(l);Q!==null&&B(A,Q.startTime-M),ie=!1}return ie}finally{d=null,h=j,f=!1}}var T=!1,x=null,N=-1,S=5,D=-1;function P(){return!(t.unstable_now()-D<S)}function $(){if(x!==null){var O=t.unstable_now();D=O;var M=!0;try{M=x(!0,O)}finally{M?G():(T=!1,x=null)}}else T=!1}var G;if(typeof b=="function")G=function(){b($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,I=W.port2;W.port1.onmessage=$,G=function(){I.postMessage(null)}}else G=function(){w($,0)};function R(O){x=O,T||(T=!0,G())}function B(O,M){N=w(function(){O(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(C))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var j=h;h=M;try{return O()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var j=h;h=O;try{return M()}finally{h=j}},t.unstable_scheduleCallback=function(O,M,j){var V=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,O){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=j+se,O={id:u++,callback:M,priorityLevel:O,startTime:j,expirationTime:se,sortIndex:-1},j>V?(O.sortIndex=j,e(l,O),n(c)===null&&O===n(l)&&(g?(m(N),N=-1):g=!0,B(A,j-V))):(O.sortIndex=se,e(c,O),p||f||(p=!0,R(C))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var M=h;return function(){var j=h;h=M;try{return O.apply(this,arguments)}finally{h=j}}}})(WH);jH.exports=WH;var dce=jH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hce=k,Vo=dce;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zH=new Set,UE={};function Zg(t,e){sw(t,e),sw(t+"Capture",e)}function sw(t,e){for(UE[t]=e,t=0;t<e.length;t++)zH.add(e[t])}var rd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),M2=Object.prototype.hasOwnProperty,fce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I$={},N$={};function pce(t){return M2.call(N$,t)?!0:M2.call(I$,t)?!1:fce.test(t)?N$[t]=!0:(I$[t]=!0,!1)}function gce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mce(t,e,n,r){if(e===null||typeof e>"u"||gce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ti(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $s={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$s[t]=new Ti(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$s[e]=new Ti(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$s[t]=new Ti(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$s[t]=new Ti(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$s[t]=new Ti(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$s[t]=new Ti(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$s[t]=new Ti(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$s[t]=new Ti(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$s[t]=new Ti(t,5,!1,t.toLowerCase(),null,!1,!1)});var yM=/[\-:]([a-z])/g;function wM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yM,wM);$s[e]=new Ti(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yM,wM);$s[e]=new Ti(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yM,wM);$s[e]=new Ti(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$s[t]=new Ti(t,1,!1,t.toLowerCase(),null,!1,!1)});$s.xlinkHref=new Ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$s[t]=new Ti(t,1,!1,t.toLowerCase(),null,!0,!0)});function bM(t,e,n,r){var s=$s.hasOwnProperty(e)?$s[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mce(e,n,s,r)&&(n=null),r||s===null?pce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gd=hce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z1=Symbol.for("react.element"),fy=Symbol.for("react.portal"),py=Symbol.for("react.fragment"),vM=Symbol.for("react.strict_mode"),L2=Symbol.for("react.profiler"),HH=Symbol.for("react.provider"),GH=Symbol.for("react.context"),EM=Symbol.for("react.forward_ref"),U2=Symbol.for("react.suspense"),B2=Symbol.for("react.suspense_list"),CM=Symbol.for("react.memo"),qd=Symbol.for("react.lazy"),qH=Symbol.for("react.offscreen"),T$=Symbol.iterator;function $b(t){return t===null||typeof t!="object"?null:(t=T$&&t[T$]||t["@@iterator"],typeof t=="function"?t:null)}var br=Object.assign,_R;function vv(t){if(_R===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_R=e&&e[1]||""}return`
`+_R+t}var AR=!1;function SR(t,e){if(!t||AR)return"";AR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{AR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vv(t):""}function yce(t){switch(t.tag){case 5:return vv(t.type);case 16:return vv("Lazy");case 13:return vv("Suspense");case 19:return vv("SuspenseList");case 0:case 2:case 15:return t=SR(t.type,!1),t;case 11:return t=SR(t.type.render,!1),t;case 1:return t=SR(t.type,!0),t;default:return""}}function $2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case py:return"Fragment";case fy:return"Portal";case L2:return"Profiler";case vM:return"StrictMode";case U2:return"Suspense";case B2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GH:return(t.displayName||"Context")+".Consumer";case HH:return(t._context.displayName||"Context")+".Provider";case EM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case CM:return e=t.displayName||null,e!==null?e:$2(t.type)||"Memo";case qd:e=t._payload,t=t._init;try{return $2(t(e))}catch{}}return null}function wce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $2(e);case 8:return e===vM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bce(t){var e=VH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function H1(t){t._valueTracker||(t._valueTracker=bce(t))}function KH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function F2(t,e){var n=e.checked;return br({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function R$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YH(t,e){e=e.checked,e!=null&&bM(t,"checked",e,!1)}function j2(t,e){YH(t,e);var n=hf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?W2(t,e.type,n):e.hasOwnProperty("defaultValue")&&W2(t,e.type,hf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function W2(t,e,n){(e!=="number"||gx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ev=Array.isArray;function By(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function z2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return br({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(Ev(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hf(n)}}function QH(t,e){var n=hf(e.value),r=hf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function k$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var G1,ZH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(G1=G1||document.createElement("div"),G1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=G1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function BE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vce=["Webkit","ms","Moz","O"];Object.keys(Jv).forEach(function(t){vce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jv[e]=Jv[t]})});function XH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jv.hasOwnProperty(t)&&Jv[t]?(""+e).trim():e+"px"}function eG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Ece=br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G2(t,e){if(e){if(Ece[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function q2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V2=null;function _M(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var K2=null,$y=null,Fy=null;function D$(t){if(t=B_(t)){if(typeof K2!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=pN(e),K2(t.stateNode,t.type,e))}}function tG(t){$y?Fy?Fy.push(t):Fy=[t]:$y=t}function nG(){if($y){var t=$y,e=Fy;if(Fy=$y=null,D$(t),e)for(t=0;t<e.length;t++)D$(e[t])}}function rG(t,e){return t(e)}function sG(){}var xR=!1;function iG(t,e,n){if(xR)return t(e,n);xR=!0;try{return rG(t,e,n)}finally{xR=!1,($y!==null||Fy!==null)&&(sG(),nG())}}function $E(t,e){var n=t.stateNode;if(n===null)return null;var r=pN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var Y2=!1;if(rd)try{var Fb={};Object.defineProperty(Fb,"passive",{get:function(){Y2=!0}}),window.addEventListener("test",Fb,Fb),window.removeEventListener("test",Fb,Fb)}catch{Y2=!1}function Cce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Zv=!1,mx=null,yx=!1,Q2=null,_ce={onError:function(t){Zv=!0,mx=t}};function Ace(t,e,n,r,s,i,o,a,c){Zv=!1,mx=null,Cce.apply(_ce,arguments)}function Sce(t,e,n,r,s,i,o,a,c){if(Ace.apply(this,arguments),Zv){if(Zv){var l=mx;Zv=!1,mx=null}else throw Error(Ee(198));yx||(yx=!0,Q2=l)}}function Xg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M$(t){if(Xg(t)!==t)throw Error(Ee(188))}function xce(t){var e=t.alternate;if(!e){if(e=Xg(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return M$(s),t;if(i===r)return M$(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function aG(t){return t=xce(t),t!==null?cG(t):null}function cG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cG(t);if(e!==null)return e;t=t.sibling}return null}var lG=Vo.unstable_scheduleCallback,L$=Vo.unstable_cancelCallback,Ice=Vo.unstable_shouldYield,Nce=Vo.unstable_requestPaint,Pr=Vo.unstable_now,Tce=Vo.unstable_getCurrentPriorityLevel,AM=Vo.unstable_ImmediatePriority,uG=Vo.unstable_UserBlockingPriority,wx=Vo.unstable_NormalPriority,Rce=Vo.unstable_LowPriority,dG=Vo.unstable_IdlePriority,uN=null,Pl=null;function Pce(t){if(Pl&&typeof Pl.onCommitFiberRoot=="function")try{Pl.onCommitFiberRoot(uN,t,void 0,(t.current.flags&128)===128)}catch{}}var Rc=Math.clz32?Math.clz32:Dce,Oce=Math.log,kce=Math.LN2;function Dce(t){return t>>>=0,t===0?32:31-(Oce(t)/kce|0)|0}var q1=64,V1=4194304;function Cv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Cv(a):(i&=o,i!==0&&(r=Cv(i)))}else o=n&~s,o!==0?r=Cv(o):i!==0&&(r=Cv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rc(e),s=1<<n,r|=t[n],e&=~s;return r}function Mce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lce(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Rc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Mce(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function J2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hG(){var t=q1;return q1<<=1,!(q1&4194240)&&(q1=64),t}function IR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function L_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rc(e),t[e]=n}function Uce(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Rc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function SM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pn=0;function fG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pG,xM,gG,mG,yG,Z2=!1,K1=[],Wh=null,zh=null,Hh=null,FE=new Map,jE=new Map,Zd=[],Bce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U$(t,e){switch(t){case"focusin":case"focusout":Wh=null;break;case"dragenter":case"dragleave":zh=null;break;case"mouseover":case"mouseout":Hh=null;break;case"pointerover":case"pointerout":FE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jE.delete(e.pointerId)}}function jb(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=B_(e),e!==null&&xM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $ce(t,e,n,r,s){switch(e){case"focusin":return Wh=jb(Wh,t,e,n,r,s),!0;case"dragenter":return zh=jb(zh,t,e,n,r,s),!0;case"mouseover":return Hh=jb(Hh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return FE.set(i,jb(FE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jE.set(i,jb(jE.get(i)||null,t,e,n,r,s)),!0}return!1}function wG(t){var e=mp(t.target);if(e!==null){var n=Xg(e);if(n!==null){if(e=n.tag,e===13){if(e=oG(n),e!==null){t.blockedOn=e,yG(t.priority,function(){gG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function aS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=X2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);V2=r,n.target.dispatchEvent(r),V2=null}else return e=B_(n),e!==null&&xM(e),t.blockedOn=n,!1;e.shift()}return!0}function B$(t,e,n){aS(t)&&n.delete(e)}function Fce(){Z2=!1,Wh!==null&&aS(Wh)&&(Wh=null),zh!==null&&aS(zh)&&(zh=null),Hh!==null&&aS(Hh)&&(Hh=null),FE.forEach(B$),jE.forEach(B$)}function Wb(t,e){t.blockedOn===e&&(t.blockedOn=null,Z2||(Z2=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,Fce)))}function WE(t){function e(s){return Wb(s,t)}if(0<K1.length){Wb(K1[0],t);for(var n=1;n<K1.length;n++){var r=K1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wh!==null&&Wb(Wh,t),zh!==null&&Wb(zh,t),Hh!==null&&Wb(Hh,t),FE.forEach(e),jE.forEach(e),n=0;n<Zd.length;n++)r=Zd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zd.length&&(n=Zd[0],n.blockedOn===null);)wG(n),n.blockedOn===null&&Zd.shift()}var jy=gd.ReactCurrentBatchConfig,vx=!0;function jce(t,e,n,r){var s=Pn,i=jy.transition;jy.transition=null;try{Pn=1,IM(t,e,n,r)}finally{Pn=s,jy.transition=i}}function Wce(t,e,n,r){var s=Pn,i=jy.transition;jy.transition=null;try{Pn=4,IM(t,e,n,r)}finally{Pn=s,jy.transition=i}}function IM(t,e,n,r){if(vx){var s=X2(t,e,n,r);if(s===null)UR(t,e,r,Ex,n),U$(t,r);else if($ce(s,t,e,n,r))r.stopPropagation();else if(U$(t,r),e&4&&-1<Bce.indexOf(t)){for(;s!==null;){var i=B_(s);if(i!==null&&pG(i),i=X2(t,e,n,r),i===null&&UR(t,e,r,Ex,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else UR(t,e,r,null,n)}}var Ex=null;function X2(t,e,n,r){if(Ex=null,t=_M(r),t=mp(t),t!==null)if(e=Xg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ex=t,null}function bG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tce()){case AM:return 1;case uG:return 4;case wx:case Rce:return 16;case dG:return 536870912;default:return 16}default:return 16}}var Rh=null,NM=null,cS=null;function vG(){if(cS)return cS;var t,e=NM,n=e.length,r,s="value"in Rh?Rh.value:Rh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cS=s.slice(t,1<r?1-r:void 0)}function lS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Y1(){return!0}function $$(){return!1}function Jo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Y1:$$,this.isPropagationStopped=$$,this}return br(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Y1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Y1)},persist:function(){},isPersistent:Y1}),e}var Zw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TM=Jo(Zw),U_=br({},Zw,{view:0,detail:0}),zce=Jo(U_),NR,TR,zb,dN=br({},U_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zb&&(zb&&t.type==="mousemove"?(NR=t.screenX-zb.screenX,TR=t.screenY-zb.screenY):TR=NR=0,zb=t),NR)},movementY:function(t){return"movementY"in t?t.movementY:TR}}),F$=Jo(dN),Hce=br({},dN,{dataTransfer:0}),Gce=Jo(Hce),qce=br({},U_,{relatedTarget:0}),RR=Jo(qce),Vce=br({},Zw,{animationName:0,elapsedTime:0,pseudoElement:0}),Kce=Jo(Vce),Yce=br({},Zw,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qce=Jo(Yce),Jce=br({},Zw,{data:0}),j$=Jo(Jce),Zce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ele={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ele[t])?!!e[t]:!1}function RM(){return tle}var nle=br({},U_,{key:function(t){if(t.key){var e=Zce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RM,charCode:function(t){return t.type==="keypress"?lS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rle=Jo(nle),sle=br({},dN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W$=Jo(sle),ile=br({},U_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RM}),ole=Jo(ile),ale=br({},Zw,{propertyName:0,elapsedTime:0,pseudoElement:0}),cle=Jo(ale),lle=br({},dN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ule=Jo(lle),dle=[9,13,27,32],PM=rd&&"CompositionEvent"in window,Xv=null;rd&&"documentMode"in document&&(Xv=document.documentMode);var hle=rd&&"TextEvent"in window&&!Xv,EG=rd&&(!PM||Xv&&8<Xv&&11>=Xv),z$=" ",H$=!1;function CG(t,e){switch(t){case"keyup":return dle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _G(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gy=!1;function fle(t,e){switch(t){case"compositionend":return _G(e);case"keypress":return e.which!==32?null:(H$=!0,z$);case"textInput":return t=e.data,t===z$&&H$?null:t;default:return null}}function ple(t,e){if(gy)return t==="compositionend"||!PM&&CG(t,e)?(t=vG(),cS=NM=Rh=null,gy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EG&&e.locale!=="ko"?null:e.data;default:return null}}var gle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gle[t.type]:e==="textarea"}function AG(t,e,n,r){tG(r),e=Cx(e,"onChange"),0<e.length&&(n=new TM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eE=null,zE=null;function mle(t){MG(t,0)}function hN(t){var e=wy(t);if(KH(e))return t}function yle(t,e){if(t==="change")return e}var SG=!1;if(rd){var PR;if(rd){var OR="oninput"in document;if(!OR){var q$=document.createElement("div");q$.setAttribute("oninput","return;"),OR=typeof q$.oninput=="function"}PR=OR}else PR=!1;SG=PR&&(!document.documentMode||9<document.documentMode)}function V$(){eE&&(eE.detachEvent("onpropertychange",xG),zE=eE=null)}function xG(t){if(t.propertyName==="value"&&hN(zE)){var e=[];AG(e,zE,t,_M(t)),iG(mle,e)}}function wle(t,e,n){t==="focusin"?(V$(),eE=e,zE=n,eE.attachEvent("onpropertychange",xG)):t==="focusout"&&V$()}function ble(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hN(zE)}function vle(t,e){if(t==="click")return hN(e)}function Ele(t,e){if(t==="input"||t==="change")return hN(e)}function Cle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dc=typeof Object.is=="function"?Object.is:Cle;function HE(t,e){if(Dc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!M2.call(e,s)||!Dc(t[s],e[s]))return!1}return!0}function K$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y$(t,e){var n=K$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K$(n)}}function IG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NG(){for(var t=window,e=gx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gx(t.document)}return e}function OM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _le(t){var e=NG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IG(n.ownerDocument.documentElement,n)){if(r!==null&&OM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Y$(n,i);var o=Y$(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ale=rd&&"documentMode"in document&&11>=document.documentMode,my=null,ek=null,tE=null,tk=!1;function Q$(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tk||my==null||my!==gx(r)||(r=my,"selectionStart"in r&&OM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tE&&HE(tE,r)||(tE=r,r=Cx(ek,"onSelect"),0<r.length&&(e=new TM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=my)))}function Q1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yy={animationend:Q1("Animation","AnimationEnd"),animationiteration:Q1("Animation","AnimationIteration"),animationstart:Q1("Animation","AnimationStart"),transitionend:Q1("Transition","TransitionEnd")},kR={},TG={};rd&&(TG=document.createElement("div").style,"AnimationEvent"in window||(delete yy.animationend.animation,delete yy.animationiteration.animation,delete yy.animationstart.animation),"TransitionEvent"in window||delete yy.transitionend.transition);function fN(t){if(kR[t])return kR[t];if(!yy[t])return t;var e=yy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TG)return kR[t]=e[n];return t}var RG=fN("animationend"),PG=fN("animationiteration"),OG=fN("animationstart"),kG=fN("transitionend"),DG=new Map,J$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xf(t,e){DG.set(t,e),Zg(e,[t])}for(var DR=0;DR<J$.length;DR++){var MR=J$[DR],Sle=MR.toLowerCase(),xle=MR[0].toUpperCase()+MR.slice(1);xf(Sle,"on"+xle)}xf(RG,"onAnimationEnd");xf(PG,"onAnimationIteration");xf(OG,"onAnimationStart");xf("dblclick","onDoubleClick");xf("focusin","onFocus");xf("focusout","onBlur");xf(kG,"onTransitionEnd");sw("onMouseEnter",["mouseout","mouseover"]);sw("onMouseLeave",["mouseout","mouseover"]);sw("onPointerEnter",["pointerout","pointerover"]);sw("onPointerLeave",["pointerout","pointerover"]);Zg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _v="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ile=new Set("cancel close invalid load scroll toggle".split(" ").concat(_v));function Z$(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Sce(r,e,void 0,t),t.currentTarget=null}function MG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Z$(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Z$(s,a,l),i=c}}}if(yx)throw t=Q2,yx=!1,Q2=null,t}function nr(t,e){var n=e[ok];n===void 0&&(n=e[ok]=new Set);var r=t+"__bubble";n.has(r)||(LG(e,t,2,!1),n.add(r))}function LR(t,e,n){var r=0;e&&(r|=4),LG(n,t,r,e)}var J1="_reactListening"+Math.random().toString(36).slice(2);function GE(t){if(!t[J1]){t[J1]=!0,zH.forEach(function(n){n!=="selectionchange"&&(Ile.has(n)||LR(n,!1,t),LR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[J1]||(e[J1]=!0,LR("selectionchange",!1,e))}}function LG(t,e,n,r){switch(bG(e)){case 1:var s=jce;break;case 4:s=Wce;break;default:s=IM}n=s.bind(null,e,n,t),s=void 0,!Y2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function UR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=mp(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}iG(function(){var l=i,u=_M(n),d=[];e:{var h=DG.get(t);if(h!==void 0){var f=TM,p=t;switch(t){case"keypress":if(lS(n)===0)break e;case"keydown":case"keyup":f=rle;break;case"focusin":p="focus",f=RR;break;case"focusout":p="blur",f=RR;break;case"beforeblur":case"afterblur":f=RR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=F$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Gce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=ole;break;case RG:case PG:case OG:f=Kce;break;case kG:f=cle;break;case"scroll":f=zce;break;case"wheel":f=ule;break;case"copy":case"cut":case"paste":f=Qce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=W$}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=$E(b,m),A!=null&&g.push(qE(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==V2&&(p=n.relatedTarget||n.fromElement)&&(mp(p)||p[sd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?mp(p):null,p!==null&&(w=Xg(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=F$,A="onMouseLeave",m="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=W$,A="onPointerLeave",m="onPointerEnter",b="pointer"),w=f==null?h:wy(f),v=p==null?h:wy(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,mp(u)===l&&(g=new g(m,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,m=p,b=0,v=g;v;v=xm(v))b++;for(v=0,A=m;A;A=xm(A))v++;for(;0<b-v;)g=xm(g),b--;for(;0<v-b;)m=xm(m),v--;for(;b--;){if(g===m||m!==null&&g===m.alternate)break t;g=xm(g),m=xm(m)}g=null}else g=null;f!==null&&X$(d,h,f,g,!1),p!==null&&w!==null&&X$(d,w,p,g,!0)}}e:{if(h=l?wy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=yle;else if(G$(h))if(SG)C=Ele;else{C=ble;var T=wle}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=vle);if(C&&(C=C(t,l))){AG(d,C,n,u);break e}T&&T(t,h,l),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&W2(h,"number",h.value)}switch(T=l?wy(l):window,t){case"focusin":(G$(T)||T.contentEditable==="true")&&(my=T,ek=l,tE=null);break;case"focusout":tE=ek=my=null;break;case"mousedown":tk=!0;break;case"contextmenu":case"mouseup":case"dragend":tk=!1,Q$(d,n,u);break;case"selectionchange":if(Ale)break;case"keydown":case"keyup":Q$(d,n,u)}var x;if(PM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else gy?CG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(EG&&n.locale!=="ko"&&(gy||N!=="onCompositionStart"?N==="onCompositionEnd"&&gy&&(x=vG()):(Rh=u,NM="value"in Rh?Rh.value:Rh.textContent,gy=!0)),T=Cx(l,N),0<T.length&&(N=new j$(N,t,null,n,u),d.push({event:N,listeners:T}),x?N.data=x:(x=_G(n),x!==null&&(N.data=x)))),(x=hle?fle(t,n):ple(t,n))&&(l=Cx(l,"onBeforeInput"),0<l.length&&(u=new j$("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}MG(d,e)})}function qE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$E(t,n),i!=null&&r.unshift(qE(t,i,s)),i=$E(t,e),i!=null&&r.push(qE(t,i,s))),t=t.return}return r}function xm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function X$(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=$E(n,i),c!=null&&o.unshift(qE(n,c,a))):s||(c=$E(n,i),c!=null&&o.push(qE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Nle=/\r\n?/g,Tle=/\u0000|\uFFFD/g;function e6(t){return(typeof t=="string"?t:""+t).replace(Nle,`
`).replace(Tle,"")}function Z1(t,e,n){if(e=e6(e),e6(t)!==e&&n)throw Error(Ee(425))}function _x(){}var nk=null,rk=null;function sk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ik=typeof setTimeout=="function"?setTimeout:void 0,Rle=typeof clearTimeout=="function"?clearTimeout:void 0,t6=typeof Promise=="function"?Promise:void 0,Ple=typeof queueMicrotask=="function"?queueMicrotask:typeof t6<"u"?function(t){return t6.resolve(null).then(t).catch(Ole)}:ik;function Ole(t){setTimeout(function(){throw t})}function BR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),WE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);WE(e)}function Gh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function n6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xw=Math.random().toString(36).slice(2),_l="__reactFiber$"+Xw,VE="__reactProps$"+Xw,sd="__reactContainer$"+Xw,ok="__reactEvents$"+Xw,kle="__reactListeners$"+Xw,Dle="__reactHandles$"+Xw;function mp(t){var e=t[_l];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sd]||n[_l]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=n6(t);t!==null;){if(n=t[_l])return n;t=n6(t)}return e}t=n,n=t.parentNode}return null}function B_(t){return t=t[_l]||t[sd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function pN(t){return t[VE]||null}var ak=[],by=-1;function If(t){return{current:t}}function ir(t){0>by||(t.current=ak[by],ak[by]=null,by--)}function er(t,e){by++,ak[by]=t.current,t.current=e}var ff={},ri=If(ff),oo=If(!1),vg=ff;function iw(t,e){var n=t.type.contextTypes;if(!n)return ff;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ao(t){return t=t.childContextTypes,t!=null}function Ax(){ir(oo),ir(ri)}function r6(t,e,n){if(ri.current!==ff)throw Error(Ee(168));er(ri,e),er(oo,n)}function UG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,wce(t)||"Unknown",s));return br({},n,r)}function Sx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ff,vg=ri.current,er(ri,t),er(oo,oo.current),!0}function s6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=UG(t,e,vg),r.__reactInternalMemoizedMergedChildContext=t,ir(oo),ir(ri),er(ri,t)):ir(oo),er(oo,n)}var bu=null,gN=!1,$R=!1;function BG(t){bu===null?bu=[t]:bu.push(t)}function Mle(t){gN=!0,BG(t)}function Nf(){if(!$R&&bu!==null){$R=!0;var t=0,e=Pn;try{var n=bu;for(Pn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bu=null,gN=!1}catch(s){throw bu!==null&&(bu=bu.slice(t+1)),lG(AM,Nf),s}finally{Pn=e,$R=!1}}return null}var vy=[],Ey=0,xx=null,Ix=0,Sa=[],xa=0,Eg=null,Fu=1,ju="";function Qf(t,e){vy[Ey++]=Ix,vy[Ey++]=xx,xx=t,Ix=e}function $G(t,e,n){Sa[xa++]=Fu,Sa[xa++]=ju,Sa[xa++]=Eg,Eg=t;var r=Fu;t=ju;var s=32-Rc(r)-1;r&=~(1<<s),n+=1;var i=32-Rc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fu=1<<32-Rc(e)+s|n<<s|r,ju=i+t}else Fu=1<<i|n<<s|r,ju=t}function kM(t){t.return!==null&&(Qf(t,1),$G(t,1,0))}function DM(t){for(;t===xx;)xx=vy[--Ey],vy[Ey]=null,Ix=vy[--Ey],vy[Ey]=null;for(;t===Eg;)Eg=Sa[--xa],Sa[xa]=null,ju=Sa[--xa],Sa[xa]=null,Fu=Sa[--xa],Sa[xa]=null}var Ho=null,jo=null,lr=!1,yc=null;function FG(t,e){var n=Na(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ho=t,jo=Gh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ho=t,jo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eg!==null?{id:Fu,overflow:ju}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Na(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ho=t,jo=null,!0):!1;default:return!1}}function ck(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lk(t){if(lr){var e=jo;if(e){var n=e;if(!i6(t,e)){if(ck(t))throw Error(Ee(418));e=Gh(n.nextSibling);var r=Ho;e&&i6(t,e)?FG(r,n):(t.flags=t.flags&-4097|2,lr=!1,Ho=t)}}else{if(ck(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,lr=!1,Ho=t}}}function o6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ho=t}function X1(t){if(t!==Ho)return!1;if(!lr)return o6(t),lr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sk(t.type,t.memoizedProps)),e&&(e=jo)){if(ck(t))throw jG(),Error(Ee(418));for(;e;)FG(t,e),e=Gh(e.nextSibling)}if(o6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jo=Gh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jo=null}}else jo=Ho?Gh(t.stateNode.nextSibling):null;return!0}function jG(){for(var t=jo;t;)t=Gh(t.nextSibling)}function ow(){jo=Ho=null,lr=!1}function MM(t){yc===null?yc=[t]:yc.push(t)}var Lle=gd.ReactCurrentBatchConfig;function Hb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function eA(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function a6(t){var e=t._init;return e(t._payload)}function WG(t){function e(m,b){if(t){var v=m.deletions;v===null?(m.deletions=[b],m.flags|=16):v.push(b)}}function n(m,b){if(!t)return null;for(;b!==null;)e(m,b),b=b.sibling;return null}function r(m,b){for(m=new Map;b!==null;)b.key!==null?m.set(b.key,b):m.set(b.index,b),b=b.sibling;return m}function s(m,b){return m=Yh(m,b),m.index=0,m.sibling=null,m}function i(m,b,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<b?(m.flags|=2,b):v):(m.flags|=2,b)):(m.flags|=1048576,b)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,b,v,A){return b===null||b.tag!==6?(b=qR(v,m.mode,A),b.return=m,b):(b=s(b,v),b.return=m,b)}function c(m,b,v,A){var C=v.type;return C===py?u(m,b,v.props.children,A,v.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===qd&&a6(C)===b.type)?(A=s(b,v.props),A.ref=Hb(m,b,v),A.return=m,A):(A=mS(v.type,v.key,v.props,null,m.mode,A),A.ref=Hb(m,b,v),A.return=m,A)}function l(m,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=VR(v,m.mode,A),b.return=m,b):(b=s(b,v.children||[]),b.return=m,b)}function u(m,b,v,A,C){return b===null||b.tag!==7?(b=ag(v,m.mode,A,C),b.return=m,b):(b=s(b,v),b.return=m,b)}function d(m,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=qR(""+b,m.mode,v),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case z1:return v=mS(b.type,b.key,b.props,null,m.mode,v),v.ref=Hb(m,null,b),v.return=m,v;case fy:return b=VR(b,m.mode,v),b.return=m,b;case qd:var A=b._init;return d(m,A(b._payload),v)}if(Ev(b)||$b(b))return b=ag(b,m.mode,v,null),b.return=m,b;eA(m,b)}return null}function h(m,b,v,A){var C=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case z1:return v.key===C?c(m,b,v,A):null;case fy:return v.key===C?l(m,b,v,A):null;case qd:return C=v._init,h(m,b,C(v._payload),A)}if(Ev(v)||$b(v))return C!==null?null:u(m,b,v,A,null);eA(m,v)}return null}function f(m,b,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(b,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case z1:return m=m.get(A.key===null?v:A.key)||null,c(b,m,A,C);case fy:return m=m.get(A.key===null?v:A.key)||null,l(b,m,A,C);case qd:var T=A._init;return f(m,b,v,T(A._payload),C)}if(Ev(A)||$b(A))return m=m.get(v)||null,u(b,m,A,C,null);eA(b,A)}return null}function p(m,b,v,A){for(var C=null,T=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var D=h(m,x,v[N],A);if(D===null){x===null&&(x=S);break}t&&x&&D.alternate===null&&e(m,x),b=i(D,b,N),T===null?C=D:T.sibling=D,T=D,x=S}if(N===v.length)return n(m,x),lr&&Qf(m,N),C;if(x===null){for(;N<v.length;N++)x=d(m,v[N],A),x!==null&&(b=i(x,b,N),T===null?C=x:T.sibling=x,T=x);return lr&&Qf(m,N),C}for(x=r(m,x);N<v.length;N++)S=f(x,m,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),T===null?C=S:T.sibling=S,T=S);return t&&x.forEach(function(P){return e(m,P)}),lr&&Qf(m,N),C}function g(m,b,v,A){var C=$b(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var T=C=null,x=b,N=b=0,S=null,D=v.next();x!==null&&!D.done;N++,D=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(m,x,D.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(m,x),b=i(P,b,N),T===null?C=P:T.sibling=P,T=P,x=S}if(D.done)return n(m,x),lr&&Qf(m,N),C;if(x===null){for(;!D.done;N++,D=v.next())D=d(m,D.value,A),D!==null&&(b=i(D,b,N),T===null?C=D:T.sibling=D,T=D);return lr&&Qf(m,N),C}for(x=r(m,x);!D.done;N++,D=v.next())D=f(x,m,N,D.value,A),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?N:D.key),b=i(D,b,N),T===null?C=D:T.sibling=D,T=D);return t&&x.forEach(function($){return e(m,$)}),lr&&Qf(m,N),C}function w(m,b,v,A){if(typeof v=="object"&&v!==null&&v.type===py&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case z1:e:{for(var C=v.key,T=b;T!==null;){if(T.key===C){if(C=v.type,C===py){if(T.tag===7){n(m,T.sibling),b=s(T,v.props.children),b.return=m,m=b;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===qd&&a6(C)===T.type){n(m,T.sibling),b=s(T,v.props),b.ref=Hb(m,T,v),b.return=m,m=b;break e}n(m,T);break}else e(m,T);T=T.sibling}v.type===py?(b=ag(v.props.children,m.mode,A,v.key),b.return=m,m=b):(A=mS(v.type,v.key,v.props,null,m.mode,A),A.ref=Hb(m,b,v),A.return=m,m=A)}return o(m);case fy:e:{for(T=v.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(m,b.sibling),b=s(b,v.children||[]),b.return=m,m=b;break e}else{n(m,b);break}else e(m,b);b=b.sibling}b=VR(v,m.mode,A),b.return=m,m=b}return o(m);case qd:return T=v._init,w(m,b,T(v._payload),A)}if(Ev(v))return p(m,b,v,A);if($b(v))return g(m,b,v,A);eA(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(m,b.sibling),b=s(b,v),b.return=m,m=b):(n(m,b),b=qR(v,m.mode,A),b.return=m,m=b),o(m)):n(m,b)}return w}var aw=WG(!0),zG=WG(!1),Nx=If(null),Tx=null,Cy=null,LM=null;function UM(){LM=Cy=Tx=null}function BM(t){var e=Nx.current;ir(Nx),t._currentValue=e}function uk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wy(t,e){Tx=t,LM=Cy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ro=!0),t.firstContext=null)}function Oa(t){var e=t._currentValue;if(LM!==t)if(t={context:t,memoizedValue:e,next:null},Cy===null){if(Tx===null)throw Error(Ee(308));Cy=t,Tx.dependencies={lanes:0,firstContext:t}}else Cy=Cy.next=t;return e}var yp=null;function $M(t){yp===null?yp=[t]:yp.push(t)}function HG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,$M(e)):(n.next=s.next,s.next=n),e.interleaved=n,id(t,r)}function id(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vd=!1;function FM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,cn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,id(t,n)}return s=r.interleaved,s===null?(e.next=e,$M(r)):(e.next=s.next,s.next=e),r.interleaved=e,id(t,n)}function uS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,SM(t,n)}}function c6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rx(t,e,n,r){var s=t.updateQueue;Vd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=br({},d,h);break e;case 2:Vd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_g|=o,t.lanes=o,t.memoizedState=d}}function l6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var $_={},Ol=If($_),KE=If($_),YE=If($_);function wp(t){if(t===$_)throw Error(Ee(174));return t}function jM(t,e){switch(er(YE,e),er(KE,t),er(Ol,$_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:H2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=H2(e,t)}ir(Ol),er(Ol,e)}function cw(){ir(Ol),ir(KE),ir(YE)}function qG(t){wp(YE.current);var e=wp(Ol.current),n=H2(e,t.type);e!==n&&(er(KE,t),er(Ol,n))}function WM(t){KE.current===t&&(ir(Ol),ir(KE))}var pr=If(0);function Px(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var FR=[];function zM(){for(var t=0;t<FR.length;t++)FR[t]._workInProgressVersionPrimary=null;FR.length=0}var dS=gd.ReactCurrentDispatcher,jR=gd.ReactCurrentBatchConfig,Cg=0,wr=null,qr=null,ds=null,Ox=!1,nE=!1,QE=0,Ule=0;function Gs(){throw Error(Ee(321))}function HM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dc(t[n],e[n]))return!1;return!0}function GM(t,e,n,r,s,i){if(Cg=i,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dS.current=t===null||t.memoizedState===null?jle:Wle,t=n(r,s),nE){i=0;do{if(nE=!1,QE=0,25<=i)throw Error(Ee(301));i+=1,ds=qr=null,e.updateQueue=null,dS.current=zle,t=n(r,s)}while(nE)}if(dS.current=kx,e=qr!==null&&qr.next!==null,Cg=0,ds=qr=wr=null,Ox=!1,e)throw Error(Ee(300));return t}function qM(){var t=QE!==0;return QE=0,t}function tl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?wr.memoizedState=ds=t:ds=ds.next=t,ds}function ka(){if(qr===null){var t=wr.alternate;t=t!==null?t.memoizedState:null}else t=qr.next;var e=ds===null?wr.memoizedState:ds.next;if(e!==null)ds=e,qr=t;else{if(t===null)throw Error(Ee(310));qr=t,t={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},ds===null?wr.memoizedState=ds=t:ds=ds.next=t}return ds}function JE(t,e){return typeof e=="function"?e(t):e}function WR(t){var e=ka(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=qr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Cg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,wr.lanes|=u,_g|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Dc(r,e.memoizedState)||(ro=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,wr.lanes|=i,_g|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zR(t){var e=ka(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Dc(i,e.memoizedState)||(ro=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function VG(){}function KG(t,e){var n=wr,r=ka(),s=e(),i=!Dc(r.memoizedState,s);if(i&&(r.memoizedState=s,ro=!0),r=r.queue,VM(JG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ds!==null&&ds.memoizedState.tag&1){if(n.flags|=2048,ZE(9,QG.bind(null,n,r,s,e),void 0,null),vs===null)throw Error(Ee(349));Cg&30||YG(n,e,s)}return s}function YG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QG(t,e,n,r){e.value=n,e.getSnapshot=r,ZG(e)&&XG(t)}function JG(t,e,n){return n(function(){ZG(e)&&XG(t)})}function ZG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dc(t,n)}catch{return!0}}function XG(t){var e=id(t,1);e!==null&&Pc(e,t,1,-1)}function u6(t){var e=tl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:JE,lastRenderedState:t},e.queue=t,t=t.dispatch=Fle.bind(null,wr,t),[e.memoizedState,t]}function ZE(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eq(){return ka().memoizedState}function hS(t,e,n,r){var s=tl();wr.flags|=t,s.memoizedState=ZE(1|e,n,void 0,r===void 0?null:r)}function mN(t,e,n,r){var s=ka();r=r===void 0?null:r;var i=void 0;if(qr!==null){var o=qr.memoizedState;if(i=o.destroy,r!==null&&HM(r,o.deps)){s.memoizedState=ZE(e,n,i,r);return}}wr.flags|=t,s.memoizedState=ZE(1|e,n,i,r)}function d6(t,e){return hS(8390656,8,t,e)}function VM(t,e){return mN(2048,8,t,e)}function tq(t,e){return mN(4,2,t,e)}function nq(t,e){return mN(4,4,t,e)}function rq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sq(t,e,n){return n=n!=null?n.concat([t]):null,mN(4,4,rq.bind(null,e,t),n)}function KM(){}function iq(t,e){var n=ka();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&HM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oq(t,e){var n=ka();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&HM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aq(t,e,n){return Cg&21?(Dc(n,e)||(n=hG(),wr.lanes|=n,_g|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ro=!0),t.memoizedState=n)}function Ble(t,e){var n=Pn;Pn=n!==0&&4>n?n:4,t(!0);var r=jR.transition;jR.transition={};try{t(!1),e()}finally{Pn=n,jR.transition=r}}function cq(){return ka().memoizedState}function $le(t,e,n){var r=Kh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lq(t))uq(e,n);else if(n=HG(t,e,n,r),n!==null){var s=Ai();Pc(n,t,r,s),dq(n,e,r)}}function Fle(t,e,n){var r=Kh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lq(t))uq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Dc(a,o)){var c=e.interleaved;c===null?(s.next=s,$M(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=HG(t,e,s,r),n!==null&&(s=Ai(),Pc(n,t,r,s),dq(n,e,r))}}function lq(t){var e=t.alternate;return t===wr||e!==null&&e===wr}function uq(t,e){nE=Ox=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,SM(t,n)}}var kx={readContext:Oa,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useInsertionEffect:Gs,useLayoutEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useMutableSource:Gs,useSyncExternalStore:Gs,useId:Gs,unstable_isNewReconciler:!1},jle={readContext:Oa,useCallback:function(t,e){return tl().memoizedState=[t,e===void 0?null:e],t},useContext:Oa,useEffect:d6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hS(4194308,4,rq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hS(4194308,4,t,e)},useInsertionEffect:function(t,e){return hS(4,2,t,e)},useMemo:function(t,e){var n=tl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$le.bind(null,wr,t),[r.memoizedState,t]},useRef:function(t){var e=tl();return t={current:t},e.memoizedState=t},useState:u6,useDebugValue:KM,useDeferredValue:function(t){return tl().memoizedState=t},useTransition:function(){var t=u6(!1),e=t[0];return t=Ble.bind(null,t[1]),tl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wr,s=tl();if(lr){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),vs===null)throw Error(Ee(349));Cg&30||YG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,d6(JG.bind(null,r,i,t),[t]),r.flags|=2048,ZE(9,QG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=tl(),e=vs.identifierPrefix;if(lr){var n=ju,r=Fu;n=(r&~(1<<32-Rc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=QE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ule++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Wle={readContext:Oa,useCallback:iq,useContext:Oa,useEffect:VM,useImperativeHandle:sq,useInsertionEffect:tq,useLayoutEffect:nq,useMemo:oq,useReducer:WR,useRef:eq,useState:function(){return WR(JE)},useDebugValue:KM,useDeferredValue:function(t){var e=ka();return aq(e,qr.memoizedState,t)},useTransition:function(){var t=WR(JE)[0],e=ka().memoizedState;return[t,e]},useMutableSource:VG,useSyncExternalStore:KG,useId:cq,unstable_isNewReconciler:!1},zle={readContext:Oa,useCallback:iq,useContext:Oa,useEffect:VM,useImperativeHandle:sq,useInsertionEffect:tq,useLayoutEffect:nq,useMemo:oq,useReducer:zR,useRef:eq,useState:function(){return zR(JE)},useDebugValue:KM,useDeferredValue:function(t){var e=ka();return qr===null?e.memoizedState=t:aq(e,qr.memoizedState,t)},useTransition:function(){var t=zR(JE)[0],e=ka().memoizedState;return[t,e]},useMutableSource:VG,useSyncExternalStore:KG,useId:cq,unstable_isNewReconciler:!1};function oc(t,e){if(t&&t.defaultProps){e=br({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:br({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yN={isMounted:function(t){return(t=t._reactInternals)?Xg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ai(),s=Kh(t),i=qu(r,s);i.payload=e,n!=null&&(i.callback=n),e=qh(t,i,s),e!==null&&(Pc(e,t,s,r),uS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ai(),s=Kh(t),i=qu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qh(t,i,s),e!==null&&(Pc(e,t,s,r),uS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ai(),r=Kh(t),s=qu(n,r);s.tag=2,e!=null&&(s.callback=e),e=qh(t,s,r),e!==null&&(Pc(e,t,r,n),uS(e,t,r))}};function h6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!HE(n,r)||!HE(s,i):!0}function hq(t,e,n){var r=!1,s=ff,i=e.contextType;return typeof i=="object"&&i!==null?i=Oa(i):(s=ao(e)?vg:ri.current,r=e.contextTypes,i=(r=r!=null)?iw(t,s):ff),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function f6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yN.enqueueReplaceState(e,e.state,null)}function hk(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},FM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Oa(i):(i=ao(e)?vg:ri.current,s.context=iw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dk(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yN.enqueueReplaceState(s,s.state,null),Rx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lw(t,e){try{var n="",r=e;do n+=yce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function HR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hle=typeof WeakMap=="function"?WeakMap:Map;function fq(t,e,n){n=qu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mx||(Mx=!0,_k=r),fk(t,e)},n}function pq(t,e,n){n=qu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){fk(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){fk(t,e),typeof r!="function"&&(Vh===null?Vh=new Set([this]):Vh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function p6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Hle;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sue.bind(null,t,e,n),e.then(t,t))}function g6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qu(-1,1),e.tag=2,qh(n,e,1))),n.lanes|=1),t)}var Gle=gd.ReactCurrentOwner,ro=!1;function fi(t,e,n,r){e.child=t===null?zG(e,null,n,r):aw(e,t.child,n,r)}function y6(t,e,n,r,s){n=n.render;var i=e.ref;return Wy(e,s),r=GM(t,e,n,r,i,s),n=qM(),t!==null&&!ro?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,od(t,e,s)):(lr&&n&&kM(e),e.flags|=1,fi(t,e,r,s),e.child)}function w6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!nL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,gq(t,e,i,r,s)):(t=mS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:HE,n(o,r)&&t.ref===e.ref)return od(t,e,s)}return e.flags|=1,t=Yh(i,r),t.ref=e.ref,t.return=e,e.child=t}function gq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(HE(i,r)&&t.ref===e.ref)if(ro=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ro=!0);else return e.lanes=t.lanes,od(t,e,s)}return pk(t,e,n,r,s)}function mq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(Ay,Lo),Lo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,er(Ay,Lo),Lo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,er(Ay,Lo),Lo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,er(Ay,Lo),Lo|=r;return fi(t,e,s,n),e.child}function yq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pk(t,e,n,r,s){var i=ao(n)?vg:ri.current;return i=iw(e,i),Wy(e,s),n=GM(t,e,n,r,i,s),r=qM(),t!==null&&!ro?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,od(t,e,s)):(lr&&r&&kM(e),e.flags|=1,fi(t,e,n,s),e.child)}function b6(t,e,n,r,s){if(ao(n)){var i=!0;Sx(e)}else i=!1;if(Wy(e,s),e.stateNode===null)fS(t,e),hq(e,n,r),hk(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Oa(l):(l=ao(n)?vg:ri.current,l=iw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&f6(e,o,r,l),Vd=!1;var h=e.memoizedState;o.state=h,Rx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||oo.current||Vd?(typeof u=="function"&&(dk(e,n,u,r),c=e.memoizedState),(a=Vd||h6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:oc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Oa(c):(c=ao(n)?vg:ri.current,c=iw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&f6(e,o,r,c),Vd=!1,h=e.memoizedState,o.state=h,Rx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||oo.current||Vd?(typeof f=="function"&&(dk(e,n,f,r),p=e.memoizedState),(l=Vd||h6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return gk(t,e,n,r,i,s)}function gk(t,e,n,r,s,i){yq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&s6(e,n,!1),od(t,e,i);r=e.stateNode,Gle.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=aw(e,t.child,null,i),e.child=aw(e,null,a,i)):fi(t,e,a,i),e.memoizedState=r.state,s&&s6(e,n,!0),e.child}function wq(t){var e=t.stateNode;e.pendingContext?r6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&r6(t,e.context,!1),jM(t,e.containerInfo)}function v6(t,e,n,r,s){return ow(),MM(s),e.flags|=256,fi(t,e,n,r),e.child}var mk={dehydrated:null,treeContext:null,retryLane:0};function yk(t){return{baseLanes:t,cachePool:null,transitions:null}}function bq(t,e,n){var r=e.pendingProps,s=pr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),er(pr,s&1),t===null)return lk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vN(o,r,0,null),t=ag(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=yk(n),e.memoizedState=mk,t):YM(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return qle(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Yh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Yh(a,i):(i=ag(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?yk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mk,r}return i=t.child,t=i.sibling,r=Yh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function YM(t,e){return e=vN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tA(t,e,n,r){return r!==null&&MM(r),aw(e,t.child,null,n),t=YM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qle(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=HR(Error(Ee(422))),tA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vN({mode:"visible",children:r.children},s,0,null),i=ag(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&aw(e,t.child,null,o),e.child.memoizedState=yk(o),e.memoizedState=mk,i);if(!(e.mode&1))return tA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=HR(i,r,void 0),tA(t,e,o,r)}if(a=(o&t.childLanes)!==0,ro||a){if(r=vs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,id(t,s),Pc(r,t,s,-1))}return tL(),r=HR(Error(Ee(421))),tA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iue.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jo=Gh(s.nextSibling),Ho=e,lr=!0,yc=null,t!==null&&(Sa[xa++]=Fu,Sa[xa++]=ju,Sa[xa++]=Eg,Fu=t.id,ju=t.overflow,Eg=e),e=YM(e,r.children),e.flags|=4096,e)}function E6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uk(t.return,e,n)}function GR(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(fi(t,e,r.children,n),r=pr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E6(t,n,e);else if(t.tag===19)E6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(er(pr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Px(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),GR(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Px(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}GR(e,!0,n,null,i);break;case"together":GR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function od(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_g|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Yh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vle(t,e,n){switch(e.tag){case 3:wq(e),ow();break;case 5:qG(e);break;case 1:ao(e.type)&&Sx(e);break;case 4:jM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;er(Nx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(er(pr,pr.current&1),e.flags|=128,null):n&e.child.childLanes?bq(t,e,n):(er(pr,pr.current&1),t=od(t,e,n),t!==null?t.sibling:null);er(pr,pr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),er(pr,pr.current),r)break;return null;case 22:case 23:return e.lanes=0,mq(t,e,n)}return od(t,e,n)}var Eq,wk,Cq,_q;Eq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wk=function(){};Cq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wp(Ol.current);var i=null;switch(n){case"input":s=F2(t,s),r=F2(t,r),i=[];break;case"select":s=br({},s,{value:void 0}),r=br({},r,{value:void 0}),i=[];break;case"textarea":s=z2(t,s),r=z2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_x)}G2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(UE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(UE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&nr("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};_q=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gb(t,e){if(!lr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kle(t,e,n){var r=e.pendingProps;switch(DM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(e),null;case 1:return ao(e.type)&&Ax(),qs(e),null;case 3:return r=e.stateNode,cw(),ir(oo),ir(ri),zM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(X1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yc!==null&&(xk(yc),yc=null))),wk(t,e),qs(e),null;case 5:WM(e);var s=wp(YE.current);if(n=e.type,t!==null&&e.stateNode!=null)Cq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return qs(e),null}if(t=wp(Ol.current),X1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_l]=e,r[VE]=i,t=(e.mode&1)!==0,n){case"dialog":nr("cancel",r),nr("close",r);break;case"iframe":case"object":case"embed":nr("load",r);break;case"video":case"audio":for(s=0;s<_v.length;s++)nr(_v[s],r);break;case"source":nr("error",r);break;case"img":case"image":case"link":nr("error",r),nr("load",r);break;case"details":nr("toggle",r);break;case"input":R$(r,i),nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},nr("invalid",r);break;case"textarea":O$(r,i),nr("invalid",r)}G2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Z1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Z1(r.textContent,a,t),s=["children",""+a]):UE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nr("scroll",r)}switch(n){case"input":H1(r),P$(r,i,!0);break;case"textarea":H1(r),k$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_x)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_l]=e,t[VE]=r,Eq(t,e,!1,!1),e.stateNode=t;e:{switch(o=q2(n,r),n){case"dialog":nr("cancel",t),nr("close",t),s=r;break;case"iframe":case"object":case"embed":nr("load",t),s=r;break;case"video":case"audio":for(s=0;s<_v.length;s++)nr(_v[s],t);s=r;break;case"source":nr("error",t),s=r;break;case"img":case"image":case"link":nr("error",t),nr("load",t),s=r;break;case"details":nr("toggle",t),s=r;break;case"input":R$(t,r),s=F2(t,r),nr("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=br({},r,{value:void 0}),nr("invalid",t);break;case"textarea":O$(t,r),s=z2(t,r),nr("invalid",t);break;default:s=r}G2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?eG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ZH(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&BE(t,c):typeof c=="number"&&BE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(UE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&nr("scroll",t):c!=null&&bM(t,i,c,o))}switch(n){case"input":H1(t),P$(t,r,!1);break;case"textarea":H1(t),k$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?By(t,!!r.multiple,i,!1):r.defaultValue!=null&&By(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_x)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qs(e),null;case 6:if(t&&e.stateNode!=null)_q(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=wp(YE.current),wp(Ol.current),X1(e)){if(r=e.stateNode,n=e.memoizedProps,r[_l]=e,(i=r.nodeValue!==n)&&(t=Ho,t!==null))switch(t.tag){case 3:Z1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Z1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_l]=e,e.stateNode=r}return qs(e),null;case 13:if(ir(pr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(lr&&jo!==null&&e.mode&1&&!(e.flags&128))jG(),ow(),e.flags|=98560,i=!1;else if(i=X1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[_l]=e}else ow(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qs(e),i=!1}else yc!==null&&(xk(yc),yc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pr.current&1?Jr===0&&(Jr=3):tL())),e.updateQueue!==null&&(e.flags|=4),qs(e),null);case 4:return cw(),wk(t,e),t===null&&GE(e.stateNode.containerInfo),qs(e),null;case 10:return BM(e.type._context),qs(e),null;case 17:return ao(e.type)&&Ax(),qs(e),null;case 19:if(ir(pr),i=e.memoizedState,i===null)return qs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gb(i,!1);else{if(Jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Px(t),o!==null){for(e.flags|=128,Gb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return er(pr,pr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pr()>uw&&(e.flags|=128,r=!0,Gb(i,!1),e.lanes=4194304)}else{if(!r)if(t=Px(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!lr)return qs(e),null}else 2*Pr()-i.renderingStartTime>uw&&n!==1073741824&&(e.flags|=128,r=!0,Gb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pr(),e.sibling=null,n=pr.current,er(pr,r?n&1|2:n&1),e):(qs(e),null);case 22:case 23:return eL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lo&1073741824&&(qs(e),e.subtreeFlags&6&&(e.flags|=8192)):qs(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function Yle(t,e){switch(DM(e),e.tag){case 1:return ao(e.type)&&Ax(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cw(),ir(oo),ir(ri),zM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WM(e),null;case 13:if(ir(pr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));ow()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ir(pr),null;case 4:return cw(),null;case 10:return BM(e.type._context),null;case 22:case 23:return eL(),null;case 24:return null;default:return null}}var nA=!1,ti=!1,Qle=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function _y(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ar(t,e,r)}else n.current=null}function bk(t,e,n){try{n()}catch(r){Ar(t,e,r)}}var C6=!1;function Jle(t,e){if(nk=vx,t=NG(),OM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rk={focusedElem:t,selectionRange:n},vx=!1,Ge=e;Ge!==null;)if(e=Ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ge=t;else for(;Ge!==null;){e=Ge;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:oc(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){Ar(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ge=t;break}Ge=e.return}return p=C6,C6=!1,p}function rE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&bk(e,n,i)}s=s.next}while(s!==r)}}function wN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Aq(t){var e=t.alternate;e!==null&&(t.alternate=null,Aq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_l],delete e[VE],delete e[ok],delete e[kle],delete e[Dle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sq(t){return t.tag===5||t.tag===3||t.tag===4}function _6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ek(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_x));else if(r!==4&&(t=t.child,t!==null))for(Ek(t,e,n),t=t.sibling;t!==null;)Ek(t,e,n),t=t.sibling}function Ck(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ck(t,e,n),t=t.sibling;t!==null;)Ck(t,e,n),t=t.sibling}var Rs=null,mc=!1;function Cd(t,e,n){for(n=n.child;n!==null;)xq(t,e,n),n=n.sibling}function xq(t,e,n){if(Pl&&typeof Pl.onCommitFiberUnmount=="function")try{Pl.onCommitFiberUnmount(uN,n)}catch{}switch(n.tag){case 5:ti||_y(n,e);case 6:var r=Rs,s=mc;Rs=null,Cd(t,e,n),Rs=r,mc=s,Rs!==null&&(mc?(t=Rs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rs.removeChild(n.stateNode));break;case 18:Rs!==null&&(mc?(t=Rs,n=n.stateNode,t.nodeType===8?BR(t.parentNode,n):t.nodeType===1&&BR(t,n),WE(t)):BR(Rs,n.stateNode));break;case 4:r=Rs,s=mc,Rs=n.stateNode.containerInfo,mc=!0,Cd(t,e,n),Rs=r,mc=s;break;case 0:case 11:case 14:case 15:if(!ti&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bk(n,e,o),s=s.next}while(s!==r)}Cd(t,e,n);break;case 1:if(!ti&&(_y(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ar(n,e,a)}Cd(t,e,n);break;case 21:Cd(t,e,n);break;case 22:n.mode&1?(ti=(r=ti)||n.memoizedState!==null,Cd(t,e,n),ti=r):Cd(t,e,n);break;default:Cd(t,e,n)}}function A6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qle),e.forEach(function(r){var s=oue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ja(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rs=a.stateNode,mc=!1;break e;case 3:Rs=a.stateNode.containerInfo,mc=!0;break e;case 4:Rs=a.stateNode.containerInfo,mc=!0;break e}a=a.return}if(Rs===null)throw Error(Ee(160));xq(i,o,s),Rs=null,mc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Ar(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Iq(e,t),e=e.sibling}function Iq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ja(e,t),Hc(t),r&4){try{rE(3,t,t.return),wN(3,t)}catch(g){Ar(t,t.return,g)}try{rE(5,t,t.return)}catch(g){Ar(t,t.return,g)}}break;case 1:Ja(e,t),Hc(t),r&512&&n!==null&&_y(n,n.return);break;case 5:if(Ja(e,t),Hc(t),r&512&&n!==null&&_y(n,n.return),t.flags&32){var s=t.stateNode;try{BE(s,"")}catch(g){Ar(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&YH(s,i),q2(a,o);var l=q2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?eG(s,d):u==="dangerouslySetInnerHTML"?ZH(s,d):u==="children"?BE(s,d):bM(s,u,d,l)}switch(a){case"input":j2(s,i);break;case"textarea":QH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?By(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?By(s,!!i.multiple,i.defaultValue,!0):By(s,!!i.multiple,i.multiple?[]:"",!1))}s[VE]=i}catch(g){Ar(t,t.return,g)}}break;case 6:if(Ja(e,t),Hc(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Ar(t,t.return,g)}}break;case 3:if(Ja(e,t),Hc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{WE(e.containerInfo)}catch(g){Ar(t,t.return,g)}break;case 4:Ja(e,t),Hc(t);break;case 13:Ja(e,t),Hc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ZM=Pr())),r&4&&A6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ti=(l=ti)||u,Ja(e,t),ti=l):Ja(e,t),Hc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ge=t,u=t.child;u!==null;){for(d=Ge=u;Ge!==null;){switch(h=Ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:rE(4,h,h.return);break;case 1:_y(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Ar(r,n,g)}}break;case 5:_y(h,h.return);break;case 22:if(h.memoizedState!==null){x6(d);continue}}f!==null?(f.return=h,Ge=f):x6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=XH("display",o))}catch(g){Ar(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Ar(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ja(e,t),Hc(t),r&4&&A6(t);break;case 21:break;default:Ja(e,t),Hc(t)}}function Hc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sq(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(BE(s,""),r.flags&=-33);var i=_6(t);Ck(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_6(t);Ek(t,a,o);break;default:throw Error(Ee(161))}}catch(c){Ar(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zle(t,e,n){Ge=t,Nq(t)}function Nq(t,e,n){for(var r=(t.mode&1)!==0;Ge!==null;){var s=Ge,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ti;a=nA;var l=ti;if(nA=o,(ti=c)&&!l)for(Ge=s;Ge!==null;)o=Ge,c=o.child,o.tag===22&&o.memoizedState!==null?I6(s):c!==null?(c.return=o,Ge=c):I6(s);for(;i!==null;)Ge=i,Nq(i),i=i.sibling;Ge=s,nA=a,ti=l}S6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ge=i):S6(t)}}function S6(t){for(;Ge!==null;){var e=Ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ti||wN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ti)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:oc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&l6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&WE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}ti||e.flags&512&&vk(e)}catch(h){Ar(e,e.return,h)}}if(e===t){Ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ge=n;break}Ge=e.return}}function x6(t){for(;Ge!==null;){var e=Ge;if(e===t){Ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ge=n;break}Ge=e.return}}function I6(t){for(;Ge!==null;){var e=Ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wN(4,e)}catch(c){Ar(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ar(e,s,c)}}var i=e.return;try{vk(e)}catch(c){Ar(e,i,c)}break;case 5:var o=e.return;try{vk(e)}catch(c){Ar(e,o,c)}}}catch(c){Ar(e,e.return,c)}if(e===t){Ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ge=a;break}Ge=e.return}}var Xle=Math.ceil,Dx=gd.ReactCurrentDispatcher,QM=gd.ReactCurrentOwner,Pa=gd.ReactCurrentBatchConfig,cn=0,vs=null,$r=null,Ms=0,Lo=0,Ay=If(0),Jr=0,XE=null,_g=0,bN=0,JM=0,sE=null,Xi=null,ZM=0,uw=1/0,mu=null,Mx=!1,_k=null,Vh=null,rA=!1,Ph=null,Lx=0,iE=0,Ak=null,pS=-1,gS=0;function Ai(){return cn&6?Pr():pS!==-1?pS:pS=Pr()}function Kh(t){return t.mode&1?cn&2&&Ms!==0?Ms&-Ms:Lle.transition!==null?(gS===0&&(gS=hG()),gS):(t=Pn,t!==0||(t=window.event,t=t===void 0?16:bG(t.type)),t):1}function Pc(t,e,n,r){if(50<iE)throw iE=0,Ak=null,Error(Ee(185));L_(t,n,r),(!(cn&2)||t!==vs)&&(t===vs&&(!(cn&2)&&(bN|=n),Jr===4&&Xd(t,Ms)),co(t,r),n===1&&cn===0&&!(e.mode&1)&&(uw=Pr()+500,gN&&Nf()))}function co(t,e){var n=t.callbackNode;Lce(t,e);var r=bx(t,t===vs?Ms:0);if(r===0)n!==null&&L$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&L$(n),e===1)t.tag===0?Mle(N6.bind(null,t)):BG(N6.bind(null,t)),Ple(function(){!(cn&6)&&Nf()}),n=null;else{switch(fG(r)){case 1:n=AM;break;case 4:n=uG;break;case 16:n=wx;break;case 536870912:n=dG;break;default:n=wx}n=Lq(n,Tq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tq(t,e){if(pS=-1,gS=0,cn&6)throw Error(Ee(327));var n=t.callbackNode;if(zy()&&t.callbackNode!==n)return null;var r=bx(t,t===vs?Ms:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ux(t,r);else{e=r;var s=cn;cn|=2;var i=Pq();(vs!==t||Ms!==e)&&(mu=null,uw=Pr()+500,og(t,e));do try{nue();break}catch(a){Rq(t,a)}while(!0);UM(),Dx.current=i,cn=s,$r!==null?e=0:(vs=null,Ms=0,e=Jr)}if(e!==0){if(e===2&&(s=J2(t),s!==0&&(r=s,e=Sk(t,s))),e===1)throw n=XE,og(t,0),Xd(t,r),co(t,Pr()),n;if(e===6)Xd(t,r);else{if(s=t.current.alternate,!(r&30)&&!eue(s)&&(e=Ux(t,r),e===2&&(i=J2(t),i!==0&&(r=i,e=Sk(t,i))),e===1))throw n=XE,og(t,0),Xd(t,r),co(t,Pr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Jf(t,Xi,mu);break;case 3:if(Xd(t,r),(r&130023424)===r&&(e=ZM+500-Pr(),10<e)){if(bx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ai(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ik(Jf.bind(null,t,Xi,mu),e);break}Jf(t,Xi,mu);break;case 4:if(Xd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Rc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Xle(r/1960))-r,10<r){t.timeoutHandle=ik(Jf.bind(null,t,Xi,mu),r);break}Jf(t,Xi,mu);break;case 5:Jf(t,Xi,mu);break;default:throw Error(Ee(329))}}}return co(t,Pr()),t.callbackNode===n?Tq.bind(null,t):null}function Sk(t,e){var n=sE;return t.current.memoizedState.isDehydrated&&(og(t,e).flags|=256),t=Ux(t,e),t!==2&&(e=Xi,Xi=n,e!==null&&xk(e)),t}function xk(t){Xi===null?Xi=t:Xi.push.apply(Xi,t)}function eue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xd(t,e){for(e&=~JM,e&=~bN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rc(e),r=1<<n;t[n]=-1,e&=~r}}function N6(t){if(cn&6)throw Error(Ee(327));zy();var e=bx(t,0);if(!(e&1))return co(t,Pr()),null;var n=Ux(t,e);if(t.tag!==0&&n===2){var r=J2(t);r!==0&&(e=r,n=Sk(t,r))}if(n===1)throw n=XE,og(t,0),Xd(t,e),co(t,Pr()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jf(t,Xi,mu),co(t,Pr()),null}function XM(t,e){var n=cn;cn|=1;try{return t(e)}finally{cn=n,cn===0&&(uw=Pr()+500,gN&&Nf())}}function Ag(t){Ph!==null&&Ph.tag===0&&!(cn&6)&&zy();var e=cn;cn|=1;var n=Pa.transition,r=Pn;try{if(Pa.transition=null,Pn=1,t)return t()}finally{Pn=r,Pa.transition=n,cn=e,!(cn&6)&&Nf()}}function eL(){Lo=Ay.current,ir(Ay)}function og(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Rle(n)),$r!==null)for(n=$r.return;n!==null;){var r=n;switch(DM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ax();break;case 3:cw(),ir(oo),ir(ri),zM();break;case 5:WM(r);break;case 4:cw();break;case 13:ir(pr);break;case 19:ir(pr);break;case 10:BM(r.type._context);break;case 22:case 23:eL()}n=n.return}if(vs=t,$r=t=Yh(t.current,null),Ms=Lo=e,Jr=0,XE=null,JM=bN=_g=0,Xi=sE=null,yp!==null){for(e=0;e<yp.length;e++)if(n=yp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}yp=null}return t}function Rq(t,e){do{var n=$r;try{if(UM(),dS.current=kx,Ox){for(var r=wr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ox=!1}if(Cg=0,ds=qr=wr=null,nE=!1,QE=0,QM.current=null,n===null||n.return===null){Jr=1,XE=e,$r=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ms,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=g6(o);if(f!==null){f.flags&=-257,m6(f,o,a,i,e),f.mode&1&&p6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){p6(i,l,e),tL();break e}c=Error(Ee(426))}}else if(lr&&a.mode&1){var w=g6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),m6(w,o,a,i,e),MM(lw(c,a));break e}}i=c=lw(c,a),Jr!==4&&(Jr=2),sE===null?sE=[i]:sE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=fq(i,c,e);c6(i,m);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vh===null||!Vh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=pq(i,a,e);c6(i,A);break e}}i=i.return}while(i!==null)}kq(n)}catch(C){e=C,$r===n&&n!==null&&($r=n=n.return);continue}break}while(!0)}function Pq(){var t=Dx.current;return Dx.current=kx,t===null?kx:t}function tL(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),vs===null||!(_g&268435455)&&!(bN&268435455)||Xd(vs,Ms)}function Ux(t,e){var n=cn;cn|=2;var r=Pq();(vs!==t||Ms!==e)&&(mu=null,og(t,e));do try{tue();break}catch(s){Rq(t,s)}while(!0);if(UM(),cn=n,Dx.current=r,$r!==null)throw Error(Ee(261));return vs=null,Ms=0,Jr}function tue(){for(;$r!==null;)Oq($r)}function nue(){for(;$r!==null&&!Ice();)Oq($r)}function Oq(t){var e=Mq(t.alternate,t,Lo);t.memoizedProps=t.pendingProps,e===null?kq(t):$r=e,QM.current=null}function kq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yle(n,e),n!==null){n.flags&=32767,$r=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jr=6,$r=null;return}}else if(n=Kle(n,e,Lo),n!==null){$r=n;return}if(e=e.sibling,e!==null){$r=e;return}$r=e=t}while(e!==null);Jr===0&&(Jr=5)}function Jf(t,e,n){var r=Pn,s=Pa.transition;try{Pa.transition=null,Pn=1,rue(t,e,n,r)}finally{Pa.transition=s,Pn=r}return null}function rue(t,e,n,r){do zy();while(Ph!==null);if(cn&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Uce(t,i),t===vs&&($r=vs=null,Ms=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rA||(rA=!0,Lq(wx,function(){return zy(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pa.transition,Pa.transition=null;var o=Pn;Pn=1;var a=cn;cn|=4,QM.current=null,Jle(t,n),Iq(n,t),_le(rk),vx=!!nk,rk=nk=null,t.current=n,Zle(n),Nce(),cn=a,Pn=o,Pa.transition=i}else t.current=n;if(rA&&(rA=!1,Ph=t,Lx=s),i=t.pendingLanes,i===0&&(Vh=null),Pce(n.stateNode),co(t,Pr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mx)throw Mx=!1,t=_k,_k=null,t;return Lx&1&&t.tag!==0&&zy(),i=t.pendingLanes,i&1?t===Ak?iE++:(iE=0,Ak=t):iE=0,Nf(),null}function zy(){if(Ph!==null){var t=fG(Lx),e=Pa.transition,n=Pn;try{if(Pa.transition=null,Pn=16>t?16:t,Ph===null)var r=!1;else{if(t=Ph,Ph=null,Lx=0,cn&6)throw Error(Ee(331));var s=cn;for(cn|=4,Ge=t.current;Ge!==null;){var i=Ge,o=i.child;if(Ge.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ge=l;Ge!==null;){var u=Ge;switch(u.tag){case 0:case 11:case 15:rE(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ge=d;else for(;Ge!==null;){u=Ge;var h=u.sibling,f=u.return;if(Aq(u),u===l){Ge=null;break}if(h!==null){h.return=f,Ge=h;break}Ge=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ge=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ge=o;else e:for(;Ge!==null;){if(i=Ge,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rE(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ge=m;break e}Ge=i.return}}var b=t.current;for(Ge=b;Ge!==null;){o=Ge;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ge=v;else e:for(o=b;Ge!==null;){if(a=Ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wN(9,a)}}catch(C){Ar(a,a.return,C)}if(a===o){Ge=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ge=A;break e}Ge=a.return}}if(cn=s,Nf(),Pl&&typeof Pl.onPostCommitFiberRoot=="function")try{Pl.onPostCommitFiberRoot(uN,t)}catch{}r=!0}return r}finally{Pn=n,Pa.transition=e}}return!1}function T6(t,e,n){e=lw(n,e),e=fq(t,e,1),t=qh(t,e,1),e=Ai(),t!==null&&(L_(t,1,e),co(t,e))}function Ar(t,e,n){if(t.tag===3)T6(t,t,n);else for(;e!==null;){if(e.tag===3){T6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vh===null||!Vh.has(r))){t=lw(n,t),t=pq(e,t,1),e=qh(e,t,1),t=Ai(),e!==null&&(L_(e,1,t),co(e,t));break}}e=e.return}}function sue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ai(),t.pingedLanes|=t.suspendedLanes&n,vs===t&&(Ms&n)===n&&(Jr===4||Jr===3&&(Ms&130023424)===Ms&&500>Pr()-ZM?og(t,0):JM|=n),co(t,e)}function Dq(t,e){e===0&&(t.mode&1?(e=V1,V1<<=1,!(V1&130023424)&&(V1=4194304)):e=1);var n=Ai();t=id(t,e),t!==null&&(L_(t,e,n),co(t,n))}function iue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Dq(t,n)}function oue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),Dq(t,n)}var Mq;Mq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||oo.current)ro=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ro=!1,Vle(t,e,n);ro=!!(t.flags&131072)}else ro=!1,lr&&e.flags&1048576&&$G(e,Ix,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fS(t,e),t=e.pendingProps;var s=iw(e,ri.current);Wy(e,n),s=GM(null,e,r,t,s,n);var i=qM();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ao(r)?(i=!0,Sx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,FM(e),s.updater=yN,e.stateNode=s,s._reactInternals=e,hk(e,r,t,n),e=gk(null,e,r,!0,i,n)):(e.tag=0,lr&&i&&kM(e),fi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cue(r),t=oc(r,t),s){case 0:e=pk(null,e,r,t,n);break e;case 1:e=b6(null,e,r,t,n);break e;case 11:e=y6(null,e,r,t,n);break e;case 14:e=w6(null,e,r,oc(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oc(r,s),pk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oc(r,s),b6(t,e,r,s,n);case 3:e:{if(wq(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GG(t,e),Rx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lw(Error(Ee(423)),e),e=v6(t,e,r,n,s);break e}else if(r!==s){s=lw(Error(Ee(424)),e),e=v6(t,e,r,n,s);break e}else for(jo=Gh(e.stateNode.containerInfo.firstChild),Ho=e,lr=!0,yc=null,n=zG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ow(),r===s){e=od(t,e,n);break e}fi(t,e,r,n)}e=e.child}return e;case 5:return qG(e),t===null&&lk(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,sk(r,s)?o=null:i!==null&&sk(r,i)&&(e.flags|=32),yq(t,e),fi(t,e,o,n),e.child;case 6:return t===null&&lk(e),null;case 13:return bq(t,e,n);case 4:return jM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=aw(e,null,r,n):fi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oc(r,s),y6(t,e,r,s,n);case 7:return fi(t,e,e.pendingProps,n),e.child;case 8:return fi(t,e,e.pendingProps.children,n),e.child;case 12:return fi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,er(Nx,r._currentValue),r._currentValue=o,i!==null)if(Dc(i.value,o)){if(i.children===s.children&&!oo.current){e=od(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),uk(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),uk(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wy(e,n),s=Oa(s),r=r(s),e.flags|=1,fi(t,e,r,n),e.child;case 14:return r=e.type,s=oc(r,e.pendingProps),s=oc(r.type,s),w6(t,e,r,s,n);case 15:return gq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oc(r,s),fS(t,e),e.tag=1,ao(r)?(t=!0,Sx(e)):t=!1,Wy(e,n),hq(e,r,s),hk(e,r,s,n),gk(null,e,r,!0,t,n);case 19:return vq(t,e,n);case 22:return mq(t,e,n)}throw Error(Ee(156,e.tag))};function Lq(t,e){return lG(t,e)}function aue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(t,e,n,r){return new aue(t,e,n,r)}function nL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cue(t){if(typeof t=="function")return nL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===EM)return 11;if(t===CM)return 14}return 2}function Yh(t,e){var n=t.alternate;return n===null?(n=Na(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")nL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case py:return ag(n.children,s,i,e);case vM:o=8,s|=8;break;case L2:return t=Na(12,n,e,s|2),t.elementType=L2,t.lanes=i,t;case U2:return t=Na(13,n,e,s),t.elementType=U2,t.lanes=i,t;case B2:return t=Na(19,n,e,s),t.elementType=B2,t.lanes=i,t;case qH:return vN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HH:o=10;break e;case GH:o=9;break e;case EM:o=11;break e;case CM:o=14;break e;case qd:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=Na(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ag(t,e,n,r){return t=Na(7,t,r,e),t.lanes=n,t}function vN(t,e,n,r){return t=Na(22,t,r,e),t.elementType=qH,t.lanes=n,t.stateNode={isHidden:!1},t}function qR(t,e,n){return t=Na(6,t,null,e),t.lanes=n,t}function VR(t,e,n){return e=Na(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IR(0),this.expirationTimes=IR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rL(t,e,n,r,s,i,o,a,c){return t=new lue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Na(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},FM(i),t}function uue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uq(t){if(!t)return ff;t=t._reactInternals;e:{if(Xg(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ao(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(ao(n))return UG(t,n,e)}return e}function Bq(t,e,n,r,s,i,o,a,c){return t=rL(n,r,!0,t,s,i,o,a,c),t.context=Uq(null),n=t.current,r=Ai(),s=Kh(n),i=qu(r,s),i.callback=e??null,qh(n,i,s),t.current.lanes=s,L_(t,s,r),co(t,r),t}function EN(t,e,n,r){var s=e.current,i=Ai(),o=Kh(s);return n=Uq(n),e.context===null?e.context=n:e.pendingContext=n,e=qu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qh(s,e,o),t!==null&&(Pc(t,s,o,i),uS(t,s,o)),o}function Bx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sL(t,e){R6(t,e),(t=t.alternate)&&R6(t,e)}function due(){return null}var $q=typeof reportError=="function"?reportError:function(t){console.error(t)};function iL(t){this._internalRoot=t}CN.prototype.render=iL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));EN(t,e,null,null)};CN.prototype.unmount=iL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ag(function(){EN(null,t,null,null)}),e[sd]=null}};function CN(t){this._internalRoot=t}CN.prototype.unstable_scheduleHydration=function(t){if(t){var e=mG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zd.length&&e!==0&&e<Zd[n].priority;n++);Zd.splice(n,0,t),n===0&&wG(t)}};function oL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _N(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function P6(){}function hue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Bx(o);i.call(l)}}var o=Bq(e,r,t,0,null,!1,!1,"",P6);return t._reactRootContainer=o,t[sd]=o.current,GE(t.nodeType===8?t.parentNode:t),Ag(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Bx(c);a.call(l)}}var c=rL(t,0,!1,null,null,!1,!1,"",P6);return t._reactRootContainer=c,t[sd]=c.current,GE(t.nodeType===8?t.parentNode:t),Ag(function(){EN(e,c,n,r)}),c}function AN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Bx(o);a.call(c)}}EN(e,o,t,s)}else o=hue(n,e,t,s,r);return Bx(o)}pG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cv(e.pendingLanes);n!==0&&(SM(e,n|1),co(e,Pr()),!(cn&6)&&(uw=Pr()+500,Nf()))}break;case 13:Ag(function(){var r=id(t,1);if(r!==null){var s=Ai();Pc(r,t,1,s)}}),sL(t,1)}};xM=function(t){if(t.tag===13){var e=id(t,134217728);if(e!==null){var n=Ai();Pc(e,t,134217728,n)}sL(t,134217728)}};gG=function(t){if(t.tag===13){var e=Kh(t),n=id(t,e);if(n!==null){var r=Ai();Pc(n,t,e,r)}sL(t,e)}};mG=function(){return Pn};yG=function(t,e){var n=Pn;try{return Pn=t,e()}finally{Pn=n}};K2=function(t,e,n){switch(e){case"input":if(j2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pN(r);if(!s)throw Error(Ee(90));KH(r),j2(r,s)}}}break;case"textarea":QH(t,n);break;case"select":e=n.value,e!=null&&By(t,!!n.multiple,e,!1)}};rG=XM;sG=Ag;var fue={usingClientEntryPoint:!1,Events:[B_,wy,pN,tG,nG,XM]},qb={findFiberByHostInstance:mp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pue={bundleType:qb.bundleType,version:qb.version,rendererPackageName:qb.rendererPackageName,rendererConfig:qb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aG(t),t===null?null:t.stateNode},findFiberByHostInstance:qb.findFiberByHostInstance||due,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sA.isDisabled&&sA.supportsFiber)try{uN=sA.inject(pue),Pl=sA}catch{}}Qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fue;Qo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oL(e))throw Error(Ee(200));return uue(t,e,null,n)};Qo.createRoot=function(t,e){if(!oL(t))throw Error(Ee(299));var n=!1,r="",s=$q;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rL(t,1,!1,null,null,n,!1,r,s),t[sd]=e.current,GE(t.nodeType===8?t.parentNode:t),new iL(e)};Qo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=aG(e),t=t===null?null:t.stateNode,t};Qo.flushSync=function(t){return Ag(t)};Qo.hydrate=function(t,e,n){if(!_N(e))throw Error(Ee(200));return AN(null,t,e,!0,n)};Qo.hydrateRoot=function(t,e,n){if(!oL(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$q;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bq(e,null,t,1,n??null,s,!1,i,o),t[sd]=e.current,GE(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new CN(e)};Qo.render=function(t,e,n){if(!_N(e))throw Error(Ee(200));return AN(null,t,e,!1,n)};Qo.unmountComponentAtNode=function(t){if(!_N(t))throw Error(Ee(40));return t._reactRootContainer?(Ag(function(){AN(null,null,t,!1,function(){t._reactRootContainer=null,t[sd]=null})}),!0):!1};Qo.unstable_batchedUpdates=XM;Qo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_N(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return AN(t,e,n,!1,r)};Qo.version="18.3.1-next-f1338f8080-20240426";function Fq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fq)}catch(t){console.error(t)}}Fq(),FH.exports=Qo;var aL=FH.exports,O6=aL;D2.createRoot=O6.createRoot,D2.hydrateRoot=O6.hydrateRoot;const gue="_verified_lvyh0_1",cL={verified:gue},mue=()=>y.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:cL.verified,children:y.jsx("g",{children:y.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),yue=()=>y.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:cL.verified,children:y.jsxs("g",{children:[y.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[y.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),y.jsx("stop",{offset:".539",stopColor:"#cd8105"}),y.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),y.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),y.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),y.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[y.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),y.jsx("stop",{offset:".406",stopColor:"#e2b719"}),y.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),y.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[y.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),y.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),y.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),wue=()=>y.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:cL.verified,children:y.jsx("g",{children:y.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function jq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=jq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Qh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=jq(t))&&(r&&(r+=" "),r+=e);return r}const bue="_root_98iqw_1",vue="_article_98iqw_21",k6={root:bue,article:vue},lL=({className:t,children:e})=>y.jsx("div",{className:Qh("react-tweet-theme",k6.root,t),children:y.jsx("article",{className:k6.article,children:e})}),Wq=t=>y.jsx("img",{...t}),Eue="_header_nqq4j_1",Cue="_avatar_nqq4j_11",_ue="_avatarOverflow_nqq4j_16",Aue="_avatarSquare_nqq4j_23",Sue="_avatarShadow_nqq4j_26",xue="_author_nqq4j_37",Iue="_authorLink_nqq4j_44",Nue="_authorVerified_nqq4j_53",Tue="_authorLinkText_nqq4j_56",Rue="_authorMeta_nqq4j_63",Pue="_authorFollow_nqq4j_66",Oue="_username_nqq4j_69",kue="_follow_nqq4j_74",Due="_separator_nqq4j_82",Mue="_brand_nqq4j_86",Lue="_twitterIcon_nqq4j_90",Cs={header:Eue,avatar:Cue,avatarOverflow:_ue,avatarSquare:Aue,avatarShadow:Sue,author:xue,authorLink:Iue,authorVerified:Nue,authorLinkText:Tue,authorMeta:Rue,authorFollow:Pue,username:Oue,follow:kue,separator:Due,brand:Mue,twitterIcon:Lue},Uue="_verifiedOld_lcna5_1",Bue="_verifiedBlue_lcna5_4",$ue="_verifiedGovernment_lcna5_7",KR={verifiedOld:Uue,verifiedBlue:Bue,verifiedGovernment:$ue},zq=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=y.jsx(mue,{}),s=KR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=KR.verifiedOld),t.verified_type){case"Government":r=y.jsx(wue,{}),s=KR.verifiedGovernment;break;case"Business":r=y.jsx(yue,{}),s=null;break}return n?y.jsx("div",{className:Qh(e,s),children:r}):null},Fue=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Wq,{user:s}=t;return y.jsxs("div",{className:Cs.header,children:[y.jsxs("a",{href:t.url,className:Cs.avatar,target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Qh(Cs.avatarOverflow,s.profile_image_shape==="Square"&&Cs.avatarSquare),children:y.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),y.jsx("div",{className:Cs.avatarOverflow,children:y.jsx("div",{className:Cs.avatarShadow})})]}),y.jsxs("div",{className:Cs.author,children:[y.jsxs("a",{href:t.url,className:Cs.authorLink,target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Cs.authorLinkText,children:y.jsx("span",{title:s.name,children:s.name})}),y.jsx(zq,{user:s,className:Cs.authorVerified})]}),y.jsxs("div",{className:Cs.authorMeta,children:[y.jsx("a",{href:t.url,className:Cs.username,target:"_blank",rel:"noopener noreferrer",children:y.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),y.jsxs("div",{className:Cs.authorFollow,children:[y.jsx("span",{className:Cs.separator,children:""}),y.jsx("a",{href:s.follow_url,className:Cs.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),y.jsx("a",{href:t.url,className:Cs.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:y.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Cs.twitterIcon,children:y.jsx("g",{children:y.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},jue="_root_1ec15_1",Wue={root:jue},zue=({tweet:t})=>y.jsxs("a",{href:t.in_reply_to_url,className:Wue.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Hue="_root_eihfa_1",Gue={root:Hue},que=({href:t,children:e})=>y.jsx("a",{href:t,className:Gue.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Vue="_root_1xq52_1",Kue={root:Vue},Yue=({tweet:t})=>y.jsx("p",{className:Kue.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return y.jsx(que,{href:e.href,children:e.text},n);case"media":return;default:return y.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),D6=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Hq=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Que=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,Jue=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Zue=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Xue=t=>`https://x.com/hashtag/${t.text}`,ede=t=>`https://x.com/search?q=%24${t.text}`,tde=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,Gq=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},nde=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},rde=t=>{const e=nde(t);return e.length>1?e[1]:e[0]},Ik=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function M6(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Vb(n,"hashtag",t.entities.hashtags),Vb(n,"mention",t.entities.user_mentions),Vb(n,"url",t.entities.urls),Vb(n,"symbol",t.entities.symbols),t.entities.media&&Vb(n,"media",t.entities.media),sde(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Xue(r),text:s});case"mention":return Object.assign(r,{href:Hq(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:ede(r),text:s});default:return Object.assign(r,{text:s})}})}function Vb(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function sde(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const ide=t=>({...t,url:D6(t),user:{...t.user,url:Hq(t),follow_url:Zue(t)},like_url:Que(t),reply_url:Jue(t),in_reply_to_url:t.in_reply_to_screen_name?tde(t):void 0,entities:M6(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:D6(t.quoted_tweet),entities:M6(t.quoted_tweet)}:void 0}),ode="_root_g9tkv_1",ade="_rounded_g9tkv_6",cde="_mediaWrapper_g9tkv_10",lde="_grid2Columns_g9tkv_17",ude="_grid3_g9tkv_20",dde="_grid2x2_g9tkv_23",hde="_mediaContainer_g9tkv_26",fde="_mediaLink_g9tkv_34",pde="_skeleton_g9tkv_38",gde="_image_g9tkv_43",So={root:ode,rounded:ade,mediaWrapper:cde,grid2Columns:lde,grid3:ude,grid2x2:dde,mediaContainer:hde,mediaLink:fde,skeleton:pde,image:gde},mde="_anchor_fp31d_1",yde="_videoButton_fp31d_17",wde="_videoButtonIcon_fp31d_35",bde="_watchOnTwitter_fp31d_44",vde="_viewReplies_fp31d_60",Im={anchor:mde,videoButton:yde,videoButtonIcon:wde,watchOnTwitter:bde,viewReplies:vde},Ede=({tweet:t,media:e})=>{const[n,r]=k.useState(!0),[s,i]=k.useState(!1),[o,a]=k.useState(!1),c=rde(e);let l=0;return y.jsxs(y.Fragment,{children:[y.jsx("video",{className:So.image,poster:Gq(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:y.jsx("source",{src:c.url,type:c.content_type})}),n&&y.jsx("button",{type:"button",className:Im.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:y.jsx("svg",{viewBox:"0 0 24 24",className:Im.videoButtonIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&y.jsx("div",{className:Im.watchOnTwitter,children:y.jsx("a",{href:t.url,className:Im.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&y.jsx("a",{href:t.url,className:Qh(Im.anchor,Im.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Cde=t=>y.jsx("img",{...t}),L6=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},qq=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Cde;return y.jsx("div",{className:Qh(So.root,!n&&So.rounded),children:y.jsx("div",{className:Qh(So.mediaWrapper,o>1&&So.grid2Columns,o===3&&So.grid3,o>4&&So.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>y.jsx(k.Fragment,{children:l.type==="photo"?y.jsxs("a",{href:t.url,className:Qh(So.mediaContainer,So.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:So.skeleton,style:L6(l,o)}),y.jsx(c,{src:Gq(l,"small"),alt:l.ext_alt_text||"Image",className:So.image,draggable:!0})]},l.media_url_https):y.jsxs("div",{className:So.mediaContainer,children:[y.jsx("div",{className:So.skeleton,style:L6(l,o)}),y.jsx(Ede,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},_de={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Ade=new Intl.DateTimeFormat("en-US",_de),Sde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},xde=t=>{const e=Sde(Ade.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},Ide="_root_i24yn_1",Nde={root:Ide},Tde=({tweet:t})=>{const e=new Date(t.created_at),n=xde(e);return y.jsx("a",{className:Nde.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:y.jsx("time",{dateTime:e.toISOString(),children:n})})},Rde="_info_19qcj_1",Pde="_infoLink_19qcj_10",Ode="_infoIcon_19qcj_30",YR={info:Rde,infoLink:Pde,infoIcon:Ode},kde=({tweet:t})=>y.jsxs("div",{className:YR.info,children:[y.jsx(Tde,{tweet:t}),y.jsx("a",{className:YR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:y.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:YR.infoIcon,children:y.jsx("g",{children:y.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Dde="_actions_n2anf_1",Mde="_like_n2anf_13",Lde="_reply_n2anf_14",Ude="_copy_n2anf_15",Bde="_likeIconWrapper_n2anf_27",$de="_likeCount_n2anf_30",Fde="_replyIconWrapper_n2anf_35",jde="_copyIconWrapper_n2anf_36",Wde="_likeIcon_n2anf_27",zde="_replyIcon_n2anf_35",Hde="_copyIcon_n2anf_36",Gde="_replyText_n2anf_56",qde="_copyText_n2anf_57",Ki={actions:Dde,like:Mde,reply:Lde,copy:Ude,likeIconWrapper:Bde,likeCount:$de,replyIconWrapper:Fde,copyIconWrapper:jde,likeIcon:Wde,replyIcon:zde,copyIcon:Hde,replyText:Gde,copyText:qde},Vde=({tweet:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return k.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),y.jsxs("button",{type:"button",className:Ki.copy,"aria-label":"Copy link",onClick:r,children:[y.jsx("div",{className:Ki.copyIconWrapper,children:e?y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.copyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.copyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),y.jsx("span",{className:Ki.copyText,children:e?"Copied!":"Copy link"})]})},Kde=({tweet:t})=>{const e=Ik(t.favorite_count);return y.jsxs("div",{className:Ki.actions,children:[y.jsxs("a",{className:Ki.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[y.jsx("div",{className:Ki.likeIconWrapper,children:y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.likeIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),y.jsx("span",{className:Ki.likeCount,children:e})]}),y.jsxs("a",{className:Ki.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[y.jsx("div",{className:Ki.replyIconWrapper,children:y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.replyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),y.jsx("span",{className:Ki.replyText,children:"Reply"})]}),y.jsx(Vde,{tweet:t})]})},Yde="_replies_1cutb_1",Qde="_link_1cutb_4",Jde="_text_1cutb_23",QR={replies:Yde,link:Qde,text:Jde},Zde=({tweet:t})=>y.jsx("div",{className:QR.replies,children:y.jsx("a",{className:QR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:y.jsx("span",{className:QR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Ik(t.conversation_count)} reply`:`Read ${Ik(t.conversation_count)} replies`})})}),Xde="_root_q5799_1",ehe="_article_q5799_16",U6={root:Xde,article:ehe},the=({tweet:t,children:e})=>y.jsx("div",{className:U6.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:y.jsx("article",{className:U6.article,children:e})}),nhe="_header_r31i5_1",rhe="_avatar_r31i5_11",she="_avatarSquare_r31i5_17",ihe="_author_r31i5_21",ohe="_authorText_r31i5_26",ahe="_username_r31i5_33",Bf={header:nhe,avatar:rhe,avatarSquare:she,author:ihe,authorText:ohe,username:ahe},che=({tweet:t})=>{const{user:e}=t;return y.jsxs("div",{className:Bf.header,children:[y.jsx("a",{href:t.url,className:Bf.avatar,target:"_blank",rel:"noopener noreferrer",children:y.jsx("div",{className:Qh(Bf.avatarOverflow,e.profile_image_shape==="Square"&&Bf.avatarSquare),children:y.jsx(Wq,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),y.jsxs("div",{className:Bf.author,children:[y.jsx("div",{className:Bf.authorText,children:y.jsx("span",{title:e.name,children:e.name})}),y.jsx(zq,{user:e}),y.jsx("div",{className:Bf.username,children:y.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},lhe="_root_175ot_1",uhe={root:lhe},dhe=({tweet:t})=>y.jsx("p",{className:uhe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>y.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),hhe=({tweet:t})=>{var e;return y.jsxs(the,{tweet:t,children:[y.jsx(che,{tweet:t}),y.jsx(dhe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?y.jsx(qq,{quoted:!0,tweet:t}):null]})},fhe=({tweet:t,components:e})=>{var n;const r=k.useMemo(()=>ide(t),[t]);return y.jsxs(lL,{children:[y.jsx(Fue,{tweet:r,components:e}),r.in_reply_to_status_id_str&&y.jsx(zue,{tweet:r}),y.jsx(Yue,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?y.jsx(qq,{tweet:r,components:e}):null,r.quoted_tweet&&y.jsx(hhe,{tweet:r.quoted_tweet}),y.jsx(kde,{tweet:r}),y.jsx(Kde,{tweet:r}),y.jsx(Zde,{tweet:r})]})},phe="_root_16yxa_1",ghe={root:phe},mhe=t=>y.jsx(lL,{children:y.jsxs("div",{className:ghe.root,children:[y.jsx("h3",{children:"Tweet not found"}),y.jsx("p",{children:"The embedded tweet could not be found"})]})}),yhe="_skeleton_oi7hr_1",whe={skeleton:yhe},iA=({style:t})=>y.jsx("span",{className:whe.skeleton,style:t}),bhe="_root_17qqv_1",vhe={root:bhe},Ehe=()=>y.jsxs(lL,{className:vhe.root,children:[y.jsx(iA,{style:{height:"3rem",marginBottom:"0.75rem"}}),y.jsx(iA,{style:{height:"6rem",margin:"0.5rem 0"}}),y.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),y.jsx(iA,{style:{height:"2rem"}}),y.jsx(iA,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var Vq={exports:{}},Kq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw=k;function Che(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _he=typeof Object.is=="function"?Object.is:Che,Ahe=dw.useState,She=dw.useEffect,xhe=dw.useLayoutEffect,Ihe=dw.useDebugValue;function Nhe(t,e){var n=e(),r=Ahe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return xhe(function(){s.value=n,s.getSnapshot=e,JR(s)&&i({inst:s})},[t,n,e]),She(function(){return JR(s)&&i({inst:s}),t(function(){JR(s)&&i({inst:s})})},[t]),Ihe(n),n}function JR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_he(t,n)}catch{return!0}}function The(t,e){return e()}var Rhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?The:Nhe;Kq.useSyncExternalStore=dw.useSyncExternalStore!==void 0?dw.useSyncExternalStore:Rhe;Vq.exports=Kq;var Yq=Vq.exports;const Qq=0,Jq=1,Zq=2,B6=3;var $6=Object.prototype.hasOwnProperty;function Nk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Nk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if($6.call(t,n)&&++r&&!$6.call(e,n)||!(n in e)||!Nk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Lu=new WeakMap,Oh=()=>{},mi=Oh(),Tk=Object,an=t=>t===mi,Al=t=>typeof t=="function",pf=(t,e)=>({...t,...e}),Xq=t=>Al(t.then),ZR={},oA={},uL="undefined",F_=typeof window!=uL,Rk=typeof document!=uL,Phe=F_&&"Deno"in window,Ohe=()=>F_&&typeof window.requestAnimationFrame!=uL,eV=(t,e)=>{const n=Lu.get(t);return[()=>!an(e)&&t.get(e)||ZR,r=>{if(!an(e)){const s=t.get(e);e in oA||(oA[e]=s),n[5](e,pf(s,r),s||ZR)}},n[6],()=>!an(e)&&e in oA?oA[e]:!an(e)&&t.get(e)||ZR]};let Pk=!0;const khe=()=>Pk,[Ok,kk]=F_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Oh,Oh],Dhe=()=>{const t=Rk&&document.visibilityState;return an(t)||t!=="hidden"},Mhe=t=>(Rk&&document.addEventListener("visibilitychange",t),Ok("focus",t),()=>{Rk&&document.removeEventListener("visibilitychange",t),kk("focus",t)}),Lhe=t=>{const e=()=>{Pk=!0,t()},n=()=>{Pk=!1};return Ok("online",e),Ok("offline",n),()=>{kk("online",e),kk("offline",n)}},Uhe={isOnline:khe,isVisible:Dhe},Bhe={initFocus:Mhe,initReconnect:Lhe},F6=!zo.useId,eC=!F_||Phe,$he=t=>Ohe()?window.requestAnimationFrame(t):setTimeout(t,1),XR=eC?k.useEffect:k.useLayoutEffect,eP=typeof navigator<"u"&&navigator.connection,j6=!eC&&eP&&(["slow-2g","2g"].includes(eP.effectiveType)||eP.saveData),aA=new WeakMap,Fhe=t=>Tk.prototype.toString.call(t),tP=(t,e)=>t===`[object ${e}]`;let jhe=0;const Dk=t=>{const e=typeof t,n=Fhe(t),r=tP(n,"Date"),s=tP(n,"RegExp"),i=tP(n,"Object");let o,a;if(Tk(t)===t&&!r&&!s){if(o=aA.get(t),o)return o;if(o=++jhe+"~",aA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Dk(t[a])+",";aA.set(t,o)}if(i){o="#";const c=Tk.keys(t).sort();for(;!an(a=c.pop());)an(t[a])||(o+=a+":"+Dk(t[a])+",");aA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},dL=t=>{if(Al(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Dk(t):"",[t,e]};let Whe=0;const Mk=()=>++Whe;async function tV(...t){const[e,n,r,s]=t,i=pf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Al(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=dL(h);if(!f)return;const[p,g]=eV(e,f),[w,m,b,v]=Lu.get(e),A=()=>{const W=w[f];return(Al(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](Zq).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,T,x=!1;const N=Mk();m[f]=[N,0];const S=!an(c),D=p(),P=D.data,$=D._c,G=an($)?P:$;if(S&&(c=Al(c)?c(G,P):c,g({data:c,_c:G})),Al(C))try{C=C(G)}catch(W){T=W,x=!0}if(C&&Xq(C))if(C=await C.catch(W=>{T=W,x=!0}),N!==m[f][0]){if(x)throw T;return C}else x&&S&&l(T)&&(o=!0,g({data:G,_c:mi}));if(o&&!x)if(Al(o)){const W=o(C,G);g({data:W,error:mi,_c:mi})}else g({data:C,error:mi,_c:mi});if(m[f][1]=Mk(),Promise.resolve(A()).then(()=>{g({_c:mi})}),x){if(u)throw T;return}return C}}const W6=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},zhe=(t,e)=>{if(!Lu.has(t)){const n=pf(Bhe,e),r=Object.create(null),s=tV.bind(mi,t);let i=Oh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Lu.has(t)&&(Lu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!eC)){const u=n.initFocus(setTimeout.bind(mi,W6.bind(mi,r,Qq))),d=n.initReconnect(setTimeout.bind(mi,W6.bind(mi,r,Jq)));i=()=>{u&&u(),d&&d(),Lu.delete(t)}}};return l(),[t,s,l,i]}return[t,Lu.get(t)[4]]},Hhe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!an(i)&&o>i||setTimeout(r,a,s)},Ghe=Nk,[nV,qhe]=zhe(new Map),Vhe=pf({onLoadingSlow:Oh,onSuccess:Oh,onError:Oh,onErrorRetry:Hhe,onDiscarded:Oh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:j6?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:j6?5e3:3e3,compare:Ghe,isPaused:()=>!1,cache:nV,mutate:qhe,fallback:{}},Uhe),Khe=(t,e)=>{const n=pf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=pf(s,o))}return n},Yhe=k.createContext({}),Qhe="$inf$",rV=F_&&window.__SWR_DEVTOOLS_USE__,Jhe=rV?window.__SWR_DEVTOOLS_USE__:[],Zhe=()=>{rV&&(window.__SWR_DEVTOOLS_REACT__=zo)},Xhe=t=>Al(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],efe=()=>pf(Vhe,k.useContext(Yhe)),tfe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=dL(e),[,,,a]=Lu.get(nV);if(o.startsWith(Qhe))return n(...i);const c=a[o];return an(c)?n(...i):(delete a[o],c)}),r),nfe=Jhe.concat(tfe),rfe=t=>function(...n){const r=efe(),[s,i,o]=Xhe(n),a=Khe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(nfe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},sfe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Zhe();const nP=zo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),rP={dedupe:!0},ife=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Lu.get(r),[m,b]=dL(t),v=k.useRef(!1),A=k.useRef(!1),C=k.useRef(m),T=k.useRef(e),x=k.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[D,P,$,G]=eV(r,m),W=k.useRef({}).current,I=an(o)?an(n.fallback)?mi:n.fallback[m]:o,R=(X,ce)=>{for(const he in W){const me=he;if(me==="data"){if(!s(X[me],ce[me])&&(!an(X[me])||!s(te,ce[me])))return!1}else if(ce[me]!==X[me])return!1}return!0},B=k.useMemo(()=>{const X=!m||!e?!1:an(a)?N().isPaused()||i?!1:c!==!1:a,ce=ht=>{const vt=pf(ht);return delete vt._k,X?{isValidating:!0,isLoading:!0,...vt}:vt},he=D(),me=G(),be=ce(he),ct=he===me?be:ce(me);let et=be;return[()=>{const ht=ce(D());return R(ht,et)?(et.data=ht.data,et.isLoading=ht.isLoading,et.isValidating=ht.isValidating,et.error=ht.error,et):(et=ht,ht)},()=>ct]},[r,m]),O=Yq.useSyncExternalStore(k.useCallback(X=>$(m,(ce,he)=>{R(he,ce)||X()}),[r,m]),B[0],B[1]),M=!v.current,j=f[m]&&f[m].length>0,V=O.data,se=an(V)?I&&Xq(I)?nP(I):I:V,ie=O.error,Q=k.useRef(se),te=h?an(V)?an(Q.current)?se:Q.current:V:se,pe=j&&!an(ie)?!1:M&&!an(a)?a:N().isPaused()?!1:i?an(se)?!1:c:an(se)||c,Ze=!!(m&&e&&M&&pe),Xe=an(O.isValidating)?Ze:O.isValidating,We=an(O.isLoading)?Ze:O.isLoading,mt=k.useCallback(async X=>{const ce=T.current;if(!m||!ce||A.current||N().isPaused())return!1;let he,me,be=!0;const ct=X||{},et=!g[m]||!ct.dedupe,ht=()=>F6?!A.current&&m===C.current&&v.current:m===C.current,vt={isValidating:!1,isLoading:!1},qn=()=>{P(vt)},dr=()=>{const rn=g[m];rn&&rn[1]===me&&delete g[m]},ot={isValidating:!0};an(D().data)&&(ot.isLoading=!0);try{if(et&&(P(ot),n.loadingTimeout&&an(D().data)&&setTimeout(()=>{be&&ht()&&N().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[ce(b),Mk()]),[he,me]=g[m],he=await he,et&&setTimeout(dr,n.dedupingInterval),!g[m]||g[m][1]!==me)return et&&ht()&&N().onDiscarded(m),!1;vt.error=mi;const rn=p[m];if(!an(rn)&&(me<=rn[0]||me<=rn[1]||rn[1]===0))return qn(),et&&ht()&&N().onDiscarded(m),!1;const Wt=D().data;vt.data=s(Wt,he)?Wt:he,et&&ht()&&N().onSuccess(he,m,n)}catch(rn){dr();const Wt=N(),{shouldRetryOnError:Qe}=Wt;Wt.isPaused()||(vt.error=rn,et&&ht()&&(Wt.onError(rn,m,Wt),(Qe===!0||Al(Qe)&&Qe(rn))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&Wt.onErrorRetry(rn,m,Wt,Dn=>{const zc=f[m];zc&&zc[0]&&zc[0](B6,Dn)},{retryCount:(ct.retryCount||0)+1,dedupe:!0})))}return be=!1,qn(),!0},[m,r]),Ot=k.useCallback((...X)=>tV(r,C.current,...X),[]);if(XR(()=>{T.current=e,x.current=n,an(V)||(Q.current=V)}),XR(()=>{if(!m)return;const X=mt.bind(mi,rP);let ce=0;N().revalidateOnFocus&&(ce=Date.now()+N().focusThrottleInterval);const me=sfe(m,f,(be,ct={})=>{if(be==Qq){const et=Date.now();N().revalidateOnFocus&&et>ce&&S()&&(ce=et+N().focusThrottleInterval,X())}else if(be==Jq)N().revalidateOnReconnect&&S()&&X();else{if(be==Zq)return mt();if(be==B6)return mt(ct)}});return A.current=!1,C.current=m,v.current=!0,P({_k:b}),pe&&(g[m]||(an(se)||eC?X():$he(X))),()=>{A.current=!0,me()}},[m]),XR(()=>{let X;function ce(){const me=Al(l)?l(D().data):l;me&&X!==-1&&(X=setTimeout(he,me))}function he(){!D().error&&(u||N().isVisible())&&(d||N().isOnline())?mt(rP).then(ce):ce()}return ce(),()=>{X&&(clearTimeout(X),X=-1)}},[l,u,d,m]),k.useDebugValue(te),i&&an(se)&&m){if(!F6&&eC)throw new Error("Fallback data is required when using Suspense in SSR.");T.current=e,x.current=n,A.current=!1;const X=w[m];if(!an(X)){const ce=Ot(X);nP(ce)}if(an(ie)){const ce=mt(rP);an(te)||(ce.status="fulfilled",ce.value=!0),nP(ce)}else throw ie}return{mutate:Ot,get data(){return W.data=!0,te},get error(){return W.error=!0,ie},get isValidating(){return W.isValidating=!0,Xe},get isLoading(){return W.isLoading=!0,We}}},z6=rfe(ife);class ofe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const afe=z6.default||z6,cfe="https://react-tweet.vercel.app";async function lfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new ofe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const ufe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=afe(()=>e||t?[e||t&&`${cfe}/api/tweet/${t}`,n]:null,lfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},dfe=({id:t,apiUrl:e,fallback:n=y.jsx(Ehe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=ufe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||mhe;return y.jsx(l,{error:i?i(a):a})}return y.jsx(fhe,{tweet:o,components:r})};var SN={exports:{}},sV={},iV={exports:{}},hfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ffe=hfe,pfe=ffe;function oV(){}function aV(){}aV.resetWarningCache=oV;var gfe=function(){function t(r,s,i,o,a,c){if(c!==pfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:aV,resetWarningCache:oV};return n.PropTypes=n,n};iV.exports=gfe();var cV=iV.exports,Lk={exports:{}};function lV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=lV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function H6(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=lV(t))&&(r&&(r+=" "),r+=e);return r}Lk.exports=H6,Lk.exports.clsx=H6;var mfe=Lk.exports,Tr={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.dontSetMe=Efe;Kl.findInArray=yfe;Kl.int=vfe;Kl.isFunction=wfe;Kl.isNum=bfe;function yfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function wfe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function bfe(t){return typeof t=="number"&&!isNaN(t)}function vfe(t){return parseInt(t,10)}function Efe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var em={};Object.defineProperty(em,"__esModule",{value:!0});em.browserPrefixToKey=dV;em.browserPrefixToStyle=Cfe;em.default=void 0;em.getPrefix=uV;const sP=["Moz","Webkit","O","ms"];function uV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<sP.length;s++)if(dV(t,sP[s])in e)return sP[s];return""}function dV(t,e){return e?`${e}${_fe(t)}`:t}function Cfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function _fe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}em.default=uV();Object.defineProperty(Tr,"__esModule",{value:!0});Tr.addClassName=pV;Tr.addEvent=Sfe;Tr.addUserSelectStyles=Lfe;Tr.createCSSTransform=Ofe;Tr.createSVGTransform=kfe;Tr.getTouch=Dfe;Tr.getTouchIdentifier=Mfe;Tr.getTranslation=hL;Tr.innerHeight=Tfe;Tr.innerWidth=Rfe;Tr.matchesSelector=fV;Tr.matchesSelectorAndParentsTo=Afe;Tr.offsetXYFromParent=Pfe;Tr.outerHeight=Ife;Tr.outerWidth=Nfe;Tr.removeClassName=gV;Tr.removeEvent=xfe;Tr.scheduleRemoveUserSelectStyles=Ufe;var Go=Kl,G6=hV(em);function hV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(hV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let cA="";function fV(t,e){return cA||(cA=(0,Go.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Go.isFunction)(t[n])})),(0,Go.isFunction)(t[cA])?t[cA](e):!1}function Afe(t,e,n){let r=t;do{if(fV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Sfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function xfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Ife(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Go.int)(n.borderTopWidth),e+=(0,Go.int)(n.borderBottomWidth),e}function Nfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Go.int)(n.borderLeftWidth),e+=(0,Go.int)(n.borderRightWidth),e}function Tfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Go.int)(n.paddingTop),e-=(0,Go.int)(n.paddingBottom),e}function Rfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Go.int)(n.paddingLeft),e-=(0,Go.int)(n.paddingRight),e}function Pfe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Ofe(t,e){const n=hL(t,e,"px");return{[(0,G6.browserPrefixToKey)("transform",G6.default)]:n}}function kfe(t,e){return hL(t,e,"")}function hL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Dfe(t,e){return t.targetTouches&&(0,Go.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Go.findInArray)(t.changedTouches,n=>e===n.identifier)}function Mfe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Lfe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&pV(t.body,"react-draggable-transparent-selection")}function Ufe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{q6(t)}):q6(t)}function q6(t){if(t)try{if(t.body&&gV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function pV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function gV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.canDragX=Ffe;Yl.canDragY=jfe;Yl.createCoreData=zfe;Yl.createDraggableData=Hfe;Yl.getBoundPosition=Bfe;Yl.getControlPosition=Wfe;Yl.snapToGrid=$fe;var xo=Kl,Sy=Tr;function Bfe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Gfe(r);const s=fL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,xo.int)(u.paddingLeft)+(0,xo.int)(l.marginLeft),top:-s.offsetTop+(0,xo.int)(u.paddingTop)+(0,xo.int)(l.marginTop),right:(0,Sy.innerWidth)(c)-(0,Sy.outerWidth)(s)-s.offsetLeft+(0,xo.int)(u.paddingRight)-(0,xo.int)(l.marginRight),bottom:(0,Sy.innerHeight)(c)-(0,Sy.outerHeight)(s)-s.offsetTop+(0,xo.int)(u.paddingBottom)-(0,xo.int)(l.marginBottom)}}return(0,xo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,xo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,xo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,xo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function $fe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Ffe(t){return t.props.axis==="both"||t.props.axis==="x"}function jfe(t){return t.props.axis==="both"||t.props.axis==="y"}function Wfe(t,e,n){const r=typeof e=="number"?(0,Sy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=fL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Sy.offsetXYFromParent)(r||t,i,n.props.scale)}function zfe(t,e,n){const r=!(0,xo.isNum)(t.lastX),s=fL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Hfe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Gfe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function fL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var xN={},IN={};Object.defineProperty(IN,"__esModule",{value:!0});IN.default=qfe;function qfe(){}Object.defineProperty(xN,"__esModule",{value:!0});xN.default=void 0;var iP=mV(k),ai=pL(cV),Vfe=pL(aL),Vs=Tr,_d=Yl,oP=Kl,Kb=pL(IN);function pL(t){return t&&t.__esModule?t:{default:t}}function mV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(mV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function li(t,e,n){return(e=Kfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kfe(t){var e=Yfe(t,"string");return typeof e=="symbol"?e:e+""}function Yfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const nc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ad=nc.mouse,NN=class extends iP.Component{constructor(){super(...arguments),li(this,"dragging",!1),li(this,"lastX",NaN),li(this,"lastY",NaN),li(this,"touchIdentifier",null),li(this,"mounted",!1),li(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Vs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Vs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Vs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,_d.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,_d.createCoreData)(this,o,a);(0,Kb.default)("DraggableCore: handleDragStart: %j",c),(0,Kb.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Vs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Vs.addEvent)(r,Ad.move,this.handleDrag),(0,Vs.addEvent)(r,Ad.stop,this.handleDragStop))}),li(this,"handleDrag",e=>{const n=(0,_d.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,_d.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,_d.createCoreData)(this,r,s);if((0,Kb.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),li(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,_d.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,_d.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,_d.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Vs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Kb.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Kb.default)("DraggableCore: Removing handlers"),(0,Vs.removeEvent)(a.ownerDocument,Ad.move,this.handleDrag),(0,Vs.removeEvent)(a.ownerDocument,Ad.stop,this.handleDragStop))}),li(this,"onMouseDown",e=>(Ad=nc.mouse,this.handleDragStart(e))),li(this,"onMouseUp",e=>(Ad=nc.mouse,this.handleDragStop(e))),li(this,"onTouchStart",e=>(Ad=nc.touch,this.handleDragStart(e))),li(this,"onTouchEnd",e=>(Ad=nc.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Vs.addEvent)(e,nc.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Vs.removeEvent)(n,nc.mouse.move,this.handleDrag),(0,Vs.removeEvent)(n,nc.touch.move,this.handleDrag),(0,Vs.removeEvent)(n,nc.mouse.stop,this.handleDragStop),(0,Vs.removeEvent)(n,nc.touch.stop,this.handleDragStop),(0,Vs.removeEvent)(e,nc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Vs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Vfe.default.findDOMNode(this)}render(){return iP.cloneElement(iP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};xN.default=NN;li(NN,"displayName","DraggableCore");li(NN,"propTypes",{allowAnyClick:ai.default.bool,allowMobileScroll:ai.default.bool,children:ai.default.node.isRequired,disabled:ai.default.bool,enableUserSelectHack:ai.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ai.default.arrayOf(ai.default.number),handle:ai.default.string,cancel:ai.default.string,nodeRef:ai.default.object,onStart:ai.default.func,onDrag:ai.default.func,onStop:ai.default.func,onMouseDown:ai.default.func,scale:ai.default.number,className:oP.dontSetMe,style:oP.dontSetMe,transform:oP.dontSetMe});li(NN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(k),n=u(cV),r=u(aL),s=mfe,i=Tr,o=Yl,a=Kl,c=u(xN),l=u(IN);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,T){if(!T&&C&&C.__esModule)return C;var x,N,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(x=T?A:v){if(x.has(C))return x.get(C);x.set(C,S)}for(const D in C)D!=="default"&&{}.hasOwnProperty.call(C,D)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,D))&&(N.get||N.set)?x(S,D,N):S[D]=C[D]);return S})(m,b)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,b,v){return(b=p(b))in m?Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[b]=v,m}function p(m){var b=g(m,"string");return typeof b=="symbol"?b:b+""}function g(m,b){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),T={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=T;T.x+=this.state.slackX,T.y+=this.state.slackY;const[D,P]=(0,o.getBoundPosition)(this,T.x,T.y);T.x=D,T.y=P,T.slackX=this.state.slackX+(N-T.x),T.slackY=this.state.slackY+(S-T.y),C.x=T.x,C.y=T.y,C.deltaX=T.x-this.state.x,C.deltaY=T.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(T)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const T={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;T.x=N,T.y=S}this.setState(T)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:C,defaultClassName:T,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:D,scale:P,...$}=this.props;let G={},W=null;const R=!!!S||this.state.dragging,B=S||C,O={x:(0,o.canDragX)(this)&&R?this.state.x:B.x,y:(0,o.canDragY)(this)&&R?this.state.y:B.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(O,D):G=(0,i.createCSSTransform)(O,D);const M=(0,s.clsx)(A.props.className||"",T,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},$,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...G},transform:W}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(sV);const{default:yV,DraggableCore:Qfe}=sV;SN.exports=yV;SN.exports.default=yV;SN.exports.DraggableCore=Qfe;var Jfe=SN.exports;const j_=Qg(Jfe);function yr(){return yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yr.apply(null,arguments)}function wV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bV={exports:{}},kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es=typeof Symbol=="function"&&Symbol.for,gL=Es?Symbol.for("react.element"):60103,mL=Es?Symbol.for("react.portal"):60106,TN=Es?Symbol.for("react.fragment"):60107,RN=Es?Symbol.for("react.strict_mode"):60108,PN=Es?Symbol.for("react.profiler"):60114,ON=Es?Symbol.for("react.provider"):60109,kN=Es?Symbol.for("react.context"):60110,yL=Es?Symbol.for("react.async_mode"):60111,DN=Es?Symbol.for("react.concurrent_mode"):60111,MN=Es?Symbol.for("react.forward_ref"):60112,LN=Es?Symbol.for("react.suspense"):60113,Zfe=Es?Symbol.for("react.suspense_list"):60120,UN=Es?Symbol.for("react.memo"):60115,BN=Es?Symbol.for("react.lazy"):60116,Xfe=Es?Symbol.for("react.block"):60121,epe=Es?Symbol.for("react.fundamental"):60117,tpe=Es?Symbol.for("react.responder"):60118,npe=Es?Symbol.for("react.scope"):60119;function Zo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gL:switch(t=t.type,t){case yL:case DN:case TN:case PN:case RN:case LN:return t;default:switch(t=t&&t.$$typeof,t){case kN:case MN:case BN:case UN:case ON:return t;default:return e}}case mL:return e}}}function vV(t){return Zo(t)===DN}kn.AsyncMode=yL;kn.ConcurrentMode=DN;kn.ContextConsumer=kN;kn.ContextProvider=ON;kn.Element=gL;kn.ForwardRef=MN;kn.Fragment=TN;kn.Lazy=BN;kn.Memo=UN;kn.Portal=mL;kn.Profiler=PN;kn.StrictMode=RN;kn.Suspense=LN;kn.isAsyncMode=function(t){return vV(t)||Zo(t)===yL};kn.isConcurrentMode=vV;kn.isContextConsumer=function(t){return Zo(t)===kN};kn.isContextProvider=function(t){return Zo(t)===ON};kn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gL};kn.isForwardRef=function(t){return Zo(t)===MN};kn.isFragment=function(t){return Zo(t)===TN};kn.isLazy=function(t){return Zo(t)===BN};kn.isMemo=function(t){return Zo(t)===UN};kn.isPortal=function(t){return Zo(t)===mL};kn.isProfiler=function(t){return Zo(t)===PN};kn.isStrictMode=function(t){return Zo(t)===RN};kn.isSuspense=function(t){return Zo(t)===LN};kn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===TN||t===DN||t===PN||t===RN||t===LN||t===Zfe||typeof t=="object"&&t!==null&&(t.$$typeof===BN||t.$$typeof===UN||t.$$typeof===ON||t.$$typeof===kN||t.$$typeof===MN||t.$$typeof===epe||t.$$typeof===tpe||t.$$typeof===npe||t.$$typeof===Xfe)};kn.typeOf=Zo;bV.exports=kn;var rpe=bV.exports,wL=rpe,spe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ipe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ope={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bL={};bL[wL.ForwardRef]=ope;bL[wL.Memo]=EV;function V6(t){return wL.isMemo(t)?EV:bL[t.$$typeof]||spe}var ape=Object.defineProperty,cpe=Object.getOwnPropertyNames,K6=Object.getOwnPropertySymbols,lpe=Object.getOwnPropertyDescriptor,upe=Object.getPrototypeOf,Y6=Object.prototype;function CV(t,e,n){if(typeof e!="string"){if(Y6){var r=upe(e);r&&r!==Y6&&CV(t,r,n)}var s=cpe(e);K6&&(s=s.concat(K6(e)));for(var i=V6(t),o=V6(e),a=0;a<s.length;++a){var c=s[a];if(!ipe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=lpe(e,c);try{ape(t,c,l)}catch{}}}}return t}var dpe=CV;const hpe=Qg(dpe);var _V={};Object.defineProperty(_V,"__esModule",{value:!0});_V.default=fpe;function fpe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function lA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $x(){return $x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$x.apply(this,arguments)}function ppe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Sd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gpe(t){var e=function(n){ppe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,lA(Sd(Sd(i)),"cachedTheme",void 0),lA(Sd(Sd(i)),"lastOuterTheme",void 0),lA(Sd(Sd(i)),"lastTheme",void 0),lA(Sd(Sd(i)),"renderProvider",function(l){var u=i.props.children;return zo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?$x({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?zo.createElement(t.Consumer,null,this.renderProvider):null},r}(zo.Component);return e}function mpe(t){return function(n){var r=zo.forwardRef(function(s,i){return zo.createElement(t.Consumer,null,function(o){return zo.createElement(n,$x({theme:o,ref:i},s))})});return hpe(r,n),r}}function ype(t){var e=function(){var r=zo.useContext(t);return r};return e}function wpe(t){return{context:t,withTheme:mpe(t),useTheme:ype(t),ThemeProvider:gpe(t)}}var AV=k.createContext();wpe(AV);var Q6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eb=(typeof window>"u"?"undefined":Q6(window))==="object"&&(typeof document>"u"?"undefined":Q6(document))==="object"&&document.nodeType===9;function tC(t){"@babel/helpers - typeof";return tC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tC(t)}function bpe(t,e){if(tC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vpe(t){var e=bpe(t,"string");return tC(e)=="symbol"?e:e+""}function Epe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vpe(r.key),r)}}function vL(t,e,n){return e&&Epe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uk(t,e){return Uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Uk(t,e)}function SV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Uk(t,e)}function J6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Cpe={}.constructor;function Bk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Bk);if(t.constructor!==Cpe)return t;var e={};for(var n in t)e[n]=Bk(t[n]);return e}function $N(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Bk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var Z6=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},cg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=Z6(e[r]," ");else n=Z6(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function tb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Yb(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function nC(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=tb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Yb(f+":"+u+cg(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=Yb(g+":"+u+cg(w)+";",o))}for(var m in e){var b=e[m];b!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=Yb(m+":"+u+cg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Yb(""+t+u+"{"+r,o)+Yb("}",o))}var _pe=/([[\].#*$><+~=|^:(),"'`\s])/g,X6=typeof CSS<"u"&&CSS.escape,EL=function(t){return X6?X6(t):t.replace(_pe,"\\$1")},xV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),$k=function(t){SV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(J6(J6(o)),l),o.selectorText="."+EL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=cg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?yr({},s,{allowEmpty:!0}):s;return nC(this.selectorText,this.style,a)},vL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(xV),Ape={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new $k(e,n,r)}},aP={indent:1,children:!0},Spe=/@([\w-]+)/,xpe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Spe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new FN(yr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=aP);var s=tb(r),i=s.linebreak;if(r.indent==null&&(r.indent=aP.indent),r.children==null&&(r.children=aP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Ipe=/@container|@media|@supports\s+/,Npe={onCreateRule:function(e,n,r){return Ipe.test(e)?new xpe(e,n,r):null}},cP={indent:1,children:!0},Tpe=/@keyframes\s+([\w-]+)/,Fk=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Tpe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:EL(c(this,a)),this.rules=new FN(yr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],yr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=cP);var s=tb(r),i=s.linebreak;if(r.indent==null&&(r.indent=cP.indent),r.children==null&&(r.children=cP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Rpe=/@keyframes\s+/,Ppe=/\$([\w-]+)/g,jk=function(e,n){return typeof e=="string"?e.replace(Ppe,function(r,s){return s in n?n[s]:r}):e},e8=function(e,n,r){var s=e[n],i=jk(s,r);i!==s&&(e[n]=i)},Ope={onCreateRule:function(e,n,r){return typeof e=="string"&&Rpe.test(e)?new Fk(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&e8(e,"animation-name",r.keyframes),"animation"in e&&e8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return jk(e,s.keyframes);case"animation-name":return jk(e,s.keyframes);default:return e}}},kpe=function(t){SV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?yr({},s,{allowEmpty:!0}):s;return nC(this.key,this.style,a)},e}(xV),Dpe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new kpe(e,n,r):null}},Mpe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=tb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=nC(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return nC(this.at,this.style,r)},t}(),Lpe=/@font-face/,Upe={onCreateRule:function(e,n,r){return Lpe.test(e)?new Mpe(e,n,r):null}},Bpe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return nC(this.key,this.style,r)},t}(),$pe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new Bpe(e,n,r):null}},Fpe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),jpe={"@charset":!0,"@import":!0,"@namespace":!0},Wpe={onCreateRule:function(e,n,r){return e in jpe?new Fpe(e,n,r):null}},t8=[Ape,Npe,Ope,Dpe,Upe,$pe,Wpe],zpe={process:!0},n8={force:!0,process:!0},FN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=yr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+EL(this.classes[p]));var g=$N(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=yr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof $k?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Fk&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof $k?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Fk&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=zpe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,n8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,n8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=tb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),IV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=yr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new FN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Hpe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Gpe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=wV(s,["attached"]),a=tb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},vL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),oE=new Gpe,Wk=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),zk="2f1acc6c3a606b082e5eef5e54414ffb";Wk[zk]==null&&(Wk[zk]=0);var r8=Wk[zk]++,s8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+r8+a+n:c+i.key+"-"+r8+(a?"-"+a:"")+"-"+n};return r},NV=function(e){var n;return function(){return n||(n=e()),n}},qpe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},Vpe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=cg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},Kpe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},Ype=function(e,n){return e.selectorText=n,e.selectorText===n},TV=NV(function(){return document.querySelector("head")});function Qpe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Jpe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Zpe(t){for(var e=TV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Xpe(t){var e=oE.registry;if(e.length>0){var n=Qpe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=Jpe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Zpe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function ege(t,e){var n=e.insertionPoint,r=Xpe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}TV().appendChild(t)}var tge=NV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),i8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},o8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},nge=function(){var e=document.createElement("style");return e.textContent=`
`,e},rge=function(){function t(n){this.getPropertyValue=qpe,this.setProperty=Vpe,this.removeProperty=Kpe,this.setSelector=Ype,this.hasInsertedRules=!1,this.cssRules=[],n&&oE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||nge(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=tge();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){ege(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=o8(i,s);if(a=i8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=o8(i,s),d=i8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof IV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),sge=0,ige=function(){function t(n){this.id=sge++,this.version="10.10.0",this.plugins=new Hpe,this.options={id:{minify:!1},createGenerateId:s8,Renderer:eb?rge:null,plugins:[]},this.generateId=s8({minify:!1});for(var r=0;r<t8.length;r++)this.plugins.use(t8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=yr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=oE.index===0?0:oE.index+1);var a=new IV(r,yr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),oE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=yr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=$N(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),RV=function(e){return new ige(e)},a8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},vL(t,[{key:"size",get:function(){return this.length}}]),t}(),CL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function PV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=PV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */RV();var OV=Date.now(),lP="fnValues"+OV,uP="fnStyle"+ ++OV,oge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=$N(n,{},s);return i[uP]=r,i},onProcessStyle:function(n,r){if(lP in r||uP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[lP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[uP];a&&(o.style=a(n)||{});var c=o[lP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function age(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var ry;typeof self<"u"?ry=self:typeof window<"u"?ry=window:typeof global<"u"?ry=global:typeof module<"u"?ry=module:ry=Function("return this")();var c8=age(ry),l8=function(e){return e&&e[c8]&&e===e[c8]()},cge=function(e){return{onCreateRule:function(r,s,i){if(!l8(s))return null;var o=s,a=$N(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!l8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},lge=/;\n/,uge=function(e){for(var n={},r=e.split(lge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},dge=function(e){typeof e.style=="string"&&(e.style=uge(e.style))};function hge(){return{onProcessRule:dge}}var Jh="@global",Hk="@global ",fge=function(){function t(n,r,s){this.type="global",this.at=Jh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new FN(yr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),pge=function(){function t(n,r,s){this.type="global",this.at=Jh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(Hk.length);this.rule=s.jss.createRule(i,r,yr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),gge=/\s*,\s*/g;function kV(t,e){for(var n=t.split(gge),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function mge(t,e){var n=t.options,r=t.style,s=r?r[Jh]:null;if(s){for(var i in s)e.addRule(i,s[i],yr({},n,{selector:kV(i,t.selector)}));delete r[Jh]}}function yge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Jh.length)!==Jh)){var i=kV(s.substr(Jh.length),t.selector);e.addRule(i,r[s],yr({},n,{selector:i})),delete r[s]}}function wge(){function t(n,r,s){if(!n)return null;if(n===Jh)return new fge(n,r,s);if(n[0]==="@"&&n.substr(0,Hk.length)===Hk)return new pge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(mge(n,r),yge(n,r))}return{onCreateRule:t,onProcessRule:e}}var yS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},dP="extendCurrValue"+Date.now();function bge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];bp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?yr({},t,{extend:l}):t.extend[c];bp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){bp(t.extend.extend,e,n,r);continue}if(yS(t.extend[d])){d in r||(r[d]={}),bp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function vge(t,e,n,r){for(var s in t)if(s!=="extend"){if(yS(r[s])&&yS(t[s])){bp(t[s],e,n,r[s]);continue}if(yS(t[s])){r[s]=bp(t[s],e,n);continue}r[s]=t[s]}}function bp(t,e,n,r){return r===void 0&&(r={}),bge(t,e,n,r),vge(t,e,n,r),r}function Ege(){function t(n,r,s){return"extend"in n?bp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[dP])s.prop(i,null);return s[dP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[dP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var u8=/\s*,\s*/g,Cge=/&/g,_ge=/\$([\w-]+)/g;function Age(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(u8),a=s.split(u8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Cge,u):u+" "+h}return c}function n(s,i,o){if(o)return yr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=yr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(_ge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],yr({},l,{selector:p})):c.addRule(g,s[d],yr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function Gk(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=Gk(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return Gk(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Sge(){function t(e,n){return"composes"in e&&(Gk(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var xge=/[A-Z]/g,Ige=/^ms-/,hP={};function Nge(t){return"-"+t.toLowerCase()}function DV(t){if(hP.hasOwnProperty(t))return hP[t];var e=t.replace(xge,Nge);return hP[t]=Ige.test(e)?"-"+e:e}function Fx(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:DV(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Fx):e.fallbacks=Fx(t.fallbacks)),e}function Tge(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Fx(n[r]);return n}return Fx(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=DV(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=CL&&CSS?CSS.px:"px",uA=CL&&CSS?CSS.ms:"ms",Nm=CL&&CSS?CSS.percent:"%",Rge={"animation-delay":uA,"animation-duration":uA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Nm,"perspective-origin-y":Nm,"transform-origin":Nm,"transform-origin-x":Nm,"transform-origin-y":Nm,"transform-origin-z":Nm,"transition-delay":uA,"transition-duration":uA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function MV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Pge=MV(Rge);function aE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=aE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=aE(s,e[s],n);else for(var i in e)e[i]=aE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Pge[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Oge(t){t===void 0&&(t={});var e=MV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=aE(o,s[o],e);return s}function r(s,i){return aE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var kge={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Dge={position:!0,size:!0},dA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},fP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function Mge(t,e,n){return t.map(function(r){return UV(r,e,n,!1,!0)})}function LV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?LV(t[0],e,n,r):typeof t[0]=="object"?Mge(t,e,r):[t]}function UV(t,e,n,r,s){if(!(dA[e]||fP[e]))return[];var i=[];if(fP[e]&&(t=Lge(t,n,fP[e],r)),Object.keys(t).length)for(var o in dA[e]){if(t[o]){Array.isArray(t[o])?i.push(Dge[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}dA[e][o]!=null&&i.push(dA[e][o])}return!i.length||s?i:[i]}function Lge(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=rC((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function rC(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=rC(t.fallbacks[i],e,!0);continue}t[r]=LV(s,r,kge,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=rC(t.fallbacks,e,!0);continue}t[r]=UV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Uge(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=rC(e[r],n);return e}return rC(e,n)}return{onProcessStyle:t}}function qk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Bge(t){if(Array.isArray(t))return qk(t)}function $ge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fge(t,e){if(t){if(typeof t=="string")return qk(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qk(t,e):void 0}}function jge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wge(t){return Bge(t)||$ge(t)||Fge(t)||jge()}var Av="",Vk="",BV="",$V="",zge=eb&&"ontouchstart"in document.documentElement;if(eb){var pP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Hge=document.createElement("p"),gP=Hge.style,Gge="Transform";for(var mP in pP)if(mP+Gge in gP){Av=mP,Vk=pP[mP];break}Av==="Webkit"&&"msHyphens"in gP&&(Av="ms",Vk=pP.ms,$V="edge"),Av==="Webkit"&&"-apple-trailing-word"in gP&&(BV="apple")}var Lt={js:Av,css:Vk,vendor:BV,browser:$V,isTouch:zge};function qge(t){return t[1]==="-"||Lt.js==="ms"?t:"@"+Lt.css+"keyframes"+t.substr(10)}var Vge={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Lt.js==="ms"?"-webkit-"+e:Lt.css+e}},Kge={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Lt.js==="Webkit"?Lt.css+"print-"+e:e}},Yge=/[-\s]+(.)?/g;function Qge(t,e){return e?e.toUpperCase():""}function _L(t){return t.replace(Yge,Qge)}function gf(t){return _L("-"+t)}var Jge={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Lt.js==="Webkit"){var r="mask-image";if(_L(r)in n)return e;if(Lt.js+gf(r)in n)return Lt.css+e}return e}},Zge={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Lt.vendor==="apple"&&!Lt.isTouch?Lt.css+e:e}},Xge={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Lt.css+e}},eme={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Lt.css+e}},tme={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Lt.js==="Webkit"||Lt.js==="ms"&&Lt.browser!=="edge"?Lt.css+e:e}},nme={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Lt.js==="Moz"||Lt.js==="ms"||Lt.vendor==="apple"?Lt.css+e:e}},rme={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Lt.js==="Webkit"){var r="WebkitColumn"+gf(e);return r in n?Lt.css+"column-"+e:!1}if(Lt.js==="Moz"){var s="page"+gf(e);return s in n?"page-"+e:!1}return!1}},sme={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Lt.js==="Moz")return e;var r=e.replace("-inline","");return Lt.js+gf(r)in n?Lt.css+r:!1}},ime={supportedProperty:function(e,n){return _L(e)in n?e:!1}},ome={supportedProperty:function(e,n){var r=gf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Lt.js+r in n?Lt.css+e:Lt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},ame={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Lt.js==="ms"?""+Lt.css+e:e}},cme={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Lt.js==="ms"?Lt.css+"scroll-chaining":e}},lme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ume={supportedProperty:function(e,n){var r=lme[e];return r&&Lt.js+gf(r)in n?Lt.css+r:!1}},FV={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},dme=Object.keys(FV),hme=function(e){return Lt.css+e},fme={supportedProperty:function(e,n,r){var s=r.multiple;if(dme.indexOf(e)>-1){var i=FV[e];if(!Array.isArray(i))return Lt.js+gf(i)in n?Lt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Lt.js+gf(i[0])in n))return!1;return i.map(hme)}return!1}},jV=[Vge,Kge,Jge,Zge,Xge,eme,tme,nme,rme,sme,ime,ome,ame,cme,ume,fme],d8=jV.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),pme=jV.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Wge(e.noPrefill)),t},[]),Sv,sp={};if(eb){Sv=document.createElement("p");var yP=window.getComputedStyle(document.documentElement,"");for(var wP in yP)isNaN(wP)||(sp[yP[wP]]=yP[wP]);pme.forEach(function(t){return delete sp[t]})}function Kk(t,e){if(e===void 0&&(e={}),!Sv)return t;if(sp[t]!=null)return sp[t];(t==="transition"||t==="transform")&&(e[t]=t in Sv.style);for(var n=0;n<d8.length&&(sp[t]=d8[n](t,Sv.style,e),!sp[t]);n++);try{Sv.style[t]=""}catch{return!1}return sp[t]}var Tm={},gme={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},mme=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Wd;function yme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?Kk(e):", "+Kk(n);return r||e||n}eb&&(Wd=document.createElement("p"));function h8(t,e){var n=e;if(!Wd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Tm[r]!=null)return Tm[r];try{Wd.style[t]=n}catch{return Tm[r]=!1,!1}if(gme[t])n=n.replace(mme,yme);else if(Wd.style[t]===""&&(n=Lt.css+n,n==="-ms-flex"&&(Wd.style[t]="-ms-flexbox"),Wd.style[t]=n,Wd.style[t]===""))return Tm[r]=!1,!1;return Wd.style[t]="",Tm[r]=n,Tm[r]}function wme(){function t(s){if(s.type==="keyframes"){var i=s;i.at=qge(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=Kk(i);c&&c!==i&&(a=!0);var l=!1,u=h8(c,cg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return h8(i,cg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function bme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var vme=function(e){return e===void 0&&(e={}),{plugins:[oge(),cge(e.observable),hge(),wge(),Ege(),Age(),Sge(),Tge(),Oge(e.defaultUnit),Uge(),wme(),bme()]}},Eme=Number.MIN_SAFE_INTEGER||-1e9,Cme=function(){return Eme++},_me=k.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!eb}),f8=new Map,AL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new a8),r[n];var s=f8.get(n);return s||(s=new a8,f8.set(n,s)),s},p8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=AL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Ame=function(e){if(e.sheet){var n=AL(e.context,e.index);n.unmanage(e.theme)}},Sme=RV(vme()),WV=new WeakMap,zV=function(e){return WV.get(e)},xme=function(e,n){WV.set(e,n)},Ime=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Nme(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",yr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Tme=function(e){if(!e.context.disableStylesGeneration){var n=AL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Sme,i=Ime(e),o=PV(i),a=s.createStyleSheet(i,Nme(e,o!==null));return xme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Rme=function(e,n){for(var r in n)e.deleteRule(n[r])},Pme=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Ome=function(e,n){var r=zV(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},kme=function(e,n){if(!n)return e.classes;var r=zV(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function g8(t){return t?k.useEffect:zo.useInsertionEffect||k.useLayoutEffect}var bP={},Fc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Cme():s,o=r.theming,a=r.name,c=wV(r,["index","theming","name"]),l=o&&o.context||AV,u=function(f){return typeof e=="function"&&(f||k.useContext(l))||bP},d={};return function(f){var p=k.useRef(!0),g=k.useContext(_me),w=u(f&&f.theme),m=k.useMemo(function(){var C=Tme({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&p8({index:i,context:g,sheet:C,theme:w}),[C,C?Ome(C,f):null]},[g,w]),b=m[0],v=m[1];g8(g.isSSR)(function(){b&&v&&!p.current&&Pme(f,b,v)},[f]),g8(g.isSSR)(function(){return b&&p8({index:i,context:g,sheet:b,theme:w}),function(){b&&(Ame({index:i,context:g,sheet:b,theme:w}),v&&Rme(b,v))}},[b]);var A=k.useMemo(function(){return b&&v?kme(b,v):d},[b,v]);return k.useDebugValue(A),k.useDebugValue(w===bP?"No theme":w),k.useEffect(function(){p.current=!1}),A}};const Dme=Fc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function vP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Dme(),d=k.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=y.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[y.jsx("img",{src:t,alt:e,className:u.iconImage}),y.jsx("span",{className:u.iconLabel,children:e})]});return o?f:y.jsx(j_,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const Mme=Fc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function da({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=Mme({isOpen:e}),u=k.useRef(null),d=()=>{r&&r(t)};return y.jsx(j_,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:y.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[y.jsxs("div",{className:l.header,children:[y.jsx("span",{children:i||t.replace("-popup","")}),y.jsxs("div",{className:l.titleBarButtons,children:[y.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),y.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),y.jsx("div",{className:l.content,children:s})]})})}const EP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Lme=80,Ume=80,Bme=10,$me=10,Fme=10,jme=10,Wme=({onIconClick:t})=>{const e=EP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Fme+d*(Lme+Bme),y:jme+u*(Ume+$me)},u++,u>=4&&(u=0,d++)}),l},[r,s]=k.useState(n()),[i,o]=k.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return y.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:y.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>y.jsx(vP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&y.jsx(da,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:EP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>y.jsx(vP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&y.jsx(da,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:EP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>y.jsx(vP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},zme=Fc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Hme=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(new Date),c=zme({isOpen:s});k.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return y.jsxs("div",{className:c.taskbar,children:[y.jsxs("div",{className:c.leftSection,children:[y.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),y.jsx("div",{className:c.windows,children:t.map(h=>y.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),y.jsxs("div",{className:c.rightSection,children:[y.jsxs("div",{className:c.statusSection,children:[y.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:y.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),y.jsx("div",{className:c.clock,children:l(o)})]}),s&&y.jsxs("div",{className:c.menu,children:[y.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),y.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),y.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),y.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),y.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),y.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),y.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function HV(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function SL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function GV(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function xL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function qV(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function VV(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,m,b,v,A,C,T,x,N,S,D,P,$,G,W,I,R,B,O,M,j,V,se,ie,Q;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((m=(w=u.content)==null?void 0:w.metadata)==null?void 0:m.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((N=(x=(T=u.content)==null?void 0:T.files)==null?void 0:x[0])==null?void 0:N.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:(($=(P=u.content)==null?void 0:P.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(O=u.content)==null?void 0:O.files)==null?void 0:M[0])==null?void 0:j.uri)||((se=(V=u.content)==null?void 0:V.metadata)==null?void 0:se.image)||"",animation_url:((Q=(ie=u.content)==null?void 0:ie.metadata)==null?void 0:Q.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function Gme(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,m,b,v,A,C,T,x,N,S,D,P,$,G,W,I,R,B,O,M,j,V,se,ie,Q,te,pe;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((m=(w=u.content)==null?void 0:w.metadata)==null?void 0:m.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((N=(x=(T=u.content)==null?void 0:T.files)==null?void 0:x[0])==null?void 0:N.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:(($=(P=u.content)==null?void 0:P.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(O=u.content)==null?void 0:O.files)==null?void 0:M[0])==null?void 0:j.uri)||((se=(V=u.content)==null?void 0:V.metadata)==null?void 0:se.image)||"",animation_url:((Q=(ie=u.content)==null?void 0:ie.metadata)==null?void 0:Q.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((pe=(te=u.grouping)==null?void 0:te.find(Ze=>Ze.group_key==="collection"))==null?void 0:pe.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const qme=Fc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),Vme=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=qme({isOpen:t}),i=k.useRef(null),[o,a]=k.useState([]),[c,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState({}),[p,g]=k.useState(null),[w,m]=k.useState(null);k.useEffect(()=>{t&&r&&b()},[t,r]);const b=async()=>{l(!0),g(null);try{const x=await HV(r);a(x);const N={};x.forEach(S=>{N[S.id]=0}),f(N)}catch(x){g(x.message)}finally{l(!1)}},v=(x,N)=>{f(S=>({...S,[x]:Math.max(0,N)}))},A=async()=>{const x=Object.entries(h).filter(([,N])=>N>0).map(([N,S])=>({id:N,quantity:S}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const N=await GV(r,x);if(console.log("Mint API result:",N),N.success&&N.mintTransaction){console.log("Got mint transaction:",N.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const S=await w.sendTransaction({to:N.mintTransaction.to,value:BigInt(N.mintTransaction.value),data:N.mintTransaction.data});console.log("Transaction sent successfully:",S),alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){console.error("Transaction sending failed:",S),g("Transaction failed: "+S.message)}}else throw new Error(N.message||"Could not retrieve minting transaction.")}catch(N){console.error("Minting failed:",N),g("Minting failed: "+N.message)}finally{d(!1)}},C=(x,N)=>`${parseFloat(x)} ${N}`,T=()=>{n&&n()};return t?y.jsx(j_,{nodeRef:i,handle:`.${s.header}`,children:y.jsxs("div",{ref:i,className:s.popup,children:[y.jsxs("div",{className:s.header,children:[y.jsx("span",{children:"Mint Pixelawbster"}),y.jsxs("div",{className:s.titleBarButtons,children:[y.jsx("button",{className:s.titleBarButton,onClick:T,title:"Minimize",children:"_"}),y.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),y.jsxs("div",{className:s.content,children:[p&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?y.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?y.jsx("div",{children:"No eligible invite lists found for your wallet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("h3",{children:"Available Lists:"}),o.map(x=>y.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[y.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",C(x.token_price,x.currency_symbol)]}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),y.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:N=>v(x.id,parseInt(N.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),y.jsx("button",{onClick:()=>void A(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},KV=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",YV=({src:t,alt:e,style:n})=>{const[r,s]=k.useState(t),[i,o]=k.useState(!1),[a,c]=k.useState(0);k.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?y.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):y.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},Kme=Fc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),Yme=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},Qme=({nft:t,onClose:e})=>{const n=Kme(),r=k.useRef(null),s=Yme(t.attributes);return y.jsx(j_,{nodeRef:r,handle:`.${n.header}`,children:y.jsxs("div",{className:n.popup,ref:r,children:[y.jsxs("div",{className:n.header,children:[y.jsxs("span",{children:[t.name," - Details"]}),y.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),y.jsxs("div",{className:n.content,children:[y.jsx(YV,{src:KV(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),y.jsx("h3",{children:"Traits"}),y.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>y.jsxs("li",{children:[y.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):y.jsx("li",{children:"No traits found."})})]})]})})},Jme=Symbol(),m8=Object.getPrototypeOf,Yk=new WeakMap,Zme=t=>t&&(Yk.has(t)?Yk.get(t):m8(t)===Object.prototype||m8(t)===Array.prototype),Xme=t=>Zme(t)&&t[Jme]||null,y8=(t,e=!0)=>{Yk.set(t,e)},jx={},CP=t=>typeof t=="object"&&t!==null,Kd=new WeakMap,xv=new WeakSet,eye=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>CP(l)&&!xv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return y8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:w,configurable:!0};if(xv.has(g))y8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Kd.has(g)){const[b,v]=Kd.get(g);m.value=i(b,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!CP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,D=++a[0])=>{d!==D&&(d=D,h.forEach(P=>P(S,D)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,m.forEach(([D])=>{const P=D[1](S);P>d&&(d=P)})),d),w=S=>(D,P)=>{const $=[...D];$[1]=[S,...$[1]],f($,P)},m=new Map,b=(S,D)=>{if((jx?"production":void 0)!=="production"&&m.has(S))throw new Error("prop listener already exists");if(h.size){const P=D[3](w(S));m.set(S,[D,P])}else m.set(S,[D])},v=S=>{var D;const P=m.get(S);P&&(m.delete(S),(D=P[1])==null||D.call(P))},A=S=>(h.add(S),h.size===1&&m.forEach(([P,$],G)=>{if((jx?"production":void 0)!=="production"&&$)throw new Error("remove already exists");const W=P[3](w(G));m.set(G,[P,W])}),()=>{h.delete(S),h.size===0&&m.forEach(([P,$],G)=>{$&&($(),m.set(G,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(S,D){const P=Reflect.get(S,D);v(D);const $=Reflect.deleteProperty(S,D);return $&&f(["delete",[D],P]),$},set(S,D,P,$){const G=Reflect.has(S,D),W=Reflect.get(S,D,$);if(G&&(t(W,P)||o.has(P)&&t(W,o.get(P))))return!0;v(D),CP(P)&&(P=Xme(P)||P);let I=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[D],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[D],R])});else{!Kd.has(P)&&n(P)&&(I=c(P));const R=!xv.has(I)&&Kd.get(I);R&&b(D,R)}return Reflect.set(S,D,I,$),f(["set",[D],P,W]),!0}});o.set(l,x);const N=[C,g,i,A];return Kd.set(x,N),Reflect.ownKeys(l).forEach(S=>{const D=Object.getOwnPropertyDescriptor(l,S);"value"in D&&(x[S]=l[S],delete D.value,delete D.writable),Object.defineProperty(C,S,D)}),x})=>[c,Kd,xv,t,e,n,r,s,i,o,a],[tye]=eye();function or(t={}){return tye(t)}function si(t,e,n){const r=Kd.get(t);(jx?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function sC(t,e){const n=Kd.get(t);(jx?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Sg(t){return xv.add(t),t}function oi(t,e,n,r){let s=t[e];return si(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function nye(t){const e=or({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var w8={};const Be={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof w8<"u"?w8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},QV={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Be.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var rye=20,sye=1,xg=1e6,b8=1e6,iye=-7,oye=21,aye=!1,W_="[big.js] ",tm=W_+"Invalid ",jN=tm+"decimal places",cye=tm+"rounding mode",JV=W_+"Division by zero",On={},kl=void 0,lye=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function ZV(){function t(e){var n=this;if(!(n instanceof t))return e===kl?ZV():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(tm+"value");e=e===0&&1/e<0?"-0":String(e)}uye(n,e)}n.constructor=t}return t.prototype=On,t.DP=rye,t.RM=sye,t.NE=iye,t.PE=oye,t.strict=aye,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function uye(t,e){var n,r,s;if(!lye.test(e))throw Error(tm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function nm(t,e,n,r){var s=t.c;if(n===kl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(cye);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==kl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==kl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function rm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}On.abs=function(){var t=new this.constructor(this);return t.s=1,t};On.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};On.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>xg)throw Error(jN);if(!s[0])throw Error(JV);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,m=t,b=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==kl)&&i--);return!b[0]&&v!=1&&(b.shift(),m.e--,A--),v>A&&nm(m,A,n.RM,g[0]!==kl),m};On.eq=function(t){return this.cmp(t)===0};On.gt=function(t){return this.cmp(t)>0};On.gte=function(t){return this.cmp(t)>-1};On.lt=function(t){return this.cmp(t)<0};On.lte=function(t){return this.cmp(t)<1};On.minus=On.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};On.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(JV);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};On.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};On.plus=On.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};On.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-b8||t>b8)throw Error(tm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};On.prec=function(t,e){if(t!==~~t||t<1||t>xg)throw Error(tm+"precision");return nm(new this.constructor(this),t,e)};On.round=function(t,e){if(t===kl)t=0;else if(t!==~~t||t<-xg||t>xg)throw Error(jN);return nm(new this.constructor(this),t+this.e+1,e)};On.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(W_+"No square root");i=Math.sqrt(+rm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return nm(t,(s.DP-=4)+t.e+1,s.RM)};On.times=On.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};On.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==kl){if(t!==~~t||t<0||t>xg)throw Error(jN);for(n=nm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return rm(n,!0,!!r)};On.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==kl){if(t!==~~t||t<0||t>xg)throw Error(jN);for(n=nm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return rm(n,!1,!!r)};On[Symbol.for("nodejs.util.inspect.custom")]=On.toJSON=On.toString=function(){var t=this,e=t.constructor;return rm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};On.toNumber=function(){var t=+rm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(W_+"Imprecise conversion");return t};On.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==kl){if(t!==~~t||t<1||t>xg)throw Error(tm+"precision");for(n=nm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return rm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};On.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(W_+"valueOf disallowed");return rm(t,t.e<=e.NE||t.e>=e.PE,!0)};var Sl=ZV();const dye={bigNumber(t){return t?new Sl(t):new Sl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Sl(0);const n=new Sl(t),r=new Sl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},hye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],fye=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],pye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],gye={getERC20Abi:t=>Be.USDT_CONTRACT_ADDRESSES.includes(t)?pye:hye,getSwapAbi:()=>fye},xd={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},kt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function _P(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Nt={setItem(t,e){Iv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Iv())return localStorage.getItem(t)||void 0},removeItem(t){Iv()&&localStorage.removeItem(t)},clear(){Iv()&&localStorage.clear()}};function Iv(){return typeof window<"u"&&typeof localStorage<"u"}function Wu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var v8={};const AP=(typeof process<"u"&&typeof v8<"u"?v8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",XV=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],mye="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",$n={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:AP,SECURE_SITE_DASHBOARD:`${AP}/dashboard`,SECURE_SITE_FAVICON:`${AP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ve={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ve.getActiveNamespace(),e=Ve.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Nt.setItem(kt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Nt.getItem(kt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Nt.removeItem(kt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Nt.setItem(kt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Nt.setItem(kt.ACTIVE_CAIP_NETWORK_ID,t),Ve.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Nt.getItem(kt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Nt.removeItem(kt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=_P(t);Nt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ve.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Nt.setItem(kt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Nt.getItem(kt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=_P(t);Nt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Nt.getItem(kt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=_P(t);return Nt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Nt.setItem(kt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Nt.getItem(kt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Nt.removeItem(kt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Nt.getItem(kt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Nt.getItem(kt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Nt.setItem(kt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Nt.getItem(kt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Nt.getItem(kt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Nt.setItem(kt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ve.getConnectedNamespaces();e.includes(t)||(e.push(t),Ve.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ve.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ve.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Nt.getItem(kt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Nt.setItem(kt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Nt.removeItem(kt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Nt.getItem(kt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ve.getBalanceCache();Nt.setItem(kt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ve.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ve.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ve.getBalanceCache();e[t.caipAddress]=t,Nt.setItem(kt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Nt.getItem(kt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ve.getBalanceCache();Nt.setItem(kt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ve.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ve.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ve.getNativeBalanceCache();e[t.caipAddress]=t,Nt.setItem(kt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Nt.getItem(kt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ve.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ve.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ve.getEnsCache();e[t.address]=t,Nt.setItem(kt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ve.getEnsCache();Nt.setItem(kt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Nt.getItem(kt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ve.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ve.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ve.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Nt.setItem(kt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ve.getIdentityCache();Nt.setItem(kt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Nt.removeItem(kt.PORTFOLIO_CACHE),Nt.removeItem(kt.NATIVE_BALANCE_CACHE),Nt.removeItem(kt.ENS_CACHE),Nt.removeItem(kt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Nt.setItem(kt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Nt.getItem(kt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ve.getConnections(),[e]:t};Nt.setItem(kt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Nt.getItem(kt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},it={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return it.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=$n.TEN_SEC_MS:!0},isAllowedRetry(t,e=$n.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(it.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+$n.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(it.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!it.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ve.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,it.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Be.W3M_API_URL},getBlockchainApiUrl(){return Be.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Be.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?$n.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Be.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Qb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let z_=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Qb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Qb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Qb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Qb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Qb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const yye={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?$n.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(it.isTelegram()){if(it.isIos())return t.filter(e=>e!=="google");if(it.isMac())return t.filter(e=>e!=="x");if(it.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},pt=or({features:$n.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:$n.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:pt,subscribeKey(t,e){return oi(pt,t,e)},setOptions(t){Object.assign(pt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...pt.remoteFeatures,...t};pt.remoteFeatures=e,(n=pt.remoteFeatures)!=null&&n.socials&&(pt.remoteFeatures.socials=yye.filterSocialsByPlatform(pt.remoteFeatures.socials))},setFeatures(t){if(!t)return;pt.features||(pt.features=$n.DEFAULT_FEATURES);const e={...pt.features,...t};pt.features=e},setProjectId(t){pt.projectId=t},setCustomRpcUrls(t){pt.customRpcUrls=t},setAllWallets(t){pt.allWallets=t},setIncludeWalletIds(t){pt.includeWalletIds=t},setExcludeWalletIds(t){pt.excludeWalletIds=t},setFeaturedWalletIds(t){pt.featuredWalletIds=t},setTokens(t){pt.tokens=t},setTermsConditionsUrl(t){pt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){pt.privacyPolicyUrl=t},setCustomWallets(t){pt.customWallets=t},setIsSiweEnabled(t){pt.isSiweEnabled=t},setIsUniversalProvider(t){pt.isUniversalProvider=t},setSdkVersion(t){pt.sdkVersion=t},setMetadata(t){pt.metadata=t},setDisableAppend(t){pt.disableAppend=t},setEIP6963Enabled(t){pt.enableEIP6963=t},setDebug(t){pt.debug=t},setEnableWalletConnect(t){pt.enableWalletConnect=t},setEnableWalletGuide(t){pt.enableWalletGuide=t},setEnableAuthLogger(t){pt.enableAuthLogger=t},setEnableWallets(t){pt.enableWallets=t},setPreferUniversalLinks(t){pt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){pt.hasMultipleAddresses=t},setSIWX(t){pt.siwx=t},setConnectMethodsOrder(t){pt.features={...pt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){pt.features={...pt.features,walletFeaturesOrder:t}},setSocialsOrder(t){pt.remoteFeatures={...pt.remoteFeatures,socials:t}},setCollapseWallets(t){pt.features={...pt.features,collapseWallets:t}},setEnableEmbedded(t){pt.enableEmbedded=t},setAllowUnsupportedChain(t){pt.allowUnsupportedChain=t},setManualWCControl(t){pt.manualWCControl=t},setEnableNetworkSwitch(t){pt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(pt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){pt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return pt.universalProviderConfigOverride},getSnapshot(){return sC(pt)}},wye=Object.freeze({enabled:!0,events:[]}),bye=new z_({baseUrl:it.getAnalyticsUrl(),clientId:null}),vye=5,Eye=60*1e3,Id=or({...wye}),Cye={state:Id,subscribeKey(t,e){return oi(Id,t,e)},async sendError(t,e){if(!Id.enabled)return;const n=Date.now();if(Id.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Eye}).length>=vye)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Id.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await bye.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:it.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Id.enabled=!0},disable(){Id.enabled=!1},clearEvents(){Id.events=[]}};let Qk=class Jk extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Jk.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Jk):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function E8(t,e){const n=t instanceof Qk?t:new Qk(t instanceof Error?t.message:String(t),e,t);throw Cye.sendError(n,n.category),n}function Xo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return E8(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return E8(a,e)}},n[r]=i}else n[r]=s}),n}const wl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},_ye={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===wl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${wl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===wl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${wl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Be.CHAIN.SOLANA&&t===wl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${wl.COINBASE.url}/dapp?cb_url=${r}`)}},Eo=or({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Aye={state:Eo,subscribeNetworkImages(t){return si(Eo.networkImages,()=>t(Eo.networkImages))},subscribeKey(t,e){return oi(Eo,t,e)},subscribe(t){return si(Eo,()=>t(Eo))},setWalletImage(t,e){Eo.walletImages[t]=e},setNetworkImage(t,e){Eo.networkImages[t]=e},setChainImage(t,e){Eo.chainImages[t]=e},setConnectorImage(t,e){Eo.connectorImages={...Eo.connectorImages,[t]:e}},setTokenImage(t,e){Eo.tokenImages[t]=e},setCurrencyImage(t,e){Eo.currencyImages[t]=e}},wc=Xo(Aye),Sye={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},SP=or({networkImagePromises:{}}),eK={async fetchWalletImage(t){if(t)return await at._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(SP.networkImagePromises[t]||(SP.networkImagePromises[t]=at._fetchNetworkImage(t)),await SP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return wc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return wc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return wc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return wc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return wc.state.connectorImages[t.imageId]},getChainImage(t){return wc.state.networkImages[Sye[t]]}},Nd=or({message:"",variant:"info",open:!1}),xye={state:Nd,subscribeKey(t,e){return oi(Nd,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(Nd.message=r,Nd.variant=e,Nd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Nd.open=!1,Nd.message="",Nd.variant="info"}},xl=Xo(xye),Iye=it.getAnalyticsUrl(),Nye=new z_({baseUrl:Iye,clientId:null}),Tye=["MODAL_CREATED"],Xl=or({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),ur={state:Xl,subscribe(t){return si(Xl,()=>t(Xl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=qe.state.address;if(Tye.includes(t.data.event)||typeof window>"u")return;await Nye.post({path:"/e",params:ur.getSdkProperties(),body:{eventId:it.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Xl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Be.HTTP_STATUS_CODES.FORBIDDEN&&!Xl.reportedErrors.FORBIDDEN&&(xl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Iv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Xl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Xl.timestamp=Date.now(),Xl.data=t,(e=ve.state.features)!=null&&e.analytics&&ur._sendAnalyticsEvent(Xl)}},Rye=it.getApiUrl(),ki=new z_({baseUrl:Rye,clientId:null}),Pye=40,C8=4,Oye=20,Dt=or({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),at={state:Dt,subscribeKey(t,e){return oi(Dt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${ki.baseUrl}/getWalletImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});wc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${ki.baseUrl}/public/getAssetImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});wc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${ki.baseUrl}/public/getAssetImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});wc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${ki.baseUrl}/public/getCurrencyImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});wc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${ki.baseUrl}/public/getTokenImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});wc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return it.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===wl.COINBASE.id?!0:H.state.activeChain==="solana"&&(n.id===wl.SOLFLARE.id||n.id===wl.PHANTOM.id)):t},async fetchProjectConfig(){return(await ki.get({path:"/appkit/v1/config",params:at._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await ki.get({path:"/projects/v1/origins",params:at._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=H.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!eK.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>at._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ue.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>at._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];at._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(wl).map(o=>o.id));const r=await ki.get({path:"/getWallets",params:{...at._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:at._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...at._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??C8,include:t},{data:n}=await at.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>at._fetchWalletImage(i))),Dt.featured=r,Dt.allFeatured=r}},async fetchRecommendedWallets(){try{Dt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=H.getRequestedCaipNetworkIds().join(","),i={page:1,entries:C8,include:t,exclude:r,chains:s},{data:o,count:a}=await at.fetchWallets(i),c=Ve.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>at._fetchWalletImage(d))),Dt.recommended=o,Dt.allRecommended=o,Dt.count=a??0}catch{}finally{Dt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=H.getRequestedCaipNetworkIds().join(","),i=[...Dt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Pye,include:e,exclude:i,chains:s},{data:a,count:c}=await at.fetchWallets(o),l=a.slice(0,Oye).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>at._fetchWalletImage(u))),Dt.wallets=it.uniqueBy([...Dt.wallets,...at._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Dt.count=c>Dt.count?c:Dt.count,Dt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await at.fetchWallets(e);n&&n.forEach(r=>{Dt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=H.getRequestedCaipNetworkIds().join(",");Dt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await at.fetchWallets(i);ur.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>at._fetchWalletImage(c)),it.wait(300)]),Dt.search=at._filterOutExtensions(o)},initPromise(t,e){const n=Dt.promises[t];return n||(Dt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&at.initPromise("connectorImages",at.fetchConnectorImages),e&&at.initPromise("featuredWallets",at.fetchFeaturedWallets),n&&at.initPromise("recommendedWallets",at.fetchRecommendedWallets),r&&at.initPromise("networkImages",at.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&at.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await ki.get({path:"/getAnalyticsConfig",params:at._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Dt.featured=Dt.allFeatured,Dt.recommended=Dt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Dt.featured=Dt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Dt.recommended=Dt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Dt.filteredWallets=Dt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Dt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Dt.featured=Dt.allFeatured,Dt.recommended=Dt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Dt.featured=Dt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Dt.recommended=Dt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Dt.filteredWallets=Dt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mn=or({view:"Connect",history:["Connect"],transactionStack:[]}),kye={state:Mn,subscribeKey(t,e){return oi(Mn,t,e)},pushTransactionStack(t){Mn.transactionStack.push(t)},popTransactionStack(t){const e=Mn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ft.goBack();break;case"cancel":s==null||s(),Ft.goBack();break}},push(t,e){t!==Mn.view&&(Mn.view=t,Mn.history.push(t),Mn.data=e)},reset(t,e){Mn.view=t,Mn.history=[t],Mn.data=e},replace(t,e){Mn.history.at(-1)===t||(Mn.view=t,Mn.history[Mn.history.length-1]=t,Mn.data=e)},goBack(){var r;const t=H.state.activeCaipAddress,e=Ft.state.view==="ConnectingFarcaster",n=!t&&e;if(Mn.history.length>1){Mn.history.pop();const[s]=Mn.history.slice(-1);s&&(t&&s==="Connect"?Mn.view="Account":Mn.view=s)}else ms.close();(r=Mn.data)!=null&&r.wallet&&(Mn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){qe.setFarcasterUrl(void 0,H.state.activeChain);const a=Ue.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=sC(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mn.history.length>1){Mn.history=Mn.history.slice(0,t+1);const[e]=Mn.history.slice(-1);e&&(Mn.view=e)}},goBackOrCloseModal(){Ft.state.history.length>1?Ft.goBack():ms.close()}},Ft=Xo(kye),eu=or({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Zk={state:eu,subscribe(t){return si(eu,()=>t(eu))},setThemeMode(t){eu.themeMode=t;try{const e=Ue.getAuthConnector();if(e){const n=Zk.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Wu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){eu.themeVariables={...eu.themeVariables,...t};try{const e=Ue.getAuthConnector();if(e){const n=Zk.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Wu(eu.themeVariables,eu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return sC(eu)}},Yi=Xo(Zk),tK={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},dn=or({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...tK},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Dye={state:dn,subscribe(t){return si(dn,()=>{t(dn)})},subscribeKey(t,e){return oi(dn,t,e)},initialize(t){t.forEach(e=>{const n=Ve.getConnectedConnectorId(e);n&&Ue.setConnectorId(n,e)})},setActiveConnector(t){t&&(dn.activeConnector=Sg(t))},setConnectors(t){t.filter(s=>!dn.allConnectors.some(i=>i.id===s.id&&Ue.getConnectorName(i.name)===Ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&dn.allConnectors.push(Sg(s))});const n=Ue.getEnabledNamespaces(),r=Ue.getEnabledConnectors(n);dn.connectors=Ue.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(dn.filterByNamespaceMap).forEach(e=>{dn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{dn.filterByNamespaceMap[e]=!0}),Ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){dn.filterByNamespaceMap[t]=e,Ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ue.getEnabledNamespaces(),e=Ue.getEnabledConnectors(t),n=Ue.areAllNamespacesEnabled();dn.connectors=Ue.mergeMultiChainConnectors(e),n?at.clearFilterByNamespaces():at.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(dn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return dn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(dn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ue.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Be.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ue.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Be.CONNECTOR_ID.AUTH){const s=t,i=sC(ve.state),o=Yi.getSnapshot().themeMode,a=Yi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Wu(a,o)}),Ue.setConnectors([t])}else Ue.setConnectors([t])},getAuthConnector(t){var r;const e=t||H.state.activeChain,n=dn.connectors.find(s=>s.id===Be.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return dn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return dn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return dn.allConnectors.filter(r=>r.chain===H.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=sC(ve.state),r=Yi.getSnapshot().themeMode,s=Yi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Wu(s,r)})},getConnectorsByNamespace(t){const e=dn.allConnectors.filter(n=>n.chain===t);return Ue.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Ue.getConnector(t.id,t.rdns),n=H.state.activeChain;_ye.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ft.push("ConnectingExternal",{connector:e}):Ft.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ue.getConnectorsByNamespace(t):Ue.mergeMultiChainConnectors(dn.allConnectors)},setFilterByNamespace(t){dn.filterByNamespace=t,dn.connectors=Ue.getConnectors(t),at.setFilterByNamespace(t)},setConnectorId(t,e){t&&(dn.activeConnectorIds={...dn.activeConnectorIds,[e]:t},Ve.setConnectedConnectorId(e,t))},removeConnectorId(t){dn.activeConnectorIds={...dn.activeConnectorIds,[t]:void 0},Ve.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return dn.activeConnectorIds[t]},isConnected(t){return t?!!dn.activeConnectorIds[t]:Object.values(dn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){dn.activeConnectorIds={...tK}}},Ue=Xo(Dye);var hw={};const Mye="https://secure.walletconnect.org/sdk",Lye=(typeof process<"u"&&typeof hw<"u"?hw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Mye,Uye=(typeof process<"u"&&typeof hw<"u"?hw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Bye=(typeof process<"u"&&typeof hw<"u"?hw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",He={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ls={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Zf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Wr=or({...Zf}),$ye={state:Wr,subscribeKey(t,e){return oi(Wr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=it.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Wr.message=Zf.message,Wr.variant=Zf.variant,Wr.svg=Zf.svg,Wr.open=Zf.open,Wr.autoClose=Zf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Zf.autoClose}){Wr.open?(Wr.open=!1,setTimeout(()=>{Wr.message=t,Wr.variant=n,Wr.svg=e,Wr.open=!0,Wr.autoClose=r},150)):(Wr.message=t,Wr.variant=n,Wr.svg=e,Wr.open=!0,Wr.autoClose=r)}},Cc=$ye,Vn=or({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Fye={state:Vn,subscribe(t){return si(Vn,()=>t(Vn))},setLastNetworkInView(t){Vn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Vn.loading=!0;try{const s=await yt.fetchTransactions({account:t,cursor:Vn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Nv.filterSpamTransactions(s.data),o=Nv.filterByConnectedChain(i),a=[...Vn.transactions,...o];Vn.loading=!1,e==="coinbase"?Vn.coinbaseTransactions=Nv.groupTransactionsByYearAndMonth(Vn.coinbaseTransactions,s.data):(Vn.transactions=a,Vn.transactionsByYear=Nv.groupTransactionsByYearAndMonth(Vn.transactionsByYear,o)),Vn.empty=a.length===0,Vn.next=s.next?s.next:void 0}catch{const i=H.state.activeChain;ur.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:Vn.next,isSmartAccount:((r=qe.state.preferredAccountTypes)==null?void 0:r[i])===Ls.ACCOUNT_TYPES.SMART_ACCOUNT}}),Cc.showError("Failed to fetch transactions"),Vn.loading=!1,Vn.empty=!0,Vn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Vn.next=void 0},resetTransactions(){Vn.transactions=[],Vn.transactionsByYear={},Vn.lastNetworkInView=void 0,Vn.loading=!1,Vn.empty=!1,Vn.next=void 0}},Nv=Xo(Fye,"API_ERROR"),Wn=or({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let $f;const jye={state:Wn,subscribeKey(t,e){return oi(Wn,t,e)},_getClient(){return Wn._client},setClient(t){Wn._client=Sg(t)},async connectWalletConnect(){var t,e,n,r;if(it.isTelegram()||it.isSafari()&&it.isIos()){if($f){await $f,$f=void 0;return}if(!it.isPairingExpired(Wn==null?void 0:Wn.wcPairingExpiry)){const s=Wn.wcUri;Wn.wcUri=s;return}$f=(e=(t=wt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),wt.state.status="connecting",await $f,$f=void 0,Wn.wcPairingExpiry=void 0,wt.state.status="connected"}else await((r=(n=wt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=wt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&H.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=wt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||H.state.activeChain;e&&Ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;ms.setLoading(!0,H.state.activeChain);const n=Ue.getAuthConnector();n&&(qe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ve.setPreferredAccountTypes(qe.state.preferredAccountTypes??{[e]:t}),await wt.reconnectExternal(n),ms.setLoading(!1,H.state.activeChain),ur.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=wt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=wt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=wt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=wt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=wt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=wt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=wt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=wt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=wt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=wt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=wt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=wt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Wn.wcUri=void 0,Wn.wcPairingExpiry=void 0,Wn.wcLinking=void 0,Wn.recentWallet=void 0,Wn.status="disconnected",Nv.resetTransactions(),Ve.deleteWalletConnectDeepLink()},resetUri(){Wn.wcUri=void 0,Wn.wcPairingExpiry=void 0,$f=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=wt.state;t&&Ve.setWalletConnectDeepLink(t),e&&Ve.setAppKitRecent(e),ur.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ft.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Wn.wcBasic=t},setUri(t){Wn.wcUri=t,Wn.wcPairingExpiry=it.getPairingExpiry()},setWcLinking(t){Wn.wcLinking=t},setWcError(t){Wn.wcError=t,Wn.buffering=!1},setRecentWallet(t){Wn.recentWallet=t},setBuffering(t){Wn.buffering=t},setStatus(t){Wn.status=t},async disconnect(t){var e;try{await((e=wt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new Qk("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Wn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Ue.state.activeConnectorIds[n]===t.connectorId){const i=H.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;qe.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Ue.getConnector(t.connectorId);i?wt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},wt=Xo(jye),Rm=or({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Dl={state:Rm,subscribe(t){return si(Rm,()=>t(Rm))},subscribeOpen(t){return oi(Rm,"open",t)},set(t){Object.assign(Rm,{...Rm,...t})}},Wye="1.0.8";let ea=class Xk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Xk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Xk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Wye}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function md(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const nK=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,rK=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,sK=/^\(.+?\).*?$/,_8=/^tuple(?<array>(\[(\d*)\])*)$/;function eD(t){let e=t.type;if(_8.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=eD(i),s<n-1&&(e+=", ")}const r=md(_8,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,eD({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Jb(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=eD(s),r!==n-1&&(e+=", ")}return e}function Wx(t){var e;return t.type==="function"?`function ${t.name}(${Jb(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Jb(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Jb(t.inputs)})`:t.type==="error"?`error ${t.name}(${Jb(t.inputs)})`:t.type==="constructor"?`constructor(${Jb(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const iK=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function zye(t){return iK.test(t)}function Hye(t){return md(iK,t)}const oK=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Gye(t){return oK.test(t)}function qye(t){return md(oK,t)}const aK=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Vye(t){return aK.test(t)}function Kye(t){return md(aK,t)}const cK=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function IL(t){return cK.test(t)}function Yye(t){return md(cK,t)}const lK=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Qye(t){return lK.test(t)}function Jye(t){return md(lK,t)}const uK=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Zye(t){return uK.test(t)}function Xye(t){return md(uK,t)}const e0e=/^receive\(\) external payable$/;function t0e(t){return e0e.test(t)}const n0e=new Set(["indexed"]),tD=new Set(["calldata","memory","storage"]);class r0e extends ea{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class s0e extends ea{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class i0e extends ea{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class o0e extends ea{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class a0e extends ea{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class c0e extends ea{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class l0e extends ea{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class u0e extends ea{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class nb extends ea{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class d0e extends ea{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class h0e extends ea{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class f0e extends ea{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class p0e extends ea{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function g0e(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const xP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function nD(t,e={}){if(Vye(t))return m0e(t,e);if(Gye(t))return y0e(t,e);if(zye(t))return w0e(t,e);if(Qye(t))return b0e(t,e);if(Zye(t))return v0e(t);if(t0e(t))return{type:"receive",stateMutability:"payable"};throw new d0e({signature:t})}function m0e(t,e={}){const n=Kye(t);if(!n)throw new nb({signature:t,type:"function"});const r=_c(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Ig(r[a],{modifiers:tD,structs:e,type:"function"}));const o=[];if(n.returns){const a=_c(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Ig(a[l],{modifiers:tD,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function y0e(t,e={}){const n=qye(t);if(!n)throw new nb({signature:t,type:"event"});const r=_c(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ig(r[o],{modifiers:n0e,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function w0e(t,e={}){const n=Hye(t);if(!n)throw new nb({signature:t,type:"error"});const r=_c(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ig(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function b0e(t,e={}){const n=Jye(t);if(!n)throw new nb({signature:t,type:"constructor"});const r=_c(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ig(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function v0e(t){const e=Xye(t);if(!e)throw new nb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const E0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,C0e=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,_0e=/^u?int$/;function Ig(t,e){var d,h;const n=g0e(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(xP.has(n))return xP.get(n);const r=sK.test(t),s=md(r?C0e:E0e,t);if(!s)throw new o0e({param:t});if(s.name&&S0e(s.name))throw new a0e({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=_c(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Ig(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(_0e.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!dK(c))throw new i0e({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new c0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(tD.has(s.modifier)&&!x0e(c,!!s.array))throw new l0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return xP.set(n,u),u}function _c(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?_c(a,[...e,n.trim()]):_c(a,e,`${n}${o}`,r);case"(":return _c(a,e,`${n}${o}`,r+1);case")":return _c(a,e,`${n}${o}`,r-1);default:return _c(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new p0e({current:n,depth:r});return e.push(n.trim()),e}function dK(t){return t==="address"||t==="bool"||t==="function"||t==="string"||nK.test(t)||rK.test(t)}const A0e=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function S0e(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||nK.test(t)||rK.test(t)||A0e.test(t)}function x0e(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function hK(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!IL(a))continue;const c=Yye(a);if(!c)throw new nb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Ig(p,{type:"struct"});u.push(g)}if(!u.length)throw new h0e({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=fK(c,e)}return r}const I0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function fK(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(sK.test(o.type))r.push(o);else{const c=md(I0e,o.type);if(!(c!=null&&c.type))throw new u0e({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new f0e({type:u});r.push({...o,type:`tuple${l??""}`,components:fK(e[u]??[],e,new Set([...n,u]))})}else if(dK(u))r.push(o);else throw new s0e({type:u})}}return r}function pK(t){const e=hK(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];IL(i)||n.push(nD(i,e))}return n}function A8(t){let e;if(typeof t=="string")e=nD(t);else{const n=hK(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!IL(i)){e=nD(i,n);break}}}if(!e)throw new r0e({signature:t});return e}function ut(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Mc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new F0e(t.type);return`${t.name}(${WN(t.inputs,{includeName:e})})`}function WN(t,{includeName:e=!1}={}){return t?t.map(n=>N0e(n,{includeName:e})).join(e?", ":","):""}function N0e(t,{includeName:e}){return t.type.startsWith("tuple")?`(${WN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Fl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function xr(t){return Fl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const gK="2.32.0";let Zb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${gK}`},ge=class rD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof rD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof rD&&n.cause.docsPath||n.docsPath,i=(a=Zb.getDocsUrl)==null?void 0:a.call(Zb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Zb.version?[`Version: ${Zb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=gK}walk(e){return mK(this,e)}};function mK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?mK(t.cause,e):e?null:t}class T0e extends ge{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class S8 extends ge{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class yK extends ge{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${WN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class H_ extends ge{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class R0e extends ge{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class P0e extends ge{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${xr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class O0e extends ge{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class k0e extends ge{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class x8 extends ge{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class wK extends ge{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class D0e extends ge{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class bK extends ge{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class I8 extends ge{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class fw extends ge{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class vK extends ge{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class M0e extends ge{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class L0e extends ge{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Mc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Mc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let U0e=class extends ge{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class iC extends ge{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${WN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class zN extends ge{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Mc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class B0e extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class $0e extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let EK=class extends ge{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class F0e extends ge{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class j0e extends ge{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let CK=class extends ge{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},_K=class extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class N8 extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function rb(t,{dir:e,size:n=32}={}){return typeof t=="string"?Zh(t,{dir:e,size:n}):W0e(t,{dir:e,size:n})}function Zh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new _K({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function W0e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new _K({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let AK=class extends ge{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class z0e extends ge{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class H0e extends ge{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let G0e=class extends ge{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Ml(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function $a(t,{size:e}){if(xr(t)>e)throw new G0e({givenSize:xr(t),maxSize:e})}function Ko(t,e={}){const{signed:n}=e;e.size&&$a(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function q0e(t,e={}){let n=t;if(e.size&&($a(n,{size:e.size}),n=Ml(n)),Ml(n)==="0x00")return!1;if(Ml(n)==="0x01")return!0;throw new H0e(n)}function Lc(t,e={}){return Number(Ko(t,e))}function SK(t,e={}){let n=Ma(t);return e.size&&($a(n,{size:e.size}),n=Ml(n,{dir:"right"})),new TextDecoder().decode(n)}const V0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Da(t,e={}){return typeof t=="number"||typeof t=="bigint"?tt(t,e):typeof t=="string"?pw(t,e):typeof t=="boolean"?xK(t,e):ts(t,e)}function xK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?($a(n,{size:e.size}),rb(n,{size:e.size})):n}function ts(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=V0e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?($a(r,{size:e.size}),rb(r,{dir:"right",size:e.size})):r}function tt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new AK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?rb(a,{size:r}):a}const K0e=new TextEncoder;function pw(t,e={}){const n=K0e.encode(t);return ts(n,e)}const Y0e=new TextEncoder;function sb(t,e={}){return typeof t=="number"||typeof t=="bigint"?J0e(t,e):typeof t=="boolean"?Q0e(t,e):Fl(t)?Ma(t,e):lg(t,e)}function Q0e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?($a(n,{size:e.size}),rb(n,{size:e.size})):n}const tu={zero:48,nine:57,A:65,F:70,a:97,f:102};function T8(t){if(t>=tu.zero&&t<=tu.nine)return t-tu.zero;if(t>=tu.A&&t<=tu.F)return t-(tu.A-10);if(t>=tu.a&&t<=tu.f)return t-(tu.a-10)}function Ma(t,e={}){let n=t;e.size&&($a(n,{size:e.size}),n=rb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=T8(r.charCodeAt(a++)),l=T8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ge(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function J0e(t,e){const n=tt(t,e);return Ma(n)}function lg(t,e={}){const n=Y0e.encode(t);return typeof e.size=="number"?($a(n,{size:e.size}),rb(n,{dir:"right",size:e.size})):n}const hA=BigInt(2**32-1),R8=BigInt(32);function Z0e(t,e=!1){return e?{h:Number(t&hA),l:Number(t>>R8&hA)}:{h:Number(t>>R8&hA)|0,l:Number(t&hA)|0}}function X0e(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Z0e(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const ewe=(t,e,n)=>t<<n|e>>>32-n,twe=(t,e,n)=>e<<n|t>>>32-n,nwe=(t,e,n)=>e<<n-32|t>>>64-n,rwe=(t,e,n)=>t<<n-32|e>>>64-n,Pm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function NL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function oC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Uc(t,...e){if(!NL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function swe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");oC(t.outputLen),oC(t.blockLen)}function gw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function IK(t,e){Uc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function iwe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function IP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Gc(t,e){return t<<32-e|t>>>e}const owe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function awe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function cwe(t){for(let e=0;e<t.length;e++)t[e]=awe(t[e]);return t}const P8=owe?t=>t:cwe,NK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",lwe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aC(t){if(Uc(t),NK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=lwe[t[n]];return e}const nu={_0:48,_9:57,A:65,F:70,a:97,f:102};function O8(t){if(t>=nu._0&&t<=nu._9)return t-nu._0;if(t>=nu.A&&t<=nu.F)return t-(nu.A-10);if(t>=nu.a&&t<=nu.f)return t-(nu.a-10)}function TL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(NK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=O8(t.charCodeAt(i)),a=O8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function uwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function G_(t){return typeof t=="string"&&(t=uwe(t)),Uc(t),t}function vp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Uc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let RL=class{};function TK(t){const e=r=>t().update(G_(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function dwe(t){const e=(r,s)=>t(s).update(G_(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function hwe(t=32){if(Pm&&typeof Pm.getRandomValues=="function")return Pm.getRandomValues(new Uint8Array(t));if(Pm&&typeof Pm.randomBytes=="function")return Uint8Array.from(Pm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const fwe=BigInt(0),Xb=BigInt(1),pwe=BigInt(2),gwe=BigInt(7),mwe=BigInt(256),ywe=BigInt(113),RK=[],PK=[],OK=[];for(let t=0,e=Xb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],RK.push(2*(5*r+n)),PK.push((t+1)*(t+2)/2%64);let s=fwe;for(let i=0;i<7;i++)e=(e<<Xb^(e>>gwe)*ywe)%mwe,e&pwe&&(s^=Xb<<(Xb<<BigInt(i))-Xb);OK.push(s)}const kK=X0e(OK,!0),wwe=kK[0],bwe=kK[1],k8=(t,e,n)=>n>32?nwe(t,e,n):ewe(t,e,n),D8=(t,e,n)=>n>32?rwe(t,e,n):twe(t,e,n);function DK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=k8(l,u,1)^n[a],h=D8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=PK[o],c=k8(s,i,a),l=D8(s,i,a),u=RK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=wwe[r],t[1]^=bwe[r]}mw(n)}let PL=class MK extends RL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,oC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=iwe(this.state)}clone(){return this._cloneInto()}keccak(){P8(this.state32),DK(this.state32,this.rounds),P8(this.state32),this.posOut=0,this.pos=0}update(e){gw(this),e=G_(e),Uc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){gw(this,!1),Uc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return oC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(IK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,mw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new MK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Tf=(t,e,n)=>TK(()=>new PL(e,t,n)),vwe=Tf(6,144,224/8),Ewe=Tf(6,136,256/8),Cwe=Tf(6,104,384/8),_we=Tf(6,72,512/8),Awe=Tf(1,144,224/8),OL=Tf(1,136,256/8),Swe=Tf(1,104,384/8),xwe=Tf(1,72,512/8),LK=(t,e,n)=>dwe((r={})=>new PL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),Iwe=LK(31,168,128/8),Nwe=LK(31,136,256/8),Hqe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:PL,keccakP:DK,keccak_224:Awe,keccak_256:OL,keccak_384:Swe,keccak_512:xwe,sha3_224:vwe,sha3_256:Ewe,sha3_384:Cwe,sha3_512:_we,shake128:Iwe,shake256:Nwe},Symbol.toStringTag,{value:"Module"}));function Ds(t,e){const n=e||"hex",r=OL(Fl(t,{strict:!1})?sb(t):t);return n==="bytes"?r:Da(r)}const Twe=t=>Ds(sb(t));function Rwe(t){return Twe(t)}function Pwe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ge("Unable to normalize signature.");return s}const Owe=t=>{const e=typeof t=="string"?t:Wx(t);return Pwe(e)};function UK(t){return Rwe(Owe(t))}const HN=UK;let mf=class extends ge{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},GN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const NP=new GN(8192);function q_(t,e){if(NP.has(`${t}.${e}`))return NP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ds(lg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return NP.set(`${t}.${e}`,i),i}function zu(t,e){if(!La(t,{strict:!1}))throw new mf({address:t});return q_(t,e)}const kwe=/^0x[a-fA-F0-9]{40}$/,TP=new GN(8192);function La(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(TP.has(r))return TP.get(r);const s=kwe.test(t)?t.toLowerCase()===t?!0:n?q_(t)===t:!0:!1;return TP.set(r,s),s}function Ua(t){return typeof t[0]=="string"?ib(t):Dwe(t)}function Dwe(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function ib(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function yw(t,e,n,{strict:r}={}){return Fl(t,{strict:!1})?zx(t,e,n,{strict:r}):FK(t,e,n,{strict:r})}function BK(t,e){if(typeof e=="number"&&e>0&&e>xr(t)-1)throw new CK({offset:e,position:"start",size:xr(t)})}function $K(t,e,n){if(typeof e=="number"&&typeof n=="number"&&xr(t)!==n-e)throw new CK({offset:n,position:"end",size:xr(t)})}function FK(t,e,n,{strict:r}={}){BK(t,e);const s=t.slice(e,n);return r&&$K(s,e,n),s}function zx(t,e,n,{strict:r}={}){BK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&$K(s,e,n),s}const Mwe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,jK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Rf(t,e){if(t.length!==e.length)throw new O0e({expectedLength:t.length,givenLength:e.length});const n=Lwe({params:t,values:e}),r=DL(n);return r.length===0?"0x":r}function Lwe({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(kL({param:t[r],value:e[r]}));return n}function kL({param:t,value:e}){const n=ML(t.type);if(n){const[r,s]=n;return Bwe(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return zwe(e,{param:t});if(t.type==="address")return Uwe(e);if(t.type==="bool")return Fwe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=jK.exec(t.type)??[];return jwe(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return $we(e,{param:t});if(t.type==="string")return Wwe(e);throw new B0e(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function DL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=xr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(tt(e+s,{size:32})),r.push(a),s+=xr(a)):n.push(a)}return Ua([...n,...r])}function Uwe(t){if(!La(t))throw new mf({address:t});return{dynamic:!1,encoded:Zh(t.toLowerCase())}}function Bwe(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new EK(t);if(!r&&t.length!==e)throw new R0e({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=kL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=DL(i);if(r){const a=tt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ua([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ua(i.map(({encoded:o})=>o))}}function $we(t,{param:e}){const[,n]=e.type.split("bytes"),r=xr(t);if(!n){let s=t;return r%32!==0&&(s=Zh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ua([Zh(tt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new P0e({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Zh(t,{dir:"right"})}}function Fwe(t){if(typeof t!="boolean")throw new ge(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Zh(xK(t))}}function jwe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new AK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:tt(t,{size:32,signed:e})}}function Wwe(t){const e=pw(t),n=Math.ceil(xr(e)/32),r=[];for(let s=0;s<n;s++)r.push(Zh(yw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ua([Zh(tt(xr(e),{size:32})),...r])}}function zwe(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=kL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?DL(r):Ua(r.map(({encoded:s})=>s))}}function ML(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const V_=t=>yw(UK(t),0,4);function sm(t){const{abi:e,args:n=[],name:r}=t,s=Fl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?V_(a)===r:a.type==="event"?HN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?sD(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=WK(a.inputs,o.inputs,n);if(l)throw new L0e({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function sD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return La(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>sD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>sD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function WK(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return WK(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?La(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?La(n[r],{strict:!1}):!1)return o}}const M8="/docs/contract/encodeEventTopics";function K_(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=sm({abi:e,name:n});if(!l)throw new I8(n,{docsPath:M8});s=l}if(s.type!=="event")throw new I8(void 0,{docsPath:M8});const i=Mc(s),o=HN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>L8({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?L8({param:d,value:u[h]}):null))??[])}return[o,...a]}function L8({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ds(sb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new j0e(t.type);return Rf([t],[e])}function qN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function zK(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=qN(t,{method:"eth_newFilter"}),u=i?K_({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?tt(o):o,toBlock:typeof c=="bigint"?tt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}function Nr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const U8="/docs/contract/encodeFunctionData";function Hwe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=sm({abi:e,args:n,name:r});if(!i)throw new fw(r,{docsPath:U8});s=i}if(s.type!=="function")throw new fw(void 0,{docsPath:U8});return{abi:[s],functionName:V_(Mc(s))}}function Fa(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Hwe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Rf(s.inputs,e??[]):void 0;return ib([i,o??"0x"])}const HK={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},GK={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Gwe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class B8 extends ge{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class qK extends ge{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class qwe extends ge{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Vwe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new qwe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new qK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new B8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new B8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function LL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Vwe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Kwe(t,e={}){typeof e.size<"u"&&$a(t,{size:e.size});const n=ts(t,e);return Ko(n,e)}function Ywe(t,e={}){let n=t;if(typeof e.size<"u"&&($a(n,{size:e.size}),n=Ml(n)),n.length>1||n[0]>1)throw new z0e(n);return!!n[0]}function Vu(t,e={}){typeof e.size<"u"&&$a(t,{size:e.size});const n=ts(t,e);return Lc(n,e)}function Qwe(t,e={}){let n=t;return typeof e.size<"u"&&($a(n,{size:e.size}),n=Ml(n,{dir:"right"})),new TextDecoder().decode(n)}function Y_(t,e){const n=typeof e=="string"?Ma(e):e,r=LL(n);if(xr(n)===0&&t.length>0)throw new H_;if(xr(e)&&xr(e)<32)throw new yK({data:typeof e=="string"?e:ts(e),params:t,size:xr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Hy(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Hy(t,e,{staticPosition:n}){const r=ML(e.type);if(r){const[s,i]=r;return Zwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return nbe(t,e,{staticPosition:n});if(e.type==="address")return Jwe(t);if(e.type==="bool")return Xwe(t);if(e.type.startsWith("bytes"))return ebe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return tbe(t,e);if(e.type==="string")return rbe(t,{staticPosition:n});throw new $0e(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const $8=32,iD=32;function Jwe(t){const e=t.readBytes(32);return[q_(ts(FK(e,-20))),32]}function Zwe(t,e,{length:n,staticPosition:r}){if(!n){const o=Vu(t.readBytes(iD)),a=r+o,c=a+$8;t.setPosition(a);const l=Vu(t.readBytes($8)),u=cC(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Hy(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(cC(e)){const o=Vu(t.readBytes(iD)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Hy(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Hy(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Xwe(t){return[Ywe(t.readBytes(32),{size:32}),32]}function ebe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Vu(t.readBytes(32));t.setPosition(n+o);const a=Vu(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[ts(c),32]}return[ts(t.readBytes(Number.parseInt(s),32)),32]}function tbe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Kwe(s,{signed:n}):Vu(s,{signed:n}),32]}function nbe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(cC(e)){const o=Vu(t.readBytes(iD)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Hy(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Hy(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function rbe(t,{staticPosition:e}){const n=Vu(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Vu(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Qwe(Ml(i));return t.setPosition(e+32),[o,32]}function cC(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(cC);const n=ML(t.type);return!!(n&&cC({...t,type:n[1]}))}function sbe(t){const{abi:e,data:n}=t,r=yw(n,0,4);if(r==="0x")throw new H_;const i=[...e||[],GK,Gwe].find(o=>o.type==="error"&&r===V_(Mc(o)));if(!i)throw new wK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Y_(i.inputs,yw(n,4)):void 0,errorName:i.name}}const Xr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function VK({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Xr(e[i]):e[i]}`).join(", ")})`}const ibe={gwei:9,wei:18},obe={ether:-9,wei:9},abe={ether:-18,gwei:-9};function im(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function UL(t,e="wei"){return im(t,ibe[e])}function lo(t,e="wei"){return im(t,obe[e])}class cbe extends ge{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class lbe extends ge{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function F8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function ube(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=F8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=F8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Q_(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class dbe extends ge{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class hbe extends ge{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Q_(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class fbe extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Q_({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${UL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lo(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lo(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lo(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class KK extends ge{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class YK extends ge{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class pbe extends ge{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const gbe=t=>t,BL=t=>t;class QK extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Nr(n):void 0;let g=Q_({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${UL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lo(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lo(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lo(l)} gwei`,nonce:u});f&&(g+=`
${ube(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class JK extends ge{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=sm({abi:n,args:r,name:o}),l=c?VK({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Mc(c,{includeName:!0}):void 0,d=Q_({address:s&&gbe(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class oD extends ge{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=sbe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=HK[f]}else{const f=u?Mc(u,{includeName:!0}):void 0,p=u&&h?VK({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof wK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class mbe extends ge{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class ybe extends ge{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class VN extends ge{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class cE extends ge{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${BL(o)}`,e&&`Request body: ${Xr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class $L extends ge{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${BL(r)}`,`Request body: ${Xr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class j8 extends ge{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${BL(n)}`,`Request body: ${Xr(e)}`],name:"TimeoutError"})}}const wbe=-1;class mo extends ge{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof $L?e.code:n??wbe}}class ta extends mo{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class lC extends mo{constructor(e){super(e,{code:lC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(lC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class uC extends mo{constructor(e){super(e,{code:uC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(uC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class dC extends mo{constructor(e,{method:n}={}){super(e,{code:dC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(dC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class hC extends mo{constructor(e){super(e,{code:hC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(hC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ng extends mo{constructor(e){super(e,{code:Ng.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ng,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Tg extends mo{constructor(e){super(e,{code:Tg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Tg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class fC extends mo{constructor(e){super(e,{code:fC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(fC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Xh extends mo{constructor(e){super(e,{code:Xh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ww extends mo{constructor(e){super(e,{code:ww.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ep extends mo{constructor(e,{method:n}={}){super(e,{code:Ep.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class bw extends mo{constructor(e){super(e,{code:bw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(bw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class pC extends mo{constructor(e){super(e,{code:pC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(pC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Gr extends ta{constructor(e){super(e,{code:Gr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class gC extends ta{constructor(e){super(e,{code:gC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(gC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class mC extends ta{constructor(e,{method:n}={}){super(e,{code:mC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(mC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class yC extends ta{constructor(e){super(e,{code:yC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(yC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class wC extends ta{constructor(e){super(e,{code:wC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(wC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class jl extends ta{constructor(e){super(e,{code:jl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(jl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class vw extends ta{constructor(e){super(e,{code:vw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class bC extends ta{constructor(e){super(e,{code:bC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(bC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class vC extends ta{constructor(e){super(e,{code:vC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(vC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class EC extends ta{constructor(e){super(e,{code:EC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(EC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class CC extends ta{constructor(e){super(e,{code:CC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(CC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class _C extends ta{constructor(e){super(e,{code:_C.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(_C,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Ew extends ta{constructor(e){super(e,{code:Ew.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Ew,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class bbe extends mo{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const vbe=3;function Rg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof VN?t:t instanceof ge?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof H_?new mbe({functionName:i}):[vbe,Ng.code].includes(c)&&(l||u||d||h)?new oD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof $L?u:h??d}):t;return new JK(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function Ebe(t){const e=Ds(`0x${t.substring(4)}`).substring(26);return q_(`0x${e}`)}const Cbe="modulepreload",_be=function(t){return"/"+t},W8={},Xs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=_be(c),c in W8)return;W8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Cbe,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Abe({hash:t,signature:e}){const n=Fl(t)?t:Da(t),{secp256k1:r}=await Xs(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>u_e);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=z8(f);return new r.Signature(Ko(l),Ko(u)).addRecoveryBit(p)}const o=Fl(e)?e:Da(e);if(xr(o)!==65)throw new Error("invalid signature length");const a=Lc(`0x${o.slice(130)}`),c=z8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function z8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function ZK({hash:t,signature:e}){return Ebe(await Abe({hash:t,signature:e}))}function Sbe(t,e="hex"){const n=XK(t),r=LL(new Uint8Array(n.length));return n.encode(r),e==="hex"?ts(r.bytes):r.bytes}function XK(t){return Array.isArray(t)?xbe(t.map(e=>XK(e))):Ibe(t)}function xbe(t){const e=t.reduce((s,i)=>s+i.length,0),n=eY(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Ibe(t){const e=typeof t=="string"?Ma(t):t,n=eY(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function eY(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ge("Length is too large.")}function Nbe(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ds(ib(["0x05",Sbe([e?tt(e):"0x",s,n?tt(n):"0x"])]));return r==="bytes"?Ma(i):i}async function tY(t){const{authorization:e,signature:n}=t;return ZK({hash:Nbe(e),signature:n??e})}class Tbe extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Q_({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${UL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lo(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lo(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lo(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Cp extends ge{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Cp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Cp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Hx extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${lo(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Hx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class aD extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${lo(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(aD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class cD extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(cD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class lD extends ge{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(lD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class uD extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(uD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class dD extends ge{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(dD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class hD extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(hD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class fD extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class pD extends ge{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(pD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Gx extends ge{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${lo(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${lo(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Gx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class J_ extends ge{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function KN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ge?t.walk(s=>(s==null?void 0:s.code)===Cp.code):t;return r instanceof ge?new Cp({cause:t,message:r.details}):Cp.nodeMessage.test(n)?new Cp({cause:t,message:t.details}):Hx.nodeMessage.test(n)?new Hx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):aD.nodeMessage.test(n)?new aD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):cD.nodeMessage.test(n)?new cD({cause:t,nonce:e==null?void 0:e.nonce}):lD.nodeMessage.test(n)?new lD({cause:t,nonce:e==null?void 0:e.nonce}):uD.nodeMessage.test(n)?new uD({cause:t,nonce:e==null?void 0:e.nonce}):dD.nodeMessage.test(n)?new dD({cause:t}):hD.nodeMessage.test(n)?new hD({cause:t,gas:e==null?void 0:e.gas}):fD.nodeMessage.test(n)?new fD({cause:t,gas:e==null?void 0:e.gas}):pD.nodeMessage.test(n)?new pD({cause:t}):Gx.nodeMessage.test(n)?new Gx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new J_({cause:t})}function Rbe(t,{docsPath:e,...n}){const r=(()=>{const s=KN(t,n);return s instanceof J_?t:s})();return new Tbe(r,{docsPath:e,...n})}function YN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Pbe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function ob(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Obe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>ts(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=tt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=tt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=tt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=tt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=tt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=tt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Pbe[t.type]),typeof t.value<"u"&&(e.value=tt(t.value)),e}function Obe(t){return t.map(e=>({address:e.address,r:e.r?tt(BigInt(e.r)):e.r,s:e.s?tt(BigInt(e.s)):e.s,chainId:tt(e.chainId),nonce:tt(e.nonce),...typeof e.yParity<"u"?{yParity:tt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:tt(e.v)}:{}}))}function H8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new N8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new N8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function kbe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=tt(e)),n!==void 0&&(o.nonce=tt(n)),r!==void 0&&(o.state=H8(r)),s!==void 0){if(o.state)throw new lbe;o.stateDiff=H8(s)}return o}function FL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!La(n,{strict:!1}))throw new mf({address:n});if(e[n])throw new cbe({address:n});e[n]=kbe(r)}return e}const Dbe=2n**256n-1n;function om(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Nr(e):void 0;if(o&&!La(o.address))throw new mf({address:o.address});if(i&&!La(i))throw new mf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new dbe;if(r&&r>Dbe)throw new Hx({maxFeePerGas:r});if(s&&r&&s>r)throw new Gx({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Mbe extends ge{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class jL extends ge{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Lbe extends ge{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${lo(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class nY extends ge{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const rY={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function sY(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Lc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Lc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?rY[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Ube(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Ube(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function iY(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:sY(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Tl(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?tt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new nY({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||iY)(c)}async function WL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Bbe(t,e){return oY(t,e)}async function oY(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ut(t,Tl,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ko(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ut(t,Tl,"getBlock")({}),ut(t,WL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new jL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function $be(t,e){return gD(t,e)}async function gD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Mbe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ut(t,Tl,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new jL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await oY(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ut(t,WL,"getGasPrice")({}))}}async function zL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?tt(r):n]},{dedupe:!!r});return Lc(s)}function aY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ma(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>ts(i))}function cY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ma(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ma(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>ts(o))}function Fbe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function jbe(t,e,n){return t&e^~t&n}function Wbe(t,e,n){return t&e^t&n^e&n}class zbe extends RL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=IP(this.buffer)}update(e){gw(this),e=G_(e),Uc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=IP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gw(this),IK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,mw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Fbe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=IP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Td=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hbe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rd=new Uint32Array(64);let Gbe=class extends zbe{constructor(e=32){super(64,e,8,!1),this.A=Td[0]|0,this.B=Td[1]|0,this.C=Td[2]|0,this.D=Td[3]|0,this.E=Td[4]|0,this.F=Td[5]|0,this.G=Td[6]|0,this.H=Td[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Rd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Rd[d-15],f=Rd[d-2],p=Gc(h,7)^Gc(h,18)^h>>>3,g=Gc(f,17)^Gc(f,19)^f>>>10;Rd[d]=g+Rd[d-7]+p+Rd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Gc(a,6)^Gc(a,11)^Gc(a,25),f=u+h+jbe(a,c,l)+Hbe[d]+Rd[d]|0,g=(Gc(r,2)^Gc(r,13)^Gc(r,22))+Wbe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){mw(Rd)}destroy(){this.set(0,0,0,0,0,0,0,0),mw(this.buffer)}};const lY=TK(()=>new Gbe),qbe=lY;function Vbe(t,e){return qbe(Fl(t,{strict:!1})?sb(t):t)}function Kbe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Vbe(e);return s.set([n],0),r==="bytes"?s:ts(s)}function Ybe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Kbe({commitment:i,to:r,version:n}));return s}const G8=6,uY=32,HL=4096,dY=uY*HL,q8=dY*G8-1-1*HL*G8;class Qbe extends ge{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Jbe extends ge{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Zbe(t){const e=typeof t.data=="string"?Ma(t.data):t.data,n=xr(e);if(!n)throw new Jbe;if(n>q8)throw new Qbe({maxSize:q8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=LL(new Uint8Array(dY));let a=0;for(;a<HL;){const c=e.slice(i,i+(uY-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>ts(o.bytes))}function Xbe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Zbe({data:e}),i=t.commitments??aY({blobs:s,kzg:n,to:r}),o=t.proofs??cY({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function eve(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new hbe({transaction:t})}async function ab(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Lc(e)}const hY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],V8=new Map;async function Z_(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=hY,type:u}=e,d=n&&Nr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ut(t,Tl,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ut(t,ab,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await w();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await ut(t,zL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=aY({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Ybe({commitments:m,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=cY({blobs:r,commitments:m,kzg:o}),v=Xbe({blobs:r,commitments:m,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=eve(h)}catch{let m=V8.get(t.uid);if(typeof m>"u"){const b=await p();m=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",V8.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await gD(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new Lbe({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new jL;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:b}=await gD(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ut(t,QN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),om(h),delete h.parameters,h}async function GL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?tt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function QN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Nr(n):void 0;try{let W=function(R){const{block:B,request:O,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[O,B??"latest",M]:B?[O,B]:[O]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:C,...T}=await Z_(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?tt(d):void 0)||h,S=FL(C),D=await(async()=>{if(T.to)return T.to;if(c&&c.length>0)return await tY({authorization:c[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`")})})();om(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(P||ob)({...YN(T,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:D,value:A});let I=BigInt(await W({block:N,request:G,rpcStateOverride:S}));if(c){const R=await GL(t,{address:G.from}),B=await Promise.all(c.map(async O=>{const{address:M}=O,j=await W({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:tt(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));I+=B.reduce((O,M)=>O+M,0n)}return I}catch(a){throw Rbe(a,{...e,account:r,chain:t.chain})}}async function tve(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Fa({abi:n,args:s,functionName:i});try{return await ut(t,QN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Nr(a.account):void 0;throw Rg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}function JN(t,e){if(!La(t,{strict:!1}))throw new mf({address:t});if(!La(e,{strict:!1}))throw new mf({address:e});return t.toLowerCase()===e.toLowerCase()}const K8="/docs/contract/decodeEventLog";function qL(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new D0e({docsPath:K8});const c=e.find(g=>g.type==="event"&&o===HN(Mc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new bK(o,{docsPath:K8});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,m]=f[g],b=a[g];if(!b)throw new zN({abiItem:c,param:w});h[d?m:w.name||m]=nve({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=Y_(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof yK||g instanceof qK?new iC({abiItem:c,data:n,params:p,size:xr(n)}):g}else if(i)throw new iC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function nve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Y_([t],e)||[])[0]}function VL(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===HN(u));if(!c)return null;const l=qL({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!rve({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof bK)return null;if(c instanceof iC||c instanceof zN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function rve(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?JN(o,a):i.type==="string"||i.type==="bytes"?Ds(sb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function ad(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function KL(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>K_({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?tt(r):r,toBlock:typeof s=="bigint"?tt(s):s}]});const f=h.map(p=>ad(p));return u?VL({abi:u,args:a,logs:f,strict:l}):f}async function fY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?sm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ut(t,KL,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}const RP="/docs/contract/decodeFunctionResult";function am(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=sm({abi:e,args:n,name:r});if(!a)throw new fw(r,{docsPath:RP});i=a}if(i.type!=="function")throw new fw(void 0,{docsPath:RP});if(!i.outputs)throw new vK(i.name,{docsPath:RP});const o=Y_(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YL=BigInt(0),mD=BigInt(1);function qx(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function fA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function pY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?YL:BigInt("0x"+t)}function ZN(t){return pY(aC(t))}function gY(t){return Uc(t),pY(aC(Uint8Array.from(t).reverse()))}function QL(t,e){return TL(t.toString(16).padStart(e*2,"0"))}function mY(t,e){return QL(t,e).reverse()}function ga(t,e,n){let r;if(typeof e=="string")try{r=TL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(NL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const PP=t=>typeof t=="bigint"&&YL<=t;function sve(t,e,n){return PP(t)&&PP(e)&&PP(n)&&e<=t&&t<n}function ive(t,e,n,r){if(!sve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ove(t){let e;for(e=0;t>YL;t>>=mD,e+=1);return e}const XN=t=>(mD<<BigInt(t))-mD;function ave(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return vp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function JL(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Y8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const cve="0.1.1";function lve(){return cve}let Mr=class yD extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof yD){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof yD&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${lve()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return yY(this,e)}};function yY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?yY(t.cause,e):e?null:t}const uve="#__bigint";function dve(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+uve:s,n)}function hve(t,e){if(J8(t)>e)throw new Cve({givenSize:J8(t),maxSize:e})}const ru={zero:48,nine:57,A:65,F:70,a:97,f:102};function Q8(t){if(t>=ru.zero&&t<=ru.nine)return t-ru.zero;if(t>=ru.A&&t<=ru.F)return t-(ru.A-10);if(t>=ru.a&&t<=ru.f)return t-(ru.a-10)}function fve(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new _ve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function ZL(t,e){if(Ba(t)>e)throw new Nve({givenSize:Ba(t),maxSize:e})}function pve(t,e){if(typeof e=="number"&&e>0&&e>Ba(t)-1)throw new CY({offset:e,position:"start",size:Ba(t)})}function gve(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ba(t)!==n-e)throw new CY({offset:n,position:"end",size:Ba(t)})}function wY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Tve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const mve=new TextEncoder;function yve(t){return t instanceof Uint8Array?t:typeof t=="string"?bve(t):wve(t)}function wve(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function bve(t,e={}){const{size:n}=e;let r=t;n&&(ZL(t,n),r=Og(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=Q8(s.charCodeAt(c++)),u=Q8(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Mr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function vve(t,e={}){const{size:n}=e,r=mve.encode(t);return typeof n=="number"?(hve(r,n),Eve(r,n)):r}function Eve(t,e){return fve(t,{dir:"right",size:e})}function J8(t){return t.length}let Cve=class extends Mr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},_ve=class extends Mr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Ave=new TextEncoder,Sve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function xve(t,e={}){const{strict:n=!1}=e;if(!t)throw new Z8(t);if(typeof t!="string")throw new Z8(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new X8(t);if(!t.startsWith("0x"))throw new X8(t)}function Wl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function bY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ZL(n,e.size),Pg(n,e.size)):n}function vY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Sve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ZL(r,e.size),Og(r,e.size)):r}function yi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new EY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Pg(c,r):c}function XL(t,e={}){return vY(Ave.encode(t),e)}function Pg(t,e){return wY(t,{dir:"left",size:e})}function Og(t,e){return wY(t,{dir:"right",size:e})}function eU(t,e,n,r={}){const{strict:s}=r;pve(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&gve(i,e,n),i}function Ba(t){return Math.ceil((t.length-2)/2)}function Ive(t,e={}){const{strict:n=!1}=e;try{return xve(t,{strict:n}),!0}catch{return!1}}let EY=class extends Mr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class Z8 extends Mr{constructor(e){super(`Value \`${typeof e=="object"?dve(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class X8 extends Mr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Nve=class extends Mr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class CY extends Mr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Tve=class extends Mr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Rve(t){return{address:t.address,amount:yi(t.amount),index:yi(t.index),validatorIndex:yi(t.validatorIndex)}}function _Y(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:yi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:yi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:yi(t.gasLimit)},...typeof t.number=="bigint"&&{number:yi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:yi(t.prevRandao)},...typeof t.time=="bigint"&&{time:yi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Rve)}}}const wD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],bD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],AY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],SY=[...AY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Pve=[...AY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],e4=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],t4=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],n4=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Ove="0x82ad56cb",xY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",kve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Dve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class vD extends ge{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Mve extends ge{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class Lve extends ge{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class IY extends ge{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const OP="/docs/contract/encodeDeployData";function eT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new T0e({docsPath:OP});if(!("inputs"in s))throw new S8({docsPath:OP});if(!s.inputs||s.inputs.length===0)throw new S8({docsPath:OP});const i=Rf(s.inputs,n);return ib([r,i])}function cb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new vD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new vD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function NY(t,{docsPath:e,...n}){const r=(()=>{const s=KN(t,n);return s instanceof J_?t:s})();return new QK(r,{docsPath:e,...n})}function tU(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const kP=new Map;function TY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>kP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>kP.get(e)||[],l=u=>kP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=tU();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function X_(t,e){var G,W,I,R;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:A,value:C,stateOverride:T,...x}=e,N=n?Nr(n):void 0;if(u&&(h||f))throw new ge("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new ge("Cannot provide both `code` & `to` as parameters.");const S=u&&d,D=h&&f&&A&&d,P=S||D,$=S?$ve({code:u,data:d}):D?Fve({data:d,factory:h,factoryData:f,to:A}):d;try{om(e);const O=(typeof i=="bigint"?tt(i):void 0)||o,M=l?_Y(l):void 0,j=FL(T),V=(R=(I=(W=t.chain)==null?void 0:W.formatters)==null?void 0:I.transactionRequest)==null?void 0:R.format,ie=(V||ob)({...YN(x,{format:V}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:$,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:C});if(s&&Uve({request:ie})&&!j&&!M)try{return await Bve(t,{...ie,blockNumber:i,blockTag:o})}catch(pe){if(!(pe instanceof IY)&&!(pe instanceof vD))throw pe}const Q=(()=>{const pe=[ie,O];return j&&M?[...pe,j,M]:j?[...pe,j]:M?[...pe,{},M]:pe})(),te=await t.request({method:"eth_call",params:Q});return te==="0x"?{data:void 0}:{data:te}}catch(B){const O=jve(B),{offchainLookup:M,offchainLookupSignature:j}=await Xs(async()=>{const{offchainLookup:V,offchainLookupSignature:se}=await import("./ccip-DViNzERd.js");return{offchainLookup:V,offchainLookupSignature:se}},[]);if(t.ccipRead!==!1&&(O==null?void 0:O.slice(0,10))===j&&A)return{data:await M(t,{data:O,to:A})};throw P&&(O==null?void 0:O.slice(0,10))==="0x101bb98d"?new ybe({factory:h}):NY(B,{...e,account:N,chain:t.chain})}}function Uve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Ove)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Bve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new IY;l=cb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?tt(s):void 0)||i,{schedule:h}=TY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const m=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Fa({abi:wD,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return am({abi:wD,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new VN({data:f});return f==="0x"?{data:void 0}:{data:f}}function $ve(t){const{code:e,data:n}=t;return eT({abi:pK(["constructor(bytes, bytes)"]),bytecode:xY,args:[e,n]})}function Fve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return eT({abi:pK(["constructor(address, bytes, address, bytes)"]),bytecode:kve,args:[s,e,n,r]})}function jve(t){var n;if(!(t instanceof ge))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function zl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Fa({abi:n,args:s,functionName:i});try{const{data:c}=await ut(t,X_,"call")({...o,data:a,to:r});return am({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Rg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Wve(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Nr(a.account):t.account,l=Fa({abi:n,args:s,functionName:o});try{const{data:u}=await ut(t,X_,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=am({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Rg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const DP=new Map,r4=new Map;let zve=0;function cd(t,e,n){const r=++zve,s=()=>DP.get(t)||[],i=()=>{const u=s();DP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=r4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(DP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&r4.set(t,l),o}async function Vx(t){return new Promise(e=>setTimeout(e,t))}function lb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Vx(c);const l=async()=>{s&&(await t({unpoll:i}),await Vx(r),l())};l()})(),i}const Hve=new Map,Gve=new Map;function qve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Hve),r=e(t,Gve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Vve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=qve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Kve=t=>`blockNumber.${t}`;async function e1(t,{cacheTime:e=t.cacheTime}={}){const n=await Vve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Kve(t.uid),cacheTime:e});return BigInt(n)}async function tT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>ad(i));return!("abi"in e)||!e.abi?s:VL({abi:e.abi,logs:s,strict:n})}async function nT(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Yve(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,m=Xr(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return cd(m,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const T=lb(async()=>{var x;if(!C){try{A=await ut(t,zK,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let N;if(A)N=await ut(t,tT,"getFilterChanges")({filter:A});else{const S=await ut(t,e1,"getBlockNumber")({});v&&v<S?N=await ut(t,fY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Tg&&(C=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ut(t,nT,"uninstallFilter")({filter:A}),T()}})})():(()=>{const w=h??!1,m=Xr(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return cd(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),T=o?K_({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:T}],onData(N){var D;if(!b)return;const S=N.result;try{const{eventName:P,args:$}=qL({abi:n,data:S.data,topics:S.topics,strict:h}),G=ad(S,{args:$,eventName:P});A.onLogs([G])}catch(P){let $,G;if(P instanceof iC||P instanceof zN){if(h)return;$=P.abiItem.name,G=(D=P.abiItem.inputs)==null?void 0:D.some(I=>!("name"in I&&I.name))}const W=ad(S,{args:G?[]:{},eventName:$});A.onLogs([W])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}class cm extends ge{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class wS extends ge{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function RY({chain:t,currentChainId:e}){if(!t)throw new Lve;if(e!==t.id)throw new Mve({chain:t,currentChainId:e})}function PY(t,{docsPath:e,...n}){const r=(()=>{const s=KN(t,n);return s instanceof J_?t:s})();return new fbe(r,{docsPath:e,...n})}async function nU(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const MP=new GN(128);async function t1(t,e){var b,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new cm({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?Nr(n):null;try{om(e);const T=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await tY({authorization:i[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await ut(t,ab,"getChainId")({}),RY({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,D=(N||ob)({...YN(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:T,type:p,value:g}),P=MP.get(t.uid),$=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:$,params:[D]},{retryCount:0})}catch(G){if(P===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(I=>(MP.set(t.uid,!0),I)).catch(I=>{const R=I;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(MP.set(t.uid,!1),W):R});throw W}}if((m==null?void 0:m.type)==="local"){const x=await ut(t,Z_,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...hY,"sidecars"],type:p,value:g,...w,to:T}),N=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await m.signTransaction(x,{serializer:N});return await ut(t,nU,"sendRawTransaction")({serializedTransaction:S})}throw(m==null?void 0:m.type)==="smart"?new wS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new wS({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(T){throw T instanceof wS?T:PY(T,{...e,account:m,chain:e.chain||void 0})}}async function OY(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new cm({docsPath:"/docs/contract/writeContract"});const l=r?Nr(r):null,u=Fa({abi:n,args:i,functionName:a});try{return await ut(t,t1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Rg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const kY={"0x0":"reverted","0x1":"success"};function Qve(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>ad(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Lc(t.transactionIndex):null,status:t.status?kY[t.status]:null,type:t.type?rY[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const DY="0x5792579257925792579257925792579257925792579257925792579257925792",MY=tt(0,{size:32});async function Jve(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Nr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Fa({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Ua([p,f.dataSuffix]):p,to:f.to,value:f.value?tt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:tt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new vw(new ge(b,{details:b}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Ew(new ge(m,{details:m}))}const p=[];for(const m of d){const b=t1(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?Ko(m.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const w=g.map(m=>m.status==="fulfilled"?m.value:MY);return{id:Ua([...w,tt(s.id,{size:32}),DY])}}throw PY(h,{...e,account:u,chain:e.chain})}}async function LY(t,e){async function n(u){if(u.endsWith(DY.slice(2))){const h=Ml(zx(u,-64,-32)),f=zx(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>MY.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Lc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Lc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Ko(u.blockNumber),gasUsed:Ko(u.gasUsed),status:kY[u.status]})))??[],statusCode:l,status:c,version:o}}async function Zve(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Xr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=tU();let u;const d=cd(o,{resolve:c,reject:l},h=>{const f=lb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await LY(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Xve({id:n}))},i):void 0,await a}class Xve extends ge{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const ED=256;let pA=ED,gA;function UY(t=11){if(!gA||pA+t>ED*2){gA="",pA=0;for(let e=0;e<ED;e++)gA+=(256+Math.random()*256|0).toString(16).substring(1)}return gA.substring(pA,pA+++t)}function BY(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Nr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:UY()};function m(b){return v=>{const A=v(b);for(const T in w)delete A[T];const C={...b,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(w,{extend:m(w)})}const mA=new GN(8192);function eEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(mA.get(n))return mA.get(n);const r=t().finally(()=>mA.delete(n));return mA.set(n,r),r}function Kx(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Vx(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function tEe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ep(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ep(new Error("method not supported"),{method:l});const u=s?pw(`${c}.${Xr(n)}`):void 0;return eEe(()=>Kx(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case lC.code:throw new lC(f);case uC.code:throw new uC(f);case dC.code:throw new dC(f,{method:n.method});case hC.code:throw new hC(f);case Ng.code:throw new Ng(f);case Tg.code:throw new Tg(f);case fC.code:throw new fC(f);case Xh.code:throw new Xh(f);case ww.code:throw new ww(f);case Ep.code:throw new Ep(f,{method:n.method});case bw.code:throw new bw(f);case pC.code:throw new pC(f);case Gr.code:throw new Gr(f);case gC.code:throw new gC(f);case mC.code:throw new mC(f);case yC.code:throw new yC(f);case wC.code:throw new wC(f);case jl.code:throw new jl(f);case vw.code:throw new vw(f);case bC.code:throw new bC(f);case vC.code:throw new vC(f);case EC.code:throw new EC(f);case CC.code:throw new CC(f);case _C.code:throw new _C(f);case Ew.code:throw new Ew(f);case 5e3:throw new Gr(f);default:throw h instanceof ge?h:new bbe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof cE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>nEe(h)}),{enabled:s,id:u})}}function nEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===bw.code||t.code===Ng.code:t instanceof cE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function rU({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=UY();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:tEe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function rEe(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>rU({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Yx(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=sEe,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=rU({key:n,name:r,async request({method:g,params:w}){let m;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:w});return f({method:g,params:w,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(T=>{const{include:x,exclude:N}=T({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!m))throw C;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};iEe({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function sEe(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ww.code||t.code===Gr.code||Cp.nodeMessage.test(t.message)||t.code===5e3))}function iEe({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const m=u.map(T=>T[w].latency),v=1-m.reduce((T,x)=>T+x,0)/m.length/f,A=u.map(T=>T[w].success),C=A.reduce((T,x)=>T+x,0)/A.length;return C===0?[0,w]:[l*v+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await Vx(e),d()};d()}class oEe extends ge{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function $Y(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function aEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const s4=aEe();function cEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await $Y(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Xr(r.map(v=>({jsonrpc:"2.0",id:v.id??s4.take(),...v}))):Xr({jsonrpc:"2.0",id:r.id??s4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),m=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new j8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new cE({body:r,details:Xr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof cE||h instanceof j8?h:new cE({body:r,cause:h,url:t})}}}}function Ta(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,m=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new oEe;const v=cEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return rU({key:s,methods:i,name:o,async request({method:A,params:C}){const T={method:A,params:C},{schedule:x}=TY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,$)=>P.id-$.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:D}]=await N(T);if(u)return{error:S,result:D};if(S)throw new $L({body:T,error:S,url:b});return D},retryCount:w,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:b})}}function sU(t,e){var r,s,i,o,a,c;if(!(t instanceof ge))return!1;const n=t.walk(l=>l instanceof oD);return n instanceof oD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===HK[50]):!1}function lEe(t){const{abi:e,data:n}=t,r=yw(n,0,4),s=e.find(i=>i.type==="function"&&r===V_(Mc(i)));if(!s)throw new M0e(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Y_(s.inputs,yw(n,4)):void 0}}const LP="/docs/contract/encodeErrorResult";function i4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=sm({abi:e,args:r,name:n});if(!c)throw new x8(n,{docsPath:LP});s=c}if(s.type!=="error")throw new x8(void 0,{docsPath:LP});const i=Mc(s),o=V_(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new k0e(s.name,{docsPath:LP});a=Rf(s.inputs,r)}return ib([o,a])}const UP="/docs/contract/encodeFunctionResult";function uEe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=sm({abi:e,name:n});if(!o)throw new fw(n,{docsPath:UP});s=o}if(s.type!=="function")throw new fw(void 0,{docsPath:UP});if(!s.outputs)throw new vK(s.name,{docsPath:UP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new EK(r)})();return Rf(s.outputs,i)}const iU="x-batch-gateway:true";async function dEe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=lEe({abi:bD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(iU)?await dEe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=hEe(c)}})),uEe({abi:bD,functionName:"query",result:[s,i]})}function hEe(t){return t.name==="HttpRequestError"&&t.status?i4({abi:bD,errorName:"HttpError",args:[t.status,t.shortMessage]}):i4({abi:[GK],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function FY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Fl(e)?e:null}function bS(t){let e=new Uint8Array(32).fill(0);if(!t)return ts(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=FY(n[r]),i=s?sb(s):Ds(lg(n[r]),"bytes");e=Ds(Ua([e,i]),"bytes")}return ts(e)}function fEe(t){return`[${t.slice(2)}]`}function pEe(t){const e=new Uint8Array(32).fill(0);return t?FY(t)||Ds(lg(t)):ts(e)}function rT(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(lg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=lg(s[i]);o.byteLength>255&&(o=lg(fEe(pEe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function gEe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return cb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Fa({abi:t4,functionName:"addr",...s!=null?{args:[bS(i),BigInt(s)]}:{args:[bS(i)]}}),h={address:l,abi:SY,functionName:"resolve",args:[Da(rT(i)),d,o??[iU]],blockNumber:n,blockTag:r},p=await ut(t,zl,"readContract")(h);if(p[0]==="0x")return null;const g=am({abi:t4,args:s!=null?[bS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Ml(g)==="0x00"?null:g}catch(d){if(a)throw d;if(sU(d,"resolve"))return null;throw d}}class mEe extends ge{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class ev extends ge{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class oU extends ge{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class yEe extends ge{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const wEe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,bEe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,vEe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,EEe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function CEe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function o4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function jY({uri:t,gatewayUrls:e}){const n=vEe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=o4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=o4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(wEe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||bEe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(EEe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new oU({uri:t})}function WY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new mEe({data:t});return t.image||t.image_url||t.image_data}async function _Ee({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await aU({gatewayUrls:t,uri:WY(n)})}catch{throw new oU({uri:e})}}async function aU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=jY({uri:e,gatewayUrls:t});if(r||await CEe(n))return n;throw new oU({uri:e})}function AEe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new ev({reason:"Only EIP-155 supported"});if(!o)throw new ev({reason:"Chain ID not found"});if(!c)throw new ev({reason:"Contract address not found"});if(!s)throw new ev({reason:"Token ID not found"});if(!a)throw new ev({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function SEe(t,{nft:e}){if(e.namespace==="erc721")return zl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return zl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new yEe({namespace:e.namespace})}async function xEe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?IEe(t,{gatewayUrls:e,record:n}):aU({uri:n,gatewayUrls:e})}async function IEe(t,{gatewayUrls:e,record:n}){const r=AEe(n),s=await SEe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=jY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return aU({uri:WY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),_Ee({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function zY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return cb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:SY,functionName:"resolve",args:[Da(rT(i)),Fa({abi:e4,functionName:"text",args:[bS(i),s]}),o??[iU]],blockNumber:n,blockTag:r},f=await ut(t,zl,"readContract")(d);if(f[0]==="0x")return null;const p=am({abi:e4,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(sU(d,"resolve"))return null;throw d}}async function NEe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ut(t,zY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await xEe(t,{record:c,gatewayUrls:r})}catch{return null}}async function HY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=cb({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Pve,functionName:"reverse",args:[Da(rT(c))],blockNumber:n,blockTag:r},u=ut(t,zl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(sU(l,"reverse"))return null;throw l}}async function TEe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return cb({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ut(t,zl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Da(rT(s))],blockNumber:n,blockTag:r});return c}async function GY(t,e){var w,m,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Nr(n):void 0;try{om(e);const A=(typeof r=="bigint"?tt(r):void 0)||s,C=(b=(m=(w=t.chain)==null?void 0:w.formatters)==null?void 0:m.transactionRequest)==null?void 0:b.format,x=(C||ob)({...YN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw NY(v,{...e,account:g,chain:t.chain})}}async function REe(t){const e=qN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function qY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=qN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>K_({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?tt(i):i,toBlock:typeof a=="bigint"?tt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function VY(t){const e=qN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function PEe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function OEe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?tt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Lc(i)}async function a4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?tt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class kEe extends ge{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function DEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ut(t,zl,"readContract")({abi:MEe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new kEe({address:n}):o}}const MEe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function LEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function UEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?tt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[tt(e),i||r,s]},{dedupe:!!i});return LEe(o)}async function BEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>ad(i));return e.abi?VL({abi:e.abi,logs:s,strict:n}):s}function KY(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class $Ee extends ge{constructor({domain:e}){super(`Invalid domain "${Xr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class FEe extends ge{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class jEe extends ge{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function WEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:eQ({domain:e}),...t.types};XY({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(zEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(YY({data:n,primaryType:r,types:s})),Ds(Ua(i))}function zEe({domain:t,types:e}){return YY({data:t,primaryType:"EIP712Domain",types:e})}function YY({data:t,primaryType:e,types:n}){const r=QY({data:t,primaryType:e,types:n});return Ds(r)}function QY({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[HEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=ZY({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Rf(r,s)}function HEe({primaryType:t,types:e}){const n=Da(GEe({primaryType:t,types:e}));return Ds(n)}function GEe({primaryType:t,types:e}){let n="";const r=JY({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function JY({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])JY({primaryType:i.type,types:e},n);return n}function ZY({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ds(QY({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ds(r)];if(n==="string")return[{type:"bytes32"},Ds(Da(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>ZY({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ds(Rf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function qEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Xr({domain:o,message:a,primaryType:r,types:s})}function XY(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(jK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,m]=h;tt(d,{signed:w==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!La(d))throw new mf({address:d});const f=u.match(Mwe);if(f){const[g,w]=f;if(w&&xr(d)!==Number.parseInt(w))throw new U0e({expectedSize:Number.parseInt(w),givenSize:xr(d)})}const p=s[u];p&&(VEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new $Ee({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new FEe({primaryType:r,types:s})}function eQ({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function VEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new jEe({type:t})}const KEe=`Ethereum Signed Message:
`;function YEe(t){const e=typeof t=="string"?pw(t):typeof t.raw=="string"?t.raw:ts(t.raw),n=pw(`${KEe}${xr(e)}`);return Ua([n,e])}function tQ(t,e){return Ds(YEe(t),e)}const nQ="0x6492649264926492649264926492649264926492649264926492649264926492";function QEe(t){return zx(t,-32)===nQ}function JEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=ib([Rf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),nQ]);return s==="hex"?i:Ma(i)}class ZEe extends ge{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function XEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new ZEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function eCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function tCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Lc(t.nonce):void 0,storageProof:t.storageProof?eCe(t.storageProof):void 0}}async function nCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?tt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return tCe(a)}async function rCe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?tt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function sT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?tt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,tt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,tt(i)]},{dedupe:!!a}),!c)throw new KK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||sY)(c)}async function sCe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ut(t,e1,"getBlockNumber")({}),e?ut(t,sT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function CD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new YK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Qve)(n)}async function rQ(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=cb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:C,functionName:T}=l[b];try{const x=Fa({abi:v,args:C,functionName:T});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=Rg(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:T,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ut(t,zl,"readContract")({abi:wD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:T,success:x}=A[C],{callData:N}=h[b][C],{abi:S,address:D,functionName:P,args:$}=l[w.length];try{if(N==="0x")throw new H_;if(!x)throw new VN({data:T});const G=am({abi:S,args:$,data:T,functionName:P});w.push(r?{result:G,status:"success"}:G)}catch(G){const W=Rg(G,{abi:S,address:D,args:$,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw W;w.push({error:W,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ge("multicall results mismatch");return w}async function _D(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?_Y(h.blockOverrides):void 0,p=h.calls.map(w=>{const m=w,b=m.account?Nr(m.account):void 0,v=m.abi?Fa(m):m.data,A={...m,data:m.dataSuffix?Ua([v||"0x",m.dataSuffix]):v,from:m.from??(b==null?void 0:b.address)};return om(A),ob(A)}),g=h.stateOverrides?FL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?tt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...iY(h),calls:h.calls.map((p,g)=>{var D,P;const{abi:w,args:m,functionName:b,to:v}=s[f].calls[g],A=((D=p.error)==null?void 0:D.data)??p.returnData,C=BigInt(p.gasUsed),T=(P=p.logs)==null?void 0:P.map($=>ad($)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?am({abi:w,data:A,functionName:b}):null,S=(()=>{var G;if(x==="success")return;let $;if(((G=p.error)==null?void 0:G.data)==="0x"?$=new H_:p.error&&($=new VN(p.error)),!!$)return Rg($,{abi:w??[],address:v??"0x",args:m,functionName:b??"<unknown>"})})();return{data:A,gasUsed:C,logs:T,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=KN(l,{});throw u instanceof J_?l:u}}function sQ(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=OL(yve(t));return n==="Bytes"?r:vY(r)}let iCe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const oCe={checksum:new iCe(8192)},BP=oCe.checksum,aCe=/^0x[a-fA-F0-9]{40}$/;function iT(t,e={}){const{strict:n=!0}=e;if(!aCe.test(t))throw new c4({address:t,cause:new lCe});if(n){if(t.toLowerCase()===t)return;if(cCe(t)!==t)throw new c4({address:t,cause:new uCe})}}function cCe(t){if(BP.has(t))return BP.get(t);iT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=sQ(vve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return BP.set(t,s),s}function AD(t,e={}){const{strict:n=!0}=e??{};try{return iT(t,{strict:n}),!0}catch{return!1}}class c4 extends Mr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class lCe extends Mr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class uCe extends Mr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function SD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Mr("Unable to normalize signature.");return s}function xD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return AD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>xD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>xD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function iQ(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return iQ(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?AD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?AD(n[r],{strict:!1}):!1)return o}}function oQ(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?A8(t):t;return{...r,...n?{hash:xy(r)}:{}}}function dCe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=Ive(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?aQ(l)===eU(e,0,4):l.type==="event"?xy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new ID({name:e});if(o.length===1)return{...o[0],...s?{hash:xy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:xy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?xD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=iQ(l.inputs,a.inputs,r);if(d)throw new fCe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new ID({name:e});return{...c,...s?{hash:xy(c)}:{}}}function aQ(t){return eU(xy(t),0,4)}function hCe(t){const e=typeof t=="string"?t:Wx(t);return SD(e)}function xy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:sQ(XL(hCe(t)))}class fCe extends Mr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${SD(Wx(e.abiItem))}\`, and`,`\`${n.type}\` in \`${SD(Wx(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class ID extends Mr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const pCe=/^(.*)\[([0-9]*)\]$/,gCe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,cQ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function mCe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(cU({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function cU({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=ACe(r.type);if(s){const[i,o]=s;return wCe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return _Ce(n,{checksumAddress:t,parameter:r});if(r.type==="address")return yCe(n,{checksum:t});if(r.type==="bool")return vCe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=cQ.exec(r.type)??[];return ECe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return bCe(n,{type:r.type});if(r.type==="string")return CCe(n);throw new hQ(r.type)}function lU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ba(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(yi(e+s,{size:32})),r.push(a),s+=Ba(a)):n.push(a)}return Wl(...n,...r)}function yCe(t,e){const{checksum:n=!1}=e;return iT(t,{strict:n}),{dynamic:!1,encoded:Pg(t.toLowerCase())}}function wCe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new xCe(t);if(!i&&t.length!==r)throw new SCe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=cU({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=lU(a);if(i){const l=yi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Wl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Wl(...a.map(({encoded:c})=>c))}}function bCe(t,{type:e}){const[,n]=e.split("bytes"),r=Ba(t);if(!n){let s=t;return r%32!==0&&(s=Og(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Wl(Pg(yi(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new uQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Og(t)}}function vCe(t){if(typeof t!="boolean")throw new Mr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Pg(bY(t))}}function ECe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new EY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:yi(t,{size:32,signed:e})}}function CCe(t){const e=XL(t),n=Math.ceil(Ba(e)/32),r=[];for(let s=0;s<n;s++)r.push(Og(eU(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Wl(Og(yi(Ba(e),{size:32})),...r)}}function _Ce(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=cU({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?lU(i):Wl(...i.map(({encoded:o})=>o))}}function ACe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function lQ(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new dQ({expectedLength:t.length,givenLength:e.length});const s=mCe({checksumAddress:r,parameters:t,values:e}),i=lU(s);return i.length===0?"0x":i}function ND(t,e){if(t.length!==e.length)throw new dQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(ND.encode(s,i))}return Wl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return iT(c),Pg(c.toLowerCase(),s?32:0)}if(n==="string")return XL(r);if(n==="bytes")return r;if(n==="bool")return Pg(bY(r),s?32:1);const i=n.match(cQ);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return yi(r,{size:s?32:d,signed:l==="int"})}const o=n.match(gCe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new uQ({expectedSize:Number.parseInt(l),value:r});return Og(r,s?32:0)}const a=n.match(pCe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Wl(...u)}throw new hQ(n)}t.encode=e})(ND||(ND={}));class SCe extends Mr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class uQ extends Mr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ba(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class dQ extends Mr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class xCe extends Mr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class hQ extends Mr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function ICe(t,e){var s;const{bytecode:n,args:r}=e;return Wl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?lQ(t.inputs,r):"0x")}function NCe(t){return oQ(t)}function TCe(t,...e){const{overloads:n}=t,r=n?RCe([t,...n],t.name,{args:e[0]}):t,s=PCe(r),i=e.length>0?lQ(r.inputs,e[0]):void 0;return i?Wl(s,i):s}function Om(t,e={}){return oQ(t,e)}function RCe(t,e,n){const r=dCe(t,e,n);if(r.type!=="function")throw new ID({name:e,type:"function"});return r}function PCe(t){return aQ(t)}const OCe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",qc="0x0000000000000000000000000000000000000000",kCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function DCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Nr(e.account):void 0;if(o&&!l)throw new ge("`account` is required when `traceAssetChanges` is true");const u=l?ICe(NCe("constructor(bytes, bytes)"),{bytecode:xY,args:[kCe,TCe(Om("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async O=>{if(!O.data&&!O.abi)return;const{accessList:M}=await GY(t,{account:l.address,...O,data:O.abi?Fa(O):O.data});return M.map(({address:j,storageKeys:V})=>V.length>0?j:null)})).then(O=>O.flat().filter(Boolean)):[],h=await _D(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((O,M)=>({abi:[Om("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:O,from:qc,nonce:M})),stateOverrides:[{address:qc,nonce:0}]}]:[],{calls:[...s,{}].map(O=>({...O,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((O,M)=>({abi:[Om("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:O,from:qc,nonce:M})),stateOverrides:[{address:qc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Om("function decimals() returns (uint256)")],functionName:"decimals",from:qc,nonce:M})),stateOverrides:[{address:qc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Om("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:qc,nonce:M})),stateOverrides:[{address:qc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Om("function symbol() returns (string)")],functionName:"symbol",from:qc,nonce:M})),stateOverrides:[{address:qc,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,m,b,v,A]=o?h:[],{calls:C,...T}=f,x=C.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],D=[...N,...S].map(O=>O.status==="success"?Ko(O.data):null),P=(w==null?void 0:w.calls)??[],$=(m==null?void 0:m.calls)??[],G=[...P,...$].map(O=>O.status==="success"?Ko(O.data):null),W=((b==null?void 0:b.calls)??[]).map(O=>O.status==="success"?O.result:null),I=((A==null?void 0:A.calls)??[]).map(O=>O.status==="success"?O.result:null),R=((v==null?void 0:v.calls)??[]).map(O=>O.status==="success"?O.result:null),B=[];for(const[O,M]of G.entries()){const j=D[O];if(typeof M!="bigint"||typeof j!="bigint")continue;const V=W[O-1],se=I[O-1],ie=R[O-1],Q=O===0?{address:OCe,decimals:18,symbol:"ETH"}:{address:d[O-1],decimals:ie||V?Number(V??1):void 0,symbol:se??void 0};B.some(te=>te.token.address===Q.address)||B.push({token:Q,value:{pre:j,post:M,diff:M-j}})}return{assetChanges:B,block:T,results:x}}let fQ=class extends RL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,swe(e);const r=G_(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),mw(i)}update(e){return gw(this),this.iHash.update(e),this}digestInto(e){gw(this),Uc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const pQ=(t,e,n)=>new fQ(t,e).update(n).digest();pQ.create=(t,e)=>new fQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const so=BigInt(0),Si=BigInt(1),_p=BigInt(2),MCe=BigInt(3),gQ=BigInt(4),mQ=BigInt(5),yQ=BigInt(8);function _a(t,e){const n=t%e;return n>=so?n:e+n}function ra(t,e,n){let r=t;for(;e-- >so;)r*=r,r%=n;return r}function l4(t,e){if(t===so)throw new Error("invert: expected non-zero number");if(e<=so)throw new Error("invert: expected positive modulus, got "+e);let n=_a(t,e),r=e,s=so,i=Si;for(;n!==so;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Si)throw new Error("invert: does not exist");return _a(s,e)}function wQ(t,e){const n=(t.ORDER+Si)/gQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function LCe(t,e){const n=(t.ORDER-mQ)/yQ,r=t.mul(e,_p),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,_p),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function UCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Si,n=0;for(;e%_p===so;)e/=_p,n++;let r=_p;const s=oT(t);for(;u4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return wQ;let i=s.pow(r,e);const o=(e+Si)/_p;return function(c,l){if(c.is0(l))return l;if(u4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Si<<BigInt(u-p-1),m=c.pow(d,w);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function BCe(t){return t%gQ===MCe?wQ:t%yQ===mQ?LCe:UCe(t)}const $Ce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function FCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=$Ce.reduce((r,s)=>(r[s]="function",r),e);return JL(t,n),t}function jCe(t,e,n){if(n<so)throw new Error("invalid exponent, negatives unsupported");if(n===so)return t.ONE;if(n===Si)return e;let r=t.ONE,s=e;for(;n>so;)n&Si&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Si;return r}function bQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function u4(t,e){const n=(t.ORDER-Si)/_p,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function WCe(t,e){e!==void 0&&oC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function oT(t,e,n=!1,r={}){if(t<=so)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=WCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:XN(o),ZERO:so,ONE:Si,create:u=>_a(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return so<=u&&u<t},is0:u=>u===so,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Si)===Si,neg:u=>_a(-u,t),eql:(u,d)=>u===d,sqr:u=>_a(u*u,t),add:(u,d)=>_a(u+d,t),sub:(u,d)=>_a(u-d,t),mul:(u,d)=>_a(u*d,t),pow:(u,d)=>jCe(l,u,d),div:(u,d)=>_a(u*l4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>l4(u,t),sqrt:i||(u=>(c||(c=BCe(t)),c(l,u))),toBytes:u=>n?mY(u,a):QL(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?gY(u):ZN(u)},invertBatch:u=>bQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function vQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function EQ(t){const e=vQ(t);return e+Math.ceil(e/2)}function zCe(t,e,n=!1){const r=t.length,s=vQ(e),i=EQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?gY(t):ZN(t),a=_a(o,e-Si)+Si;return n?mY(a,s):QL(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cw=BigInt(0),Ap=BigInt(1);function lE(t,e){const n=e.negate();return t?n:e}function HCe(t,e,n){const r=o=>o.pz,s=bQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function CQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $P(t,e){CQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=XN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function d4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ap);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function GCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function qCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const FP=new WeakMap,_Q=new WeakMap;function jP(t){return _Q.get(t)||1}function h4(t){if(t!==Cw)throw new Error("invalid wNAF")}function VCe(t,e){return{constTimeNegate:lE,hasPrecomputes(n){return jP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Cw;)r&Ap&&(s=s.add(i)),i=i.double(),r>>=Ap;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=$P(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=$P(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=d4(s,c,a);s=l,d?o=o.add(lE(f,r[p])):i=i.add(lE(h,r[u]))}return h4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=$P(n,e);for(let a=0;a<o.windows&&s!==Cw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=d4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return h4(s),i},getPrecomputes(n,r,s){let i=FP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),FP.set(r,i))),i},wNAFCached(n,r,s){const i=jP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=jP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){CQ(r,e),_Q.set(n,r),FP.delete(n)}}}function KCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Cw||r>Cw;)n&Ap&&(i=i.add(s)),r&Ap&&(o=o.add(s)),s=s.double(),n>>=Ap,r>>=Ap;return{p1:i,p2:o}}function YCe(t,e,n,r){GCe(n,t),qCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=ove(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=XN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],m=Number(w>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function f4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return FCe(e),e}else return oT(t)}function QCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Cw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=f4(e.p,n.Fp),s=f4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p4(t){t.lowS!==void 0&&qx("lowS",t.lowS),t.prehash!==void 0&&qx("prehash",t.prehash)}class JCe extends Error{constructor(e=""){super(e)}}const vu={Err:JCe,_tlv:{encode:(t,e)=>{const{Err:n}=vu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=fA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?fA(s.length/2|128):"";return fA(t)+i+s+e},decode(t,e){const{Err:n}=vu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=vu;if(t<uE)throw new e("integer: negative integers are not allowed");let n=fA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=vu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ZN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=vu,s=ga("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=vu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},uE=BigInt(0),dE=BigInt(1),ZCe=BigInt(2),yA=BigInt(3),XCe=BigInt(4);function e_e(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function AQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ga("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function t_e(t,e={}){const{Fp:n,Fn:r}=QCe("weierstrass",t,e),{h:s,n:i}=t;JL(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,D){const{x:P,y:$}=S.toAffine(),G=n.toBytes(P);if(qx("isCompressed",D),D){a();const W=!n.isOdd($);return vp(SQ(W),G)}else return vp(Uint8Array.of(4),G,n.toBytes($))}function l(N){Uc(N);const S=n.BYTES,D=S+1,P=2*S+1,$=N.length,G=N[0],W=N.subarray(1);if($===D&&(G===2||G===3)){const I=n.fromBytes(W);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const R=h(I);let B;try{B=n.sqrt(R)}catch(j){const V=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}a();const O=n.isOdd(B);return(G&1)===1!==O&&(B=n.neg(B)),{x:I,y:B}}else if($===P&&G===4){const I=n.fromBytes(W.subarray(S*0,S*1)),R=n.fromBytes(W.subarray(S*1,S*2));if(!f(I,R))throw new Error("bad point: is not on curve");return{x:I,y:R}}else throw new Error(`bad point: got length ${$}, expected compressed=${D} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=e_e(n,t.a,t.b);function f(N,S){const D=n.sqr(S),P=h(N);return n.eql(D,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,yA),XCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,D=!1){if(!n.isValid(S)||D&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function m(N){if(!(N instanceof C))throw new Error("ProjectivePoint expected")}const b=Y8((N,S)=>{const{px:D,py:P,pz:$}=N;if(n.eql($,n.ONE))return{x:D,y:P};const G=N.is0();S==null&&(S=G?n.ONE:n.inv($));const W=n.mul(D,S),I=n.mul(P,S),R=n.mul($,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:W,y:I}}),v=Y8(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:D}=N.toAffine();if(!n.isValid(S)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(S,D))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,D,P,$){return D=new C(n.mul(D.px,N),D.py,D.pz),S=lE(P,S),D=lE($,D),S.add(D)}class C{constructor(S,D,P){this.px=w("x",S),this.py=w("y",D,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:D,y:P}=S||{};if(!S||!n.isValid(D)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(P)?C.ZERO:new C(D,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return HCe(C,"pz",S)}static fromBytes(S){return Uc(S),C.fromHex(S)}static fromHex(S){const D=C.fromAffine(d(ga("pointHex",S)));return D.assertValidity(),D}static fromPrivateKey(S){const D=AQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(D(S))}static msm(S,D){return YCe(C,r,S,D)}precompute(S=8,D=!0){return x.setWindowSize(this,S),D||this.multiply(yA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){m(S);const{px:D,py:P,pz:$}=this,{px:G,py:W,pz:I}=S,R=n.eql(n.mul(D,I),n.mul(G,$)),B=n.eql(n.mul(P,I),n.mul(W,$));return R&&B}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:D}=t,P=n.mul(D,yA),{px:$,py:G,pz:W}=this;let I=n.ZERO,R=n.ZERO,B=n.ZERO,O=n.mul($,$),M=n.mul(G,G),j=n.mul(W,W),V=n.mul($,G);return V=n.add(V,V),B=n.mul($,W),B=n.add(B,B),I=n.mul(S,B),R=n.mul(P,j),R=n.add(I,R),I=n.sub(M,R),R=n.add(M,R),R=n.mul(I,R),I=n.mul(V,I),B=n.mul(P,B),j=n.mul(S,j),V=n.sub(O,j),V=n.mul(S,V),V=n.add(V,B),B=n.add(O,O),O=n.add(B,O),O=n.add(O,j),O=n.mul(O,V),R=n.add(R,O),j=n.mul(G,W),j=n.add(j,j),O=n.mul(j,V),I=n.sub(I,O),B=n.mul(j,M),B=n.add(B,B),B=n.add(B,B),new C(I,R,B)}add(S){m(S);const{px:D,py:P,pz:$}=this,{px:G,py:W,pz:I}=S;let R=n.ZERO,B=n.ZERO,O=n.ZERO;const M=t.a,j=n.mul(t.b,yA);let V=n.mul(D,G),se=n.mul(P,W),ie=n.mul($,I),Q=n.add(D,P),te=n.add(G,W);Q=n.mul(Q,te),te=n.add(V,se),Q=n.sub(Q,te),te=n.add(D,$);let pe=n.add(G,I);return te=n.mul(te,pe),pe=n.add(V,ie),te=n.sub(te,pe),pe=n.add(P,$),R=n.add(W,I),pe=n.mul(pe,R),R=n.add(se,ie),pe=n.sub(pe,R),O=n.mul(M,te),R=n.mul(j,ie),O=n.add(R,O),R=n.sub(se,O),O=n.add(se,O),B=n.mul(R,O),se=n.add(V,V),se=n.add(se,V),ie=n.mul(M,ie),te=n.mul(j,te),se=n.add(se,ie),ie=n.sub(V,ie),ie=n.mul(M,ie),te=n.add(te,ie),V=n.mul(se,te),B=n.add(B,V),V=n.mul(pe,te),R=n.mul(Q,R),R=n.sub(R,V),V=n.mul(Q,se),O=n.mul(pe,O),O=n.add(O,V),new C(R,B,O)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:D}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,$;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(D){const{k1neg:W,k1:I,k2neg:R,k2:B}=D.splitScalar(S),{p:O,f:M}=G(I),{p:j,f:V}=G(B);$=M.add(V),P=A(D.beta,O,j,W,R)}else{const{p:W,f:I}=G(S);P=W,$=I}return C.normalizeZ([P,$])[0]}multiplyUnsafe(S){const{endo:D}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===uE||P.is0())return C.ZERO;if(S===dE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(D){const{k1neg:$,k1:G,k2neg:W,k2:I}=D.splitScalar(S),{p1:R,p2:B}=KCe(C,P,G,I);return A(D.beta,R,B,$,W)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,D,P){const $=this.multiplyUnsafe(D).add(S.multiplyUnsafe(P));return $.is0()?void 0:$}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===dE?!0:S?S(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===dE?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return qx("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return aC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const T=r.BITS,x=VCe(C,e.endo?Math.ceil(T/2):T);return C}function SQ(t){return Uint8Array.of(t?2:3)}function n_e(t,e,n={}){JL(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||hwe,s=e.hmac||((P,...$)=>pQ(e.hash,P,vp(...$))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const $=a>>dE;return P>$}function u(P){return l(P)?o.neg(P):P}function d(P,$){if(!o.isValidNot0($))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor($,G,W){d("r",$),d("s",G),this.r=$,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact($){const G=o.BYTES,W=ga("compactSignature",$,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER($){const{r:G,s:W}=vu.toSig(ga("DER",$));return new h(G,W)}assertValidity(){}addRecoveryBit($){return new h(this.r,this.s,$)}recoverPublicKey($){const G=i.ORDER,{r:W,s:I,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*ZCe<G&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=R===2||R===3?W+a:W;if(!i.isValid(O))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(O),j=t.fromHex(vp(SQ((R&1)===0),M)),V=o.inv(O),se=v(ga("msgHash",$)),ie=o.create(-se*V),Q=o.create(I*V),te=t.BASE.multiplyUnsafe(ie).add(j.multiplyUnsafe(Q));if(te.is0())throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes($){if($==="compact")return vp(o.toBytes(this.r),o.toBytes(this.s));if($==="der")return TL(vu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return aC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return aC(this.toBytes("compact"))}}const f=AQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return zCe(r(EQ(P)),P)},precompute(P=8,$=t.BASE){return $.precompute(P,!1)}};function g(P,$=!0){return t.fromPrivateKey(P).toBytes($)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const G=ga("key",P).length,W=i.BYTES,I=W+1,R=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===I))return G===I||G===R}function m(P,$,G=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w($)===!1)throw new Error("second arg must be public key");return t.fromHex($).multiply(f(P)).toBytes(G)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const $=ZN(P),G=P.length*8-c;return G>0?$>>BigInt(G):$},v=e.bits2int_modN||function(P){return o.create(b(P))},A=XN(c);function C(P){return ive("num < 2^"+c,P,uE,A),o.toBytes(P)}function T(P,$,G=x){if(["recovered","canonical"].some(Q=>Q in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:I,prehash:R,extraEntropy:B}=G;I==null&&(I=!0),P=ga("msgHash",P),p4(G),R&&(P=ga("prehashed msgHash",W(P)));const O=v(P),M=f($),j=[C(M),C(O)];if(B!=null&&B!==!1){const Q=B===!0?r(i.BYTES):B;j.push(ga("extraEntropy",Q))}const V=vp(...j),se=O;function ie(Q){const te=b(Q);if(!o.isValidNot0(te))return;const pe=o.inv(te),Ze=t.BASE.multiply(te).toAffine(),Xe=o.create(Ze.x);if(Xe===uE)return;const We=o.create(pe*o.create(se+Xe*M));if(We===uE)return;let mt=(Ze.x===Xe?0:2)|Number(Ze.y&dE),Ot=We;return I&&l(We)&&(Ot=u(We),mt^=1),new h(Xe,Ot,mt)}return{seed:V,k2sig:ie}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,$,G=x){const{seed:W,k2sig:I}=T(P,$,G);return ave(e.hash.outputLen,o.BYTES,s)(W,I)}t.BASE.precompute(8);function D(P,$,G,W=N){const I=P;$=ga("msgHash",$),G=ga("publicKey",G),p4(W);const{lowS:R,prehash:B,format:O}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&!["compact","der","js"].includes(O))throw new Error('format must be "compact", "der" or "js"');const M=typeof I=="string"||NL(I),j=!M&&!O&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!M&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,se;try{if(j)if(O===void 0||O==="js")V=new h(I.r,I.s);else throw new Error("invalid format");if(M){try{O!=="compact"&&(V=h.fromDER(I))}catch(Ot){if(!(Ot instanceof vu.Err))throw Ot}!V&&O!=="der"&&(V=h.fromCompact(I))}se=t.fromHex(G)}catch{return!1}if(!V||R&&V.hasHighS())return!1;B&&($=e.hash($));const{r:ie,s:Q}=V,te=v($),pe=o.inv(Q),Ze=o.create(te*pe),Xe=o.create(ie*pe),We=t.BASE.multiplyUnsafe(Ze).add(se.multiplyUnsafe(Xe));return We.is0()?!1:o.create(We.x)===ie}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:S,verify:D,utils:p,Point:t,Signature:h})}function r_e(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=oT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function s_e(t){const{CURVE:e,curveOpts:n}=r_e(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function i_e(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function o_e(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=s_e(t),s=t_e(e,n),i=n_e(s,r,n);return i_e(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function a_e(t,e){const n=r=>o_e({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qx={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const c_e=BigInt(1),TD=BigInt(2),g4=(t,e)=>(t+e/TD)/e;function l_e(t){const e=Qx.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ra(u,n,e)*u%e,h=ra(d,n,e)*u%e,f=ra(h,TD,e)*l%e,p=ra(f,s,e)*f%e,g=ra(p,i,e)*p%e,w=ra(g,a,e)*g%e,m=ra(w,c,e)*w%e,b=ra(m,a,e)*g%e,v=ra(b,n,e)*u%e,A=ra(v,o,e)*p%e,C=ra(A,r,e)*l%e,T=ra(C,TD,e);if(!RD.eql(RD.sqr(T),t))throw new Error("Cannot find square root");return T}const RD=oT(Qx.p,void 0,void 0,{sqrt:l_e}),xQ=a_e({...Qx,Fp:RD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Qx.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-c_e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=g4(i*t,e),c=g4(-r*t,e);let l=_a(t-a*n-c*s,e),u=_a(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},lY),u_e=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:xQ},Symbol.toStringTag,{value:"Module"}));function d_e({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new xQ.Signature(Ko(t),Ko(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ma(o)}async function uU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Fl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?d_e(o):ts(o),u=await(async()=>!r&&!s||QEe(l)?l:JEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Fa({abi:n4,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:eT({abi:n4,args:[n,i,u],bytecode:Dve}),...c},{data:g}=await ut(t,X_,"call")(p);return q0e(g??"0x0")}catch(p){try{if(JN(zu(n),await ZK({hash:i,signature:o})))return!0}catch{}if(p instanceof QK)return!1;throw p}}async function h_e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=tQ(n);return uU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function f_e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=WEe({message:o,primaryType:a,types:c,domain:l});return uU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}function IQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Xr(["watchBlockNumber",t.uid,e,n,o]);return cd(d,{onBlockNumber:r,onError:s},h=>lb(async()=>{var f;try{const p=await ut(t,e1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Xr(["watchBlockNumber",t.uid,e,n]);return cd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const b=Ko((v=m.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(m){var b;(b=h.onError)==null||b.call(h,m)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function NQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Xr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:m}=tU(),b=a?setTimeout(()=>{p(),f(),m(new pbe({hash:n}))},a):void 0;return f=cd(c,{onReplaced:r,resolve:w,reject:m},v=>{p=ut(t,IQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(b),p(),x(),f()};let T=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await Kx(async()=>{l=await ut(t,sT,"getTransaction")({hash:n}),l.blockNumber&&(T=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ut(t,CD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof KK||x instanceof YK){if(!l){h=!1;return}try{u=l,h=!0;const N=await Kx(()=>ut(t,Tl,"getBlock")({blockNumber:T,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof nY});h=!1;const S=N.transactions.find(({from:P,nonce:$})=>P===u.from&&$===u.nonce);if(!S||(d=await ut(t,CD,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e)))return;let D="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?D="repriced":S.from===S.to&&S.value===0n&&(D="cancelled"),C(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:D,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){C(()=>v.reject(N))}}else C(()=>v.reject(x))}}})}),g}function p_e(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Xr(["watchBlocks",t.uid,e,n,r,u,c]);return cd(p,{onBlock:s,onError:i},g=>lb(async()=>{var w;try{const m=await ut(t,Tl,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<m.number;b++){const v=await ut(t,Tl,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(w=g.onError)==null||w.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ut(t,Tl,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await ut(t,Tl,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(m){i==null||i(m)}})(),()=>w()})()}function g_e(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=Xr(["watchEvent",e,n,r,t.uid,s,u,o]);return cd(w,{onLogs:c,onError:a},m=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const C=lb(async()=>{var T;if(!A){try{v=await ut(t,qY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ut(t,tT,"getFilterChanges")({filter:v});else{const N=await ut(t,e1,"getBlockNumber")({});b&&b!==N?x=await ut(t,KL,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)m.onLogs(x);else for(const N of x)m.onLogs([N])}catch(x){v&&x instanceof Tg&&(A=!1),(T=m.onError)==null||T.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ut(t,nT,"uninstallFilter")({filter:v}),C()}})})():(()=>{let w=!0,m=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>K_({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(T){var N;if(!w)return;const x=T.result;try{const{eventName:S,args:D}=qL({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=ad(x,{args:D,eventName:S});c([P])}catch(S){let D,P;if(S instanceof iC||S instanceof zN){if(d)return;D=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(G=>!("name"in G&&G.name))}const $=ad(x,{args:P?[]:{},eventName:D});c([$])}},onError(T){a==null||a(T)}});m=C,w||m()}catch(b){a==null||a(b)}})(),()=>m()})()}function TQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Xr(["watchPendingTransactions",t.uid,e,i]);return cd(l,{onTransactions:r,onError:n},u=>{let d;const h=lb(async()=>{var f;try{if(!d)try{d=await ut(t,VY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ut(t,tT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ut(t,nT,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}function m_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(y_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(w_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const y_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,w_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function b_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!La(r.address,{strict:!1})||e&&!JN(r.address,e))return!1}catch{return!1}return!0}async function v_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=m_e(s);if(!u.address||!b_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=tQ(s);return uU(t,{address:u.address,hash:h,signature:a,...l})}function E_e(t){return{call:e=>X_(t,e),createAccessList:e=>GY(t,e),createBlockFilter:()=>REe(t),createContractEventFilter:e=>zK(t,e),createEventFilter:e=>qY(t,e),createPendingTransactionFilter:()=>VY(t),estimateContractGas:e=>tve(t,e),estimateGas:e=>QN(t,e),getBalance:e=>GL(t,e),getBlobBaseFee:()=>PEe(t),getBlock:e=>Tl(t,e),getBlockNumber:e=>e1(t,e),getBlockTransactionCount:e=>OEe(t,e),getBytecode:e=>a4(t,e),getChainId:()=>ab(t),getCode:e=>a4(t,e),getContractEvents:e=>fY(t,e),getEip712Domain:e=>DEe(t,e),getEnsAddress:e=>gEe(t,e),getEnsAvatar:e=>NEe(t,e),getEnsName:e=>HY(t,e),getEnsResolver:e=>TEe(t,e),getEnsText:e=>zY(t,e),getFeeHistory:e=>UEe(t,e),estimateFeesPerGas:e=>$be(t,e),getFilterChanges:e=>tT(t,e),getFilterLogs:e=>BEe(t,e),getGasPrice:()=>WL(t),getLogs:e=>KL(t,e),getProof:e=>nCe(t,e),estimateMaxPriorityFeePerGas:e=>Bbe(t,e),getStorageAt:e=>rCe(t,e),getTransaction:e=>sT(t,e),getTransactionConfirmations:e=>sCe(t,e),getTransactionCount:e=>zL(t,e),getTransactionReceipt:e=>CD(t,e),multicall:e=>rQ(t,e),prepareTransactionRequest:e=>Z_(t,e),readContract:e=>zl(t,e),sendRawTransaction:e=>nU(t,e),simulate:e=>_D(t,e),simulateBlocks:e=>_D(t,e),simulateCalls:e=>DCe(t,e),simulateContract:e=>Wve(t,e),verifyMessage:e=>h_e(t,e),verifySiweMessage:e=>v_e(t,e),verifyTypedData:e=>f_e(t,e),uninstallFilter:e=>nT(t,e),waitForTransactionReceipt:e=>NQ(t,e),watchBlocks:e=>p_e(t,e),watchBlockNumber:e=>IQ(t,e),watchContractEvent:e=>Yve(t,e),watchEvent:e=>g_e(t,e),watchPendingTransactions:e=>TQ(t,e)}}async function C_e(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:tt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function __e(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=eT({abi:n,args:r,bytecode:s});return t1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}async function A_e(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>q_(r))}async function S_e(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Nr(n):void 0,i=r?[s==null?void 0:s.address,[tt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}async function x_e(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function RQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Nr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Nr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ut(t,ab,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ut(t,zL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&JN(o.address,i.address))&&(a.nonce+=1)),a}async function I_e(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>zu(n))}async function N_e(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function T_e(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function R_e(t,e){const{account:n=t.account}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/signAuthorization"});const r=Nr(n);if(!r.signAuthorization)throw new wS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await RQ(t,e);return r.signAuthorization(s)}async function PQ(t,{account:e=t.account,message:n}){if(!e)throw new cm({docsPath:"/docs/actions/wallet/signMessage"});const r=Nr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?pw(n):n.raw instanceof Uint8Array?Da(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function P_e(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTransaction"});const i=Nr(n);om({account:i,...e});const o=await ut(t,ab,"getChainId")({});r!==null&&RY({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||ob;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:tt(o),from:i.address}]},{retryCount:0})}async function O_e(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTypedData"});const o=Nr(n),a={EIP712Domain:eQ({domain:r}),...e.types};if(XY({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=qEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function k_e(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(e)}]},{retryCount:0})}async function D_e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function M_e(t){return{addChain:e=>C_e(t,e),deployContract:e=>__e(t,e),getAddresses:()=>A_e(t),getCallsStatus:e=>LY(t,e),getCapabilities:e=>S_e(t,e),getChainId:()=>ab(t),getPermissions:()=>x_e(t),prepareAuthorization:e=>RQ(t,e),prepareTransactionRequest:e=>Z_(t,e),requestAddresses:()=>I_e(t),requestPermissions:e=>N_e(t,e),sendCalls:e=>Jve(t,e),sendRawTransaction:e=>nU(t,e),sendTransaction:e=>t1(t,e),showCallsStatus:e=>T_e(t,e),signAuthorization:e=>R_e(t,e),signMessage:e=>PQ(t,e),signTransaction:e=>P_e(t,e),signTypedData:e=>O_e(t,e),switchChain:e=>k_e(t,e),waitForCallsStatus:e=>Zve(t,e),watchAsset:e=>D_e(t,e),writeContract:e=>OY(t,e)}}const WP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},m4={async getMyTokensWithBalance(t){const e=qe.state.address,n=H.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await yt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=WP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await wt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await wt.walletGetAssets({account:t,chainFilter:[s]});return WP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>WP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:H.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Tn=or({tokenBalances:[],loading:!1}),L_e={state:Tn,subscribe(t){return si(Tn,()=>t(Tn))},subscribeKey(t,e){return oi(Tn,t,e)},setToken(t){t&&(Tn.token=Sg(t))},setTokenAmount(t){Tn.sendTokenAmount=t},setReceiverAddress(t){Tn.receiverAddress=t},setReceiverProfileImageUrl(t){Tn.receiverProfileImageUrl=t},setReceiverProfileName(t){Tn.receiverProfileName=t},setNetworkBalanceInUsd(t){Tn.networkBalanceInUSD=t},setLoading(t){Tn.loading=t},async sendToken(){var t;try{switch(vn.setLoading(!0),(t=H.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await vn.sendEvmToken();return;case"solana":await vn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{vn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=H.state.activeChain,e=(n=qe.state.preferredAccountTypes)==null?void 0:n[t];if(!vn.state.sendTokenAmount||!vn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!vn.state.token)throw new Error("A token is required");(r=vn.state.token)!=null&&r.address?(ur.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token.address,amount:vn.state.sendTokenAmount,network:((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await vn.sendERC20Token({receiverAddress:vn.state.receiverAddress,tokenAddress:vn.state.token.address,sendTokenAmount:vn.state.sendTokenAmount,decimals:vn.state.token.quantity.decimals})):(ur.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token.symbol||"",amount:vn.state.sendTokenAmount,network:((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await vn.sendNativeToken({receiverAddress:vn.state.receiverAddress,sendTokenAmount:vn.state.sendTokenAmount,decimals:vn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Tn.loading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?it.getPlainAddress(r):void 0;if(Tn.lastRetry&&!it.isAllowedRetry(Tn.lastRetry,30*$n.ONE_SEC_MS))return Tn.loading=!1,[];try{if(s&&e&&n){const a=await m4.getMyTokensWithBalance();return Tn.tokenBalances=a,Tn.lastRetry=void 0,a}}catch(a){Tn.lastRetry=Date.now(),t==null||t(a),Cc.showError("Token Balance Unavailable")}finally{Tn.loading=!1}return[]},fetchNetworkBalance(){if(Tn.tokenBalances.length===0)return;const t=m4.mapBalancesToSwapTokens(Tn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H.getActiveNetworkTokenAddress());e&&(Tn.networkBalanceInUSD=e?dye.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ft.pushTransactionStack({});const e=t.receiverAddress,n=qe.state.address,r=wt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await wt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),ur.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=qe.state.preferredAccountTypes)==null?void 0:i.eip155)===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=vn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=wt._getClient())==null||c.updateBalance("eip155"),vn.resetSend()},async sendERC20Token(t){Ft.pushTransactionStack({onSuccess(){Ft.replace("Account")}});const e=wt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(qe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=it.getPlainAddress(t.tokenAddress);await wt.writeContract({fromAddress:qe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:gye.getERC20Abi(n),chainNamespace:"eip155"}),vn.resetSend()}},async sendSolanaToken(){var t;if(!vn.state.sendTokenAmount||!vn.state.receiverAddress)throw new Error("An amount and receiver address are required");Ft.pushTransactionStack({onSuccess(){Ft.replace("Account")}}),await wt.sendTransaction({chainNamespace:"solana",to:vn.state.receiverAddress,value:vn.state.sendTokenAmount}),(t=wt._getClient())==null||t.updateBalance("solana"),vn.resetSend()},resetSend(){Tn.token=void 0,Tn.sendTokenAmount=void 0,Tn.receiverAddress=void 0,Tn.receiverProfileImageUrl=void 0,Tn.receiverProfileName=void 0,Tn.loading=!1,Tn.tokenBalances=[]}},vn=Xo(L_e),zP={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},wA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Pe=or({chains:nye(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),U_e={state:Pe,subscribe(t){return si(Pe,()=>{t(Pe)})},subscribeKey(t,e){return oi(Pe,t,e)},subscribeChainProp(t,e,n){let r;return si(Pe.chains,()=>{var i;const s=n||Pe.activeChain;if(s){const o=(i=Pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ve.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Pe.noAdapters=!0),Pe.noAdapters||(Pe.activeChain=a==null?void 0:a.namespace,Pe.activeCaipNetwork=i,H.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Pe.activeChain&&Dl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);H.state.chains.set(u,{namespace:u,networkState:or({...wA,caipNetwork:d==null?void 0:d[0]}),accountState:or(zP),caipNetworks:d??[],...n}),H.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Pe.activeChain===t){const r=Array.from(Pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&H.setActiveCaipNetwork(s)}}Pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...wA,caipNetwork:r[0]},accountState:zP,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),H.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),H.setRequestedCaipNetworks(r,t.chainNamespace),Ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Pe.chains.get(t);if(n){const o=((r=Pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&H.setActiveCaipNetwork(n.caipNetworks[0]),Pe.chains.set(t,{...n,caipNetworks:a}),H.setRequestedCaipNetworks(a||[],t),a.length===0&&Ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Pe.chains.get(t);n&&(n.networkState={...n.networkState||wA,...e},Pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Pe.chains.get(t);if(r){const s={...r.accountState||zP,...e};Pe.chains.set(t,{...r,accountState:s}),(Pe.chains.size===1||Pe.activeChain===t)&&(e.caipAddress&&(Pe.activeCaipAddress=e.caipAddress),qe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Pe.chains.get(t);if(n){const r={...n.networkState||wA,...e};Pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){H.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Ue.removeConnectorId(n)},setActiveNamespace(t){var r,s;Pe.activeChain=t;const e=t?Pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Pe.activeCaipNetwork=n,H.setChainNetworkData(t,{caipNetwork:n}),Ve.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Dl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Pe.activeChain!==t.chainNamespace&&H.setIsSwitchingNamespace(!0);const e=Pe.chains.get(t.chainNamespace);Pe.activeChain=t.chainNamespace,Pe.activeCaipNetwork=t,H.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Pe.activeCaipAddress=void 0,H.setAccountProp("caipAddress",Pe.activeCaipAddress,t.chainNamespace),e&&qe.replaceState(e.accountState),vn.resetSend(),Dl.set({activeChain:Pe.activeChain,selectedNetworkId:(i=Pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ve.setActiveCaipNetworkId(t.caipNetworkId),!H.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!wt.state.wcBasic&&H.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==H.state.activeChain,n=(s=H.getNetworkData(t))==null?void 0:s.caipNetwork,r=H.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await H.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=H.state.chains.get(H.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Pe.activeCaipNetwork)==null?void 0:o.id)})),r=H.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&ms.close()}catch{Ft.goBack()}ur.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Pe.activeChain,n=Pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Pe.activeChain;if(e&&(n=e),!n)return;const r=(s=Pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return it.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Pe.chains.forEach(e=>{const n=H.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){H.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=H.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Pe.chains.forEach(e=>{const n=H.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Pe.activeCaipNetwork},getActiveCaipAddress(){return Pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=H.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());H.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Pe.activeCaipNetwork,r=H.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Pe.activeChain)return!0;const e=H.getRequestedCaipNetworks(Pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){H.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=QV.caipNetworkIdToNumber((r=Pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Pe.activeChain;if(!e||!t)return!1;const n=H.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Pe.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Pe.activeCaipNetwork)==null?void 0:s.id)||1,n=$n.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){ms.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&$n.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){H.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Pe.activeCaipAddress=void 0,H.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Ue.removeConnectorId(e)},setIsSwitchingNamespace(t){Pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Pe.chains.forEach(s=>{Be.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=H.state.chains.get(t))==null?void 0:e.accountState:qe.state},getNetworkData(t){var n;const e=t||Pe.activeChain;if(e)return(n=H.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=H.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ue.state.filterByNamespace;return(t?[Pe.chains.get(t)]:Array.from(Pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?H.getRequestedCaipNetworks(t):H.getAllRequestedCaipNetworks()}},H=Xo(U_e),B_e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},OQ=it.getBlockchainApiUrl(),Di=or({clientId:null,api:new z_({baseUrl:OQ,clientId:null}),supportedChains:{http:[],ws:[]}}),yt={state:Di,async get(t){const{st:e,sv:n}=yt.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Di.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Di.supportedChains.http.length||await yt.getSupportedNetworks()}catch{return!1}return Di.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await yt.get({path:"v1/supported-chains"});return Di.supportedChains=t,t}catch{return Di.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await yt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ve.getIdentityFromCacheForAddress(t);if(r)return r;const s=await yt.get({path:`/v1/identity/${t}`,params:{sender:H.state.activeCaipAddress?it.getPlainAddress(H.state.activeCaipAddress):void 0}});return Ve.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await yt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?yt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await yt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?yt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await yt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?yt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await yt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Di.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await yt.isNetworkSupported((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?yt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=yt.getSdkProperties();if(!await yt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return yt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await yt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Di.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:$n.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=yt.getSdkProperties();if(!await yt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return yt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=yt.getSdkProperties();if(!await yt.isNetworkSupported((l=H.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Cc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ve.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await yt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ve.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await yt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?yt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await yt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?yt.get({path:`/v1/profile/reverse/${t}`,params:{sender:qe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await yt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?yt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await yt.isNetworkSupported((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Di.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await yt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Di.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await yt.isNetworkSupported((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await yt.get({path:"/v1/onramp/options"})}catch{return B_e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await yt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Di.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await yt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?yt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await yt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Di.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Di.clientId=t,Di.api=new z_({baseUrl:OQ,clientId:t})}},sa=or({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),$_e={state:sa,replaceState(t){t&&Object.assign(sa,Sg(t))},subscribe(t){return H.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return H.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){H.setAccountProp("status",t,e)},getCaipAddress(t){return H.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?it.getPlainAddress(t):void 0;e===H.state.activeChain&&(H.state.activeCaipAddress=t),H.setAccountProp("caipAddress",t,e),H.setAccountProp("address",n,e)},setBalance(t,e,n){H.setAccountProp("balance",t,n),H.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){H.setAccountProp("profileName",t,e)},setProfileImage(t,e){H.setAccountProp("profileImage",t,e)},setUser(t,e){H.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){H.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){H.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){H.setAccountProp("currentTab",t,H.state.activeChain)},setTokenBalance(t,e){t&&H.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){H.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){H.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=H.getAccountProp("addressLabels",n)||new Map;r.set(t,e),H.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=H.getAccountProp("addressLabels",e)||new Map;n.delete(t),H.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){H.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){H.setAccountProp("preferredAccountTypes",{...sa.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){sa.preferredAccountTypes=t},setSocialProvider(t,e){t&&H.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){H.setAccountProp("socialWindow",t?Sg(t):void 0,e)},setFarcasterUrl(t,e){H.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;sa.balanceLoading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?it.getPlainAddress(r):void 0;if(sa.lastRetry&&!it.isAllowedRetry(sa.lastRetry,30*$n.ONE_SEC_MS))return sa.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await yt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return qe.setTokenBalance(c,n),sa.lastRetry=void 0,sa.balanceLoading=!1,c}}catch(a){sa.lastRetry=Date.now(),t==null||t(a),Cc.showError("Token Balance Unavailable")}finally{sa.balanceLoading=!1}return[]},resetAccount(t){H.resetAccount(t)}},qe=Xo($_e),F_e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=H.state.activeCaipNetwork,r=Ft.state.data;if(t.id===(n==null?void 0:n.id))return;const i=qe.getCaipAddress(H.state.activeChain),o=t.chainNamespace!==H.state.activeChain,a=qe.getCaipAddress(t.chainNamespace),l=Ue.getConnectorId(H.state.activeChain)===Be.CONNECTOR_ID.AUTH,u=Be.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ft.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ft.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ft.push("SwitchNetwork",{...r,network:t})}},Mi=or({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),j_e={state:Mi,subscribe(t){return si(Mi,()=>t(Mi))},subscribeKey(t,e){return oi(Mi,t,e)},async open(t){var o,a;const e=qe.state.status==="connected",n=t==null?void 0:t.namespace,r=H.state.activeChain,s=n&&n!==r,i=(o=H.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(wt.state.wcBasic?at.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await at.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Ue.setFilterByNamespace(t==null?void 0:t.namespace),ms.setLoading(!0,n),n&&s){const c=((a=H.getNetworkData(n))==null?void 0:a.caipNetwork)||H.getRequestedCaipNetworks(n)[0];c&&F_e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=H.state.noAdapters;ve.state.manualWCControl||c&&!i?it.isMobile()?Ft.reset("AllWallets"):Ft.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ft.reset(t.view,t.data):i?Ft.reset("Account"):Ft.reset("Connect")}Mi.open=!0,Dl.set({open:!0}),ur.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!H.state.activeCaipAddress;Mi.open&&ur.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Mi.open=!1,Ft.reset("Connect"),ms.clearLoading(),t?e?Ft.replace("Account"):Ft.push("Connect"):Dl.set({open:!1}),wt.resetUri()},setLoading(t,e){e&&Mi.loadingNamespaceMap.set(e,t),Mi.loading=t,Dl.set({loading:t})},clearLoading(){Mi.loadingNamespaceMap.clear(),Mi.loading=!1},shake(){Mi.shake||(Mi.shake=!0,setTimeout(()=>{Mi.shake=!1},500))}},ms=Xo(j_e),hE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},PD={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},W_e={providers:XV,selectedProvider:null,error:null,purchaseCurrency:hE,paymentCurrency:PD,purchaseCurrencies:[hE],paymentCurrencies:[],quotesLoading:!1},on=or(W_e),z_e={state:on,subscribe(t){return si(on,()=>t(on))},subscribeKey(t,e){return oi(on,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=H.state.activeChain===Be.CHAIN.SOLANA?"SOL":"USDC",n=qe.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",mye),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),on.selectedProvider={...t,url:r.toString()}}else on.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=XV.filter(r=>e.includes(r.name));on.providers=n}else on.providers=[]},setPurchaseCurrency(t){on.purchaseCurrency=t},setPaymentCurrency(t){on.paymentCurrency=t},setPurchaseAmount(t){OD.state.purchaseAmount=t},setPaymentAmount(t){OD.state.paymentAmount=t},async getAvailableCurrencies(){const t=await yt.getOnrampOptions();on.purchaseCurrencies=t.purchaseCurrencies,on.paymentCurrencies=t.paymentCurrencies,on.paymentCurrency=t.paymentCurrencies[0]||PD,on.purchaseCurrency=t.purchaseCurrencies[0]||hE,await at.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await at.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;on.quotesLoading=!0;try{const n=await yt.getOnrampQuote({purchaseCurrency:on.purchaseCurrency,paymentCurrency:on.paymentCurrency,amount:((t=on.paymentAmount)==null?void 0:t.toString())||"0",network:(e=on.purchaseCurrency)==null?void 0:e.symbol});return on.quotesLoading=!1,on.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return on.error=n.message,on.quotesLoading=!1,null}finally{on.quotesLoading=!1}},resetState(){on.selectedProvider=null,on.error=null,on.purchaseCurrency=hE,on.paymentCurrency=PD,on.purchaseCurrencies=[hE],on.paymentCurrencies=[],on.paymentAmount=void 0,on.purchaseAmount=void 0,on.quotesLoading=!1}},OD=Xo(z_e),y4=2147483648,H_e={convertEVMChainIdToCoinType(t){if(t>=y4)throw new Error("Invalid chainId");return(y4|t)>>>0}},ia=or({suggestions:[],loading:!1}),G_e={state:ia,subscribe(t){return si(ia,()=>t(ia))},subscribeKey(t,e){return oi(ia,t,e)},async resolveName(t){var e,n;try{return await yt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await yt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ia.loading=!0,ia.suggestions=[];const e=await yt.getEnsNameSuggestions(t);return ia.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ia.suggestions}catch(e){const n=fE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ia.loading=!1}},async getNamesForAddress(t){try{if(!H.state.activeCaipNetwork)return[];const n=Ve.getEnsFromCacheForAddress(t);if(n)return n;const r=await yt.reverseLookupEnsName({address:t});return Ve.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=fE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=H.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=qe.state.address,r=Ue.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");ia.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ft.pushTransactionStack({onCancel(){Ft.replace("RegisterAccountName")}});const i=await wt.signMessage(s);ia.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=H_e.convertEVMChainIdToCoinType(Number(o));await yt.registerEnsName({coinType:a,address:n,signature:i,message:s}),qe.setProfileName(t,e.chainNamespace),Ft.replace("RegisterAccountNameSuccess")}catch(s){const i=fE.parseEnsApiError(s,`Error registering name ${t}`);throw Ft.replace("RegisterAccountName"),new Error(i)}finally{ia.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},fE=Xo(G_e);var dU={exports:{}},Gy=typeof Reflect=="object"?Reflect:null,w4=Gy&&typeof Gy.apply=="function"?Gy.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},vS;Gy&&typeof Gy.ownKeys=="function"?vS=Gy.ownKeys:Object.getOwnPropertySymbols?vS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:vS=function(e){return Object.getOwnPropertyNames(e)};function q_e(t){console&&console.warn&&console.warn(t)}var kQ=Number.isNaN||function(e){return e!==e};function jn(){jn.init.call(this)}dU.exports=jn;dU.exports.once=Q_e;jn.EventEmitter=jn;jn.prototype._events=void 0;jn.prototype._eventsCount=0;jn.prototype._maxListeners=void 0;var b4=10;function aT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jn,"defaultMaxListeners",{enumerable:!0,get:function(){return b4},set:function(t){if(typeof t!="number"||t<0||kQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");b4=t}});jn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||kQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function DQ(t){return t._maxListeners===void 0?jn.defaultMaxListeners:t._maxListeners}jn.prototype.getMaxListeners=function(){return DQ(this)};jn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")w4(c,this,n);else for(var l=c.length,u=$Q(c,l),r=0;r<l;++r)w4(u[r],this,n);return!0};function MQ(t,e,n,r){var s,i,o;if(aT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=DQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,q_e(a)}return t}jn.prototype.addListener=function(e,n){return MQ(this,e,n,!1)};jn.prototype.on=jn.prototype.addListener;jn.prototype.prependListener=function(e,n){return MQ(this,e,n,!0)};function V_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function LQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=V_e.bind(r);return s.listener=n,r.wrapFn=s,s}jn.prototype.once=function(e,n){return aT(n),this.on(e,LQ(this,e,n)),this};jn.prototype.prependOnceListener=function(e,n){return aT(n),this.prependListener(e,LQ(this,e,n)),this};jn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(aT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():K_e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};jn.prototype.off=jn.prototype.removeListener;jn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function UQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?Y_e(s):$Q(s,s.length)}jn.prototype.listeners=function(e){return UQ(this,e,!0)};jn.prototype.rawListeners=function(e){return UQ(this,e,!1)};jn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):BQ.call(t,e)};jn.prototype.listenerCount=BQ;function BQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}jn.prototype.eventNames=function(){return this._eventsCount>0?vS(this._events):[]};function $Q(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function K_e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Y_e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Q_e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}FQ(t,e,i,{once:!0}),e!=="error"&&J_e(t,s,{once:!0})})}function J_e(t,e,n){typeof t.on=="function"&&FQ(t,"error",e,n)}function FQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ja=dU.exports;const hU=Qg(ja);var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kD=function(t,e){return kD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},kD(t,e)};function Z_e(t,e){kD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var DD=function(){return DD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},DD.apply(this,arguments)};function X_e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function e1e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function t1e(t,e){return function(n,r){e(n,r,t)}}function n1e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function r1e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function s1e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function i1e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function o1e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function MD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function a1e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jQ(arguments[e]));return t}function c1e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function AC(t){return this instanceof AC?(this.v=t,this):new AC(t)}function l1e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof AC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function u1e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:AC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function d1e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof MD=="function"?MD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function h1e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function f1e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p1e(t){return t&&t.__esModule?t:{default:t}}function g1e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function m1e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const y1e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return DD},__asyncDelegator:u1e,__asyncGenerator:l1e,__asyncValues:d1e,__await:AC,__awaiter:r1e,__classPrivateFieldGet:g1e,__classPrivateFieldSet:m1e,__createBinding:i1e,__decorate:e1e,__exportStar:o1e,__extends:Z_e,__generator:s1e,__importDefault:p1e,__importStar:f1e,__makeTemplateObject:h1e,__metadata:n1e,__param:t1e,__read:jQ,__rest:X_e,__spread:a1e,__spreadArrays:c1e,__values:MD},Symbol.toStringTag,{value:"Module"})),cT=VW(y1e);var HP={},tv={},v4;function w1e(){if(v4)return tv;v4=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return tv.delay=t,tv}var Ff={},GP={},jf={},E4;function b1e(){return E4||(E4=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.ONE_THOUSAND=jf.ONE_HUNDRED=void 0,jf.ONE_HUNDRED=100,jf.ONE_THOUSAND=1e3),jf}var qP={},C4;function v1e(){return C4||(C4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(qP)),qP}var _4;function WQ(){return _4||(_4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=cT;e.__exportStar(b1e(),t),e.__exportStar(v1e(),t)}(GP)),GP}var A4;function E1e(){if(A4)return Ff;A4=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.fromMiliseconds=Ff.toMiliseconds=void 0;const t=WQ();function e(r){return r*t.ONE_THOUSAND}Ff.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ff.fromMiliseconds=n,Ff}var S4;function C1e(){return S4||(S4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=cT;e.__exportStar(w1e(),t),e.__exportStar(E1e(),t)}(HP)),HP}var km={},x4;function _1e(){if(x4)return km;x4=1,Object.defineProperty(km,"__esModule",{value:!0}),km.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return km.Watch=t,km.default=t,km}var VP={},nv={},I4;function A1e(){if(I4)return nv;I4=1,Object.defineProperty(nv,"__esModule",{value:!0}),nv.IWatch=void 0;class t{}return nv.IWatch=t,nv}var N4;function S1e(){return N4||(N4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),cT.__exportStar(A1e(),t)}(VP)),VP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=cT;e.__exportStar(C1e(),t),e.__exportStar(_1e(),t),e.__exportStar(S1e(),t),e.__exportStar(WQ(),t)})(_e);class lm{}let x1e=class extends lm{constructor(e){super()}};const T4=_e.FIVE_SECONDS,um={pulse:"heartbeat_pulse"};let I1e=class zQ extends x1e{constructor(e){super(e),this.events=new ja.EventEmitter,this.interval=T4,this.interval=(e==null?void 0:e.interval)||T4}static async init(e){const n=new zQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(um.pulse)}};const N1e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,T1e=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,R1e=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function P1e(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){O1e(t);return}return e}function O1e(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function bA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!R1e.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(N1e.test(t)||T1e.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,P1e)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function dm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function HQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=dm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let KP;function n1(){return KP||(KP=HQ("keyval-store","keyval")),KP}function R4(t,e=n1()){return e("readonly",n=>dm(n.get(t)))}function k1e(t,e,n=n1()){return n("readwrite",r=>(r.put(e,t),dm(r.transaction)))}function D1e(t,e=n1()){return e("readwrite",n=>(n.delete(t),dm(n.transaction)))}function M1e(t=n1()){return t("readwrite",e=>(e.clear(),dm(e.transaction)))}function L1e(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},dm(t.transaction)}function U1e(t=n1()){return t("readonly",e=>{if(e.getAllKeys)return dm(e.getAllKeys());const n=[];return L1e(e,r=>n.push(r.key)).then(()=>n)})}const B1e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),$1e=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function kg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return $1e(t)}catch{return t}}function ld(t){return typeof t=="string"?t:B1e(t)||""}function F1e(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var j1e=W1e;function W1e(t,e,n){var r=n&&n.stringify||F1e,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const P4=j1e;var sy=Ll;const SC=Z1e().console||{},z1e={mapHttpRequest:vA,mapHttpResponse:vA,wrapRequestSerializer:YP,wrapResponseSerializer:YP,wrapErrorSerializer:YP,req:vA,res:vA,err:K1e};function H1e(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ll(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||SC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=H1e(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=xC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Y1e(t)};c.levels=Ll.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=xC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=LD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Dm(l,c,"error","log"),Dm(l,c,"fatal","error"),Dm(l,c,"warn","error"),Dm(l,c,"info","log"),Dm(l,c,"debug","log"),Dm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var m=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,lT([p],b,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Mm(A,p,"error"),this.fatal=Mm(A,p,"fatal"),this.warn=Mm(A,p,"warn"),this.info=Mm(A,p,"info"),this.debug=Mm(A,p,"debug"),this.trace=Mm(A,p,"trace"),m&&(this.serializers=m,this._serialize=b),e&&(this._logEvent=LD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Ll.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ll.stdSerializers=z1e;Ll.stdTimeFunctions=Object.assign({},{nullTime:GQ,epochTime:qQ,unixTime:Q1e,isoTime:J1e});function Dm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?xC:s[n]?s[n]:SC[n]||SC[r]||xC,G1e(t,e,n)}function G1e(t,e,n){!t.transmit&&e[n]===xC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===SC?SC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&lT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,q1e(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ll.levels.values[l],d=Ll.levels.values[n];if(d<u)return;V1e(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Ll.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function q1e(t,e,n,r){t._serialize&&lT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Ll.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?P4(s.shift(),s):void 0}else typeof i=="string"&&(i=P4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function lT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Ll.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Mm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function V1e(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;lT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=LD(c)}function LD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function K1e(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Y1e(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?GQ:qQ}function vA(){return{}}function YP(t){return t}function xC(){}function GQ(){return!1}function qQ(){return Date.now()}function Q1e(){return Math.round(Date.now()/1e3)}function J1e(){return new Date(Date.now()).toISOString()}function Z1e(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const r1=Qg(sy),X1e={level:"info"},s1="custom_context",fU=1e3*1024;let eAe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},O4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new eAe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},VQ=class{constructor(e,n=fU){this.level=e??"error",this.levelValue=sy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new O4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===sy.levels.values.error?console.error(e):n===sy.levels.values.warn?console.warn(e):n===sy.levels.values.debug?console.debug(e):n===sy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ld({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new O4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ld({extraMetadata:e})),new Blob(n,{type:"application/json"})}},tAe=class{constructor(e,n=fU){this.baseChunkLogger=new VQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},nAe=class{constructor(e,n=fU){this.baseChunkLogger=new VQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var rAe=Object.defineProperty,sAe=Object.defineProperties,iAe=Object.getOwnPropertyDescriptors,k4=Object.getOwnPropertySymbols,oAe=Object.prototype.hasOwnProperty,aAe=Object.prototype.propertyIsEnumerable,D4=(t,e,n)=>e in t?rAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jx=(t,e)=>{for(var n in e||(e={}))oAe.call(e,n)&&D4(t,n,e[n]);if(k4)for(var n of k4(e))aAe.call(e,n)&&D4(t,n,e[n]);return t},Zx=(t,e)=>sAe(t,iAe(e));function hm(t){return Zx(Jx({},t),{level:(t==null?void 0:t.level)||X1e.level})}function cAe(t,e=s1){return t[e]||""}function lAe(t,e,n=s1){return t[n]=e,t}function yo(t,e=s1){let n="";return typeof t.bindings>"u"?n=cAe(t,e):n=t.bindings().context||"",n}function uAe(t,e,n=s1){const r=yo(t,n);return r.trim()?`${r}/${e}`:e}function Fs(t,e,n=s1){const r=uAe(t,e,n),s=t.child({context:r});return lAe(s,r,n)}function dAe(t){var e,n;const r=new tAe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:r1(Zx(Jx({},t.opts),{level:"trace",browser:Zx(Jx({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function hAe(t){var e;const n=new nAe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:r1(Zx(Jx({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function uT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?dAe(t):hAe(t)}function fAe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function KQ(t,...e){if(!fAe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function M4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pAe(t,e){KQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Lm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const QP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function gAe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function YQ(t){return typeof t=="string"&&(t=gAe(t)),KQ(t),t}let mAe=class{clone(){return this._cloneInto()}};function yAe(t){const e=r=>t().update(YQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function QQ(t=32){if(Lm&&typeof Lm.getRandomValues=="function")return Lm.getRandomValues(new Uint8Array(t));if(Lm&&typeof Lm.randomBytes=="function")return Lm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function wAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let bAe=class extends mAe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=QP(this.buffer)}update(e){M4(this);const{view:n,buffer:r,blockLen:s}=this;e=YQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=QP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){M4(this),pAe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;wAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=QP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const EA=BigInt(2**32-1),UD=BigInt(32);function JQ(t,e=!1){return e?{h:Number(t&EA),l:Number(t>>UD&EA)}:{h:Number(t>>UD&EA)|0,l:Number(t&EA)|0}}function vAe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=JQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const EAe=(t,e)=>BigInt(t>>>0)<<UD|BigInt(e>>>0),CAe=(t,e,n)=>t>>>n,_Ae=(t,e,n)=>t<<32-n|e>>>n,AAe=(t,e,n)=>t>>>n|e<<32-n,SAe=(t,e,n)=>t<<32-n|e>>>n,xAe=(t,e,n)=>t<<64-n|e>>>n-32,IAe=(t,e,n)=>t>>>n-32|e<<64-n,NAe=(t,e)=>e,TAe=(t,e)=>t,RAe=(t,e,n)=>t<<n|e>>>32-n,PAe=(t,e,n)=>e<<n|t>>>32-n,OAe=(t,e,n)=>e<<n-32|t>>>64-n,kAe=(t,e,n)=>t<<n-32|e>>>64-n;function DAe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const MAe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),LAe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,UAe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),BAe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,$Ae=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),FAe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Bt={fromBig:JQ,split:vAe,toBig:EAe,shrSH:CAe,shrSL:_Ae,rotrSH:AAe,rotrSL:SAe,rotrBH:xAe,rotrBL:IAe,rotr32H:NAe,rotr32L:TAe,rotlSH:RAe,rotlSL:PAe,rotlBH:OAe,rotlBL:kAe,add:DAe,add3L:MAe,add3H:LAe,add4L:UAe,add4H:BAe,add5H:FAe,add5L:$Ae},[jAe,WAe]=Bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Pd=new Uint32Array(80),Od=new Uint32Array(80);let zAe=class extends bAe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Pd[v]=e.getUint32(n),Od[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Pd[v-15]|0,C=Od[v-15]|0,T=Bt.rotrSH(A,C,1)^Bt.rotrSH(A,C,8)^Bt.shrSH(A,C,7),x=Bt.rotrSL(A,C,1)^Bt.rotrSL(A,C,8)^Bt.shrSL(A,C,7),N=Pd[v-2]|0,S=Od[v-2]|0,D=Bt.rotrSH(N,S,19)^Bt.rotrBH(N,S,61)^Bt.shrSH(N,S,6),P=Bt.rotrSL(N,S,19)^Bt.rotrBL(N,S,61)^Bt.shrSL(N,S,6),$=Bt.add4L(x,P,Od[v-7],Od[v-16]),G=Bt.add4H($,T,D,Pd[v-7],Pd[v-16]);Pd[v]=G|0,Od[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=Bt.rotrSH(d,h,14)^Bt.rotrSH(d,h,18)^Bt.rotrBH(d,h,41),C=Bt.rotrSL(d,h,14)^Bt.rotrSL(d,h,18)^Bt.rotrBL(d,h,41),T=d&f^~d&g,x=h&p^~h&w,N=Bt.add5L(b,C,x,WAe[v],Od[v]),S=Bt.add5H(N,m,A,T,jAe[v],Pd[v]),D=N|0,P=Bt.rotrSH(r,s,28)^Bt.rotrBH(r,s,34)^Bt.rotrBH(r,s,39),$=Bt.rotrSL(r,s,28)^Bt.rotrBL(r,s,34)^Bt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Bt.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Bt.add3L(D,$,W);r=Bt.add3H(I,S,P,G),s=I|0}({h:r,l:s}=Bt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Bt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Bt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Bt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Bt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Bt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Bt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:m,l:b}=Bt.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,m,b)}roundClean(){Pd.fill(0),Od.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const HAe=yAe(()=>new zAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pU=BigInt(0),ZQ=BigInt(1),GAe=BigInt(2);function gU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mU(t){if(!gU(t))throw new Error("Uint8Array expected")}function JP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const qAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yU(t){mU(t);let e="";for(let n=0;n<t.length;n++)e+=qAe[t[n]];return e}function XQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?pU:BigInt("0x"+t)}const su={_0:48,_9:57,A:65,F:70,a:97,f:102};function L4(t){if(t>=su._0&&t<=su._9)return t-su._0;if(t>=su.A&&t<=su.F)return t-(su.A-10);if(t>=su.a&&t<=su.f)return t-(su.a-10)}function eJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=L4(t.charCodeAt(i)),a=L4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function VAe(t){return XQ(yU(t))}function ES(t){return mU(t),XQ(yU(Uint8Array.from(t).reverse()))}function tJ(t,e){return eJ(t.toString(16).padStart(e*2,"0"))}function BD(t,e){return tJ(t,e).reverse()}function iu(t,e,n){let r;if(typeof e=="string")try{r=eJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(gU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function U4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];mU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const ZP=t=>typeof t=="bigint"&&pU<=t;function KAe(t,e,n){return ZP(t)&&ZP(e)&&ZP(n)&&e<=t&&t<n}function rv(t,e,n,r){if(!KAe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function YAe(t){let e;for(e=0;t>pU;t>>=ZQ,e+=1);return e}const QAe=t=>(GAe<<BigInt(t-1))-ZQ,JAe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||gU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function wU(t,e,n={}){const r=(s,i,o)=>{const a=JAe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function B4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ys=BigInt(0),Or=BigInt(1),ip=BigInt(2),ZAe=BigInt(3),$D=BigInt(4),$4=BigInt(5),F4=BigInt(8);function Vr(t,e){const n=t%e;return n>=ys?n:e+n}function XAe(t,e,n){if(e<ys)throw new Error("invalid exponent, negatives unsupported");if(n<=ys)throw new Error("invalid modulus");if(n===Or)return ys;let r=Or;for(;e>ys;)e&Or&&(r=r*t%n),t=t*t%n,e>>=Or;return r}function Vc(t,e,n){let r=t;for(;e-- >ys;)r*=r,r%=n;return r}function j4(t,e){if(t===ys)throw new Error("invert: expected non-zero number");if(e<=ys)throw new Error("invert: expected positive modulus, got "+e);let n=Vr(t,e),r=e,s=ys,i=Or;for(;n!==ys;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Or)throw new Error("invert: does not exist");return Vr(s,e)}function eSe(t){const e=(t-Or)/ip;let n,r,s;for(n=t-Or,r=0;n%ip===ys;n/=ip,r++);for(s=ip;s<t&&XAe(s,e,t)!==t-Or;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Or)/$D;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Or)/ip;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Or<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function tSe(t){if(t%$D===ZAe){const e=(t+Or)/$D;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%F4===$4){const e=(t-$4)/F4;return function(n,r){const s=n.mul(r,ip),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ip),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return eSe(t)}const nSe=(t,e)=>(Vr(t,e)&Or)===Or,rSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sSe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=rSe.reduce((r,s)=>(r[s]="function",r),e);return wU(t,n)}function iSe(t,e,n){if(n<ys)throw new Error("invalid exponent, negatives unsupported");if(n===ys)return t.ONE;if(n===Or)return e;let r=t.ONE,s=e;for(;n>ys;)n&Or&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Or;return r}function oSe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function nJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function rJ(t,e,n=!1,r={}){if(t<=ys)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=nJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:QAe(s),ZERO:ys,ONE:Or,create:c=>Vr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ys<=c&&c<t},is0:c=>c===ys,isOdd:c=>(c&Or)===Or,neg:c=>Vr(-c,t),eql:(c,l)=>c===l,sqr:c=>Vr(c*c,t),add:(c,l)=>Vr(c+l,t),sub:(c,l)=>Vr(c-l,t),mul:(c,l)=>Vr(c*l,t),pow:(c,l)=>iSe(a,c,l),div:(c,l)=>Vr(c*j4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>j4(c,t),sqrt:r.sqrt||(c=>(o||(o=tSe(t)),o(a,c))),invertBatch:c=>oSe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?BD(c,i):tJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?ES(c):VAe(c)}});return Object.freeze(a)}const W4=BigInt(0),CA=BigInt(1);function XP(t,e){const n=e.negate();return t?n:e}function sJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function eO(t,e){sJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function aSe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function cSe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const tO=new WeakMap,iJ=new WeakMap;function nO(t){return iJ.get(t)||1}function lSe(t,e){return{constTimeNegate:XP,hasPrecomputes(n){return nO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>W4;)r&CA&&(s=s.add(i)),i=i.double(),r>>=CA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=eO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=eO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=CA);const g=f,w=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(XP(m,r[g])):a=a.add(XP(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=eO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===W4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=CA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=tO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&tO.set(r,s(i))),i},wNAFCached(n,r,s){const i=nO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=nO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){sJ(r,e),iJ.set(n,r),tO.delete(n)}}}function uSe(t,e,n,r){if(aSe(n,t),cSe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=YAe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function dSe(t){return sSe(t.Fp),wU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Za=BigInt(0),Li=BigInt(1),_A=BigInt(2),hSe=BigInt(8),fSe={zip215:!0};function pSe(t){const e=dSe(t);return wU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function gSe(t){const e=pSe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=_A<<BigInt(a*8)-Li,u=n.create,d=rJ(e.n,e.nBitLength),h=e.uvRatio||((I,R)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(R))}}catch{return{isValid:!1,value:Za}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,R,B)=>{if(JP("phflag",B),R.length||B)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,R){rv("coordinate "+I,R,Za,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const m=B4((I,R)=>{const{ex:B,ey:O,ez:M}=I,j=I.is0();R==null&&(R=j?hSe:n.inv(M));const V=u(B*R),se=u(O*R),ie=u(M*R);if(j)return{x:Za,y:Li};if(ie!==Li)throw new Error("invZ was invalid");return{x:V,y:se}}),b=B4(I=>{const{a:R,d:B}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:O,ey:M,ez:j,et:V}=I,se=u(O*O),ie=u(M*M),Q=u(j*j),te=u(Q*Q),pe=u(se*R),Ze=u(Q*u(pe+ie)),Xe=u(te+u(B*u(se*ie)));if(Ze!==Xe)throw new Error("bad point: equation left != right (1)");const We=u(O*M),mt=u(j*V);if(We!==mt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,B,O,M){this.ex=R,this.ey=B,this.ez=O,this.et=M,g("x",R),g("y",B),g("z",O),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:B,y:O}=R||{};return g("x",B),g("y",O),new v(B,O,Li,u(B*O))}static normalizeZ(R){const B=n.invertBatch(R.map(O=>O.ez));return R.map((O,M)=>O.toAffine(B[M])).map(v.fromAffine)}static msm(R,B){return uSe(v,d,R,B)}_setWindowSize(R){T.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:B,ey:O,ez:M}=this,{ex:j,ey:V,ez:se}=R,ie=u(B*se),Q=u(j*M),te=u(O*se),pe=u(V*M);return ie===Q&&te===pe}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:B,ey:O,ez:M}=this,j=u(B*B),V=u(O*O),se=u(_A*u(M*M)),ie=u(R*j),Q=B+O,te=u(u(Q*Q)-j-V),pe=ie+V,Ze=pe-se,Xe=ie-V,We=u(te*Ze),mt=u(pe*Xe),Ot=u(te*Xe),ln=u(Ze*pe);return new v(We,mt,ln,Ot)}add(R){w(R);const{a:B,d:O}=e,{ex:M,ey:j,ez:V,et:se}=this,{ex:ie,ey:Q,ez:te,et:pe}=R;if(B===BigInt(-1)){const et=u((j-M)*(Q+ie)),ht=u((j+M)*(Q-ie)),vt=u(ht-et);if(vt===Za)return this.double();const qn=u(V*_A*pe),dr=u(se*_A*te),ot=dr+qn,rn=ht+et,Wt=dr-qn,Qe=u(ot*vt),Dn=u(rn*Wt),zc=u(ot*Wt),Lr=u(vt*rn);return new v(Qe,Dn,Lr,zc)}const Ze=u(M*ie),Xe=u(j*Q),We=u(se*O*pe),mt=u(V*te),Ot=u((M+j)*(ie+Q)-Ze-Xe),ln=mt-We,X=mt+We,ce=u(Xe-B*Ze),he=u(Ot*ln),me=u(X*ce),be=u(Ot*ce),ct=u(ln*X);return new v(he,me,ct,be)}subtract(R){return this.add(R.negate())}wNAF(R){return T.wNAFCached(this,R,v.normalizeZ)}multiply(R){const B=R;rv("scalar",B,Li,r);const{p:O,f:M}=this.wNAF(B);return v.normalizeZ([O,M])[0]}multiplyUnsafe(R,B=v.ZERO){const O=R;return rv("scalar",O,Za,r),O===Za?C:this.is0()||O===Li?this:T.wNAFCachedUnsafe(this,O,v.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(R){return m(this,R)}clearCofactor(){const{h:R}=e;return R===Li?this:this.multiplyUnsafe(R)}static fromHex(R,B=!1){const{d:O,a:M}=e,j=n.BYTES;R=iu("pointHex",R,j),JP("zip215",B);const V=R.slice(),se=R[j-1];V[j-1]=se&-129;const ie=ES(V),Q=B?l:n.ORDER;rv("pointHex.y",ie,Za,Q);const te=u(ie*ie),pe=u(te-Li),Ze=u(O*te-M);let{isValid:Xe,value:We}=h(pe,Ze);if(!Xe)throw new Error("Point.fromHex: invalid y coordinate");const mt=(We&Li)===Li,Ot=(se&128)!==0;if(!B&&We===Za&&Ot)throw new Error("Point.fromHex: x=0 and x_0=1");return Ot!==mt&&(We=u(-We)),v.fromAffine({x:We,y:ie})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:B}=this.toAffine(),O=BD(B,n.BYTES);return O[O.length-1]|=R&Li?128:0,O}toHex(){return yU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Li,u(e.Gx*e.Gy)),v.ZERO=new v(Za,Li,Li,Za);const{BASE:A,ZERO:C}=v,T=lSe(v,a*8);function x(I){return Vr(I,r)}function N(I){return x(ES(I))}function S(I){const R=n.BYTES;I=iu("private key",I,R);const B=iu("hashed private key",i(I),2*R),O=f(B.slice(0,R)),M=B.slice(R,2*R),j=N(O),V=A.multiply(j),se=V.toRawBytes();return{head:O,prefix:M,scalar:j,point:V,pointBytes:se}}function D(I){return S(I).pointBytes}function P(I=new Uint8Array,...R){const B=U4(...R);return N(i(p(B,iu("context",I),!!s)))}function $(I,R,B={}){I=iu("message",I),s&&(I=s(I));const{prefix:O,scalar:M,pointBytes:j}=S(R),V=P(B.context,O,I),se=A.multiply(V).toRawBytes(),ie=P(B.context,se,j,I),Q=x(V+ie*M);rv("signature.s",Q,Za,r);const te=U4(se,BD(Q,n.BYTES));return iu("result",te,n.BYTES*2)}const G=fSe;function W(I,R,B,O=G){const{context:M,zip215:j}=O,V=n.BYTES;I=iu("signature",I,2*V),R=iu("message",R),B=iu("publicKey",B,V),j!==void 0&&JP("zip215",j),s&&(R=s(R));const se=ES(I.slice(V,2*V));let ie,Q,te;try{ie=v.fromHex(B,j),Q=v.fromHex(I.slice(0,V),j),te=A.multiplyUnsafe(se)}catch{return!1}if(!j&&ie.isSmallOrder())return!1;const pe=P(M,Q.toRawBytes(),ie.toRawBytes(),R);return Q.add(ie.multiplyUnsafe(pe)).subtract(te).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:$,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,R=v.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const bU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),z4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const mSe=BigInt(1),H4=BigInt(2);BigInt(3);const ySe=BigInt(5),wSe=BigInt(8);function bSe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=bU,o=t*t%i*t%i,a=Vc(o,H4,i)*o%i,c=Vc(a,mSe,i)*t%i,l=Vc(c,ySe,i)*c%i,u=Vc(l,e,i)*l%i,d=Vc(u,n,i)*u%i,h=Vc(d,r,i)*d%i,f=Vc(h,s,i)*h%i,p=Vc(f,s,i)*h%i,g=Vc(p,e,i)*l%i;return{pow_p_5_8:Vc(g,H4,i)*t%i,b2:o}}function vSe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ESe(t,e){const n=bU,r=Vr(e*e*e,n),s=Vr(r*r*e,n),i=bSe(t*s).pow_p_5_8;let o=Vr(t*r*i,n);const a=Vr(e*o*o,n),c=o,l=Vr(o*z4,n),u=a===t,d=a===Vr(-t,n),h=a===Vr(-t*z4,n);return u&&(o=c),(d||h)&&(o=l),nSe(o,n)&&(o=Vr(-o,n)),{isValid:u||d,value:o}}const CSe=rJ(bU,void 0,!0),_Se={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:CSe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:wSe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:HAe,randomBytes:QQ,adjustScalarBytes:vSe,uvRatio:ESe},oJ=gSe(_Se),ASe="EdDSA",SSe="JWT",Xx=".",dT="base64url",aJ="utf8",cJ="utf8",xSe=":",ISe="did",NSe="key",G4="base58btc",TSe="z",RSe="K36",PSe=32;function vU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function lJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?vU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function uJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=lJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return vU(n)}function OSe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var kSe=OSe,DSe=kSe;const dJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},MSe=t=>new TextEncoder().encode(t),LSe=t=>new TextDecoder().decode(t);let USe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},BSe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hJ(this,e)}},$Se=class{constructor(e){this.decoders=e}or(e){return hJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const hJ=(t,e)=>new $Se({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let FSe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new USe(e,n,r),this.decoder=new BSe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const hT=({name:t,prefix:e,encode:n,decode:r})=>new FSe(t,e,n,r),i1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=DSe(n,e);return hT({prefix:t,name:e,encode:r,decode:i=>dJ(s(i))})},jSe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},WSe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>hT({prefix:e,name:t,encode(s){return WSe(s,r,n)},decode(s){return jSe(s,r,n,t)}}),zSe=hT({prefix:"\0",name:"identity",encode:t=>LSe(t),decode:t=>MSe(t)});var HSe=Object.freeze({__proto__:null,identity:zSe});const GSe=js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qSe=Object.freeze({__proto__:null,base2:GSe});const VSe=js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var KSe=Object.freeze({__proto__:null,base8:VSe});const YSe=i1({prefix:"9",name:"base10",alphabet:"0123456789"});var QSe=Object.freeze({__proto__:null,base10:YSe});const JSe=js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ZSe=js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var XSe=Object.freeze({__proto__:null,base16:JSe,base16upper:ZSe});const exe=js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),txe=js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nxe=js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rxe=js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sxe=js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ixe=js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oxe=js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),axe=js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cxe=js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lxe=Object.freeze({__proto__:null,base32:exe,base32upper:txe,base32pad:nxe,base32padupper:rxe,base32hex:sxe,base32hexupper:ixe,base32hexpad:oxe,base32hexpadupper:axe,base32z:cxe});const uxe=i1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dxe=i1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var hxe=Object.freeze({__proto__:null,base36:uxe,base36upper:dxe});const fxe=i1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pxe=i1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var gxe=Object.freeze({__proto__:null,base58btc:fxe,base58flickr:pxe});const mxe=js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yxe=js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wxe=js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bxe=js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var vxe=Object.freeze({__proto__:null,base64:mxe,base64pad:yxe,base64url:wxe,base64urlpad:bxe});const fJ=Array.from(""),Exe=fJ.reduce((t,e,n)=>(t[n]=e,t),[]),Cxe=fJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function _xe(t){return t.reduce((e,n)=>(e+=Exe[n],e),"")}function Axe(t){const e=[];for(const n of t){const r=Cxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Sxe=hT({prefix:"",name:"base256emoji",encode:_xe,decode:Axe});var xxe=Object.freeze({__proto__:null,base256emoji:Sxe}),Ixe=pJ,q4=128,Nxe=-128,Txe=Math.pow(2,31);function pJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Txe;)e[n++]=t&255|q4,t/=128;for(;t&Nxe;)e[n++]=t&255|q4,t>>>=7;return e[n]=t|0,pJ.bytes=n-r+1,e}var Rxe=FD,Pxe=128,V4=127;function FD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw FD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&V4)<<s:(o&V4)*Math.pow(2,s),s+=7}while(o>=Pxe);return FD.bytes=i-r,n}var Oxe=Math.pow(2,7),kxe=Math.pow(2,14),Dxe=Math.pow(2,21),Mxe=Math.pow(2,28),Lxe=Math.pow(2,35),Uxe=Math.pow(2,42),Bxe=Math.pow(2,49),$xe=Math.pow(2,56),Fxe=Math.pow(2,63),jxe=function(t){return t<Oxe?1:t<kxe?2:t<Dxe?3:t<Mxe?4:t<Lxe?5:t<Uxe?6:t<Bxe?7:t<$xe?8:t<Fxe?9:10},Wxe={encode:Ixe,decode:Rxe,encodingLength:jxe},gJ=Wxe;const K4=(t,e,n=0)=>(gJ.encode(t,e,n),e),Y4=t=>gJ.encodingLength(t),jD=(t,e)=>{const n=e.byteLength,r=Y4(t),s=r+Y4(n),i=new Uint8Array(s+n);return K4(t,i,0),K4(n,i,r),i.set(e,s),new zxe(t,n,e,i)};let zxe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const mJ=({name:t,code:e,encode:n})=>new Hxe(t,e,n);let Hxe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?jD(this.code,n):n.then(r=>jD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const yJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Gxe=mJ({name:"sha2-256",code:18,encode:yJ("SHA-256")}),qxe=mJ({name:"sha2-512",code:19,encode:yJ("SHA-512")});var Vxe=Object.freeze({__proto__:null,sha256:Gxe,sha512:qxe});const wJ=0,Kxe="identity",bJ=dJ,Yxe=t=>jD(wJ,bJ(t)),Qxe={code:wJ,name:Kxe,encode:bJ,digest:Yxe};var Jxe=Object.freeze({__proto__:null,identity:Qxe});new TextEncoder,new TextDecoder;const Q4={...HSe,...qSe,...KSe,...QSe,...XSe,...lxe,...hxe,...gxe,...vxe,...xxe};({...Vxe,...Jxe});function vJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const J4=vJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),rO=vJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=lJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),EJ={utf8:J4,"utf-8":J4,hex:Q4.base16,latin1:rO,ascii:rO,binary:rO,...Q4};function fT(t,e="utf8"){const n=EJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ub(t,e="utf8"){const n=EJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?vU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Z4(t){return kg(fT(ub(t,dT),aJ))}function eI(t){return fT(ub(ld(t),aJ),dT)}function CJ(t){const e=ub(RSe,G4),n=TSe+fT(uJ([e,t]),G4);return[ISe,NSe,n].join(xSe)}function Zxe(t){return fT(t,dT)}function Xxe(t){return ub(t,dT)}function eIe(t){return ub([eI(t.header),eI(t.payload)].join(Xx),cJ)}function tIe(t){return[eI(t.header),eI(t.payload),Zxe(t.signature)].join(Xx)}function WD(t){const e=t.split(Xx),n=Z4(e[0]),r=Z4(e[1]),s=Xxe(e[2]),i=ub(e.slice(0,2).join(Xx),cJ);return{header:n,payload:r,signature:s,data:i}}function X4(t=QQ(PSe)){const e=oJ.getPublicKey(t);return{secretKey:uJ([t,e]),publicKey:e}}async function nIe(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:ASe,typ:SSe},o=CJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=eIe({header:i,payload:c}),u=oJ.sign(l,r.secretKey.slice(0,32));return tIe({header:i,payload:c,signature:u})}var eF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},rIe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),sIe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),iIe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),oIe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),aIe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),cIe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lIe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,tF=3,uIe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",cIe]],nF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dIe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new aIe:typeof navigator<"u"?fIe(navigator.userAgent):gIe()}function hIe(t){return t!==""&&uIe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function fIe(t){var e=hIe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new oIe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<tF&&(s=eF(eF([],s,!0),mIe(tF-s.length),!0)):s=[];var i=s.join("."),o=pIe(t),a=lIe.exec(t);return a&&a[1]?new iIe(n,i,o,a[1]):new rIe(n,i,o)}function pIe(t){for(var e=0,n=nF.length;e<n;e++){var r=nF[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function gIe(){var t=typeof process<"u"&&process.version;return t?new sIe(process.version.slice(1)):null}function mIe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.getLocalStorage=Qn.getLocalStorageOrThrow=Qn.getCrypto=Qn.getCryptoOrThrow=_J=Qn.getLocation=Qn.getLocationOrThrow=EU=Qn.getNavigator=Qn.getNavigatorOrThrow=Dg=Qn.getDocument=Qn.getDocumentOrThrow=Qn.getFromWindowOrThrow=Qn.getFromWindow=void 0;function fm(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Qn.getFromWindow=fm;function db(t){const e=fm(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Qn.getFromWindowOrThrow=db;function yIe(){return db("document")}Qn.getDocumentOrThrow=yIe;function wIe(){return fm("document")}var Dg=Qn.getDocument=wIe;function bIe(){return db("navigator")}Qn.getNavigatorOrThrow=bIe;function vIe(){return fm("navigator")}var EU=Qn.getNavigator=vIe;function EIe(){return db("location")}Qn.getLocationOrThrow=EIe;function CIe(){return fm("location")}var _J=Qn.getLocation=CIe;function _Ie(){return db("crypto")}Qn.getCryptoOrThrow=_Ie;function AIe(){return fm("crypto")}Qn.getCrypto=AIe;function SIe(){return db("localStorage")}Qn.getLocalStorageOrThrow=SIe;function xIe(){return fm("localStorage")}Qn.getLocalStorage=xIe;var CU={};Object.defineProperty(CU,"__esModule",{value:!0});var AJ=CU.getWindowMetadata=void 0;const rF=Qn;function IIe(){let t,e;try{t=rF.getDocumentOrThrow(),e=rF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(w.indexOf("/")===0)m+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");m+=v+"/"+w}h.push(m)}else if(w.indexOf("//")===0){const m=e.protocol+w;h.push(m)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}AJ=CU.getWindowMetadata=IIe;function NIe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let m=r.repeat(u);for(;w<p;++w)m+=t.charAt(g[w]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)w[m++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var TIe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const SJ=NIe(TIe);function xJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function pE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=xJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function RIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var PIe=RIe,OIe=PIe;const kIe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},DIe=t=>new TextEncoder().encode(t),MIe=t=>new TextDecoder().decode(t);class LIe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class UIe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return IJ(this,e)}}class BIe{constructor(e){this.decoders=e}or(e){return IJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const IJ=(t,e)=>new BIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class $Ie{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new LIe(e,n,r),this.decoder=new UIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pT=({name:t,prefix:e,encode:n,decode:r})=>new $Ie(t,e,n,r),o1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=OIe(n,e);return pT({prefix:t,name:e,encode:r,decode:i=>kIe(s(i))})},FIe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},jIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ws=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>pT({prefix:e,name:t,encode(s){return jIe(s,r,n)},decode(s){return FIe(s,r,n,t)}}),WIe=pT({prefix:"\0",name:"identity",encode:t=>MIe(t),decode:t=>DIe(t)}),zIe=Object.freeze(Object.defineProperty({__proto__:null,identity:WIe},Symbol.toStringTag,{value:"Module"})),HIe=Ws({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),GIe=Object.freeze(Object.defineProperty({__proto__:null,base2:HIe},Symbol.toStringTag,{value:"Module"})),qIe=Ws({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),VIe=Object.freeze(Object.defineProperty({__proto__:null,base8:qIe},Symbol.toStringTag,{value:"Module"})),KIe=o1({prefix:"9",name:"base10",alphabet:"0123456789"}),YIe=Object.freeze(Object.defineProperty({__proto__:null,base10:KIe},Symbol.toStringTag,{value:"Module"})),QIe=Ws({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),JIe=Ws({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ZIe=Object.freeze(Object.defineProperty({__proto__:null,base16:QIe,base16upper:JIe},Symbol.toStringTag,{value:"Module"})),XIe=Ws({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eNe=Ws({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tNe=Ws({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nNe=Ws({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rNe=Ws({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sNe=Ws({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iNe=Ws({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),oNe=Ws({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),aNe=Ws({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),cNe=Object.freeze(Object.defineProperty({__proto__:null,base32:XIe,base32hex:rNe,base32hexpad:iNe,base32hexpadupper:oNe,base32hexupper:sNe,base32pad:tNe,base32padupper:nNe,base32upper:eNe,base32z:aNe},Symbol.toStringTag,{value:"Module"})),lNe=o1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uNe=o1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),dNe=Object.freeze(Object.defineProperty({__proto__:null,base36:lNe,base36upper:uNe},Symbol.toStringTag,{value:"Module"})),hNe=o1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fNe=o1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),pNe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:hNe,base58flickr:fNe},Symbol.toStringTag,{value:"Module"})),gNe=Ws({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mNe=Ws({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yNe=Ws({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wNe=Ws({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),bNe=Object.freeze(Object.defineProperty({__proto__:null,base64:gNe,base64pad:mNe,base64url:yNe,base64urlpad:wNe},Symbol.toStringTag,{value:"Module"})),NJ=Array.from(""),vNe=NJ.reduce((t,e,n)=>(t[n]=e,t),[]),ENe=NJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function CNe(t){return t.reduce((e,n)=>(e+=vNe[n],e),"")}function _Ne(t){const e=[];for(const n of t){const r=ENe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ANe=pT({prefix:"",name:"base256emoji",encode:CNe,decode:_Ne}),SNe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ANe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const sF={...zIe,...GIe,...VIe,...YIe,...ZIe,...cNe,...dNe,...pNe,...bNe,...SNe};function TJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const iF=TJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),sO=TJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=xJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),RJ={utf8:iF,"utf-8":iF,hex:sF.base16,latin1:sO,ascii:sO,binary:sO,...sF};function Ra(t,e="utf8"){const n=RJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function uo(t,e="utf8"){const n=RJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const xNe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},INe="PARSE_ERROR",NNe="INVALID_REQUEST",TNe="METHOD_NOT_FOUND",RNe="INVALID_PARAMS",PJ="INTERNAL_ERROR",_U="SERVER_ERROR",PNe=[-32700,-32600,-32601,-32602,-32603],gE={[INe]:{code:-32700,message:"Parse error"},[NNe]:{code:-32600,message:"Invalid Request"},[TNe]:{code:-32601,message:"Method not found"},[RNe]:{code:-32602,message:"Invalid params"},[PJ]:{code:-32603,message:"Internal error"},[_U]:{code:-32e3,message:"Server error"}},OJ=_U;function ONe(t){return PNe.includes(t)}function oF(t){return Object.keys(gE).includes(t)?gE[t]:gE[OJ]}function kNe(t){const e=Object.values(gE).find(n=>n.code===t);return e||gE[OJ]}function kJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var DJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zD=function(t,e){return zD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},zD(t,e)};function DNe(t,e){zD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var HD=function(){return HD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},HD.apply(this,arguments)};function MNe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function LNe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function UNe(t,e){return function(n,r){e(n,r,t)}}function BNe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function $Ne(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function FNe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function jNe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function WNe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function GD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function MJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function zNe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(MJ(arguments[e]));return t}function HNe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function IC(t){return this instanceof IC?(this.v=t,this):new IC(t)}function GNe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof IC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function qNe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:IC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function VNe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof GD=="function"?GD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function KNe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function YNe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function QNe(t){return t&&t.__esModule?t:{default:t}}function JNe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ZNe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const XNe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return HD},__asyncDelegator:qNe,__asyncGenerator:GNe,__asyncValues:VNe,__await:IC,__awaiter:$Ne,__classPrivateFieldGet:JNe,__classPrivateFieldSet:ZNe,__createBinding:jNe,__decorate:LNe,__exportStar:WNe,__extends:DNe,__generator:FNe,__importDefault:QNe,__importStar:YNe,__makeTemplateObject:KNe,__metadata:BNe,__param:UNe,__read:MJ,__rest:MNe,__spread:zNe,__spreadArrays:HNe,__values:GD},Symbol.toStringTag,{value:"Module"})),eTe=VW(XNe);var ou={},aF;function tTe(){if(aF)return ou;aF=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.isBrowserCryptoAvailable=ou.getSubtleCrypto=ou.getBrowerCrypto=void 0;function t(){return(yl==null?void 0:yl.crypto)||(yl==null?void 0:yl.msCrypto)||{}}ou.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}ou.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return ou.isBrowserCryptoAvailable=n,ou}var au={},cF;function nTe(){if(cF)return au;cF=1,Object.defineProperty(au,"__esModule",{value:!0}),au.isBrowser=au.isNode=au.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}au.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}au.isNode=e;function n(){return!t()&&!e()}return au.isBrowser=n,au}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=eTe;e.__exportStar(tTe(),t),e.__exportStar(nTe(),t)})(DJ);function nl(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Sp(t=6){return BigInt(nl(t))}function kh(t,e,n){return{id:n||nl(),jsonrpc:"2.0",method:t,params:e}}function gT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function mT(t,e,n){return{id:t,jsonrpc:"2.0",error:rTe(e)}}function rTe(t,e){return typeof t>"u"?oF(PJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},oF(_U)),{message:t})),ONe(t.code)&&(t=kNe(t.code)),t)}let sTe=class{},iTe=class extends sTe{constructor(){super()}},oTe=class extends iTe{constructor(e){super()}};const aTe="^https?:",cTe="^wss?:";function lTe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function LJ(t,e){const n=lTe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function lF(t){return LJ(t,aTe)}function uF(t){return LJ(t,cTe)}function uTe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function UJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function AU(t){return UJ(t)&&"method"in t}function yT(t){return UJ(t)&&(rl(t)||Ea(t))}function rl(t){return"result"in t}function Ea(t){return"error"in t}let Wa=class extends oTe{constructor(e){super(e),this.events=new ja.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(kh(e.method,e.params||[],e.id||Sp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ea(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),yT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const dTe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),hTe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",dF=t=>t.split("?")[0],hF=10,fTe=dTe();let pTe=class{constructor(e){if(this.url=e,this.events=new ja.EventEmitter,this.registering=!1,!uF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ld(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!uF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=DJ.isReactNative()?void 0:{rejectUnauthorized:!uTe(e)},i=new fTe(e,[],s);hTe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?kg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=mT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return kJ(e,dF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>hF&&this.events.setMaxListeners(hF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${dF(this.url)}`));return this.events.emit("register_error",n),n}};var qD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof yl<"u"&&yl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof yl<"u"&&yl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var R={next:function(){var B=I.shift();return{done:B===void 0,value:B}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(I){this.map={},I instanceof g?I.forEach(function(R,B){this.append(B,R)},this):Array.isArray(I)?I.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(R){this.append(R,I[R])},this)}g.prototype.append=function(I,R){I=h(I),R=f(R);var B=this.map[I];this.map[I]=B?B+", "+R:R},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,R){this.map[h(I)]=f(R)},g.prototype.forEach=function(I,R){for(var B in this.map)this.map.hasOwnProperty(B)&&I.call(R,this.map[B],B,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(R,B){I.push(B)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(R){I.push(R)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(R,B){I.push([B,R])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function m(I){return new Promise(function(R,B){I.onload=function(){R(I.result)},I.onerror=function(){B(I.error)}})}function b(I){var R=new FileReader,B=m(R);return R.readAsArrayBuffer(I),B}function v(I){var R=new FileReader,B=m(R),O=/charset=([A-Za-z0-9_-]+)/.exec(I.type),M=O?O[1]:"utf-8";return R.readAsText(I,M),B}function A(I){for(var R=new Uint8Array(I),B=new Array(R.length),O=0;O<R.length;O++)B[O]=String.fromCharCode(R[O]);return B.join("")}function C(I){if(I.slice)return I.slice(0);var R=new Uint8Array(I.byteLength);return R.set(new Uint8Array(I)),R.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=C(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=C(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(I){var R=I.toUpperCase();return x.indexOf(R)>-1?R:I}function S(I,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var B=R.body;if(I instanceof S){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,R.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!B&&I._bodyInit!=null&&(B=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function D(I){var R=new FormData;return I.trim().split("&").forEach(function(B){if(B){var O=B.split("="),M=O.shift().replace(/\+/g," "),j=O.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(j))}}),R}function P(I){var R=new g,B=I.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var M=O.split(":"),j=M.shift().trim();if(j){var V=M.join(":").trim();try{R.append(j,V)}catch(se){console.warn("Response "+se.message)}}}),R}T.call(S.prototype);function $(I,R){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(I)}T.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},$.error=function(){var I=new $(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var G=[301,302,303,307,308];$.redirect=function(I,R){if(G.indexOf(R)===-1)throw new RangeError("Invalid status code");return new $(null,{status:R,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,B){this.message=R,this.name=B;var O=Error(R);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(I,R){return new Promise(function(B,O){var M=new S(I,R);if(M.signal&&M.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function V(){j.abort()}j.onload=function(){var Q={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(j.status<200||j.status>599)?Q.status=200:Q.status=j.status,Q.url="responseURL"in j?j.responseURL:Q.headers.get("X-Request-URL");var te="response"in j?j.response:j.responseText;setTimeout(function(){B(new $(te,Q))},0)},j.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function se(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}if(j.open(M.method,se(M.url),!0),M.credentials==="include"?j.withCredentials=!0:M.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var ie=[];Object.getOwnPropertyNames(R.headers).forEach(function(Q){ie.push(h(Q)),j.setRequestHeader(Q,f(R.headers[Q]))}),M.headers.forEach(function(Q,te){ie.indexOf(te)===-1&&j.setRequestHeader(te,Q)})}else M.headers.forEach(function(Q,te){j.setRequestHeader(te,Q)});M.signal&&(M.signal.addEventListener("abort",V),j.onreadystatechange=function(){j.readyState===4&&M.signal.removeEventListener("abort",V)}),j.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=S,a.Response=$),o.Headers=g,o.Request=S,o.Response=$,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(qD,qD.exports);var gTe=qD.exports;const fF=Qg(gTe);var mTe=Object.defineProperty,yTe=Object.defineProperties,wTe=Object.getOwnPropertyDescriptors,pF=Object.getOwnPropertySymbols,bTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,gF=(t,e,n)=>e in t?mTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mF=(t,e)=>{for(var n in e||(e={}))bTe.call(e,n)&&gF(t,n,e[n]);if(pF)for(var n of pF(e))vTe.call(e,n)&&gF(t,n,e[n]);return t},yF=(t,e)=>yTe(t,wTe(e));const ETe={Accept:"application/json","Content-Type":"application/json"},CTe="POST",wF={headers:ETe,method:CTe},bF=10;let jc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ja.EventEmitter,this.isAvailable=!1,this.registering=!1,!lF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ld(e),r=await(await fF(this.url,yF(mF({},wF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!lF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ld({id:1,jsonrpc:"2.0",method:"test",params:[]});await fF(e,yF(mF({},wF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?kg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=mT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return kJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>bF&&this.events.setMaxListeners(bF)}};const mE={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=H.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(H.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await ms.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),ur.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=wt._getClient())==null?void 0:i.disconnect().catch(console.error)),Ft.reset("Connect"),Cc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=it.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork(),r=wt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ue.getConnectorId(n.chainNamespace)===Be.CONNECTOR_ID.AUTH&&Ft.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ms.close(),ur.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ms.state.open||Ft.state.view==="ApproveTransaction")&&await ms.open({view:"SIWXSignMessage"}),i.isSmartAccount?Cc.showError("This application might not support Smart Accounts"):Cc.showError("Signature declined"),ur.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await wt.disconnect():ms.close(),Ft.reset("Connect"),ur.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=it.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ft.state.view==="ApproveTransaction",r=Ft.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=mE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=H.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Cc.showLoading("Authenticating...",{autoClose:!1}),qe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),ur.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:mE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),ur.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:mE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Cc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=H.state.activeChain;return{network:((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=qe.state.preferredAccountTypes)==null?void 0:n[t])===Ls.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function AA(t,e){return Ue.getConnectorId(t)===e}function _Te(t){const e=Array.from(H.state.chains.keys());let n=[];return t?(n.push([t,H.state.chains.get(t)]),AA(t,Be.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&AA(r,Be.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,H.state.chains.get(r)])}):AA(t,Be.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&AA(r,Be.CONNECTOR_ID.AUTH)&&n.push([r,H.state.chains.get(r)])})):n=Array.from(H.state.chains.entries()),n}const Qi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},tI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Be.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Be.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Be.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Be.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Be.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Be.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Be.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Be.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Be.CONNECTOR_ID.COINBASE]:"Coinbase",[Be.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Be.CONNECTOR_ID.LEDGER]:"Ledger",[Be.CONNECTOR_ID.SAFE]:"Safe"}},wT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Qi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},ATe=new AbortController,bl={EmbeddedWalletAbortController:ATe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${STe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function STe(){return typeof window<"u"}const xTe={createLogger(t,e="error"){const n=hm({level:e}),{logger:r}=uT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},ITe="rpc.walletconnect.org";function vF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const iO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],iy={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===ITe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Be.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Be.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return iO.includes(e)?vF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:tI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>iy.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ta(a.url,a.config))}),iO.includes(t.caipNetworkId)&&r.push(Ta(vF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ta(a))}),Yx(r)},extendWagmiTransports(t,e,n){if(iO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Yx([n,Ta(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Be.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ve.getActiveCaipNetworkId(),n=H.getAllRequestedCaipNetworks(),r=Array.from(((c=H.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},nI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ui=or({providers:{...nI},providerIds:{...nI}}),Un={state:Ui,subscribeKey(t,e){return oi(Ui,t,e)},subscribe(t){return si(Ui,()=>{t(Ui)})},subscribeProviders(t){return si(Ui.providers,()=>t(Ui.providers))},setProvider(t,e){e&&(Ui.providers[t]=Sg(e))},getProvider(t){return Ui.providers[t]},setProviderId(t,e){e&&(Ui.providerIds[t]=e)},getProviderId(t){if(t)return Ui.providerIds[t]},reset(){Ui.providers={...nI},Ui.providerIds={...nI}},resetChain(t){Ui.providers[t]=void 0,Ui.providerIds[t]=void 0}},EF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Is={set(t,e){Fo.isClient&&localStorage.setItem(`${He.STORAGE_KEY}${t}`,e)},get(t){return Fo.isClient?localStorage.getItem(`${He.STORAGE_KEY}${t}`):null},delete(t,e){Fo.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${He.STORAGE_KEY}${t}`))}},SA=30*1e3,Fo={checkIfAllowedToTriggerEmail(){const t=Is.get(He.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<SA){const n=Math.ceil((SA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Is.get(He.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<SA)return Math.ceil((SA-e)/1e3)}return 0},checkIfRequestExists(t){return Ls.NOT_SAFE_RPC_METHODS.includes(t.method)||Ls.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(EF.transactionHash))||(t==null?void 0:t.match(EF.signedMessage)))?He.RPC_RESPONSE_TYPE_TX:He.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ls.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var mn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(mn||(mn={}));var VD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(VD||(VD={}));const De=mn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eh=t=>{switch(typeof t){case"undefined":return De.undefined;case"string":return De.string;case"number":return isNaN(t)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(t)?De.array:t===null?De.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?De.promise:typeof Map<"u"&&t instanceof Map?De.map:typeof Set<"u"&&t instanceof Set?De.set:typeof Date<"u"&&t instanceof Date?De.date:De.object;default:return De.unknown}},Ce=mn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),NTe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Oc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,mn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Oc.create=t=>new Oc(t);const NC=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===De.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,mn.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${mn.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${mn.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${mn.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:mn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,mn.assertNever(t)}return{message:n}};let BJ=NC;function TTe(t){BJ=t}function rI(){return BJ}const sI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},RTe=[];function je(t,e){const n=sI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,rI(),NC].filter(r=>!!r)});t.common.issues.push(n)}class ii{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Pt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ii.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Pt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Pt=Object.freeze({status:"aborted"}),$J=t=>({status:"dirty",value:t}),Ii=t=>({status:"valid",value:t}),KD=t=>t.status==="aborted",YD=t=>t.status==="dirty",TC=t=>t.status==="valid",iI=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class Hl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const CF=(t,e)=>{if(TC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Oc(t.common.issues);return this._error=n,this._error}}};function Ut(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class jt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return eh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:eh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ii,ctx:{common:e.parent.common,data:e.data,parsedType:eh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(iI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eh(e)},i=this._parseSync({data:e,path:s.path,parent:s});return CF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eh(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(iI(s)?s:Promise.resolve(s));return CF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Bc({schema:this,typeName:At.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ku.create(this,this._def)}nullable(){return Ug.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return kc.create(this,this._def)}promise(){return Aw.create(this,this._def)}or(e){return kC.create([this,e],this._def)}and(e){return DC.create(this,e,this._def)}transform(e){return new Bc({...Ut(this._def),schema:this,typeName:At.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new $C({...Ut(this._def),innerType:this,defaultValue:n,typeName:At.ZodDefault})}brand(){return new jJ({typeName:At.ZodBranded,type:this,...Ut(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new lI({...Ut(this._def),innerType:this,catchValue:n,typeName:At.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return a1.create(this,e)}readonly(){return dI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const PTe=/^c[^\s-]{8,}$/i,OTe=/^[a-z][a-z0-9]*$/,kTe=/^[0-9A-HJKMNP-TV-Z]{26}$/,DTe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,MTe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,LTe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let oO;const UTe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,BTe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,$Te=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function FTe(t,e){return!!((e==="v4"||!e)&&UTe.test(t)||(e==="v6"||!e)&&BTe.test(t))}class Ic extends jt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==De.string){const i=this._getOrReturnCtx(e);return je(i,{code:Ce.invalid_type,expected:De.string,received:i.parsedType}),Pt}const r=new ii;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?je(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&je(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")MTe.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"email",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")oO||(oO=new RegExp(LTe,"u")),oO.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"emoji",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")DTe.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"uuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")PTe.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"cuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")OTe.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")kTe.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"ulid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),je(s,{validation:"url",code:Ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"regex",code:Ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?$Te(i).test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?FTe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"ip",code:Ce.invalid_string,message:i.message}),r.dirty()):mn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ce.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new Ic({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...lt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new Ic({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ic({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ic({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ic.create=t=>{var e;return new Ic({checks:[],typeName:At.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ut(t)})};function jTe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class yf extends jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==De.number){const i=this._getOrReturnCtx(e);return je(i,{code:Ce.invalid_type,expected:De.number,received:i.parsedType}),Pt}let r;const s=new ii;for(const i of this._def.checks)i.kind==="int"?mn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?jTe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.not_finite,message:i.message}),s.dirty()):mn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new yf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new yf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}yf.create=t=>new yf({checks:[],typeName:At.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ut(t)});class wf extends jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==De.bigint){const i=this._getOrReturnCtx(e);return je(i,{code:Ce.invalid_type,expected:De.bigint,received:i.parsedType}),Pt}let r;const s=new ii;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):mn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new wf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new wf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wf.create=t=>{var e;return new wf({checks:[],typeName:At.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ut(t)})};class RC extends jt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==De.boolean){const r=this._getOrReturnCtx(e);return je(r,{code:Ce.invalid_type,expected:De.boolean,received:r.parsedType}),Pt}return Ii(e.data)}}RC.create=t=>new RC({typeName:At.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ut(t)});class Mg extends jt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==De.date){const i=this._getOrReturnCtx(e);return je(i,{code:Ce.invalid_type,expected:De.date,received:i.parsedType}),Pt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return je(i,{code:Ce.invalid_date}),Pt}const r=new ii;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):mn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Mg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Mg.create=t=>new Mg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:At.ZodDate,...Ut(t)});class oI extends jt{_parse(e){if(this._getType(e)!==De.symbol){const r=this._getOrReturnCtx(e);return je(r,{code:Ce.invalid_type,expected:De.symbol,received:r.parsedType}),Pt}return Ii(e.data)}}oI.create=t=>new oI({typeName:At.ZodSymbol,...Ut(t)});class PC extends jt{_parse(e){if(this._getType(e)!==De.undefined){const r=this._getOrReturnCtx(e);return je(r,{code:Ce.invalid_type,expected:De.undefined,received:r.parsedType}),Pt}return Ii(e.data)}}PC.create=t=>new PC({typeName:At.ZodUndefined,...Ut(t)});class OC extends jt{_parse(e){if(this._getType(e)!==De.null){const r=this._getOrReturnCtx(e);return je(r,{code:Ce.invalid_type,expected:De.null,received:r.parsedType}),Pt}return Ii(e.data)}}OC.create=t=>new OC({typeName:At.ZodNull,...Ut(t)});class _w extends jt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ii(e.data)}}_w.create=t=>new _w({typeName:At.ZodAny,...Ut(t)});class ug extends jt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ii(e.data)}}ug.create=t=>new ug({typeName:At.ZodUnknown,...Ut(t)});class ud extends jt{_parse(e){const n=this._getOrReturnCtx(e);return je(n,{code:Ce.invalid_type,expected:De.never,received:n.parsedType}),Pt}}ud.create=t=>new ud({typeName:At.ZodNever,...Ut(t)});class aI extends jt{_parse(e){if(this._getType(e)!==De.undefined){const r=this._getOrReturnCtx(e);return je(r,{code:Ce.invalid_type,expected:De.void,received:r.parsedType}),Pt}return Ii(e.data)}}aI.create=t=>new aI({typeName:At.ZodVoid,...Ut(t)});class kc extends jt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==De.array)return je(n,{code:Ce.invalid_type,expected:De.array,received:n.parsedType}),Pt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(je(n,{code:o?Ce.too_big:Ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(je(n,{code:Ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(je(n,{code:Ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Hl(n,o,n.path,a)))).then(o=>ii.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Hl(n,o,n.path,a)));return ii.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new kc({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new kc({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new kc({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}kc.create=(t,e)=>new kc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:At.ZodArray,...Ut(e)});function oy(t){if(t instanceof fr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ku.create(oy(r))}return new fr({...t._def,shape:()=>e})}else return t instanceof kc?new kc({...t._def,type:oy(t.element)}):t instanceof Ku?Ku.create(oy(t.unwrap())):t instanceof Ug?Ug.create(oy(t.unwrap())):t instanceof Gl?Gl.create(t.items.map(e=>oy(e))):t}class fr extends jt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=mn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==De.object){const l=this._getOrReturnCtx(e);return je(l,{code:Ce.invalid_type,expected:De.object,received:l.parsedType}),Pt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ud&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Hl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ud){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(je(s,{code:Ce.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Hl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ii.mergeObjectSync(r,l)):ii.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new fr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=lt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new fr({...this._def,unknownKeys:"strip"})}passthrough(){return new fr({...this._def,unknownKeys:"passthrough"})}extend(e){return new fr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:At.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new fr({...this._def,catchall:e})}pick(e){const n={};return mn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new fr({...this._def,shape:()=>n})}omit(e){const n={};return mn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new fr({...this._def,shape:()=>n})}deepPartial(){return oy(this)}partial(e){const n={};return mn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new fr({...this._def,shape:()=>n})}required(e){const n={};return mn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ku;)i=i._def.innerType;n[r]=i}}),new fr({...this._def,shape:()=>n})}keyof(){return FJ(mn.objectKeys(this.shape))}}fr.create=(t,e)=>new fr({shape:()=>t,unknownKeys:"strip",catchall:ud.create(),typeName:At.ZodObject,...Ut(e)});fr.strictCreate=(t,e)=>new fr({shape:()=>t,unknownKeys:"strict",catchall:ud.create(),typeName:At.ZodObject,...Ut(e)});fr.lazycreate=(t,e)=>new fr({shape:t,unknownKeys:"strip",catchall:ud.create(),typeName:At.ZodObject,...Ut(e)});class kC extends jt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Oc(a.ctx.common.issues));return je(n,{code:Ce.invalid_union,unionErrors:o}),Pt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Oc(c));return je(n,{code:Ce.invalid_union,unionErrors:a}),Pt}}get options(){return this._def.options}}kC.create=(t,e)=>new kC({options:t,typeName:At.ZodUnion,...Ut(e)});const CS=t=>t instanceof LC?CS(t.schema):t instanceof Bc?CS(t.innerType()):t instanceof UC?[t.value]:t instanceof bf?t.options:t instanceof BC?Object.keys(t.enum):t instanceof $C?CS(t._def.innerType):t instanceof PC?[void 0]:t instanceof OC?[null]:null;class bT extends jt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.object)return je(n,{code:Ce.invalid_type,expected:De.object,received:n.parsedType}),Pt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(je(n,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=CS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new bT({typeName:At.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ut(r)})}}function QD(t,e){const n=eh(t),r=eh(e);if(t===e)return{valid:!0,data:t};if(n===De.object&&r===De.object){const s=mn.objectKeys(e),i=mn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=QD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===De.array&&r===De.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=QD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===De.date&&r===De.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class DC extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(KD(i)||KD(o))return Pt;const a=QD(i.value,o.value);return a.valid?((YD(i)||YD(o))&&n.dirty(),{status:n.value,value:a.data}):(je(r,{code:Ce.invalid_intersection_types}),Pt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}DC.create=(t,e,n)=>new DC({left:t,right:e,typeName:At.ZodIntersection,...Ut(n)});class Gl extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.array)return je(r,{code:Ce.invalid_type,expected:De.array,received:r.parsedType}),Pt;if(r.data.length<this._def.items.length)return je(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pt;!this._def.rest&&r.data.length>this._def.items.length&&(je(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Hl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ii.mergeArray(n,o)):ii.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Gl({...this._def,rest:e})}}Gl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Gl({items:t,typeName:At.ZodTuple,rest:null,...Ut(e)})};class MC extends jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.object)return je(r,{code:Ce.invalid_type,expected:De.object,received:r.parsedType}),Pt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Hl(r,a,r.path,a)),value:o._parse(new Hl(r,r.data[a],r.path,a))});return r.common.async?ii.mergeObjectAsync(n,s):ii.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof jt?new MC({keyType:e,valueType:n,typeName:At.ZodRecord,...Ut(r)}):new MC({keyType:Ic.create(),valueType:e,typeName:At.ZodRecord,...Ut(n)})}}class cI extends jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.map)return je(r,{code:Ce.invalid_type,expected:De.map,received:r.parsedType}),Pt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Hl(r,a,r.path,[l,"key"])),value:i._parse(new Hl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Pt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Pt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}cI.create=(t,e,n)=>new cI({valueType:e,keyType:t,typeName:At.ZodMap,...Ut(n)});class Lg extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.set)return je(r,{code:Ce.invalid_type,expected:De.set,received:r.parsedType}),Pt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(je(r,{code:Ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(je(r,{code:Ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Pt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Hl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Lg({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new Lg({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Lg.create=(t,e)=>new Lg({valueType:t,minSize:null,maxSize:null,typeName:At.ZodSet,...Ut(e)});class qy extends jt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.function)return je(n,{code:Ce.invalid_type,expected:De.function,received:n.parsedType}),Pt;function r(a,c){return sI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rI(),NC].filter(l=>!!l),issueData:{code:Ce.invalid_arguments,argumentsError:c}})}function s(a,c){return sI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rI(),NC].filter(l=>!!l),issueData:{code:Ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Aw){const a=this;return Ii(async function(...c){const l=new Oc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ii(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Oc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Oc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qy({...this._def,args:Gl.create(e).rest(ug.create())})}returns(e){return new qy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new qy({args:e||Gl.create([]).rest(ug.create()),returns:n||ug.create(),typeName:At.ZodFunction,...Ut(r)})}}class LC extends jt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}LC.create=(t,e)=>new LC({getter:t,typeName:At.ZodLazy,...Ut(e)});class UC extends jt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return je(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),Pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}UC.create=(t,e)=>new UC({value:t,typeName:At.ZodLiteral,...Ut(e)});function FJ(t,e){return new bf({values:t,typeName:At.ZodEnum,...Ut(e)})}class bf extends jt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return je(n,{expected:mn.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),Pt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return je(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),Pt}return Ii(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return bf.create(e)}exclude(e){return bf.create(this.options.filter(n=>!e.includes(n)))}}bf.create=FJ;class BC extends jt{_parse(e){const n=mn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==De.string&&r.parsedType!==De.number){const s=mn.objectValues(n);return je(r,{expected:mn.joinValues(s),received:r.parsedType,code:Ce.invalid_type}),Pt}if(n.indexOf(e.data)===-1){const s=mn.objectValues(n);return je(r,{received:r.data,code:Ce.invalid_enum_value,options:s}),Pt}return Ii(e.data)}get enum(){return this._def.values}}BC.create=(t,e)=>new BC({values:t,typeName:At.ZodNativeEnum,...Ut(e)});class Aw extends jt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.promise&&n.common.async===!1)return je(n,{code:Ce.invalid_type,expected:De.promise,received:n.parsedType}),Pt;const r=n.parsedType===De.promise?n.data:Promise.resolve(n.data);return Ii(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Aw.create=(t,e)=>new Aw({type:t,typeName:At.ZodPromise,...Ut(e)});class Bc extends jt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===At.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{je(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Pt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Pt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!TC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>TC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);mn.assertNever(s)}}Bc.create=(t,e,n)=>new Bc({schema:t,typeName:At.ZodEffects,effect:e,...Ut(n)});Bc.createWithPreprocess=(t,e,n)=>new Bc({schema:e,effect:{type:"preprocess",transform:t},typeName:At.ZodEffects,...Ut(n)});class Ku extends jt{_parse(e){return this._getType(e)===De.undefined?Ii(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ku.create=(t,e)=>new Ku({innerType:t,typeName:At.ZodOptional,...Ut(e)});class Ug extends jt{_parse(e){return this._getType(e)===De.null?Ii(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ug.create=(t,e)=>new Ug({innerType:t,typeName:At.ZodNullable,...Ut(e)});class $C extends jt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===De.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}$C.create=(t,e)=>new $C({innerType:t,typeName:At.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ut(e)});class lI extends jt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return iI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Oc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Oc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}lI.create=(t,e)=>new lI({innerType:t,typeName:At.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ut(e)});class uI extends jt{_parse(e){if(this._getType(e)!==De.nan){const r=this._getOrReturnCtx(e);return je(r,{code:Ce.invalid_type,expected:De.nan,received:r.parsedType}),Pt}return{status:"valid",value:e.data}}}uI.create=t=>new uI({typeName:At.ZodNaN,...Ut(t)});const WTe=Symbol("zod_brand");class jJ extends jt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class a1 extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Pt:i.status==="dirty"?(n.dirty(),$J(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Pt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new a1({in:e,out:n,typeName:At.ZodPipeline})}}class dI extends jt{_parse(e){const n=this._def.innerType._parse(e);return TC(n)&&(n.value=Object.freeze(n.value)),n}}dI.create=(t,e)=>new dI({innerType:t,typeName:At.ZodReadonly,...Ut(e)});const WJ=(t,e={},n)=>t?_w.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):_w.create(),zTe={object:fr.lazycreate};var At;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(At||(At={}));const HTe=(t,e={message:`Input not instance of ${t.name}`})=>WJ(n=>n instanceof t,e),zJ=Ic.create,HJ=yf.create,GTe=uI.create,qTe=wf.create,GJ=RC.create,VTe=Mg.create,KTe=oI.create,YTe=PC.create,QTe=OC.create,JTe=_w.create,ZTe=ug.create,XTe=ud.create,eRe=aI.create,tRe=kc.create,nRe=fr.create,rRe=fr.strictCreate,sRe=kC.create,iRe=bT.create,oRe=DC.create,aRe=Gl.create,cRe=MC.create,lRe=cI.create,uRe=Lg.create,dRe=qy.create,hRe=LC.create,fRe=UC.create,pRe=bf.create,gRe=BC.create,mRe=Aw.create,_F=Bc.create,yRe=Ku.create,wRe=Ug.create,bRe=Bc.createWithPreprocess,vRe=a1.create,ERe=()=>zJ().optional(),CRe=()=>HJ().optional(),_Re=()=>GJ().optional(),ARe={string:t=>Ic.create({...t,coerce:!0}),number:t=>yf.create({...t,coerce:!0}),boolean:t=>RC.create({...t,coerce:!0}),bigint:t=>wf.create({...t,coerce:!0}),date:t=>Mg.create({...t,coerce:!0})},SRe=Pt;var E=Object.freeze({__proto__:null,defaultErrorMap:NC,setErrorMap:TTe,getErrorMap:rI,makeIssue:sI,EMPTY_PATH:RTe,addIssueToContext:je,ParseStatus:ii,INVALID:Pt,DIRTY:$J,OK:Ii,isAborted:KD,isDirty:YD,isValid:TC,isAsync:iI,get util(){return mn},get objectUtil(){return VD},ZodParsedType:De,getParsedType:eh,ZodType:jt,ZodString:Ic,ZodNumber:yf,ZodBigInt:wf,ZodBoolean:RC,ZodDate:Mg,ZodSymbol:oI,ZodUndefined:PC,ZodNull:OC,ZodAny:_w,ZodUnknown:ug,ZodNever:ud,ZodVoid:aI,ZodArray:kc,ZodObject:fr,ZodUnion:kC,ZodDiscriminatedUnion:bT,ZodIntersection:DC,ZodTuple:Gl,ZodRecord:MC,ZodMap:cI,ZodSet:Lg,ZodFunction:qy,ZodLazy:LC,ZodLiteral:UC,ZodEnum:bf,ZodNativeEnum:BC,ZodPromise:Aw,ZodEffects:Bc,ZodTransformer:Bc,ZodOptional:Ku,ZodNullable:Ug,ZodDefault:$C,ZodCatch:lI,ZodNaN:uI,BRAND:WTe,ZodBranded:jJ,ZodPipeline:a1,ZodReadonly:dI,custom:WJ,Schema:jt,ZodSchema:jt,late:zTe,get ZodFirstPartyTypeKind(){return At},coerce:ARe,any:JTe,array:tRe,bigint:qTe,boolean:GJ,date:VTe,discriminatedUnion:iRe,effect:_F,enum:pRe,function:dRe,instanceof:HTe,intersection:oRe,lazy:hRe,literal:fRe,map:lRe,nan:GTe,nativeEnum:gRe,never:XTe,null:QTe,nullable:wRe,number:HJ,object:nRe,oboolean:_Re,onumber:CRe,optional:yRe,ostring:ERe,pipeline:vRe,preprocess:bRe,promise:mRe,record:cRe,set:uRe,strictObject:rRe,string:zJ,symbol:KTe,transformer:_F,tuple:aRe,undefined:YTe,union:sRe,unknown:ZTe,void:eRe,NEVER:SRe,ZodIssueCode:Ce,quotelessJson:NTe,ZodError:Oc});const vr=E.object({message:E.string()});function $e(t){return E.literal(He[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const xRe=E.object({chainId:E.string().or(E.number())}),IRe=E.object({email:E.string().email()}),NRe=E.object({otp:E.string()}),TRe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),RRe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),PRe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),ORe=E.object({email:E.string().email()}),kRe=E.object({otp:E.string()}),DRe=E.object({otp:E.string()}),MRe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),LRe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),URe=E.object({type:E.string()}),BRe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),$Re=E.object({url:E.string()}),FRe=E.object({userName:E.string()}),jRe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ls.ACCOUNT_TYPES.EOA,Ls.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),WRe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),zRe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ls.ACCOUNT_TYPES.EOA,Ls.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),HRe=E.object({uri:E.string()}),GRe=E.object({isConnected:E.boolean()}),qRe=E.object({chainId:E.string().or(E.number())}),VRe=E.object({chainId:E.string().or(E.number())}),KRe=E.object({newEmail:E.string().email()}),YRe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const QRe=E.object({version:E.string().optional()}),JRe=E.object({type:E.string(),address:E.string()}),ZRe=E.any(),XRe=E.object({method:E.literal("eth_accounts")}),ePe=E.object({method:E.literal("eth_blockNumber")}),tPe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),nPe=E.object({method:E.literal("eth_chainId")}),rPe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),sPe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),iPe=E.object({method:E.literal("eth_gasPrice")}),oPe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),aPe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),cPe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),lPe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),uPe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),dPe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),hPe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),fPe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),pPe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),gPe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),mPe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),yPe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),wPe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),bPe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),vPe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),EPe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),CPe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),_Pe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),APe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),SPe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),xPe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),IPe=E.object({method:E.literal("eth_newBlockFilter")}),NPe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),TPe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),RPe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),PPe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),OPe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),AF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),kPe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),DPe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),MPe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),LPe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),UPe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),BPe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),$Pe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),FPe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),jPe=E.object({method:E.literal("wallet_getCapabilities")}),WPe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),zPe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),HPe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),SF=E.object({token:E.string()}),Fe=E.object({id:E.string().optional()}),sv={appEvent:Fe.extend({type:$e("APP_SWITCH_NETWORK"),payload:xRe}).or(Fe.extend({type:$e("APP_CONNECT_EMAIL"),payload:IRe})).or(Fe.extend({type:$e("APP_CONNECT_DEVICE")})).or(Fe.extend({type:$e("APP_CONNECT_OTP"),payload:NRe})).or(Fe.extend({type:$e("APP_CONNECT_SOCIAL"),payload:TRe})).or(Fe.extend({type:$e("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:$e("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:$e("APP_GET_USER"),payload:E.optional(RRe)})).or(Fe.extend({type:$e("APP_GET_SOCIAL_REDIRECT_URI"),payload:PRe})).or(Fe.extend({type:$e("APP_SIGN_OUT")})).or(Fe.extend({type:$e("APP_IS_CONNECTED"),payload:E.optional(SF)})).or(Fe.extend({type:$e("APP_GET_CHAIN_ID")})).or(Fe.extend({type:$e("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:$e("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:$e("APP_SET_PREFERRED_ACCOUNT"),payload:URe})).or(Fe.extend({type:$e("APP_RPC_REQUEST"),payload:AF.or(HPe).or(XRe).or(ePe).or(tPe).or(nPe).or(rPe).or(sPe).or(iPe).or(oPe).or(aPe).or(cPe).or(lPe).or(uPe).or(dPe).or(hPe).or(fPe).or(pPe).or(gPe).or(mPe).or(yPe).or(wPe).or(bPe).or(vPe).or(EPe).or(CPe).or(_Pe).or(APe).or(SPe).or(xPe).or(IPe).or(NPe).or(TPe).or(RPe).or(PPe).or(OPe).or(AF).or(kPe).or(DPe).or(MPe).or(LPe).or(UPe).or(BPe).or(FPe).or($Pe).or(jPe).or(WPe).or(zPe)})).or(Fe.extend({type:$e("APP_UPDATE_EMAIL"),payload:ORe})).or(Fe.extend({type:$e("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:kRe})).or(Fe.extend({type:$e("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:DRe})).or(Fe.extend({type:$e("APP_SYNC_THEME"),payload:MRe})).or(Fe.extend({type:$e("APP_SYNC_DAPP_DATA"),payload:LRe})).or(Fe.extend({type:$e("APP_RELOAD")})),frameEvent:Fe.extend({type:$e("FRAME_SWITCH_NETWORK_ERROR"),payload:vr}).or(Fe.extend({type:$e("FRAME_SWITCH_NETWORK_SUCCESS"),payload:VRe})).or(Fe.extend({type:$e("FRAME_CONNECT_EMAIL_SUCCESS"),payload:BRe})).or(Fe.extend({type:$e("FRAME_CONNECT_EMAIL_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:$Re})).or(Fe.extend({type:$e("FRAME_GET_FARCASTER_URI_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:FRe})).or(Fe.extend({type:$e("FRAME_CONNECT_FARCASTER_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_CONNECT_OTP_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:$e("FRAME_CONNECT_DEVICE_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:$e("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:jRe})).or(Fe.extend({type:$e("FRAME_CONNECT_SOCIAL_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_GET_USER_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_GET_USER_SUCCESS"),payload:zRe})).or(Fe.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:HRe})).or(Fe.extend({type:$e("FRAME_SIGN_OUT_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:$e("FRAME_IS_CONNECTED_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_IS_CONNECTED_SUCCESS"),payload:GRe})).or(Fe.extend({type:$e("FRAME_GET_CHAIN_ID_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_GET_CHAIN_ID_SUCCESS"),payload:qRe})).or(Fe.extend({type:$e("FRAME_RPC_REQUEST_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_RPC_REQUEST_SUCCESS"),payload:ZRe})).or(Fe.extend({type:$e("FRAME_SESSION_UPDATE"),payload:SF})).or(Fe.extend({type:$e("FRAME_UPDATE_EMAIL_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_UPDATE_EMAIL_SUCCESS"),payload:WRe})).or(Fe.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:KRe})).or(Fe.extend({type:$e("FRAME_SYNC_THEME_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:$e("FRAME_SYNC_DAPP_DATA_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:YRe})).or(Fe.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:JRe})).or(Fe.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_READY"),payload:QRe})).or(Fe.extend({type:$e("FRAME_RELOAD_ERROR"),payload:vr})).or(Fe.extend({type:$e("FRAME_RELOAD_SUCCESS")}))};function aO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let GPe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Be.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!aO(He.FRAME_EVENT_KEY,l))return;const u=sv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Fo.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Fo.isClient&&window.addEventListener("message",({data:o})=>{if(!aO(He.FRAME_EVENT_KEY,o))return;const a=sv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Fo.isClient&&window.addEventListener("message",({data:o})=>{if(!aO(He.APP_EVENT_KEY,o))return;const a=sv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Fo.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");sv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Fo.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");sv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Fo.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Lye}?projectId=${e}&chainId=${r}&version=${Bye}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},qPe=class{constructor(e){var i;const n=hm({level:Uye}),{logger:r,chunkLoggerController:s}=uT({opts:n});this.logger=Fs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},VPe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new qPe(e)),this.abortController=i,this.w3mFrame=new GPe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Is.get(He.EMAIL_LOGIN_USED_KEY)}getEmail(){return Is.get(He.EMAIL)}getUsername(){return Is.get(He.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:He.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Fo.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:He.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:He.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:He.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:He.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:He.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:He.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:He.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:He.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:He.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:He.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:He.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:He.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:He.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:He.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:He.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:He.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:He.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:He.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:He.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:He.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ls.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:He.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_IS_CONNECTED_ERROR&&e(),n.type===He.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===He.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ls.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===He.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===He.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ls.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[He.APP_SYNC_DAPP_DATA,He.APP_SYNC_THEME,He.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[He.APP_CONNECT_EMAIL,He.APP_CONNECT_DEVICE,He.APP_CONNECT_OTP,He.APP_CONNECT_SOCIAL,He.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,m){var b,v,A;w.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Is.set(He.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Is.set(He.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Is.set(He.EMAIL,e),Is.set(He.EMAIL_LOGIN_USED_KEY,"true"),Is.delete(He.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Is.delete(He.EMAIL_LOGIN_USED_KEY),Is.delete(He.EMAIL),Is.delete(He.LAST_USED_CHAIN_KEY),Is.delete(He.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Is.set(He.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Is.get(He.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Is.set(He.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},KPe=class _S{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return _S.instance||(_S.instance=new VPe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),_S.instance}};function YPe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function os(t,...e){try{return YPe(t(...e))}catch(n){return Promise.reject(n)}}function QPe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function JPe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function AS(t){if(QPe(t))return String(t);if(JPe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return AS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const JD="base64:";function ZPe(t){return typeof t=="string"?t:JD+tOe(t)}function XPe(t){return typeof t!="string"||!t.startsWith(JD)?t:eOe(t.slice(JD.length))}function eOe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function tOe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Wi(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function nOe(...t){return Wi(t.join(":"))}function xA(t){return t=Wi(t),t?t+":":""}function rOe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function sOe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const iOe="memory",oOe=()=>{const t=new Map;return{name:iOe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function aOe(t={}){const e={mounts:{"":t.driver||oOe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Wi(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await xF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Wi(g?p:p.key),m=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:m,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return os(h.hasItem,d,u)},getItem(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return os(h.getItem,d,u).then(f=>bA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?os(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:nOe(d.base,f.key),value:bA(f.value)}))):Promise.all(d.items.map(h=>os(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:bA(f)})))))},getItemRaw(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?os(h.getItemRaw,d,u):os(h.getItem,d,u).then(f=>XPe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Wi(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await os(f.setItem,h,AS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return os(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:AS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>os(d.driver.setItem,h.relativeKey,AS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Wi(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await os(f.setItemRaw,h,u,d);else if(f.setItem)await os(f.setItem,h,ZPe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Wi(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await os(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await os(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Wi(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await os(h.getMeta,d,u)),!u.nativeOnly){const p=await os(h.getItem,d+"$",u).then(g=>bA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=xA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(w=m.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await os(m.driver.getKeys,m.relativeBase,u);for(const v of b){const A=m.mountpoint+Wi(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||rOe(m,u.maxDepth))&&sOe(m,l))},async clear(l,u={}){l=xA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return os(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>IF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=xA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(xF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=xA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await IF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Wi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Wi(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function xF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function IF(t){typeof t.dispose=="function"&&await os(t.dispose)}const cOe="idb-keyval";var lOe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=HQ(t.dbName,t.storeName)),{name:cOe,options:t,async hasItem(s){return!(typeof await R4(n(s),r)>"u")},async getItem(s){return await R4(n(s),r)??null},setItem(s,i){return k1e(n(s),i,r)},removeItem(s){return D1e(n(s),r)},getKeys(){return U1e(r)},clear(){return M1e(r)}}};const uOe="WALLET_CONNECT_V2_INDEXED_DB",dOe="keyvaluestorage";let hOe=class{constructor(){this.indexedDb=aOe({driver:lOe({dbName:uOe,storeName:dOe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ld(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var cO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof cO<"u"&&cO.localStorage?SS.exports=cO.localStorage:typeof window<"u"&&window.localStorage?SS.exports=window.localStorage:SS.exports=new e})();function fOe(t){var e;return[t[0],kg((e=t[1])!=null?e:"")]}let pOe=class{constructor(){this.localStorage=SS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(fOe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return kg(n)}async setItem(e,n){this.localStorage.setItem(e,ld(n))}async removeItem(e){this.localStorage.removeItem(e)}};const gOe="wc_storage_version",NF=1,mOe=async(t,e,n)=>{const r=gOe,s=await e.getItem(r);if(s&&s>=NF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,NF),n(e),yOe(t,o)},yOe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let wOe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new pOe;this.storage=e;try{const n=new hOe;mOe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var bOe=Object.defineProperty,vOe=(t,e,n)=>e in t?bOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TF=(t,e,n)=>vOe(t,typeof e!="symbol"?e+"":e,n);let EOe=class extends lm{constructor(e){super(),this.opts=e,TF(this,"protocol","wc"),TF(this,"version",2)}};var COe=Object.defineProperty,_Oe=(t,e,n)=>e in t?COe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AOe=(t,e,n)=>_Oe(t,e+"",n);let SOe=class extends lm{constructor(e,n){super(),this.core=e,this.logger=n,AOe(this,"records",new Map)}},xOe=class{constructor(e,n){this.logger=e,this.core=n}},IOe=class extends lm{constructor(e,n){super(),this.relayer=e,this.logger=n}},NOe=class extends lm{constructor(e){super()}},TOe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},ROe=class extends lm{constructor(e,n){super(),this.relayer=e,this.logger=n}},POe=class extends lm{constructor(e,n){super(),this.core=e,this.logger=n}},OOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},kOe=class{constructor(e,n){this.projectId=e,this.logger=n}},DOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var MOe=Object.defineProperty,LOe=(t,e,n)=>e in t?MOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RF=(t,e,n)=>LOe(t,typeof e!="symbol"?e+"":e,n);let UOe=class{constructor(e){this.opts=e,RF(this,"protocol","wc"),RF(this,"version",2)}},BOe=class{constructor(e){this.client=e}};function FC(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function PF(t){return FC(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const qJ="2.23.2";let iv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${qJ}`},vT=class ZD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ZD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ZD&&n.cause.docsPath||n.docsPath,i=(a=iv.getDocsUrl)==null?void 0:a.call(iv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...iv.version?[`Version: ${iv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=qJ}walk(e){return VJ(this,e)}};function VJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?VJ(t.cause,e):e?null:t}class KJ extends vT{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function hb(t,{dir:e,size:n=32}={}){return typeof t=="string"?$Oe(t,{dir:e,size:n}):FOe(t,{dir:e,size:n})}function $Oe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new KJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function FOe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new KJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class jOe extends vT{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class WOe extends vT{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function fb(t,{size:e}){if(PF(t)>e)throw new WOe({givenSize:PF(t),maxSize:e})}function XD(t,e={}){const{signed:n}=e;e.size&&fb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function zOe(t,e={}){return Number(XD(t,e))}const HOe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function e3(t,e={}){return typeof t=="number"||typeof t=="bigint"?QJ(t,e):typeof t=="string"?VOe(t,e):typeof t=="boolean"?GOe(t,e):YJ(t,e)}function GOe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(fb(n,{size:e.size}),hb(n,{size:e.size})):n}function YJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=HOe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(fb(r,{size:e.size}),hb(r,{dir:"right",size:e.size})):r}function QJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new jOe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?hb(a,{size:r}):a}const qOe=new TextEncoder;function VOe(t,e={}){const n=qOe.encode(t);return YJ(n,e)}const KOe=new TextEncoder;function YOe(t,e={}){return typeof t=="number"||typeof t=="bigint"?JOe(t,e):typeof t=="boolean"?QOe(t,e):FC(t)?JJ(t,e):ZJ(t,e)}function QOe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(fb(n,{size:e.size}),hb(n,{size:e.size})):n}const cu={zero:48,nine:57,A:65,F:70,a:97,f:102};function OF(t){if(t>=cu.zero&&t<=cu.nine)return t-cu.zero;if(t>=cu.A&&t<=cu.F)return t-(cu.A-10);if(t>=cu.a&&t<=cu.f)return t-(cu.a-10)}function JJ(t,e={}){let n=t;e.size&&(fb(n,{size:e.size}),n=hb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=OF(r.charCodeAt(a++)),l=OF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new vT(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function JOe(t,e){const n=QJ(t,e);return JJ(n)}function ZJ(t,e={}){const n=KOe.encode(t);return typeof e.size=="number"?(fb(n,{size:e.size}),hb(n,{dir:"right",size:e.size})):n}function hI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ZOe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ET(t,...e){if(!ZOe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jVe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hI(t.outputLen),hI(t.blockLen)}function kF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function XOe(t,e){ET(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const IA=BigInt(2**32-1),DF=BigInt(32);function e2e(t,e=!1){return e?{h:Number(t&IA),l:Number(t>>DF&IA)}:{h:Number(t>>DF&IA)|0,l:Number(t&IA)|0}}function t2e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=e2e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const n2e=(t,e,n)=>t<<n|e>>>32-n,r2e=(t,e,n)=>e<<n|t>>>32-n,s2e=(t,e,n)=>e<<n-32|t>>>64-n,i2e=(t,e,n)=>t<<n-32|e>>>64-n,Um=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function o2e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function WVe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function zVe(t,e){return t<<32-e|t>>>e}const MF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function a2e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function LF(t){for(let e=0;e<t.length;e++)t[e]=a2e(t[e])}function c2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function XJ(t){return typeof t=="string"&&(t=c2e(t)),ET(t),t}function HVe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ET(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let l2e=class{clone(){return this._cloneInto()}};function u2e(t){const e=r=>t().update(XJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function qVe(t=32){if(Um&&typeof Um.getRandomValues=="function")return Um.getRandomValues(new Uint8Array(t));if(Um&&typeof Um.randomBytes=="function")return Um.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const eZ=[],tZ=[],nZ=[],d2e=BigInt(0),ov=BigInt(1),h2e=BigInt(2),f2e=BigInt(7),p2e=BigInt(256),g2e=BigInt(113);for(let t=0,e=ov,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],eZ.push(2*(5*r+n)),tZ.push((t+1)*(t+2)/2%64);let s=d2e;for(let i=0;i<7;i++)e=(e<<ov^(e>>f2e)*g2e)%p2e,e&h2e&&(s^=ov<<(ov<<BigInt(i))-ov);nZ.push(s)}const[m2e,y2e]=t2e(nZ,!0),UF=(t,e,n)=>n>32?s2e(t,e,n):n2e(t,e,n),BF=(t,e,n)=>n>32?i2e(t,e,n):r2e(t,e,n);function w2e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=UF(l,u,1)^n[a],h=BF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=tZ[o],c=UF(s,i,a),l=BF(s,i,a),u=eZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=m2e[r],t[1]^=y2e[r]}n.fill(0)}let b2e=class rZ extends l2e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,hI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=o2e(this.state)}keccak(){MF||LF(this.state32),w2e(this.state32,this.rounds),MF||LF(this.state32),this.posOut=0,this.pos=0}update(e){kF(this);const{blockLen:n,state:r}=this;e=XJ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){kF(this,!1),ET(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return hI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(XOe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new rZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const v2e=(t,e,n)=>u2e(()=>new b2e(e,t,n)),E2e=v2e(1,136,256/8);function sZ(t,e){const n=e||"hex",r=E2e(FC(t,{strict:!1})?YOe(t):t);return n==="bytes"?r:e3(r)}class C2e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const lO=new C2e(8192);function _2e(t,e){if(lO.has(`${t}.${e}`))return lO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=sZ(ZJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return lO.set(`${t}.${e}`,i),i}function A2e(t){const e=sZ(`0x${t.substring(4)}`).substring(26);return _2e(`0x${e}`)}async function S2e({hash:t,signature:e}){const n=FC(t)?t:e3(t),{secp256k1:r}=await Xs(async()=>{const{secp256k1:o}=await import("./secp256k1-JUNZb6p8.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=$F(f);return new r.Signature(XD(l),XD(u)).addRecoveryBit(p)}const o=FC(e)?e:e3(e),a=zOe(`0x${o.slice(130)}`),c=$F(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function $F(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function x2e({hash:t,signature:e}){return A2e(await S2e({hash:t,signature:e}))}var I2e={};const N2e=":";function Vy(t){const[e,n]=t.split(N2e);return{namespace:e,reference:n}}function iZ(t,e){return t.includes(":")?[t]:e.chains||[]}var T2e=Object.defineProperty,R2e=Object.defineProperties,P2e=Object.getOwnPropertyDescriptors,FF=Object.getOwnPropertySymbols,O2e=Object.prototype.hasOwnProperty,k2e=Object.prototype.propertyIsEnumerable,jF=(t,e,n)=>e in t?T2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WF=(t,e)=>{for(var n in e||(e={}))O2e.call(e,n)&&jF(t,n,e[n]);if(FF)for(var n of FF(e))k2e.call(e,n)&&jF(t,n,e[n]);return t},D2e=(t,e)=>R2e(t,P2e(e));const M2e="ReactNative",Wo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},L2e="js";function fI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Pf(){return!Dg()&&!!EU()&&navigator.product===M2e}function U2e(){return Pf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function B2e(){return Pf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function pb(){return!fI()&&!!EU()&&!!Dg()}function c1(){return Pf()?Wo.reactNative:fI()?Wo.node:pb()?Wo.browser:Wo.unknown}function zF(){var t;try{return Pf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function $2e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function F2e(t){var e,n;const r=oZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),D2e(WF(WF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function oZ(){return AJ()||{name:"",description:"",url:"",icons:[""]}}function j2e(){if(c1()===Wo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=dIe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function W2e(){var t;const e=c1();return e===Wo.browser?[e,((t=_J())==null?void 0:t.host)||"unknown"].join(":"):e}function aZ(t,e,n){const r=j2e(),s=W2e();return[[t,e].join("-"),[L2e,n].join("-"),r,s].join("/")}function z2e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=aZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=$2e(l[1]||"",d);return l[0]+"?"+h}function xp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function t3(t){return Object.fromEntries(t.entries())}function n3(t){return new Map(Object.entries(t))}function Xf(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Dh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function cZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function H2e(t){return cZ("topic",t)}function G2e(t){return cZ("id",t)}function lZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Hr(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function Yd(t){return Date.now()>=_e.toMiliseconds(t)}function Sn(t,e){return`${t}${e?`:${e}`:""}`}function Ul(t=[],e=[]){return[...new Set([...t,...e])]}async function q2e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=V2e(i,t,e),a=c1();if(a===Wo.browser){if(!((r=Dg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}K2e(o)}else a===Wo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function V2e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Z2e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function K2e(t){let e="_self";J2e()?e="_top":(Q2e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Y2e(t,e){let n="";try{if(pb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function HF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function GF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function SU(){return typeof process<"u"&&I2e.IS_VITEST==="true"}function Q2e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function J2e(){try{return window.self!==window.top}catch{return!1}}function Z2e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function uZ(t){return Buffer.from(t,"base64").toString("utf-8")}function X2e(t){return new Promise(e=>setTimeout(e,t))}function jC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function eke(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function l1(t,...e){if(!eke(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function xU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");jC(t.outputLen),jC(t.blockLen)}function Sw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function dZ(t,e){l1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const NA=BigInt(2**32-1),qF=BigInt(32);function tke(t,e=!1){return e?{h:Number(t&NA),l:Number(t>>qF&NA)}:{h:Number(t>>qF&NA)|0,l:Number(t&NA)|0}}function nke(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=tke(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const rke=(t,e,n)=>t<<n|e>>>32-n,ske=(t,e,n)=>e<<n|t>>>32-n,ike=(t,e,n)=>e<<n-32|t>>>64-n,oke=(t,e,n)=>t<<n-32|e>>>64-n,Bm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ake(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function uO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Kc(t,e){return t<<32-e|t>>>e}const VF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function KF(t){for(let e=0;e<t.length;e++)t[e]=cke(t[e])}function lke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function xw(t){return typeof t=="string"&&(t=lke(t)),l1(t),t}function uke(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];l1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let IU=class{clone(){return this._cloneInto()}};function hZ(t){const e=r=>t().update(xw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gb(t=32){if(Bm&&typeof Bm.getRandomValues=="function")return Bm.getRandomValues(new Uint8Array(t));if(Bm&&typeof Bm.randomBytes=="function")return Bm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const fZ=[],pZ=[],gZ=[],dke=BigInt(0),av=BigInt(1),hke=BigInt(2),fke=BigInt(7),pke=BigInt(256),gke=BigInt(113);for(let t=0,e=av,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],fZ.push(2*(5*r+n)),pZ.push((t+1)*(t+2)/2%64);let s=dke;for(let i=0;i<7;i++)e=(e<<av^(e>>fke)*gke)%pke,e&hke&&(s^=av<<(av<<BigInt(i))-av);gZ.push(s)}const[mke,yke]=nke(gZ,!0),YF=(t,e,n)=>n>32?ike(t,e,n):rke(t,e,n),QF=(t,e,n)=>n>32?oke(t,e,n):ske(t,e,n);function wke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=YF(l,u,1)^n[a],h=QF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=pZ[o],c=YF(s,i,a),l=QF(s,i,a),u=fZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=mke[r],t[1]^=yke[r]}n.fill(0)}let bke=class mZ extends IU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,jC(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ake(this.state)}keccak(){VF||KF(this.state32),wke(this.state32,this.rounds),VF||KF(this.state32),this.posOut=0,this.pos=0}update(e){Sw(this);const{blockLen:n,state:r}=this;e=xw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Sw(this,!1),l1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return jC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(dZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new mZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const vke=(t,e,n)=>hZ(()=>new bke(e,t,n)),Eke=vke(1,136,256/8),Cke="https://rpc.walletconnect.org/v1";function yZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Eke(n)).toString("hex")}async function _ke(t,e,n,r,s,i){switch(n.t){case"eip191":return await Ake(t,e,n.s);case"eip1271":return await Ske(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Ake(t,e,n){return(await x2e({hash:yZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Ske(t,e,n,r,s,i){const o=Vy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=yZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||Cke}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:xke(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function xke(){return Date.now()+Math.floor(Math.random()*1e3)}function Ike(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return SJ.encode(i)}var Nke=Object.defineProperty,Tke=Object.defineProperties,Rke=Object.getOwnPropertyDescriptors,JF=Object.getOwnPropertySymbols,Pke=Object.prototype.hasOwnProperty,Oke=Object.prototype.propertyIsEnumerable,ZF=(t,e,n)=>e in t?Nke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kke=(t,e)=>{for(var n in e||(e={}))Pke.call(e,n)&&ZF(t,n,e[n]);if(JF)for(var n of JF(e))Oke.call(e,n)&&ZF(t,n,e[n]);return t},Dke=(t,e)=>Tke(t,Rke(e));const Mke="did:pkh:",NU=t=>t==null?void 0:t.split(":"),Lke=t=>{const e=t&&NU(t);if(e)return t.includes(Mke)?e[3]:e[1]},r3=t=>{const e=t&&NU(t);if(e)return e[2]+":"+e[3]},pI=t=>{const e=t&&NU(t);if(e)return e.pop()};async function XF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=wZ(s,s.iss),o=pI(s.iss);return await _ke(o,i,r,r3(s.iss),n)}const wZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=pI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Lke(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=xS(t.resources);if(p){const g=WC(p);s=Gke(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Uke(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Bke(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Bg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function $ke(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Fke(e,n,r)}}}function Fke(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function bZ(t){return Bg(t),`urn:recap:${Uke(t).replace(/=/g,"")}`}function WC(t){const e=Bke(t.replace("urn:recap:",""));return Bg(e),e}function jke(t,e,n){const r=$ke(t,e,n);return bZ(r)}function Wke(t){return t&&t.includes("urn:recap:")}function zke(t,e){const n=WC(t),r=WC(e),s=Hke(n,r);return bZ(s)}function Hke(t,e){Bg(t),Bg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Dke(kke({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Gke(t="",e){Bg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function ej(t){var e;const n=WC(t);Bg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function tj(t){const e=WC(t);Bg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function xS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Wke(e)?e:void 0}function dO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function vZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $o(t,...e){if(!vZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qke(t,e){$o(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function rj(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const ef=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Vke=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Kke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Kke)throw new Error("Non little-endian hardware is not supported");function Yke(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function s3(t){if(typeof t=="string")t=Yke(t);else if(vZ(t))t=i3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Qke(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Jke(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Zke=(t,e)=>{function n(r,...s){if($o(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?$o(l):$o(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&$o(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");$o(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,$o(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if($o(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function sj(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Xke(e))throw new Error("invalid output, must be aligned");return e}function ij(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Xke(t){return t.byteOffset%4===0}function i3(t){return Uint8Array.from(t)}function Iw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const EZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),eDe=EZ("expand 16-byte k"),tDe=EZ("expand 32-byte k"),nDe=ef(eDe),rDe=ef(tDe);function hn(t,e){return t<<e|t>>>32-e}function o3(t){return t.byteOffset%4===0}const TA=64,sDe=16,CZ=2**32-1,oj=new Uint32Array;function iDe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(TA),u=ef(l),d=o3(s)&&o3(i),h=d?ef(s):oj,f=d?ef(i):oj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=CZ)throw new Error("arx: counter overflow");const g=Math.min(TA,c-p);if(d&&g===TA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,b;m<sDe;m++)b=w+m,f[b]=h[b]^u[m];p+=TA;continue}for(let w=0,m;w<g;w++)m=p+w,i[m]=s[m]^l[w];p+=g}}function oDe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Qke({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return dO(s),dO(o),rj(i),rj(n),(a,c,l,u,d=0)=>{$o(a),$o(c),$o(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),$o(u),dO(d),d<0||d>=CZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=i3(a)),w=rDe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=nDe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);o3(c)||f.push(c=i3(c));const m=ef(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,m,ef(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=ef(c);return iDe(t,w,m,v,l,u,d,o),Iw(...f),u}}const _s=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class aDe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=s3(e),$o(e,32);const n=_s(e,0),r=_s(e,2),s=_s(e,4),i=_s(e,6),o=_s(e,8),a=_s(e,10),c=_s(e,12),l=_s(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=_s(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],m=_s(e,n+0),b=_s(e,n+2),v=_s(e,n+4),A=_s(e,n+6),C=_s(e,n+8),T=_s(e,n+10),x=_s(e,n+12),N=_s(e,n+14);let S=i[0]+(m&8191),D=i[1]+((m>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),$=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),I=i[6]+((C>>>14|T<<2)&8191),R=i[7]+((T>>>11|x<<5)&8191),B=i[8]+((x>>>8|N<<8)&8191),O=i[9]+(N>>>5|s),M=0,j=M+S*a+D*(5*w)+P*(5*g)+$*(5*p)+G*(5*f);M=j>>>13,j&=8191,j+=W*(5*h)+I*(5*d)+R*(5*u)+B*(5*l)+O*(5*c),M+=j>>>13,j&=8191;let V=M+S*c+D*a+P*(5*w)+$*(5*g)+G*(5*p);M=V>>>13,V&=8191,V+=W*(5*f)+I*(5*h)+R*(5*d)+B*(5*u)+O*(5*l),M+=V>>>13,V&=8191;let se=M+S*l+D*c+P*a+$*(5*w)+G*(5*g);M=se>>>13,se&=8191,se+=W*(5*p)+I*(5*f)+R*(5*h)+B*(5*d)+O*(5*u),M+=se>>>13,se&=8191;let ie=M+S*u+D*l+P*c+$*a+G*(5*w);M=ie>>>13,ie&=8191,ie+=W*(5*g)+I*(5*p)+R*(5*f)+B*(5*h)+O*(5*d),M+=ie>>>13,ie&=8191;let Q=M+S*d+D*u+P*l+$*c+G*a;M=Q>>>13,Q&=8191,Q+=W*(5*w)+I*(5*g)+R*(5*p)+B*(5*f)+O*(5*h),M+=Q>>>13,Q&=8191;let te=M+S*h+D*d+P*u+$*l+G*c;M=te>>>13,te&=8191,te+=W*a+I*(5*w)+R*(5*g)+B*(5*p)+O*(5*f),M+=te>>>13,te&=8191;let pe=M+S*f+D*h+P*d+$*u+G*l;M=pe>>>13,pe&=8191,pe+=W*c+I*a+R*(5*w)+B*(5*g)+O*(5*p),M+=pe>>>13,pe&=8191;let Ze=M+S*p+D*f+P*h+$*d+G*u;M=Ze>>>13,Ze&=8191,Ze+=W*l+I*c+R*a+B*(5*w)+O*(5*g),M+=Ze>>>13,Ze&=8191;let Xe=M+S*g+D*p+P*f+$*h+G*d;M=Xe>>>13,Xe&=8191,Xe+=W*u+I*l+R*c+B*a+O*(5*w),M+=Xe>>>13,Xe&=8191;let We=M+S*w+D*g+P*p+$*f+G*h;M=We>>>13,We&=8191,We+=W*d+I*u+R*l+B*c+O*a,M+=We>>>13,We&=8191,M=(M<<2)+M|0,M=M+j|0,j=M&8191,M=M>>>13,V+=M,i[0]=j,i[1]=V,i[2]=se,i[3]=ie,i[4]=Q,i[5]=te,i[6]=pe,i[7]=Ze,i[8]=Xe,i[9]=We}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Iw(r)}update(e){nj(this);const{buffer:n,blockLen:r}=this;e=s3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Iw(this.h,this.r,this.buffer,this.pad)}digestInto(e){nj(this),qke(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function cDe(t){const e=(r,s)=>t(s).update(s3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const lDe=cDe(t=>new aDe(t));function uDe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],m=e[7],b=s,v=n[0],A=n[1],C=n[2],T=o,x=a,N=c,S=l,D=u,P=d,$=h,G=f,W=p,I=g,R=w,B=m,O=b,M=v,j=A,V=C;for(let ie=0;ie<i;ie+=2)T=T+D|0,O=hn(O^T,16),W=W+O|0,D=hn(D^W,12),T=T+D|0,O=hn(O^T,8),W=W+O|0,D=hn(D^W,7),x=x+P|0,M=hn(M^x,16),I=I+M|0,P=hn(P^I,12),x=x+P|0,M=hn(M^x,8),I=I+M|0,P=hn(P^I,7),N=N+$|0,j=hn(j^N,16),R=R+j|0,$=hn($^R,12),N=N+$|0,j=hn(j^N,8),R=R+j|0,$=hn($^R,7),S=S+G|0,V=hn(V^S,16),B=B+V|0,G=hn(G^B,12),S=S+G|0,V=hn(V^S,8),B=B+V|0,G=hn(G^B,7),T=T+P|0,V=hn(V^T,16),R=R+V|0,P=hn(P^R,12),T=T+P|0,V=hn(V^T,8),R=R+V|0,P=hn(P^R,7),x=x+$|0,O=hn(O^x,16),B=B+O|0,$=hn($^B,12),x=x+$|0,O=hn(O^x,8),B=B+O|0,$=hn($^B,7),N=N+G|0,M=hn(M^N,16),W=W+M|0,G=hn(G^W,12),N=N+G|0,M=hn(M^N,8),W=W+M|0,G=hn(G^W,7),S=S+D|0,j=hn(j^S,16),I=I+j|0,D=hn(D^I,12),S=S+D|0,j=hn(j^S,8),I=I+j|0,D=hn(D^I,7);let se=0;r[se++]=o+T|0,r[se++]=a+x|0,r[se++]=c+N|0,r[se++]=l+S|0,r[se++]=u+D|0,r[se++]=d+P|0,r[se++]=h+$|0,r[se++]=f+G|0,r[se++]=p+W|0,r[se++]=g+I|0,r[se++]=w+R|0,r[se++]=m+B|0,r[se++]=b+O|0,r[se++]=v+M|0,r[se++]=A+j|0,r[se++]=C+V|0}const dDe=oDe(uDe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),hDe=new Uint8Array(16),aj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(hDe.subarray(n))},fDe=new Uint8Array(32);function cj(t,e,n,r,s){const i=t(e,n,fDe),o=lDe.create(i);s&&aj(o,s),aj(o,r);const a=new Uint8Array(16),c=Vke(a);ij(c,0,BigInt(s?s.length:0),!0),ij(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Iw(i,a),l}const pDe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=sj(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=cj(t,e,n,a,r);return i.set(c,o),Iw(c),i},decrypt(s,i){i=sj(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=cj(t,e,n,o,r);if(!Jke(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Iw(c),i}}),_Z=Zke({blockSize:64,nonceLength:12,tagLength:16},pDe(dDe));let AZ=class extends IU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,xU(e);const r=xw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Sw(this),this.iHash.update(e),this}digestInto(e){Sw(this),l1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CT=(t,e,n)=>new AZ(t,e).update(n).digest();CT.create=(t,e)=>new AZ(t,e);function gDe(t,e,n){return xU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),CT(t,xw(n),xw(e))}const hO=new Uint8Array([0]),lj=new Uint8Array;function mDe(t,e,n,r=32){if(xU(t),jC(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=lj);const i=new Uint8Array(s*t.outputLen),o=CT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)hO[0]=l+1,a.update(l===0?lj:c).update(n).update(hO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),hO.fill(0),i.slice(0,r)}const yDe=(t,e,n,r,s)=>mDe(t,gDe(t,e,n),r,s);function wDe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function bDe(t,e,n){return t&e^~t&n}function vDe(t,e,n){return t&e^t&n^e&n}let EDe=class extends IU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=uO(this.buffer)}update(e){Sw(this);const{view:n,buffer:r,blockLen:s}=this;e=xw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=uO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sw(this),dZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;wDe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=uO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const CDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dd=new Uint32Array(64);class _De extends EDe{constructor(){super(64,32,8,!1),this.A=kd[0]|0,this.B=kd[1]|0,this.C=kd[2]|0,this.D=kd[3]|0,this.E=kd[4]|0,this.F=kd[5]|0,this.G=kd[6]|0,this.H=kd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Dd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Dd[d-15],f=Dd[d-2],p=Kc(h,7)^Kc(h,18)^h>>>3,g=Kc(f,17)^Kc(f,19)^f>>>10;Dd[d]=g+Dd[d-7]+p+Dd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Kc(a,6)^Kc(a,11)^Kc(a,25),f=u+h+bDe(a,c,l)+CDe[d]+Dd[d]|0,p=(Kc(r,2)^Kc(r,13)^Kc(r,22))+vDe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Dd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const u1=hZ(()=>new _De);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _T=BigInt(0),AT=BigInt(1),ADe=BigInt(2);function $g(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function d1(t){if(!$g(t))throw new Error("Uint8Array expected")}function Nw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const SDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tw(t){d1(t);let e="";for(let n=0;n<t.length;n++)e+=SDe[t[n]];return e}function Iy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function TU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_T:BigInt("0x"+t)}const lu={_0:48,_9:57,A:65,F:70,a:97,f:102};function uj(t){if(t>=lu._0&&t<=lu._9)return t-lu._0;if(t>=lu.A&&t<=lu.F)return t-(lu.A-10);if(t>=lu.a&&t<=lu.f)return t-(lu.a-10)}function Rw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=uj(t.charCodeAt(i)),a=uj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function dg(t){return TU(Tw(t))}function zC(t){return d1(t),TU(Tw(Uint8Array.from(t).reverse()))}function Pw(t,e){return Rw(t.toString(16).padStart(e*2,"0"))}function ST(t,e){return Pw(t,e).reverse()}function xDe(t){return Rw(Iy(t))}function Uo(t,e,n){let r;if(typeof e=="string")try{r=Rw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if($g(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function HC(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];d1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function IDe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function NDe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const fO=t=>typeof t=="bigint"&&_T<=t;function xT(t,e,n){return fO(t)&&fO(e)&&fO(n)&&e<=t&&t<n}function Yu(t,e,n,r){if(!xT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function SZ(t){let e;for(e=0;t>_T;t>>=AT,e+=1);return e}function TDe(t,e){return t>>BigInt(e)&AT}function RDe(t,e,n){return t|(n?AT:_T)<<BigInt(e)}const RU=t=>(ADe<<BigInt(t-1))-AT,pO=t=>new Uint8Array(t),dj=t=>Uint8Array.from(t);function xZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=pO(t),s=pO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=pO())=>{s=a(dj([0]),u),r=a(),u.length!==0&&(s=a(dj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return HC(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const PDe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||$g(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function mb(t,e,n={}){const r=(s,i,o)=>{const a=PDe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const ODe=()=>{throw new Error("not implemented")};function a3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var kDe=Object.freeze({__proto__:null,isBytes:$g,abytes:d1,abool:Nw,bytesToHex:Tw,numberToHexUnpadded:Iy,hexToNumber:TU,hexToBytes:Rw,bytesToNumberBE:dg,bytesToNumberLE:zC,numberToBytesBE:Pw,numberToBytesLE:ST,numberToVarBytesBE:xDe,ensureBytes:Uo,concatBytes:HC,equalBytes:IDe,utf8ToBytes:NDe,inRange:xT,aInRange:Yu,bitLen:SZ,bitGet:TDe,bitSet:RDe,bitMask:RU,createHmacDrbg:xZ,validateObject:mb,notImplemented:ODe,memoized:a3});const ws=BigInt(0),kr=BigInt(1),op=BigInt(2),DDe=BigInt(3),c3=BigInt(4),hj=BigInt(5),fj=BigInt(8);function Ji(t,e){const n=t%e;return n>=ws?n:e+n}function IZ(t,e,n){if(e<ws)throw new Error("invalid exponent, negatives unsupported");if(n<=ws)throw new Error("invalid modulus");if(n===kr)return ws;let r=kr;for(;e>ws;)e&kr&&(r=r*t%n),t=t*t%n,e>>=kr;return r}function rc(t,e,n){let r=t;for(;e-- >ws;)r*=r,r%=n;return r}function l3(t,e){if(t===ws)throw new Error("invert: expected non-zero number");if(e<=ws)throw new Error("invert: expected positive modulus, got "+e);let n=Ji(t,e),r=e,s=ws,i=kr;for(;n!==ws;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==kr)throw new Error("invert: does not exist");return Ji(s,e)}function MDe(t){const e=(t-kr)/op;let n,r,s;for(n=t-kr,r=0;n%op===ws;n/=op,r++);for(s=op;s<t&&IZ(s,e,t)!==t-kr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+kr)/c3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+kr)/op;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,kr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function LDe(t){if(t%c3===DDe){const e=(t+kr)/c3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%fj===hj){const e=(t-hj)/fj;return function(n,r){const s=n.mul(r,op),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,op),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return MDe(t)}const UDe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function BDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=UDe.reduce((r,s)=>(r[s]="function",r),e);return mb(t,n)}function $De(t,e,n){if(n<ws)throw new Error("invalid exponent, negatives unsupported");if(n===ws)return t.ONE;if(n===kr)return e;let r=t.ONE,s=e;for(;n>ws;)n&kr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=kr;return r}function FDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function NZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function TZ(t,e,n=!1,r={}){if(t<=ws)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=NZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:RU(s),ZERO:ws,ONE:kr,create:c=>Ji(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ws<=c&&c<t},is0:c=>c===ws,isOdd:c=>(c&kr)===kr,neg:c=>Ji(-c,t),eql:(c,l)=>c===l,sqr:c=>Ji(c*c,t),add:(c,l)=>Ji(c+l,t),sub:(c,l)=>Ji(c-l,t),mul:(c,l)=>Ji(c*l,t),pow:(c,l)=>$De(a,c,l),div:(c,l)=>Ji(c*l3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>l3(c,t),sqrt:r.sqrt||(c=>(o||(o=LDe(t)),o(a,c))),invertBatch:c=>FDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?ST(c,i):Pw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?zC(c):dg(c)}});return Object.freeze(a)}function RZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function PZ(t){const e=RZ(t);return e+Math.ceil(e/2)}function jDe(t,e,n=!1){const r=t.length,s=RZ(e),i=PZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?zC(t):dg(t),a=Ji(o,e-kr)+kr;return n?ST(a,s):Pw(a,s)}const pj=BigInt(0),RA=BigInt(1);function gO(t,e){const n=e.negate();return t?n:e}function OZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function mO(t,e){OZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function WDe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function zDe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const yO=new WeakMap,kZ=new WeakMap;function wO(t){return kZ.get(t)||1}function HDe(t,e){return{constTimeNegate:gO,hasPrecomputes(n){return wO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>pj;)r&RA&&(s=s.add(i)),i=i.double(),r>>=RA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=mO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=mO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=RA);const g=f,w=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(gO(m,r[g])):a=a.add(gO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=mO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===pj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=RA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=yO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&yO.set(r,s(i))),i},wNAFCached(n,r,s){const i=wO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=wO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){OZ(r,e),kZ.set(n,r),yO.delete(n)}}}function GDe(t,e,n,r){if(WDe(n,t),zDe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=SZ(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function DZ(t){return BDe(t.Fp),mb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const $m=BigInt(0),bO=BigInt(1);function qDe(t){return mb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function VDe(t){const e=qDe(t),{P:n}=e,r=b=>Ji(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>IZ(b,n-BigInt(2),n));function l(b,v,A){const C=r(b*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){Yu("u",b,$m,n),Yu("scalar",v,$m,n);const A=v,C=b;let T=bO,x=$m,N=b,S=bO,D=$m,P;for(let G=BigInt(s-1);G>=$m;G--){const W=A>>G&bO;D^=W,P=l(D,T,N),T=P[0],N=P[1],P=l(D,x,S),x=P[0],S=P[1],D=W;const I=T+x,R=r(I*I),B=T-x,O=r(B*B),M=R-O,j=N+S,V=N-S,se=r(V*I),ie=r(j*B),Q=se+ie,te=se-ie;N=r(Q*Q),S=r(C*r(te*te)),T=r(R*O),x=r(M*(R+r(u*M)))}P=l(D,T,N),T=P[0],N=P[1],P=l(D,x,S),x=P[0],S=P[1];const $=c(x);return r(T*$)}function h(b){return ST(r(b),i)}function f(b){const v=Uo("u coordinate",b,i);return o===32&&(v[31]&=127),zC(v)}function p(b){const v=Uo("scalar",b),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return zC(a(v))}function g(b,v){const A=f(v),C=p(b),T=d(A,C);if(T===$m)throw new Error("invalid private or public key received");return h(T)}const w=h(e.Gu);function m(b){return g(b,w)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>m(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const u3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const KDe=BigInt(1),gj=BigInt(2),YDe=BigInt(3),QDe=BigInt(5);BigInt(8);function JDe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=u3,o=t*t%i*t%i,a=rc(o,gj,i)*o%i,c=rc(a,KDe,i)*t%i,l=rc(c,QDe,i)*c%i,u=rc(l,e,i)*l%i,d=rc(u,n,i)*u%i,h=rc(d,r,i)*d%i,f=rc(h,s,i)*h%i,p=rc(f,s,i)*h%i,g=rc(p,e,i)*l%i;return{pow_p_5_8:rc(g,gj,i)*t%i,b2:o}}function ZDe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const d3=VDe({P:u3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=u3,{pow_p_5_8:n,b2:r}=JDe(t);return Ji(rc(n,YDe,e)*r,e)},adjustScalarBytes:ZDe,randomBytes:gb});function mj(t){t.lowS!==void 0&&Nw("lowS",t.lowS),t.prehash!==void 0&&Nw("prehash",t.prehash)}function XDe(t){const e=DZ(t);mb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:e3e,hexToBytes:t3e}=kDe;class n3e extends Error{constructor(e=""){super(e)}}const Eu={Err:n3e,_tlv:{encode:(t,e)=>{const{Err:n}=Eu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Iy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Iy(s.length/2|128):"";return Iy(t)+i+s+e},decode(t,e){const{Err:n}=Eu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Eu;if(t<Uu)throw new e("integer: negative integers are not allowed");let n=Iy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Eu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return e3e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Eu,s=typeof t=="string"?t3e(t):t;d1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Eu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Uu=BigInt(0),cs=BigInt(1);BigInt(2);const yj=BigInt(3);BigInt(4);function r3e(t){const e=XDe(t),{Fp:n}=e,r=TZ(e.n,e.nBitLength),s=e.toBytes||((g,w,m)=>{const b=w.toAffine();return HC(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),m=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:m,y:b}});function o(g){const{a:w,b:m}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return xT(g,cs,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:m,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if($g(g)&&(g=Tw(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:dg(Uo("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return b&&(A=Ji(A,v)),Yu("private key",A,cs,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=a3((g,w)=>{const{px:m,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const C=n.mul(m,w),T=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:T}}),d=a3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y:m}=g.toAffine();if(!n.isValid(w)||!n.isValid(m))throw new Error("bad point: x or y not FE");const b=n.sqr(m),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,m,b){if(this.px=w,this.py=m,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:m,y:b}=w||{};if(!w||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(b)?h.ZERO:new h(m,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const m=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(m[v])).map(h.fromAffine)}static fromHex(w){const m=h.fromAffine(i(Uo("pointHex",w)));return m.assertValidity(),m}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,m){return GDe(h,r,w,m)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:T}=w,x=n.eql(n.mul(m,T),n.mul(A,v)),N=n.eql(n.mul(b,T),n.mul(C,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:m}=e,b=n.mul(m,yj),{px:v,py:A,pz:C}=this;let T=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),D=n.mul(A,A),P=n.mul(C,C),$=n.mul(v,A);return $=n.add($,$),N=n.mul(v,C),N=n.add(N,N),T=n.mul(w,N),x=n.mul(b,P),x=n.add(T,x),T=n.sub(D,x),x=n.add(D,x),x=n.mul(T,x),T=n.mul($,T),N=n.mul(b,N),P=n.mul(w,P),$=n.sub(S,P),$=n.mul(w,$),$=n.add($,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,$),x=n.add(x,S),P=n.mul(A,C),P=n.add(P,P),S=n.mul(P,$),T=n.sub(T,S),N=n.mul(P,D),N=n.add(N,N),N=n.add(N,N),new h(T,x,N)}add(w){l(w);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:T}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const D=e.a,P=n.mul(e.b,yj);let $=n.mul(m,A),G=n.mul(b,C),W=n.mul(v,T),I=n.add(m,b),R=n.add(A,C);I=n.mul(I,R),R=n.add($,G),I=n.sub(I,R),R=n.add(m,v);let B=n.add(A,T);return R=n.mul(R,B),B=n.add($,W),R=n.sub(R,B),B=n.add(b,v),x=n.add(C,T),B=n.mul(B,x),x=n.add(G,W),B=n.sub(B,x),S=n.mul(D,R),x=n.mul(P,W),S=n.add(x,S),x=n.sub(G,S),S=n.add(G,S),N=n.mul(x,S),G=n.add($,$),G=n.add(G,$),W=n.mul(D,W),R=n.mul(P,R),G=n.add(G,W),W=n.sub($,W),W=n.mul(D,W),R=n.add(R,W),$=n.mul(G,R),N=n.add(N,$),$=n.mul(B,R),x=n.mul(I,x),x=n.sub(x,$),$=n.mul(I,G),S=n.mul(B,S),S=n.add(S,$),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:m,n:b}=e;Yu("scalar",w,Uu,b);const v=h.ZERO;if(w===Uu)return v;if(this.is0()||w===cs)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:C,k2neg:T,k2:x}=m.splitScalar(w),N=v,S=v,D=this;for(;C>Uu||x>Uu;)C&cs&&(N=N.add(D)),x&cs&&(S=S.add(D)),D=D.double(),C>>=cs,x>>=cs;return A&&(N=N.negate()),T&&(S=S.negate()),S=new h(n.mul(S.px,m.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:m,n:b}=e;Yu("scalar",w,cs,b);let v,A;if(m){const{k1neg:C,k1:T,k2neg:x,k2:N}=m.splitScalar(w);let{p:S,f:D}=this.wNAF(T),{p:P,f:$}=this.wNAF(N);S=p.constTimeNegate(C,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,m.beta),P.py,P.pz),v=S.add(P),A=D.add($)}else{const{p:C,f:T}=this.wNAF(w);v=C,A=T}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,m,b){const v=h.BASE,A=(T,x)=>x===Uu||x===cs||!T.equals(v)?T.multiplyUnsafe(x):T.multiply(x),C=A(this,m).add(A(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:m}=e;if(w===cs)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:m}=e;return w===cs?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Nw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Nw("isCompressed",w),Tw(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=HDe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function s3e(t){const e=DZ(t);return mb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function i3e(t){const e=s3e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return Ji(W,r)}function a(W){return l3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=r3e({...e,toBytes(W,I,R){const B=I.toAffine(),O=n.toBytes(B.x),M=HC;return Nw("isCompressed",R),R?M(Uint8Array.from([I.hasEvenY()?2:3]),O):M(Uint8Array.from([4]),O,n.toBytes(B.y))},fromBytes(W){const I=W.length,R=W[0],B=W.subarray(1);if(I===s&&(R===2||R===3)){const O=dg(B);if(!xT(O,cs,n.ORDER))throw new Error("Point is not on curve");const M=u(O);let j;try{j=n.sqrt(M)}catch(se){const ie=se instanceof Error?": "+se.message:"";throw new Error("Point is not on curve"+ie)}const V=(j&cs)===cs;return(R&1)===1!==V&&(j=n.neg(j)),{x:O,y:j}}else if(I===i&&R===4){const O=n.fromBytes(B.subarray(0,n.BYTES)),M=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:O,y:M}}else{const O=s,M=i;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+M+", got "+I)}}}),h=W=>Tw(Pw(W,e.nByteLength));function f(W){const I=r>>cs;return W>I}function p(W){return f(W)?o(-W):W}const g=(W,I,R)=>dg(W.slice(I,R));class w{constructor(I,R,B){this.r=I,this.s=R,this.recovery=B,this.assertValidity()}static fromCompact(I){const R=e.nByteLength;return I=Uo("compactSignature",I,R*2),new w(g(I,0,R),g(I,R,2*R))}static fromDER(I){const{r:R,s:B}=Eu.toSig(Uo("DER",I));return new w(R,B)}assertValidity(){Yu("r",this.r,cs,r),Yu("s",this.s,cs,r)}addRecoveryBit(I){return new w(this.r,this.s,I)}recoverPublicKey(I){const{r:R,s:B,recovery:O}=this,M=T(Uo("msgHash",I));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const j=O===2||O===3?R+e.n:R;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=O&1?"03":"02",se=c.fromHex(V+h(j)),ie=a(j),Q=o(-M*ie),te=o(B*ie),pe=c.BASE.multiplyAndAddUnsafe(se,Q,te);if(!pe)throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Rw(this.toDERHex())}toDERHex(){return Eu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rw(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=PZ(e.n);return jDe(e.randomBytes(W),e.n)},precompute(W=8,I=c.BASE){return I._setWindowSize(W),I.multiply(BigInt(3)),I}};function b(W,I=!0){return c.fromPrivateKey(W).toRawBytes(I)}function v(W){const I=$g(W),R=typeof W=="string",B=(I||R)&&W.length;return I?B===s||B===i:R?B===2*s||B===2*i:W instanceof c}function A(W,I,R=!0){if(v(W))throw new Error("first arg must be private key");if(!v(I))throw new Error("second arg must be public key");return c.fromHex(I).multiply(l(W)).toRawBytes(R)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const I=dg(W),R=W.length*8-e.nBitLength;return R>0?I>>BigInt(R):I},T=e.bits2int_modN||function(W){return o(C(W))},x=RU(e.nBitLength);function N(W){return Yu("num < 2^"+e.nBitLength,W,Uu,x),Pw(W,e.nByteLength)}function S(W,I,R=D){if(["recovered","canonical"].some(Xe=>Xe in R))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:O}=e;let{lowS:M,prehash:j,extraEntropy:V}=R;M==null&&(M=!0),W=Uo("msgHash",W),mj(R),j&&(W=Uo("prehashed msgHash",B(W)));const se=T(W),ie=l(I),Q=[N(ie),N(se)];if(V!=null&&V!==!1){const Xe=V===!0?O(n.BYTES):V;Q.push(Uo("extraEntropy",Xe))}const te=HC(...Q),pe=se;function Ze(Xe){const We=C(Xe);if(!d(We))return;const mt=a(We),Ot=c.BASE.multiply(We).toAffine(),ln=o(Ot.x);if(ln===Uu)return;const X=o(mt*o(pe+ln*ie));if(X===Uu)return;let ce=(Ot.x===ln?0:2)|Number(Ot.y&cs),he=X;return M&&f(X)&&(he=p(X),ce^=1),new w(ln,he,ce)}return{seed:te,k2sig:Ze}}const D={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function $(W,I,R=D){const{seed:B,k2sig:O}=S(W,I,R),M=e;return xZ(M.hash.outputLen,M.nByteLength,M.hmac)(B,O)}c.BASE._setWindowSize(8);function G(W,I,R,B=P){var X;const O=W;I=Uo("msgHash",I),R=Uo("publicKey",R);const{lowS:M,prehash:j,format:V}=B;if(mj(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&V!=="compact"&&V!=="der")throw new Error("format must be compact or der");const se=typeof O=="string"||$g(O),ie=!se&&!V&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!se&&!ie)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Q,te;try{if(ie&&(Q=new w(O.r,O.s)),se){try{V!=="compact"&&(Q=w.fromDER(O))}catch(ce){if(!(ce instanceof Eu.Err))throw ce}!Q&&V!=="der"&&(Q=w.fromCompact(O))}te=c.fromHex(R)}catch{return!1}if(!Q||M&&Q.hasHighS())return!1;j&&(I=e.hash(I));const{r:pe,s:Ze}=Q,Xe=T(I),We=a(Ze),mt=o(Xe*We),Ot=o(pe*We),ln=(X=c.BASE.multiplyAndAddUnsafe(te,mt,Ot))==null?void 0:X.toAffine();return ln?o(ln.x)===pe:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:$,verify:G,ProjectivePoint:c,Signature:w,utils:m}}function o3e(t){return{hash:t,hmac:(e,...n)=>CT(t,e,uke(...n)),randomBytes:gb}}function a3e(t,e){const n=r=>i3e({...t,...o3e(r)});return{...n(e),create:n}}const MZ=TZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),c3e=MZ.create(BigInt("-3")),l3e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),u3e=a3e({a:c3e,b:l3e,Fp:MZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},u1),LZ="base10",xi="base16",Nc="base64pad",th="base64url",h1="utf8",UZ=0,Qu=1,f1=2,d3e=0,wj=1,yE=12,PU=32;function h3e(){const t=d3.utils.randomPrivateKey(),e=d3.getPublicKey(t);return{privateKey:uo(t,xi),publicKey:uo(e,xi)}}function h3(){const t=gb(PU);return uo(t,xi)}function f3e(t,e){const n=d3.getSharedSecret(Ra(t,xi),Ra(e,xi)),r=yDe(u1,n,void 0,void 0,PU);return uo(r,xi)}function IS(t){const e=u1(Ra(t,xi));return uo(e,xi)}function vl(t){const e=u1(Ra(t,h1));return uo(e,xi)}function BZ(t){return Ra(`${t}`,LZ)}function Fg(t){return Number(uo(t,LZ))}function $Z(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function FZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function p3e(t){const e=BZ(typeof t.type<"u"?t.type:UZ);if(Fg(e)===Qu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ra(t.senderPublicKey,xi):void 0,r=typeof t.iv<"u"?Ra(t.iv,xi):gb(yE),s=Ra(t.symKey,xi),i=_Z(s,r).encrypt(Ra(t.message,h1)),o=jZ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===th?$Z(o):o}function g3e(t){const e=Ra(t.symKey,xi),{sealed:n,iv:r}=GC({encoded:t.encoded,encoding:t.encoding}),s=_Z(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return uo(s,h1)}function m3e(t,e){const n=BZ(f1),r=gb(yE),s=Ra(t,h1),i=jZ({type:n,sealed:s,iv:r});return e===th?$Z(i):i}function y3e(t,e){const{sealed:n}=GC({encoded:t,encoding:e});return uo(n,h1)}function jZ(t){if(Fg(t.type)===f1)return uo(pE([t.type,t.sealed]),Nc);if(Fg(t.type)===Qu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return uo(pE([t.type,t.senderPublicKey,t.iv,t.sealed]),Nc)}return uo(pE([t.type,t.iv,t.sealed]),Nc)}function GC(t){const e=(t.encoding||Nc)===th?FZ(t.encoded):t.encoded,n=Ra(e,Nc),r=n.slice(d3e,wj),s=wj;if(Fg(r)===Qu){const c=s+PU,l=c+yE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Fg(r)===f1){const c=n.slice(s),l=gb(yE);return{type:r,sealed:c,iv:l}}const i=s+yE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function w3e(t,e){const n=GC({encoded:t,encoding:e==null?void 0:e.encoding});return WZ({type:Fg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?uo(n.senderPublicKey,xi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function WZ(t){const e=(t==null?void 0:t.type)||UZ;if(e===Qu){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function bj(t){return t.type===Qu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function vj(t){return t.type===f1}function b3e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return pE([new Uint8Array([4]),e,n])}function v3e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(FZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=u1(c),u=b3e(e);if(!u3e.verify(pE([o,a]),l,u))throw new Error("Invalid signature");return WD(t).payload}const E3e="irn";function gI(t){return(t==null?void 0:t.relay)||{protocol:E3e}}function Tv(t){const e=xNe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function C3e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function Ej(t){if(!t.includes("wc:")){const l=uZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:_3e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:C3e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function _3e(t){return t.startsWith("//")?t.substring(2):t}function A3e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Cj(t){const e=new URLSearchParams,n=A3e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function PA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var S3e=Object.defineProperty,x3e=Object.defineProperties,I3e=Object.getOwnPropertyDescriptors,_j=Object.getOwnPropertySymbols,N3e=Object.prototype.hasOwnProperty,T3e=Object.prototype.propertyIsEnumerable,Aj=(t,e,n)=>e in t?S3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R3e=(t,e)=>{for(var n in e||(e={}))N3e.call(e,n)&&Aj(t,n,e[n]);if(_j)for(var n of _j(e))T3e.call(e,n)&&Aj(t,n,e[n]);return t},P3e=(t,e)=>x3e(t,I3e(e));function yb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function O3e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...yb(n.accounts))}),e}function k3e(t,e){const n=[];return Object.values(t).forEach(r=>{yb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function D3e(t,e){const n=[];return Object.values(t).forEach(r=>{yb(r.accounts).includes(e)&&n.push(...r.events)}),n}function IT(t){return t.includes(":")}function Ny(t){return IT(t)?t.split(":")[0]:t}function Sj(t){var e,n,r;const s={};if(!nf(t))return s;for(const[i,o]of Object.entries(t)){const a=IT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Ny(i);s[u]=P3e(R3e({},s[u]),{chains:Ul(a,(e=s[u])==null?void 0:e.chains),methods:Ul(c,(n=s[u])==null?void 0:n.methods),events:Ul(l,(r=s[u])==null?void 0:r.events)})}return s}function M3e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function xj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=M3e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Ul(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function L3e(t,e){var n,r,s,i,o,a;const c=Sj(t),l=Sj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Ul((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Ul((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Ul((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const U3e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},B3e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(t,e){const{message:n,code:r}=B3e[t];return{message:e?`${n} ${e}`:n,code:r}}function Bn(t,e){const{message:n,code:r}=U3e[t];return{message:e?`${n} ${e}`:n,code:r}}function tf(t,e){return!!Array.isArray(t)}function nf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ps(t){return typeof t>"u"}function Br(t,e){return e&&Ps(t)?!0:typeof t=="string"&&!!t.trim().length}function OU(t,e){return e&&Ps(t)?!0:typeof t=="number"&&!isNaN(t)}function $3e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return xp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=yb(a),d=n[o];(!xp(iZ(o,d),u)||!xp(d.methods,c)||!xp(d.events,l))&&(i=!1)}),i):!1}function mI(t){return Br(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function F3e(t){if(Br(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&mI(n)}}return!1}function j3e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Br(t,!1)){if(e(t))return!0;const n=uZ(t);return e(n)}}catch{}return!1}function W3e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function z3e(t){return t==null?void 0:t.topic}function H3e(t,e){let n=null;return Br(t==null?void 0:t.publicKey,!1)||(n=xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Ij(t){let e=!0;return tf(t)?t.length&&(e=t.every(n=>Br(n,!1))):e=!1,e}function G3e(t,e,n){let r=null;return tf(e)&&e.length?e.forEach(s=>{r||mI(s)||(r=Bn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):mI(t)||(r=Bn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function q3e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=G3e(s,iZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function V3e(t,e){let n=null;return tf(t)?t.forEach(r=>{n||F3e(r)||(n=Bn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Bn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function K3e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=V3e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function Y3e(t,e){let n=null;return Ij(t==null?void 0:t.methods)?Ij(t==null?void 0:t.events)||(n=Bn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Bn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function zZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Y3e(r,`${e}, namespace`);s&&(n=s)}),n}function Q3e(t,e,n){let r=null;if(t&&nf(t)){const s=zZ(t,e);s&&(r=s);const i=q3e(t,e,n);i&&(r=i)}else r=xe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function vO(t,e){let n=null;if(t&&nf(t)){const r=zZ(t,e);r&&(n=r);const s=K3e(t,e);s&&(n=s)}else n=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function HZ(t){return Br(t.protocol,!0)}function J3e(t,e){let n=!1;return t?t&&tf(t)&&t.length&&t.forEach(r=>{n=HZ(r)}):n=!0,n}function Z3e(t){return typeof t=="number"}function zi(t){return typeof t<"u"&&typeof t!==null}function X3e(t){return!(!t||typeof t!="object"||!t.code||!OU(t.code,!1)||!t.message||!Br(t.message,!1))}function e5e(t){return!(Ps(t)||!Br(t.method,!1))}function t5e(t){return!(Ps(t)||Ps(t.result)&&Ps(t.error)||!OU(t.id,!1)||!Br(t.jsonrpc,!1))}function n5e(t){return!(Ps(t)||!Br(t.name,!1))}function Nj(t,e){return!(!mI(e)||!O3e(t).includes(e))}function r5e(t,e,n){return Br(n,!1)?k3e(t,e).includes(n):!1}function s5e(t,e,n){return Br(n,!1)?D3e(t,e).includes(n):!1}function Tj(t,e,n){let r=null;const s=i5e(t),i=o5e(e),o=Object.keys(s),a=Object.keys(i),c=Rj(Object.keys(t)),l=Rj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),xp(o,a)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=yb(e[d].accounts);h.includes(d)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(xp(s[d].methods,i[d].methods)?xp(s[d].events,i[d].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function i5e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Rj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function o5e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=yb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function a5e(t,e){return OU(t,!1)&&t<=e.max&&t>=e.min}function Pj(){const t=c1();return new Promise(e=>{switch(t){case Wo.browser:e(c5e());break;case Wo.reactNative:e(l5e());break;case Wo.node:e(u5e());break;default:e(!0)}})}function c5e(){return pb()&&(navigator==null?void 0:navigator.onLine)}async function l5e(){if(Pf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function u5e(){return!0}function d5e(t){switch(c1()){case Wo.browser:h5e(t);break;case Wo.reactNative:f5e(t);break}}function h5e(t){!Pf()&&pb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function f5e(t){Pf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function p5e(){var t;return pb()&&Dg()?((t=Dg())==null?void 0:t.visibilityState)==="visible":!0}const EO={};class cv{static get(e){return EO[e]}static set(e,n){EO[e]=n}static delete(e){delete EO[e]}}var g5e={};const GZ="wc",qZ=2,f3="core",ql=`${GZ}@2:${f3}:`,m5e={logger:"error"},y5e={database:":memory:"},w5e="crypto",Oj="client_ed25519_seed",b5e=_e.ONE_DAY,v5e="keychain",E5e="0.3",C5e="messages",_5e="0.3",kj=_e.SIX_HOURS,A5e="publisher",VZ="irn",S5e="error",KZ="wss://relay.walletconnect.org",x5e="relayer",ps={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},I5e="_subscription",oa={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},N5e=.1,p3="2.21.0",rr={link_mode:"link_mode",relay:"relay"},NS={inbound:"inbound",outbound:"outbound"},T5e="0.3",R5e="WALLETCONNECT_CLIENT_ID",Dj="WALLETCONNECT_LINK_MODE_APPS",To={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},P5e="subscription",O5e="0.3",k5e="pairing",D5e="0.3",lv={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},ap={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Xa={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},M5e="history",L5e="0.3",U5e="expirer",ha={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},B5e="0.3",$5e="verify-api",F5e="https://verify.walletconnect.com",YZ="https://verify.walletconnect.org",wE=YZ,j5e=`${wE}/v3`,W5e=[F5e,YZ],z5e="echo",H5e="https://echo.walletconnect.com",el={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ec={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Wf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},zf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},uv={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},G5e=.1,q5e="event-client",V5e=86400,K5e="https://pulse.walletconnect.org/batch";function Y5e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Q5e=Y5e,J5e=Q5e;const QZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Z5e=t=>new TextEncoder().encode(t),X5e=t=>new TextDecoder().decode(t);class eMe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class tMe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return JZ(this,e)}}class nMe{constructor(e){this.decoders=e}or(e){return JZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const JZ=(t,e)=>new nMe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class rMe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new eMe(e,n,r),this.decoder=new tMe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const NT=({name:t,prefix:e,encode:n,decode:r})=>new rMe(t,e,n,r),p1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=J5e(n,e);return NT({prefix:t,name:e,encode:r,decode:i=>QZ(s(i))})},sMe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},iMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},zs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>NT({prefix:e,name:t,encode(s){return iMe(s,r,n)},decode(s){return sMe(s,r,n,t)}}),oMe=NT({prefix:"\0",name:"identity",encode:t=>X5e(t),decode:t=>Z5e(t)});var aMe=Object.freeze({__proto__:null,identity:oMe});const cMe=zs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var lMe=Object.freeze({__proto__:null,base2:cMe});const uMe=zs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var dMe=Object.freeze({__proto__:null,base8:uMe});const hMe=p1({prefix:"9",name:"base10",alphabet:"0123456789"});var fMe=Object.freeze({__proto__:null,base10:hMe});const pMe=zs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gMe=zs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var mMe=Object.freeze({__proto__:null,base16:pMe,base16upper:gMe});const yMe=zs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wMe=zs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bMe=zs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vMe=zs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),EMe=zs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),CMe=zs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_Me=zs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),AMe=zs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),SMe=zs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xMe=Object.freeze({__proto__:null,base32:yMe,base32upper:wMe,base32pad:bMe,base32padupper:vMe,base32hex:EMe,base32hexupper:CMe,base32hexpad:_Me,base32hexpadupper:AMe,base32z:SMe});const IMe=p1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),NMe=p1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var TMe=Object.freeze({__proto__:null,base36:IMe,base36upper:NMe});const RMe=p1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),PMe=p1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var OMe=Object.freeze({__proto__:null,base58btc:RMe,base58flickr:PMe});const kMe=zs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),DMe=zs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),MMe=zs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),LMe=zs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var UMe=Object.freeze({__proto__:null,base64:kMe,base64pad:DMe,base64url:MMe,base64urlpad:LMe});const ZZ=Array.from(""),BMe=ZZ.reduce((t,e,n)=>(t[n]=e,t),[]),$Me=ZZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function FMe(t){return t.reduce((e,n)=>(e+=BMe[n],e),"")}function jMe(t){const e=[];for(const n of t){const r=$Me[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const WMe=NT({prefix:"",name:"base256emoji",encode:FMe,decode:jMe});var zMe=Object.freeze({__proto__:null,base256emoji:WMe}),HMe=XZ,Mj=128,GMe=-128,qMe=Math.pow(2,31);function XZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=qMe;)e[n++]=t&255|Mj,t/=128;for(;t&GMe;)e[n++]=t&255|Mj,t>>>=7;return e[n]=t|0,XZ.bytes=n-r+1,e}var VMe=g3,KMe=128,Lj=127;function g3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw g3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Lj)<<s:(o&Lj)*Math.pow(2,s),s+=7}while(o>=KMe);return g3.bytes=i-r,n}var YMe=Math.pow(2,7),QMe=Math.pow(2,14),JMe=Math.pow(2,21),ZMe=Math.pow(2,28),XMe=Math.pow(2,35),eLe=Math.pow(2,42),tLe=Math.pow(2,49),nLe=Math.pow(2,56),rLe=Math.pow(2,63),sLe=function(t){return t<YMe?1:t<QMe?2:t<JMe?3:t<ZMe?4:t<XMe?5:t<eLe?6:t<tLe?7:t<nLe?8:t<rLe?9:10},iLe={encode:HMe,decode:VMe,encodingLength:sLe},eX=iLe;const Uj=(t,e,n=0)=>(eX.encode(t,e,n),e),Bj=t=>eX.encodingLength(t),m3=(t,e)=>{const n=e.byteLength,r=Bj(t),s=r+Bj(n),i=new Uint8Array(s+n);return Uj(t,i,0),Uj(n,i,r),i.set(e,s),new oLe(t,n,e,i)};class oLe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const tX=({name:t,code:e,encode:n})=>new aLe(t,e,n);class aLe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?m3(this.code,n):n.then(r=>m3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const nX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),cLe=tX({name:"sha2-256",code:18,encode:nX("SHA-256")}),lLe=tX({name:"sha2-512",code:19,encode:nX("SHA-512")});var uLe=Object.freeze({__proto__:null,sha256:cLe,sha512:lLe});const rX=0,dLe="identity",sX=QZ,hLe=t=>m3(rX,sX(t)),fLe={code:rX,name:dLe,encode:sX,digest:hLe};var pLe=Object.freeze({__proto__:null,identity:fLe});new TextEncoder,new TextDecoder;const $j={...aMe,...lMe,...dMe,...fMe,...mMe,...xMe,...TMe,...OMe,...UMe,...zMe};({...uLe,...pLe});function gLe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function iX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Fj=iX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),CO=iX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=gLe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),mLe={utf8:Fj,"utf-8":Fj,hex:$j.base16,latin1:CO,ascii:CO,binary:CO,...$j};function yLe(t,e="utf8"){const n=mLe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var wLe=Object.defineProperty,bLe=(t,e,n)=>e in t?wLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yc=(t,e,n)=>bLe(t,typeof e!="symbol"?e+"":e,n);class vLe{constructor(e,n){this.core=e,this.logger=n,Yc(this,"keychain",new Map),Yc(this,"name",v5e),Yc(this,"version",E5e),Yc(this,"initialized",!1),Yc(this,"storagePrefix",ql),Yc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Yc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Yc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Yc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=xe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Yc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Fs(n,this.name)}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,t3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?n3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ELe=Object.defineProperty,CLe=(t,e,n)=>e in t?ELe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,As=(t,e,n)=>CLe(t,typeof e!="symbol"?e+"":e,n);class _Le{constructor(e,n,r){this.core=e,this.logger=n,As(this,"name",w5e),As(this,"keychain"),As(this,"randomSessionIdentifier",h3()),As(this,"initialized",!1),As(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),As(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),As(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=X4(s);return CJ(i.publicKey)}),As(this,"generateKeyPair",()=>{this.isInitialized();const s=h3e();return this.setPrivateKey(s.publicKey,s.privateKey)}),As(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=X4(i),a=this.randomSessionIdentifier;return await nIe(a,s,b5e,o)}),As(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=f3e(a,i);return this.setSymKey(c,o)}),As(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||IS(s);return await this.keychain.set(o,s),o}),As(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),As(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),As(this,"encode",async(s,i,o)=>{this.isInitialized();const a=WZ(o),c=ld(i);if(vj(a))return m3e(c,o==null?void 0:o.encoding);if(bj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return p3e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),As(this,"decode",async(s,i,o)=>{this.isInitialized();const a=w3e(i,o);if(vj(a)){const c=y3e(i,o==null?void 0:o.encoding);return kg(c)}if(bj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=g3e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return kg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),As(this,"getPayloadType",(s,i=Nc)=>{const o=GC({encoded:s,encoding:i});return Fg(o.type)}),As(this,"getPayloadSenderPublicKey",(s,i=Nc)=>{const o=GC({encoded:s,encoding:i});return o.senderPublicKey?uo(o.senderPublicKey,xi):void 0}),this.core=e,this.logger=Fs(n,this.name),this.keychain=r||new vLe(this.core,this.logger)}get context(){return yo(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Oj)}catch{e=h3(),await this.keychain.set(Oj,e)}return yLe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ALe=Object.defineProperty,SLe=Object.defineProperties,xLe=Object.getOwnPropertyDescriptors,jj=Object.getOwnPropertySymbols,ILe=Object.prototype.hasOwnProperty,NLe=Object.prototype.propertyIsEnumerable,y3=(t,e,n)=>e in t?ALe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TLe=(t,e)=>{for(var n in e||(e={}))ILe.call(e,n)&&y3(t,n,e[n]);if(jj)for(var n of jj(e))NLe.call(e,n)&&y3(t,n,e[n]);return t},RLe=(t,e)=>SLe(t,xLe(e)),Co=(t,e,n)=>y3(t,typeof e!="symbol"?e+"":e,n);class PLe extends xOe{constructor(e,n){super(e,n),this.logger=e,this.core=n,Co(this,"messages",new Map),Co(this,"messagesWithoutClientAck",new Map),Co(this,"name",C5e),Co(this,"version",_5e),Co(this,"initialized",!1),Co(this,"storagePrefix",ql),Co(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Co(this,"set",async(r,s,i)=>{this.isInitialized();const o=vl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===NS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,RLe(TLe({},c),{[o]:s}))}return await this.persist(),o}),Co(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Co(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Co(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=vl(s);return typeof i[o]<"u"}),Co(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=vl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Co(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Fs(e,this.name),this.core=n}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,t3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,t3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?n3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?n3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var OLe=Object.defineProperty,kLe=Object.defineProperties,DLe=Object.getOwnPropertyDescriptors,Wj=Object.getOwnPropertySymbols,MLe=Object.prototype.hasOwnProperty,LLe=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?OLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OA=(t,e)=>{for(var n in e||(e={}))MLe.call(e,n)&&w3(t,n,e[n]);if(Wj)for(var n of Wj(e))LLe.call(e,n)&&w3(t,n,e[n]);return t},_O=(t,e)=>kLe(t,DLe(e)),tc=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);class ULe extends IOe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,tc(this,"events",new ja.EventEmitter),tc(this,"name",A5e),tc(this,"queue",new Map),tc(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),tc(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),tc(this,"needsTransportRestart",!1),tc(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||kj,c=gI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Sp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(ps.publish,w),g(h))};this.relayer.events.on(ps.publish,w);const m=Dh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(ps.publish,w)}catch(b){this.queue.set(d,_O(OA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Dh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),tc(this,"on",(r,s)=>{this.events.on(r,s)}),tc(this,"once",(r,s)=>{this.events.once(r,s)}),tc(this,"off",(r,s)=>{this.events.off(r,s)}),tc(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Fs(n,this.name),this.registerEventListeners()}get context(){return yo(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=kj,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Tv(gI().protocol).publish,params:OA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Ps((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Ps((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(ps.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,_O(OA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(_O(OA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(um.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ps.connection_stalled);return}this.checkQueue()}),this.relayer.on(ps.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var BLe=Object.defineProperty,$Le=(t,e,n)=>e in t?BLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fm=(t,e,n)=>$Le(t,typeof e!="symbol"?e+"":e,n);class FLe{constructor(){Fm(this,"map",new Map),Fm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Fm(this,"get",e=>this.map.get(e)||[]),Fm(this,"exists",(e,n)=>this.get(e).includes(n)),Fm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Fm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var jLe=Object.defineProperty,WLe=Object.defineProperties,zLe=Object.getOwnPropertyDescriptors,zj=Object.getOwnPropertySymbols,HLe=Object.prototype.hasOwnProperty,GLe=Object.prototype.propertyIsEnumerable,b3=(t,e,n)=>e in t?jLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dv=(t,e)=>{for(var n in e||(e={}))HLe.call(e,n)&&b3(t,n,e[n]);if(zj)for(var n of zj(e))GLe.call(e,n)&&b3(t,n,e[n]);return t},AO=(t,e)=>WLe(t,zLe(e)),zn=(t,e,n)=>b3(t,typeof e!="symbol"?e+"":e,n);class qLe extends ROe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,zn(this,"subscriptions",new Map),zn(this,"topicMap",new FLe),zn(this,"events",new ja.EventEmitter),zn(this,"name",P5e),zn(this,"version",O5e),zn(this,"pending",new Map),zn(this,"cached",[]),zn(this,"initialized",!1),zn(this,"storagePrefix",ql),zn(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),zn(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),zn(this,"clientId"),zn(this,"batchSubscribeTopicsLimit",500),zn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),zn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=gI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),zn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),zn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),zn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),zn(this,"on",(r,s)=>{this.events.on(r,s)}),zn(this,"once",(r,s)=>{this.events.once(r,s)}),zn(this,"off",(r,s)=>{this.events.off(r,s)}),zn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),zn(this,"start",async()=>{await this.onConnect()}),zn(this,"stop",async()=>{await this.onDisconnect()}),zn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),zn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),zn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(um.pulse,async()=>{await this.checkPending()}),this.events.on(To.created,async r=>{const s=To.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(To.deleted,async r=>{const s=To.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Fs(n,this.name),this.clientId=""}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=gI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Bn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===rr.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Tv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===rr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(To.created,d),u(h.id))};this.events.on(To.created,d);try{const h=await Dh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(To.created,d),u(h)}catch{}}),l=await Dh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ps.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Tv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Dh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ps.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Tv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Dh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ps.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Tv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,AO(dv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,dv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,dv({},n)),this.topicMap.set(n.topic,e),this.events.emit(To.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(To.deleted,AO(dv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(To.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(To.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>AO(dv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await X2e(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return vl(e+await this.getClientId())}}var VLe=Object.defineProperty,Hj=Object.getOwnPropertySymbols,KLe=Object.prototype.hasOwnProperty,YLe=Object.prototype.propertyIsEnumerable,v3=(t,e,n)=>e in t?VLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gj=(t,e)=>{for(var n in e||(e={}))KLe.call(e,n)&&v3(t,n,e[n]);if(Hj)for(var n of Hj(e))YLe.call(e,n)&&v3(t,n,e[n]);return t},fn=(t,e,n)=>v3(t,typeof e!="symbol"?e+"":e,n);class QLe extends NOe{constructor(e){super(e),fn(this,"protocol","wc"),fn(this,"version",2),fn(this,"core"),fn(this,"logger"),fn(this,"events",new ja.EventEmitter),fn(this,"provider"),fn(this,"messages"),fn(this,"subscriber"),fn(this,"publisher"),fn(this,"name",x5e),fn(this,"transportExplicitlyClosed",!1),fn(this,"initialized",!1),fn(this,"connectionAttemptInProgress",!1),fn(this,"relayUrl"),fn(this,"projectId"),fn(this,"packageName"),fn(this,"bundleId"),fn(this,"hasExperiencedNetworkDisruption",!1),fn(this,"pingTimeout"),fn(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),fn(this,"reconnectTimeout"),fn(this,"connectPromise"),fn(this,"reconnectInProgress",!1),fn(this,"requestsInFlight",[]),fn(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),fn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Sp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),fn(this,"resetPingTimeout",()=>{fI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),fn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),fn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ps.connect)}),fn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),fn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(ps.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),fn(this,"registerProviderListeners",()=>{this.provider.on(oa.payload,this.onPayloadHandler),this.provider.on(oa.connect,this.onConnectHandler),this.provider.on(oa.disconnect,this.onDisconnectHandler),this.provider.on(oa.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Fs(e.logger,this.name):r1(hm({level:e.logger||S5e})),this.messages=new PLe(this.logger,e.core),this.subscriber=new qLe(this,this.logger),this.publisher=new ULe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||KZ,this.projectId=e.projectId,U2e()?this.packageName=zF():B2e()&&(this.bundleId=zF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return yo(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:rr.relay},NS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(To.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(To.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Gj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Dh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Pj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Hr(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(ps.message,e),await this.recordMessageEvent(e,NS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oa.disconnect,i),await Dh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(oa.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oa.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(oa.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(fI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Wa(new pTe(z2e({sdkVersion:p3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),AU(e)){if(!e.method.endsWith(I5e))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:rr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Gj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else yT(e)&&this.events.emit(ps.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,NS.inbound),this.events.emit(ps.message,e))}async acknowledgePayload(e){const n=gT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(oa.payload,this.onPayloadHandler),this.provider.off(oa.connect,this.onConnectHandler),this.provider.off(oa.disconnect,this.onDisconnectHandler),this.provider.off(oa.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Pj();d5e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(um.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&p5e())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ps.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(N5e)))))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function JLe(){}function qj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Vj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Kj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ZLe="[object RegExp]",XLe="[object String]",eUe="[object Number]",tUe="[object Boolean]",Yj="[object Arguments]",nUe="[object Symbol]",rUe="[object Date]",sUe="[object Map]",iUe="[object Set]",oUe="[object Array]",aUe="[object Function]",cUe="[object ArrayBuffer]",SO="[object Object]",lUe="[object Error]",uUe="[object DataView]",dUe="[object Uint8Array]",hUe="[object Uint8ClampedArray]",fUe="[object Uint16Array]",pUe="[object Uint32Array]",gUe="[object BigUint64Array]",mUe="[object Int8Array]",yUe="[object Int16Array]",wUe="[object Int32Array]",bUe="[object BigInt64Array]",vUe="[object Float32Array]",EUe="[object Float64Array]";function CUe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function _Ue(t,e,n){return Rv(t,e,void 0,void 0,void 0,void 0,n)}function Rv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return bE(t,e,i,o)}return bE(t,e,i,o)}function bE(t,e,n,r){if(Object.is(t,e))return!0;let s=Kj(t),i=Kj(e);if(s===Yj&&(s=SO),i===Yj&&(i=SO),s!==i)return!1;switch(s){case XLe:return t.toString()===e.toString();case eUe:{const c=t.valueOf(),l=e.valueOf();return CUe(c,l)}case tUe:case rUe:case nUe:return Object.is(t.valueOf(),e.valueOf());case ZLe:return t.source===e.source&&t.flags===e.flags;case aUe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case sUe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Rv(l,e.get(c),c,t,e,n,r))return!1;return!0}case iUe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Rv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case oUe:case dUe:case hUe:case fUe:case pUe:case gUe:case mUe:case yUe:case wUe:case bUe:case vUe:case EUe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Rv(t[c],e[c],c,t,e,n,r))return!1;return!0}case cUe:return t.byteLength!==e.byteLength?!1:bE(new Uint8Array(t),new Uint8Array(e),n,r);case uUe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:bE(new Uint8Array(t),new Uint8Array(e),n,r);case lUe:return t.name===e.name&&t.message===e.message;case SO:{if(!(bE(t.constructor,e.constructor,n,r)||qj(t)&&qj(e)))return!1;const c=[...Object.keys(t),...Vj(t)],l=[...Object.keys(e),...Vj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Rv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function AUe(t,e){return _Ue(t,e,JLe)}var SUe=Object.defineProperty,Qj=Object.getOwnPropertySymbols,xUe=Object.prototype.hasOwnProperty,IUe=Object.prototype.propertyIsEnumerable,E3=(t,e,n)=>e in t?SUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jj=(t,e)=>{for(var n in e||(e={}))xUe.call(e,n)&&E3(t,n,e[n]);if(Qj)for(var n of Qj(e))IUe.call(e,n)&&E3(t,n,e[n]);return t},Bi=(t,e,n)=>E3(t,typeof e!="symbol"?e+"":e,n);class pm extends TOe{constructor(e,n,r,s=ql,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Bi(this,"map",new Map),Bi(this,"version",T5e),Bi(this,"cached",[]),Bi(this,"initialized",!1),Bi(this,"getKey"),Bi(this,"storagePrefix",ql),Bi(this,"recentlyDeleted",[]),Bi(this,"recentlyDeletedLimit",200),Bi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ps(o)?this.map.set(this.getKey(o),o):W3e(o)?this.map.set(o.id,o):z3e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Bi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Bi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Bi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>AUe(a[c],o[c]))):this.values)),Bi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Jj(Jj({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Bi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Fs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var NUe=Object.defineProperty,TUe=(t,e,n)=>e in t?NUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jt=(t,e,n)=>TUe(t,typeof e!="symbol"?e+"":e,n);class RUe{constructor(e,n){this.core=e,this.logger=n,Jt(this,"name",k5e),Jt(this,"version",D5e),Jt(this,"events",new hU),Jt(this,"pairings"),Jt(this,"initialized",!1),Jt(this,"storagePrefix",ql),Jt(this,"ignoredPayloadTypes",[Qu]),Jt(this,"registeredMethods",[]),Jt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Jt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Jt(this,"create",async r=>{this.isInitialized();const s=h3(),i=await this.core.crypto.setSymKey(s),o=Hr(_e.FIVE_MINUTES),a={protocol:VZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=Cj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ap.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Jt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[el.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Ej(r.uri);s.props.properties.topic=i,s.addTrace(el.pairing_uri_validation_success),s.addTrace(el.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(el.existing_pairing),u.active)throw s.setError(fu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(el.pairing_not_expired)}const d=c||Hr(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(el.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ap.create,h),s.addTrace(el.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(el.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(fu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(fu.subscribe_pairing_topic_failure),f}return s.addTrace(el.subscribe_pairing_topic_success),h}),Jt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Hr(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Jt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Xf();this.events.once(Sn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Jt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Jt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Jt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Jt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Bn("USER_DISCONNECTED")),await this.deletePairing(s))}),Jt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Cj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Jt(this,"sendRequest",async(r,s,i)=>{const o=kh(s,i),a=await this.core.crypto.encode(r,o),c=lv[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Jt(this,"sendResult",async(r,s,i)=>{const o=gT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=lv[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Jt(this,"sendError",async(r,s,i)=>{const o=mT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=lv[c]?lv[c].res:lv.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Jt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Bn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Jt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Yd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Jt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Jt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Jt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ap.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Jt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{rl(s)?this.events.emit(Sn("pairing_ping",i),{}):Ea(s)&&this.events.emit(Sn("pairing_ping",i),{error:s.error})},500)}),Jt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ap.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Jt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Bn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Jt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Bn("WC_METHOD_UNSUPPORTED",r))}),Jt(this,"isValidPair",(r,s)=>{var i;if(!zi(r)){const{message:a}=xe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(fu.malformed_pairing_uri),new Error(a)}if(!j3e(r.uri)){const{message:a}=xe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(fu.malformed_pairing_uri),new Error(a)}const o=Ej(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(fu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(fu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(fu.pairing_expired);const{message:a}=xe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Jt(this,"isValidPing",async r=>{if(!zi(r)){const{message:i}=xe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Jt(this,"isValidDisconnect",async r=>{if(!zi(r)){const{message:i}=xe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Jt(this,"isValidPairingTopic",async r=>{if(!Br(r,!1)){const{message:s}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Yd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=xe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Fs(n,this.name),this.pairings=new pm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return yo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ps.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==rr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);AU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):yT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ha.expired,async e=>{const{topic:n}=lZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ap.expire,{topic:n}))})}}var PUe=Object.defineProperty,OUe=(t,e,n)=>e in t?PUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ss=(t,e,n)=>OUe(t,typeof e!="symbol"?e+"":e,n);class kUe extends SOe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ss(this,"records",new Map),Ss(this,"events",new ja.EventEmitter),Ss(this,"name",M5e),Ss(this,"version",L5e),Ss(this,"cached",[]),Ss(this,"initialized",!1),Ss(this,"storagePrefix",ql),Ss(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ss(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Hr(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Xa.created,o)}),Ss(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ea(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Xa.updated,s))}),Ss(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ss(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Xa.deleted,i)}}),this.persist()}),Ss(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ss(this,"on",(r,s)=>{this.events.on(r,s)}),Ss(this,"once",(r,s)=>{this.events.once(r,s)}),Ss(this,"off",(r,s)=>{this.events.off(r,s)}),Ss(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Fs(n,this.name)}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:kh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xa.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Xa.created,e=>{const n=Xa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Xa.updated,e=>{const n=Xa.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Xa.deleted,e=>{const n=Xa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(um.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Xa.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DUe=Object.defineProperty,MUe=(t,e,n)=>e in t?DUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ks=(t,e,n)=>MUe(t,typeof e!="symbol"?e+"":e,n);class LUe extends POe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ks(this,"expirations",new Map),Ks(this,"events",new ja.EventEmitter),Ks(this,"name",U5e),Ks(this,"version",B5e),Ks(this,"cached",[]),Ks(this,"initialized",!1),Ks(this,"storagePrefix",ql),Ks(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ks(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ks(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ha.created,{target:i,expiration:o})}),Ks(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Ks(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ha.deleted,{target:s,expiration:i})}}),Ks(this,"on",(r,s)=>{this.events.on(r,s)}),Ks(this,"once",(r,s)=>{this.events.once(r,s)}),Ks(this,"off",(r,s)=>{this.events.off(r,s)}),Ks(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Fs(n,this.name)}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return H2e(e);if(typeof e=="number")return G2e(e);const{message:n}=xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ha.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ha.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(um.pulse,()=>this.checkExpirations()),this.events.on(ha.created,e=>{const n=ha.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ha.expired,e=>{const n=ha.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ha.deleted,e=>{const n=ha.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var UUe=Object.defineProperty,BUe=(t,e,n)=>e in t?UUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ur=(t,e,n)=>BUe(t,typeof e!="symbol"?e+"":e,n);class $Ue extends OOe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Ur(this,"name",$5e),Ur(this,"abortController"),Ur(this,"isDevEnv"),Ur(this,"verifyUrlV3",j5e),Ur(this,"storagePrefix",ql),Ur(this,"version",qZ),Ur(this,"publicKey"),Ur(this,"fetchPromise"),Ur(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ur(this,"register",async s=>{if(!pb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Dg(),u=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=m=>{if(m.data&&typeof m.data=="string")try{const b=JSON.parse(m.data);if(b.type==="verify_attestation"){if(WD(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Ur(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(WD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Ur(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ur(this,"getVerifyUrl",s=>{let i=s||wE;return W5e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${wE}`),i=wE),i}),Ur(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ur(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ur(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ur(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ur(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ur(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ur(this,"validateAttestation",(s,i)=>{const o=v3e(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Fs(n,this.name),this.abortController=new AbortController,this.isDevEnv=SU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return yo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var FUe=Object.defineProperty,jUe=(t,e,n)=>e in t?FUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zj=(t,e,n)=>jUe(t,typeof e!="symbol"?e+"":e,n);class WUe extends kOe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Zj(this,"context",z5e),Zj(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${H5e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Fs(n,this.context)}}var zUe=Object.defineProperty,Xj=Object.getOwnPropertySymbols,HUe=Object.prototype.hasOwnProperty,GUe=Object.prototype.propertyIsEnumerable,C3=(t,e,n)=>e in t?zUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hv=(t,e)=>{for(var n in e||(e={}))HUe.call(e,n)&&C3(t,n,e[n]);if(Xj)for(var n of Xj(e))GUe.call(e,n)&&C3(t,n,e[n]);return t},rs=(t,e,n)=>C3(t,typeof e!="symbol"?e+"":e,n);class qUe extends DOe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,rs(this,"context",q5e),rs(this,"storagePrefix",ql),rs(this,"storageVersion",G5e),rs(this,"events",new Map),rs(this,"shouldPersist",!1),rs(this,"init",async()=>{if(!SU())try{const s={eventId:GF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:aZ(this.core.relayer.protocol,this.core.relayer.version,p3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),rs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=GF(),u=this.core.projectId||"",d=Date.now(),h=hv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),rs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return hv(hv({},a),this.setMethods(a.eventId))}),rs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),rs(this,"setEventListeners",()=>{this.core.heartbeat.on(um.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>V5e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),rs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),rs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),rs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),rs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),rs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,hv(hv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),rs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),rs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${K5e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${p3}${i}`,{method:"POST",body:JSON.stringify(s)})}),rs(this,"getAppDomain",()=>oZ().url),this.logger=Fs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var VUe=Object.defineProperty,e9=Object.getOwnPropertySymbols,KUe=Object.prototype.hasOwnProperty,YUe=Object.prototype.propertyIsEnumerable,_3=(t,e,n)=>e in t?VUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t9=(t,e)=>{for(var n in e||(e={}))KUe.call(e,n)&&_3(t,n,e[n]);if(e9)for(var n of e9(e))YUe.call(e,n)&&_3(t,n,e[n]);return t},Kn=(t,e,n)=>_3(t,typeof e!="symbol"?e+"":e,n);let QUe=class oX extends EOe{constructor(e){var n;super(e),Kn(this,"protocol",GZ),Kn(this,"version",qZ),Kn(this,"name",f3),Kn(this,"relayUrl"),Kn(this,"projectId"),Kn(this,"customStoragePrefix"),Kn(this,"events",new ja.EventEmitter),Kn(this,"logger"),Kn(this,"heartbeat"),Kn(this,"relayer"),Kn(this,"crypto"),Kn(this,"storage"),Kn(this,"history"),Kn(this,"expirer"),Kn(this,"pairing"),Kn(this,"verify"),Kn(this,"echoClient"),Kn(this,"linkModeSupportedApps"),Kn(this,"eventClient"),Kn(this,"initialized",!1),Kn(this,"logChunkController"),Kn(this,"on",(a,c)=>this.events.on(a,c)),Kn(this,"once",(a,c)=>this.events.once(a,c)),Kn(this,"off",(a,c)=>this.events.off(a,c)),Kn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Kn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:rr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||KZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=hm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:m5e.logger,name:f3}),{logger:i,chunkLoggerController:o}=uT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Fs(i,this.name),this.heartbeat=new I1e,this.crypto=new _Le(this,this.logger,e==null?void 0:e.keychain),this.history=new kUe(this,this.logger),this.expirer=new LUe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new wOe(t9(t9({},y5e),e==null?void 0:e.storageOptions)),this.relayer=new QLe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new RUe(this,this.logger),this.verify=new $Ue(this,this.logger,this.storage),this.echoClient=new WUe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new qUe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new oX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(R5e,r),n}get context(){return yo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Dj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Dj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&g5e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const JUe=QUe,aX="wc",cX=2,lX="client",kU=`${aX}@${cX}:${lX}:`,xO={name:lX,logger:"error"},n9="WALLETCONNECT_DEEPLINK_CHOICE",ZUe="proposal",r9="Proposal expired",XUe="session",jm=_e.SEVEN_DAYS,eBe="engine",ss={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},IO={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},Qc={idle:"IDLE",active:"ACTIVE"},s9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},tBe="request",nBe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],rBe="wc",sBe="auth",iBe="authKeys",oBe="pairingTopics",aBe="requests",TT=`${rBe}@${1.5}:${sBe}:`,TS=`${TT}:PUB_KEY`;var cBe=Object.defineProperty,lBe=Object.defineProperties,uBe=Object.getOwnPropertyDescriptors,i9=Object.getOwnPropertySymbols,dBe=Object.prototype.hasOwnProperty,hBe=Object.prototype.propertyIsEnumerable,A3=(t,e,n)=>e in t?cBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hn=(t,e)=>{for(var n in e||(e={}))dBe.call(e,n)&&A3(t,n,e[n]);if(i9)for(var n of i9(e))hBe.call(e,n)&&A3(t,n,e[n]);return t},ci=(t,e)=>lBe(t,uBe(e)),we=(t,e,n)=>A3(t,typeof e!="symbol"?e+"":e,n);class fBe extends BOe{constructor(e){super(e),we(this,"name",eBe),we(this,"events",new hU),we(this,"initialized",!1),we(this,"requestQueue",{state:Qc.idle,queue:[]}),we(this,"sessionRequestQueue",{state:Qc.idle,queue:[]}),we(this,"requestQueueDelay",_e.ONE_SECOND),we(this,"expectedPairingMethodMap",new Map),we(this,"recentlyDeletedMap",new Map),we(this,"recentlyDeletedLimit",200),we(this,"relayMessageCache",[]),we(this,"pendingSessions",new Map),we(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ss)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),we(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ci(Hn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=L3e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const T=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),T}if(!u||!h){const{topic:T,uri:x}=await this.client.core.pairing.create();u=T,d=x}if(!u){const{message:T}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(T)}const f=await this.client.core.crypto.generateKeyPair(),p=ss.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,g=Hr(p),w=ci(Hn(Hn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:VZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:nl()}),m=Sn("session_connect",w.id),{reject:b,resolve:v,done:A}=Xf(p,r9),C=({id:T})=>{T===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(m,{error:{message:r9,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:T,session:x})=>{this.client.events.off("proposal_expire",C),T?b(T):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),we(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),we(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ec.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Wf.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Wf.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Wf.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:m}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ec.session_approve_started,properties:{topic:p,trace:[ec.session_approve_started,ec.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),T=Hn(Hn(Hn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Hr(jm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=rr.relay;b.addTrace(ec.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(S){throw b.setError(Wf.subscribe_session_topic_failure),S}b.addTrace(ec.subscribe_session_topic_success);const N=ci(Hn({},T),{topic:C,requiredNamespaces:w,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:T.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:rr.relay});await this.client.session.set(C,N),b.addTrace(ec.store_session);try{b.addTrace(ec.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Wf.session_settle_publish_failure),S}),b.addTrace(ec.session_settle_publish_success),b.addTrace(ec.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Wf.session_approve_publish_failure),S}),b.addTrace(ec.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,Bn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Bn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Hr(jm)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),we(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:ss.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Bn("USER_DISCONNECTED")))}),we(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Xf(),c=nl(),l=Sp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Sn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),we(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=nl(),{done:i,resolve:o,reject:a}=Xf();return this.events.once(Sn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Hr(jm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),we(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=ss.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===rr.relay&&await this.confirmOnlineStateOrThrow();const c=nl(),l=Sp().toString(),{done:u,resolve:d,reject:h}=Xf(o,"Request expired. Please try again.");this.events.once(Sn("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ci(Hn({},s),{expiryTimestamp:Hr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ci(Hn({},s),{expiryTimestamp:Hr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest(Hn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await Y2e(this.client.core.storage,n9);await q2e({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),we(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===rr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);rl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ea(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),we(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=nl(),i=Sp().toString(),{done:o,resolve:a,reject:c}=Xf();this.events.once(Sn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),we(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Sp().toString(),a=nl();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),we(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Bn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=xe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),we(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>$3e(r,n)))),we(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),we(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?rr.link_mode:rr.relay;o===rr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,m=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=IS(A);if(await Promise.all([this.client.auth.authKeys.set(TS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=Vy(a[0]);let j=jke(M,"request",g);xS(m)&&(j=zke(j,m.pop())),m.push(j)}const T=w&&w>ss.wc_sessionAuthenticate.req.ttl?w:ss.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Hr(T)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Hr(ss.wc_sessionPropose.req.ttl),id:nl()},{done:D,resolve:P,reject:$}=Xf(T,"Request expired"),G=nl(),W=Sn("session_connect",S.id),I=Sn("session_request",G),R=async({error:M,session:j})=>{this.events.off(I,B),M?$(M):j&&P({session:j})},B=async M=>{var j,V,se;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),M.error){const We=Bn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===We.code?void 0:(this.events.off(W,R),$(M.error.message))}await this.deleteProposal(S.id),this.events.off(W,R);const{cacaos:ie,responder:Q}=M.result,te=[],pe=[];for(const We of ie){await XF({cacao:We,projectId:this.client.core.projectId})||(this.client.logger.error(We,"Signature verification failed"),$(Bn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:mt}=We,Ot=xS(mt.resources),ln=[r3(mt.iss)],X=pI(mt.iss);if(Ot){const ce=ej(Ot),he=tj(Ot);te.push(...ce),ln.push(...he)}for(const ce of ln)pe.push(`${ce}:${X}`)}const Ze=await this.client.core.crypto.generateSharedKey(A,Q.publicKey);let Xe;te.length>0&&(Xe={topic:Ze,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:Hr(jm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:xj([...new Set(te)],[...new Set(pe)]),transportType:o},await this.client.core.relayer.subscribe(Ze,{transportType:o}),await this.client.session.set(Ze,Xe),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Q.metadata}),Xe=this.client.session.get(Ze)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(V=Q.metadata.redirect)!=null&&V.linkMode&&(se=Q.metadata.redirect)!=null&&se.universal&&r&&(this.client.core.addLinkModeSupportedApp(Q.metadata.redirect.universal),this.client.session.update(Ze,{transportType:rr.link_mode})),P({auths:ie,session:Xe})};this.events.once(W,R),this.events.once(I,B);let O;try{if(i){const M=kh("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,M);const j=await this.client.core.crypto.encode("",M,{type:f1,encoding:th});O=PA(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:ss.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(W,R),this.events.off(I,B),M}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:ci(Hn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:O??v,response:D}}),we(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[zf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(uv.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(uv.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||rr.relay;a===rr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=IS(c),d={type:Qu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await XF({cacao:w,projectId:this.client.core.projectId})){i.setError(uv.invalid_cacao);const C=Bn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(zf.cacaos_verified);const{p:m}=w,b=xS(m.resources),v=[r3(m.iss)],A=pI(m.iss);if(b){const C=ej(b),T=tj(b);h.push(...C),v.push(...T)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(zf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Hr(jm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:xj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(zf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(uv.subscribe_authenticated_session_topic_failure),w}i.addTrace(zf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(zf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(zf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(uv.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),we(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===rr.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=IS(o),l={type:Qu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:ss.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Bn("USER_DISCONNECTED"))}),we(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return wZ(r,s)}),we(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),we(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),we(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Bn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(n9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Bn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Qc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),we(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Wf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Bn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),we(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Qc.idle,this.client.events.emit("session_request_expire",{id:n}))}),we(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),we(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),we(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Hr(ss.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),we(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=rr.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),we(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Hr(ss.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),we(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=kh(s,i,c);let f;const p=!!u;try{const m=p?th:Nc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(nBe.includes(s)){const m=vl(JSON.stringify(h)),b=vl(f);g=await this.client.core.verify.register({id:b,decryptedId:m})}const w=ss[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const m=PA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=ss[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ci(Hn({},d),{correlationId:h.id}),l?(m.internal=ci(Hn({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(b=>this.client.logger.error(b))}return h.id}),we(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=gT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?th:Nc;u=await this.client.core.crypto.encode(s,l,ci(Hn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=PA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ss[p].res;g.tvf=ci(Hn({},f),{correlationId:r}),o?(g.internal=ci(Hn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),we(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=mT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?th:Nc;u=await this.client.core.crypto.encode(s,l,ci(Hn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=PA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ss[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),we(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Yd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Yd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),we(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),we(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),we(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Qc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Qc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Qc.idle}),we(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),we(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),we(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=xe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),we(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),we(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(fu.proposal_listener_not_found)),this.isValidConnect(Hn({},s.params));const u=a.expiryTimestamp||Hr(ss.wc_sessionPropose.req.ttl),d=Hn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:vl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(el.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ss.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),we(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(rl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ea(r)){await this.client.proposal.delete(i,Bn("USER_DISCONNECTED"));const o=Sn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),we(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ci(Hn(Hn(Hn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:rr.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Sn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;rl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Sn("session_approve",s),{})):Ea(r)&&(await this.client.session.delete(n,Bn("USER_DISCONNECTED")),this.events.emit(Sn("session_approve",s),{error:r.error}))}),we(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=cv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Bn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Hn({topic:n},s));try{cv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw cv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),we(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Sn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);rl(r)?this.events.emit(Sn("session_update",s),{}):Ea(r)&&this.events.emit(Sn("session_update",s),{error:r.error})}),we(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Hr(jm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Sn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);rl(r)?this.events.emit(Sn("session_extend",s),{}):Ea(r)&&this.events.emit(Sn("session_extend",s),{error:r.error})}),we(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Sn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);rl(r)?this.events.emit(Sn("session_ping",s),{}):Ea(r)&&this.events.emit(Sn("session_ping",s),{error:r.error})},500)}),we(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(ps.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Bn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),we(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Hn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:vl(JSON.stringify(kh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===rr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),we(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Sn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);rl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Ea(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),we(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=cv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Hn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),cv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),rl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Ea(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),we(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:vl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===rr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Qu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:ss.wc_sessionAuthenticate.autoReject,appLink:h})}}),we(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),we(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Qc.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),we(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Sn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Sn("session_request",i.request.id),{error:r})})}),we(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Qc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Qc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),we(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),we(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:kh("wc_sessionPropose",ci(Hn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),we(this,"isValidConnect",async n=>{if(!zi(n)){const{message:l}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ps(r)||await this.isValidPairingTopic(r),!J3e(c)){const{message:l}=xe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Ps(s)&&nf(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Ps(i)&&nf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ps(o)||this.validateSessionProps(o,"sessionProperties"),!Ps(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),we(this,"validateNamespaces",(n,r)=>{const s=Q3e(n,"connect()",r);if(s)throw new Error(s.message)}),we(this,"isValidApprove",async n=>{if(!zi(n))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=vO(s,"approve()");if(l)throw new Error(l.message);const u=Tj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Br(i,!0)){const{message:d}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ps(o)||this.validateSessionProps(o,"sessionProperties"),!Ps(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),we(this,"isValidReject",async n=>{if(!zi(n)){const{message:i}=xe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!X3e(s)){const{message:i}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),we(this,"isValidSessionSettleRequest",n=>{if(!zi(n)){const{message:l}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!HZ(r)){const{message:l}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=H3e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=vO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Yd(o)){const{message:l}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),we(this,"isValidUpdate",async n=>{if(!zi(n)){const{message:c}=xe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=vO(s,"update()");if(o)throw new Error(o.message);const a=Tj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),we(this,"isValidExtend",async n=>{if(!zi(n)){const{message:s}=xe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),we(this,"isValidRequest",async n=>{if(!zi(n)){const{message:c}=xe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Nj(a,i)){const{message:c}=xe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!e5e(s)){const{message:c}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!r5e(a,i,s.method)){const{message:c}=xe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!a5e(o,IO)){const{message:c}=xe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${IO.min} and ${IO.max}`);throw new Error(c)}}),we(this,"isValidRespond",async n=>{var r;if(!zi(n)){const{message:o}=xe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!t5e(i)){const{message:o}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),we(this,"isValidPing",async n=>{if(!zi(n)){const{message:s}=xe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidEmit",async n=>{if(!zi(n)){const{message:a}=xe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Nj(o,i)){const{message:a}=xe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!n5e(s)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!s5e(o,i,s.name)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),we(this,"isValidDisconnect",async n=>{if(!zi(n)){const{message:s}=xe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Br(s,!1))throw new Error("uri is required parameter");if(!Br(i,!1))throw new Error("domain is required parameter");if(!Br(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Vy(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Vy(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),we(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||wE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===rr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),we(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=xe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),we(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),we(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),we(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),we(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==rr.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),we(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),we(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=HF(n,"topic")||"",s=decodeURIComponent(HF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:rr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),we(this,"registerLinkModeListeners",async()=>{var n;if(SU()||Pf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),we(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(s9).includes(s.method)}),we(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ci(Hn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),we(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),we(this,"extractTxHashesFromResult",(n,r)=>{try{const s=s9[n];if(typeof r=="string")return[r];const i=r[s.key];if(tf(i))return n==="solana_signAllTransactions"?i.map(o=>Ike(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ps.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(TS)?this.client.auth.authKeys.get(TS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===rr.link_mode?th:Nc});AU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:vl(r)})):yT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ha.expired,async e=>{const{topic:n,id:r}=lZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,xe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,xe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ap.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ap.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Br(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Yd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Br(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Yd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=xe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=xe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Br(e,!1)){const{message:n}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Z3e(e)){const{message:n}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Yd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class pBe extends pm{constructor(e,n){super(e,n,ZUe,kU),this.core=e,this.logger=n}}let gBe=class extends pm{constructor(e,n){super(e,n,XUe,kU),this.core=e,this.logger=n}};class mBe extends pm{constructor(e,n){super(e,n,tBe,kU,r=>r.id),this.core=e,this.logger=n}}class yBe extends pm{constructor(e,n){super(e,n,iBe,TT,()=>TS),this.core=e,this.logger=n}}class wBe extends pm{constructor(e,n){super(e,n,oBe,TT),this.core=e,this.logger=n}}class bBe extends pm{constructor(e,n){super(e,n,aBe,TT,r=>r.id),this.core=e,this.logger=n}}var vBe=Object.defineProperty,EBe=(t,e,n)=>e in t?vBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NO=(t,e,n)=>EBe(t,typeof e!="symbol"?e+"":e,n);class CBe{constructor(e,n){this.core=e,this.logger=n,NO(this,"authKeys"),NO(this,"pairingTopics"),NO(this,"requests"),this.authKeys=new yBe(this.core,this.logger),this.pairingTopics=new wBe(this.core,this.logger),this.requests=new bBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var _Be=Object.defineProperty,ABe=(t,e,n)=>e in t?_Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zt=(t,e,n)=>ABe(t,typeof e!="symbol"?e+"":e,n);let SBe=class uX extends UOe{constructor(e){super(e),Zt(this,"protocol",aX),Zt(this,"version",cX),Zt(this,"name",xO.name),Zt(this,"metadata"),Zt(this,"core"),Zt(this,"logger"),Zt(this,"events",new ja.EventEmitter),Zt(this,"engine"),Zt(this,"session"),Zt(this,"proposal"),Zt(this,"pendingRequest"),Zt(this,"auth"),Zt(this,"signConfig"),Zt(this,"on",(r,s)=>this.events.on(r,s)),Zt(this,"once",(r,s)=>this.events.once(r,s)),Zt(this,"off",(r,s)=>this.events.off(r,s)),Zt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Zt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Zt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Zt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Zt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Zt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||xO.name,this.metadata=F2e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:r1(hm({level:(e==null?void 0:e.logger)||xO.logger}));this.core=(e==null?void 0:e.core)||new JUe(e),this.logger=Fs(n,this.name),this.session=new gBe(this.core,this.logger),this.proposal=new pBe(this.core,this.logger),this.pendingRequest=new mBe(this.core,this.logger),this.engine=new fBe(this),this.auth=new CBe(this.core,this.logger)}static async init(e){const n=new uX(e);return await n.initialize(),n}get context(){return yo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},_e.toMiliseconds(_e.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const o9="error",xBe="wss://relay.walletconnect.org",IBe="wc",NBe="universal_provider",kA=`${IBe}@2:${NBe}:`,dX="https://rpc.walletconnect.org/v1/",ay="generic",TBe=`${dX}bundler`,za={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function RBe(){}function DU(t){return t==null||typeof t!="object"&&typeof t!="function"}function MU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function PBe(t){if(DU(t))return t;if(Array.isArray(t)||MU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function a9(t){return typeof t=="object"&&t!==null}function hX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function fX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const OBe="[object RegExp]",pX="[object String]",gX="[object Number]",mX="[object Boolean]",yX="[object Arguments]",kBe="[object Symbol]",DBe="[object Date]",MBe="[object Map]",LBe="[object Set]",UBe="[object Array]",BBe="[object ArrayBuffer]",$Be="[object Object]",FBe="[object DataView]",jBe="[object Uint8Array]",WBe="[object Uint8ClampedArray]",zBe="[object Uint16Array]",HBe="[object Uint32Array]",GBe="[object Int8Array]",qBe="[object Int16Array]",VBe="[object Int32Array]",KBe="[object Float32Array]",YBe="[object Float64Array]";function QBe(t,e){return Ty(t,void 0,t,new Map,e)}function Ty(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(DU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ty(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ty(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ty(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(MU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ty(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),cp(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),cp(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),cp(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,cp(o,t,n,r,s),o}if(typeof t=="object"&&JBe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),cp(o,t,n,r,s),o}return t}function cp(t,e,n=t,r,s){const i=[...Object.keys(e),...hX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ty(e[a],a,n,r,s))}}function JBe(t){switch(fX(t)){case yX:case UBe:case BBe:case FBe:case mX:case DBe:case KBe:case YBe:case GBe:case qBe:case VBe:case MBe:case gX:case $Be:case OBe:case LBe:case pX:case kBe:case jBe:case WBe:case zBe:case HBe:return!0;default:return!1}}function ZBe(t,e){return QBe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case gX:case pX:case mX:{const o=new t.constructor(t==null?void 0:t.valueOf());return cp(o,t),o}case yX:{const o={};return cp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function c9(t){return ZBe(t)}function l9(t){return t!==null&&typeof t=="object"&&fX(t)==="[object Arguments]"}function XBe(t){return MU(t)}function e$e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function t$e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=S3(s,o,r,new Map)}return s}function S3(t,e,n,r){if(DU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return PBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...hX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(l9(a)&&(a={...a}),l9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=c9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||a9(c)&&a9(a)?t[o]=S3(c,a,n,r):c==null&&e$e(a)?t[o]=S3({},a,n,r):c==null&&XBe(a)?t[o]=c9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function n$e(t,...e){return t$e(t,...e,RBe)}var r$e=Object.defineProperty,s$e=Object.defineProperties,i$e=Object.getOwnPropertyDescriptors,u9=Object.getOwnPropertySymbols,o$e=Object.prototype.hasOwnProperty,a$e=Object.prototype.propertyIsEnumerable,d9=(t,e,n)=>e in t?r$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DA=(t,e)=>{for(var n in e||(e={}))o$e.call(e,n)&&d9(t,n,e[n]);if(u9)for(var n of u9(e))a$e.call(e,n)&&d9(t,n,e[n]);return t},c$e=(t,e)=>s$e(t,i$e(e));function Yo(t,e,n){var r;const s=Vy(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${dX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function gm(t){return t.includes(":")?t.split(":")[1]:t}function wX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function l$e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function MA(t={},e={}){const n=h9(t),r=h9(e);return n$e(n,r)}function h9(t){var e,n,r,s,i;const o={};if(!nf(t))return o;for(const[a,c]of Object.entries(t)){const l=IT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Ny(a);o[f]=c$e(DA(DA({},o[f]),c),{chains:Ul(l,(e=o[f])==null?void 0:e.chains),methods:Ul(u,(n=o[f])==null?void 0:n.methods),events:Ul(d,(r=o[f])==null?void 0:r.events)}),(nf(h)||nf(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=DA(DA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function f9(t){return t.includes(":")?t.split(":")[2]:t}function p9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=IT(n)?[n]:r.chains?r.chains:wX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function TO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const bX={},wn=t=>bX[t],RO=(t,e)=>{bX[t]=e};var u$e=Object.defineProperty,d$e=(t,e,n)=>e in t?u$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>d$e(t,typeof e!="symbol"?e+"":e,n);class h$e{constructor(e){Wm(this,"name","polkadot"),Wm(this,"client"),Wm(this,"httpProviders"),Wm(this,"events"),Wm(this,"namespace"),Wm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var f$e=Object.defineProperty,p$e=Object.defineProperties,g$e=Object.getOwnPropertyDescriptors,g9=Object.getOwnPropertySymbols,m$e=Object.prototype.hasOwnProperty,y$e=Object.prototype.propertyIsEnumerable,x3=(t,e,n)=>e in t?f$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m9=(t,e)=>{for(var n in e||(e={}))m$e.call(e,n)&&x3(t,n,e[n]);if(g9)for(var n of g9(e))y$e.call(e,n)&&x3(t,n,e[n]);return t},y9=(t,e)=>p$e(t,g$e(e)),zm=(t,e,n)=>x3(t,typeof e!="symbol"?e+"":e,n);class w$e{constructor(e){zm(this,"name","eip155"),zm(this,"client"),zm(this,"chainId"),zm(this,"namespace"),zm(this,"httpProviders"),zm(this,"events"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Yo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(gm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:y9(m9({},u.sessionProperties||{}),{capabilities:y9(m9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(kh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${TBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var b$e=Object.defineProperty,v$e=(t,e,n)=>e in t?b$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e,n)=>v$e(t,typeof e!="symbol"?e+"":e,n);class E$e{constructor(e){Hm(this,"name","solana"),Hm(this,"client"),Hm(this,"httpProviders"),Hm(this,"events"),Hm(this,"namespace"),Hm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var C$e=Object.defineProperty,_$e=(t,e,n)=>e in t?C$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e,n)=>_$e(t,typeof e!="symbol"?e+"":e,n);class A$e{constructor(e){Gm(this,"name","cosmos"),Gm(this,"client"),Gm(this,"httpProviders"),Gm(this,"events"),Gm(this,"namespace"),Gm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var S$e=Object.defineProperty,x$e=(t,e,n)=>e in t?S$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qm=(t,e,n)=>x$e(t,typeof e!="symbol"?e+"":e,n);class I$e{constructor(e){qm(this,"name","algorand"),qm(this,"client"),qm(this,"httpProviders"),qm(this,"events"),qm(this,"namespace"),qm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Yo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Wa(new jc(r,wn("disableProviderPing")))}}var N$e=Object.defineProperty,T$e=(t,e,n)=>e in t?N$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vm=(t,e,n)=>T$e(t,typeof e!="symbol"?e+"":e,n);class R$e{constructor(e){Vm(this,"name","cip34"),Vm(this,"client"),Vm(this,"httpProviders"),Vm(this,"events"),Vm(this,"namespace"),Vm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=gm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var P$e=Object.defineProperty,O$e=(t,e,n)=>e in t?P$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Km=(t,e,n)=>O$e(t,typeof e!="symbol"?e+"":e,n);class k$e{constructor(e){Km(this,"name","elrond"),Km(this,"client"),Km(this,"httpProviders"),Km(this,"events"),Km(this,"namespace"),Km(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var D$e=Object.defineProperty,M$e=(t,e,n)=>e in t?D$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ym=(t,e,n)=>M$e(t,typeof e!="symbol"?e+"":e,n);class L$e{constructor(e){Ym(this,"name","multiversx"),Ym(this,"client"),Ym(this,"httpProviders"),Ym(this,"events"),Ym(this,"namespace"),Ym(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var U$e=Object.defineProperty,B$e=(t,e,n)=>e in t?U$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qm=(t,e,n)=>B$e(t,typeof e!="symbol"?e+"":e,n);class $$e{constructor(e){Qm(this,"name","near"),Qm(this,"client"),Qm(this,"httpProviders"),Qm(this,"events"),Qm(this,"namespace"),Qm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace);return typeof r>"u"?void 0:new Wa(new jc(r,wn("disableProviderPing")))}}var F$e=Object.defineProperty,j$e=(t,e,n)=>e in t?F$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>j$e(t,typeof e!="symbol"?e+"":e,n);class W$e{constructor(e){Jm(this,"name","tezos"),Jm(this,"client"),Jm(this,"httpProviders"),Jm(this,"events"),Jm(this,"namespace"),Jm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace);return typeof r>"u"?void 0:new Wa(new jc(r))}}var z$e=Object.defineProperty,H$e=(t,e,n)=>e in t?z$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zm=(t,e,n)=>H$e(t,typeof e!="symbol"?e+"":e,n);class G$e{constructor(e){Zm(this,"name",ay),Zm(this,"client"),Zm(this,"httpProviders"),Zm(this,"events"),Zm(this,"namespace"),Zm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Vy(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new jc(r,wn("disableProviderPing")))}}var q$e=Object.defineProperty,V$e=Object.defineProperties,K$e=Object.getOwnPropertyDescriptors,w9=Object.getOwnPropertySymbols,Y$e=Object.prototype.hasOwnProperty,Q$e=Object.prototype.propertyIsEnumerable,I3=(t,e,n)=>e in t?q$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LA=(t,e)=>{for(var n in e||(e={}))Y$e.call(e,n)&&I3(t,n,e[n]);if(w9)for(var n of w9(e))Q$e.call(e,n)&&I3(t,n,e[n]);return t},PO=(t,e)=>V$e(t,K$e(e)),aa=(t,e,n)=>I3(t,typeof e!="symbol"?e+"":e,n);let J$e=class vX{constructor(e){aa(this,"client"),aa(this,"namespaces"),aa(this,"optionalNamespaces"),aa(this,"sessionProperties"),aa(this,"scopedProperties"),aa(this,"events",new hU),aa(this,"rpcProviders",{}),aa(this,"session"),aa(this,"providerOpts"),aa(this,"logger"),aa(this,"uri"),aa(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:r1(hm({level:(e==null?void 0:e.logger)||o9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new vX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:LA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,gT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Bn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=p9(this.session.namespaces);this.namespaces=MA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=p9(s.namespaces);return this.namespaces=MA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ay?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(tf(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await SBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||o9,relayUrl:this.providerOpts.relayUrl||xBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ny(n)))];RO("client",this.client),RO("events",this.events),RO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=l$e(n,this.session),s=wX(r),i=MA(this.namespaces,this.optionalNamespaces),o=PO(LA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new w$e({namespace:o});break;case"algorand":this.rpcProviders[n]=new I$e({namespace:o});break;case"solana":this.rpcProviders[n]=new E$e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new A$e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new h$e({namespace:o});break;case"cip34":this.rpcProviders[n]=new R$e({namespace:o});break;case"elrond":this.rpcProviders[n]=new k$e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new L$e({namespace:o});break;case"near":this.rpcProviders[n]=new $$e({namespace:o});break;case"tezos":this.rpcProviders[n]=new W$e({namespace:o});break;default:this.rpcProviders[ay]?this.rpcProviders[ay].updateNamespace(o):this.rpcProviders[ay]=new G$e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&tf(o)&&this.events.emit("accountsChanged",o.map(f9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ny(o),l=TO(o)!==TO(a)?`${c}:${TO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=PO(LA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",PO(LA({},Bn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(za.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ay]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=MA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ny(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ny(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(f9);if(!tf(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${kA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${kA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${kA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(kA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var b9={};const Z$e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof b9<"u"?b9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},N3={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?Ue.state.connectors:[],n=Ve.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&it.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ve.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ue.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ue.state.connectors;if(n)return n;const{injected:s,announced:i}=RS.getConnectorsByType(r,at.state.recommended,at.state.featured),o=s.filter(RS.showConnector),a=i.filter(RS.showConnector);return o.length||a.length?["wallet","email","social"]:Z$e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&at.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&at.state.excludedWallets.some(r=>wT.isLowerCaseMatch(r.name,t.name));return e||n}},RS={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Ve.getRecentWallets(),i=N3.filterOutDuplicateWallets(e),o=N3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&at.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&at.state.excludedWallets.some(i=>wT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!it.isMobile()||it.isMobile()&&!e&&!wt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(H.state.chains.values()).some(n=>Ue.getConnectorId(n.namespace)===Be.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=RS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),w=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...w].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const PS=globalThis,LU=PS.ShadowRoot&&(PS.ShadyCSS===void 0||PS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,UU=Symbol(),v9=new WeakMap;let EX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==UU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(LU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=v9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&v9.set(n,e))}return e}toString(){return this.cssText}};const ua=t=>new EX(typeof t=="string"?t:t+"",void 0,UU),Ju=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new EX(n,t,UU)},X$e=(t,e)=>{if(LU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=PS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},E9=LU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ua(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:e6e,defineProperty:t6e,getOwnPropertyDescriptor:n6e,getOwnPropertyNames:r6e,getOwnPropertySymbols:s6e,getPrototypeOf:i6e}=Object,rf=globalThis,C9=rf.trustedTypes,o6e=C9?C9.emptyScript:"",OO=rf.reactiveElementPolyfillSupport,vE=(t,e)=>t,T3={toAttribute(t,e){switch(e){case Boolean:t=t?o6e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},CX=(t,e)=>!e6e(t,e),_9={attribute:!0,type:String,converter:T3,reflect:!1,useDefault:!1,hasChanged:CX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),rf.litPropertyMetadata??(rf.litPropertyMetadata=new WeakMap);let cy=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=_9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&t6e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=n6e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??_9}static _$Ei(){if(this.hasOwnProperty(vE("elementProperties")))return;const e=i6e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(vE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(vE("properties"))){const n=this.properties,r=[...r6e(n),...s6e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(E9(s))}else e!==void 0&&n.push(E9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return X$e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:T3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:T3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??CX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};cy.elementStyles=[],cy.shadowRootOptions={mode:"open"},cy[vE("elementProperties")]=new Map,cy[vE("finalized")]=new Map,OO==null||OO({ReactiveElement:cy}),(rf.reactiveElementVersions??(rf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const EE=globalThis,yI=EE.trustedTypes,A9=yI?yI.createPolicy("lit-html",{createHTML:t=>t}):void 0,_X="$lit$",nh=`lit$${Math.random().toFixed(9).slice(2)}$`,AX="?"+nh,a6e=`<${AX}>`,jg=document,qC=()=>jg.createComment(""),VC=t=>t===null||typeof t!="object"&&typeof t!="function",BU=Array.isArray,c6e=t=>BU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",kO=`[ 	
\f\r]`,fv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,S9=/-->/g,x9=/>/g,Hf=RegExp(`>|${kO}(?:([^\\s"'>=/]+)(${kO}*=${kO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),I9=/'/g,N9=/"/g,SX=/^(?:script|style|textarea|title)$/i,xX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),XVe=xX(1),eKe=xX(2),Ow=Symbol.for("lit-noChange"),gs=Symbol.for("lit-nothing"),T9=new WeakMap,Ip=jg.createTreeWalker(jg,129);function IX(t,e){if(!BU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return A9!==void 0?A9.createHTML(e):e}const l6e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=fv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===fv?u[1]==="!--"?o=S9:u[1]!==void 0?o=x9:u[2]!==void 0?(SX.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Hf):u[3]!==void 0&&(o=Hf):o===Hf?u[0]===">"?(o=s??fv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Hf:u[3]==='"'?N9:I9):o===N9||o===I9?o=Hf:o===S9||o===x9?o=fv:(o=Hf,s=void 0);const f=o===Hf&&t[a+1].startsWith("/>")?" ":"";i+=o===fv?c+a6e:d>=0?(r.push(l),c.slice(0,d)+_X+c.slice(d)+nh+f):c+nh+(d===-2?a:f)}return[IX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class KC{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=l6e(e,n);if(this.el=KC.createElement(l,r),Ip.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Ip.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(_X)){const h=u[o++],f=s.getAttribute(d).split(nh),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?d6e:p[1]==="?"?h6e:p[1]==="@"?f6e:RT}),s.removeAttribute(d)}else d.startsWith(nh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(SX.test(s.tagName)){const d=s.textContent.split(nh),h=d.length-1;if(h>0){s.textContent=yI?yI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],qC()),Ip.nextNode(),c.push({type:2,index:++i});s.append(d[h],qC())}}}else if(s.nodeType===8)if(s.data===AX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(nh,d+1))!==-1;)c.push({type:7,index:i}),d+=nh.length-1}i++}}static createElement(e,n){const r=jg.createElement("template");return r.innerHTML=e,r}}function kw(t,e,n=t,r){var o,a;if(e===Ow)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=VC(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=kw(t,s._$AS(t,e.values),s,r)),e}class u6e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??jg).importNode(n,!0);Ip.currentNode=s;let i=Ip.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new g1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new p6e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Ip.nextNode(),o++)}return Ip.currentNode=jg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class g1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=gs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=kw(this,e,n),VC(e)?e===gs||e==null||e===""?(this._$AH!==gs&&this._$AR(),this._$AH=gs):e!==this._$AH&&e!==Ow&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):c6e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==gs&&VC(this._$AH)?this._$AA.nextSibling.data=e:this.T(jg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=KC.createElement(IX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new u6e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=T9.get(e.strings);return n===void 0&&T9.set(e.strings,n=new KC(e)),n}k(e){BU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new g1(this.O(qC()),this.O(qC()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class RT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=gs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=gs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=kw(this,e,n,0),o=!VC(e)||e!==this._$AH&&e!==Ow,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=kw(this,a[r+c],n,c),l===Ow&&(l=this._$AH[c]),o||(o=!VC(l)||l!==this._$AH[c]),l===gs?e=gs:e!==gs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===gs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class d6e extends RT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===gs?void 0:e}}class h6e extends RT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==gs)}}class f6e extends RT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=kw(this,e,n,0)??gs)===Ow)return;const r=this._$AH,s=e===gs&&r!==gs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==gs&&(r===gs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class p6e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){kw(this,e)}}const DO=EE.litHtmlPolyfillSupport;DO==null||DO(KC,g1),(EE.litHtmlVersions??(EE.litHtmlVersions=[])).push("3.3.1");const g6e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new g1(e.insertBefore(qC(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hg=globalThis;let OS=class extends cy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=g6e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ow}};var MW;OS._$litElement$=!0,OS.finalized=!0,(MW=hg.litElementHydrateSupport)==null||MW.call(hg,{LitElement:OS});const MO=hg.litElementPolyfillSupport;MO==null||MO({LitElement:OS});(hg.litElementVersions??(hg.litElementVersions=[])).push("4.2.1");let CE,sf,of;function nKe(t,e){CE=document.createElement("style"),sf=document.createElement("style"),of=document.createElement("style"),CE.textContent=Ky(t).core.cssText,sf.textContent=Ky(t).dark.cssText,of.textContent=Ky(t).light.cssText,document.head.appendChild(CE),document.head.appendChild(sf),document.head.appendChild(of),NX(e)}function NX(t){sf&&of&&(t==="light"?(sf.removeAttribute("media"),of.media="enabled"):(of.removeAttribute("media"),sf.media="enabled"))}function m6e(t){CE&&sf&&of&&(CE.textContent=Ky(t).core.cssText,sf.textContent=Ky(t).dark.cssText,of.textContent=Ky(t).light.cssText)}function Ky(t){return{core:Ju`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ua(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ua((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ua((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ua((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ua((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Ju`
      :root {
        --w3m-color-mix: ${ua((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ua(Wu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ua(Wu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Ju`
      :root {
        --w3m-color-mix: ${ua((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ua(Wu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ua(Wu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const rKe=Ju`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,sKe=Ju`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,iKe=Ju`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Pv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},wI=KY({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),bI=KY({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function m1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const vI=m1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),EI=m1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),TX=m1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});m1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});m1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const y6e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},kS={getMethodsByChainNamespace(t){return y6e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case vI.caipNetworkId:u.chains.push(vI.deprecatedCaipNetworkId);break;case EI.caipNetworkId:u.chains.push(EI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await fE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let RX=class{constructor({provider:e,namespace:n}){this.id=Be.CONNECTOR_ID.WALLET_CONNECT,this.name=tI.ConnectorNamesMap[Be.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=tI.ConnectorImageIds[Be.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=H.getCaipNetworks.bind(H),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=kS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return mE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:w6e})}};const w6e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let b6e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>H.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Be.CONNECTOR_ID.AUTH,type:"AUTH",name:Be.CONNECTOR_NAMES.AUTH,provider:e,imageId:tI.ConnectorImageIds[Be.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){qe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=qe.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof RX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class v6e extends b6e{setUniversalProvider(e){this.addConnector(new RX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>it.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&$n.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(qe.state.balanceLoading&&e.chainId===((c=H.state.activeCaipNetwork)==null?void 0:c.id))return{balance:qe.state.balance||"0.00",symbol:qe.state.balanceSymbol||""};const s=(await qe.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Be.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:SJ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=H.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Be.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Da(n.id)}]}))}catch(u){if(u.code===Pv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Pv.ERROR_INVALID_CHAIN_ID||u.code===Pv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Pv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Da(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const E6e=["email","socials","swaps","onramp","activity","reownBranding"],UA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?$n.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?$n.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?$n.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$n.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?$n.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$n.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?$n.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$n.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$n.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},C6e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=UA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=UA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return UA[t].processApi(e)},processFallbackFeature(t,e){return UA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await at.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?$n.DEFAULT_REMOTE_FEATURES:$n.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of E6e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),$n.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;xl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class _6e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=H.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=H.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=H.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return H.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>H.getCaipNetworks(n),this.getActiveChainNamespace=()=>H.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{H.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>H.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>H.state.activeChain===n||!n?H.state.activeCaipAddress:H.getAccountProp("caipAddress",n),this.setClientId=n=>{yt.setClientId(n)},this.getProvider=n=>Un.getProvider(n),this.getProviderType=n=>Un.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=qe.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{qe.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{qe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{qe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{qe.setProfileImage(n,r)},this.setUser=(n,r)=>{qe.setUser(n,r)},this.resetAccount=n=>{qe.resetAccount(n)},this.setCaipNetwork=n=>{H.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{H.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{qe.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{qe.setStatus(n,r),Ue.isConnected()?Ve.setConnectionStatus("connected"):Ve.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>H.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Ue.state.allConnectors,...n];Ue.setConnectors(r)},this.setConnections=(n,r)=>{wt.setConnections(n,r)},this.fetchIdentity=n=>yt.fetchIdentity(n),this.getReownName=n=>fE.getNamesForAddress(n),this.getConnectors=()=>Ue.getConnectors(),this.getConnectorImage=n=>eK.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Un.getProviderId(r),i=n?{...n,type:s}:void 0;qe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!H.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{qe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{qe.removeAddressLabel(n,r)},this.getAddress=n=>H.state.activeChain===n||!n?qe.state.address:H.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>H.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{H.resetNetwork(n)},this.addConnector=n=>{Ue.addConnector(n)},this.resetWcConnection=()=>{wt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{qe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{qe.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{H.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{qe.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await C6e.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&OD.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await at.fetchAllowedOrigins();if(e&&it.isClient()){const n=window.location.origin;kS.isOriginAllowed(n,e,Pv.DEFAULT_ALLOWED_ANCESTORS)||xl.open(bl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else xl.open(bl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,ur.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Yi.setThemeMode(e.themeMode),e.themeVariables&&Yi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");H.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&H.setActiveCaipNetwork(n)}initializeConnectionController(e){wt.setWcBasic(e.basic??!1)}initializeConnectorController(){Ue.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ve.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};qe.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){xl.open(bl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Be.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return it.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=iy.getUnsupportedNetwork(`${n}:${e}`);H.setActiveCaipNetwork(r)}}getDefaultNetwork(){return iy.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return iy.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return iy.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?iy.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Un.getProvider(e),s=Un.getProviderId(e),{caipAddress:i}=H.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ve.removeConnectedNamespace(e),Un.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Ue.removeConnectorId(e),H.resetAccount(e),H.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=H.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ve.setConnectedNamespaces([...H.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Ue.setConnectorId(Qi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,m,b,v,A;const c=H.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(T=>T.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:m[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Ve.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=qe.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=H.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ve.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=_Te(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));vn.resetSend(),wt.resetWcConnection(),await mE.clearSessions(),Ue.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ve.deleteConnectedSocialProvider(),ur.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(H.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:qe.state.address,provider:Un.getProvider(H.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if($n.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(H.state.activeChain),s=Un.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Be.CHAIN.EVM){const n=this.getAdapter(H.state.activeChain),r=Un.getProvider(H.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:qe.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:H.state.activeChain}),qe.state.profileImage||!1},getEnsAddress:async e=>await kS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(H.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Un.getProvider(H.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!qe.state.address||this.updateNativeBalance(qe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},wt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Un.getProviderId(H.state.activeChain)===Qi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Un.getProvider(n),i=Un.getProviderId(n);if(e.chainNamespace===H.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Qi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=xd.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new v6e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ve.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ve.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=H.state.activeChain===e,c=H.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=qe.state.address,i=H.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=H.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=H.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=H.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Be.CHAIN.EVM&&it.isSafeApp()&&Ue.setConnectorId(Be.CONNECTOR_ID.SAFE,e);const n=Ue.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Be.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Be.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Ue.getConnectorId(e),s=this.getCaipNetwork(e),o=Ue.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([it.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=H.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=xd.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=xd.validateCaipAddress(o),{chainId:f,address:p}=xd.parseCaipAddress(h);if(Un.setProviderId(n,Qi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&H.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Be.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:H.state.activeCaipNetwork});Un.setProvider(n,g)}else Un.setProvider(n,this.universalProvider);Ue.setConnectorId(Be.CONNECTOR_ID.WALLET_CONNECT,n),Ve.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await H.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=xd.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>it.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Un.setProviderId(s,e),Un.setProvider(s,n),Ue.setConnectorId(r,s)}async syncAllAccounts(e){const n=Ue.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===H.state.activeChain,r=H.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ve.getActiveNetworkProps(),c=i||a,l=((d=H.state.activeCaipNetwork)==null?void 0:d.name)===Be.UNSUPPORTED_NETWORK_NAME,u=H.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],m=w.find(v=>{var A;return((A=xd.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=xd.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===H.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=H.state.activeCaipNetwork)==null?void 0:h.name)===Be.UNSUPPORTED_NETWORK_NAME?H.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),wT.isLowerCaseMatch(s,qe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Ue.getConnectorId(e),r=Un.getProviderId(e);if(r===Qi.CONNECTOR_TYPE_ANNOUNCED||r===Qi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Qi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Un.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Be.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Be.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!QV.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=H.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=xTe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await J$e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{wt.setUri(e)}),this.universalProvider.on("connect",wt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),wt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(kS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&it.isCaipAddress(r[0])&&this.syncAccount(xd.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&it.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){ur.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(bl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=bl.ALERT_ERRORS[o];a&&(xl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&wt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ms.open({...e,data:{swap:e.arguments}})}return ms.open(e)}async close(){await this.injectModalUi(),ms.close()}setLoading(e,n){ms.setLoading(e,n)}async disconnect(e){await wt.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=H.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){xl.open(bl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await H.switchActiveNetwork(n)}getWalletProvider(){return H.state.activeChain?Un.state.providers[H.state.activeChain]:null}getWalletProviderType(){return Un.getProviderId(H.state.activeChain)}subscribeProviders(e){return Un.subscribeProviders(e)}getThemeMode(){return Yi.state.themeMode}getThemeVariables(){return Yi.state.themeVariables}setThemeMode(e){Yi.setThemeMode(e),NX(Yi.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){Yi.setThemeVariables(e),m6e(Yi.state.themeVariables)}subscribeTheme(e){return Yi.subscribe(e)}getWalletInfo(){return qe.state.connectedWalletInfo}getAccount(e){var o;const n=Ue.getAuthConnector(e),r=H.getAccountData(e),s=H.state.activeChain,i=Ve.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:it.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Be.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ve.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?H.subscribeChainProp("accountState",r,n):H.subscribe(r),Ue.subscribe(r)}subscribeNetwork(e){return H.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return qe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){qe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){H.subscribeKey("activeCaipNetwork",e)}getState(){return Dl.state}subscribeState(e){return Dl.subscribe(e)}showErrorMessage(e){Cc.showError(e)}showSuccessMessage(e){Cc.showSuccess(e)}getEvent(){return{...ur.state}}subscribeEvents(e){return ur.subscribe(e)}replace(e){Ft.replace(e)}redirect(e){Ft.push(e)}popTransactionStack(e){Ft.popTransactionStack(e)}isOpen(){return ms.state.open}isTransactionStackEmpty(){return Ft.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return N3.getConnectOrderMethod(ve.state.features,Ue.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||H.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&H.removeNetwork(e,n)}}let R9=!1;class A6e extends _6e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Fo.checkIfRequestExists(n)?Fo.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ls.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ls.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Fo.checkIfRequestIsSafe(r),i=qe.state.address,o=H.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=H.state.activeChain;Ue.getConnectorId(n)===Be.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=H.state.activeChain,s=r===Be.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=qe.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;wT.isLowerCaseMatch(n.address,qe.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...qe.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>it.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[it.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...qe.state.user||{},username:n},H.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,H.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,H.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Be.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=qe.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Yi.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Wu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Be.CONNECTOR_ID.AUTH,info:{name:Be.CONNECTOR_ID.AUTH},type:Qi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=H.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Ue.getConnectorId(n)===Be.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ve.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!it.isTelegram())return;const r=Ve.getTelegramSocialProvider();if(!r||!it.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;qe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Ue.getAuthConnector();r&&o&&(this.setLoading(!0,e),await wt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ve.setConnectedSocialProvider(r),Ve.removeTelegramSocialProvider(),ur.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Be.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=KPe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:bl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?xl.open(bl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?xl.open(bl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&xl.open(bl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Dl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&at.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=H.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Un.getProvider(r),u=Un.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Un.getProviderId(n)===Qi.CONNECTOR_TYPE_AUTH,u=Un.getProviderId(r),d=u===Qi.CONNECTOR_TYPE_AUTH,h=Be.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(H.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Be.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Qi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Qi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Dl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Be.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Un.getProviderId(e);if(n===Qi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ve.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(it.isClient()&&!R9)try{const e={...$n.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),it.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}R9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!it.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Xs(()=>import("./embedded-wallet-BbA1-IQa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Xs(()=>import("./email-C3OFWbOp.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Xs(()=>import("./socials-NLi2QclG.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Xs(()=>import("./swaps-Bl63uBrC.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Xs(()=>import("./send-CoQcj5HL.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Xs(()=>import("./receive-BGMy5Vnh.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Xs(()=>import("./onramp-BzPoP3H1.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Xs(()=>import("./transactions-AWhqjDG-.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Xs(()=>import("./index-D_5Cg7w2.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Xs(()=>import("./index-iUKlLMdH.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Xs(()=>import("./w3m-modal-BUeX5fR3.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let zd;function S6e(t){t&&(zd=t)}function y1(){if(!zd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(zd==null?void 0:zd.open(n))}async function e(){await(zd==null?void 0:zd.close())}return{open:t,close:e}}const x6e="1.7.8";let BA;function I6e(t){return BA||(BA=new A6e({...t,sdkVersion:it.generateSdkVersion(t.adapters??[],"react",x6e)}),S6e(BA)),BA}const N6e=Fc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),P9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],T6e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=N6e({isOpen:t}),{open:i}=y1(),o=k.useRef(null),[a,c]=k.useState([]),[l,u]=k.useState(!0),[d,h]=k.useState(null),[f,p]=k.useState("all"),[g,w]=k.useState(1),[m,b]=k.useState(1),[v,A]=k.useState(0),[C,T]=k.useState(null),[x,N]=k.useState(P9[0]),[S,D]=k.useState(!1),[P,$]=k.useState(null),G=k.useCallback(async()=>{var M,j;try{if((M=window.solana)!=null&&M.isPhantom){const V=await window.solana.connect();$(V.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const V=await window.solflare.connect();$(V.publicKey.toString());return}i()}catch(V){console.error("Failed to connect Solana wallet:",V),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}D(!1)},[i]);k.useEffect(()=>{var M,j;(M=window.solana)!=null&&M.publicKey?$(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&$(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let V,se=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){D(!0),u(!1);return}se=P||void 0,V=await VV(x.slug,50),console.log("Fetched Solana NFTs from collection:",V.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=V.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",V.data.map(Q=>({name:Q.name,owners:Q.owners,owner_of:Q.owner_of}))),V.data.some(Q=>Q.owners&&Q.owners.length>0)?(V.data=V.data.filter(Q=>{const te=Q.owners.some(pe=>pe.owner_of&&pe.owner_of.toLowerCase()===P.toLowerCase());return te&&console.log("Found owned NFT:",Q.name),te}),console.log("NFTs after filtering:",V.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?V=await xL(x.slug,50,se):V=await SL(x.slug,g,50,se);c(V.data),b(V.totalPages),A(V.totalCount)}catch(V){V instanceof Error?h(V.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),k.useEffect(()=>{S&&G()},[S,G]);const W=M=>new Date(M).toLocaleDateString(),I=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},B=async M=>{if(x.api==="opensea"&&x.chain)try{const j=await qV(x.chain,M.address,M.token_id.toString()),V={...M,attributes:JSON.stringify(j.traits||[])};T(V)}catch(j){console.error("Failed to fetch full NFT details",j),T(M)}else T(M)},O=M=>{N(M),w(1)};return t?y.jsxs(y.Fragment,{children:[y.jsx(j_,{nodeRef:o,handle:`.${s.header}`,children:y.jsxs("div",{ref:o,className:s.popup,children:[y.jsxs("div",{className:s.header,children:[y.jsx("span",{children:"LAWB NFT GALLERY"}),y.jsxs("div",{className:s.titleBarButtons,children:[y.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),y.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),y.jsx("div",{className:s.collectionSelector,children:P9.map(M=>y.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>O(M),children:M.name},M.slug))}),y.jsxs("div",{className:s.content,children:[y.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[y.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),y.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),y.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&y.jsx("button",{onClick:()=>{G()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&y.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?y.jsx("div",{children:"Loading NFTs..."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?y.jsx("div",{children:"No NFTs found."}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>y.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{B(M)},children:[y.jsx(YV,{src:KV(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),y.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:y.jsxs("strong",{children:["#",M.token_id]})}),y.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(M)]}),y.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(M.created_at)]})]},M.id))}),f!=="recent"&&m>1&&y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[y.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),y.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),y.jsx("button",{onClick:()=>w(M=>Math.min(m,M+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&y.jsx(Qme,{nft:C,onClose:()=>T(null)})]}):null};var $A,R6e=new Uint8Array(16);function P6e(){if(!$A&&($A=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!$A))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $A(R6e)}const O6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function k6e(t){return typeof t=="string"&&O6e.test(t)}var xs=[];for(var LO=0;LO<256;++LO)xs.push((LO+256).toString(16).substr(1));function D6e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(xs[t[e+0]]+xs[t[e+1]]+xs[t[e+2]]+xs[t[e+3]]+"-"+xs[t[e+4]]+xs[t[e+5]]+"-"+xs[t[e+6]]+xs[t[e+7]]+"-"+xs[t[e+8]]+xs[t[e+9]]+"-"+xs[t[e+10]]+xs[t[e+11]]+xs[t[e+12]]+xs[t[e+13]]+xs[t[e+14]]+xs[t[e+15]]).toLowerCase();if(!k6e(n))throw TypeError("Stringified UUID is invalid");return n}function M6e(t,e,n){t=t||{};var r=t.random||(t.rng||P6e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,D6e(r)}const L6e=Fc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),U6e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],B6e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],_o=500;function PX(){const t=L6e(),e=k.useRef(null),[n,r]=k.useState(null),[s,i]=k.useState(""),[o,a]=k.useState(""),[c,l]=k.useState(50),[u,d]=k.useState(50),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,m]=k.useState(!1),[b,v]=k.useState(!1),[A,C]=k.useState(!1),[T,x]=k.useState([]),[N,S]=k.useState(null),D=k.useRef(null),[P,$]=k.useState(null),G=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(me=>{const be=new window.Image;be.crossOrigin="anonymous",be.onload=()=>{const ct=Math.min(X.width/be.width,X.height/be.height),et=(X.width-be.width*ct)/2,ht=(X.height-be.height*ct)/2;ce.drawImage(be,et,ht,be.width*ct,be.height*ct),me()},be.onerror=()=>me(),be.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(me=>{me.textAlign="center",me.strokeStyle="black",me.lineWidth=3,me.fillStyle="white";const be=(ct,et)=>{const ht=ct.toUpperCase().split(" "),vt=[];let qn=ht[0];for(let dr=1;dr<ht.length;dr++){const ot=ht[dr];me.measureText(qn+" "+ot).width<et?qn+=" "+ot:(vt.push(qn),qn=ot)}return vt.push(qn),vt};if(s&&(me.font=`${c}px Impact`,be(s,_o-20).forEach((et,ht)=>{const vt=c+ht*c*1.2;me.strokeText(et,_o/2,vt),me.fillText(et,_o/2,vt)})),o){me.font=`${u}px Impact`;const ct=be(o,_o-20);ct.forEach((et,ht)=>{const vt=_o-(ct.length-ht)*u*1.2+u;me.strokeText(et,_o/2,vt),me.fillText(et,_o/2,vt)})}})(ce),await Promise.all(T.map(me=>new Promise(be=>{const ct=new window.Image;ct.src=me.src,ct.onload=()=>{ce.save(),ce.translate(me.x,me.y),ce.rotate(me.rotation*Math.PI/180),ce.scale(me.scale,me.scale),ce.drawImage(ct,-40,-40,80,80),ce.restore(),be()},ct.onerror=()=>be()})));try{h&&W(X),p&&I(X),w&&R(X)}catch(me){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",me),f(!1),g(!1),m(!1)}},W=X=>{const ce=X.getContext("2d");if(!ce)return;const he=ce.getImageData(0,0,X.width,X.height),me=he.data;for(let be=0;be<me.length;be+=4){const ct=me[be],et=me[be+1],ht=me[be+2],vt=(ct+et+ht)/3,qn=1.8;me[be]=Math.min(255,vt+(ct-vt)*qn),me[be+1]=Math.min(255,vt+(et-vt)*qn*.7),me[be+2]=Math.min(255,vt+(ht-vt)*qn*.4);const dr=1.3;me[be]=Math.min(255,Math.max(0,me[be]*dr)),me[be+1]=Math.min(255,Math.max(0,me[be+1]*dr)),me[be+2]=Math.min(255,Math.max(0,me[be+2]*dr))}ce.putImageData(he,0,0)},I=X=>{const ce=X.getContext("2d");if(!ce)return;const he=4,be=ce.getImageData(0,0,X.width,X.height).data,ct=new Uint8ClampedArray(be);for(let et=0;et<X.height;et+=he)for(let ht=0;ht<X.width;ht+=he){const vt=(et*X.width+ht)*4,qn=be[vt],dr=be[vt+1],ot=be[vt+2],rn=be[vt+3];for(let Wt=0;Wt<he&&et+Wt<X.height;Wt++)for(let Qe=0;Qe<he&&ht+Qe<X.width;Qe++){const Dn=((et+Wt)*X.width+(ht+Qe))*4;ct[Dn]=qn,ct[Dn+1]=dr,ct[Dn+2]=ot,ct[Dn+3]=rn}}ce.putImageData(new ImageData(ct,X.width,X.height),0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const he=ce.getImageData(0,0,X.width,X.height),me=he.data;for(let be=0;be<me.length;be+=4){const ct=(Math.random()-.5)*50;me[be]=Math.max(0,Math.min(255,me[be]+ct)),me[be+1]=Math.max(0,Math.min(255,me[be+1]+ct)),me[be+2]=Math.max(0,Math.min(255,me[be+2]+ct))}ce.putImageData(he,0,0)};k.useEffect(()=>{e.current&&G(e.current)},[G]);const B=k.useRef(null),O=500,M=X=>{X.preventDefault(),B.current=setTimeout(()=>{const ce=e.current;ce&&(navigator.share?ce.toBlob(he=>{if(he){const me=new File([he],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[me]}).catch(()=>{te()})}}):te())},O)},j=()=>{B.current&&(clearTimeout(B.current),B.current=null)},V=()=>{B.current&&(clearTimeout(B.current),B.current=null)},se=X=>{X.preventDefault()},ie=X=>{var he;const ce=(he=X.target.files)==null?void 0:he[0];ce&&r(URL.createObjectURL(ce))},Q=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),m(!1)},te=async()=>{const X=e.current;if(!X)return;await G(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},pe=async X=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const he=await xL(X.slug,50);ce=he.data,console.log("OpenSea response:",he)}else if(X.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",X.slug);const he=await VV(X.slug,50);if(ce=he.data,console.log("Helius Solana response:",he),!ce||ce.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",X.slug);const he=await SL(X.slug,1,50);ce=he.data,console.log("Scatter response:",he)}if(ce&&ce.length>0){const he=ce[Math.floor(Math.random()*ce.length)],me=he.image||he.image_url||he.image_url_shrunk;console.log("Selected NFT:",he),console.log("Image URL:",me),r(me)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},Ze=X=>{const ce={id:M6e(),src:X,x:80,y:80,scale:1,rotation:0};x(he=>he.length>=2||he.some(me=>me.src===X&&!me.id.startsWith("upload-"))?he:[...he,ce]),$(ce.id)},Xe=X=>{var he;const ce=(he=X.target.files)==null?void 0:he[0];if(ce){const me=URL.createObjectURL(ce);Ze(me)}},We=(X,ce,he)=>{x(me=>me.map(be=>{if(be.id!==X)return be;let ct=be.x+ce/1.2,et=be.y+he/1.2;const ht=40*be.scale,vt=40*be.scale;return ct=Math.max(ht,Math.min(_o-ht,ct)),et=Math.max(vt,Math.min(_o-vt,et)),{...be,x:ct,y:et}}))},mt=(X,ce,he,me,be)=>{x(ct=>ct.map(et=>{if(et.id!==X)return et;const ht=et.x,vt=et.y,qn=Math.atan2(be-vt,me-ht)*180/Math.PI;return{...et,rotation:he+(qn-ce)*.5}}))},Ot=X=>{x(ce=>ce.filter(he=>he.id!==X))},ln=(X,ce)=>{x(he=>he.map(me=>me.id===X?{...me,scale:Math.max(.2,me.scale*(1+(ce-1)*.2))}:me))};return y.jsxs("div",{className:t.container,children:[y.jsxs("div",{className:t.header,children:[y.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),y.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",y.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),y.jsxs("div",{className:t.content,children:[y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Collections"}),y.jsxs("div",{className:t.row,children:[y.jsxs("div",{className:t.dropdown,children:[y.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&y.jsx("div",{className:t.dropdownContent,children:U6e.map(X=>y.jsx("div",{className:t.dropdownItem,onClick:()=>{pe(X)},children:X.name},X.id))})]}),y.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",y.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:ie})]}),A&&y.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Text"}),y.jsxs("div",{className:t.row,children:[y.jsx("span",{className:t.label,children:"Top Text:"}),y.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),y.jsx("span",{className:t.label,children:"Size:"}),y.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),y.jsxs("div",{className:t.row,children:[y.jsx("span",{className:t.label,children:"Bottom Text:"}),y.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),y.jsx("span",{className:t.label,children:"Size:"}),y.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Effects"}),y.jsxs("div",{className:t.row,children:[y.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),y.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),y.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>m(X=>!X),children:"Grain"})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Stickers"}),y.jsxs("div",{className:t.row,children:[B6e.map((X,ce)=>y.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Ze(X)},X)),y.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",y.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:Xe})]})]})]}),y.jsxs("div",{className:t.actions,children:[y.jsx("button",{className:t.button,onClick:te,children:"Save Image"}),y.jsx("button",{className:t.button,onClick:Q,children:"Restart"})]})]}),y.jsx("div",{className:t.memeArea,children:y.jsx("canvas",{ref:e,width:_o,height:_o,className:t.canvas,onTouchStart:M,onTouchEnd:j,onTouchMove:V,onContextMenu:se,style:{touchAction:"none"}})}),y.jsx("div",{style:{position:"absolute",left:0,top:0,width:_o,height:_o,pointerEvents:"none"},children:T.map(X=>P===X.id?y.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{S(X.id),ce.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ce=>{N===X.id&&ce.buttons===1&&We(X.id,ce.movementX,ce.movementY)},children:[y.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),y.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var qn;ce.stopPropagation();const he=(qn=ce.currentTarget.parentElement)==null?void 0:qn.getBoundingClientRect(),me=he?he.left+he.width/2:0,be=he?he.top+he.height/2:0,ct=Math.atan2(ce.clientY-be,ce.clientX-me)*180/Math.PI,et=X.rotation,ht=dr=>{mt(X.id,ct,et,dr.clientX,dr.clientY)},vt=()=>{window.removeEventListener("mousemove",ht),window.removeEventListener("mouseup",vt)};window.addEventListener("mousemove",ht),window.addEventListener("mouseup",vt)}}),y.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const he=ce.clientX,me=ct=>{const et=(ct.clientX-he)/80;ln(X.id,1+et)},be=()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",be)};window.addEventListener("mousemove",me),window.addEventListener("mouseup",be)}}),y.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Ot(X.id),children:""}),y.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>$(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function YC(){return YC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YC.apply(this,arguments)}var Mh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mh||(Mh={}));const O9="popstate";function $6e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return R3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:kX(s)}return j6e(e,n,null,t)}function es(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function OX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F6e(){return Math.random().toString(36).substr(2,8)}function k9(t,e){return{usr:t.state,key:t.key,idx:e}}function R3(t,e,n,r){return n===void 0&&(n=null),YC({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wb(e):e,{state:n,key:e&&e.key||r||F6e()})}function kX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function j6e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Mh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(YC({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Mh.Pop;let w=u(),m=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:m})}function h(w,m){a=Mh.Push;let b=R3(g.location,w,m);l=u()+1;let v=k9(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,m){a=Mh.Replace;let b=R3(g.location,w,m);l=u();let v=k9(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:kX(w);return b=b.replace(/ $/,"%20"),es(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(O9,d),c=w,()=>{s.removeEventListener(O9,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var D9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(D9||(D9={}));function W6e(t,e,n){return n===void 0&&(n="/"),z6e(t,e,n)}function z6e(t,e,n,r){let s=typeof e=="string"?wb(e):e,i=LX(s.pathname||"/",n);if(i==null)return null;let o=DX(t);H6e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=n8e(i);a=X6e(o[c],l)}return a}function DX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(es(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=fg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(es(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),DX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:J6e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of MX(i.path))s(i,o,c)}),e}function MX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=MX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function H6e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Z6e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const G6e=/^:[\w-]+$/,q6e=3,V6e=2,K6e=1,Y6e=10,Q6e=-2,M9=t=>t==="*";function J6e(t,e){let n=t.split("/"),r=n.length;return n.some(M9)&&(r+=Q6e),e&&(r+=V6e),n.filter(s=>!M9(s)).reduce((s,i)=>s+(G6e.test(i)?q6e:i===""?K6e:Y6e),r)}function Z6e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function X6e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=e8e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:fg([i,d.pathname]),pathnameBase:c8e(fg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=fg([i,d.pathnameBase]))}return o}function e8e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=t8e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function t8e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),OX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function n8e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return OX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function LX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function r8e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?wb(t):t;return{pathname:n?n.startsWith("/")?n:s8e(n,e):e,search:l8e(r),hash:u8e(s)}}function s8e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function UO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i8e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o8e(t,e){let n=i8e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function a8e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=wb(t):(s=YC({},t),es(!s.pathname||!s.pathname.includes("?"),UO("?","pathname","search",s)),es(!s.pathname||!s.pathname.includes("#"),UO("#","pathname","hash",s)),es(!s.search||!s.search.includes("#"),UO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=r8e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const fg=t=>t.join("/").replace(/\/\/+/g,"/"),c8e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),l8e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u8e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function d8e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const UX=["post","put","patch","delete"];new Set(UX);const h8e=["get",...UX];new Set(h8e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function QC(){return QC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QC.apply(this,arguments)}const $U=k.createContext(null),f8e=k.createContext(null),PT=k.createContext(null),OT=k.createContext(null),bb=k.createContext({outlet:null,matches:[],isDataRoute:!1}),BX=k.createContext(null);function kT(){return k.useContext(OT)!=null}function $X(){return kT()||es(!1),k.useContext(OT).location}function FX(t){k.useContext(PT).static||k.useLayoutEffect(t)}function p8e(){let{isDataRoute:t}=k.useContext(bb);return t?I8e():g8e()}function g8e(){kT()||es(!1);let t=k.useContext($U),{basename:e,future:n,navigator:r}=k.useContext(PT),{matches:s}=k.useContext(bb),{pathname:i}=$X(),o=JSON.stringify(o8e(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return FX(()=>{a.current=!0}),k.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=a8e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:fg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function m8e(t,e){return y8e(t,e)}function y8e(t,e,n,r){kT()||es(!1);let{navigator:s}=k.useContext(PT),{matches:i}=k.useContext(bb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=$X(),u;if(e){var d;let w=typeof e=="string"?wb(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||es(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=W6e(t,{pathname:f}),g=C8e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:fg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:fg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?k.createElement(OT.Provider,{value:{location:QC({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Mh.Pop}},g):g}function w8e(){let t=x8e(),e=d8e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const b8e=k.createElement(w8e,null);class v8e extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(bb.Provider,{value:this.props.routeContext},k.createElement(BX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E8e(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext($U);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(bb.Provider,{value:e},r)}function C8e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||es(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||b8e,c&&(l<0&&h===0?(N8e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=k.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,k.createElement(E8e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?k.createElement(v8e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):b()},null)}var jX=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jX||{}),WX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(WX||{});function _8e(t){let e=k.useContext($U);return e||es(!1),e}function A8e(t){let e=k.useContext(f8e);return e||es(!1),e}function S8e(t){let e=k.useContext(bb);return e||es(!1),e}function zX(t){let e=S8e(),n=e.matches[e.matches.length-1];return n.route.id||es(!1),n.route.id}function x8e(){var t;let e=k.useContext(BX),n=A8e(),r=zX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function I8e(){let{router:t}=_8e(jX.UseNavigateStable),e=zX(WX.UseNavigateStable),n=k.useRef(!1);return FX(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,QC({fromRouteId:e},i)))},[t,e])}const L9={};function N8e(t,e,n){L9[t]||(L9[t]=!0)}function T8e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function DS(t){es(!1)}function R8e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Mh.Pop,navigator:i,static:o=!1,future:a}=t;kT()&&es(!1);let c=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:c,navigator:i,static:o,future:QC({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=wb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=k.useMemo(()=>{let w=LX(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:k.createElement(PT.Provider,{value:l},k.createElement(OT.Provider,{children:n,value:g}))}function P8e(t){let{children:e,location:n}=t;return m8e(P3(e),n)}new Promise(()=>{});function P3(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,P3(r.props.children,i));return}r.type!==DS&&es(!1),!r.props.index||!r.props.children||es(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=P3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const O8e="6";try{window.__reactRouterVersion=O8e}catch{}const k8e="startTransition",U9=hre[k8e];function D8e(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=$6e({window:s,v5Compat:!0}));let o=i.current,[a,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=k.useCallback(d=>{l&&U9?U9(()=>c(d)):c(d)},[c,l]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>T8e(r),[r]),k.createElement(R8e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var B9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B9||(B9={}));var $9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($9||($9={}));const M8e=Fc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function L8e(){const t=M8e(),{open:e}=y1(),[n,r]=k.useState(),[s,i]=k.useState(!1),[o,a]=k.useState("pixelawbs-popup"),[c,l]=k.useState(new Set),[u,d]=k.useState(!1),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,m]=k.useState(!1),b=p8e(),v=k.useRef(null);k.useEffect(()=>{if(o==="halloween-popup"&&v.current){const I=v.current.querySelector("script[data-tiktok-embed]");I&&I.remove();const R=document.createElement("script");R.src="https://www.tiktok.com/embed.js",R.async=!0,R.setAttribute("data-tiktok-embed","true"),v.current.appendChild(R)}},[o]);const A=(I,R,B)=>{if(I==="url"&&B)window.open(B,"_blank");else if(I==="popup"&&R)a(R),l(O=>{const M=new Set(O);return M.delete(R),M}),document.body.offsetWidth;else if(I==="wallet")s?(i(!1),r(void 0)):e();else if(I==="mint"){if(!n){alert("Please connect your wallet first!");return}d(!0)}else I==="nft-gallery"?f(!0):I==="meme-generator"?g(!0):I==="chess"&&(s?m(!0):e().then(()=>{const O=()=>{window.ethereum&&window.ethereum.selectedAddress?m(!0):setTimeout(O,200)};O()}))},C=()=>a(null),T=I=>{l(R=>new Set(R).add(I)),a(null)},x=I=>{I==="mint-popup"?d(!0):I==="nft-gallery-popup"?f(!0):I==="meme-generator-popup"?g(!0):a(I),l(R=>{const B=new Set(R);return B.delete(I),B})},N=()=>d(!1),S=()=>f(!1),D=()=>g(!1),P=()=>{d(!1),l(I=>new Set(I).add("mint-popup"))},$=()=>{f(!1),l(I=>new Set(I).add("nft-gallery-popup"))},G=()=>{g(!1),l(I=>new Set(I).add("meme-generator-popup"))},W=y.jsxs("div",{onClick:()=>{s?(i(!1),r(void 0)):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:s?"limegreen":"red",fontWeight:"bold"},children:[y.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:s?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return y.jsxs("div",{className:t.body,children:[w&&y.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[y.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{m(!1),b("/chess")}}),y.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),y.jsx(Wme,{onIconClick:A}),y.jsx(Hme,{minimizedWindows:Array.from(c),onRestoreWindow:x,walletButton:W,connectionStatus:{connected:s,address:n,ens:void 0}}),y.jsxs(da,{id:"chat-popup",isOpen:o==="chat-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",y.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),y.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(da,{id:"purity-popup",isOpen:o==="purity-popup",onClose:C,onMinimize:T,children:[y.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),y.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),y.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),y.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(da,{id:"lawbstarz-popup",isOpen:o==="lawbstarz-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",y.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",y.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",y.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[y.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",y.jsx("br",{}),y.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",y.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",y.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),y.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),y.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(da,{id:"lawbstation-popup",isOpen:o==="lawbstation-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",y.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),y.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(da,{id:"nexus-popup",isOpen:o==="nexus-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",y.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),y.jsxs(da,{id:"lawbsters-popup",isOpen:o==="lawbsters-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),y.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:y.jsx(dfe,{id:"1620879129850834944"})}),y.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),y.jsx(da,{id:"pixelawbs-popup",isOpen:o==="pixelawbs-popup",onClose:C,onMinimize:T,children:(()=>{const I=R=>{R.preventDefault(),a(null),d(!0)};return y.jsxs(y.Fragment,{children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:I,children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),y.jsxs(da,{id:"halloween-popup",isOpen:o==="halloween-popup",onClose:C,onMinimize:T,children:[y.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),y.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),y.jsx("div",{ref:v,style:{maxWidth:"400px",margin:"0 auto"},children:y.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:y.jsxs("section",{children:[y.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",y.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),y.jsxs(da,{id:"lawb-popup",isOpen:o==="lawb-popup",onClose:C,onMinimize:T,children:[y.jsx("h1",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),y.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",y.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),y.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",y.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),y.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),y.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),y.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:y.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),y.jsx(Vme,{isOpen:u,onClose:N,onMinimize:P,walletAddress:n||""}),y.jsx(T6e,{isOpen:h,onClose:S,onMinimize:$,walletAddress:n}),y.jsx(da,{id:"meme-generator-popup",isOpen:p,onClose:D,onMinimize:G,children:y.jsx(PX,{})})]})}function qo(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const MS="2.17.3",U8e=()=>`@wagmi/core@${MS}`;var HX=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},CI,GX;let yd=class O3 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return U8e()}constructor(e,n={}){var i;super(),CI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof O3?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof O3&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return HX(this,CI,"m",GX).call(this,this,e)}};CI=new WeakSet,GX=function t(e,n){return n!=null&&n(e)?e:e.cause?HX(this,CI,"m",t).call(this,e.cause,n):e};class JC extends yd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class B8e extends yd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class $8e extends yd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class F8e extends yd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class j8e extends yd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class W8e extends yd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function LS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new B8e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function w1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new W8e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new $8e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new j8e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Nr(e.account??n.accounts[0]);if(o&&(o.address=zu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new F8e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return BY({account:o,chain:a,name:"Connector Client",transport:l=>rEe(c)({...l,retryCount:0})})}async function k3(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function z8e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await w1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return qo(o,QN,"estimateGas")({...s,account:i})}function qX(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(abe[t])}function Yy(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function H8e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return qo(o,rQ,"multicall")({allowFailure:n,contracts:s,...i})}function VX(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return qo(s,zl,"readContract")(r)}async function G8e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>H8e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof JK)throw c;const l=()=>o.map(u=>VX(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function KX(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await F9(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await F9(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=SK(Ml(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await qo(c,GL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:im(u,qX(a)),symbol:d.nativeCurrency.symbol,value:u}}async function F9(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await G8e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=im(c??"0",qX(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function j9(t){return t.state.chainId}function vf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vf(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!vf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let BO=[];function W9(t){const e=t.chains;return vf(BO,e)?BO:(BO=e,e)}function q8e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let FA=[];function ac(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||vf(FA,e)?FA:(FA=e,e)}let $O=[];function z9(t){const e=t.connectors;return vf($O,e)?$O:($O=e,e)}function V8e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return qo(s,HY,"getEnsName")(r)}function D3(t,e={}){const n=q8e(t,e);return n==null?void 0:n.extend(E_e)}async function K8e(t,e={}){return(await w1(t,e)).extend(M_e)}async function Y8e(t,e){const{account:n,chainId:r,...s}=e,i=n??Yy(t).address,o=t.getClient({chainId:r});return qo(o,Z_,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let FO=!1;async function M3(t,e={}){var l,u;if(FO)return[];FO=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),FO=!1,a}async function Q8e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await w1(t,{account:n??void 0,chainId:r,connector:s}),await qo(o,t1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function J8e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await w1(t,{account:n,connector:r}),qo(i,PQ,"signMessage")({...s,...n?{account:n}:{}})}class Qd extends yd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Z8e extends yd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function L3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Z8e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new JC;return t.setState(a=>({...a,chainId:r})),i}function YX(t,e){const{onChange:n}=e;return t.subscribe(()=>Yy(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return vf(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function X8e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function QX(t,e){const{onChange:n}=e;return t.subscribe(()=>ac(t),n,{equalityFn:vf})}function JX(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function e4e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=qo(l,TQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function t4e(t,e){const{onChange:n}=e;return t.subscribe(()=>D3(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function ZX(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await qo(i,NQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await qo(i,sT,"getTransaction")({hash:a.transactionHash}),d=await qo(i,X_,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?SK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function XX(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await w1(t,{account:n??void 0,chainId:r,connector:s}),await qo(o,OY,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function cKe(t){return t}DT.type="injected";function DT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...n4e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:DT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,m,b;const d=await this.getProvider();if(!d)throw new Qd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>zu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Gr.code)throw new Gr(A);if(A.code===Xh.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>zu(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===Gr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Gr.code?new Gr(A):A.code===Xh.code?new Xh(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Qd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await $Y(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Qd;return(await l.request({method:"eth_accounts"})).map(d=>zu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Qd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=US(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new Qd}return!!(await Kx(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,m;const d=await this.getProvider();if(!d)throw new Qd;const h=c.chains.find(b=>b.id===u);if(!h)throw new jl(new JC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let T;l!=null&&l.blockExplorerUrls?T=l.blockExplorerUrls:A&&(T=[A.url,...Object.values(C).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const N={blockExplorerUrls:T,chainId:tt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Gr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Gr(A)}throw v.code===Gr.code?new Gr(v):new jl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>zu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const n4e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:US(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return US(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:US(t,"isPhantom")}}};function US(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function r4e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function s4e(){const t=new Set;let e=[];const n=()=>r4e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const i4e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},o4e=i4e;function a4e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const U3=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return U3(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return U3(r)(n)}}}},c4e=(t,e)=>(n,r,s)=>{let i={storage:a4e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const m=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return U3(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,C]=b;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{m==null||m(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},l4e=c4e,H9=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},jO=t=>t?H9(t):H9;var eee={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],m=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),m){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(m-1);v<m;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,C;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),m){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(m-1);C<m;C++)b[C-1]=arguments[C];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(eee);var u4e=eee.exports;const d4e=Qg(u4e);class h4e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new d4e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function f4e(t){return new h4e(t)}function p4e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function G9(t,e){return t.slice(0,e).join(".")||"."}function q9(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function g4e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=q9(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=q9(s,c);if(u!==0)return r?e.call(this,a,c,G9(i,u)):`[ref=${G9(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function m4e(t,e,n,r){return JSON.stringify(t,g4e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function y4e(t){const{deserialize:e=p4e,key:n="wagmi",serialize:r=m4e,storage:s=tee}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const tee={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function w4e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:tee;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const B3=256;let jA=B3,WA;function b4e(t=11){if(!WA||jA+t>B3*2){WA="",jA=0;for(let e=0;e<B3;e++)WA+=(256+Math.random()*256|0).toString(16).substring(1)}return WA.substring(jA,jA+++t)}function nee(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=y4e({storage:w4e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?s4e():void 0,a=jO(()=>i.chains),c=jO(()=>{const C=[],T=new Set;for(const x of i.connectors??[]){const N=l(x);if(C.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const D of S)T.add(D)}}if(!s&&o){const x=o.getProviders();for(const N of x)T.has(N.info.rdns)||C.push(l(u(N)))}return C});function l(C){var N;const T=f4e(b4e()),x={...C({emitter:T,chains:a.getState(),storage:n,transports:i.transports}),emitter:T,uid:T.uid};return T.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(C){const{info:T}=C,x=C.provider;return DT({target:{...T,id:T.rdns,provider:x}})}const d=new Map;function h(C={}){const T=C.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===T);if(C.chainId&&!x)throw new JC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new JC}{const S=d.get(T);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,D=a.getState().map(G=>G.id),P={},$=Object.entries(i);for(const[G,W]of $)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(S in W)P[G]=W[S];else{if(D.some(R=>R in W))continue;P[G]=W}else P[G]=W;N=BY({...P,chain:x,batch:P.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(T,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";MS.startsWith(g)?p=Number.parseInt(MS.replace(g,"")):p=Number.parseInt(MS.split(".")[0]??"0");const w=jO(o4e(n?l4e(f,{migrate(C,T){if(T===p)return C;const x=f(),N=m(C,x.chainId);return{...x,chainId:N}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([T,x])=>{const{id:N,name:S,type:D,uid:P}=x.connector;return[T,{...x,connector:{id:N,name:S,type:D,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,T){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,T.chainId);return{...T,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function m(C,T){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:T}r&&w.subscribe(({connections:C,current:T})=>{var x;return T?(x=C.get(T))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return w.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const T=new Set,x=new Set;for(const S of c.getState())if(T.add(S.id),S.rdns){const D=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of D)x.add(P)}const N=[];for(const S of C){if(x.has(S.info.rdns))continue;const D=l(u(S));T.has(D.id)||N.push(D)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(C){w.setState(T=>{const x=T.connections.get(C.uid);return x?{...T,connections:new Map(T.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:T})}function v(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(T=>{const x=c.getState().find(N=>N.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...T,connections:new Map(T.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):T})}function A(C){w.setState(T=>{const x=T.connections.get(C.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(T.connections.delete(C.uid),T.connections.size===0)return{...T,connections:new Map,current:null,status:"disconnected"};const N=T.connections.values().next().value;return{...T,connections:new Map(T.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let T;typeof C=="function"?T=C(w.getState()):T=C;const x=f();typeof T!="object"&&(T=x),Object.keys(x).some(S=>!(S in T))&&(T=x),w.setState(T,!0)},subscribe(C,T,x){return w.subscribe(C,T,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const T=typeof C=="function"?C(a.getState()):C;if(T.length!==0)return a.setState(T,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:v,disconnect:A}}}}function v4e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?M3(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function E4e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=v4e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=k.useRef(!0);return k.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const ree=k.createContext(void 0);function C4e(t){const{children:e,config:n}=t,r={value:n};return k.createElement(E4e,t,k.createElement(ree.Provider,r,e))}const _4e="2.15.6",A4e=()=>`wagmi@${_4e}`;class S4e extends yd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return A4e()}}class x4e extends S4e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Ri(t={}){const e=t.config??k.useContext(ree);if(!e)throw new x4e;return e}function I4e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var see={exports:{}},iee={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=k,N4e=Yq;function T4e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var R4e=typeof Object.is=="function"?Object.is:T4e,P4e=N4e.useSyncExternalStore,O4e=MT.useRef,k4e=MT.useEffect,D4e=MT.useMemo,M4e=MT.useDebugValue;iee.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=O4e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=D4e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,R4e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=P4e(t,i[0],i[1]);return k4e(function(){o.hasValue=!0,o.value=a},[a]),M4e(a),a};see.exports=iee;var oee=see.exports;const WO=t=>typeof t=="object"&&!Array.isArray(t);function L4e(t,e,n=e,r=vf){const s=k.useRef([]),i=oee.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(WO(o)&&WO(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return k.useMemo(()=>{if(WO(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function b1(t={}){const e=Ri(t);return L4e(n=>YX(e,{onChange:n}),()=>Yy(e))}var vb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wg=typeof window>"u"||"Deno"in globalThis;function gi(){}function U4e(t,e){return typeof t=="function"?t(e):t}function $3(t){return typeof t=="number"&&t>=0&&t!==1/0}function aee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function af(t,e){return typeof t=="function"?t(e):t}function Aa(t,e){return typeof t=="function"?t(e):t}function V9(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==FU(o,e.options))return!1}else if(!ZC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function K9(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(zg(e.options.mutationKey)!==zg(i))return!1}else if(!ZC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function FU(t,e){return((e==null?void 0:e.queryKeyHashFn)||zg)(t)}function zg(t){return JSON.stringify(t,(e,n)=>F3(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ZC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ZC(t[n],e[n])):!1}function jU(t,e){if(t===e)return t;const n=Y9(t)&&Y9(e);if(n||F3(t)&&F3(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=jU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function _I(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Y9(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function F3(t){if(!Q9(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Q9(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Q9(t){return Object.prototype.toString.call(t)==="[object Object]"}function B4e(t){return new Promise(e=>{setTimeout(e,t)})}function j3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?jU(t,e):e}function $4e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function F4e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var WU=Symbol();function cee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===WU?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function lee(t,e){return typeof t=="function"?t(...e):!!t}var Pp,rh,n0,LW,j4e=(LW=class extends vb{constructor(){super();Y(this,Pp);Y(this,rh);Y(this,n0);L(this,n0,e=>{if(!Wg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,rh)||this.setEventListener(_(this,n0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,rh))==null||e.call(this),L(this,rh,void 0))}setEventListener(e){var n;L(this,n0,e),(n=_(this,rh))==null||n.call(this),L(this,rh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Pp)!==e&&(L(this,Pp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,Pp)=="boolean"?_(this,Pp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Pp=new WeakMap,rh=new WeakMap,n0=new WeakMap,LW),zU=new j4e,r0,sh,s0,UW,W4e=(UW=class extends vb{constructor(){super();Y(this,r0,!0);Y(this,sh);Y(this,s0);L(this,s0,e=>{if(!Wg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,sh)||this.setEventListener(_(this,s0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,sh))==null||e.call(this),L(this,sh,void 0))}setEventListener(e){var n;L(this,s0,e),(n=_(this,sh))==null||n.call(this),L(this,sh,e(this.setOnline.bind(this)))}setOnline(e){_(this,r0)!==e&&(L(this,r0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,r0)}},r0=new WeakMap,sh=new WeakMap,s0=new WeakMap,UW),AI=new W4e;function W3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function z4e(t){return Math.min(1e3*2**t,3e4)}function uee(t){return(t??"online")==="online"?AI.isOnline():!0}var dee=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zO(t){return t instanceof dee}function hee(t){let e=!1,n=0,r=!1,s;const i=W3(),o=g=>{var w;r||(h(new dee(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>zU.isFocused()&&(t.networkMode==="always"||AI.isOnline())&&t.canRun(),u=()=>uee(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=m=>{(r||l())&&g(m)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var T;if(r)return;const b=t.retry??(Wg?0:3),v=t.retryDelay??z4e,A=typeof v=="function"?v(n,m):v,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,m);if(e||!C){h(m);return}n++,(T=t.onFail)==null||T.call(t,n,m),B4e(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var H4e=t=>setTimeout(t,0);function G4e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=H4e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Kr=G4e(),Op,BW,fee=(BW=class{constructor(){Y(this,Op)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$3(this.gcTime)&&L(this,Op,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wg?1/0:5*60*1e3))}clearGcTimeout(){_(this,Op)&&(clearTimeout(_(this,Op)),L(this,Op,void 0))}},Op=new WeakMap,BW),i0,kp,ma,Dp,Ys,h_,Mp,lc,pu,$W,q4e=($W=class extends fee{constructor(e){super();Y(this,lc);Y(this,i0);Y(this,kp);Y(this,ma);Y(this,Dp);Y(this,Ys);Y(this,h_);Y(this,Mp);L(this,Mp,!1),L(this,h_,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,Dp,e.client),L(this,ma,_(this,Dp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,i0,V4e(this.options)),this.state=e.state??_(this,i0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Ys))==null?void 0:e.promise}setOptions(e){this.options={..._(this,h_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,ma).remove(this)}setData(e,n){const r=j3(this.state.data,e,this.options);return de(this,lc,pu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){de(this,lc,pu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Ys))==null?void 0:r.promise;return(s=_(this,Ys))==null||s.cancel(e),n?n.then(gi).catch(gi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,i0))}isActive(){return this.observers.some(e=>Aa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===WU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>af(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!aee(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Ys))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Ys))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,ma).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Ys)&&(_(this,Mp)?_(this,Ys).cancel({revert:!0}):_(this,Ys).cancelRetry()),this.scheduleGc()),_(this,ma).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||de(this,lc,pu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Ys))return _(this,Ys).continueRetry(),_(this,Ys).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,Mp,!0),r.signal)})},i=()=>{const h=cee(this.options,n),p=(()=>{const g={client:_(this,Dp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,Mp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Dp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,kp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&de(this,lc,pu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;zO(h)&&h.silent||de(this,lc,pu).call(this,{type:"error",error:h}),zO(h)||((p=(f=_(this,ma).config).onError)==null||p.call(f,h,this),(w=(g=_(this,ma).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,Ys,hee({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,ma).config).onSuccess)==null||p.call(f,h,this),(w=(g=_(this,ma).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{de(this,lc,pu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{de(this,lc,pu).call(this,{type:"pause"})},onContinue:()=>{de(this,lc,pu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Ys).start()}},i0=new WeakMap,kp=new WeakMap,ma=new WeakMap,Dp=new WeakMap,Ys=new WeakMap,h_=new WeakMap,Mp=new WeakMap,lc=new WeakSet,pu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pee(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,kp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return zO(s)&&s.revert&&_(this,kp)?{..._(this,kp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Kr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,ma).notify({query:this,type:"updated",action:e})})},$W);function pee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function V4e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var il,FW,K4e=(FW=class extends vb{constructor(e={}){super();Y(this,il);this.config=e,L(this,il,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??FU(s,n);let o=this.get(i);return o||(o=new q4e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,il).has(e.queryHash)||(_(this,il).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,il).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,il).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Kr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,il).get(e)}getAll(){return[..._(this,il).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>V9(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>V9(e,r)):n}notify(e){Kr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Kr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Kr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},il=new WeakMap,FW),ol,ui,Lp,al,Hd,jW,Y4e=(jW=class extends fee{constructor(e){super();Y(this,al);Y(this,ol);Y(this,ui);Y(this,Lp);this.mutationId=e.mutationId,L(this,ui,e.mutationCache),L(this,ol,[]),this.state=e.state||gee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,ol).includes(e)||(_(this,ol).push(e),this.clearGcTimeout(),_(this,ui).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,ol,_(this,ol).filter(n=>n!==e)),this.scheduleGc(),_(this,ui).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,ol).length||(this.state.status==="pending"?this.scheduleGc():_(this,ui).remove(this))}continue(){var e;return((e=_(this,Lp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,m,b,v,A,C,T,x,N;const n=()=>{de(this,al,Hd).call(this,{type:"continue"})};L(this,Lp,hee({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,D)=>{de(this,al,Hd).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{de(this,al,Hd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,ui).canRun(this)}));const r=this.state.status==="pending",s=!_(this,Lp).canStart();try{if(r)n();else{de(this,al,Hd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,ui).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));D!==this.state.context&&de(this,al,Hd).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const S=await _(this,Lp).start();return await((u=(l=_(this,ui).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=_(this,ui).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),de(this,al,Hd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(m=_(this,ui).config).onError)==null?void 0:b.call(m,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((T=(C=_(this,ui).config).onSettled)==null?void 0:T.call(C,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{de(this,al,Hd).call(this,{type:"error",error:S})}}finally{_(this,ui).runNext(this)}}},ol=new WeakMap,ui=new WeakMap,Lp=new WeakMap,al=new WeakSet,Hd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Kr.batch(()=>{_(this,ol).forEach(r=>{r.onMutationUpdate(e)}),_(this,ui).notify({mutation:this,type:"updated",action:e})})},jW);function gee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _u,uc,f_,WW,Q4e=(WW=class extends vb{constructor(e={}){super();Y(this,_u);Y(this,uc);Y(this,f_);this.config=e,L(this,_u,new Set),L(this,uc,new Map),L(this,f_,0)}build(e,n,r){const s=new Y4e({mutationCache:this,mutationId:++Ed(this,f_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,_u).add(e);const n=zA(e);if(typeof n=="string"){const r=_(this,uc).get(n);r?r.push(e):_(this,uc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,_u).delete(e)){const n=zA(e);if(typeof n=="string"){const r=_(this,uc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,uc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zA(e);if(typeof n=="string"){const r=_(this,uc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=zA(e);if(typeof n=="string"){const s=(r=_(this,uc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kr.batch(()=>{_(this,_u).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,_u).clear(),_(this,uc).clear()})}getAll(){return Array.from(_(this,_u))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K9(n,r))}findAll(e={}){return this.getAll().filter(n=>K9(e,n))}notify(e){Kr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Kr.batch(()=>Promise.all(e.map(n=>n.continue().catch(gi))))}},_u=new WeakMap,uc=new WeakMap,f_=new WeakMap,WW);function zA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function J9(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=cee(e.options,e.fetchOptions),b=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await m(x),{maxPages:S}=e.options,D=C?F4e:$4e;return{pages:D(v.pages,N,S),pageParams:D(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?J4e:Z9,C={pages:i,pageParams:o},T=A(r,C);a=await b(C,T,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:Z9(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function Z9(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function J4e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Cr,ih,oh,o0,a0,ah,c0,l0,zW,Z4e=(zW=class{constructor(t={}){Y(this,Cr);Y(this,ih);Y(this,oh);Y(this,o0);Y(this,a0);Y(this,ah);Y(this,c0);Y(this,l0);L(this,Cr,t.queryCache||new K4e),L(this,ih,t.mutationCache||new Q4e),L(this,oh,t.defaultOptions||{}),L(this,o0,new Map),L(this,a0,new Map),L(this,ah,0)}mount(){Ed(this,ah)._++,_(this,ah)===1&&(L(this,c0,zU.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Cr).onFocus())})),L(this,l0,AI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Cr).onOnline())})))}unmount(){var t,e;Ed(this,ah)._--,_(this,ah)===0&&((t=_(this,c0))==null||t.call(this),L(this,c0,void 0),(e=_(this,l0))==null||e.call(this),L(this,l0,void 0))}isFetching(t){return _(this,Cr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,ih).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,Cr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,Cr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(af(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,Cr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,Cr).get(r.queryHash),i=s==null?void 0:s.state.data,o=U4e(e,i);if(o!==void 0)return _(this,Cr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Kr.batch(()=>_(this,Cr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,Cr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,Cr);Kr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,Cr);return Kr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Kr.batch(()=>_(this,Cr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(gi).catch(gi)}invalidateQueries(t,e={}){return Kr.batch(()=>(_(this,Cr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Kr.batch(()=>_(this,Cr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(gi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,Cr).build(this,e);return n.isStaleByTime(af(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gi).catch(gi)}fetchInfiniteQuery(t){return t.behavior=J9(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gi).catch(gi)}ensureInfiniteQueryData(t){return t.behavior=J9(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return AI.isOnline()?_(this,ih).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,Cr)}getMutationCache(){return _(this,ih)}getDefaultOptions(){return _(this,oh)}setDefaultOptions(t){L(this,oh,t)}setQueryDefaults(t,e){_(this,o0).set(zg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,o0).values()],n={};return e.forEach(r=>{ZC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,a0).set(zg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,a0).values()],n={};return e.forEach(r=>{ZC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,oh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=FU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===WU&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,oh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,Cr).clear(),_(this,ih).clear()}},Cr=new WeakMap,ih=new WeakMap,oh=new WeakMap,o0=new WeakMap,a0=new WeakMap,ah=new WeakMap,c0=new WeakMap,l0=new WeakMap,zW),Hi,Xt,p_,di,Up,u0,ch,lh,g_,d0,h0,Bp,$p,uh,f0,In,Ov,z3,H3,G3,q3,V3,K3,Y3,mee,HW,X4e=(HW=class extends vb{constructor(e,n){super();Y(this,In);Y(this,Hi);Y(this,Xt);Y(this,p_);Y(this,di);Y(this,Up);Y(this,u0);Y(this,ch);Y(this,lh);Y(this,g_);Y(this,d0);Y(this,h0);Y(this,Bp);Y(this,$p);Y(this,uh);Y(this,f0,new Set);this.options=n,L(this,Hi,e),L(this,lh,null),L(this,ch,W3()),this.options.experimental_prefetchInRender||_(this,ch).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,Xt).addObserver(this),X9(_(this,Xt),this.options)?de(this,In,Ov).call(this):this.updateResult(),de(this,In,q3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Q3(_(this,Xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Q3(_(this,Xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,de(this,In,V3).call(this),de(this,In,K3).call(this),_(this,Xt).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,Xt);if(this.options=_(this,Hi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Aa(this.options.enabled,_(this,Xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");de(this,In,Y3).call(this),_(this,Xt).setOptions(this.options),n._defaulted&&!_I(this.options,n)&&_(this,Hi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,Xt),observer:this});const s=this.hasListeners();s&&e7(_(this,Xt),r,this.options,n)&&de(this,In,Ov).call(this),this.updateResult(),s&&(_(this,Xt)!==r||Aa(this.options.enabled,_(this,Xt))!==Aa(n.enabled,_(this,Xt))||af(this.options.staleTime,_(this,Xt))!==af(n.staleTime,_(this,Xt)))&&de(this,In,z3).call(this);const i=de(this,In,H3).call(this);s&&(_(this,Xt)!==r||Aa(this.options.enabled,_(this,Xt))!==Aa(n.enabled,_(this,Xt))||i!==_(this,uh))&&de(this,In,G3).call(this,i)}getOptimisticResult(e){const n=_(this,Hi).getQueryCache().build(_(this,Hi),e),r=this.createResult(n,e);return tFe(this,r)&&(L(this,di,r),L(this,u0,this.options),L(this,Up,_(this,Xt).state)),r}getCurrentResult(){return _(this,di)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,f0).add(e)}getCurrentQuery(){return _(this,Xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,Hi).defaultQueryOptions(e),r=_(this,Hi).getQueryCache().build(_(this,Hi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return de(this,In,Ov).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,di)))}createResult(e,n){var S;const r=_(this,Xt),s=this.options,i=_(this,di),o=_(this,Up),a=_(this,u0),l=e!==r?e.state:_(this,p_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const D=this.hasListeners(),P=!D&&X9(e,n),$=D&&e7(e,r,n,s);(P||$)&&(d={...d,...pee(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,m=!0):D=typeof n.placeholderData=="function"?n.placeholderData((S=_(this,h0))==null?void 0:S.state.data,_(this,h0)):n.placeholderData,D!==void 0&&(w="success",f=j3(i==null?void 0:i.data,D,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,g_))f=_(this,d0);else try{L(this,g_,n.select),f=n.select(f),f=j3(i==null?void 0:i.data,f,n),L(this,d0,f),L(this,lh,null)}catch(D){L(this,lh,D)}_(this,lh)&&(p=_(this,lh),f=_(this,d0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",C=v&&b,T=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&T,isStale:HU(e,n),refetch:this.refetch,promise:_(this,ch),isEnabled:Aa(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=G=>{N.status==="error"?G.reject(N.error):N.data!==void 0&&G.resolve(N.data)},P=()=>{const G=L(this,ch,N.promise=W3());D(G)},$=_(this,ch);switch($.status){case"pending":e.queryHash===r.queryHash&&D($);break;case"fulfilled":(N.status==="error"||N.data!==$.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==$.reason)&&P();break}}return N}updateResult(){const e=_(this,di),n=this.createResult(_(this,Xt),this.options);if(L(this,Up,_(this,Xt).state),L(this,u0,this.options),_(this,Up).data!==void 0&&L(this,h0,_(this,Xt)),_I(n,e))return;L(this,di,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,f0).size)return!0;const o=new Set(i??_(this,f0));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,di)).some(a=>{const c=a;return _(this,di)[c]!==e[c]&&o.has(c)})};de(this,In,mee).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&de(this,In,q3).call(this)}},Hi=new WeakMap,Xt=new WeakMap,p_=new WeakMap,di=new WeakMap,Up=new WeakMap,u0=new WeakMap,ch=new WeakMap,lh=new WeakMap,g_=new WeakMap,d0=new WeakMap,h0=new WeakMap,Bp=new WeakMap,$p=new WeakMap,uh=new WeakMap,f0=new WeakMap,In=new WeakSet,Ov=function(e){de(this,In,Y3).call(this);let n=_(this,Xt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(gi)),n},z3=function(){de(this,In,V3).call(this);const e=af(this.options.staleTime,_(this,Xt));if(Wg||_(this,di).isStale||!$3(e))return;const r=aee(_(this,di).dataUpdatedAt,e)+1;L(this,Bp,setTimeout(()=>{_(this,di).isStale||this.updateResult()},r))},H3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,Xt)):this.options.refetchInterval)??!1},G3=function(e){de(this,In,K3).call(this),L(this,uh,e),!(Wg||Aa(this.options.enabled,_(this,Xt))===!1||!$3(_(this,uh))||_(this,uh)===0)&&L(this,$p,setInterval(()=>{(this.options.refetchIntervalInBackground||zU.isFocused())&&de(this,In,Ov).call(this)},_(this,uh)))},q3=function(){de(this,In,z3).call(this),de(this,In,G3).call(this,de(this,In,H3).call(this))},V3=function(){_(this,Bp)&&(clearTimeout(_(this,Bp)),L(this,Bp,void 0))},K3=function(){_(this,$p)&&(clearInterval(_(this,$p)),L(this,$p,void 0))},Y3=function(){const e=_(this,Hi).getQueryCache().build(_(this,Hi),this.options);if(e===_(this,Xt))return;const n=_(this,Xt);L(this,Xt,e),L(this,p_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},mee=function(e){Kr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,di))}),_(this,Hi).getQueryCache().notify({query:_(this,Xt),type:"observerResultsUpdated"})})},HW);function eFe(t,e){return Aa(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function X9(t,e){return eFe(t,e)||t.state.data!==void 0&&Q3(t,e,e.refetchOnMount)}function Q3(t,e,n){if(Aa(e.enabled,t)!==!1&&af(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&HU(t,e)}return!1}function e7(t,e,n,r){return(t!==e||Aa(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&HU(t,n)}function HU(t,e){return Aa(e.enabled,t)!==!1&&t.isStaleByTime(af(e.staleTime,t))}function tFe(t,e){return!_I(t.getCurrentResult(),e)}var dh,hh,Gi,Au,ed,BS,J3,GW,nFe=(GW=class extends vb{constructor(n,r){super();Y(this,ed);Y(this,dh);Y(this,hh);Y(this,Gi);Y(this,Au);L(this,dh,n),this.setOptions(r),this.bindMethods(),de(this,ed,BS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,dh).defaultMutationOptions(n),_I(this.options,r)||_(this,dh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Gi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&zg(r.mutationKey)!==zg(this.options.mutationKey)?this.reset():((s=_(this,Gi))==null?void 0:s.state.status)==="pending"&&_(this,Gi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Gi))==null||n.removeObserver(this)}onMutationUpdate(n){de(this,ed,BS).call(this),de(this,ed,J3).call(this,n)}getCurrentResult(){return _(this,hh)}reset(){var n;(n=_(this,Gi))==null||n.removeObserver(this),L(this,Gi,void 0),de(this,ed,BS).call(this),de(this,ed,J3).call(this)}mutate(n,r){var s;return L(this,Au,r),(s=_(this,Gi))==null||s.removeObserver(this),L(this,Gi,_(this,dh).getMutationCache().build(_(this,dh),this.options)),_(this,Gi).addObserver(this),_(this,Gi).execute(n)}},dh=new WeakMap,hh=new WeakMap,Gi=new WeakMap,Au=new WeakMap,ed=new WeakSet,BS=function(){var r;const n=((r=_(this,Gi))==null?void 0:r.state)??gee();L(this,hh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},J3=function(n){Kr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,Au)&&this.hasListeners()){const d=_(this,hh).variables,h=_(this,hh).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,Au)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,Au)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,Au)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,Au)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,hh))})})},GW);function rFe(t,e){return jU(t,e)}function sFe(t){return JSON.stringify(t,(e,n)=>iFe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function iFe(t){if(!t7(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!t7(n)||!n.hasOwnProperty("isPrototypeOf"))}function t7(t){return Object.prototype.toString.call(t)==="[object Object]"}function v1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:m,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:T,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:D,refetchOnWindowFocus:P,retryOnMount:$,select:G,staleTime:W,suspense:I,throwOnError:R,config:B,connector:O,query:M,...j}=t;return j}function oFe(t){return{mutationFn(e){return LS(t,e)},mutationKey:["connect"]}}function aFe(t){return{mutationFn(e){return k3(t,e)},mutationKey:["disconnect"]}}function cFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await KX(t,{...i,address:r})??null},queryKey:lFe(e)}}function lFe(t={}){return["balance",v1(t)]}function uFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return V8e(t,{...i,address:r})},queryKey:dFe(e)}}function dFe(t={}){return["ensName",v1(t)]}function hFe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return K8e(t,{...o,connector:r})},queryKey:fFe(e)}}function fFe(t={}){const{connector:e,...n}=t;return["walletClient",{...v1(n),connectorUid:e==null?void 0:e.uid}]}function pFe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return VX(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:gFe(e)}}function gFe(t={}){const{abi:e,...n}=t;return["readContract",v1(n)]}function mFe(t){return{mutationFn(e){return L3(t,e)},mutationKey:["switchChain"]}}function yFe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return ZX(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:wFe(e)}}function wFe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",v1(n)]}function bFe(t){return{mutationFn(e){return XX(t,e)},mutationKey:["writeContract"]}}var yee=k.createContext(void 0),GU=t=>{const e=k.useContext(yee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},vFe=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx(yee.Provider,{value:t,children:e})),wee=k.createContext(!1),EFe=()=>k.useContext(wee);wee.Provider;function CFe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var _Fe=k.createContext(CFe()),AFe=()=>k.useContext(_Fe),SFe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},xFe=t=>{k.useEffect(()=>{t.clearReset()},[t])},IFe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||lee(n,[t.error,r])),NFe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},TFe=(t,e)=>t.isLoading&&t.isFetching&&!e,RFe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,n7=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function PFe(t,e,n){var d,h,f,p,g;const r=EFe(),s=AFe(),i=GU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",NFe(o),SFe(o,s),xFe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(w=>{const m=u?c.subscribe(Kr.batchCalls(w)):gi;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),RFe(o,l))throw n7(o,c,s);if(IFe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Wg&&TFe(l,r)){const w=a?n7(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(gi).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function OFe(t,e){return PFe(t,X4e)}function LT(t,e){const n=GU(),[r]=k.useState(()=>new nFe(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const s=k.useSyncExternalStore(k.useCallback(o=>r.subscribe(Kr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=k.useCallback((o,a)=>{r.mutate(o,a).catch(gi)},[r]);if(s.error&&lee(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function E1(t){const e=OFe({...t,queryKeyHashFn:sFe});return e.queryKey=t.queryKey,e}function wd(t={}){const e=Ri(t);return k.useSyncExternalStore(n=>X8e(e,{onChange:n}),()=>j9(e),()=>j9(e))}function kFe(t={}){const{address:e,query:n={}}=t,r=Ri(t),s=wd({config:r}),i=cFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return E1({...n,...i,enabled:o})}function DFe(t={}){const e=Ri(t);return k.useSyncExternalStore(n=>I4e(e,{onChange:n}),()=>W9(e),()=>W9(e))}function MFe(t={}){const e=Ri(t);return k.useSyncExternalStore(n=>JX(e,{onChange:n}),()=>z9(e),()=>z9(e))}function LFe(t={}){const{mutation:e}=t,n=Ri(t),r=oFe(n),{mutate:s,mutateAsync:i,...o}=LT({...e,...r});return k.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:MFe({config:n})}}function UFe(t={}){const e=Ri(t);return k.useSyncExternalStore(n=>QX(e,{onChange:n}),()=>ac(e),()=>ac(e))}function BFe(t={}){const{mutation:e}=t,n=Ri(t),r=aFe(n),{mutate:s,mutateAsync:i,...o}=LT({...e,...r});return{...o,connectors:UFe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function $Fe(t={}){const{address:e,query:n={}}=t,r=Ri(t),s=wd({config:r}),i=uFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return E1({...n,...i,enabled:o})}function FFe(t={}){const e=Ri(t);return oee.useSyncExternalStoreWithSelector(n=>t4e(e,{onChange:n}),()=>D3(e,t),()=>D3(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function SI(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Ri(t),a=wd({config:o}),c=pFe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return E1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??rFe})}function jFe(t={}){const{mutation:e}=t,n=Ri(t),r=mFe(n),{mutate:s,mutateAsync:i,...o}=LT({...e,...r});return{...o,chains:DFe({config:n}),switchChain:s,switchChainAsync:i}}function WFe(t={}){const{query:e={},...n}=t,r=Ri(n),s=GU(),{address:i,connector:o,status:a}=b1({config:r}),c=wd({config:r}),l=t.connector??o,{queryKey:u,...d}=hFe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=k.useRef(i);return k.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),E1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function kv(t={}){const{hash:e,query:n={}}=t,r=Ri(t),s=wd({config:r}),i=yFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return E1({...n,...i,enabled:o})}function Dv(t={}){const{mutation:e}=t,n=Ri(t),r=bFe(n),{mutate:s,mutateAsync:i,...o}=LT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const zFe=Fc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),r7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],HFe=({onBack:t,walletAddress:e})=>{const n=zFe(),{open:r}=y1(),[s,i]=k.useState([]),[o,a]=k.useState(!0),[c,l]=k.useState(null),[u,d]=k.useState(r7[0]),[h,f]=k.useState(!1),[p,g]=k.useState(null),[w,m]=k.useState("all"),[b,v]=k.useState(null),A=k.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const D=await window.solana.connect();g(D.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const D=await window.solflare.connect();g(D.publicKey.toString());return}r()}catch(D){console.error("Failed to connect Solana wallet:",D),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);k.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{(async()=>{a(!0);try{let S,D=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}D=p,S=await Gme(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await xL(u.slug,100,D):S=await SL(u.slug,1,100,D);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some($=>$.owners&&$.owners.length>0)?S.data=S.data.filter($=>$.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),k.useEffect(()=>{h&&A()},[h,A]);const C=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await qV(u.chain,N.address,N.token_id.toString()),D={...N,attributes:JSON.stringify(S.traits||[])};l(D)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},T=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return y.jsxs("div",{className:n.detailView,children:[y.jsx("img",{src:c.image,alt:c.name}),y.jsx("h2",{children:c.name}),y.jsx("h4",{children:"Traits:"}),y.jsx("ul",{children:N.map((S,D)=>y.jsxs("li",{children:[y.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},D))})]})},x=()=>y.jsxs(y.Fragment,{children:[y.jsx("div",{className:n.collectionSelector,children:r7.map(N=>y.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),y.jsxs("div",{className:n.content,children:[y.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[y.jsx("button",{onClick:()=>m("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),y.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&y.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&y.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?y.jsx("div",{className:n.loading,children:"Loading NFTs..."}):y.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return y.jsxs("div",{className:n.gridItem,onClick:()=>void C(N),children:[y.jsx("img",{src:S,alt:N.name,onError:D=>{D.currentTarget.src!==N.image_url&&N.image_url?D.currentTarget.src=N.image_url:D.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?D.currentTarget.src=N.image_url_shrunk:D.currentTarget.src="/assets/pixelawb.png"}}),y.jsx("span",{children:N.name})]},N.id)})})]})]});return y.jsxs("div",{className:n.galleryContainer,children:[y.jsxs("header",{className:n.header,children:[y.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),y.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),y.jsx("div",{className:n.content,children:o?y.jsx("p",{className:n.loading,children:"Loading..."}):c?T():x()})]})},GFe=Fc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),sc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=GFe();return t?y.jsx("div",{className:s.overlay,children:y.jsxs("div",{className:s.popup,children:[y.jsxs("div",{className:s.titleBar,children:[y.jsx("span",{children:n}),y.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),y.jsx("div",{className:s.content,children:r})]})}):null},qFe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=k.useState([]),[i,o]=k.useState(!1),[a,c]=k.useState(!1),[l,u]=k.useState({}),[d,h]=k.useState(null),{data:f}=WFe();k.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await HV(n);s(A);const C={};A.forEach(T=>{C[T.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(T=>({...T,[A]:Math.max(0,C)}))},w=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,T])=>({id:C,quantity:T}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await GV(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const T=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){h("Transaction failed: "+T.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return y.jsxs(sc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&y.jsx("div",{style:v,children:d}),i?y.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?y.jsx("div",{children:"No eligible invite lists found for your wallet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>y.jsxs("div",{style:b,children:[y.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),y.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),y.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),y.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},VFe=Fc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),KFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],YFe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],QFe=()=>{const t=VFe(),{open:e}=y1(),{address:n,isConnected:r}=b1(),{isPending:s}=LFe(),{disconnect:i}=BFe(),{data:o}=$Fe({address:n}),[a,c]=k.useState("main"),[l,u]=k.useState(!1),[d,h]=k.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[m,b]=k.useState(!1),[v,A]=k.useState(!1),[C,T]=k.useState(!1),[x,N]=k.useState(!1),[S,D]=k.useState(!1),[P,$]=k.useState(!1),[G,W]=k.useState(!1),[I,R]=k.useState(!1),[B,O]=k.useState(!1),[M,j]=k.useState(!1),V=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>T(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],se=te=>{te.disabled||te.action()};if(k.useEffect(()=>{const te=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(te)},[]),k.useEffect(()=>{u(!0)},[]),a==="gallery")return y.jsx(HFe,{onBack:()=>c("main"),walletAddress:n||void 0});function ie({open:te,onClose:pe,title:Ze,nfts:Xe}){const We=mt=>{switch(mt){case"lawbsters":N(!0);break;case"lawbstarz":D(!0);break;case"pixelawbs":$(!0);break;case"halloween":W(!0);break;case"lawbstation":R(!0);break;case"nexus":O(!0);break}};return y.jsx(sc,{isOpen:te,onClose:pe,title:Ze,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Xe.map(mt=>y.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>We(mt.id),children:[y.jsx("img",{src:mt.image,alt:mt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),y.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:mt.name}),y.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:mt.description})]},mt.id))})})}function Q({open:te,onClose:pe}){return te?y.jsxs(sc,{isOpen:te,onClose:pe,title:"$LAWB",children:[y.jsx("h1",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),y.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",y.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),y.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",y.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),y.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),y.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),y.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:y.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return y.jsxs("div",{className:t.mobileContainer,children:[y.jsx("header",{className:t.header,children:y.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),y.jsx("div",{className:t.iconGrid,children:V.map(te=>y.jsxs("div",{className:t.icon,onClick:()=>se(te),children:[y.jsx("img",{src:te.icon,alt:te.label}),y.jsx("span",{children:te.label})]},te.label))}),l&&y.jsxs(sc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&y.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:y.jsxs("div",{className:t.menuModal,onClick:te=>te.stopPropagation(),children:[y.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),y.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),y.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),y.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),y.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),y.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),y.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),y.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),y.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),y.jsx(qFe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),y.jsx(ie,{open:m,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:KFe}),y.jsx(ie,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:YFe}),y.jsx(Q,{open:C,onClose:()=>T(!1)}),y.jsxs(sc,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),y.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(sc,{isOpen:S,onClose:()=>D(!1),title:"Lawbstarz",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",y.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",y.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",y.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(sc,{isOpen:P,onClose:()=>$(!1),title:"Pixelawbs",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{$(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),y.jsxs(sc,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[y.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),y.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),y.jsxs(sc,{isOpen:I,onClose:()=>R(!1),title:"Lawbstation",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",y.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),y.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(sc,{isOpen:B,onClose:()=>O(!1),title:"Nexus",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",y.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),y.jsx(sc,{isOpen:M,onClose:()=>j(!1),title:"Meme Generator",children:y.jsx(PX,{})}),y.jsxs("div",{className:t.taskbar,children:[y.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),y.jsxs("div",{className:t.walletStatus,children:[y.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),y.jsx("span",{className:t.clock,children:d})]})]})};function JFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=k.useState(e(t));function s(){r(e(t))}return k.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const xI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},II={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},ZFe=nee({chains:[bI,wI,xI,II],transports:{[bI.id]:Ta(),[wI.id]:Ta(),[xI.id]:Ta("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[II.id]:Ta("https://mainnet.sanko.xyz")}}),XFe=Symbol(),s7=Object.getPrototypeOf,Z3=new WeakMap,eje=t=>t&&(Z3.has(t)?Z3.get(t):s7(t)===Object.prototype||s7(t)===Array.prototype),tje=t=>eje(t)&&t[XFe]||null,i7=(t,e=!0)=>{Z3.set(t,e)},NI={},qU=t=>typeof t=="object"&&t!==null,nje=t=>qU(t)&&!C1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),bee=(t,e)=>{const n=X3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return i7(r,!0),X3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(C1.has(i))i7(i,!1);else if(Ef.has(i)){const[c,l]=Ef.get(i);a.value=bee(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},rje=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(o7(l,o)||XC.has(o)&&o7(l,XC.get(o))))return!0;n(i),qU(o)&&(o=tje(o)||o);const u=!Ef.has(o)&&ije(o)?ar(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Ef=new WeakMap,C1=new WeakSet,X3=new WeakMap,Mv=[1,1],XC=new WeakMap;let o7=Object.is,sje=(t,e)=>new Proxy(t,e),ije=nje,oje=bee,aje=rje;function ar(t={}){if(!qU(t))throw new Error("object required");const e=XC.get(t);if(e)return e;let n=Mv[0];const r=new Set,s=(w,m=++Mv[0])=>{n!==m&&(n=m,r.forEach(b=>b(w,m)))};let i=Mv[1];const o=(w=++Mv[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([m])=>{const b=m[1](w);b>n&&(n=b)})),n),a=w=>(m,b)=>{const v=[...m];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,m)=>{const b=!C1.has(m)&&Ef.get(m);if(b){if((NI?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var m;const b=c.get(w);b&&(c.delete(w),(m=b[1])==null||m.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((NI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=b[2](a(A));c.set(A,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=aje(()=>h,l,u,s),p=sje(t,f);XC.set(t,p);const g=[t,o,d];return Ef.set(p,g),Reflect.ownKeys(t).forEach(w=>{const m=Object.getOwnPropertyDescriptor(t,w);"value"in m&&m.writable&&(p[w]=t[w])}),h=!1,p}function po(t,e,n){const r=Ef.get(t);(NI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function e_(t){const e=Ef.get(t);(NI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return oje(n,r())}function Dw(t){return C1.add(t),t}function cje(){return{proxyStateMap:Ef,refSet:C1,snapCache:X3,versionHolder:Mv,proxyCache:XC}}function Pi(t,e,n,r){let s=t[e];return po(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:lje,snapCache:uje}=cje(),HA=t=>lje.has(t);function dje(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=uje.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return HA(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!HA(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!HA(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!HA(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ar(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var a7={};const fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof a7<"u"?a7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},TI={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},hje={bigNumber(t){return t?new Sl(t):new Sl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Sl(0);const n=new Sl(t),r=new Sl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},fje=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],pje=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],gje=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],mje={getERC20Abi:t=>fe.USDT_CONTRACT_ADDRESSES.includes(t)?gje:fje,getSwapAbi:()=>pje},Lh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},It={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function HO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Et={setItem(t,e){Lv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Lv())return localStorage.getItem(t)||void 0},removeItem(t){Lv()&&localStorage.removeItem(t)},clear(){Lv()&&localStorage.clear()}};function Lv(){return typeof window<"u"&&typeof localStorage<"u"}function RI(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const vi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[fe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Je.getActiveNamespace(),e=Je.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Et.setItem(It.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Et.getItem(It.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Et.removeItem(It.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Et.setItem(It.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Et.setItem(It.ACTIVE_CAIP_NETWORK_ID,t),Je.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Et.getItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Et.removeItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=HO(t);Et.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Je.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Et.setItem(It.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Et.getItem(It.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=HO(t);Et.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Et.getItem(It.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=HO(t);return Et.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Et.setItem(It.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Et.getItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Et.removeItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Et.getItem(It.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Et.getItem(It.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Et.setItem(It.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Et.getItem(It.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Et.getItem(It.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Et.setItem(It.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Je.getConnectedNamespaces();e.includes(t)||(e.push(t),Je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Je.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Et.getItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Et.setItem(It.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Et.removeItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Et.getItem(It.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Je.getBalanceCache();Et.setItem(It.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Je.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Je.getBalanceCache();e[t.caipAddress]=t,Et.setItem(It.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Et.getItem(It.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Je.getBalanceCache();Et.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Je.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Je.getNativeBalanceCache();e[t.caipAddress]=t,Et.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Et.getItem(It.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Je.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Je.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Je.getEnsCache();e[t.address]=t,Et.setItem(It.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Je.getEnsCache();Et.setItem(It.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Et.getItem(It.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Je.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Je.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Je.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Et.setItem(It.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Je.getIdentityCache();Et.setItem(It.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Et.removeItem(It.PORTFOLIO_CACHE),Et.removeItem(It.NATIVE_BALANCE_CACHE),Et.removeItem(It.ENS_CACHE),Et.removeItem(It.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Et.setItem(It.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Et.getItem(It.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Je.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===fe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Et.setItem(It.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Et.getItem(It.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Je.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Et.setItem(It.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Et.getItem(It.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Je.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Et.setItem(It.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Je.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Et.setItem(It.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Je.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},dt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return dt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=vi.TEN_SEC_MS:!0},isAllowedRetry(t,e=vi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(dt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+vi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(dt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!dt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Je.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,dt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return fe.W3M_API_URL},getBlockchainApiUrl(){return fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?vi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in fe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function pv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class _1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await pv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const yje={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?vi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(dt.isTelegram()){if(dt.isIos())return t.filter(e=>e!=="google");if(dt.isMac())return t.filter(e=>e!=="x");if(dt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},gt=ar({features:vi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:vi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Rt={state:gt,subscribeKey(t,e){return Pi(gt,t,e)},setOptions(t){Object.assign(gt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...gt.remoteFeatures,...t};gt.remoteFeatures=e,(n=gt.remoteFeatures)!=null&&n.socials&&(gt.remoteFeatures.socials=yje.filterSocialsByPlatform(gt.remoteFeatures.socials))},setFeatures(t){if(!t)return;gt.features||(gt.features=vi.DEFAULT_FEATURES);const e={...gt.features,...t};gt.features=e},setProjectId(t){gt.projectId=t},setCustomRpcUrls(t){gt.customRpcUrls=t},setAllWallets(t){gt.allWallets=t},setIncludeWalletIds(t){gt.includeWalletIds=t},setExcludeWalletIds(t){gt.excludeWalletIds=t},setFeaturedWalletIds(t){gt.featuredWalletIds=t},setTokens(t){gt.tokens=t},setTermsConditionsUrl(t){gt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){gt.privacyPolicyUrl=t},setCustomWallets(t){gt.customWallets=t},setIsSiweEnabled(t){gt.isSiweEnabled=t},setIsUniversalProvider(t){gt.isUniversalProvider=t},setSdkVersion(t){gt.sdkVersion=t},setMetadata(t){gt.metadata=t},setDisableAppend(t){gt.disableAppend=t},setEIP6963Enabled(t){gt.enableEIP6963=t},setDebug(t){gt.debug=t},setEnableWalletConnect(t){gt.enableWalletConnect=t},setEnableWalletGuide(t){gt.enableWalletGuide=t},setEnableAuthLogger(t){gt.enableAuthLogger=t},setEnableWallets(t){gt.enableWallets=t},setPreferUniversalLinks(t){gt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(vi.SIWX_DEFAULTS))t[e]??(t[e]=n);gt.siwx=t},setConnectMethodsOrder(t){gt.features={...gt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){gt.features={...gt.features,walletFeaturesOrder:t}},setSocialsOrder(t){gt.remoteFeatures={...gt.remoteFeatures,socials:t}},setCollapseWallets(t){gt.features={...gt.features,collapseWallets:t}},setEnableEmbedded(t){gt.enableEmbedded=t},setAllowUnsupportedChain(t){gt.allowUnsupportedChain=t},setManualWCControl(t){gt.manualWCControl=t},setEnableNetworkSwitch(t){gt.enableNetworkSwitch=t},setEnableReconnect(t){gt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(gt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){gt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return gt.universalProviderConfigOverride},getSnapshot(){return e_(gt)}},wje=Object.freeze({enabled:!0,events:[]}),bje=new _1({baseUrl:dt.getAnalyticsUrl(),clientId:null}),vje=5,Eje=60*1e3,Md=ar({...wje}),Cje={state:Md,subscribeKey(t,e){return Pi(Md,t,e)},async sendError(t,e){if(!Md.enabled)return;const n=Date.now();if(Md.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Eje}).length>=vje)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Md.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Rt.state;await bje.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Md.enabled=!0},disable(){Md.enabled=!1},clearEvents(){Md.events=[]}};class Mw extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Mw.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Mw):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function c7(t,e){const n=t instanceof Mw?t:new Mw(t instanceof Error?t.message:String(t),e,t);throw Cje.sendError(n,n.category),n}function Ha(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return c7(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return c7(a,e)}},n[r]=i}else n[r]=s}),n}var Lw={};const _je="https://secure.walletconnect.org/sdk",Aje=(typeof process<"u"&&typeof Lw<"u"?Lw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||_je,Sje=(typeof process<"u"&&typeof Lw<"u"?Lw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",xje=(typeof process<"u"&&typeof Lw<"u"?Lw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ke={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Us={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},El={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Ije={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===El.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${El.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===El.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${El.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===fe.CHAIN.SOLANA&&t===El.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${El.COINBASE.url}/dapp?cb_url=${r}`)}},Ao=ar({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Nje={state:Ao,subscribeNetworkImages(t){return po(Ao.networkImages,()=>t(Ao.networkImages))},subscribeKey(t,e){return Pi(Ao,t,e)},subscribe(t){return po(Ao,()=>t(Ao))},setWalletImage(t,e){Ao.walletImages[t]=e},setNetworkImage(t,e){Ao.networkImages[t]=e},setChainImage(t,e){Ao.chainImages[t]=e},setConnectorImage(t,e){Ao.connectorImages={...Ao.connectorImages,[t]:e}},setTokenImage(t,e){Ao.tokenImages[t]=e},setCurrencyImage(t,e){Ao.currencyImages[t]=e}},bc=Ha(Nje),Tje={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},GO=ar({networkImagePromises:{}}),Rje={async fetchWalletImage(t){if(t)return await Ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(GO.networkImagePromises[t]||(GO.networkImagePromises[t]=Ct._fetchNetworkImage(t)),await GO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return bc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return bc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return bc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return bc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return bc.state.connectorImages[t.imageId]},getChainImage(t){return bc.state.networkImages[Tje[t]]}},Ld=ar({message:"",variant:"info",open:!1}),Pje={state:Ld,subscribeKey(t,e){return Pi(Ld,t,e)},open(t,e){const{debug:n}=Rt.state,{shortMessage:r,longMessage:s}=t;n&&(Ld.message=r,Ld.variant=e,Ld.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ld.open=!1,Ld.message="",Ld.variant="info"}},ep=Ha(Pje),Oje=dt.getAnalyticsUrl(),kje=new _1({baseUrl:Oje,clientId:null}),Dje=["MODAL_CREATED"],uu=ar({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),gr={state:uu,subscribe(t){return po(uu,()=>t(uu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Rt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=En.state.address;if(Dje.includes(t.data.event)||typeof window>"u")return;await kje.post({path:"/e",params:gr.getSdkProperties(),body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),uu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===fe.HTTP_STATUS_CODES.FORBIDDEN&&!uu.reportedErrors.FORBIDDEN&&(ep.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Lv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),uu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;uu.timestamp=Date.now(),uu.data=t,(e=Rt.state.features)!=null&&e.analytics&&gr._sendAnalyticsEvent(uu)}},Mje=dt.getApiUrl(),$i=new _1({baseUrl:Mje,clientId:null}),Lje=40,l7=4,Uje=20,Mt=ar({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ct={state:Mt,subscribeKey(t,e){return Pi(Mt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Rt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Rt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${$i.baseUrl}/getWalletImage/${t}`,n=await $i.getBlob({path:e,params:Ct._getSdkProperties()});bc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${$i.baseUrl}/public/getAssetImage/${t}`,n=await $i.getBlob({path:e,params:Ct._getSdkProperties()});bc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${$i.baseUrl}/public/getAssetImage/${t}`,n=await $i.getBlob({path:e,params:Ct._getSdkProperties()});bc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${$i.baseUrl}/public/getCurrencyImage/${t}`,n=await $i.getBlob({path:e,params:Ct._getSdkProperties()});bc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${$i.baseUrl}/public/getTokenImage/${t}`,n=await $i.getBlob({path:e,params:Ct._getSdkProperties()});bc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return dt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===El.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===El.SOLFLARE.id||n.id===El.PHANTOM.id)):t},async fetchProjectConfig(){return(await $i.get({path:"/appkit/v1/config",params:Ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await $i.get({path:"/projects/v1/origins",params:Ct._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===fe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=fe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Rje.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=st.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(El).map(o=>o.id));const r=await $i.get({path:"/getWallets",params:{...Ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Rt.state;if(t!=null&&t.length){const e={...Ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??l7,include:t},{data:n}=await Ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ct._fetchWalletImage(i))),Mt.featured=r,Mt.allFeatured=r}},async fetchRecommendedWallets(){try{Mt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Rt.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:l7,include:t,exclude:r,chains:s},{data:o,count:a}=await Ct.fetchWallets(i),c=Je.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Ct._fetchWalletImage(d))),Mt.recommended=o,Mt.allRecommended=o,Mt.count=a??0}catch{}finally{Mt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Rt.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...Mt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Lje,include:e,exclude:i,chains:s},{data:a,count:c}=await Ct.fetchWallets(o),l=a.slice(0,Uje).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Ct._fetchWalletImage(u))),Mt.wallets=dt.uniqueBy([...Mt.wallets,...Ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Mt.count=c>Mt.count?c:Mt.count,Mt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ct.fetchWallets(e);n&&n.forEach(r=>{Mt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Rt.state,s=J.getRequestedCaipNetworkIds().join(",");Mt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Ct.fetchWallets(i);gr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ct._fetchWalletImage(c)),dt.wait(300)]),Mt.search=Ct._filterOutExtensions(o)},initPromise(t,e){const n=Mt.promises[t];return n||(Mt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ct.initPromise("connectorImages",Ct.fetchConnectorImages),e&&Ct.initPromise("featuredWallets",Ct.fetchFeaturedWallets),n&&Ct.initPromise("recommendedWallets",Ct.fetchRecommendedWallets),r&&Ct.initPromise("networkImages",Ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Rt.state.features)!=null&&t.analytics&&Ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await $i.get({path:"/getAnalyticsConfig",params:Ct._getSdkProperties()});Rt.setFeatures({analytics:t})}catch{Rt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Mt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=ar({view:"Connect",history:["Connect"],transactionStack:[]}),Bje={state:Ln,subscribeKey(t,e){return Pi(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Tt.goBack();break;case"cancel":s==null||s(),Tt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Tt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else Zn.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){En.setFarcasterUrl(void 0,J.state.activeChain);const a=st.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=e_(Rt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){Tt.state.history.length>1?Tt.goBack():Zn.close()}},Tt=Ha(Bje),du=ar({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),e5={state:du,subscribe(t){return po(du,()=>t(du))},setThemeMode(t){du.themeMode=t;try{const e=st.getAuthConnector();if(e){const n=e5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:RI(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){du.themeVariables={...du.themeVariables,...t};try{const e=st.getAuthConnector();if(e){const n=e5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:RI(du.themeVariables,du.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return e_(du)}},GA=Ha(e5),vee={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},pn=ar({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...vee},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),$je={state:pn,subscribe(t){return po(pn,()=>{t(pn)})},subscribeKey(t,e){return Pi(pn,t,e)},initialize(t){t.forEach(e=>{const n=Je.getConnectedConnectorId(e);n&&st.setConnectorId(n,e)})},setActiveConnector(t){t&&(pn.activeConnector=Dw(t))},setConnectors(t){t.filter(s=>!pn.allConnectors.some(i=>i.id===s.id&&st.getConnectorName(i.name)===st.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&pn.allConnectors.push(Dw(s))});const n=st.getEnabledNamespaces(),r=st.getEnabledConnectors(n);pn.connectors=st.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(pn.filterByNamespaceMap).forEach(e=>{pn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{pn.filterByNamespaceMap[e]=!0}),st.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){pn.filterByNamespaceMap[t]=e,st.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=st.getEnabledNamespaces(),e=st.getEnabledConnectors(t),n=st.areAllNamespacesEnabled();pn.connectors=st.mergeMultiChainConnectors(e),n?Ct.clearFilterByNamespaces():Ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(pn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return pn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(pn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=st.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=st.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===fe.CONNECTOR_ID.AUTH){const s=t,i=e_(Rt.state),o=GA.getSnapshot().themeMode,a=GA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:RI(a,o)}),st.setConnectors([t])}else st.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=pn.connectors.find(s=>s.id===fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return pn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return pn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return pn.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=e_(Rt.state),r=GA.getSnapshot().themeMode,s=GA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:RI(s,r)})},getConnectorsByNamespace(t){const e=pn.allConnectors.filter(n=>n.chain===t);return st.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&Vl(t)===Us.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=st.getConnector(t.id,t.rdns);Ije.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,J.state.activeChain),e?Tt.push("ConnectingExternal",{connector:e}):Tt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?st.getConnectorsByNamespace(t):st.mergeMultiChainConnectors(pn.allConnectors)},setFilterByNamespace(t){pn.filterByNamespace=t,pn.connectors=st.getConnectors(t),Ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(pn.activeConnectorIds={...pn.activeConnectorIds,[e]:t},Je.setConnectedConnectorId(e,t))},removeConnectorId(t){pn.activeConnectorIds={...pn.activeConnectorIds,[t]:void 0},Je.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return pn.activeConnectorIds[t]},isConnected(t){return t?!!pn.activeConnectorIds[t]:Object.values(pn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){pn.activeConnectorIds={...vee}}},st=Ha($je),Fje=1e3,gv={checkNamespaceConnectorId(t,e){return st.getConnectorId(t)===e},isSocialProvider(t){return vi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&st.setActiveConnector(e),s==null||s(dt.isMobile()&&t),r){const l=Zn.subscribeKey("open",u=>{u||(Tt.state.view!==r&&Tt.replace(r),l(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Zn.close(),c(),o(Lh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=J.subscribeKey("activeCaipAddress",s=>{s&&(Zn.close(),r(),e(Lh.parseCaipAddress(s)))});rt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=En.state.socialWindow,i=En.state.socialProvider,o=!1,a=null;const c=J.subscribeKey("activeCaipAddress",l=>{l&&(e&&Zn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===fe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=st.getAuthConnector();if(g&&!o){s&&(s.close(),En.setSocialWindow(void 0,J.state.activeChain),s=En.state.socialWindow),o=!0;const w=f.data.resultUri;i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=J.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:m==null?void 0:m.caipNetworkId}),i){Je.setConnectedSocialProvider(i),await rt.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=J.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Lh.parseCaipAddress(b)),gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(En.setSocialProvider(t,J.state.activeChain),i=En.state.socialProvider,gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Zn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=st.getAuthConnector();if(p&&!En.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();En.setFarcasterUrl(g,J.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=st.getAuthConnector();a=dt.returnOpenHref(`${fe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){En.setSocialWindow(a,J.state.activeChain),s=En.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Zn.subscribeKey("open",c=>{c||(Tt.state.view!==e&&Tt.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Zn.close(),o(),s(Lh.parseCaipAddress(a)))})})},async updateEmail(){const t=Je.getConnectedConnectorId(J.state.activeChain),e=st.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==fe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Tt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Zn.close(),clearInterval(i),o(),r({email:a}))},Fje),o=Zn.subscribeKey("open",a=>{a||(Tt.state.view!=="Connect"&&Tt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&Vl(t)===Us.ACCOUNT_TYPES.EOA}};function Eee(){var r,s;const t=((r=J.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=J.state.activeCaipNetwork)==null?void 0:s.id)||1,n=vi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Vl(t){var n;return(n=J.getAccountData(t))==null?void 0:n.preferredAccountType}const Cee={getConnectionStatus(t,e){const n=st.state.activeConnectorIds[e],r=rt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Rt.state.remoteFeatures)!=null&&a.multiWallet),n=st.state.activeConnectorIds[t],r=rt.getConnections(t),i=(rt.state.recentConnections.get(t)??[]).filter(c=>st.getConnectorById(c.connectorId)),o=Cee.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},tp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),zr=ar({...tp}),jje={state:zr,subscribeKey(t,e){return Pi(zr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=dt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){zr.message=tp.message,zr.variant=tp.variant,zr.svg=tp.svg,zr.open=tp.open,zr.autoClose=tp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=tp.autoClose}){zr.open?(zr.open=!1,setTimeout(()=>{zr.message=t,zr.variant=n,zr.svg=e,zr.open=!0,zr.autoClose=r},150)):(zr.message=t,zr.variant=n,zr.svg=e,zr.open=!0,zr.autoClose=r)}},Uh=jje,Yn=ar({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Wje={state:Yn,subscribe(t){return po(Yn,()=>t(Yn))},setLastNetworkInView(t){Yn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Yn.loading=!0;try{const r=await xt.fetchTransactions({account:t,cursor:Yn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Uv.filterSpamTransactions(r.data),i=Uv.filterByConnectedChain(s),o=[...Yn.transactions,...i];Yn.loading=!1,e==="coinbase"?Yn.coinbaseTransactions=Uv.groupTransactionsByYearAndMonth(Yn.coinbaseTransactions,r.data):(Yn.transactions=o,Yn.transactionsByYear=Uv.groupTransactionsByYearAndMonth(Yn.transactionsByYear,i)),Yn.empty=o.length===0,Yn.next=r.next?r.next:void 0}catch{const s=J.state.activeChain;gr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Rt.state.projectId,cursor:Yn.next,isSmartAccount:Vl(s)===Us.ACCOUNT_TYPES.SMART_ACCOUNT}}),Uh.showError("Failed to fetch transactions"),Yn.loading=!1,Yn.empty=!0,Yn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Yn.next=void 0},resetTransactions(){Yn.transactions=[],Yn.transactionsByYear={},Yn.lastNetworkInView=void 0,Yn.loading=!1,Yn.empty=!1,Yn.next=void 0}},Uv=Ha(Wje,"API_ERROR"),nn=ar({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Gf;const zje={state:nn,subscribe(t){return po(nn,()=>t(nn))},subscribeKey(t,e){return Pi(nn,t,e)},_getClient(){return nn._client},setClient(t){nn._client=Dw(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);rt.syncStorageConnections(e)},syncStorageConnections(t){const e=Je.getConnections(),n=t??Array.from(J.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(nn.recentConnections);i.set(r,s),nn.recentConnections=i}},getConnections(t){return t?nn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=rt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(dt.isTelegram()||dt.isSafari()&&dt.isIos()){if(Gf){await Gf,Gf=void 0;return}if(!dt.isPairingExpired(nn==null?void 0:nn.wcPairingExpiry)){const s=nn.wcUri;nn.wcUri=s;return}Gf=(e=(t=rt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),rt.state.status="connecting",await Gf,Gf=void 0,nn.wcPairingExpiry=void 0,rt.state.status="connected"}else await((r=(n=rt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=rt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&J.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=rt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&st.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Zn.setLoading(!0,J.state.activeChain);const n=st.getAuthConnector();n&&(En.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Je.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((s,[i,o])=>{const a=i,c=Vl(a);return c!==void 0&&(s[a]=c),s},{})),await rt.reconnectExternal(n),Zn.setLoading(!1,J.state.activeChain),gr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=rt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=rt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=rt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=rt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=rt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=rt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=rt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=rt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){nn.wcUri=void 0,nn.wcPairingExpiry=void 0,nn.wcLinking=void 0,nn.recentWallet=void 0,nn.status="disconnected",Uv.resetTransactions(),Je.deleteWalletConnectDeepLink()},resetUri(){nn.wcUri=void 0,nn.wcPairingExpiry=void 0,Gf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=rt.state;t&&Je.setWalletConnectDeepLink(t),e&&Je.setAppKitRecent(e),gr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Tt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){nn.wcBasic=t},setUri(t){nn.wcUri=t,nn.wcPairingExpiry=dt.getPairingExpiry()},setWcLinking(t){nn.wcLinking=t},setWcError(t){nn.wcError=t,nn.buffering=!1},setRecentWallet(t){nn.recentWallet=t},setBuffering(t){nn.buffering=t},setStatus(t){nn.status=t},setIsSwitchingConnection(t){nn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=rt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Mw("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(nn.connections);n.set(e,t),nn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=En.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&gv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await rt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=st.getConnectorById(t.connectorId),s=t.connectorId===fe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await rt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=st.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===fe.CONNECTOR_ID.AUTH,a=t.connectorId===fe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&gv.isSocialProvider(i)){const{address:d}=await gv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Zn.open({view:"ConnectingFarcaster"})},onConnect(){Tt.replace("ProfileWallets")}});c=d}else{const{address:d}=await gv.connectEmail({closeModalOnConnect:r,onOpen(){Zn.open({view:"EmailLogin"})},onConnect(){Tt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await gv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Zn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Tt.replace("ProfileWallets")}});c=d}else{const d=await rt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=En.getCaipAddress(n);if(o){const{address:c}=Lh.parseCaipAddress(o);i=c}const a=Cee.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await rt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await rt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},rt=Ha(zje),Xm=ar({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Qy={state:Xm,subscribe(t){return po(Xm,()=>t(Xm))},subscribeOpen(t){return Pi(Xm,"open",t)},set(t){Object.assign(Xm,{...Xm,...t})}},Hje={async getTokenList(){var r;const t=J.state.activeCaipNetwork,e=await xt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(rt==null?void 0:rt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await xt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await xt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=rt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await VU.getMyTokensWithBalance(t);return En.setTokenBalance(e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Eee(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=ar({tokenBalances:[],loading:!1}),Gje={state:Rn,subscribe(t){return po(Rn,()=>t(Rn))},subscribeKey(t,e){return Pi(Rn,t,e)},setToken(t){t&&(Rn.token=Dw(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(An.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await An.sendEvmToken();return;case"solana":await An.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{An.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Vl(t);if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!An.state.token)throw new Error("A token is required");(n=An.state.token)!=null&&n.address?(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Us.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.address,amount:An.state.sendTokenAmount,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await An.sendERC20Token({receiverAddress:An.state.receiverAddress,tokenAddress:An.state.token.address,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals})):(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Us.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.symbol||"",amount:An.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await An.sendNativeToken({receiverAddress:An.state.receiverAddress,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(Rn.lastRetry&&!dt.isAllowedRetry(Rn.lastRetry,30*vi.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await VU.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),Uh.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=Hje.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Eee());e&&(Rn.networkBalanceInUSD=e?hje.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Tt.pushTransactionStack({});const e=t.receiverAddress,n=En.state.address,r=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await rt.sendTransaction({chainNamespace:fe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),gr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Vl("eip155")===Us.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=An.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=rt._getClient())==null||a.updateBalance("eip155"),An.resetSend()},async sendERC20Token(t){Tt.pushTransactionStack({onSuccess(){Tt.replace("Account")}});const e=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(En.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=dt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await rt.writeContract({fromAddress:En.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:mje.getERC20Abi(n),chainNamespace:fe.CHAIN.EVM}),An.resetSend()}},async sendSolanaToken(){var t;if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");Tt.pushTransactionStack({onSuccess(){Tt.replace("Account")}}),await rt.sendTransaction({chainNamespace:"solana",to:An.state.receiverAddress,value:An.state.sendTokenAmount}),(t=rt._getClient())==null||t.updateBalance("solana"),An.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},An=Ha(Gje),qO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},qA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Re=ar({chains:dje(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),qje={state:Re,subscribe(t){return po(Re,()=>{t(Re)})},subscribeKey(t,e){return Pi(Re,t,e)},subscribeChainProp(t,e,n){let r;return po(Re.chains,()=>{var i;const s=n||Re.activeChain;if(s){const o=(i=Re.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Je.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Rt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Re.noAdapters=!0),Re.noAdapters||(Re.activeChain=a==null?void 0:a.namespace,Re.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Re.activeChain&&Qy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=Je.getPreferredAccountTypes()||{},f={...Rt.state.defaultAccountTypes,...h};J.state.chains.set(u,{namespace:u,networkState:ar({...qA,caipNetwork:d==null?void 0:d[0]}),accountState:ar({...qO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Re.activeChain===t){const r=Array.from(Re.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}Re.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Re.chains.set(t.namespace,{namespace:t.namespace,networkState:{...qA,caipNetwork:r[0]},accountState:qO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Re.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Re.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),st.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Re.chains.get(t);if(n){const o=((r=Re.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),Re.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&st.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Re.chains.get(t);n&&(n.networkState={...n.networkState||qA,...e},Re.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Re.chains.get(t);if(r){const s={...r.accountState||qO,...e};Re.chains.set(t,{...r,accountState:s}),(Re.chains.size===1||Re.activeChain===t)&&(e.caipAddress&&(Re.activeCaipAddress=e.caipAddress),En.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Re.chains.get(t);if(n){const r={...n.networkState||qA,...e};Re.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Re.activeChain=t;const e=t?Re.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Re.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Re.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),Je.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Qy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Re.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=Re.chains.get(t.chainNamespace);Re.activeChain=t.chainNamespace,Re.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Re.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Re.activeCaipAddress=void 0,J.setAccountProp("caipAddress",Re.activeCaipAddress,t.chainNamespace),e&&En.replaceState(e.accountState),An.resetSend(),Qy.set({activeChain:Re.activeChain,selectedNetworkId:(i=Re.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Je.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&Rt.state.enableNetworkSwitch&&!Rt.state.allowUnsupportedChain&&!rt.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Re.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=J.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=J.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Re.activeCaipNetwork)==null?void 0:a.id)})),s=J.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Zn.close()}catch{Tt.goBack()}gr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Re.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Re.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Re.activeChain;if(e&&(n=e),!n)return;const r=(s=Re.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Re.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Re.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return dt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));st.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Re.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Re.activeCaipNetwork},getActiveCaipAddress(){return Re.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Re.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Re.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Re.activeChain)return!0;const e=J.getRequestedCaipNetworks(Re.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=TI.caipNetworkIdToNumber((r=Re.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Re.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Zn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Re.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&vi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=J.getAccountProp("preferredAccountType",e);Re.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),st.removeConnectorId(e)},setIsSwitchingNamespace(t){Re.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Re.chains.forEach(s=>{fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Re.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:En.state},getNetworkData(t){var n;const e=t||Re.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=st.state.filterByNamespace;return(t?[Re.chains.get(t)]:Array.from(Re.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Re.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Re.lastConnectedSIWECaipNetwork}},J=Ha(qje),Vje={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},_ee=dt.getBlockchainApiUrl(),Fi=ar({clientId:null,api:new _1({baseUrl:_ee,clientId:null}),supportedChains:{http:[],ws:[]}}),xt={state:Fi,async get(t){const{st:e,sv:n}=xt.getSdkProperties(),r=Rt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Fi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Rt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Fi.supportedChains.http.length||await xt.getSupportedNetworks()}catch{return!1}return Fi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await xt.get({path:"v1/supported-chains"});return Fi.supportedChains=t,t}catch{return Fi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await xt.isNetworkSupported(e))return{avatar:"",name:""};const r=Je.getIdentityFromCacheForAddress(t);if(r)return r;const s=await xt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?dt.getPlainAddress(J.state.activeCaipAddress):void 0}});return Je.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await xt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?xt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await xt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?xt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Fi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Rt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await xt.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?xt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=xt.getSdkProperties();if(!await xt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return xt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await xt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Fi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:vi.CONVERT_SLIPPAGE_TOLERANCE},projectId:Rt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return xt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Uh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await xt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/reverse/${t}`,params:{sender:En.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await xt.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Fi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await xt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Fi.api.post({path:"/v1/generators/onrampurl",params:{projectId:Rt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await xt.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await xt.get({path:"/v1/onramp/options"})}catch{return Vje}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await xt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Fi.api.post({path:"/v1/onramp/quote",params:{projectId:Rt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await xt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Fi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Rt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Fi.clientId=t,Fi.api=new _1({baseUrl:_ee,clientId:t})}},VO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},VU={async getMyTokensWithBalance(t){const e=En.state.address,n=J.state.activeCaipNetwork,r=st.getConnectorId("eip155")===fe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Je.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===fe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await xt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=VO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await rt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await rt.walletGetAssets({account:t,chainFilter:[s]});if(!VO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>VO.createBalance(l,e.caipNetworkId));return Je.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Jc=ar({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),Kje={state:Jc,replaceState(t){t&&Object.assign(Jc,Dw(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?dt.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?Dw(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Jc.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(Jc.lastRetry&&!dt.isAllowedRetry(Jc.lastRetry,30*vi.ONE_SEC_MS))return Jc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await VU.getMyTokensWithBalance();return En.setTokenBalance(a,n),Jc.lastRetry=void 0,Jc.balanceLoading=!1,a}}catch(a){Jc.lastRetry=Date.now(),t==null||t(a),Uh.showError("Token Balance Unavailable")}finally{Jc.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},En=Ha(Kje),Yje={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Tt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=En.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=En.getCaipAddress(t.chainNamespace),l=st.getConnectorId(J.state.activeChain)===fe.CONNECTOR_ID.AUTH,u=fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Tt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Tt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Tt.push("SwitchNetwork",{...r,network:t})}},ji=ar({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Qje={state:ji,subscribe(t){return po(ji,()=>t(ji))},subscribeKey(t,e){return Pi(ji,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=J.state.activeChain,r=e&&e!==n,s=(i=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(rt.state.wcBasic?Ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ct.prefetch(),st.setFilterByNamespace(t==null?void 0:t.namespace),Zn.setLoading(!0,e),e&&r){const a=((o=J.getNetworkData(e))==null?void 0:o.caipNetwork)||J.getRequestedCaipNetworks(e)[0];a&&Yje.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=J.state.noAdapters;Rt.state.manualWCControl||a&&!s?dt.isMobile()?Tt.reset("AllWallets"):Tt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Tt.reset(t.view,t.data):s?Tt.reset("Account"):Tt.reset("Connect")}ji.open=!0,Qy.set({open:!0}),gr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Rt.state.enableEmbedded,e=!!J.state.activeCaipAddress;ji.open&&gr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ji.open=!1,Tt.reset("Connect"),Zn.clearLoading(),t?e?Tt.replace("Account"):Tt.push("Connect"):Qy.set({open:!1}),rt.resetUri()},setLoading(t,e){e&&ji.loadingNamespaceMap.set(e,t),ji.loading=t,Qy.set({loading:t})},clearLoading(){ji.loadingNamespaceMap.clear(),ji.loading=!1},shake(){ji.shake||(ji.shake=!0,setTimeout(()=>{ji.shake=!1},500))}},Zn=Ha(Qje),u7=2147483648,Jje={convertEVMChainIdToCoinType(t){if(t>=u7)throw new Error("Invalid chainId");return(u7|t)>>>0}},ca=ar({suggestions:[],loading:!1}),Zje={state:ca,subscribe(t){return po(ca,()=>t(ca))},subscribeKey(t,e){return Pi(ca,t,e)},async resolveName(t){var e,n;try{return await xt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await xt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ca.loading=!0,ca.suggestions=[];const e=await xt.getEnsNameSuggestions(t);return ca.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ca.suggestions}catch(e){const n=$S.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ca.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=Je.getEnsFromCacheForAddress(t);if(n)return n;const r=await xt.reverseLookupEnsName({address:t});return Je.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=$S.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork,n=En.state.address,r=st.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ca.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Tt.pushTransactionStack({onCancel(){Tt.replace("RegisterAccountName")}});const i=await rt.signMessage(s);ca.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=Jje.convertEVMChainIdToCoinType(Number(o));await xt.registerEnsName({coinType:a,address:n,signature:i,message:s}),En.setProfileName(t,e.chainNamespace),Tt.replace("RegisterAccountNameSuccess")}catch(s){const i=$S.parseEnsApiError(s,`Error registering name ${t}`);throw Tt.replace("RegisterAccountName"),new Error(i)}finally{ca.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},$S=Ha(Zje);let qf=null;const Jd={getSIWX(){return Rt.state.siwx},async initializeIfEnabled(){var i;const t=Rt.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if(qf&&await qf,(await t.getSessions(`${n}:${r}`,s)).length)return;await Zn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=rt._getClient())==null?void 0:i.disconnect().catch(console.error)),Tt.reset("Connect"),Uh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Rt.state.siwx,e=dt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=rt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();st.getConnectorId(n.chainNamespace)===fe.CONNECTOR_ID.AUTH&&Tt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),J.setLastConnectedSIWECaipNetwork(n),Zn.close(),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Zn.state.open||Tt.state.view==="ApproveTransaction")&&await Zn.open({view:"SIWXSignMessage"}),Uh.showError("Error signing message"),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=J.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,dt.getPlainAddress(J.getActiveCaipAddress())||""));s&&s.length>0?await J.switchActiveNetwork(r):await rt.disconnect()}else await rt.disconnect()}else Zn.close();Zn.close(),gr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,dt.getPlainAddress(J.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Rt.state.siwx,e=dt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Tt.state.view==="ApproveTransaction",r=Tt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Jd.getSIWX();if(!i||!s.includes(fe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=J.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Jd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(qf)return qf;const r=Jd.getSIWX();return r?(qf=r.addSession({data:t,message:e,signature:n}).finally(()=>{qf=null}),qf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Jd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Uh.showLoading("Authenticating...",{autoClose:!1}),En.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Jd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Jd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Uh.hide()}}return!0},getSIWXEventProperties(){var e;const t=J.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Vl(t)===Us.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Io={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:fe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Bo={ConnectorExplorerIds:{[fe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[fe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[fe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Io.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Io.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Io.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Io.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Io.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Io.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Io.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Io.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Io.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Io.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Io.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[fe.CONNECTOR_ID.COINBASE]:"Coinbase",[fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[fe.CONNECTOR_ID.LEDGER]:"Ledger",[fe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[fe.CONNECTOR_ID.INJECTED]:"INJECTED",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[fe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[fe.CONNECTOR_ID.AUTH]:"AUTH",[Io.CONNECTOR_TYPE_AUTH]:"AUTH"}},to={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Io.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>st.getConnectorId(e)===fe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},Xje=new AbortController,Ud={EmbeddedWalletAbortController:Xje,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},e9e="rpc.walletconnect.org";function d7(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const KO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Bv={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===e9e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return KO.includes(e)?d7(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Bo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Bv.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ta(a.url,a.config))}),KO.includes(t.caipNetworkId)&&r.push(Ta(d7(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ta(a))}),Yx(r)},extendWagmiTransports(t,e,n){if(KO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Yx([n,Ta(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Je.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},h7={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ns={set(t,e){Cl.isClient&&localStorage.setItem(`${Ke.STORAGE_KEY}${t}`,e)},get(t){return Cl.isClient?localStorage.getItem(`${Ke.STORAGE_KEY}${t}`):null},delete(t,e){Cl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ke.STORAGE_KEY}${t}`))}},VA=30*1e3,Cl={checkIfAllowedToTriggerEmail(){const t=Ns.get(Ke.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<VA){const n=Math.ceil((VA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ns.get(Ke.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<VA)return Math.ceil((VA-e)/1e3)}return 0},checkIfRequestExists(t){return Us.NOT_SAFE_RPC_METHODS.includes(t.method)||Us.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(h7.transactionHash))||(t==null?void 0:t.match(h7.signedMessage)))?Ke.RPC_RESPONSE_TYPE_TX:Ke.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Us.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Er=E.object({message:E.string()});function Me(t){return E.literal(Ke[t])}const UT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const t9e=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),n9e=E.object({email:E.string().email()}),r9e=E.object({otp:E.string()}),s9e=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(UT),rpcUrl:E.optional(E.string())}),i9e=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(UT),rpcUrl:E.optional(E.string())}),o9e=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),a9e=E.object({email:E.string().email()}),c9e=E.object({otp:E.string()}),l9e=E.object({otp:E.string()}),u9e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),d9e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),h9e=E.object({type:E.string()}),f9e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),p9e=E.object({url:E.string()}),g9e=E.object({userName:E.string()}),m9e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Us.ACCOUNT_TYPES.EOA,Us.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(UT)}),y9e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),w9e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Us.ACCOUNT_TYPES.EOA,Us.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(UT)}),b9e=E.object({uri:E.string()}),v9e=E.object({isConnected:E.boolean()}),E9e=E.object({chainId:E.string().or(E.number())}),C9e=E.object({chainId:E.string().or(E.number())}),_9e=E.object({newEmail:E.string().email()}),A9e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const S9e=E.object({version:E.string().optional()}),x9e=E.object({type:E.string(),address:E.string()}),I9e=E.any(),N9e=E.object({method:E.literal("eth_accounts")}),T9e=E.object({method:E.literal("eth_blockNumber")}),R9e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),P9e=E.object({method:E.literal("eth_chainId")}),O9e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),k9e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),D9e=E.object({method:E.literal("eth_gasPrice")}),M9e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),L9e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),U9e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),B9e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),$9e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),F9e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),j9e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),W9e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),z9e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),H9e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),G9e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),q9e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),V9e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),K9e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),Y9e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),Q9e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),J9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),Z9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),X9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),e7e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),t7e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),n7e=E.object({method:E.literal("eth_newBlockFilter")}),r7e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),s7e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),i7e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),o7e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),a7e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),f7=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),c7e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),l7e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),u7e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),d7e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),h7e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),f7e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),p7e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),g7e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),m7e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),y7e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),w7e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),b7e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),p7=E.object({token:E.string()}),Le=E.object({id:E.string().optional()}),mv={appEvent:Le.extend({type:Me("APP_SWITCH_NETWORK"),payload:t9e}).or(Le.extend({type:Me("APP_CONNECT_EMAIL"),payload:n9e})).or(Le.extend({type:Me("APP_CONNECT_DEVICE")})).or(Le.extend({type:Me("APP_CONNECT_OTP"),payload:r9e})).or(Le.extend({type:Me("APP_CONNECT_SOCIAL"),payload:s9e})).or(Le.extend({type:Me("APP_GET_FARCASTER_URI")})).or(Le.extend({type:Me("APP_CONNECT_FARCASTER")})).or(Le.extend({type:Me("APP_GET_USER"),payload:E.optional(i9e)})).or(Le.extend({type:Me("APP_GET_SOCIAL_REDIRECT_URI"),payload:o9e})).or(Le.extend({type:Me("APP_SIGN_OUT")})).or(Le.extend({type:Me("APP_IS_CONNECTED"),payload:E.optional(p7)})).or(Le.extend({type:Me("APP_GET_CHAIN_ID")})).or(Le.extend({type:Me("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Le.extend({type:Me("APP_INIT_SMART_ACCOUNT")})).or(Le.extend({type:Me("APP_SET_PREFERRED_ACCOUNT"),payload:h9e})).or(Le.extend({type:Me("APP_RPC_REQUEST"),payload:f7.or(b7e).or(N9e).or(T9e).or(R9e).or(P9e).or(O9e).or(k9e).or(D9e).or(M9e).or(L9e).or(U9e).or(B9e).or($9e).or(F9e).or(j9e).or(W9e).or(z9e).or(H9e).or(G9e).or(q9e).or(V9e).or(K9e).or(Y9e).or(Q9e).or(J9e).or(Z9e).or(X9e).or(e7e).or(t7e).or(n7e).or(r7e).or(s7e).or(i7e).or(o7e).or(a7e).or(f7).or(c7e).or(l7e).or(u7e).or(d7e).or(h7e).or(f7e).or(g7e).or(p7e).or(m7e).or(y7e).or(w7e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Le.extend({type:Me("APP_UPDATE_EMAIL"),payload:a9e})).or(Le.extend({type:Me("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:c9e})).or(Le.extend({type:Me("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:l9e})).or(Le.extend({type:Me("APP_SYNC_THEME"),payload:u9e})).or(Le.extend({type:Me("APP_SYNC_DAPP_DATA"),payload:d9e})).or(Le.extend({type:Me("APP_RELOAD")})).or(Le.extend({type:Me("APP_RPC_ABORT")})),frameEvent:Le.extend({type:Me("FRAME_SWITCH_NETWORK_ERROR"),payload:Er}).or(Le.extend({type:Me("FRAME_SWITCH_NETWORK_SUCCESS"),payload:C9e})).or(Le.extend({type:Me("FRAME_CONNECT_EMAIL_SUCCESS"),payload:f9e})).or(Le.extend({type:Me("FRAME_CONNECT_EMAIL_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:p9e})).or(Le.extend({type:Me("FRAME_GET_FARCASTER_URI_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:g9e})).or(Le.extend({type:Me("FRAME_CONNECT_FARCASTER_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_CONNECT_OTP_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_CONNECT_OTP_SUCCESS")})).or(Le.extend({type:Me("FRAME_CONNECT_DEVICE_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Le.extend({type:Me("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:m9e})).or(Le.extend({type:Me("FRAME_CONNECT_SOCIAL_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_GET_USER_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_GET_USER_SUCCESS"),payload:w9e})).or(Le.extend({type:Me("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:b9e})).or(Le.extend({type:Me("FRAME_SIGN_OUT_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_SIGN_OUT_SUCCESS")})).or(Le.extend({type:Me("FRAME_IS_CONNECTED_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_IS_CONNECTED_SUCCESS"),payload:v9e})).or(Le.extend({type:Me("FRAME_GET_CHAIN_ID_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_GET_CHAIN_ID_SUCCESS"),payload:E9e})).or(Le.extend({type:Me("FRAME_RPC_REQUEST_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_RPC_REQUEST_SUCCESS"),payload:I9e})).or(Le.extend({type:Me("FRAME_SESSION_UPDATE"),payload:p7})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_SUCCESS"),payload:y9e})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:_9e})).or(Le.extend({type:Me("FRAME_SYNC_THEME_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_SYNC_THEME_SUCCESS")})).or(Le.extend({type:Me("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Le.extend({type:Me("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:A9e})).or(Le.extend({type:Me("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:x9e})).or(Le.extend({type:Me("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_READY"),payload:S9e})).or(Le.extend({type:Me("FRAME_RELOAD_ERROR"),payload:Er})).or(Le.extend({type:Me("FRAME_RELOAD_SUCCESS")}))};function YO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function v7e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=fe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(Aje);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class E7e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=fe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!YO(Ke.FRAME_EVENT_KEY,u))return;const d=mv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Cl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Cl.isClient&&window.addEventListener("message",({data:a})=>{if(!YO(Ke.FRAME_EVENT_KEY,a))return;const c=mv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Cl.isClient&&window.addEventListener("message",({data:a})=>{if(!YO(Ke.APP_EVENT_KEY,a))return;const c=mv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Cl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");mv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Cl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");mv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Cl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=v7e({projectId:e,chainId:r,version:xje,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class C7e{constructor(e){var i;const n=hm({level:Sje}),{logger:r,chunkLoggerController:s}=uT({opts:n});this.logger=Fs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class _7e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new C7e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new E7e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ns.get(Ke.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ns.get(Ke.EMAIL)}getUsername(){return Ns.get(Ke.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ke.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Cl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ke.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ke.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ke.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ke.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ke.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ke.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ke.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ke.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ke.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ke.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ke.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ke.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ke.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ke.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ke.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ke.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ke.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ke.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ke.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ke.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Us.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ke.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ke.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ke.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Us.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Us.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ke.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ke.APP_SYNC_DAPP_DATA,Ke.APP_SYNC_THEME,Ke.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ke.APP_CONNECT_EMAIL,Ke.APP_CONNECT_DEVICE,Ke.APP_CONNECT_OTP,Ke.APP_CONNECT_SOCIAL,Ke.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,m){var b,v,A;w.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ns.set(Ke.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ns.set(Ke.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ns.set(Ke.EMAIL,e),Ns.set(Ke.EMAIL_LOGIN_USED_KEY,"true"),Ns.delete(Ke.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ns.delete(Ke.EMAIL_LOGIN_USED_KEY),Ns.delete(Ke.EMAIL),Ns.delete(Ke.LAST_USED_CHAIN_KEY),Ns.delete(Ke.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ns.set(Ke.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ns.get(Ke.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ns.set(Ke.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Lh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Jy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Jy.instance||(Jy.instance=new _7e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Jy.instance}}const A7e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},g7={filterOutDuplicatesByRDNS(t){const e=Rt.state.enableEIP6963?st.state.connectors:[],n=Je.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&dt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=st.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Je.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=st.state,{featuredWalletIds:n}=Rt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Rt.state.features)==null?void 0:c.connectMethodsOrder),r=e||st.state.connectors;if(n)return n;const{injected:s,announced:i}=FS.getConnectorsByType(r,Ct.state.recommended,Ct.state.featured),o=s.filter(FS.showConnector),a=i.filter(FS.showConnector);return o.length||a.length?["wallet","email","social"]:A7e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ct.state.excludedWallets.some(r=>to.isLowerCaseMatch(r.name,t.name));return e||n}},FS={getConnectorsByType(t,e,n){const{customWallets:r}=Rt.state,s=Je.getRecentWallets(),i=g7.filterOutDuplicateWallets(e),o=g7.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Ct.state.excludedWallets.some(i=>to.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!dt.isMobile()||dt.isMobile()&&!e&&!rt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>st.getConnectorId(n.namespace)===fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Rt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Rt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!dt.isMobile())return{accounts:[],chainId:void 0};if(t.id===fe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Ju`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Ju`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Ju`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const jS={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([jS.getAddresses(t),jS.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:jS.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Bo.NetworkImageIds[e.id]]}]})}},ey={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function A1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const m7=A1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),y7=A1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});A1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});A1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});A1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const S7e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},pg={getMethodsByChainNamespace(t){return S7e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case m7.caipNetworkId:u.chains.push(m7.deprecatedCaipNetworkId);break;case y7.caipNetworkId:u.chains.push(y7.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await $S.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=pg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(pg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>dt.isCaipAddress(d)).map(d=>Lh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Lh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class x7e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case fe.CHAIN.EVM:await this.syncEVMConnections(e);break;case fe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case fe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=pg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await FS.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==fe.CONNECTOR_ID.AUTH&&a.id!==fe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=pg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,m;if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const b=pg.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>dt.createAccount(fe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:fe.CHAIN.BITCOIN,publicKey:((h=u[ey.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[ey.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[ey.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:fe.CHAIN.BITCOIN,publicKey:((g=u[ey.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[ey.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((m=u[ey.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>to.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>to.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>to.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>to.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>to.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Aee{constructor({provider:e,namespace:n}){this.id=fe.CONNECTOR_ID.WALLET_CONNECT,this.name=Bo.ConnectorNamesMap[fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Bo.ConnectorImageIds[fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Rt.state.universalProviderConfigOverride,s=pg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Jd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:I7e})}}const I7e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],N7e=[fe.CONNECTOR_ID.AUTH,fe.CONNECTOR_ID.WALLET_CONNECT];class T7e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getConnectorId=n=>st.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new x7e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:fe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Bo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!to.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){En.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Vl(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Aee);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=dt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=dt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=dt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&to.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=dt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),to.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?jS.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),to.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(N7e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function R7e(t){let e=[],n,r;function s(a){return TI.parseEvmChainId(a)||1}function i(){var a;return n||(n=Jy.getInstance({projectId:t.options.projectId,chainId:(a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ep.open(Ud.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ep.open(Ud.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ep.open(Ud.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Ud.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>J.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=TI.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=w||m,!l)throw new Error("ChainId not found in provider")}const u=Vl("eip155"),{address:d,chainId:h,accounts:f}=await Jd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:fe.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:fe.CONNECTOR_ID.AUTH,name:fe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:fe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Jy.getInstance({projectId:t.options.projectId,chainId:(c=J.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Ud.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ep.open(Ud.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ep.open(Ud.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ep.open(Ud.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>J.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=J.state.activeChain===fe.CHAIN.EVM;if(fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>st.getConnectorId(h)===fe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new jl(new Error("chain not found on connector."));const d=await this.getProvider(),h=Vl("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new jl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(zu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}KU.type="walletConnect";function KU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:KU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=J.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Qd;a||(a=this.onDisplayUri,w.on("display_uri",a));const m=await this.isChainsStale();w.session&&m&&await w.disconnect();const b=Rt.state.universalProviderConfigOverride;if(!w.session||m){const S=pg.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(D=>Number(D.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,T=C==null?void 0:C.some(S=>Number(S.split(":")[1])===A);let x=1;T?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Gr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,m,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[fe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Je.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=Je.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],b=m==null?void 0:m.find(v=>v.id===w);b&&b.chainNamespace===fe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,m,b;const d=(g=e.getCaipNetwork(fe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(m=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[fe.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:b[0],p=J.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,m,b;const f=await this.getProvider();if(!f)throw new Qd;const p=J.getCaipNetworks().find(v=>v.id===h);if(!p)throw new jl(new JC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Gr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const T=((b=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:C,chainId:tt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:T};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(C){throw new Gr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>zu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(J.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[fe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const yv=ar({pendingTransactions:0}),w7={state:yv,subscribeKey(t,e){return Pi(yv,t,e)},increase(t){yv[t]+=1},decrease(t){yv[t]-=1},reset(t){yv[t]=0}};function P7e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function O7e(t){if(dt.isSafeApp()){const{safe:e}=await Xs(async()=>{const{safe:n}=await import("./index-BPhnO670.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function k7e(t){try{const{coinbaseWallet:e}=await Xs(async()=>{const{coinbaseWallet:n}=await import("./index-BPhnO670.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const D7e={enable:!1,pollingInterval:3e4};class M7e extends T7e{constructor(e){const n=Bv.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=fe.CHAIN.EVM,this.adapterType=fe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...D7e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===fe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>dt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Yy(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>dt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Yy(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===fe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Bv.getCaipNetworkId(s);i?n[s.id]=Bv.extendWagmiTransports(s,e.projectId,i):n[s.id]=Bv.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=nee({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=e4e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),w7.increase("pendingTransactions")}});const e=w7.subscribeKey("pendingTransactions",n=>{var r;n>=fe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){YX(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),QX(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===fe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:Je.getConnectedSocialProvider(),username:Je.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await k7e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await O7e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(KU(e,n)),e.enableEIP6963!==!1&&r.push(DT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(R7e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Bo.ConnectorNamesMap[r.id]??r.name,imageId:Bo.ConnectorImageIds[r.id],type:Bo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await J8e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Yy(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Y8e(this.wagmiConfig,s);const i=await Q8e(this.wagmiConfig,s);return await ZX(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(TI.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await XX(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await z8e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return XEe(e.value,e.decimals)}formatUnits(e){return im(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===fe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===fe.CONNECTOR_ID.AUTH||e.id===fe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Bo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Bo.ConnectorNamesMap[e.id]??e.name,imageId:Bo.ConnectorImageIds[e.id],type:Bo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){JX(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=ac(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(dt.isSafeApp()&&n===fe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await LS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await LS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await L3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===fe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((b,v)=>to.isLowerCaseMatch(b,r)?-1:to.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await LS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await M3(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Je.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await KX(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Je.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=ac(this.wagmiConfig).find(i=>to.isLowerCaseMatch(i.connector.id,e.id));return await k3(this.wagmiConfig,{connector:n}),Rt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=ac(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await k3(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await L3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=P7e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Bo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=ac(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(J.state.activeChain==="eip155")return;M3(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Aee({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const See="7c65f27254d6ddd24cf7eedf2685c4fb",L7e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},U7e=new M7e({projectId:See,networks:[bI,wI,vI,TX,EI,xI,II],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}});I6e({projectId:See,metadata:L7e,adapters:[U7e],networks:[bI,wI,vI,TX,EI,xI,II],features:{analytics:!0}});const YU=()=>{if(!px)throw new Error("[FIREBASE] Database not initialized");return px},Hg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,PI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=YU(),s=Ro(r,`leaderboard/${t}`),i=await rp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Qv(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Hg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},B7e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Hg(e),redPlayer:Hg(n)}),await PI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await PI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},xee=async(t=20)=>{try{const e=YU(),n=Ro(e,"leaderboard"),r=await rp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Iee=async()=>{try{const t=YU(),e=Ro(t,"leaderboard/0x0000000000000000000000000000000000000000");return await $H(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},Zc=()=>{if(!px)throw new Error("[FIREBASE] Database not initialized");return px},is={async getGame(t){try{const e=Zc(),n=Ro(e,`chess_games/${t}`),r=await rp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Zc(),r=Ro(n,`chess_games/${t}`);await Qv(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Zc(),r=Ro(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=x$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Zc(),r=Ro(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Qv(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await rp(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Zc(),e=Ro(t,"chess_games"),n=await rp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Zc(),e=Ro(t,"chess_games"),n=await rp(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Zc(),n=Ro(e,`chess_games/${t}`);await $H(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Zc(),n=Ro(e,`leaderboard/${t.username}`);await Qv(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Zc(),e=Ro(t,"leaderboard"),n=await rp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Zc(),n=Ro(e,"leaderboard");return x$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},$7e="6.15.0";function F7e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function pi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function bt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&F7e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Ry(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Ry(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Ry(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Ry(r,e)}: ${Ry(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ks(t,e){return t&&t.code===e}function QU(t){return ks(t,"CALL_EXCEPTION")}function cr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Ry(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Ry(a))}}i.push(`code=${e}`),i.push(`version=${$7e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return bt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&bt(s,{shortMessage:r}),s}function ye(t,e,n,r){if(!t)throw cr(e,n,r)}function Z(t,e,n,r){ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Nee(t,e,n){n==null&&(n=""),n&&(n=": "+n),ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function BT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Tee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Z(!1,"invalid BytesLike value",e||"value",t)}function Vt(t,e){return Tee(t,e,!1)}function wi(t,e){return Tee(t,e,!0)}function tr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function JU(t){return tr(t,!0)||t instanceof Uint8Array}const b7="0123456789abcdef";function Oe(t){const e=Vt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=b7[(s&240)>>4]+b7[s&15]}return n}function Ir(t){return"0x"+t.map(e=>Oe(e).substring(2)).join("")}function Zy(t){return tr(t,!0)?(t.length-2)/2:Vt(t).length}function _r(t,e,n){const r=Vt(t);return n!=null&&n>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Oe(r.slice(e??0,n??r.length))}function Ree(t,e,n){const r=Vt(t);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Oe(s)}function dd(t,e){return Ree(t,e,!0)}function j7e(t,e){return Ree(t,e,!1)}const $T=BigInt(0),Ac=BigInt(1),Py=9007199254740991;function W7e(t,e){const n=FT(t,"value"),r=BigInt(Kt(e,"width"));if(ye(n>>r===$T,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Ac){const s=(Ac<<r)-Ac;return-((~n&s)+Ac)}return n}function Pee(t,e){let n=Ye(t,"value");const r=BigInt(Kt(e,"width")),s=Ac<<r-Ac;if(n<$T){n=-n,ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ac<<r)-Ac;return(~n&i)+Ac}else ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function $v(t,e){const n=FT(t,"value"),r=BigInt(Kt(e,"bits"));return n&(Ac<<r)-Ac}function Ye(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Py&&t<=Py,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function FT(t,e){const n=Ye(t,e);return ye(n>=$T,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const v7="0123456789abcdef";function ZU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=v7[n>>4],e+=v7[n&15];return BigInt(e)}return Ye(t)}function Kt(t,e){switch(typeof t){case"bigint":return Z(t>=-Py&&t<=Py,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Py&&t<=Py,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Kt(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function z7e(t){return Kt(ZU(t))}function Cf(t,e){let r=FT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Kt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Zr(t){const e=FT(t,"value");if(e===$T)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function vc(t){let e=Oe(JU(t)?t:Zr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const E7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const C7=BigInt(58);function H7e(t){const e=Vt(t);let n=ZU(e),r="";for(;n;)r=E7[Number(n%C7)]+r,n/=C7;for(let s=0;s<e.length&&!e[s];s++)r=E7[0]+r;return r}function G7e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Vt(e)}function q7e(t){const e=Vt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var p0;class Oee{constructor(e,n,r){re(this,"filter");re(this,"emitter");Y(this,p0);L(this,p0,n),bt(this,{emitter:e,filter:r})}async removeListener(){_(this,p0)!=null&&await this.emitter.off(this.filter,_(this,p0))}}p0=new WeakMap;function V7e(t,e,n,r,s){Z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function kee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function K7e(t,e,n,r,s){return t==="OVERLONG"?(Z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),kee(t,e,n))}const Y7e=Object.freeze({error:V7e,ignore:kee,replace:K7e});function Q7e(t,e){e==null&&(e=Y7e.error);const n=Vt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Zu(t,e){Z(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Z(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function J7e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function OI(t,e){return J7e(Q7e(t,e))}function Dee(t){async function e(n,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=cr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=cr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const Z7e=12,X7e=250;let _7=Dee();const eWe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),tWe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let QO=!1;async function Mee(t,e){try{const n=t.match(eWe);if(!n)throw new Error("invalid data");return new cf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?G7e(n[3]):rWe(n[3]))}catch{return new cf(599,"BAD REQUEST (invalid data: URI)",{},null,new _f(t))}}function Lee(t){async function e(n,r){try{const s=n.match(tWe);if(!s)throw new Error("invalid link");return new _f(`${t}${s[2]}`)}catch{return new cf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new _f(n))}}return e}const KA={data:Mee,ipfs:Lee("https://gateway.ipfs.io/ipfs/")},Uee=new WeakMap;var Fp,fh;class nWe{constructor(e){Y(this,Fp);Y(this,fh);L(this,Fp,[]),L(this,fh,!1),Uee.set(e,()=>{if(!_(this,fh)){L(this,fh,!0);for(const n of _(this,Fp))setTimeout(()=>{n()},0);L(this,Fp,[])}})}addListener(e){ye(!_(this,fh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Fp).push(e)}get cancelled(){return _(this,fh)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Fp=new WeakMap,fh=new WeakMap;function YA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var g0,m0,dc,Su,y0,w0,as,Oo,xu,jp,Wp,zp,cl,hc,ph,Hp,Fv;const HI=class HI{constructor(e){Y(this,Hp);Y(this,g0);Y(this,m0);Y(this,dc);Y(this,Su);Y(this,y0);Y(this,w0);Y(this,as);Y(this,Oo);Y(this,xu);Y(this,jp);Y(this,Wp);Y(this,zp);Y(this,cl);Y(this,hc);Y(this,ph);L(this,w0,String(e)),L(this,g0,!1),L(this,m0,!0),L(this,dc,{}),L(this,Su,""),L(this,y0,3e5),L(this,hc,{slotInterval:X7e,maxAttempts:Z7e}),L(this,ph,null)}get url(){return _(this,w0)}set url(e){L(this,w0,String(e))}get body(){return _(this,as)==null?null:new Uint8Array(_(this,as))}set body(e){if(e==null)L(this,as,void 0),L(this,Oo,void 0);else if(typeof e=="string")L(this,as,Zu(e)),L(this,Oo,"text/plain");else if(e instanceof Uint8Array)L(this,as,e),L(this,Oo,"application/octet-stream");else if(typeof e=="object")L(this,as,Zu(JSON.stringify(e))),L(this,Oo,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,as)!=null}get method(){return _(this,Su)?_(this,Su):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,Su,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,dc));return _(this,xu)&&(e.authorization=`Basic ${q7e(Zu(_(this,xu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Oo)&&(e["content-type"]=_(this,Oo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,dc)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,dc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,xu)||null}setCredentials(e,n){Z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,xu,`${e}:${n}`)}get allowGzip(){return _(this,m0)}set allowGzip(e){L(this,m0,!!e)}get allowInsecureAuthentication(){return!!_(this,g0)}set allowInsecureAuthentication(e){L(this,g0,!!e)}get timeout(){return _(this,y0)}set timeout(e){Z(e>=0,"timeout must be non-zero","timeout",e),L(this,y0,e)}get preflightFunc(){return _(this,jp)||null}set preflightFunc(e){L(this,jp,e)}get processFunc(){return _(this,Wp)||null}set processFunc(e){L(this,Wp,e)}get retryFunc(){return _(this,zp)||null}set retryFunc(e){L(this,zp,e)}get getUrlFunc(){return _(this,ph)||_7}set getUrlFunc(e){L(this,ph,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,as)?Oe(_(this,as)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,hc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,hc).maxAttempts=e.maxAttempts)}send(){return ye(_(this,cl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,cl,new nWe(this)),de(this,Hp,Fv).call(this,0,A7()+this.timeout,0,this,new cf(0,"",{},null,this))}cancel(){ye(_(this,cl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Uee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new HI(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,dc,Object.assign({},_(this,dc))),_(this,as)&&L(s,as,new Uint8Array(_(this,as))),L(s,Oo,_(this,Oo)),s}clone(){const e=new HI(this.url);return L(e,Su,_(this,Su)),_(this,as)&&L(e,as,_(this,as)),L(e,Oo,_(this,Oo)),L(e,dc,Object.assign({},_(this,dc))),L(e,xu,_(this,xu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,jp,_(this,jp)),L(e,Wp,_(this,Wp)),L(e,zp,_(this,zp)),L(e,hc,Object.assign({},_(this,hc))),L(e,ph,_(this,ph)),e}static lockConfig(){QO=!0}static getGateway(e){return KA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(QO)throw new Error("gateways locked");KA[e]=n}static registerGetUrl(e){if(QO)throw new Error("gateways locked");_7=e}static createGetUrlFunc(e){return Dee(e)}static createDataGateway(){return Mee}static createIpfsGatewayFunc(e){return Lee(e)}};g0=new WeakMap,m0=new WeakMap,dc=new WeakMap,Su=new WeakMap,y0=new WeakMap,w0=new WeakMap,as=new WeakMap,Oo=new WeakMap,xu=new WeakMap,jp=new WeakMap,Wp=new WeakMap,zp=new WeakMap,cl=new WeakMap,hc=new WeakMap,ph=new WeakMap,Hp=new WeakSet,Fv=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,hc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(A7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await sWe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in KA){const f=await KA[a](o.url,YA(_(s,cl)));if(f instanceof cf){let p=f;if(this.processFunc){YA(_(s,cl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,YA(_(s,cl)));let l=new cf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return de(u=o.redirect(f),Hp,Fv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,hc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),de(d=o.clone(),Hp,Fv).call(d,e+1,n,p,s,l)}if(this.processFunc){YA(_(s,cl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,hc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),de(h=o.clone(),Hp,Fv).call(h,e+1,n,p,s,l)}}return l};let _f=HI;var m_,y_,w_,ko,b0,Gp;const yB=class yB{constructor(e,n,r,s,i){Y(this,m_);Y(this,y_);Y(this,w_);Y(this,ko);Y(this,b0);Y(this,Gp);L(this,m_,e),L(this,y_,n),L(this,w_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,ko,s==null?null:new Uint8Array(s)),L(this,b0,i||null),L(this,Gp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,ko)?Oe(_(this,ko)):"null"}>`}get statusCode(){return _(this,m_)}get statusMessage(){return _(this,y_)}get headers(){return Object.assign({},_(this,w_))}get body(){return _(this,ko)==null?null:new Uint8Array(_(this,ko))}get bodyText(){try{return _(this,ko)==null?"":OI(_(this,ko))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new yB(599,r,this.headers,this.body,_(this,b0)||void 0);return L(s,Gp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Z(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw bt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,ko)!=null}get request(){return _(this,b0)}ok(){return _(this,Gp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Gp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,ko)&&(s=OI(_(this,ko)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};m_=new WeakMap,y_=new WeakMap,w_=new WeakMap,ko=new WeakMap,b0=new WeakMap,Gp=new WeakMap;let cf=yB;function A7(){return new Date().getTime()}function rWe(t){return Zu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function sWe(t){return new Promise(e=>setTimeout(e,t))}function iWe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function S7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function x7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Bee(t,n);s.push(i.result),n+=i.consumed,ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Bee(t,e){ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=S7(t,e+1,r);return n(e+1+r+s),x7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),x7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=S7(t,e+1,r);n(e+1+r+s);const i=Oe(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Oe(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:iWe(t[e])}}function S1(t){const e=Vt(t,"data"),n=Bee(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function I7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function $ee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat($ee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=I7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Vt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=I7(e.length);return n.unshift(183+n.length),n.concat(e)}const N7="0123456789abcdef";function Af(t){let e="0x";for(const n of $ee(t))e+=N7[n>>4],e+=N7[n&15];return e}const Ei=32,t5=new Uint8Array(Ei),oWe=["then"],QA={},Fee=new WeakMap;function lp(t){return Fee.get(t)}function T7(t,e){Fee.set(t,e)}function wv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function n5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Uw?n5(lp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Uw&&(o=n5(lp(o),o,n)),r[s]=o),r},{})}var v0;const Oy=class Oy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==QA&&(s=n,i=[],o=!1);super(s.length);Y(this,v0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(T7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,v0,[]),_(this,v0)==null&&_(this,v0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Kt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&wv(`index ${f}`,p),p}if(oWe.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return T7(c,lp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&wv(`index ${i}`,s),n&&s instanceof Oy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=lp(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),n5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=lp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Oy(QA,i,o)}filter(n,r){const s=lp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&wv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Oy(QA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&wv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=lp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&wv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Oy(QA,n,r)}};v0=new WeakMap;let Uw=Oy;function R7(t){let e=Zr(t);return ye(e.length<=Ei,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ei,offset:e.length}),e.length!==Ei&&(e=wi(Ir([t5.slice(e.length%Ei),e]))),e}class bd{constructor(e,n,r,s){re(this,"name");re(this,"type");re(this,"localName");re(this,"dynamic");bt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Z(!1,e,this.localName,n)}}var Iu,qp,E0,WS;class r5{constructor(){Y(this,E0);Y(this,Iu);Y(this,qp);L(this,Iu,[]),L(this,qp,0)}get data(){return Ir(_(this,Iu))}get length(){return _(this,qp)}appendWriter(e){return de(this,E0,WS).call(this,wi(e.data))}writeBytes(e){let n=wi(e);const r=n.length%Ei;return r&&(n=wi(Ir([n,t5.slice(r)]))),de(this,E0,WS).call(this,n)}writeValue(e){return de(this,E0,WS).call(this,R7(e))}writeUpdatableValue(){const e=_(this,Iu).length;return _(this,Iu).push(t5),L(this,qp,_(this,qp)+Ei),n=>{_(this,Iu)[e]=R7(n)}}}Iu=new WeakMap,qp=new WeakMap,E0=new WeakSet,WS=function(e){return _(this,Iu).push(e),L(this,qp,_(this,qp)+e.length),e.length};var qi,Do,Vp,Kp,gh,Yg,i5,jee;const wB=class wB{constructor(e,n,r){Y(this,Yg);re(this,"allowLoose");Y(this,qi);Y(this,Do);Y(this,Vp);Y(this,Kp);Y(this,gh);bt(this,{allowLoose:!!n}),L(this,qi,wi(e)),L(this,Vp,0),L(this,Kp,null),L(this,gh,r??1024),L(this,Do,0)}get data(){return Oe(_(this,qi))}get dataLength(){return _(this,qi).length}get consumed(){return _(this,Do)}get bytes(){return new Uint8Array(_(this,qi))}subReader(e){const n=new wB(_(this,qi).slice(_(this,Do)+e),this.allowLoose,_(this,gh));return L(n,Kp,this),n}readBytes(e,n){let r=de(this,Yg,jee).call(this,0,e,!!n);return de(this,Yg,i5).call(this,e),L(this,Do,_(this,Do)+r.length),r.slice(0,e)}readValue(){return ZU(this.readBytes(Ei))}readIndex(){return z7e(this.readBytes(Ei))}};qi=new WeakMap,Do=new WeakMap,Vp=new WeakMap,Kp=new WeakMap,gh=new WeakMap,Yg=new WeakSet,i5=function(e){var n;if(_(this,Kp))return de(n=_(this,Kp),Yg,i5).call(n,e);L(this,Vp,_(this,Vp)+e),ye(_(this,gh)<1||_(this,Vp)<=_(this,gh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,gh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:wi(_(this,qi)),offset:_(this,Do),length:e,info:{bytesRead:_(this,Vp),dataLength:this.dataLength}})},jee=function(e,n,r){let s=Math.ceil(n/Ei)*Ei;return _(this,Do)+s>_(this,qi).length&&(this.allowLoose&&r&&_(this,Do)+n<=_(this,qi).length?s=n:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:wi(_(this,qi)),length:_(this,qi).length,offset:_(this,Do)+s})),_(this,qi).slice(_(this,Do),_(this,Do)+s)};let s5=wB;function kI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function XU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function aWe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");kI(t.outputLen),kI(t.blockLen)}function Bw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Wee(t,e){XU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const JO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zee=t=>t instanceof Uint8Array,cWe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ZO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Xc=(t,e)=>t<<32-e|t>>>e,lWe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lWe)throw new Error("Non little-endian hardware is not supported");function uWe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function jT(t){if(typeof t=="string"&&(t=uWe(t)),!zee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function dWe(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!zee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class eB{clone(){return this._cloneInto()}}function tB(t){const e=r=>t().update(jT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function hWe(t=32){if(JO&&typeof JO.getRandomValues=="function")return JO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Hee extends eB{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,aWe(e);const r=jT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Bw(this),this.iHash.update(e),this}digestInto(e){Bw(this),XU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gee=(t,e,n)=>new Hee(t,e).update(n).digest();Gee.create=(t,e)=>new Hee(t,e);function fWe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class qee extends eB{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ZO(this.buffer)}update(e){Bw(this);const{view:n,buffer:r,blockLen:s}=this;e=jT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ZO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bw(this),Wee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;fWe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=ZO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const pWe=(t,e,n)=>t&e^~t&n,gWe=(t,e,n)=>t&e^t&n^e&n,mWe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$d=new Uint32Array(64);class yWe extends qee{constructor(){super(64,32,8,!1),this.A=Bd[0]|0,this.B=Bd[1]|0,this.C=Bd[2]|0,this.D=Bd[3]|0,this.E=Bd[4]|0,this.F=Bd[5]|0,this.G=Bd[6]|0,this.H=Bd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)$d[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=$d[d-15],f=$d[d-2],p=Xc(h,7)^Xc(h,18)^h>>>3,g=Xc(f,17)^Xc(f,19)^f>>>10;$d[d]=g+$d[d-7]+p+$d[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Xc(a,6)^Xc(a,11)^Xc(a,25),f=u+h+pWe(a,c,l)+mWe[d]+$d[d]|0,g=(Xc(r,2)^Xc(r,13)^Xc(r,22))+gWe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){$d.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Vee=tB(()=>new yWe),JA=BigInt(2**32-1),o5=BigInt(32);function Kee(t,e=!1){return e?{h:Number(t&JA),l:Number(t>>o5&JA)}:{h:Number(t>>o5&JA)|0,l:Number(t&JA)|0}}function Yee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Kee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const wWe=(t,e)=>BigInt(t>>>0)<<o5|BigInt(e>>>0),bWe=(t,e,n)=>t>>>n,vWe=(t,e,n)=>t<<32-n|e>>>n,EWe=(t,e,n)=>t>>>n|e<<32-n,CWe=(t,e,n)=>t<<32-n|e>>>n,_We=(t,e,n)=>t<<64-n|e>>>n-32,AWe=(t,e,n)=>t>>>n-32|e<<64-n,SWe=(t,e)=>e,xWe=(t,e)=>t,Qee=(t,e,n)=>t<<n|e>>>32-n,Jee=(t,e,n)=>e<<n|t>>>32-n,Zee=(t,e,n)=>e<<n-32|t>>>64-n,Xee=(t,e,n)=>t<<n-32|e>>>64-n;function IWe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const NWe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),TWe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,RWe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),PWe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,OWe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),kWe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,$t={fromBig:Kee,split:Yee,toBig:wWe,shrSH:bWe,shrSL:vWe,rotrSH:EWe,rotrSL:CWe,rotrBH:_We,rotrBL:AWe,rotr32H:SWe,rotr32L:xWe,rotlSH:Qee,rotlSL:Jee,rotlBH:Zee,rotlBL:Xee,add:IWe,add3L:NWe,add3H:TWe,add4L:RWe,add4H:PWe,add5H:kWe,add5L:OWe},[DWe,MWe]=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Fd=new Uint32Array(80),jd=new Uint32Array(80);class LWe extends qee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Fd[v]=e.getUint32(n),jd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Fd[v-15]|0,C=jd[v-15]|0,T=$t.rotrSH(A,C,1)^$t.rotrSH(A,C,8)^$t.shrSH(A,C,7),x=$t.rotrSL(A,C,1)^$t.rotrSL(A,C,8)^$t.shrSL(A,C,7),N=Fd[v-2]|0,S=jd[v-2]|0,D=$t.rotrSH(N,S,19)^$t.rotrBH(N,S,61)^$t.shrSH(N,S,6),P=$t.rotrSL(N,S,19)^$t.rotrBL(N,S,61)^$t.shrSL(N,S,6),$=$t.add4L(x,P,jd[v-7],jd[v-16]),G=$t.add4H($,T,D,Fd[v-7],Fd[v-16]);Fd[v]=G|0,jd[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=$t.rotrSH(d,h,14)^$t.rotrSH(d,h,18)^$t.rotrBH(d,h,41),C=$t.rotrSL(d,h,14)^$t.rotrSL(d,h,18)^$t.rotrBL(d,h,41),T=d&f^~d&g,x=h&p^~h&w,N=$t.add5L(b,C,x,MWe[v],jd[v]),S=$t.add5H(N,m,A,T,DWe[v],Fd[v]),D=N|0,P=$t.rotrSH(r,s,28)^$t.rotrBH(r,s,34)^$t.rotrBH(r,s,39),$=$t.rotrSL(r,s,28)^$t.rotrBL(r,s,34)^$t.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=$t.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=$t.add3L(D,$,W);r=$t.add3H(I,S,P,G),s=I|0}({h:r,l:s}=$t.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=$t.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=$t.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=$t.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=$t.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=$t.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=$t.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:m,l:b}=$t.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,m,b)}roundClean(){Fd.fill(0),jd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const UWe=tB(()=>new LWe);function BWe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const P7=BWe();P7.crypto||P7.msCrypto;function $We(t){switch(t){case"sha256":return Vee.create();case"sha512":return UWe.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}const[ete,tte,nte]=[[],[],[]],FWe=BigInt(0),bv=BigInt(1),jWe=BigInt(2),WWe=BigInt(7),zWe=BigInt(256),HWe=BigInt(113);for(let t=0,e=bv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ete.push(2*(5*r+n)),tte.push((t+1)*(t+2)/2%64);let s=FWe;for(let i=0;i<7;i++)e=(e<<bv^(e>>WWe)*HWe)%zWe,e&jWe&&(s^=bv<<(bv<<BigInt(i))-bv);nte.push(s)}const[GWe,qWe]=Yee(nte,!0),O7=(t,e,n)=>n>32?Zee(t,e,n):Qee(t,e,n),k7=(t,e,n)=>n>32?Xee(t,e,n):Jee(t,e,n);function VWe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=O7(l,u,1)^n[a],h=k7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=tte[o],c=O7(s,i,a),l=k7(s,i,a),u=ete[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=GWe[r],t[1]^=qWe[r]}n.fill(0)}class nB extends eB{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,kI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=cWe(this.state)}keccak(){VWe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Bw(this);const{blockLen:n,state:r}=this;e=jT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Bw(this,!1),XU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return kI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Wee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new nB(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const KWe=(t,e,n)=>tB(()=>new nB(e,t,n)),YWe=KWe(1,136,256/8);let rte=!1;const ste=function(t){return YWe(t)};let ite=ste;function Fr(t){const e=Vt(t,"data");return Oe(ite(e))}Fr._=ste;Fr.lock=function(){rte=!0};Fr.register=function(t){if(rte)throw new TypeError("keccak256 is locked");ite=t};Object.freeze(Fr);const ote=function(t){return $We("sha256").update(t).digest()};let ate=ote,cte=!1;function Eb(t){const e=Vt(t,"data");return Oe(ate(e))}Eb._=ote;Eb.lock=function(){cte=!0};Eb.register=function(t){if(cte)throw new Error("sha256 is locked");ate=t};Object.freeze(Eb);Object.freeze(Eb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lte=BigInt(0),WT=BigInt(1),QWe=BigInt(2),zT=t=>t instanceof Uint8Array,JWe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $w(t){if(!zT(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=JWe[t[n]];return e}function ute(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function rB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Fw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function gg(t){return rB($w(t))}function sB(t){if(!zT(t))throw new Error("Uint8Array expected");return rB($w(Uint8Array.from(t).reverse()))}function jw(t,e){return Fw(t.toString(16).padStart(e*2,"0"))}function iB(t,e){return jw(t,e).reverse()}function ZWe(t){return Fw(ute(t))}function cc(t,e,n){let r;if(typeof e=="string")try{r=Fw(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(zT(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function t_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!zT(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function XWe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function eze(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function tze(t){let e;for(e=0;t>lte;t>>=WT,e+=1);return e}function nze(t,e){return t>>BigInt(e)&WT}const rze=(t,e,n)=>t|(n?WT:lte)<<BigInt(e),oB=t=>(QWe<<BigInt(t-1))-WT,XO=t=>new Uint8Array(t),D7=t=>Uint8Array.from(t);function dte(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=XO(t),s=XO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=XO())=>{s=a(D7([0]),d),r=a(),d.length!==0&&(s=a(D7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return t_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const sze={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function x1(t,e,n={}){const r=(s,i,o)=>{const a=sze[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const ize=Object.freeze(Object.defineProperty({__proto__:null,bitGet:nze,bitLen:tze,bitMask:oB,bitSet:rze,bytesToHex:$w,bytesToNumberBE:gg,bytesToNumberLE:sB,concatBytes:t_,createHmacDrbg:dte,ensureBytes:cc,equalBytes:XWe,hexToBytes:Fw,hexToNumber:rB,numberToBytesBE:jw,numberToBytesLE:iB,numberToHexUnpadded:ute,numberToVarBytesBE:ZWe,utf8ToBytes:eze,validateObject:x1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bs=BigInt(0),Dr=BigInt(1),up=BigInt(2),oze=BigInt(3),a5=BigInt(4),M7=BigInt(5),L7=BigInt(8);BigInt(9);BigInt(16);function Zi(t,e){const n=t%e;return n>=bs?n:e+n}function aze(t,e,n){if(n<=bs||e<bs)throw new Error("Expected power/modulo > 0");if(n===Dr)return bs;let r=Dr;for(;e>bs;)e&Dr&&(r=r*t%n),t=t*t%n,e>>=Dr;return r}function la(t,e,n){let r=t;for(;e-- >bs;)r*=r,r%=n;return r}function c5(t,e){if(t===bs||e<=bs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Zi(t,e),r=e,s=bs,i=Dr;for(;n!==bs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Dr)throw new Error("invert: does not exist");return Zi(s,e)}function cze(t){const e=(t-Dr)/up;let n,r,s;for(n=t-Dr,r=0;n%up===bs;n/=up,r++);for(s=up;s<t&&aze(s,e,t)!==t-Dr;s++);if(r===1){const o=(t+Dr)/a5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Dr)/up;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Dr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function lze(t){if(t%a5===oze){const e=(t+Dr)/a5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%L7===M7){const e=(t-M7)/L7;return function(r,s){const i=r.mul(s,up),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,up),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return cze(t)}const uze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=uze.reduce((r,s)=>(r[s]="function",r),e);return x1(t,n)}function hze(t,e,n){if(n<bs)throw new Error("Expected power > 0");if(n===bs)return t.ONE;if(n===Dr)return e;let r=t.ONE,s=e;for(;n>bs;)n&Dr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Dr;return r}function fze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function hte(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function pze(t,e,n=!1,r={}){if(t<=bs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=hte(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=lze(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:oB(s),ZERO:bs,ONE:Dr,create:c=>Zi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return bs<=c&&c<t},is0:c=>c===bs,isOdd:c=>(c&Dr)===Dr,neg:c=>Zi(-c,t),eql:(c,l)=>c===l,sqr:c=>Zi(c*c,t),add:(c,l)=>Zi(c+l,t),sub:(c,l)=>Zi(c-l,t),mul:(c,l)=>Zi(c*l,t),pow:(c,l)=>hze(a,c,l),div:(c,l)=>Zi(c*c5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>c5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>fze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?iB(c,i):jw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?sB(c):gg(c)}});return Object.freeze(a)}function fte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function pte(t){const e=fte(t);return e+Math.ceil(e/2)}function gze(t,e,n=!1){const r=t.length,s=fte(e),i=pte(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?gg(t):sB(t),a=Zi(o,e-Dr)+Dr;return n?iB(a,s):jw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mze=BigInt(0),e2=BigInt(1);function yze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>mze;)i&e2&&(o=o.add(a)),a=a.double(),i>>=e2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=e2);const m=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function gte(t){return dze(t.Fp),x1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hte(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wze(t){const e=gte(t);x1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:bze,hexToBytes:vze}=ize,Np={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Np;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:bze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Np,n=typeof t=="string"?vze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Np._parseInt(n.subarray(2)),{d:o,l:a}=Np._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Bu=BigInt(0),Ca=BigInt(1);BigInt(2);const U7=BigInt(3);BigInt(4);function Eze(t){const e=wze(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const m=g.toAffine();return t_(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y:m}});function i(p){const{a:g,b:w}=e,m=n.sqr(p),b=n.mul(m,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Bu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:m,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=$w(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:gg(cc("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Zi(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,m){if(this.px=g,this.py=w,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:w,y:m}=g||{};if(!g||!n.isValid(w)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(m)?d.ZERO:new d(w,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(m=>m.pz));return g.map((m,b)=>m.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(cc("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const m=n.sqr(w),b=i(g);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:m,pz:b}=this,{px:v,py:A,pz:C}=g,T=n.eql(n.mul(w,C),n.mul(v,b)),x=n.eql(n.mul(m,C),n.mul(A,b));return T&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,m=n.mul(w,U7),{px:b,py:v,pz:A}=this;let C=n.ZERO,T=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),D=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),C=n.mul(g,x),T=n.mul(m,D),T=n.add(C,T),C=n.sub(S,T),T=n.add(S,T),T=n.mul(C,T),C=n.mul(P,C),x=n.mul(m,x),D=n.mul(g,D),P=n.sub(N,D),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,D),N=n.mul(N,P),T=n.add(T,N),D=n.mul(v,A),D=n.add(D,D),N=n.mul(D,P),C=n.sub(C,N),x=n.mul(D,S),x=n.add(x,x),x=n.add(x,x),new d(C,T,x)}add(g){u(g);const{px:w,py:m,pz:b}=this,{px:v,py:A,pz:C}=g;let T=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,D=n.mul(e.b,U7);let P=n.mul(w,v),$=n.mul(m,A),G=n.mul(b,C),W=n.add(w,m),I=n.add(v,A);W=n.mul(W,I),I=n.add(P,$),W=n.sub(W,I),I=n.add(w,b);let R=n.add(v,C);return I=n.mul(I,R),R=n.add(P,G),I=n.sub(I,R),R=n.add(m,b),T=n.add(A,C),R=n.mul(R,T),T=n.add($,G),R=n.sub(R,T),N=n.mul(S,I),T=n.mul(D,G),N=n.add(T,N),T=n.sub($,N),N=n.add($,N),x=n.mul(T,N),$=n.add(P,P),$=n.add($,P),G=n.mul(S,G),I=n.mul(D,I),$=n.add($,G),G=n.sub(P,G),G=n.mul(S,G),I=n.add(I,G),P=n.mul($,I),x=n.add(x,P),P=n.mul(R,I),T=n.mul(W,T),T=n.sub(T,P),P=n.mul(W,$),N=n.mul(R,N),N=n.add(N,P),new d(T,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const m=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Bu)return w;if(a(g),g===Ca)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:C}=m.splitScalar(g),T=w,x=w,N=this;for(;v>Bu||C>Bu;)v&Ca&&(T=T.add(N)),C&Ca&&(x=x.add(N)),N=N.double(),v>>=Ca,C>>=Ca;return b&&(T=T.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),T.add(x)}multiply(g){a(g);let w=g,m,b;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:T,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(C),{p:D,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),D=f.constTimeNegate(T,D),D=new d(n.mul(D.px,v.beta),D.py,D.pz),m=N.add(D),b=S.add(P)}else{const{p:A,f:C}=this.wNAF(w);m=A,b=C}return d.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(g,w,m){const b=d.BASE,v=(C,T)=>T===Bu||T===Ca||!C.equals(b)?C.multiplyUnsafe(T):C.multiply(T),A=v(this,w).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:w,py:m,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),C=n.mul(m,g),T=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Ca)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Ca?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return $w(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=yze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Cze(t){const e=gte(t);return x1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function _ze(t){const e=Cze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Bu<I&&I<n.ORDER}function a(I){return Zi(I,r)}function c(I){return c5(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=Eze({...e,toBytes(I,R,B){const O=R.toAffine(),M=n.toBytes(O.x),j=t_;return B?j(Uint8Array.from([R.hasEvenY()?2:3]),M):j(Uint8Array.from([4]),M,n.toBytes(O.y))},fromBytes(I){const R=I.length,B=I[0],O=I.subarray(1);if(R===s&&(B===2||B===3)){const M=gg(O);if(!o(M))throw new Error("Point is not on curve");const j=d(M);let V=n.sqrt(j);const se=(V&Ca)===Ca;return(B&1)===1!==se&&(V=n.neg(V)),{x:M,y:V}}else if(R===i&&B===4){const M=n.fromBytes(O.subarray(0,n.BYTES)),j=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:M,y:j}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>$w(jw(I,e.nByteLength));function p(I){const R=r>>Ca;return I>R}function g(I){return p(I)?a(-I):I}const w=(I,R,B)=>gg(I.slice(R,B));class m{constructor(R,B,O){this.r=R,this.s=B,this.recovery=O,this.assertValidity()}static fromCompact(R){const B=e.nByteLength;return R=cc("compactSignature",R,B*2),new m(w(R,0,B),w(R,B,2*B))}static fromDER(R){const{r:B,s:O}=Np.toSig(cc("DER",R));return new m(B,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new m(this.r,this.s,R)}recoverPublicKey(R){const{r:B,s:O,recovery:M}=this,j=x(cc("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const V=M===2||M===3?B+e.n:B;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=M&1?"03":"02",ie=l.fromHex(se+f(V)),Q=c(V),te=a(-j*Q),pe=a(O*Q),Ze=l.BASE.multiplyAndAddUnsafe(ie,te,pe);if(!Ze)throw new Error("point at infinify");return Ze.assertValidity(),Ze}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Fw(this.toDERHex())}toDERHex(){return Np.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fw(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=pte(e.n);return gze(e.randomBytes(I),e.n)},precompute(I=8,R=l.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}};function v(I,R=!0){return l.fromPrivateKey(I).toRawBytes(R)}function A(I){const R=I instanceof Uint8Array,B=typeof I=="string",O=(R||B)&&I.length;return R?O===s||O===i:B?O===2*s||O===2*i:I instanceof l}function C(I,R,B=!0){if(A(I))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(I)).toRawBytes(B)}const T=e.bits2int||function(I){const R=gg(I),B=I.length*8-e.nBitLength;return B>0?R>>BigInt(B):R},x=e.bits2int_modN||function(I){return a(T(I))},N=oB(e.nBitLength);function S(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Bu<=I&&I<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return jw(I,e.nByteLength)}function D(I,R,B=P){if(["recovered","canonical"].some(We=>We in B))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:M}=e;let{lowS:j,prehash:V,extraEntropy:se}=B;j==null&&(j=!0),I=cc("msgHash",I),V&&(I=cc("prehashed msgHash",O(I)));const ie=x(I),Q=u(R),te=[S(Q),S(ie)];if(se!=null){const We=se===!0?M(n.BYTES):se;te.push(cc("extraEntropy",We))}const pe=t_(...te),Ze=ie;function Xe(We){const mt=T(We);if(!h(mt))return;const Ot=c(mt),ln=l.BASE.multiply(mt).toAffine(),X=a(ln.x);if(X===Bu)return;const ce=a(Ot*a(Ze+X*Q));if(ce===Bu)return;let he=(ln.x===X?0:2)|Number(ln.y&Ca),me=ce;return j&&p(ce)&&(me=g(ce),he^=1),new m(X,me,he)}return{seed:pe,k2sig:Xe}}const P={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function G(I,R,B=P){const{seed:O,k2sig:M}=D(I,R,B),j=e;return dte(j.hash.outputLen,j.nByteLength,j.hmac)(O,M)}l.BASE._setWindowSize(8);function W(I,R,B,O=$){var ln;const M=I;if(R=cc("msgHash",R),B=cc("publicKey",B),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:V}=O;let se,ie;try{if(typeof M=="string"||M instanceof Uint8Array)try{se=m.fromDER(M)}catch(X){if(!(X instanceof Np.Err))throw X;se=m.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:X,s:ce}=M;se=new m(X,ce)}else throw new Error("PARSE");ie=l.fromHex(B)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&se.hasHighS())return!1;V&&(R=e.hash(R));const{r:Q,s:te}=se,pe=x(R),Ze=c(te),Xe=a(pe*Ze),We=a(Q*Ze),mt=(ln=l.BASE.multiplyAndAddUnsafe(ie,Xe,We))==null?void 0:ln.toAffine();return mt?a(mt.x)===Q:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Aze(t){return{hash:t,hmac:(e,...n)=>Gee(t,e,dWe(...n)),randomBytes:hWe}}function Sze(t,e){const n=r=>_ze({...t,...Aze(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mte=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),B7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xze=BigInt(1),l5=BigInt(2),$7=(t,e)=>(t+e/l5)/e;function Ize(t){const e=mte,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=la(u,n,e)*u%e,h=la(d,n,e)*u%e,f=la(h,l5,e)*l%e,p=la(f,s,e)*f%e,g=la(p,i,e)*p%e,w=la(g,a,e)*g%e,m=la(w,c,e)*w%e,b=la(m,a,e)*g%e,v=la(b,n,e)*u%e,A=la(v,o,e)*p%e,C=la(A,r,e)*l%e,T=la(C,l5,e);if(!u5.eql(u5.sqr(T),t))throw new Error("Cannot find square root");return T}const u5=pze(mte,void 0,void 0,{sqrt:Ize}),Gd=Sze({a:BigInt(0),b:BigInt(7),Fp:u5,n:B7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=B7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-xze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=$7(i*t,e),c=$7(-r*t,e);let l=Zi(t-a*n-c*s,e),u=Zi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Vee);BigInt(0);Gd.ProjectivePoint;const n_="0x0000000000000000000000000000000000000000",F7="0x0000000000000000000000000000000000000000000000000000000000000000",j7=BigInt(0),W7=BigInt(1),z7=BigInt(2),H7=BigInt(27),G7=BigInt(28),ZA=BigInt(35),ty={};function q7(t){return dd(Zr(t),32)}var C0,ll,_0,Yp;const ic=class ic{constructor(e,n,r,s){Y(this,C0);Y(this,ll);Y(this,_0);Y(this,Yp);BT(e,ty,"Signature"),L(this,C0,n),L(this,ll,r),L(this,_0,s),L(this,Yp,null)}get r(){return _(this,C0)}set r(e){Z(Zy(e)===32,"invalid r","value",e),L(this,C0,Oe(e))}get s(){return Z(parseInt(_(this,ll).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,ll)),_(this,ll)}set s(e){Z(Zy(e)===32,"invalid s","value",e),L(this,ll,Oe(e))}get _s(){return _(this,ll)}isValid(){return parseInt(_(this,ll).substring(0,3))<8}get v(){return _(this,_0)}set v(e){const n=Kt(e,"value");Z(n===27||n===28,"invalid v","v",e),L(this,_0,n)}get networkV(){return _(this,Yp)}get legacyChainId(){const e=this.networkV;return e==null?null:ic.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Vt(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return Ir([this.r,this.yParityAndS])}get serialized(){return Ir([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new ic(ty,this.r,this._s,this.v);return this.networkV&&L(e,Yp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ye(e,"v");return n==H7||n==G7?j7:(Z(n>=ZA,"invalid EIP-155 v","v",e),(n-ZA)/z7)}static getChainIdV(e,n){return Ye(e)*z7+BigInt(35+n-27)}static getNormalizedV(e){const n=Ye(e);return n===j7||n===H7?27:n===W7||n===G7?28:(Z(n>=ZA,"invalid v","v",e),n&W7?27:28)}static from(e){function n(l,u){Z(l,u,"signature",e)}if(e==null)return new ic(ty,F7,F7,27);if(typeof e=="string"){const l=Vt(e,"signature");if(l.length===64){const u=Oe(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new ic(ty,u,Oe(d),h)}if(l.length===65){const u=Oe(l.slice(0,32)),d=Oe(l.slice(32,64)),h=ic.getNormalizedV(l[64]);return new ic(ty,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof ic)return e.clone();const r=e.r;n(r!=null,"missing r");const s=q7(r),i=function(l,u){if(l!=null)return q7(l);if(u!=null){n(tr(u,32),"invalid yParityAndS");const d=Vt(u);return d[0]&=127,Oe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ye(l);return{networkV:h>=ZA?h:void 0,v:ic.getNormalizedV(h)}}if(u!=null)return n(tr(u,32),"invalid yParityAndS"),{v:Vt(u)[0]&128?28:27};if(d!=null){switch(Kt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new ic(ty,s,i,a);return o&&L(c,Yp,o),n(e.yParity==null||Kt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};C0=new WeakMap,ll=new WeakMap,_0=new WeakMap,Yp=new WeakMap;let ho=ic;var Nu;const dp=class dp{constructor(e){Y(this,Nu);Z(Zy(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,Nu,Oe(e))}get privateKey(){return _(this,Nu)}get publicKey(){return dp.computePublicKey(_(this,Nu))}get compressedPublicKey(){return dp.computePublicKey(_(this,Nu),!0)}sign(e){Z(Zy(e)===32,"invalid digest length","digest",e);const n=Gd.sign(wi(e),wi(_(this,Nu)),{lowS:!0});return ho.from({r:Cf(n.r,32),s:Cf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=dp.computePublicKey(e);return Oe(Gd.getSharedSecret(wi(_(this,Nu)),Vt(n),!1))}static computePublicKey(e,n){let r=Vt(e,"key");if(r.length===32){const i=Gd.getPublicKey(r,!!n);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Gd.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(n))}static recoverPublicKey(e,n){Z(Zy(e)===32,"invalid digest length","digest",e);const r=ho.from(n);let s=Gd.Signature.fromCompact(wi(Ir([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(wi(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Gd.ProjectivePoint.fromHex(dp.computePublicKey(e).substring(2)),i=Gd.ProjectivePoint.fromHex(dp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Nu=new WeakMap;let r_=dp;const Nze=BigInt(0),Tze=BigInt(36);function V7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Vt(Fr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const aB={};for(let t=0;t<10;t++)aB[String(t)]=String(t);for(let t=0;t<26;t++)aB[String.fromCharCode(65+t)]=String(10+t);const K7=15;function Rze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>aB[r]).join("");for(;e.length>=K7;){let r=e.substring(0,K7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Pze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Oze(t){t=t.toLowerCase();let e=Nze;for(let n=0;n<t.length;n++)e=e*Tze+Pze[t[n]];return e}function xn(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=V7(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===Rze(t),"bad icap checksum","address",t);let e=Oze(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return V7("0x"+e)}Z(!1,"invalid address","address",t)}function kze(t){const e=xn(t.from);let r=Ye(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(_r(Fr(Af([e,r])),12))}function yte(t){return t&&typeof t.getAddress=="function"}async function t2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function Ci(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),t2(t,e.resolveName(t)));if(yte(t))return t2(t,t.getAddress());if(t&&typeof t.then=="function")return t2(t,t);Z(!1,"unsupported addressable value","target",t)}const yu={};function ze(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ni(yu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function gn(t,e){return new ni(yu,`bytes${e||""}`,t,{size:e})}const Y7=Symbol.for("_ethers_typed");var Qp;const wu=class wu{constructor(e,n,r,s){re(this,"type");re(this,"value");Y(this,Qp);re(this,"_typedSymbol");s==null&&(s=null),BT(yu,e,"Typed"),bt(this,{_typedSymbol:Y7,type:n,value:r}),L(this,Qp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,Qp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,Qp)===!0?-1:_(this,Qp)===!1?this.value.length:null}static from(e,n){return new wu(yu,e,n)}static uint8(e){return ze(e,8)}static uint16(e){return ze(e,16)}static uint24(e){return ze(e,24)}static uint32(e){return ze(e,32)}static uint40(e){return ze(e,40)}static uint48(e){return ze(e,48)}static uint56(e){return ze(e,56)}static uint64(e){return ze(e,64)}static uint72(e){return ze(e,72)}static uint80(e){return ze(e,80)}static uint88(e){return ze(e,88)}static uint96(e){return ze(e,96)}static uint104(e){return ze(e,104)}static uint112(e){return ze(e,112)}static uint120(e){return ze(e,120)}static uint128(e){return ze(e,128)}static uint136(e){return ze(e,136)}static uint144(e){return ze(e,144)}static uint152(e){return ze(e,152)}static uint160(e){return ze(e,160)}static uint168(e){return ze(e,168)}static uint176(e){return ze(e,176)}static uint184(e){return ze(e,184)}static uint192(e){return ze(e,192)}static uint200(e){return ze(e,200)}static uint208(e){return ze(e,208)}static uint216(e){return ze(e,216)}static uint224(e){return ze(e,224)}static uint232(e){return ze(e,232)}static uint240(e){return ze(e,240)}static uint248(e){return ze(e,248)}static uint256(e){return ze(e,256)}static uint(e){return ze(e,256)}static int8(e){return ze(e,-8)}static int16(e){return ze(e,-16)}static int24(e){return ze(e,-24)}static int32(e){return ze(e,-32)}static int40(e){return ze(e,-40)}static int48(e){return ze(e,-48)}static int56(e){return ze(e,-56)}static int64(e){return ze(e,-64)}static int72(e){return ze(e,-72)}static int80(e){return ze(e,-80)}static int88(e){return ze(e,-88)}static int96(e){return ze(e,-96)}static int104(e){return ze(e,-104)}static int112(e){return ze(e,-112)}static int120(e){return ze(e,-120)}static int128(e){return ze(e,-128)}static int136(e){return ze(e,-136)}static int144(e){return ze(e,-144)}static int152(e){return ze(e,-152)}static int160(e){return ze(e,-160)}static int168(e){return ze(e,-168)}static int176(e){return ze(e,-176)}static int184(e){return ze(e,-184)}static int192(e){return ze(e,-192)}static int200(e){return ze(e,-200)}static int208(e){return ze(e,-208)}static int216(e){return ze(e,-216)}static int224(e){return ze(e,-224)}static int232(e){return ze(e,-232)}static int240(e){return ze(e,-240)}static int248(e){return ze(e,-248)}static int256(e){return ze(e,-256)}static int(e){return ze(e,-256)}static bytes1(e){return gn(e,1)}static bytes2(e){return gn(e,2)}static bytes3(e){return gn(e,3)}static bytes4(e){return gn(e,4)}static bytes5(e){return gn(e,5)}static bytes6(e){return gn(e,6)}static bytes7(e){return gn(e,7)}static bytes8(e){return gn(e,8)}static bytes9(e){return gn(e,9)}static bytes10(e){return gn(e,10)}static bytes11(e){return gn(e,11)}static bytes12(e){return gn(e,12)}static bytes13(e){return gn(e,13)}static bytes14(e){return gn(e,14)}static bytes15(e){return gn(e,15)}static bytes16(e){return gn(e,16)}static bytes17(e){return gn(e,17)}static bytes18(e){return gn(e,18)}static bytes19(e){return gn(e,19)}static bytes20(e){return gn(e,20)}static bytes21(e){return gn(e,21)}static bytes22(e){return gn(e,22)}static bytes23(e){return gn(e,23)}static bytes24(e){return gn(e,24)}static bytes25(e){return gn(e,25)}static bytes26(e){return gn(e,26)}static bytes27(e){return gn(e,27)}static bytes28(e){return gn(e,28)}static bytes29(e){return gn(e,29)}static bytes30(e){return gn(e,30)}static bytes31(e){return gn(e,31)}static bytes32(e){return gn(e,32)}static address(e){return new wu(yu,"address",e)}static bool(e){return new wu(yu,"bool",!!e)}static bytes(e){return new wu(yu,"bytes",e)}static string(e){return new wu(yu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new wu(yu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Y7}static dereference(e,n){if(wu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Qp=new WeakMap;let ni=wu;class Dze extends bd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ni.dereference(n,"string");try{r=xn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return xn(Cf(e.readValue(),20))}}class Mze extends bd{constructor(n){super(n.name,n.type,"_",n.dynamic);re(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function wte(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Z(!1,"invalid tuple value","tuple",n);Z(e.length===r.length,"types/value length mismatch","tuple",n);let s=new r5,i=new r5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function bte(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(ks(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(ks(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Uw.fromItems(n,r)}class Lze extends bd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);re(this,"coder");re(this,"length");bt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ni.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Nee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return wte(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ye(r*Ei<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Ei,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Mze(this.coder));return bte(n,s)}}class Uze extends bd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ni.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class vte extends bd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=wi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Bze extends vte{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class $ze extends bd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);re(this,"size");bt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=wi(ni.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Oe(n.readBytes(this.size))}}const Fze=new Uint8Array([]);class jze extends bd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Fze)}decode(e){return e.readBytes(0),null}}const Wze=BigInt(0),zze=BigInt(1),Hze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Gze extends bd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);re(this,"size");re(this,"signed");bt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ye(ni.dereference(r,this.type)),i=$v(Hze,Ei*8);if(this.signed){let o=$v(i,this.size*8-1);(s>o||s<-(o+zze))&&this._throwError("value out-of-bounds",r),s=Pee(s,8*Ei)}else(s<Wze||s>$v(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=$v(n.readValue(),this.size*8);return this.signed&&(r=W7e(r,this.size*8)),r}}class qze extends vte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Zu(ni.dereference(n,"string")))}decode(e){return OI(super.decode(e))}}class XA extends bd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);re(this,"coders");bt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ni.dereference(r,"tuple");return wte(n,this.coders,s)}decode(n){return bte(n,this.coders)}}function n2(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(Z(tr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function mm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${r}]`,n),n2(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),n2(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return n2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Ete(t){return{address:xn(t.address),nonce:Ye(t.nonce!=null?t.nonce:0),chainId:Ye(t.chainId!=null?t.chainId:0),signature:ho.from(t.signature)}}function Vze(t){let e;return typeof t=="string"?e=r_.computePublicKey(t,!1):e=t.publicKey,xn(Fr("0x"+e.substring(4)).substring(26))}function Kze(t,e){return Vze(r_.recoverPublicKey(t,e))}const hs=BigInt(0),Yze=BigInt(2),Qze=BigInt(27),Jze=BigInt(28),Zze=BigInt(35),Xze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r2=4096*32;function eHe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Vt(t.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Vt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Vt(t.blobToKZGCommitment(Oe(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Vt(t.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Vt(t.computeBlobKZGProof(Oe(r),Oe(s)));Z(!1,"unsupported KZG library","kzg",t)}}}function Q7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Eb(e).substring(4),"0x"+n}function Cb(t){return t==="0x"?null:xn(t)}function HT(t,e){try{return mm(t)}catch(n){Z(!1,n.message,e,t)}}function tHe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Cb(s[1]),nonce:Fn(s[2],"nonce"),chainId:Fn(s[0],"chainId"),signature:ho.from({yParity:ym(s[3],"yParity"),r:dd(s[4],32),s:dd(s[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function ym(t,e){return t==="0x"?0:Kt(t,e)}function Fn(t,e){if(t==="0x")return hs;const n=Ye(t,e);return Z(n<=Xze,"value exceeds uint size",e,n),n}function tn(t,e){const n=Ye(t,"value"),r=Zr(n);return Z(r.length<=32,"value too large",`tx.${e}`,n),r}function GT(t){return mm(t).map(e=>[e.address,e.storageKeys])}function nHe(t){return t.map(e=>[tn(e.chainId,"chainId"),e.address,tn(e.nonce,"nonce"),tn(e.signature.yParity,"yParity"),Zr(e.signature.r),Zr(e.signature.s)])}function rHe(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(tr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function sHe(t){const e=S1(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ym(e[0],"nonce"),gasPrice:Fn(e[1],"gasPrice"),gasLimit:Fn(e[2],"gasLimit"),to:Cb(e[3]),value:Fn(e[4],"value"),data:Oe(e[5]),chainId:hs};if(e.length===6)return n;const r=Fn(e[6],"v"),s=Fn(e[7],"r"),i=Fn(e[8],"s");if(s===hs&&i===hs)n.chainId=r;else{let o=(r-Zze)/Yze;o<hs&&(o=hs),n.chainId=o,Z(o!==hs||r===Qze||r===Jze,"non-canonical legacy v","v",e[6]),n.signature=ho.from({r:dd(e[7],32),s:dd(e[8],32),v:r})}return n}function iHe(t,e){const n=[tn(t.nonce,"nonce"),tn(t.gasPrice||0,"gasPrice"),tn(t.gasLimit,"gasLimit"),t.to||"0x",tn(t.value,"value"),t.data];let r=hs;if(t.chainId!=hs)r=Ye(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==hs&&(n.push(Zr(r)),n.push("0x"),n.push("0x")),Af(n);let s=BigInt(27+e.yParity);return r!==hs?s=ho.getChainIdV(r,e.v):BigInt(e.v)!==s&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Zr(s)),n.push(Zr(e.r)),n.push(Zr(e.s)),Af(n)}function qT(t,e){let n;try{if(n=ym(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=dd(e[1],32),s=dd(e[2],32),i=ho.from({r,s,yParity:n});t.signature=i}function oHe(t){const e=S1(Vt(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(t));const n={type:2,chainId:Fn(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Cb(e[5]),value:Fn(e[6],"value"),data:Oe(e[7]),accessList:HT(e[8],"accessList")};return e.length===9||qT(n,e.slice(9)),n}function aHe(t,e){const n=[tn(t.chainId,"chainId"),tn(t.nonce,"nonce"),tn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tn(t.maxFeePerGas||0,"maxFeePerGas"),tn(t.gasLimit,"gasLimit"),t.to||"0x",tn(t.value,"value"),t.data,GT(t.accessList||[])];return e&&(n.push(tn(e.yParity,"yParity")),n.push(Zr(e.r)),n.push(Zr(e.s))),Ir(["0x02",Af(n)])}function cHe(t){const e=S1(Vt(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(t));const n={type:1,chainId:Fn(e[0],"chainId"),nonce:ym(e[1],"nonce"),gasPrice:Fn(e[2],"gasPrice"),gasLimit:Fn(e[3],"gasLimit"),to:Cb(e[4]),value:Fn(e[5],"value"),data:Oe(e[6]),accessList:HT(e[7],"accessList")};return e.length===8||qT(n,e.slice(8)),n}function lHe(t,e){const n=[tn(t.chainId,"chainId"),tn(t.nonce,"nonce"),tn(t.gasPrice||0,"gasPrice"),tn(t.gasLimit,"gasLimit"),t.to||"0x",tn(t.value,"value"),t.data,GT(t.accessList||[])];return e&&(n.push(tn(e.yParity,"recoveryParam")),n.push(Zr(e.r)),n.push(Zr(e.s))),Ir(["0x01",Af(n)])}function uHe(t){let e=S1(Vt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Oe(t));const s={type:3,chainId:Fn(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Cb(e[5]),value:Fn(e[6],"value"),data:Oe(e[7]),accessList:HT(e[8],"accessList"),maxFeePerBlobGas:Fn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Z(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Z(tr(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||qT(s,e.slice(11)),s}function dHe(t,e,n){const r=[tn(t.chainId,"chainId"),tn(t.nonce,"nonce"),tn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tn(t.maxFeePerGas||0,"maxFeePerGas"),tn(t.gasLimit,"gasLimit"),t.to||n_,tn(t.value,"value"),t.data,GT(t.accessList||[]),tn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),rHe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(tn(e.yParity,"yParity")),r.push(Zr(e.r)),r.push(Zr(e.s)),n)?Ir(["0x03",Af([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Ir(["0x03",Af(r)])}function hHe(t){const e=S1(Vt(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(t));const n={type:4,chainId:Fn(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Cb(e[5]),value:Fn(e[6],"value"),data:Oe(e[7]),accessList:HT(e[8],"accessList"),authorizationList:tHe(e[9],"authorizationList")};return e.length===10||qT(n,e.slice(10)),n}function fHe(t,e){const n=[tn(t.chainId,"chainId"),tn(t.nonce,"nonce"),tn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tn(t.maxFeePerGas||0,"maxFeePerGas"),tn(t.gasLimit,"gasLimit"),t.to||"0x",tn(t.value,"value"),t.data,GT(t.accessList||[]),nHe(t.authorizationList||[])];return e&&(n.push(tn(e.yParity,"yParity")),n.push(Zr(e.r)),n.push(Zr(e.s))),Ir(["0x04",Af(n)])}var fc,A0,S0,x0,I0,N0,T0,R0,P0,O0,k0,D0,Jp,mh,ul,yh,M0,L0,zS;const sl=class sl{constructor(){Y(this,L0);Y(this,fc);Y(this,A0);Y(this,S0);Y(this,x0);Y(this,I0);Y(this,N0);Y(this,T0);Y(this,R0);Y(this,P0);Y(this,O0);Y(this,k0);Y(this,D0);Y(this,Jp);Y(this,mh);Y(this,ul);Y(this,yh);Y(this,M0);L(this,fc,null),L(this,A0,null),L(this,x0,0),L(this,I0,hs),L(this,N0,null),L(this,T0,null),L(this,R0,null),L(this,S0,"0x"),L(this,P0,hs),L(this,O0,hs),L(this,k0,null),L(this,D0,null),L(this,Jp,null),L(this,mh,null),L(this,ul,null),L(this,yh,null),L(this,M0,null)}get type(){return _(this,fc)}set type(e){switch(e){case null:L(this,fc,null);break;case 0:case"legacy":L(this,fc,0);break;case 1:case"berlin":case"eip-2930":L(this,fc,1);break;case 2:case"london":case"eip-1559":L(this,fc,2);break;case 3:case"cancun":case"eip-4844":L(this,fc,3);break;case 4:case"pectra":case"eip-7702":L(this,fc,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,A0);return e==null&&this.type===3?n_:e}set to(e){L(this,A0,e==null?null:xn(e))}get nonce(){return _(this,x0)}set nonce(e){L(this,x0,Kt(e,"value"))}get gasLimit(){return _(this,I0)}set gasLimit(e){L(this,I0,Ye(e))}get gasPrice(){const e=_(this,N0);return e==null&&(this.type===0||this.type===1)?hs:e}set gasPrice(e){L(this,N0,e==null?null:Ye(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,T0);return e??(this.type===2||this.type===3?hs:null)}set maxPriorityFeePerGas(e){L(this,T0,e==null?null:Ye(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,R0);return e??(this.type===2||this.type===3?hs:null)}set maxFeePerGas(e){L(this,R0,e==null?null:Ye(e,"maxFeePerGas"))}get data(){return _(this,S0)}set data(e){L(this,S0,Oe(e))}get value(){return _(this,P0)}set value(e){L(this,P0,Ye(e,"value"))}get chainId(){return _(this,O0)}set chainId(e){L(this,O0,Ye(e))}get signature(){return _(this,k0)||null}set signature(e){L(this,k0,e==null?null:ho.from(e))}get accessList(){const e=_(this,D0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,D0,e==null?null:mm(e))}get authorizationList(){const e=_(this,M0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,M0,e==null?null:e.map(n=>Ete(n)))}get maxFeePerBlobGas(){const e=_(this,Jp);return e==null&&this.type===3?hs:e}set maxFeePerBlobGas(e){L(this,Jp,e==null?null:Ye(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,mh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(tr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,mh,e)}get blobs(){return _(this,yh)==null?null:_(this,yh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,yh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(JU(i)){ye(_(this,ul),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Vt(i);if(Z(o.length<=r2,"blob is too large",`blobs[${s}]`,i),o.length!==r2){const l=new Uint8Array(r2);l.set(o),o=l}const a=_(this,ul).blobToKzgCommitment(o),c=Oe(_(this,ul).computeBlobKzgProof(o,a));n.push({data:Oe(o),commitment:Oe(a),proof:c}),r.push(Q7(1,a))}else{const o=Oe(i.commitment);n.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push(Q7(1,o))}}L(this,yh,n),L(this,mh,r)}get kzg(){return _(this,ul)}set kzg(e){e==null?L(this,ul,null):L(this,ul,eHe(e))}get hash(){return this.signature==null?null:Fr(de(this,L0,zS).call(this,!0,!1))}get unsignedHash(){return Fr(this.unsignedSerialized)}get from(){return this.signature==null?null:Kze(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:r_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return de(this,L0,zS).call(this,!0,!0)}get unsignedSerialized(){return de(this,L0,zS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,Jp)!=null||_(this,mh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return sl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new sl;if(typeof e=="string"){const r=Vt(e);if(r[0]>=127)return sl.from(sHe(r));switch(r[0]){case 1:return sl.from(cHe(r));case 2:return sl.from(oHe(r));case 3:return sl.from(uHe(r));case 4:return sl.from(hHe(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new sl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=ho.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};fc=new WeakMap,A0=new WeakMap,S0=new WeakMap,x0=new WeakMap,I0=new WeakMap,N0=new WeakMap,T0=new WeakMap,R0=new WeakMap,P0=new WeakMap,O0=new WeakMap,k0=new WeakMap,D0=new WeakMap,Jp=new WeakMap,mh=new WeakMap,ul=new WeakMap,yh=new WeakMap,M0=new WeakMap,L0=new WeakSet,zS=function(e,n){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return iHe(this,r);case 1:return lHe(this,r);case 2:return aHe(this,r);case 3:return dHe(this,r,n?this.blobs:null);case 4:return fHe(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let DI=sl;function Gg(t){return Fr(Zu(t))}var pHe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const J7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Z7=4;function gHe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let C=0;C<d;C++)w=w<<1|u();let m=[],b=0,v=h;for(;;){let C=Math.floor(((w-b+1)*s-1)/v),T=0,x=r;for(;x-T>1;){let D=T+x>>>1;C<i[D]?x=D:T=D}if(T==0)break;m.push(T);let N=b+Math.floor(v*i[T]/s),S=b+Math.floor(v*i[T+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function mHe(t){let e=0;return()=>t[e++]}function Cte(t){return mHe(gHe(yHe(t)))}function yHe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function wHe(t){return t&1?~t>>1:t>>1}function bHe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=wHe(e());return n}function s_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function _te(t){return i_(()=>{let e=s_(t);if(e.length)return e})}function Ate(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(vHe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(EHe(n,t))}return e.flat()}function i_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Ste(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)bHe(t,n).forEach((i,o)=>r[o].push(i));return r}function vHe(t,e){let n=1+e(),r=e(),s=i_(e);return Ste(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function EHe(t,e){let n=1+e();return Ste(n,1+t,e).map(s=>[s[0],s.slice(1)])}function CHe(t){let e=[],n=s_(t);return s(r([]),[]),e;function r(i){let o=t(),a=i_(()=>{let c=s_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function _He(t){return t.toString(16).toUpperCase().padStart(2,"0")}function xte(t){return`{${_He(t)}}`}function AHe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Ww(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function SHe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var xHe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const o_=44032,MI=4352,LI=4449,UI=4519,Ite=19,Nte=21,zw=28,BI=Nte*zw,IHe=Ite*BI,NHe=o_+IHe,THe=MI+Ite,RHe=LI+Nte,PHe=UI+zw;function jv(t){return t>>24&255}function Tte(t){return t&16777215}let d5,X7,h5,HS;function OHe(){let t=Cte(xHe);d5=new Map(_te(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),X7=new Set(s_(t)),h5=new Map,HS=new Map;for(let[e,n]of Ate(t)){if(!X7.has(e)&&n.length==2){let[r,s]=n,i=HS.get(r);i||(i=new Map,HS.set(r,i)),i.set(s,e)}h5.set(e,n.reverse())}}function Rte(t){return t>=o_&&t<NHe}function kHe(t,e){if(t>=MI&&t<THe&&e>=LI&&e<RHe)return o_+(t-MI)*BI+(e-LI)*zw;if(Rte(t)&&e>UI&&e<PHe&&(t-o_)%zw==0)return t+(e-UI);{let n=HS.get(t);return n&&(n=n.get(e),n)?n:-1}}function Pte(t){d5||OHe();let e=[],n=[],r=!1;function s(i){let o=d5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Rte(i)){let o=i-o_,a=o/BI|0,c=o%BI/zw|0,l=o%zw;s(MI+a),s(LI+c),l>0&&s(UI+l)}else{let o=h5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=jv(e[0]);for(let o=1;o<e.length;o++){let a=jv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=jv(e[--c]),i<=a))break}i=jv(e[o])}}return e}function DHe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=jv(i),a=Tte(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=kHe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Ote(t){return Pte(t).map(Tte)}function MHe(t){return DHe(Pte(t))}const eW=45,kte=".",Dte=65039,Mte=1,$I=t=>Array.from(t);function a_(t,e){return t.P.has(e)||t.Q.has(e)}class LHe extends Array{get is_emoji(){return!0}}let f5,Lte,Tp,p5,Ute,Xy,s2,ly,np,tW,g5;function cB(){if(f5)return;let t=Cte(pHe);const e=()=>s_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));f5=new Map(Ate(t)),Lte=n(),Tp=e(),p5=new Set(e().map(u=>Tp[u])),Tp=new Set(Tp),Ute=n(),n();let s=_te(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Xy=i_(u=>{let d=i_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Ww(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),s2=n(),ly=new Map;let a=e().concat($I(s2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),s2.has(u)||ly.set(u,f)});for(let{V:u,M:d}of new Set(ly.values())){let h=[];for(let p of u){let g=Xy.filter(m=>a_(m,p)),w=h.find(({G:m})=>g.some(b=>m.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>$I(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,w)}}np=new Set;let c=new Set;const l=u=>np.has(u)?c.add(u):np.add(u);for(let u of Xy){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of np)!ly.has(u)&&!c.has(u)&&ly.set(u,Mte);r(np,Ote(np)),tW=CHe(t).map(u=>LHe.from(u)).sort(SHe),g5=new Map;for(let u of tW){let d=[g5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Dte?d.push(...f):d=f}for(let h of d)h.V=u}}function lB(t){return(Bte(t)?"":`${uB(VT([t]))} `)+xte(t)}function uB(t){return`"${t}"`}function UHe(t){if(t.length>=4&&t[2]==eW&&t[3]==eW)throw new Error(`invalid label extension: "${Ww(t.slice(0,4))}"`)}function BHe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function $He(t){let e=t[0],n=J7.get(e);if(n)throw _E(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=J7.get(e);if(o){if(s==i)throw _E(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw _E(`trailing ${n}`)}function VT(t,e=1/0,n=xte){let r=[];FHe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Bte(a)&&(r.push(Ww(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Ww(t.slice(s,i))),r.join("")}function FHe(t){return cB(),Tp.has(t)}function Bte(t){return cB(),Ute.has(t)}function jHe(t){return GHe(WHe(t,MHe,KHe))}function WHe(t,e,n){if(!t)return[];cB();let r=0;return t.split(kte).map(s=>{let i=AHe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=VHe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(BHe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))UHe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Tp.has(u[0]))throw _E("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Tp.has(w[0]))throw _E(`emoji + combining mark: "${Ww(a[g-1])} + ${VT([w[0]])}"`)}$He(u);let f=$I(new Set(h)),[p]=HHe(f);qHe(p,h),zHe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function zHe(t,e){let n,r=[];for(let s of e){let i=ly.get(s);if(i===Mte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):$I(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>a_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function HHe(t){let e=Xy;for(let n of t){let r=e.filter(s=>a_(s,n));if(!r.length)throw Xy.some(s=>a_(s,n))?Fte(e[0],n):$te(n);if(e=r,r.length==1)break}return e}function GHe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${uB(VT(e,63))}: ${s}`)}return Ww(r)}).join(kte)}function $te(t){return new Error(`disallowed character: ${lB(t)}`)}function Fte(t,e){let n=lB(e),r=Xy.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function _E(t){return new Error(`illegal placement: ${t}`)}function qHe(t,e){for(let n of e)if(!a_(t,n))throw Fte(t,n);if(t.M){let n=Ote(e);for(let r=1,s=n.length;r<s;r++)if(p5.has(n[r])){let i=r+1;for(let o;i<s&&p5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${lB(o)}`);if(i-r>Z7)throw new Error(`excessive non-spacing marks: ${uB(VT(n.slice(r-1,i)))} (${i-r}/${Z7})`);r=i}}}function VHe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=YHe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(np.has(o))s.push(o);else{let a=f5.get(o);if(a)s.push(...a);else if(!Lte.has(o))throw $te(o)}}}return s.length&&r.push(e(s)),r}function KHe(t){return t.filter(e=>e!=Dte)}function YHe(t,e){let n=g5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const jte=new Uint8Array(32);jte.fill(0);function nW(t){return Z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function Wte(t){const e=Zu(QHe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(nW(e.slice(r,s))),r=s+1);return Z(r<e.length,"invalid ENS name; empty component","name",t),n.push(nW(e.slice(r))),n}function QHe(t){try{if(t.length===0)throw new Error("empty label");return jHe(t)}catch(e){Z(!1,`invalid ENS name (${e.message})`,"name",t)}}function m5(t){Z(typeof t=="string","invalid ENS name; not a string","name",t),Z(t.length,"invalid ENS name (empty label)","name",t);let e=jte;const n=Wte(t);for(;n.length;)e=Fr(Ir([e,Fr(n.pop())]));return Oe(e)}function JHe(t,e){const n=e;return Z(n<=255,"DNS encoded label cannot exceed 255","length",n),Oe(Ir(Wte(t).map(r=>{Z(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const zte=new Uint8Array(32);zte.fill(0);const ZHe=BigInt(-1),Hte=BigInt(0),Gte=BigInt(1),XHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function eGe(t){const e=Vt(t),n=e.length%32;return n?Ir([e,zte.slice(n)]):Oe(e)}const tGe=Cf(Gte,32),nGe=Cf(Hte,32),rW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},i2=["name","version","chainId","verifyingContract","salt"];function sW(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const rGe={name:sW("name"),version:sW("version"),chainId:function(t){const e=Ye(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):vc(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Vt(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),Oe(e)}};function o2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Z(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=$v(XHe,n?r-1:r),i=n?(s+Gte)*ZHe:Hte;return function(o){const a=Ye(o,"value");return Z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Cf(n?Pee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Vt(r);return Z(s.length===n,`invalid length for ${t}`,"value",r),eGe(r)}}}switch(t){case"address":return function(e){return dd(xn(e),32)};case"bool":return function(e){return e?tGe:nGe};case"bytes":return function(e){return Fr(e)};case"string":return function(e){return Gg(e)}}return null}function iW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function eS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var b_,Tu,U0,GI,qte;const fa=class fa{constructor(e){Y(this,GI);re(this,"primaryType");Y(this,b_);Y(this,Tu);Y(this,U0);L(this,Tu,new Map),L(this,U0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=eS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,b_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Z(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=eS(u.type).base;Z(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!o2(d)&&(Z(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),bt(this,{primaryType:o[0]});function a(c,l){Z(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,Tu).set(c,iW(c,i[c])+u.map(d=>iW(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,b_))}getEncoder(e){let n=_(this,U0).get(e);return n||(n=de(this,GI,qte).call(this,e),_(this,U0).set(e,n)),n}encodeType(e){const n=_(this,Tu).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Fr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(o2(e))return r(e,n);const s=eS(e).array;if(s)return Z(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new fa(e)}static getPrimaryType(e){return fa.from(e).primaryType}static hashStruct(e,n,r){return fa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=rW[r];Z(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>i2.indexOf(r.name)-i2.indexOf(s.name)),fa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Ir(["0x1901",fa.hashDomain(e),fa.from(n).hash(r)])}static hash(e,n,r){return Fr(fa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!tr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=fa.from(n);o.visit(r,(a,c)=>(a==="address"&&!tr(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){fa.hashDomain(e);const s={},i=[];i2.forEach(c=>{const l=e[c];l!=null&&(s[c]=rGe[c](l),i.push({name:c,type:rW[c]}))});const o=fa.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Oe(Vt(l));if(c.match(/^u?int/))return Ye(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Z(typeof l=="string","invalid string","value",l),l}Z(!1,"unsupported type","type",c)})}}};b_=new WeakMap,Tu=new WeakMap,U0=new WeakMap,GI=new WeakSet,qte=function(e){{const s=o2(e);if(s)return s}const n=eS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,Tu).has(s)&&(a=a.map(Fr)),Fr(Ir(a))}}const r=this.types[e];if(r){const s=Gg(_(this,Tu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,Tu).has(c)?Fr(l):l});return o.unshift(s),Ir(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let FI=fa;function _i(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const sGe="external public payable override",iGe=_i(sGe.split(" ")),Vte="constant external internal payable private public pure view override",oGe=_i(Vte.split(" ")),Kte="constructor error event fallback function receive struct",Yte=_i(Kte.split(" ")),Qte="calldata memory storage payable indexed",aGe=_i(Qte.split(" ")),cGe="tuple returns",lGe=[Kte,Qte,cGe,Vte].join(" "),uGe=_i(lGe.split(" ")),dGe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},hGe=new RegExp("^(\\s*)"),fGe=new RegExp("^([0-9]+)"),pGe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Jte=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Zte=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ts,pc,v_,y5;const qI=class qI{constructor(e){Y(this,v_);Y(this,Ts);Y(this,pc);L(this,Ts,0),L(this,pc,e.slice())}get offset(){return _(this,Ts)}get length(){return _(this,pc).length-_(this,Ts)}clone(){return new qI(_(this,pc))}reset(){L(this,Ts,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=de(this,v_,y5).call(this,_(this,Ts)+1,e.match+1);return L(this,Ts,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,Ts)<e.match-1;){const r=this.peek().linkNext;n.push(de(this,v_,y5).call(this,_(this,Ts)+1,r)),L(this,Ts,r)}return L(this,Ts,e.match+1),n}peek(){if(_(this,Ts)>=_(this,pc).length)throw new Error("out-of-bounds");return _(this,pc)[_(this,Ts)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Ed(this,Ts)._++,e}toString(){const e=[];for(let n=_(this,Ts);n<_(this,pc).length;n++){const r=_(this,pc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Ts=new WeakMap,pc=new WeakMap,v_=new WeakSet,y5=function(e=0,n=0){return new qI(_(this,pc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let $c=qI;function Of(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(hGe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=dGe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Kt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(pGe),a){if(c.text=a[1],i+=c.text.length,uGe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Zte)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(fGe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new $c(e.map(o=>Object.freeze(o)))}function oW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function KT(t,e){if(e.peekKeyword(Yte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function hd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Xte(t){let e=hd(t,oGe);return oW(e,_i("constant payable nonpayable".split(" "))),oW(e,_i("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Xu(t,e){return t.popParams().map(n=>Bs.from(n,e))}function ene(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ye(t.pop().text);throw new Error("invalid gas")}return null}function qg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const gGe=new RegExp(/^(.*)\[([0-9]*)\]$/);function aW(t){const e=t.match(Zte);if(Z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Z(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Z(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const mr={},go=Symbol.for("_ethers_internal"),cW="_ParamTypeInternal",lW="_ErrorInternal",uW="_EventInternal",dW="_ConstructorInternal",hW="_FallbackInternal",fW="_FunctionInternal",pW="_StructInternal";var B0,GS;const pa=class pa{constructor(e,n,r,s,i,o,a,c){Y(this,B0);re(this,"name");re(this,"type");re(this,"baseType");re(this,"indexed");re(this,"components");re(this,"arrayLength");re(this,"arrayChildren");if(BT(e,mr,"ParamType"),Object.defineProperty(this,go,{value:cW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");bt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return de(this,B0,GS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(pa.isParamType(e))return e;if(typeof e=="string")try{return pa.from(Of(e),n)}catch{Z(!1,"invalid param type","obj",e)}else if(e instanceof $c){let a="",c="",l=null;hd(e,_i(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>pa.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=aW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new pa(mr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(hd(e,aGe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new pa(mr,p,a,c,h,l,d,u)}const r=e.name;Z(!r||typeof r=="string"&&r.match(Jte),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Z(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(gGe);if(o){const a=parseInt(o[2]||"-1"),c=pa.from({type:o[1],components:e.components});return new pa(mr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>pa.from(l)):null;return new pa(mr,r||"",i,"tuple",s,a,null,null)}return i=aW(e.type),new pa(mr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[go]===cW}};B0=new WeakSet,GS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;de(u=o,B0,GS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;de(u=o[l],B0,GS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Bs=pa;class Vg{constructor(e,n,r){re(this,"type");re(this,"inputs");BT(e,mr,"Fragment"),r=Object.freeze(r.slice()),bt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Vg.from(JSON.parse(e))}catch{}return Vg.from(Of(e))}if(e instanceof $c)switch(e.peekKeyword(Yte)){case"constructor":return Hu.from(e);case"error":return eo.from(e);case"event":return Il.from(e);case"fallback":case"receive":return Cu.from(e);case"function":return Nl.from(e);case"struct":return mg.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Hu.from(e);case"error":return eo.from(e);case"event":return Il.from(e);case"fallback":case"receive":return Cu.from(e);case"function":return Nl.from(e);case"struct":return mg.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Hu.isFragment(e)}static isError(e){return eo.isFragment(e)}static isEvent(e){return Il.isFragment(e)}static isFunction(e){return Nl.isFragment(e)}static isStruct(e){return mg.isFragment(e)}}class YT extends Vg{constructor(n,r,s,i){super(n,r,i);re(this,"name");Z(typeof s=="string"&&s.match(Jte),"invalid identifier","name",s),i=Object.freeze(i.slice()),bt(this,{name:s})}}function c_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class eo extends YT{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,go,{value:lW})}get selector(){return Gg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+c_(e,this.inputs)),n.join(" ")}static from(e){if(eo.isFragment(e))return e;if(typeof e=="string")return eo.from(Of(e));if(e instanceof $c){const n=KT("error",e),r=Xu(e);return qg(e),new eo(mr,n,r)}return new eo(mr,e.name,e.inputs?e.inputs.map(Bs.from):[])}static isFragment(e){return e&&e[go]===lW}}class Il extends YT{constructor(n,r,s,i){super(n,"event",r,s);re(this,"anonymous");Object.defineProperty(this,go,{value:uW}),bt(this,{anonymous:i})}get topicHash(){return Gg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+c_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Bs.from(i)),new Il(mr,n,r,!1).topicHash}static from(n){if(Il.isFragment(n))return n;if(typeof n=="string")try{return Il.from(Of(n))}catch{Z(!1,"invalid event fragment","obj",n)}else if(n instanceof $c){const r=KT("event",n),s=Xu(n,!0),i=!!hd(n,_i(["anonymous"])).has("anonymous");return qg(n),new Il(mr,r,s,i)}return new Il(mr,n.name,n.inputs?n.inputs.map(r=>Bs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[go]===uW}}class Hu extends Vg{constructor(n,r,s,i,o){super(n,r,s);re(this,"payable");re(this,"gas");Object.defineProperty(this,go,{value:dW}),bt(this,{payable:i,gas:o})}format(n){if(ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${c_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Hu.isFragment(n))return n;if(typeof n=="string")try{return Hu.from(Of(n))}catch{Z(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof $c){hd(n,_i(["constructor"]));const r=Xu(n),s=!!hd(n,iGe).has("payable"),i=ene(n);return qg(n),new Hu(mr,"constructor",r,s,i)}return new Hu(mr,"constructor",n.inputs?n.inputs.map(Bs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[go]===dW}}class Cu extends Vg{constructor(n,r,s){super(n,"fallback",r);re(this,"payable");Object.defineProperty(this,go,{value:hW}),bt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Cu.isFragment(n))return n;if(typeof n=="string")try{return Cu.from(Of(n))}catch{Z(!1,"invalid fallback fragment","obj",n)}else if(n instanceof $c){const r=n.toString(),s=n.peekKeyword(_i(["fallback","receive"]));if(Z(s,"type must be fallback or receive","obj",r),n.popKeyword(_i(["fallback","receive"]))==="receive"){const c=Xu(n);return Z(c.length===0,"receive cannot have arguments","obj.inputs",c),hd(n,_i(["payable"])),qg(n),new Cu(mr,[],!0)}let o=Xu(n);o.length?Z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Bs.from("bytes")];const a=Xte(n);if(Z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),hd(n,_i(["returns"])).has("returns")){const c=Xu(n);Z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return qg(n),new Cu(mr,o,a==="payable")}if(n.type==="receive")return new Cu(mr,[],!0);if(n.type==="fallback"){const r=[Bs.from("bytes")],s=n.stateMutability==="payable";return new Cu(mr,r,s)}Z(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[go]===hW}}class Nl extends YT{constructor(n,r,s,i,o,a){super(n,"function",r,i);re(this,"constant");re(this,"outputs");re(this,"stateMutability");re(this,"payable");re(this,"gas");Object.defineProperty(this,go,{value:fW}),o=Object.freeze(o.slice()),bt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Gg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+c_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(c_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Bs.from(i)),new Nl(mr,n,"view",r,[],null).selector}static from(n){if(Nl.isFragment(n))return n;if(typeof n=="string")try{return Nl.from(Of(n))}catch{Z(!1,"invalid function fragment","obj",n)}else if(n instanceof $c){const s=KT("function",n),i=Xu(n),o=Xte(n);let a=[];hd(n,_i(["returns"])).has("returns")&&(a=Xu(n));const c=ene(n);return qg(n),new Nl(mr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Nl(mr,n.name,r,n.inputs?n.inputs.map(Bs.from):[],n.outputs?n.outputs.map(Bs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[go]===fW}}class mg extends YT{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,go,{value:pW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return mg.from(Of(e))}catch{Z(!1,"invalid struct fragment","obj",e)}else if(e instanceof $c){const n=KT("struct",e),r=Xu(e);return qg(e),new mg(mr,n,r)}return new mg(mr,e.name,e.inputs?e.inputs.map(Bs.from):[])}static isFragment(e){return e&&e[go]===pW}}const Wc=new Map;Wc.set(0,"GENERIC_PANIC");Wc.set(1,"ASSERT_FALSE");Wc.set(17,"OVERFLOW");Wc.set(18,"DIVIDE_BY_ZERO");Wc.set(33,"ENUM_RANGE_ERROR");Wc.set(34,"BAD_STORAGE_DATA");Wc.set(49,"STACK_UNDERFLOW");Wc.set(50,"ARRAY_RANGE_ERROR");Wc.set(65,"OUT_OF_MEMORY");Wc.set(81,"UNINITIALIZED_FUNCTION_CALL");const mGe=new RegExp(/^bytes([0-9]*)$/),yGe=new RegExp(/^(u?int)([0-9]*)$/);let a2=null,gW=1024;function wGe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Vt(n);if(n=Oe(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Wc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=xn(e.from)),cr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var wh,uy;const VI=class VI{constructor(){Y(this,wh)}getDefaultValue(e){const n=e.map(s=>de(this,wh,uy).call(this,Bs.from(s)));return new XA(n,"_").defaultValue()}encode(e,n){Nee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>de(this,wh,uy).call(this,Bs.from(o))),s=new XA(r,"_"),i=new r5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>de(this,wh,uy).call(this,Bs.from(o)));return new XA(s,"_").decode(new s5(n,r,gW))}static _setDefaultMaxInflation(e){Z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),gW=e}static defaultAbiCoder(){return a2==null&&(a2=new VI),a2}static getBuiltinCallException(e,n,r){return wGe(e,n,r,VI.defaultAbiCoder())}};wh=new WeakSet,uy=function(e){if(e.isArray())return new Lze(de(this,wh,uy).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new XA(e.components.map(r=>de(this,wh,uy).call(this,r)),e.name);switch(e.baseType){case"address":return new Dze(e.name);case"bool":return new Uze(e.name);case"string":return new qze(e.name);case"bytes":return new Bze(e.name);case"":return new jze(e.name)}let n=e.type.match(yGe);if(n){let r=parseInt(n[2]||"256");return Z(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Gze(r/8,n[1]==="int",e.name)}if(n=e.type.match(mGe),n){let r=parseInt(n[1]);return Z(r!==0&&r<=32,"invalid bytes length","param",e),new $ze(r,e.name)}Z(!1,"invalid type","type",e.type)};let l_=VI;class bGe{constructor(e,n,r){re(this,"fragment");re(this,"name");re(this,"signature");re(this,"topic");re(this,"args");const s=e.name,i=e.format();bt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class vGe{constructor(e,n,r,s){re(this,"fragment");re(this,"name");re(this,"args");re(this,"signature");re(this,"selector");re(this,"value");const i=e.name,o=e.format();bt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class EGe{constructor(e,n,r){re(this,"fragment");re(this,"name");re(this,"args");re(this,"signature");re(this,"selector");const s=e.name,i=e.format();bt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class mW{constructor(e){re(this,"hash");re(this,"_isIndexed");bt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const yW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},wW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&yW[t.toString()]&&(e=yW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var dl,hl,fl,Qs,Bl,qS,VS;const hp=class hp{constructor(e){Y(this,Bl);re(this,"fragments");re(this,"deploy");re(this,"fallback");re(this,"receive");Y(this,dl);Y(this,hl);Y(this,fl);Y(this,Qs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,fl,new Map),L(this,dl,new Map),L(this,hl,new Map);const r=[];for(const o of n)try{r.push(Vg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}bt(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,Qs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}bt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,fl);break;case"event":c=_(this,hl);break;case"error":c=_(this,dl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||bt(this,{deploy:Hu.from("constructor()")}),bt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return l_.defaultAbiCoder()}getFunctionName(e){const n=de(this,Bl,qS).call(this,e,null,!1);return Z(n,"no matching function","key",e),n.name}hasFunction(e){return!!de(this,Bl,qS).call(this,e,null,!1)}getFunction(e,n){return de(this,Bl,qS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,fl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,fl).get(s),r)}}getEventName(e){const n=de(this,Bl,VS).call(this,e,null,!1);return Z(n,"no matching event","key",e),n.name}hasEvent(e){return!!de(this,Bl,VS).call(this,e,null,!1)}getEvent(e,n){return de(this,Bl,VS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,hl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,hl).get(s),r)}}getError(e,n){if(tr(e)){const s=e.toLowerCase();if(wW[s])return eo.from(wW[s].signature);for(const i of _(this,dl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,dl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?eo.from("error Error(string)"):e==="Panic"?eo.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=eo.from(e).format(),e==="Error(string)")return eo.from("error Error(string)");if(e==="Panic(uint256)")return eo.from("error Panic(uint256)");const r=_(this,dl).get(e);return r||null}forEachError(e){const n=Array.from(_(this,dl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,dl).get(s),r)}}_decodeParams(e,n){return _(this,Qs).decode(e,n)}_encodeParams(e,n){return _(this,Qs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Z(_r(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,_r(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Ir([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Z(_r(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,_r(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Ir([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Z(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=wi(n);if(s.length%32===0)try{return _(this,Qs).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Vt(e,"data"),s=l_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Oe(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Qs).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Oe(_(this,Qs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Z(i,"unknown event","eventFragment",e),e=i}ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Gg(o):i.type==="bytes"?Fr(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Cf(o):i.type.match(/^bytes/)?o=j7e(o,32):i.type==="address"&&_(this,Qs).encode(["address"],[o]),dd(Oe(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Z(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Z(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Gg(c));else if(o.type==="bytes")r.push(Fr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Qs).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Qs).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Z(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Z(tr(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Bs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Qs).decode(s,Ir(r)):null,c=_(this,Qs).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new mW(null);else if(o[p])g=new mW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),Uw.fromItems(l,u)}parseTransaction(e){const n=Vt(e.data,"tx.data"),r=Ye(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(n.slice(0,4)));if(!s)return null;const i=_(this,Qs).decode(s.inputs,n.slice(4));return new vGe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new bGe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Oe(e),r=this.getError(_r(n,0,4));if(!r)return null;const s=_(this,Qs).decode(r.inputs,_r(n,4));return new EGe(r,r.selector,s)}static from(e){return e instanceof hp?e:typeof e=="string"?new hp(JSON.parse(e)):typeof e.formatJson=="function"?new hp(e.formatJson()):typeof e.format=="function"?new hp(e.format("json")):new hp(e)}};dl=new WeakMap,hl=new WeakMap,fl=new WeakMap,Qs=new WeakMap,Bl=new WeakSet,qS=function(e,n,r){if(tr(e)){const i=e.toLowerCase();for(const o of _(this,fl).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,fl))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ni.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ni.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,fl).get(Nl.from(e).format());return s||null},VS=function(e,n,r){if(tr(e)){const i=e.toLowerCase();for(const o of _(this,hl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,hl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ni.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,hl).get(Il.from(e).format());return s||null};let w5=hp;const tne=BigInt(0);function e0(t){return t??null}function Rr(t){return t==null?null:t.toString()}class bW{constructor(e,n,r){re(this,"gasPrice");re(this,"maxFeePerGas");re(this,"maxPriorityFeePerGas");bt(this,{gasPrice:e0(e),maxFeePerGas:e0(n),maxPriorityFeePerGas:e0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Rr(e),maxFeePerGas:Rr(n),maxPriorityFeePerGas:Rr(r)}}}function jI(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Oe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ye(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Kt(t[s],`request.${s}`));return t.accessList&&(e.accessList=mm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>JU(s)?Oe(s):Object.assign({},s))),e}var Ru;class CGe{constructor(e,n){re(this,"provider");re(this,"number");re(this,"hash");re(this,"timestamp");re(this,"parentHash");re(this,"parentBeaconBlockRoot");re(this,"nonce");re(this,"difficulty");re(this,"gasLimit");re(this,"gasUsed");re(this,"stateRoot");re(this,"receiptsRoot");re(this,"blobGasUsed");re(this,"excessBlobGas");re(this,"miner");re(this,"prevRandao");re(this,"extraData");re(this,"baseFeePerGas");Y(this,Ru);L(this,Ru,e.transactions.map(r=>typeof r!="string"?new u_(r,n):r)),bt(this,{provider:n,hash:e0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:e0(e.prevRandao),extraData:e.extraData,baseFeePerGas:e0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Ru).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Ru).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Rr(e),difficulty:Rr(n),extraData:r,gasLimit:Rr(s),gasUsed:Rr(i),blobGasUsed:Rr(this.blobGasUsed),excessBlobGas:Rr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Ru).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Ru)[e];else{const r=e.toLowerCase();for(const s of _(this,Ru))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return _Ge(this)}}Ru=new WeakMap;class I1{constructor(e,n){re(this,"provider");re(this,"transactionHash");re(this,"blockHash");re(this,"blockNumber");re(this,"removed");re(this,"address");re(this,"data");re(this,"topics");re(this,"index");re(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());bt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return AGe(this)}}var E_;class nne{constructor(e,n){re(this,"provider");re(this,"to");re(this,"from");re(this,"contractAddress");re(this,"hash");re(this,"index");re(this,"blockHash");re(this,"blockNumber");re(this,"logsBloom");re(this,"gasUsed");re(this,"blobGasUsed");re(this,"cumulativeGasUsed");re(this,"gasPrice");re(this,"blobGasPrice");re(this,"type");re(this,"status");re(this,"root");Y(this,E_);L(this,E_,Object.freeze(e.logs.map(s=>new I1(s,n))));let r=tne;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),bt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,E_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Rr(this.cumulativeGasUsed),from:n,gasPrice:Rr(this.gasPrice),blobGasUsed:Rr(this.blobGasUsed),blobGasPrice:Rr(this.blobGasPrice),gasUsed:Rr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return sne(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),rne(this,e)}}E_=new WeakMap;var bh;const bB=class bB{constructor(e,n){re(this,"provider");re(this,"blockNumber");re(this,"blockHash");re(this,"index");re(this,"hash");re(this,"type");re(this,"to");re(this,"from");re(this,"nonce");re(this,"gasLimit");re(this,"gasPrice");re(this,"maxPriorityFeePerGas");re(this,"maxFeePerGas");re(this,"maxFeePerBlobGas");re(this,"data");re(this,"value");re(this,"chainId");re(this,"signature");re(this,"accessList");re(this,"blobVersionedHashes");re(this,"authorizationList");Y(this,bh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,bh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Rr(this.chainId),data:l,from:a,gasLimit:Rr(this.gasLimit),gasPrice:Rr(this.gasPrice),hash:s,maxFeePerGas:Rr(this.maxFeePerGas),maxPriorityFeePerGas:Rr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Rr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Rr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await pi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,bh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await pi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,bh)&&(o=_(this,bh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const m=await g.getTransaction(w);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===tne&&(v="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(cr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const w=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const m=async()=>{try{await c()}catch(b){if(ks(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),sne(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),rne(this,e)}replaceableTransaction(e){Z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new bB(this,this.provider);return L(n,bh,e),n}};bh=new WeakMap;let u_=bB;function _Ge(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function rne(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function sne(t){return{orphan:"drop-transaction",tx:t}}function AGe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class dB extends I1{constructor(n,r,s){super(n,n.provider);re(this,"interface");re(this,"fragment");re(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);bt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class ine extends I1{constructor(n,r){super(n,n.provider);re(this,"error");bt(this,{error:r})}}var $0;class SGe extends nne{constructor(n,r,s){super(s,r);Y(this,$0);L(this,$0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,$0).getEvent(n.topics[0]):null;if(r)try{return new dB(n,_(this,$0),r)}catch(s){return new ine(n,s)}return n})}}$0=new WeakMap;var C_;class hB extends u_{constructor(n,r,s){super(s,r);Y(this,C_);L(this,C_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new SGe(_(this,C_),this.provider,s)}}C_=new WeakMap;class one extends Oee{constructor(n,r,s,i){super(n,r,s);re(this,"log");bt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class xGe extends one{constructor(e,n,r,s,i){super(e,n,r,new dB(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);bt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const vW=BigInt(0);function ane(t){return t&&typeof t.call=="function"}function cne(t){return t&&typeof t.estimateGas=="function"}function QT(t){return t&&typeof t.resolveName=="function"}function lne(t){return t&&typeof t.sendTransaction=="function"}function une(t){if(t!=null){if(QT(t))return t;if(t.provider)return t.provider}}var __;class IGe{constructor(e,n,r){Y(this,__);re(this,"fragment");if(bt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Kg(e.runner,"resolveName"),i=QT(s)?s:null;L(this,__,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ci(h,i))):Ci(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,__)}}__=new WeakMap;function Kg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Rp(t){return t==null?null:t.provider||null}async function dne(t,e){const n=ni.dereference(t,"overrides");Z(typeof n=="object","invalid overrides parameter","overrides",t);const r=jI(n);return Z(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Z(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function NGe(t,e,n){const r=Kg(t,"resolveName"),s=QT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ni.dereference(c,a),a==="address"?Ci(c,s):c))))}function TGe(t){const e=async function(o){const a=await dne(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ci(a.from,une(t.runner)));const c=t.interface,l=Ye(a.value||vW,"overrides.value")===vW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Z(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Kg(t.runner,"call");ye(ane(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw QU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ye(lne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Rp(t.runner);return new hB(t.interface,l,c)},s=async function(o){const a=Kg(t.runner,"estimateGas");return ye(cne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return bt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function RGe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await dne(l.pop()),d.from&&(d.from=await Ci(d.from,une(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await NGe(t.runner,u.inputs,l);return Object.assign({},d,await pi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ye(lne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Rp(t.runner);return new hB(t.interface,h,d)},o=async function(...l){const u=Kg(t.runner,"estimateGas");return ye(cne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Kg(t.runner,"call");ye(ane(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw QU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return bt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function PGe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new IGe(t,n(...s),s)};return bt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const WI=Symbol.for("_ethersInternal_contract"),hne=new WeakMap;function OGe(t,e){hne.set(t[WI],e)}function Po(t){return hne.get(t[WI])}function kGe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function fB(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(tr(o,32))return o;const a=t.interface.getEvent(o);return Z(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?tr(e,32)?n=[e]:(r=t.interface.getEvent(e),Z(r,"unknown fragment","event",e),n=[r.topicHash]):kGe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Z(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Wv(t,e){const{subs:n}=Po(t);return n.get((await fB(t,e)).tag)||null}async function EW(t,e,n){const r=Rp(t.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await fB(t,n),{addr:a,subs:c}=Po(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let m=s;if(m==null)try{m=t.interface.getEvent(w.topics[0])}catch{}if(m){const b=m,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];v5(t,n,v,A=>new xGe(t,A,n,b,w))}else v5(t,n,[],b=>new one(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let b5=Promise.resolve();async function DGe(t,e,n,r){await b5;const s=await Wv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Po(t).subs.delete(s.tag)),i>0}async function v5(t,e,n,r){try{await b5}catch{}const s=DGe(t,e,n,r);return b5=s,await s}const tS=["then"];var qW;qW=WI;const AE=class AE{constructor(e,n,r,s){re(this,"target");re(this,"interface");re(this,"runner");re(this,"filters");re(this,qW);re(this,"fallback");Z(typeof e=="string"||yte(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=w5.from(n);bt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,WI,{value:{}});let o,a=null,c=null;if(s){const d=Rp(r);c=new hB(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(tr(e))a=e,o=Promise.resolve(e);else{const d=Kg(r,"resolveName");if(!QT(d))throw cr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw cr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Po(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Po(this).addr=d,d});OGe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||tS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!ks(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>tS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return bt(this,{filters:u}),bt(this,{fallback:i.receive||i.fallback?TGe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||tS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!ks(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||tS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new AE(this.target,this.interface,e)}attach(e){return new AE(e,this.interface,this.runner)}async getAddress(){return await Po(this).addrPromise}async getDeployedCode(){const e=Rp(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Rp(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Po(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),RGe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),PGe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Po(this),o=s||await i,{fragment:a,topics:c}=await fB(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Rp(this.runner);return ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new dB(d,this.interface,h)}catch(f){return new ine(d,f)}return new I1(d,u)})}async on(e,n){const r=await EW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await EW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await v5(this,e,n,null)}async listenerCount(e){if(e){const s=await Wv(this,e);return s?s.listeners.length:0}const{subs:n}=Po(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Wv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Po(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Wv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Po(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Wv(this,e);if(!n)return this;n.stop(),Po(this).subs.delete(n.tag)}else{const{subs:n}=Po(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends AE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let E5=AE;function MGe(){return E5}class t0 extends MGe(){}function c2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class LGe{constructor(e){re(this,"name");bt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const fne=new RegExp("^(ipfs)://(.*)$","i"),CW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),fne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var vh,Zp,Eh,dy,KI,pne;const ky=class ky{constructor(e,n,r){Y(this,Eh);re(this,"provider");re(this,"address");re(this,"name");Y(this,vh);Y(this,Zp);bt(this,{provider:e,address:n,name:r}),L(this,vh,null),L(this,Zp,new t0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,vh)==null&&L(this,vh,(async()=>{try{return await _(this,Zp).supportsInterface("0x9061b923")}catch(e){if(ks(e,"CALL_EXCEPTION"))return!1;throw L(this,vh,null),e}})()),await _(this,vh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await de(this,Eh,dy).call(this,"addr(bytes32)");return i==null||i===n_?null:i}catch(i){if(ks(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await de(this,Eh,dy).call(this,"addr(bytes32,uint)",[i]);if(tr(o,20))return xn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof LGe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await de(this,Eh,dy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await de(this,Eh,dy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await de(this,Eh,dy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${H7e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<CW.length;r++){const s=n.match(CW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=c2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new t0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Cf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=c2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new _f(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Oe(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(fne)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=c2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await de(s=ky,KI,pne).call(s,e,r);if(i!=null){const o=new ky(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};vh=new WeakMap,Zp=new WeakMap,Eh=new WeakSet,dy=async function(e,n){n=(n||[]).slice();const r=_(this,Zp).interface;n.unshift(m5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[JHe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,Zp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!ks(i,"CALL_EXCEPTION"))throw i}return null},KI=new WeakSet,pne=async function(e,n){const r=await ky.getEnsAddress(e);try{const i=await new t0(r,["function resolver(bytes32) view returns (address)"],e).resolver(m5(n),{enableCcipRead:!0});return i===n_?null:i}catch(s){throw s}return null},Y(ky,KI);let zI=ky;const _W=BigInt(0);function en(t,e){return function(n){return n==null?e:t(n)}}function d_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function N1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function UGe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Hw(t){return Z(tr(t,!0),"invalid data","value",t),t}function Os(t){return Z(tr(t,32),"invalid hash","value",t),t}const BGe=N1({address:xn,blockHash:Os,blockNumber:Kt,data:Hw,index:Kt,removed:en(UGe,!1),topics:d_(Os),transactionHash:Os,transactionIndex:Kt},{index:["logIndex"]});function $Ge(t){return BGe(t)}const FGe=N1({hash:en(Os),parentHash:Os,parentBeaconBlockRoot:en(Os,null),number:Kt,timestamp:Kt,nonce:en(Hw),difficulty:Ye,gasLimit:Ye,gasUsed:Ye,stateRoot:en(Os,null),receiptsRoot:en(Os,null),blobGasUsed:en(Ye,null),excessBlobGas:en(Ye,null),miner:en(xn),prevRandao:en(Os,null),extraData:Hw,baseFeePerGas:en(Ye)},{prevRandao:["mixHash"]});function jGe(t){const e=FGe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:gne(n)),e}const WGe=N1({transactionIndex:Kt,blockNumber:Kt,transactionHash:Os,address:xn,topics:d_(Os),data:Hw,index:Kt,blockHash:Os},{index:["logIndex"]});function zGe(t){return WGe(t)}const HGe=N1({to:en(xn,null),from:en(xn,null),contractAddress:en(xn,null),index:Kt,root:en(Oe),gasUsed:Ye,blobGasUsed:en(Ye,null),logsBloom:en(Hw),blockHash:Os,hash:Os,logs:d_(zGe),blockNumber:Kt,cumulativeGasUsed:Ye,effectiveGasPrice:en(Ye),blobGasPrice:en(Ye,null),status:en(Kt),type:en(Kt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function GGe(t){return HGe(t)}function gne(t){t.to&&Ye(t.to)===_W&&(t.to="0x0000000000000000000000000000000000000000");const e=N1({hash:Os,index:en(Kt,void 0),type:n=>n==="0x"||n==null?0:Kt(n),accessList:en(mm,null),blobVersionedHashes:en(d_(Os,!0),null),authorizationList:en(d_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:xn(n.address),chainId:Ye(n.chainId),nonce:Ye(n.nonce),signature:ho.from(r)}},!1),null),blockHash:en(Os,null),blockNumber:en(Kt,null),transactionIndex:en(Kt,null),from:xn,gasPrice:en(Ye),maxPriorityFeePerGas:en(Ye),maxFeePerGas:en(Ye),maxFeePerBlobGas:en(Ye,null),gasLimit:Ye,to:en(xn,null),value:Ye,nonce:Kt,data:Hw,creates:en(xn,null),chainId:en(Ye,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=kze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=ho.from(t.signature):e.signature=ho.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ye(e.blockHash)===_W&&(e.blockHash=null),e}const qGe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class T1{constructor(e){re(this,"name");bt(this,{name:e})}clone(){return new T1(this.name)}}class JT extends T1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);re(this,"effectiveBlock");re(this,"txBase");re(this,"txCreate");re(this,"txDataZero");re(this,"txDataNonzero");re(this,"txAccessListStorageKey");re(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Z(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),bt(this,s)}clone(){return new JT(this.effectiveBlock,this)}}class ZT extends T1{constructor(n,r){super("org.ethers.plugins.network.Ens");re(this,"address");re(this,"targetNetwork");bt(this,{address:n||qGe,targetNetwork:r??1})}clone(){return new ZT(this.address,this.targetNetwork)}}var A_,S_;class VGe extends T1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Y(this,A_);Y(this,S_);L(this,A_,n),L(this,S_,r)}get url(){return _(this,A_)}get processFunc(){return _(this,S_)}clone(){return this}}A_=new WeakMap,S_=new WeakMap;const l2=new Map;var F0,j0,Ch;const Dy=class Dy{constructor(e,n){Y(this,F0);Y(this,j0);Y(this,Ch);L(this,F0,e),L(this,j0,Ye(n)),L(this,Ch,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,F0)}set name(e){L(this,F0,e)}get chainId(){return _(this,j0)}set chainId(e){L(this,j0,Ye(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ye(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ye(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ye(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,Ch).values())}attachPlugin(e){if(_(this,Ch).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Ch).set(e.name,e.clone()),this}getPlugin(e){return _(this,Ch).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Dy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new JT;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=mm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(KGe(),e==null)return Dy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=l2.get(e);if(n)return n();if(typeof e=="bigint")return new Dy("unknown",e);Z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Dy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new ZT(e.ensAddress,e.ensNetwork)),n}Z(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=l2.get(e);r&&Z(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),l2.set(e,n)}};F0=new WeakMap,j0=new WeakMap,Ch=new WeakMap;let Rl=Dy;function AW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function SW(t){return new VGe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:AW(a.maxFee,9),maxPriorityFeePerGas:AW(a.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let xW=!1;function KGe(){if(xW)return;xW=!0;function t(e,n,r){const s=function(){const i=new Rl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new ZT(null,r.ensNetwork)),i.attachPlugin(new JT),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Rl.register(e,s),Rl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Rl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[SW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[SW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function C5(t){return JSON.parse(JSON.stringify(t))}var Pu,ya,_h,pl,W0,KS;class YGe{constructor(e){Y(this,W0);Y(this,Pu);Y(this,ya);Y(this,_h);Y(this,pl);L(this,Pu,e),L(this,ya,null),L(this,_h,4e3),L(this,pl,-2)}get pollingInterval(){return _(this,_h)}set pollingInterval(e){L(this,_h,e)}start(){_(this,ya)||(L(this,ya,_(this,Pu)._setTimeout(de(this,W0,KS).bind(this),_(this,_h))),de(this,W0,KS).call(this))}stop(){_(this,ya)&&(_(this,Pu)._clearTimeout(_(this,ya)),L(this,ya,null))}pause(e){this.stop(),e&&L(this,pl,-2)}resume(){this.start()}}Pu=new WeakMap,ya=new WeakMap,_h=new WeakMap,pl=new WeakMap,W0=new WeakSet,KS=async function(){try{const e=await _(this,Pu).getBlockNumber();if(_(this,pl)===-2){L(this,pl,e);return}if(e!==_(this,pl)){for(let n=_(this,pl)+1;n<=e;n++){if(_(this,ya)==null)return;await _(this,Pu).emit("block",n)}L(this,pl,e)}}catch{}_(this,ya)!=null&&L(this,ya,_(this,Pu)._setTimeout(de(this,W0,KS).bind(this),_(this,_h)))};var Xp,eg,Ah;class pB{constructor(e){Y(this,Xp);Y(this,eg);Y(this,Ah);L(this,Xp,e),L(this,Ah,!1),L(this,eg,n=>{this._poll(n,_(this,Xp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,Ah)||(L(this,Ah,!0),_(this,eg).call(this,-2),_(this,Xp).on("block",_(this,eg)))}stop(){_(this,Ah)&&(L(this,Ah,!1),_(this,Xp).off("block",_(this,eg)))}pause(e){this.stop()}resume(){this.start()}}Xp=new WeakMap,eg=new WeakMap,Ah=new WeakMap;var z0,Ou;class QGe extends pB{constructor(n,r){super(n);Y(this,z0);Y(this,Ou);L(this,z0,r),L(this,Ou,-2)}pause(n){n&&L(this,Ou,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,z0));s!=null&&(_(this,Ou)===-2?L(this,Ou,s.number):s.number>_(this,Ou)&&(r.emit(_(this,z0),s.number),L(this,Ou,s.number)))}}z0=new WeakMap,Ou=new WeakMap;var YI;class JGe extends pB{constructor(n,r){super(n);Y(this,YI);L(this,YI,C5(r))}async _poll(n,r){throw new Error("@TODO")}}YI=new WeakMap;var H0;class ZGe extends pB{constructor(n,r){super(n);Y(this,H0);L(this,H0,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,H0));s&&r.emit(_(this,H0),s)}}H0=new WeakMap;var ku,G0,q0,Sh,wa,QI,mne;class gB{constructor(e,n){Y(this,QI);Y(this,ku);Y(this,G0);Y(this,q0);Y(this,Sh);Y(this,wa);L(this,ku,e),L(this,G0,C5(n)),L(this,q0,de(this,QI,mne).bind(this)),L(this,Sh,!1),L(this,wa,-2)}start(){_(this,Sh)||(L(this,Sh,!0),_(this,wa)===-2&&_(this,ku).getBlockNumber().then(e=>{L(this,wa,e)}),_(this,ku).on("block",_(this,q0)))}stop(){_(this,Sh)&&(L(this,Sh,!1),_(this,ku).off("block",_(this,q0)))}pause(e){this.stop(),e&&L(this,wa,-2)}resume(){this.start()}}ku=new WeakMap,G0=new WeakMap,q0=new WeakMap,Sh=new WeakMap,wa=new WeakMap,QI=new WeakSet,mne=async function(e){if(_(this,wa)===-2)return;const n=C5(_(this,G0));n.fromBlock=_(this,wa)+1,n.toBlock=e;const r=await _(this,ku).getLogs(n);if(r.length===0){_(this,wa)<e-60&&L(this,wa,e-60);return}for(const s of r)_(this,ku).emit(_(this,G0),s),L(this,wa,s.blockNumber)};const XGe=BigInt(2),eqe=10;function nS(t){return t&&typeof t.then=="function"}function YS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class yne{constructor(e){re(this,"name");bt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function tqe(t){return JSON.parse(JSON.stringify(t))}function _5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function u2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(tr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:YS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:YS("orphan",n),filter:tqe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?_5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{tr(a)?s.push(a):i.push((async()=>{s.push(await Ci(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=_5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:YS("event",r),type:"event"}}Z(!1,"unknown ProviderEvent","event",t)}function d2(){return new Date().getTime()}const nqe={cacheTimeout:250,pollingInterval:4e3};var Js,xh,Zs,V0,Mo,tg,Ih,Du,x_,ba,K0,Y0,Ht,No,A5,S5,zv,x5,Hv,QS;class rqe{constructor(e,n){Y(this,Ht);Y(this,Js);Y(this,xh);Y(this,Zs);Y(this,V0);Y(this,Mo);Y(this,tg);Y(this,Ih);Y(this,Du);Y(this,x_);Y(this,ba);Y(this,K0);Y(this,Y0);if(L(this,Y0,Object.assign({},nqe,n||{})),e==="any")L(this,tg,!0),L(this,Mo,null);else if(e){const r=Rl.from(e);L(this,tg,!1),L(this,Mo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,tg,!1),L(this,Mo,null);L(this,Du,-1),L(this,Ih,new Map),L(this,Js,new Map),L(this,xh,new Map),L(this,Zs,null),L(this,V0,!1),L(this,x_,1),L(this,ba,new Map),L(this,K0,!1)}get pollingInterval(){return _(this,Y0).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,xh).values())}attachPlugin(e){if(_(this,xh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,xh).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,xh).get(e)||null}get disableCcipRead(){return _(this,K0)}set disableCcipRead(e){L(this,K0,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new _f(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ye(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new CGe(jGe(e),this)}_wrapLog(e,n){return new I1($Ge(e),this)}_wrapTransactionReceipt(e,n){return new nne(GGe(e),this)}_wrapTransactionResponse(e,n){return new u_(gne(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Kt(await de(this,Ht,No).call(this,{method:"getBlockNumber"}),"%response");return _(this,Du)>=0&&L(this,Du,e),e}_getAddress(e){return Ci(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(tr(e))return tr(e,32)?e:vc(e);if(typeof e=="bigint"&&(e=Kt(e,"blockTag")),typeof e=="number")return e>=0?vc(e):_(this,Du)>=0?vc(_(this,Du)+e):this.getBlockNumber().then(n=>vc(n+e));Z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?_5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=jI(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ci(n[s],this);nS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);nS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,Mo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,Mo)===s&&L(this,Mo,null),i}})();return L(this,Mo,s),(await s).clone()}const e=_(this,Mo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,tg)?(this.emit("network",r,n),_(this,Mo)===e&&L(this,Mo,Promise.resolve(r))):ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await pi({_block:de(this,Ht,x5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await de(this,Ht,No).call(this,{method:"getGasPrice"});return Ye(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await de(this,Ht,No).call(this,{method:"getPriorityFee"});return Ye(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*XGe+c),new bW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new _f(r.url),i=await r.processFunc(n,this,s);return new bW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return nS(n)&&(n=await n),Ye(await de(this,Ht,No).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await pi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await de(this,Ht,S5).call(this,de(this,Ht,A5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ye(await de(this,Ht,zv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Kt(await de(this,Ht,zv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Oe(await de(this,Ht,zv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ye(n,"position");return Oe(await de(this,Ht,zv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await pi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=DI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await pi({network:this.getNetwork(),params:de(this,Ht,x5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await pi({network:this.getNetwork(),params:de(this,Ht,No).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await pi({network:this.getNetwork(),params:de(this,Ht,No).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await de(this,Ht,No).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await pi({network:this.getNetwork(),result:de(this,Ht,No).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Oe(n)}async getLogs(e){let n=this._getFilter(e);nS(n)&&(n=await n);const{network:r,params:s}=await pi({network:this.getNetwork(),params:de(this,Ht,No).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await zI.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=m5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await zI.getEnsAddress(this),i=await new t0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===n_)return null;const a=await new t0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ks(r,"BAD_DATA")&&r.value==="0x"||ks(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(cr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,ba).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,ba).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Ed(this,x_)._++,s=()=>{_(this,ba).delete(r),e()};if(this.paused)_(this,ba).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,ba).set(r,{timer:i,func:s,time:d2()})}return r}_forEachSubscriber(e){for(const n of _(this,Js).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new yne(e.type);case"block":{const n=new YGe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new QGe(this,e.type);case"event":return new gB(this,e.filter);case"transaction":return new ZGe(this,e.hash);case"orphan":return new JGe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,Js).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Zs)!=null&&n.pause(_(this,Zs));break}}async on(e,n){const r=await de(this,Ht,QS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Zs)!=null&&r.subscriber.pause(_(this,Zs))),this}async once(e,n){const r=await de(this,Ht,QS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Zs)!=null&&r.subscriber.pause(_(this,Zs))),this}async emit(e,...n){const r=await de(this,Ht,Hv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Oee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,Js).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await de(this,Ht,Hv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,Js).values())n+=r.length;return n}async listeners(e){if(e){const r=await de(this,Ht,Hv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,Js).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await de(this,Ht,Hv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,Js).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await de(this,Ht,QS).call(this,e);r&&s.stop(),_(this,Js).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,Js))r&&s.stop(),_(this,Js).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,V0)}destroy(){this.removeAllListeners();for(const e of _(this,ba).keys())this._clearTimeout(e);L(this,V0,!0)}get paused(){return _(this,Zs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,Du,-1),_(this,Zs)!=null){if(_(this,Zs)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,Zs,!!e);for(const n of _(this,ba).values())n.timer&&clearTimeout(n.timer),n.time=d2()-n.time}resume(){if(_(this,Zs)!=null){this._forEachSubscriber(e=>e.resume()),L(this,Zs,null);for(const e of _(this,ba).values()){let n=e.time;n<0&&(n=0),e.time=d2(),setTimeout(e.func,n)}}}}Js=new WeakMap,xh=new WeakMap,Zs=new WeakMap,V0=new WeakMap,Mo=new WeakMap,tg=new WeakMap,Ih=new WeakMap,Du=new WeakMap,x_=new WeakMap,ba=new WeakMap,K0=new WeakMap,Y0=new WeakMap,Ht=new WeakSet,No=async function(e){const n=_(this,Y0).cacheTimeout;if(n<0)return await this._perform(e);const r=YS(e.method,e);let s=_(this,Ih).get(r);return s||(s=this._perform(e),_(this,Ih).set(r,s),setTimeout(()=>{_(this,Ih).get(r)===s&&_(this,Ih).delete(r)},n)),await s},A5=async function(e,n,r){ye(r<eqe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=jI(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&QU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&_r(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ci(s.to,this);let c;try{c=cqe(_r(i.data,4))}catch(d){ye(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Ir([c.selector,aqe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await de(this,Ht,A5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},S5=async function(e){const{value:n}=await pi({network:this.getNetwork(),value:e});return n},zv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await de(this,Ht,S5).call(this,de(this,Ht,No).call(this,Object.assign(e,{address:s,blockTag:i})))},x5=async function(e,n){if(tr(e,32))return await de(this,Ht,No).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await de(this,Ht,No).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Hv=async function(e,n){let r=await u2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await u2({orphan:"drop-log",log:n[0]},this)),_(this,Js).get(r.tag)||null},QS=async function(e){const n=await u2(e,this),r=n.tag;let s=_(this,Js).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,Js).set(r,s)),s};function sqe(t,e){try{const n=I5(t,e);if(n)return OI(n)}catch{}return null}function I5(t,e){if(t==="0x")return null;try{const n=Kt(_r(t,e,e+32)),r=Kt(_r(t,n,n+32));return _r(t,n+32,n+32+r)}catch{}return null}function IW(t){const e=Zr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function iqe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const oqe=new Uint8Array([]);function aqe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(oqe),n+=32;for(let r=0;r<t.length;r++){const s=Vt(t[r]);e[r]=IW(n),e.push(IW(s.length)),e.push(iqe(s)),n+=32+Math.ceil(s.length/32)*32}return Ir(e)}const NW="0x0000000000000000000000000000000000000000000000000000000000000000";function cqe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(Zy(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=_r(t,0,32);ye(_r(n,0,12)===_r(NW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=_r(n,12);try{const r=[],s=Kt(_r(t,32,64)),i=Kt(_r(t,s,s+32)),o=_r(t,s+32);for(let a=0;a<i;a++){const c=sqe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=I5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(_r(t,100,128)===_r(NW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=_r(t,96,100);try{const r=I5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Vf(t,e){if(t.provider)return t.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function TW(t,e){let n=jI(e);if(n.to!=null&&(n.to=Ci(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ci(r,t)]).then(([s,i])=>(Z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await pi(n)}class lqe{constructor(e){re(this,"provider");bt(this,{provider:e||null})}async getNonce(e){return Vf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await TW(this,e)}async populateTransaction(e){const n=Vf(this,"populateTransaction"),r=await TW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ye(r.chainId);Z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await pi(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Vf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Vf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Vf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Vf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Vf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=DI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function uqe(t){return JSON.parse(JSON.stringify(t))}var hi,gl,ng,Nh,rg,Q0,Sf,N5,T5;class wne{constructor(e){Y(this,Sf);Y(this,hi);Y(this,gl);Y(this,ng);Y(this,Nh);Y(this,rg);Y(this,Q0);L(this,hi,e),L(this,gl,null),L(this,ng,de(this,Sf,N5).bind(this)),L(this,Nh,!1),L(this,rg,null),L(this,Q0,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Nh)||(L(this,Nh,!0),de(this,Sf,N5).call(this,-2))}stop(){_(this,Nh)&&(L(this,Nh,!1),L(this,Q0,!0),de(this,Sf,T5).call(this),_(this,hi).off("block",_(this,ng)))}pause(e){e&&de(this,Sf,T5).call(this),_(this,hi).off("block",_(this,ng))}resume(){this.start()}}hi=new WeakMap,gl=new WeakMap,ng=new WeakMap,Nh=new WeakMap,rg=new WeakMap,Q0=new WeakMap,Sf=new WeakSet,N5=async function(e){try{_(this,gl)==null&&L(this,gl,this._subscribe(_(this,hi)));let n=null;try{n=await _(this,gl)}catch(i){if(!ks(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,gl,null),_(this,hi)._recoverSubscriber(this,this._recover(_(this,hi)));return}const r=await _(this,hi).getNetwork();if(_(this,rg)||L(this,rg,r),_(this,rg).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Q0))return;const s=await _(this,hi).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,hi),s)}catch(n){console.log("@TODO",n)}_(this,hi).once("block",_(this,ng))},T5=function(){const e=_(this,gl);e&&(L(this,gl,null),e.then(n=>{_(this,hi).destroyed||_(this,hi).send("eth_uninstallFilter",[n])}))};var sg;class dqe extends wne{constructor(n,r){super(n);Y(this,sg);L(this,sg,uqe(r))}_recover(n){return new gB(n,_(this,sg))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,sg)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,sg),n._wrapLog(s,n._network))}}sg=new WeakMap;class hqe extends wne{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const fqe="bigint,boolean,function,number,string,symbol".split(/,/g);function JS(t){if(t==null||fqe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(JS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function pqe(t){return new Promise(e=>{setTimeout(e,t)})}function ny(t){return t&&t.toLowerCase()}function RW(t){return t&&typeof t.pollingInterval=="number"}const bne={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class h2 extends lqe{constructor(n,r){super(n);re(this,"address");r=xn(r),bt(this,{address:r})}connect(n){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=JS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ci(o,this.provider);Z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ci(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(ks(u,"CANCELLED")||ks(u,"BAD_DATA")||ks(u,"NETWORK_ERROR")||ks(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(ks(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",cr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=JS(n);if(r.from){const i=await Ci(r.from,this.provider);Z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Zu(n):n;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=JS(s),o=await FI.resolveNames(n,r,i,async a=>{const c=await Ci(a);return Z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(FI.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Zu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var ig,J0,Mu,ml,gc,va,Vi,I_,R5;class gqe extends rqe{constructor(n,r){super(n,r);Y(this,I_);Y(this,ig);Y(this,J0);Y(this,Mu);Y(this,ml);Y(this,gc);Y(this,va);Y(this,Vi);L(this,J0,1),L(this,ig,Object.assign({},bne,r||{})),L(this,Mu,[]),L(this,ml,null),L(this,va,null),L(this,Vi,null);{let i=null;const o=new Promise(a=>{i=a});L(this,gc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Z(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,va,Rl.from(n))):s&&(Z(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,va,s))}_getOption(n){return _(this,ig)[n]}get _network(){return ye(_(this,va),"network is not available yet","NETWORK_ERROR"),_(this,va)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ye(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,va))return _(this,va)}else return n;return _(this,Vi)?await _(this,Vi):this.ready?(L(this,Vi,(async()=>{try{const r=Rl.from(Ye(await this.send("eth_chainId",[])));return L(this,Vi,null),r}catch(r){throw L(this,Vi,null),r}})()),await _(this,Vi)):(L(this,Vi,(async()=>{const r={id:Ed(this,J0)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,Vi,null)}catch(i){throw L(this,Vi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Rl.from(Ye(s.result));throw this.getRpcError(r,s)})()),await _(this,Vi))}_start(){_(this,gc)==null||_(this,gc).resolve==null||(_(this,gc).resolve(),L(this,gc,null),(async()=>{for(;_(this,va)==null&&!this.destroyed;)try{L(this,va,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",cr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await pqe(1e3)}de(this,I_,R5).call(this)})())}async _waitUntilReady(){if(_(this,gc)!=null)return await _(this,gc).promise}_getSubscriber(n){return n.type==="pending"?new hqe(this):n.type==="event"?this._getOption("polling")?new gB(this,n.filter):new dqe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new yne("orphan"):super._getSubscriber(n)}get ready(){return _(this,gc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=vc(Ye(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Oe(n[s]))}),n.accessList&&(r.accessList=mm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Ete(s);return{address:i.address,nonce:vc(i.nonce),chainId:vc(i.chainId),yParity:vc(i.signature.yParity),r:vc(i.signature.r),s:vc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ny(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ny(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[ny(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ny(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(ny):n.filter.address=ny(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return cr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return cr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=P5(i),l=l_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(yqe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return cr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return cr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return cr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return cr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return cr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?cr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):cr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(cr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Ed(this,J0)._++,i=new Promise((o,a)=>{_(this,Mu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return de(this,I_,R5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new h2(this,i[n])}const{accounts:s}=await pi({network:this.getNetwork(),accounts:r});n=xn(n);for(const i of s)if(xn(i)===n)return new h2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new h2(this,r))}destroy(){_(this,ml)&&(clearTimeout(_(this,ml)),L(this,ml,null));for(const{payload:n,reject:r}of _(this,Mu))r(cr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,Mu,[]),super.destroy()}}ig=new WeakMap,J0=new WeakMap,Mu=new WeakMap,ml=new WeakMap,gc=new WeakMap,va=new WeakMap,Vi=new WeakMap,I_=new WeakSet,R5=function(){if(_(this,ml))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,ml,setTimeout(()=>{L(this,ml,null);const r=_(this,Mu);for(L(this,Mu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,ig).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,ig).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(cr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=cr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Th;class mqe extends gqe{constructor(n,r){super(n,r);Y(this,Th);let s=this._getOption("pollingInterval");s==null&&(s=bne.pollingInterval),L(this,Th,s)}_getSubscriber(n){const r=super._getSubscriber(n);return RW(r)&&(r.pollingInterval=_(this,Th)),r}get pollingInterval(){return _(this,Th)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,Th,n),this._forEachSubscriber(r=>{RW(r)&&(r.pollingInterval=_(this,Th))})}}Th=new WeakMap;function P5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&tr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=P5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return P5(JSON.parse(t))}catch{}return null}function O5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)O5(t[n],e);if(typeof t=="string")try{return O5(JSON.parse(t),e)}catch{}}}function yqe(t){const e=[];return O5(t,e),e}var Z0,X0;const fp=class fp extends mqe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Z(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Y(this,Z0);Y(this,X0);L(this,X0,null),s&&s.providerInfo&&L(this,X0,s.providerInfo),L(this,Z0,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,X0)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Z(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,Z0).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,Z0).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new fp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new fp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof fp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new fp(p,void 0,{providerInfo:g}))}else a(cr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new fp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Z0=new WeakMap,X0=new WeakMap;let k5=fp;const Ia={DMT:{symbol:"DMT",name:"DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1}},PW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},Gw={testnet:{chainId:1992},mainnet:{chainId:1996}},mB=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],gu=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function vne(t,e){return Ia[t].address}function Ene(t,e){const n=wd(),r=Ia[t],s=r.isNative||!1,i=n===Gw.mainnet.chainId,o=n===Gw.testnet.chainId,a=!!e&&i,{data:c,isLoading:l,error:u}=kFe({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=SI({address:r.address,abi:mB,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function wqe(t,e,n){const r=wd(),s=vne(t),i=r===Gw.mainnet.chainId,o=r===Gw.testnet.chainId,{data:a,isLoading:c,error:l}=SI({address:s,abi:mB,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,Ia[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function bqe(){const{writeContract:t,data:e,isPending:n,error:r}=Dv(),{isLoading:s}=kv({hash:e});return wd(),{approve:(o,a,c)=>{const l=vne(o);t({address:l,abi:mB,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const vqe=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=b1(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=Ene(t,i),[l,u]=k.useState(!1),d=h=>{e(h),u(!1)};return y.jsxs("div",{style:{marginBottom:"10px"},children:[y.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[y.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),y.jsxs("div",{style:{position:"relative"},children:[y.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[Ia[t].symbol,y.jsx("span",{style:{float:"right"},children:""})]}),l&&!s&&y.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(Ia).map(([h,f])=>y.jsx("div",{onClick:()=>d(h),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:p=>p.currentTarget.style.background="#f0f0f0",onMouseLeave:p=>p.currentTarget.style.background="#fff",children:f.symbol},h))})]})]}),y.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[y.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),y.jsx("input",{type:"number",value:n,onChange:h=>r(Number(h.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),y.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${Ia[t].symbol}`:"Connect to Sanko Mainnet"]})]}),c&&y.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&y.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet to see token balances"}),n>o&&a&&y.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",Ia[t].symbol]}),o===0&&a&&y.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:[" You have 0 ",Ia[t].symbol,". Get tokens from ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},Eqe=t=>t===Gw.testnet.chainId?PW.testnet.chess:PW.mainnet.chess,_n={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},f2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},hu=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],Cqe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function _qe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function Aqe(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new k5(window.ethereum);return await new t0(e,gu,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Cne=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=b1(),o=Eqe(i||Gw.mainnet.chainId),[a,c]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[m,b]=k.useState(!1),{writeContract:v,isPending:A,data:C}=Dv(),{writeContract:T,isPending:x,data:N,error:S}=Dv(),{writeContract:D,isPending:P,data:$}=Dv(),{writeContract:G,isPending:W,data:I}=Dv(),{approve:R}=bqe(),B=FFe(),{isLoading:O}=kv({hash:C}),{isLoading:M,data:j}=kv({hash:N}),{isLoading:V}=kv({hash:$}),{isLoading:se}=kv({hash:I});k.useEffect(()=>{I&&!se&&(console.log("[REFUND] Transaction completed successfully"),ot("Game refunded successfully! Your wager has been returned."),Wt(_n.LOBBY),pe(""),Dn(null),Xe(0,"refund completed"),Lr(null),K())},[I,se]);const{data:ie}=SI({address:o,abi:gu,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Q}=SI({address:o,abi:gu,functionName:"games",args:ie?[ie]:void 0,query:{enabled:!!ie&&ie!=="0x000000000000"}}),[te,pe]=k.useState(""),Ze=(U,z)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${z}`),te&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${te}" to "${U}" from ${z}`),pe(U)},Xe=(U,z)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${z}`),wm!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${wm} to ${U} TDMT`),vB(U)},[We,mt]=k.useState("moves"),Ot=async()=>{if(!te||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",te);const U=await is.getGame(te);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await G({address:o,abi:gu,functionName:"cancelGame",args:[te]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},ln=async()=>{if(!r||!Qe){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=te;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const z=await Aqe(r,o);z&&z!=="0x000000000000"&&(U=z,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(z){console.error("[CLAIM] Error getting invite code from contract:",z)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",Qe,"Address:",r);const z=await is.getGame(U);if(!z){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",z);let F=null;if(z.winner&&(z.blue_player||z.red_player)&&(F=z.winner==="blue"?z.blue_player:z.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:z.winner,winnerAddress:F})),!F&&Q)if(z.winner&&(z.winner==="blue"||z.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let le,Te,Se,ke,ft,zt;if(Array.isArray(Q))[le,Te,Se,ke,ft,zt]=Q;else{console.error("[CLAIM] Unexpected contract data format:",Q),alert("Failed to verify winner. Please try again.");return}F=z.winner==="blue"?le:Te,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:z.winner,winnerAddress:F,player1:le,player2:Te})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",Q);let le,Te,Se,ke,ft,zt;if(Array.isArray(Q))[le,Te,Se,ke,ft,zt]=Q;else{console.error("[CLAIM] Unexpected contract data format:",Q),alert("Failed to verify winner. Please try again.");return}const St=String(ke);if(St.startsWith("0x"))F=St;else if(St==="blue"||St==="red")F=St==="blue"?le:Te;else if(St==="1"||St==="2")F=St==="1"?le:Te;else{console.error("[CLAIM] Unknown winner format:",ke,"as string:",St),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:ke,winnerAddress:F,player1:le,player2:Te,winnerType:typeof ke,winnerValue:ke,address:r,addressType:typeof r})}if(!F){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:F,address:r,playerColor:Qe,winnerAddressType:typeof F,addressType:typeof r,addressesMatch:F===r,winnerAddressLength:F==null?void 0:F.length,addressLength:r==null?void 0:r.length}),F!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:F,address:r,playerColor:Qe}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let ee=U;if(!ee&&Q){console.log("[CLAIM] Using invite code from contract data as fallback");let le,Te,Se,ke,ft,zt;if(Array.isArray(Q))[le,Te,Se,ke,ft,zt]=Q,ee=ft;else{console.error("[CLAIM] Unexpected contract data format for invite code:",Q),alert("Failed to get invite code. Please try again.");return}}if(!ee||typeof ee!="string"||!ee.startsWith("0x")||ee.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",ee),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:ee,winner:F,functionName:"endGame",inviteCodeSource:z.invite_code?"Firebase":"Contract"}),D({address:o,abi:gu,functionName:"endGame",args:[ee,F]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:$})}catch(z){console.error("[CLAIM] Error claiming winnings:",z),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[X,ce]=k.useState(hu),[he,me]=k.useState("blue"),[be,ct]=k.useState(null),[et,ht]=k.useState([]),[vt,qn]=k.useState([]),[dr,ot]=k.useState("Waiting for opponent..."),[rn,Wt]=k.useState(_n.LOBBY),[Qe,Dn]=k.useState(null),[zc,Lr]=k.useState(null),[wm,vB]=k.useState(0),[XT,_b]=k.useState([]),[R1,Ql]=k.useState(!1),[Ga,bn]=k.useState(!1),[ns,kf]=k.useState(null),[sn,qa]=k.useState(null),[EB,CB]=k.useState(""),[Va,eR]=k.useState(0),[wo,tR]=k.useState("DMT");Ene(wo,r);const P1=BigInt(Math.floor(Va*Math.pow(10,Ia[wo].decimals))),{allowance:O1}=wqe(wo,r,o),[Jl]=k.useState(!0),[bo,k1]=k.useState(null),[bm,D1]=k.useState(0),[Ka,M1]=k.useState(Date.now()),Ab=36e5;k.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Df,_B]=k.useState(!1),[L1,nR]=k.useState(null),[Sb,xb]=k.useState(!1),[vd,Ib]=k.useState(null),[Nb,Tb]=k.useState(!1),[U1,rR]=k.useState(!0),[vm,Rb]=k.useState(null),vo=k.useCallback(()=>{bo&&clearTimeout(bo);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),sR()},Ab);k1(U),M1(Date.now())},[bo]),Mf=k.useCallback(()=>{bo&&(clearTimeout(bo),k1(null))},[bo]),sR=async()=>{if(!te||!Qe)return;console.log("[TIMEOUT] Handling timeout for game:",te);const U=he==="blue"?"red":"blue",z=U==="blue"?Q==null?void 0:Q[0]:Q==null?void 0:Q[1];z&&(console.log("[TIMEOUT] Ending game with winner:",z),D({address:o,abi:gu,functionName:"endGame",args:[te,z]}),ot(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),Wt(_n.FINISHED))},[Hs,iR]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[Pb,B1]=k.useState([]),[Zl,oR]=k.useState(null),Ya=k.useRef(null),na=k.useRef(null),Qa=k.useRef(r);k.useEffect(()=>{Qa.current=r},[r]),k.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",N),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",M),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",sn),console.log("[JOIN RECEIPT DEBUG] - condition:",N&&!M&&sn),N&&!M&&sn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===sn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Dn("red"),Lr(sn.gameData.blue_player)),is.updateGame(sn.inviteCode,{...sn.gameData,red_player:sn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),Wt(_n.ACTIVE),ot("Game started!"),Cm(sn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),qa(null)}).catch(U=>{console.error("Error updating game in database:",U),ot("Joined game on contract but failed to update database"),qa(null)}))},[N,M,sn,r]),k.useEffect(()=>{$&&!V&&(console.log("[CLAIM] End game transaction confirmed:",$),ot("Winnings claimed successfully! Transaction hash: "+$.slice(0,10)+"..."),w(!1))},[$,V]),k.useEffect(()=>{P===!1&&g&&!$&&(console.log("[CLAIM] End game transaction rejected or failed"),ot("Claim transaction was rejected. Please try again."),w(!1))},[P,g,$]),k.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",C),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",O),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",ns),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",te),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",C&&!O&&ns&&!te),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!C),console.log("[CREATE DEBUG] - not waiting for receipt:",!O),console.log("[CREATE DEBUG] - pendingGameData exists:",!!ns),console.log("[CREATE DEBUG] - no inviteCode set:",!te),C&&!O&&ns&&!te?(console.log("[CONTRACT] Create game transaction confirmed:",C),is.createGame(ns).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),pe(ns.invite_code),Dn("blue"),Xe(Va,"create game success"),Wt(_n.WAITING),ot("Waiting for opponent to join..."),Cm(ns.invite_code),setTimeout(()=>{K()},1e3),kf(null),Ql(!1),bn(!1)}).catch(U=>{console.error("[FIREBASE] Error creating game after transaction:",U),ot("Transaction confirmed but failed to create game in database"),kf(null),Ql(!1),bn(!1)})):C&&!O&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!ns),console.log("[CREATE DEBUG] - inviteCode already set:",!!te))},[C,O,ns,Va]),k.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",ns)},[ns]),k.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",sn),sn){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),qa(null)},3e4);return()=>clearTimeout(U)}},[sn]),k.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",ns),console.log("[CREATE REJECTION DEBUG] - createGameHash:",C),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&ns&&!C),A===!1&&ns&&!C&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ot("Transaction was rejected. Please try again."),kf(null),Ql(!1),bn(!1))},[A,ns,C]),k.useEffect(()=>{x===!1&&sn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",sn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",ie),ot("Transaction was rejected. Please try again."),Ze("","join transaction rejection"),Dn(null),Xe(0,"join transaction rejection"),Lr(null),Wt(_n.LOBBY),ot(""),qa(null))},[x,sn,N,r,ie]),k.useEffect(()=>{r&&ie!==void 0&&(m||(ie!=="0x000000000000"&&Q||ie==="0x000000000000")&&Lf())},[r,ie,Q,m]),k.useEffect(()=>{b(!1)},[r]),k.useEffect(()=>{rn===_n.ACTIVE&&Qe?(console.log("[TIMEOUT] Starting timeout timer for active game"),vo()):Mf()},[rn,Qe,vo,Mf]),k.useEffect(()=>{rn===_n.ACTIVE&&vt.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),vo())},[vt,rn,vo]),k.useEffect(()=>{if(rn===_n.ACTIVE&&bo){const U=setInterval(()=>{const z=Date.now()-Ka,F=Math.max(0,Ab-z);D1(Math.ceil(F/1e3))},1e3);return()=>clearInterval(U)}},[rn,bo,Ka]),k.useEffect(()=>()=>{Ob(),Mf(),Ya.current&&Ya.current(),na.current&&clearTimeout(na.current)},[Mf]);const Lf=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),ie&&ie!=="0x000000000000"&&!Q){console.log("[GAME_STATE] Waiting for contract data...");return}if(ie&&ie!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",ie),Q)){let F,ee,le,Te,Se,ke;if(Array.isArray(Q))[F,ee,le,Te,Se,ke]=Q;else{console.error("[GAME_STATE] Unexpected contract data format:",Q);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:ee,isActive:le,winner:Te,inviteCode:Se,wagerAmount:ke}),!Se){console.error("[GAME_STATE] Invalid invite code:",Se);return}const ft=F===r?"blue":"red",zt=F===r?ee:F;console.log("[GAME_STATE] Player is",ft,"opponent is",zt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",ee),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",ee===r);const St=await is.getGame(Se);if(St){if(console.log("[GAME_STATE] Found game in Firebase:",St),pe(Se),Dn(ft),Xe(parseFloat(St.bet_amount)/1e18,"checkPlayerGameState Firebase"),Lr(zt),St.game_state==="waiting")Wt(_n.WAITING),ot("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(St.game_state==="active"||St.game_state==="test_update"){if(Wt(_n.ACTIVE),ot("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",St.game_state,")"),St.board){const jr=St.board;ce(_m(jr)),me(St.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",St.game_state,"- treating as active"),Wt(_n.ACTIVE),ot("Game in progress"),St.board){const jr=St.board;ce(_m(jr)),me(St.current_player||"blue")}Cm(Se),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",rn),console.log("[GAME_STATE] Game state from Firebase:",St.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const jr={invite_code:Se,game_title:`Game ${Se.slice(-6)}`,bet_amount:ke?ke.toString():"0",blue_player:F,red_player:ee,game_state:le?"active":"waiting",board:{positions:kb(hu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0};if(await is.createGame(jr),console.log("[GAME_STATE] Successfully synced game to Firebase:",jr),pe(Se),Dn(ft),Xe(parseFloat(jr.bet_amount)/1e18,"checkPlayerGameState sync"),Lr(zt),le?(Wt(_n.ACTIVE),ot("Game in progress")):(Wt(_n.WAITING),ot("Waiting for opponent to join...")),jr.board){const Vne=jr.board;ce(_m(Vne)),me(jr.current_player||"blue")}Cm(Se),b(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const z=(await is.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(z&&z.length>0){const F=z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),pe(F.invite_code),Dn(F.blue_player===r?"blue":"red"),Xe(parseFloat(F.bet_amount)/1e18,"checkPlayerGameState fallback"),Lr(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")Wt(_n.WAITING),ot("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(Wt(_n.ACTIVE),ot("Game in progress"),F.board){const ee=F.board;ce(_m(ee)),me(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),Wt(_n.ACTIVE),ot("Game in progress"),F.board){const ee=F.board;ce(_m(ee)),me(F.current_player||"blue")}Cm(F.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Wt(_n.LOBBY),Ql(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},Em=async()=>{try{await Iee();const U=await xee(20);B1(U)}catch(U){console.error("Error loading leaderboard:",U)}},$1=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Hg(r)),await PI(r,U)?console.log("[SCORE] Successfully updated score for:",Hg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(z){console.error("[SCORE] Error updating score:",z)}},q=async(U,z,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:z,redPlayer:F}),!z||!F){console.error("[SCORE] Missing player addresses from contract");return}await B7e(U,z,F)?(console.log("[SCORE] Successfully updated both players scores"),await Em()):console.error("[SCORE] Failed to update both players scores")}catch(ee){console.error("[SCORE] Error updating both players scores:",ee)}},K=async()=>{try{const U=await is.getOpenGames();console.log("[FIREBASE] Loaded open games:",U),await ae(U),_b(U)}catch(U){console.error("Error loading open games:",U)}},ae=async U=>{if(console.log("[CLEANUP] Checking for ghost games..."),!B){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const z of U)try{const F=z.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",z.invite_code,F);continue}const ee=await B.readContract({address:o,abi:gu,functionName:"games",args:[F]});(!ee||Array.isArray(ee)&&ee[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",z.invite_code,"- removing from Firebase"),await is.deleteGame(z.invite_code),console.log("[CLEANUP] Ghost game removed:",z.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",z.invite_code,F)}},oe=async()=>{if(!r)return!1;try{return O1<P1?(console.log("[APPROVAL] Insufficient allowance, requesting approval"),R(wo,o,P1),!1):!0}catch(U){return console.error("[APPROVAL] Error checking approval:",U),ot("Failed to check token approval. Please try again."),!1}},ne=async()=>{if(!(!r||Va<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Va),bn(!0);try{if(!await oe()){ot("Please approve token spending first"),bn(!1);return}const z=_qe();console.log("[CREATE] Generated invite code:",z);const F=Ia[wo].address,ee=BigInt(Math.floor(Va*Math.pow(10,Ia[wo].decimals))),le={invite_code:z,game_title:`Chess Game ${z.slice(-6)}`,bet_amount:ee.toString(),bet_token:wo,blue_player:r,game_state:"waiting",board:{positions:kb(hu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",le),console.log("[CREATE] Calling contract with args:",[z,F,ee]),v({address:o,abi:gu,functionName:"createGame",args:[z,F,ee]}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",le),kf(le),ot("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),ot("Failed to create game. Please try again.")}finally{bn(!1)}}},Ie=async U=>{if(r)try{const z=await is.getGame(U);if(!z||z.game_state!=="waiting"){ot("Game not found or already full");return}const ee=parseFloat(z.bet_amount)/1e18;if(pe(U),Dn("red"),Xe(ee,"joinGame"),Lr(z.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:U,playerColor:"red",wagerAmountTDMT:ee,opponent:z.blue_player,address:r}),r===z.blue_player){console.error("[JOIN] Player cannot join their own game"),ot("You cannot join your own game");return}if(ie&&ie!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",ie),ot("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const le=await window.ethereum.request({method:"eth_chainId"}),Te=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",le),console.log("[JOIN] Wallet state check - connectedAccounts:",Te),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(le){console.error("[JOIN] Error checking wallet state:",le)}console.log("[JOIN] Contract call parameters - contractAddress:",o),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[U]),ot("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",o),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[U]),T({address:o,abi:gu,functionName:"joinGame",args:[U]}),console.log("[JOIN] writeJoinGame called, setting pending data..."),qa({inviteCode:U,gameData:z,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(z){console.error("[JOIN] Error joining game:",z),ot("Failed to join game. Please try again."),Ze("","join game error"),Dn(null),Xe(0,"join game error"),Lr(null)}},[Ne,nt]=k.useState(null),[un,Nn]=k.useState(""),[hr,Cn]=k.useState(!0),Ob=()=>{console.log("[FIREBASE] No fallback to stop")},Cm=U=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",U),Ya.current&&(console.log("[FIREBASE] Removing existing subscription"),Ya.current());const z=is.subscribeToGame(U,F=>{const ee=Qa.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",ee),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof ee),console.log("[DEBUG] Current playerColor state:",Qe),console.log("[DEBUG] Pending join game data:",!!sn),!F){console.log("[DEBUG] No game data received");return}if(sn&&ee===sn.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",Qe),F.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),qa(null)),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&Lr(F.blue_player===ee?F.red_player:F.blue_player);else if(ee&&F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Te=ee.toLowerCase()===F.blue_player.toLowerCase(),Se=ee.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Te),console.log("[DEBUG] Red player match:",Se),console.log("[DEBUG] Blue comparison:",`${ee.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${ee.toLowerCase()} === ${F.red_player.toLowerCase()}`),Te&&Qe!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),Dn("blue"),Lr(F.red_player)):Se&&Qe!=="red"?(console.log("[DEBUG] Setting player color to RED"),Dn("red"),Lr(F.blue_player)):!Te&&!Se&&Qe!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),Dn(null),Lr(null)):console.log("[DEBUG] Player color already correctly set to:",Qe)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!ee),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",F==null?void 0:F.red_player),console.log("[DEBUG] - Current playerColor state:",Qe),console.log("[DEBUG] - Contract game data available:",!!Q),Qe&&(Qe==="blue"||Qe==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",Qe);return}else if(Q&&Array.isArray(Q)&&ee){const[Te,Se]=Q;if(Te&&Se){const ke=Te.toLowerCase()===ee.toLowerCase()?"blue":"red",ft=Te.toLowerCase()===ee.toLowerCase()?Se:Te;console.log("[DEBUG] Setting playerColor from contract fallback:",ke),Dn(ke),Lr(ft)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!Qe||Qe!=="blue"&&Qe!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),Dn(null));F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&Lr(F.blue_player===ee?F.red_player:F.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",F.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof F.bet_amount),console.log("[WAGER DEBUG] Full gameData:",F),console.log("[WAGER DEBUG] parsed value:",F.bet_amount?parseFloat(F.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",F.bet_amount?parseFloat(F.bet_amount)/1e18:"null");let le=0;F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?(le=parseFloat(F.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",le)):Q&&Array.isArray(Q)&&Q[5]?(le=parseFloat(Q[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",le)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Xe(le,"Firebase subscription"),F.board&&ce(_m(F.board)),F.current_player&&me(F.current_player),F.game_state==="active"?(Wt(_n.ACTIVE),ot("Game in progress")):F.game_state==="finished"?(Wt(_n.FINISHED),ot("Game finished")):F.game_state==="waiting"&&(Wt(_n.WAITING),ot("Waiting for opponent to join..."))});Ya.current=z,console.log("[FIREBASE] Firebase subscription setup complete for game:",U)};k.useEffect(()=>(te&&Cm(te),()=>{Ya.current&&Ya.current()}),[te,r]),k.useEffect(()=>{if(Q&&!Qe&&r){console.log("[FALLBACK] Setting playerColor from contract data");let U,z,F,ee,le,Te;if(Array.isArray(Q))[U,z,F,ee,le,Te]=Q;else{console.error("[FALLBACK] Unexpected contract data format:",Q);return}const Se=U===r?"blue":"red",ke=U===r?z:U;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",U),console.log("[FALLBACK] - player2 (red):",z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Se),console.log("[FALLBACK] - opponent:",ke),console.log("[FALLBACK] - inviteCode from contract:",le),Dn(Se),Lr(ke),!te&&le&&(console.log("[FALLBACK] Setting missing inviteCode:",le),pe(le)),te&&is.getGame(te).then(ft=>{ft&&(!ft.blue_player||!ft.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),Une()),ft&&ft.game_state==="active"&&sn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),qa(null))}).catch(ft=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",ft)})}},[Q,Qe,r,te]),k.useEffect(()=>{if(j&&sn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",j.transactionHash),console.log("[RECEIPT] Pending data:",sn);const{inviteCode:U,gameData:z,address:F}=sn;is.updateGame(U,{red_player:F,blue_player:z.blue_player,bet_amount:z.bet_amount,game_state:"active",last_move:null,board:{positions:kb(hu),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),ot("Game started! You are the red player."),Wt(_n.ACTIVE),qa(null)}).catch(ee=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",ee),ot("Game joined but failed to update game state. Please refresh.")})}},[j,sn]),k.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),ot(`Failed to join game: ${S.message||"Transaction rejected"}`),Ze("","join game error effect"),Dn(null),Xe(0,"join game error effect"),Lr(null),qa(null))},[S]);const kb=U=>{const z={};return U.forEach((F,ee)=>{F.forEach((le,Te)=>{z[`${ee}_${Te}`]=le})}),z},_m=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),hu;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const z=U.positions,F=U.rows||8,ee=U.cols||8,le=Array(F).fill(null).map(()=>Array(ee).fill(null));for(let Te=0;Te<F;Te++)for(let Se=0;Se<ee;Se++){const ke=`${Te}_${Se}`;le[Te][Se]=z[ke]||null}return console.log("[BOARD] Reconstructed from flat structure:",le),le}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((F,ee)=>{const le=Array.isArray(F)&&F.length===8;return le||console.warn(`[BOARD] Row ${ee} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),le})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),hu):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),hu)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),hu)},aR=U=>`${U.slice(0,6)}...${U.slice(-4)}`,Oi=U=>U&&U===U.toUpperCase()?"red":"blue",AB=(U,z)=>U>=0&&U<8&&z>=0&&z<8,Db=(U,z)=>{const F=z==="red"?"K":"k";let ee=-1,le=-1;for(let Se=0;Se<8;Se++){for(let ke=0;ke<8;ke++)if(U[Se][ke]===F){ee=Se,le=ke;break}if(ee!==-1)break}return ee===-1?!1:_ne(ee,le,z==="red"?"blue":"red",U)},_ne=(U,z,F,ee)=>{if(!ee||!Array.isArray(ee)||ee.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",ee),!1;for(let le=0;le<8;le++){if(!ee[le]||!Array.isArray(ee[le])||ee[le].length!==8)return console.warn("[SAFETY] Invalid board row structure:",ee[le]),!1;for(let Te=0;Te<8;Te++){const Se=ee[le][Te];if(Se&&Oi(Se)===F&&Am(Se,le,Te,U,z,!1,F,ee,!0))return!0}}return!1},Ane=(U,z,F,ee,le,Te=X)=>{const Se=Te[U][z];if(!Se)return!1;const ke=Te.map(ft=>[...ft]);return ke[F][ee]=Se,ke[U][z]=null,Db(ke,le)},Sne=(U,z,F,ee,le,Te)=>{const Se=U==="blue"?-1:1,ke=U==="blue"?6:1;if(!AB(ee,le)||U==="blue"&&ee>=z||U==="red"&&ee<=z)return!1;if(F===le&&ee===z+Se)return Te[ee][le]===null;if(F===le&&z===ke&&ee===z+2*Se)return Te[z+Se][F]===null&&Te[ee][le]===null;if(Math.abs(F-le)===1&&ee===z+Se){const ft=Te[ee][le];if(ft!==null&&Oi(ft)!==U)return!0;if(ft===null&&Hs.lastPawnDoubleMove){const{row:zt,col:St}=Hs.lastPawnDoubleMove;if(zt===z&&St===le){const jr=Te[z][le];if(jr&&jr.toLowerCase()==="p"&&Oi(jr)!==U)return!0}}}return!1},SB=(U,z,F,ee,le)=>U===F||z===ee,xne=(U,z,F,ee)=>{const le=Math.abs(U-F),Te=Math.abs(z-ee);return le===2&&Te===1||le===1&&Te===2},xB=(U,z,F,ee,le)=>Math.abs(U-F)===Math.abs(z-ee),Ine=(U,z,F,ee,le)=>SB(U,z,F,ee)||xB(U,z,F,ee),Nne=(U,z,F,ee,le)=>{const Te=Math.abs(z-ee),Se=Math.abs(F-le);if(Te<=1&&Se<=1)return!0;if(Te===0&&Se===2){if(U==="blue"&&!Hs.blueKingMoved){if(le===6&&!Hs.blueRooksMove.right||le===2&&!Hs.blueRooksMove.left)return!0}else if(U==="red"&&!Hs.redKingMoved&&(le===6&&!Hs.redRooksMove.right||le===2&&!Hs.redRooksMove.left))return!0}return!1},cR=(U,z,F,ee,le)=>{const Te=U===F?0:(F-U)/Math.abs(F-U),Se=z===ee?0:(ee-z)/Math.abs(ee-z);let ke=U+Te,ft=z+Se;for(;ke!==F||ft!==ee;){if(le[ke][ft]!==null)return!1;ke+=Te,ft+=Se}return!0},Am=(U,z,F,ee,le,Te=!0,Se=Oi(U),ke=X,ft=!1)=>{if(!U||!AB(ee,le))return!1;const zt=ke[ee][le];if(zt&&Oi(zt)===Se)return!1;let St=!1;switch(U.toUpperCase()){case"P":St=Sne(Se,z,F,ee,le,ke);break;case"R":St=SB(z,F,ee,le)&&cR(z,F,ee,le,ke);break;case"N":St=xne(z,F,ee,le);break;case"B":St=xB(z,F,ee,le)&&cR(z,F,ee,le,ke);break;case"Q":St=Ine(z,F,ee,le)&&cR(z,F,ee,le,ke);break;case"K":St=Nne(Se,z,F,ee,le);break}return!(!St||Te&&Ane(z,F,ee,le,Se,ke))},lR=(U,z=X,F=he)=>{const ee=[],le=z[U.row][U.col];if(!le||Oi(le)!==F)return ee;const Te=le.toLowerCase();if(Te==="p"){const Se=F==="blue"?-1:1,ke=F==="blue"?6:1,ft=U.row+Se;if(ft>=0&&ft<8&&Am(le,U.row,U.col,ft,U.col,!0,F,z,!0)&&ee.push({row:ft,col:U.col}),U.row===ke){const zt=U.row+2*Se;zt>=0&&zt<8&&Am(le,U.row,U.col,zt,U.col,!0,F,z,!0)&&ee.push({row:zt,col:U.col})}for(const zt of[-1,1]){const St=U.col+zt,jr=U.row+Se;St>=0&&St<8&&jr>=0&&jr<8&&Am(le,U.row,U.col,jr,St,!0,F,z,!0)&&ee.push({row:jr,col:St})}}else if(Te==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[ke,ft]of Se){const zt=U.row+ke,St=U.col+ft;zt>=0&&zt<8&&St>=0&&St<8&&Am(le,U.row,U.col,zt,St,!0,F,z,!0)&&ee.push({row:zt,col:St})}}else for(let Se=0;Se<8;Se++)for(let ke=0;ke<8;ke++)Am(le,U.row,U.col,Se,ke,!0,F,z,!0)&&ee.push({row:Se,col:ke});return ee},Tne=(U,z=X)=>{if(!Db(z,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=z[F][ee];if(le&&Oi(le)===U&&lR({row:F,col:ee},z,U).length>0)return!1}return!0},Rne=(U,z=X)=>{if(Db(z,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=z[F][ee];if(le&&Oi(le)===U&&lR({row:F,col:ee},z,U).length>0)return!1}return!0},IB=(U,z)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:z}),console.log("[CLICK] Game mode:",rn,"Player color:",Qe),console.log("[CLICK] Current player:",he,"Player color:",Qe),rn!==_n.ACTIVE||!Qe){console.log("[CLICK] Game not active or no player color");return}const F=X[U][z],ee=F?Oi(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",ee),he!==Qe){console.log("[CLICK] Not player's turn. Current:",he,"Player:",Qe);return}if(F&&ee===Qe){ct({row:U,col:z});const le=lR({row:U,col:z});ht(le);return}if(be&&et.some(le=>le.row===U&&le.col===z)){Pne(be,{row:U,col:z}),ct(null),ht([]);return}ct(null),ht([])},Pne=async(U,z)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:U,to:z,playerColor:Qe,currentPlayer:he}),!Qe||he!==Qe){console.log("[PROMOTION DEBUG] Early return - playerColor:",Qe,"currentPlayer:",he);return}const F=X[U.row][U.col];if(!F){console.log("[PROMOTION DEBUG] No piece at position:",U);return}if(console.log("[PROMOTION DEBUG] Piece:",F,"isPawn:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",he,"to.row:",z.row),console.log("[PROMOTION DEBUG] Player color:",Qe),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",he==="red"&&z.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",he==="blue"&&z.row===0),console.log("[PROMOTION DEBUG] - Full condition:",F.toUpperCase()==="P"&&(he==="red"&&z.row===7||he==="blue"&&z.row===0)),F.toUpperCase()==="P"&&(he==="red"&&z.row===7||he==="blue"&&z.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",z),Ib({from:U,to:z}),xb(!0);return}await NB(U,z)},NB=async(U,z,F="q")=>{if(!Qe||he!==Qe||!X[U.row][U.col])return;const Te=X[z.row][z.col]!==null;if(Uf(Te?"capture":"move"),Te){Rb({row:z.row,col:z.col,show:!0}),setTimeout(()=>{TB(U,z,F),Rb(null)},500);return}TB(U,z,F)},TB=async(U,z,F="q")=>{if(!Qe||he!==Qe)return;const ee=X[U.row][U.col];if(!ee)return;const le=X.map(zt=>[...zt]);let Te=ee;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",ee,"isPawn:",ee.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",Qe,"to.row:",z.row),console.log("[PROMOTION DEBUG] - promotion condition:",ee.toUpperCase()==="P"&&(Qe==="red"&&z.row===7||Qe==="blue"&&z.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",F),ee.toUpperCase()==="P"&&(Qe==="red"&&z.row===7||Qe==="blue"&&z.row===0)&&(Te=Qe==="red"?F.toUpperCase():F.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Te)),kne(le,U,z,ee),le[z.row][z.col]=Te,le[U.row][U.col]=null,Dne(U,z,ee);const Se=he==="blue"?"red":"blue";Db(le,Se)&&Uf("check");let ke="active",ft=null;if(Tne(Se,le))ke="finished",ft=he,ot(`${he==="red"?"Red":"Blue"} wins by checkmate!`),Uf(he===Qe?"victory":"loser"),One(),console.log("[SCORE] Updating scores - Winner:",he,"Loser:",Se),console.log("[SCORE] Contract game data:",Q),console.log("[SCORE] Player game invite code:",ie),Q&&Q.length>=2?(console.log("[SCORE] Using contract data for both players update"),await q(he,Q[0],Q[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await $1(he===Qe?"win":"loss"),await Em()),ft===Qe&&(console.log("[CONTRACT] Triggering automatic payout for winner:",ft),setTimeout(()=>{ln()},2e3));else if(Rne(Se,le)){const zt=he;ke="finished",ot(`${zt==="red"?"Red":"Blue"} wins by stalemate!`),Uf(zt===Qe?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",zt,"Loser:",Se),console.log("[SCORE] Contract game data:",Q),console.log("[SCORE] Player game invite code:",ie),Q&&Q.length>=2?(console.log("[SCORE] Using contract data for both players update"),await q(zt,Q[0],Q[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await $1(zt===Qe?"win":"loss"),await Em()),zt===Qe&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",zt),setTimeout(()=>{ln()},2e3))}try{if(!te){console.error("[BUG] inviteCode is missing when trying to update game!"),ot("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",te,"gameData:",{board:{positions:le},current_player:Se,game_state:ke,winner:ft,last_move:{from:U,to:z}});const St={...await is.getGame(te),board:{positions:kb(le),rows:8,cols:8},current_player:Se,game_state:ke,winner:ft,last_move:{from:U,to:z}};console.log("[FIREBASE] Storing data in Firebase:",St),await is.updateGame(te,St),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(zt){console.error("[DATABASE] Error updating game:",zt)}ce(le),me(Se),oR({from:U,to:z}),xb(!1),Ib(null)},One=()=>{Tb(!0);for(let U=0;U<50;U++)setTimeout(()=>{const z=document.createElement("div");z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(z),setTimeout(()=>z.remove(),300)},U*100);na.current&&clearTimeout(na.current),na.current=setTimeout(()=>{Tb(!1)},5e3)},kne=(U,z,F,ee)=>{if(ee.toLowerCase()==="k"&&Math.abs(z.col-F.col)===2){if(F.col===6)U[z.row][7]=null,U[z.row][5]=Oi(ee)==="blue"?"r":"R";else if(F.col===2){const le=U[z.row][3];U[z.row][0]=null,U[z.row][3]=Oi(ee)==="blue"?"r":"R",le&&le.toLowerCase()==="q"&&(U[z.row][4]=le)}}ee.toLowerCase()==="p"&&Math.abs(z.col-F.col)===1&&U[F.row][F.col]===null&&Hs.lastPawnDoubleMove&&Hs.lastPawnDoubleMove.row===z.row&&Hs.lastPawnDoubleMove.col===F.col&&(U[z.row][F.col]=null)},Dne=(U,z,F)=>{const ee={...Hs};F.toLowerCase()==="k"?Oi(F)==="blue"?ee.blueKingMoved=!0:ee.redKingMoved=!0:F.toLowerCase()==="r"&&(Oi(F)==="blue"?(U.col===0&&(ee.blueRooksMove.left=!0),U.col===7&&(ee.blueRooksMove.right=!0)):(U.col===0&&(ee.redRooksMove.left=!0),U.col===7&&(ee.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs(U.row-z.row)===2?ee.lastPawnDoubleMove={row:z.row,col:z.col}:ee.lastPawnDoubleMove=null,iR(ee)},Uf=U=>{if(!U1)return;let z="";switch(U){case"move":z="/images/move.mp3";break;case"capture":z="/images/capture.mp3";break;case"check":z="/images/play.mp3";break;case"checkmate":z="/images/victory.mp3";break;case"victory":z="/images/victory.mp3";break;case"loser":z="/images/loser.mp3";break;case"upgrade":z="/images/upgrade.mp3";break;default:z="/images/move.mp3"}try{const F=new Audio(z);F.volume=.3,F.play().catch(ee=>console.warn("Audio play failed:",ee))}catch(F){console.warn("Sound play failed:",F)}},Mne=async()=>{if(te)try{console.log("[RESET] Resetting corrupted game data for:",te);const U={board:{positions:kb(hu),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await is.updateGame(te,U),console.log("[RESET] Successfully reset game data"),ot("Game reset successfully. You can now make moves.")}catch(U){console.error("[RESET] Error resetting game data:",U),ot("Failed to reset game. Please try again.")}},Lne=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},Une=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!te||!r){console.log("[FIX] Missing inviteCode or address");return}try{const U=await is.getGame(te);if(!U){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",U),Q&&Array.isArray(Q)){const[z,F,ee,le,Te,Se]=Q;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",z),console.log("[FIX] - Contract player2 (red):",F),console.log("[FIX] - Contract isActive:",ee),console.log("[FIX] - Firebase blue_player:",U.blue_player),console.log("[FIX] - Firebase red_player:",U.red_player),console.log("[FIX] - Firebase game_state:",U.game_state);let ke=!1;const ft={};F&&F!=="0x0000000000000000000000000000000000000000"&&(!U.red_player||U.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),ft.red_player=F,ke=!0),z&&z!=="0x0000000000000000000000000000000000000000"&&(!U.blue_player||U.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),ft.blue_player=z,ke=!0),z&&F&&z!=="0x0000000000000000000000000000000000000000"&&F!=="0x0000000000000000000000000000000000000000"&&(U.game_state==="waiting"||!U.game_state)&&(console.log("[FIX] Activating game in Firebase"),ft.game_state="active",ft.current_player="blue",ke=!0),ee&&U.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),ft.game_state="active",ke=!0),ke?(console.log("[FIX] Updating Firebase with:",ft),await is.updateGame(te,ft),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(U){console.error("[FIX] Error fixing missing player data:",U)}},Bne=(U,z)=>{if(!X||!Array.isArray(X)||X.length!==8||!X[U]||!Array.isArray(X[U])||X[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:z,board:X}),y.jsx("div",{className:"square error",children:y.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${z}`);const F=X[U][z],ee=(be==null?void 0:be.row)===U&&(be==null?void 0:be.col)===z,le=et.some(ke=>ke.row===U&&ke.col===z),Te=Zl&&(Zl.from.row===U&&Zl.from.col===z||Zl.to.row===U&&Zl.to.col===z),Se=F&&F.toUpperCase()==="K"&&Db(X,Oi(F));return y.jsxs("div",{className:`square ${ee?"selected":""} ${le?"legal-move":""} ${Te?"last-move":""} ${Se?"square-in-check":""}`,onClick:()=>IB(U,z),onTouchStart:ke=>Gne(U,z,ke),onTouchMove:qne,children:[F&&y.jsx("div",{className:"piece",style:{backgroundImage:f2[F]?`url(${f2[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),le&&y.jsx("div",{className:"legal-move-indicator"})]},`${U}-${z}`)},$ne=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",Sb,"promotionMove:",vd),!Sb||!vd)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",Sb,"promotionMove:",vd),null;const U=he==="blue"?["q","r","b","n"]:["Q","R","B","N"];return y.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:y.jsxs("div",{className:"promotion-content",children:[y.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),y.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(z=>y.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",z),NB(vd.from,vd.to,z),xb(!1),Ib(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:y.jsx("img",{src:f2[z],alt:z,style:{width:"40px",height:"40px"}})},z))})]})})},Fne=()=>y.jsxs("div",{className:"piece-gallery",children:[y.jsx("h3",{children:"Chess Pieces"}),y.jsx("div",{className:"piece-gallery-grid",children:Cqe.map(U=>y.jsxs("div",{className:"piece-gallery-item",onClick:()=>{nR(L1===U.key?null:U.key)},children:[y.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),y.jsx("div",{className:"piece-gallery-name",children:U.name}),L1===U.key&&y.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]}),RB=()=>y.jsxs("div",{className:"chess-multiplayer-lobby",children:[y.jsx("h2",{children:"PvP Chess Lawby"}),s?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"status-bar",children:["Connected: ",aR(r)]}),y.jsxs("div",{className:"lobby-content",children:[y.jsxs("div",{className:"open-games",children:[y.jsx("h3",{children:"Open Games"}),y.jsxs("div",{className:"games-list",children:[XT.map(U=>y.jsxs("div",{className:"game-item",children:[y.jsxs("div",{className:"game-info",children:[y.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),y.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,Ia[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),y.jsxs("div",{className:"title",children:["Created by: ",aR(U.blue_player)]})]}),y.jsx("button",{className:"join-btn",onClick:()=>Ie(U.invite_code),children:"Join Game"})]},U.invite_code)),XT.length===0&&y.jsx("div",{className:"no-games",children:"No open games available"})]})]}),y.jsxs("div",{className:"actions",children:[y.jsx("button",{className:"create-btn",onClick:()=>Ql(!0),disabled:R1||Ga,children:"Create New Game"}),y.jsx("button",{onClick:K,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"}),y.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Back to Chess Home"})]}),R1&&y.jsxs("div",{className:"create-form",children:[y.jsx("h3",{children:"Create New Game"}),y.jsx(vqe,{selectedToken:wo,onTokenSelect:tR,wagerAmount:Va,onWagerChange:eR,disabled:Ga}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{className:"create-confirm-btn",onClick:ne,disabled:Va<=0||Ga,children:Ga?"Creating...":"Create Game"}),y.jsx("button",{className:"cancel-btn",onClick:()=>{Ql(!1),bn(!1)},children:"Cancel"})]})]})]})]}):y.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),jne=()=>y.jsxs("div",{className:"chess-multiplayer-waiting",children:[y.jsx("h2",{children:"Waiting for Opponent"}),y.jsxs("div",{className:"game-code",children:["Invite Code: ",y.jsx("strong",{children:te})]}),y.jsxs("div",{className:"game-info",children:[y.jsxs("p",{children:["Wager: ",wm," ",wo]}),y.jsx("p",{children:"Share this invite code with your opponent"})]}),y.jsxs("div",{className:"waiting-actions",children:[y.jsx("button",{onClick:Ot,disabled:W||se,className:"refund-game-btn",children:W||se?" Refunding...":" Refund Game"}),y.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),Wne=()=>y.jsxs("div",{className:"chess-game",children:[y.jsxs("div",{className:"chess-header",children:[y.jsx("h2",{children:" Multiplayer Chess"}),y.jsxs("div",{className:"chess-controls",children:[e&&y.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),y.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),y.jsxs("div",{className:"game-info",children:[y.jsxs("div",{className:"game-status-section",children:[y.jsx("span",{className:`status ${dr.includes("Check")?"check-status":""}`,children:dr}),y.jsxs("span",{className:`current-player ${he==="red"?"red-turn":"blue-turn"}`,children:["Current: ",he==="red"?" Red":" Blue"]})]}),y.jsxs("div",{className:"game-details-section",children:[y.jsxs("span",{className:"wager-display",children:[" ",wm," ",wo]}),zc&&y.jsxs("span",{className:"opponent-info",children:["vs ",aR(zc)]}),rn===_n.ACTIVE&&bm>0&&y.jsxs("span",{className:"timeout-countdown",style:{color:bm<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:[" ",Math.floor(bm/60),":",(bm%60).toString().padStart(2,"0")]})]}),rn===_n.FINISHED&&y.jsxs("div",{className:"game-finished-actions",children:[y.jsx("button",{onClick:ln,disabled:g,className:"claim-winnings-btn",children:g?" Claiming...":" Claim Winnings"}),y.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:" Back to Chess Home"})]})]}),y.jsxs("div",{className:"game-stable-layout",children:[y.jsxs("div",{className:"left-sidebar",children:[y.jsxs("div",{className:"sidebar-tabs",children:[y.jsx("button",{className:`tab-button ${We==="moves"?"active":""}`,onClick:()=>mt("moves"),children:" Moves"}),y.jsx("button",{className:`tab-button ${We==="leaderboard"?"active":""}`,onClick:()=>mt("leaderboard"),children:" Leaderboard"})]}),We==="moves"&&y.jsxs("div",{className:"move-history",children:[y.jsx("h4",{children:"Move History"}),y.jsx("div",{className:"moves",children:vt.slice().reverse().map((U,z)=>y.jsx("div",{className:"move",children:U},vt.length-1-z))})]}),We==="leaderboard"&&y.jsxs("div",{className:"leaderboard",children:[y.jsx("h4",{children:"Leaderboard"}),y.jsx("div",{className:"leaderboard-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"#"}),y.jsx("th",{children:"Player"}),y.jsx("th",{children:"W"}),y.jsx("th",{children:"L"}),y.jsx("th",{children:"D"}),y.jsx("th",{children:"Pts"})]})}),y.jsx("tbody",{children:Pb.map((U,z)=>y.jsxs("tr",{children:[y.jsx("td",{children:z+1}),y.jsx("td",{children:U.username}),y.jsx("td",{children:U.wins}),y.jsx("td",{children:U.losses}),y.jsx("td",{children:U.draws}),y.jsx("td",{children:U.points})]},U.username))})]})})]})]}),y.jsxs("div",{className:"center-area",children:[y.jsxs("div",{className:"chessboard-container",children:[y.jsx("div",{className:"chessboard",children:Array.from({length:8},(U,z)=>y.jsx("div",{className:"board-row",children:Array.from({length:8},(F,ee)=>Bne(z,ee))},z))}),vm&&vm.show&&y.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${vm.row*12.5}%`,left:`${vm.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:y.jsx("div",{className:"explosion-effect",children:""})})]}),y.jsxs("div",{className:"game-controls",children:[y.jsx("div",{className:"control-section",children:dr.includes("corrupted")&&y.jsx("button",{className:"reset-game-btn",onClick:Mne,children:" Reset Game"})}),y.jsx("div",{className:"settings-section",children:y.jsxs("div",{className:"sound-controls",children:[y.jsxs("label",{className:"control-label",children:[y.jsx("input",{type:"checkbox",id:"sound-toggle",checked:U1,onChange:U=>rR(U.target.checked),className:"control-checkbox"}),y.jsx("span",{className:"control-text",children:" Sound Effects"})]}),y.jsxs("label",{className:"control-label",children:[y.jsx("input",{type:"checkbox",id:"victory-toggle",checked:Nb,onChange:U=>Tb(U.target.checked),className:"control-checkbox"}),y.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),f&&y.jsx("button",{className:"claim-winnings-btn",onClick:ln,disabled:g||P||V,children:g||P||V?" Claiming...":" Claim Winnings"})]})]}),y.jsx("div",{className:"right-sidebar"})]}),Df&&y.jsx("div",{className:"piece-gallery-panel",children:Fne()}),$ne(),Nb&&y.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[y.jsx("div",{className:"balloons-container"}),y.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),y.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[y.jsx("button",{onClick:()=>Wt(_n.LOBBY),children:"Back to Lobby"}),y.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),zne=()=>null;k.useEffect(()=>{Em(),K(),Lne();const U=setInterval(K,3e4);return()=>{clearInterval(U),Ya.current&&Ya.current(),na.current&&clearTimeout(na.current)}},[]),console.log("[RENDER] Current game mode:",rn,"Game ID:",te);const Hne=(()=>{switch(rn){case _n.LOBBY:return RB();case _n.WAITING:return jne();case _n.ACTIVE:case _n.FINISHED:return Wne();default:return RB()}})(),Gne=(U,z,F)=>{F.preventDefault(),IB(U,z)},qne=U=>{U.preventDefault()};return y.jsxs(y.Fragment,{children:[Hne,zne()]})},p2={AI:"ai"},Sqe=1992,rS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},OW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],xqe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],Iqe=()=>{const[t,e]=k.useState(!1),n=k.useRef(null),r=k.useRef(!1);k.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=k.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=k.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},Nqe=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!1),s=k.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=k.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},Tqe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=b1(),i=wd();jFe();const{open:o}=y1(),[a,c]=k.useState(p2.AI),[l,u]=k.useState(()=>JSON.parse(JSON.stringify(OW))),[d,h]=k.useState("blue"),[f,p]=k.useState(null),[g,w]=k.useState("active"),[m,b]=k.useState("hard"),[v,A]=k.useState("Connect wallet to play"),[C,T]=k.useState([]),[x,N]=k.useState([]),[S,D]=k.useState([]),[P,$]=k.useState(null),[G,W]=k.useState(!1),[I,R]=k.useState(!1),[B,O]=k.useState(null),[M,j]=k.useState(null),[V]=k.useState(""),[se]=k.useState(.1),[ie,Q]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),te=k.useRef(null),pe=k.useRef(!1),Ze=k.useRef(l),Xe=k.useRef(null),We=k.useRef(null),mt=k.useRef(!1),Ot=k.useRef(!1),[ln,X]=k.useState(!1),[ce,he]=k.useState(!1),[me,be]=k.useState(!1),[ct]=k.useState(!0);k.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:et}=Iqe(),{getOpeningData:ht}=Nqe(),[vt,qn]=k.useState("loading"),[dr,ot]=k.useState(!1),[rn,Wt]=k.useState([]),[Qe,Dn]=k.useState(!1),[zc,Lr]=k.useState(()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*q.length),ae=q[K];return console.log("[DEBUG] Initial random chessboard selected:",ae,"(index:",K,")"),ae}),[wm,vB]=k.useState(!0),[XT,_b]=k.useState(!1);k.useEffect(()=>{!s||!r?(A("Connect wallet to play"),W(!1),X(!1),o()):i!==Sqe?(A("Switch to Sanko Testnet to play"),W(!1),X(!1),o()):A("Select game mode")},[s,r,i,o]);const R1=()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*q.length),ae=q[K];return console.log("[DEBUG] Random chessboard selected:",ae,"(index:",K,")"),ae};k.useEffect(()=>{if(et)qn("ready");else{const q=window.setTimeout(()=>{et||(qn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(q)}},[et]),k.useEffect(()=>{Ze.current=l},[l]),k.useEffect(()=>(!te.current&&typeof Worker<"u"&&(te.current=new Worker("/aiWorker.js"),te.current.onmessage=q=>{console.log("[DEBUG] AI worker response received:",q.data);const{move:K,nodes:ae}=q.data;K&&pe.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",ae,"nodes"),pe.current=!1,We.current&&(window.clearTimeout(We.current),We.current=null),Xe.current&&Xe.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},te.current.onerror=q=>{console.error("[DEBUG] AI worker error:",q),A("AI worker error - using fallback mode"),pe.current=!1}),()=>{te.current&&(te.current.terminate(),te.current=null),We.current&&(window.clearTimeout(We.current),We.current=null)}),[]),k.useEffect(()=>{Ql()},[]);const Ql=async()=>{try{await Iee();const q=await xee(20);N(q),console.log("Leaderboard data loaded:",q)}catch(q){A("Failed to load leaderboard"),console.error("Leaderboard error:",q)}},Ga=async q=>{if(console.log("[DEBUG] updateScore called with:",q),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Hg(r)),await PI(r,q)?(console.log("[DEBUG] Successfully updated score for:",Hg(r)),await Ql()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},bn=q=>q&&q===q.toUpperCase()?"red":"blue",ns=(q,K)=>q>=0&&q<8&&K>=0&&K<8,kf=(q,K)=>`${String.fromCharCode(97+K)}${8-q}`,sn=(q,K)=>{const ae=K==="blue"?"k":"K";let oe=null;for(let Ne=0;Ne<8;Ne++){for(let nt=0;nt<8;nt++)if(q[Ne][nt]===ae){oe={row:Ne,col:nt};break}if(oe)break}if(!oe)return console.log(`King not found for ${K}`),!1;const ne=K==="blue"?"red":"blue",Ie=qa(oe.row,oe.col,ne,q);return console.log(`${K} king at ${oe.row},${oe.col} under attack: ${Ie}`),Ie},qa=(q,K,ae,oe)=>{for(let ne=0;ne<8;ne++)for(let Ie=0;Ie<8;Ie++){const Ne=oe[ne][Ie];if(Ne&&bn(Ne)===ae&&Jl(Ne,ne,Ie,q,K,!1,ae,oe,!0))return!0}return!1},EB=(q,K,ae,oe,ne,Ie=l)=>{const Ne=Ie.map(un=>[...un]),nt=Ne[q][K];return Ne[ae][oe]=nt,Ne[q][K]=null,sn(Ne,ne)},CB=(q,K,ae,oe,ne,Ie)=>{const Ne=q==="blue"?-1:1,nt=q==="blue"?6:1;if(!ns(oe,ne)||q==="blue"&&oe>=K||q==="red"&&oe<=K)return!1;const un=Math.abs(oe-K),Nn=Math.abs(ne-ae);if((un===1&&Nn===0||un===2&&Nn===0&&K===nt||un===1&&Nn===1)&&un<=2&&Nn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:q,from:`${K},${ae}`,to:`${oe},${ne}`}),ae===ne&&oe===K+Ne)return Ie[oe][ne]===null;if(ae===ne&&K===nt&&oe===K+2*Ne)return Ie[K+Ne][ae]===null&&Ie[oe][ne]===null;if(Math.abs(ae-ne)===1&&oe===K+Ne){const Cn=Ie[oe][ne];return Cn!==null&&bn(Cn)!==q}if(Math.abs(ae-ne)===1&&oe===K+Ne){const Cn=Ie[K][ne];if(Cn&&bn(Cn)!==q&&Cn.toLowerCase()==="p"&&ie.lastPawnDoubleMove&&ie.lastPawnDoubleMove.row===K&&ie.lastPawnDoubleMove.col===ne)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},Va=(q,K,ae,oe,ne)=>q!==ae&&K!==oe?!1:O1(q,K,ae,oe,ne),eR=(q,K,ae,oe)=>{const ne=Math.abs(q-ae),Ie=Math.abs(K-oe);return ne===2&&Ie===1||ne===1&&Ie===2},wo=(q,K,ae,oe,ne)=>Math.abs(q-ae)!==Math.abs(K-oe)?!1:O1(q,K,ae,oe,ne),tR=(q,K,ae,oe,ne)=>Va(q,K,ae,oe,ne)||wo(q,K,ae,oe,ne),P1=(q,K,ae,oe,ne)=>{const Ie=Math.abs(K-oe),Ne=Math.abs(ae-ne);if(Ie<=1&&Ne<=1)return!0;if(Ie===0&&Ne===2){if(q==="blue"&&!ie.blueKingMoved){if(ne===6&&!ie.blueRooksMove.right||ne===2&&!ie.blueRooksMove.left)return!0}else if(q==="red"&&!ie.redKingMoved&&(ne===6&&!ie.redRooksMove.right||ne===2&&!ie.redRooksMove.left))return!0}return!1},O1=(q,K,ae,oe,ne)=>{const Ie=q===ae?0:(ae-q)/Math.abs(ae-q),Ne=K===oe?0:(oe-K)/Math.abs(oe-K);let nt=q+Ie,un=K+Ne;for(;nt!==ae||un!==oe;){if(ne[nt][un]!==null)return!1;nt+=Ie,un+=Ne}return!0},Jl=(q,K,ae,oe,ne,Ie=!0,Ne=bn(q),nt=l,un=!1)=>{if(!ns(oe,ne))return un||console.log("[ILLEGAL MOVE] Out of board:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:ne}),!1;const Nn=nt[oe][ne];if(Nn&&bn(Nn)===Ne)return un||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:ne}),!1;const hr=q.toLowerCase();let Cn=!1;switch(hr){case"p":Cn=CB(Ne,K,ae,oe,ne,nt);break;case"r":Cn=Va(K,ae,oe,ne,nt);break;case"n":Cn=eR(K,ae,oe,ne);break;case"b":Cn=wo(K,ae,oe,ne,nt);break;case"q":Cn=tR(K,ae,oe,ne,nt);break;case"k":Cn=P1(Ne,K,ae,oe,ne);break}return Cn?Cn&&Ie&&EB(K,ae,oe,ne,Ne,nt)?(un||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:ne}),!1):Cn:(un||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:ne,playerColor:Ne,pieceType:hr,targetPiece:nt[oe][ne],targetPieceColor:nt[oe][ne]?bn(nt[oe][ne]):null}),!1)},bo=(q,K=l,ae=d)=>{const oe=[],ne=K[q.row][q.col];if(!ne||bn(ne)!==ae)return oe;const Ie=ne.toLowerCase();if(Ie==="p"){const Ne=ae==="blue"?-1:1,nt=ae==="blue"?6:1,un=q.row+Ne;if(un>=0&&un<8&&Jl(ne,q.row,q.col,un,q.col,!0,ae,K,!0)&&oe.push({row:un,col:q.col}),q.row===nt){const Nn=q.row+2*Ne;Nn>=0&&Nn<8&&Jl(ne,q.row,q.col,Nn,q.col,!0,ae,K,!0)&&oe.push({row:Nn,col:q.col})}for(const Nn of[-1,1]){const hr=q.col+Nn,Cn=q.row+Ne;hr>=0&&hr<8&&Cn>=0&&Cn<8&&Jl(ne,q.row,q.col,Cn,hr,!0,ae,K,!0)&&oe.push({row:Cn,col:hr})}}else if(Ie==="n"){const Ne=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[nt,un]of Ne){const Nn=q.row+nt,hr=q.col+un;Nn>=0&&Nn<8&&hr>=0&&hr<8&&Jl(ne,q.row,q.col,Nn,hr,!0,ae,K,!0)&&oe.push({row:Nn,col:hr})}}else for(let Ne=0;Ne<8;Ne++)for(let nt=0;nt<8;nt++)Jl(ne,q.row,q.col,Ne,nt,!0,ae,K,!0)&&oe.push({row:Ne,col:nt});return oe},k1=(q,K=l)=>{if(!sn(K,q))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const ne=K[ae][oe];if(ne&&bn(ne)===q&&bo({row:ae,col:oe},K,q).length>0)return!1}return!0},bm=(q,K=l)=>{if(sn(K,q))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const ne=K[ae][oe];if(ne&&bn(ne)===q&&bo({row:ae,col:oe},K,q).length>0)return!1}return!0},D1=(q,K)=>{if(g!=="active"||pe.current)return;const ae=l[q][K],oe=ae?bn(ae):null;if(f&&S.some(ne=>ne.row===q&&ne.col===K)){Ka(f,{row:q,col:K});return}if(ae&&oe===d){const ne=bo({row:q,col:K});p({row:q,col:K}),D(ne);return}p(null),D([])},Ka=(q,K,ae=!1)=>{const oe=l[q.row][q.col];if(console.log("[MOVE ATTEMPT]",{from:q,to:K,piece:oe,isAIMove:ae,board:JSON.parse(JSON.stringify(l)),moveHistory:C}),!!oe){if(oe.toLowerCase()==="p"&&(bn(oe)==="blue"&&K.row===0||bn(oe)==="red"&&K.row===7)){O({from:q,to:K}),R(!0);return}Rb(q,K,"q",ae)}};Xe.current=Ka;const M1=k.useCallback((q,K,ae=!1)=>{Dn(!0);const oe=l.map(Ne=>[...Ne]),ne=oe[q.row][q.col];if(!ne)return;oe[K.row][K.col]=ne,oe[q.row][q.col]=null,U1(oe,q,K,ne);const Ie=rR(q,K);if(T(Ne=>{const nt=[...Ne,Ie];return console.log("[MOVE HISTORY UPDATED]",nt),nt}),$({from:q,to:K}),p(null),D([]),C.length<10&&!ae){const Ne=kW(oe,d==="blue"?"red":"blue");ht(Ne).then(nt=>{nt&&nt.moves&&nt.moves.length>0&&(Wt(nt.moves.slice(0,3)),ot(!0),setTimeout(()=>ot(!1),5e3))})}vm(q,K,ne),h(Ne=>{const nt=Ne==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",nt),Ab(oe,nt),nt}),Ab(oe,d==="blue"?"red":"blue"),u(oe),pe.current=!1,mt.current=!1,Ot.current=!1,Dn(!1)},[l,d,C,ht]);k.useEffect(()=>{if(!pe.current&&a==="ai"&&d==="red"&&!mt.current&&!Qe)if(pe.current=!0,m==="easy")setTimeout(()=>{const q=Df(l);q?Ka(q.from,q.to,!0):pe.current=!1},600);else{A("AI is calculating...");const q=kW(l,d);if(Ot.current)return;Ot.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:q,difficulty:m,movetime:3e3})}).then(ae=>{if(ae.ok)return ae.json();throw new Error("API call failed")}).then(ae=>{console.log("[DEBUG] Stockfish API response:",ae);const oe=ae.bestmove||ae.move;if(oe&&oe!=="(none)"&&oe.length===4){const ne=oe.charCodeAt(0)-97,Ie=parseInt(oe[1]),Ne=oe.charCodeAt(2)-97,nt=parseInt(oe[3]),un=8-Ie,Nn=8-nt;if(console.log("[DEBUG] Parsed move:",{fromCol:ne,fromRowStockfish:Ie,toCol:Ne,toRowStockfish:nt,fromRow:un,toRow:Nn}),ne>=0&&ne<8&&un>=0&&un<8&&Ne>=0&&Ne<8&&Nn>=0&&Nn<8){const hr={from:{row:un,col:ne},to:{row:Nn,col:Ne}},Cn=l[un][ne];if(console.log("[DEBUG] Move validation:",{piece:Cn,moveObj:hr,isValid:Cn&&bn(Cn)==="red"&&Jl(Cn,un,ne,Nn,Ne,!0,"red",l)}),Cn&&bn(Cn)==="red"&&Jl(Cn,un,ne,Nn,Ne,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",hr),Ka(hr.from,hr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Ob=Df(l);Ob&&Ka(Ob.from,Ob.to,!0),pe.current=!1,Ot.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const hr=Df(l);hr&&Ka(hr.from,hr.to,!0),pe.current=!1,Ot.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ne=Df(l);ne&&Ka(ne.from,ne.to,!0),pe.current=!1,Ot.current=!1}}).catch(ae=>{console.error("[DEBUG] Stockfish API error:",ae),A("AI error. Falling back to random moves.");const oe=Df(l);oe&&Ka(oe.from,oe.to,!0),pe.current=!1,Ot.current=!1})}},[d,a,m,l,ie,et]);const Ab=(q,K)=>{console.log("Checking game end for player:",K);const ae=q.some(ne=>ne.some(Ie=>Ie==="k")),oe=q.some(ne=>ne.some(Ie=>Ie==="K"));if(!ae)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),Ga("loss"),be(!0),setTimeout(()=>be(!1),3e3),"checkmate";if(!oe)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),Ga("win"),be(!0),setTimeout(()=>be(!1),3e3),"checkmate";if(console.log("Is king in check:",sn(q,K)),k1(K,q)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(q)),moveHistory:C}),w("checkmate");const ne=K==="blue"?"red":"blue";return ne==="blue"?(A("Checkmate! You win!"),vo("victory"),Hs(!0),_b(!0),Mf(),Ga("win"),be(!0),setTimeout(()=>be(!1),3e3)):(A(`Checkmate! ${ne==="red"?"AI":"Opponent"} wins!`),vo("loser"),Pb(!0),Ga("loss"),be(!0),setTimeout(()=>be(!1),3e3)),"checkmate"}if(bm(K,q)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(q)),moveHistory:C}),w("stalemate");const ne=K==="blue"?"red":"blue";return ne==="blue"?(A("Stalemate! You win!"),vo("victory"),Hs(!0),_b(!0),Mf(),Ga("win"),be(!0),setTimeout(()=>be(!1),3e3)):(A(`Stalemate! ${ne==="red"?"AI":"Opponent"} wins!`),vo("loser"),Pb(!0),Ga("loss"),be(!0),setTimeout(()=>be(!1),3e3)),"stalemate"}return sn(q,K)?(console.log("CHECK detected!"),vo("check"),A(`${K==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},Df=q=>{const K=[];for(let ne=0;ne<8;ne++)for(let Ie=0;Ie<8;Ie++){const Ne=q[ne][Ie];Ne&&bn(Ne)==="red"&&K.push({row:ne,col:Ie})}for(let ne=K.length-1;ne>0;ne--){const Ie=Math.floor(Math.random()*(ne+1));[K[ne],K[Ie]]=[K[Ie],K[ne]]}const ae=[],oe=[];for(const ne of K){const Ie=bo(ne,q,"red");for(const Ne of Ie){const nt=q[Ne.row][Ne.col];if(nt&&bn(nt)==="blue"){const Nn={p:100,n:320,b:330,r:500,q:900,k:2e4}[nt.toLowerCase()]||0;ae.push({from:ne,to:Ne,value:Nn})}else oe.push({from:ne,to:Ne})}}if(ae.length>0&&Math.random()<.3){ae.sort((ne,Ie)=>ne.value-Ie.value);for(const ne of ae){const Ie=q.map(nt=>[...nt]),Ne=Ie[ne.from.row][ne.from.col];if(Ie[ne.to.row][ne.to.col]=Ne,Ie[ne.from.row][ne.from.col]=null,!sn(Ie,"red"))return{from:ne.from,to:ne.to}}}for(const ne of oe){const Ie=q.map(nt=>[...nt]),Ne=Ie[ne.from.row][ne.from.col];if(Ie[ne.to.row][ne.to.col]=Ne,Ie[ne.from.row][ne.from.col]=null,!sn(Ie,"red"))return ne}ae.sort((ne,Ie)=>ne.value-Ie.value);for(const ne of ae){const Ie=q.map(nt=>[...nt]),Ne=Ie[ne.from.row][ne.from.col];if(Ie[ne.to.row][ne.to.col]=Ne,Ie[ne.from.row][ne.from.col]=null,!sn(Ie,"red"))return{from:ne.from,to:ne.to}}return null},_B=()=>{u(JSON.parse(JSON.stringify(OW))),h("blue"),p(null),w("active"),T([]),D([]),$(null),W(!1),A("Select game mode"),Q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),pe.current&&(pe.current=!1)},L1=()=>{if(Ya(),console.log("[DEBUG] startGame called, difficulty:",m,"gameMode:",a),a==="online"){W(!1),X(!1);return}W(!0),X(!1),A("Game started! Your turn");const q=R1();Lr(q),console.log("[DEBUG] Game started with chessboard:",q)},nR=q=>`${q.slice(0,6)}...${q.slice(-4)}`,Sb=(q,K)=>{const ae=l[q][K],oe=(f==null?void 0:f.row)===q&&(f==null?void 0:f.col)===K,ne=S.some(Ne=>Ne.row===q&&Ne.col===K),Ie=P&&(P.from.row===q&&P.from.col===K||P.to.row===q&&P.to.col===K);return y.jsxs("div",{className:`square ${oe?"selected":""} ${ne?"legal-move":""} ${Ie?"last-move":""}`,onClick:()=>D1(q,K),onTouchStart:Ne=>Em(q,K,Ne),onTouchMove:$1,children:[ae&&y.jsx("div",{className:"piece",style:{backgroundImage:rS[ae]?`url(${rS[ae]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ne&&y.jsx("div",{className:"legal-move-indicator"})]},`${q}-${K}`)},xb=()=>{if(!I||!B)return null;const q=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return y.jsx("div",{className:"promotion-dialog",children:y.jsxs("div",{className:"promotion-content",children:[y.jsx("h3",{children:"Choose promotion piece:"}),y.jsx("div",{className:"promotion-pieces",children:q.map(K=>y.jsx("div",{className:"promotion-piece",onClick:()=>{Rb(B.from,B.to,K),R(!1),O(null)},style:{backgroundImage:rS[K]?`url(${rS[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[vd,Ib]=k.useState(null),Nb=(q=!1,K="Click a piece to learn more about it.")=>y.jsxs("div",{className:`piece-gallery${q?" piece-gallery-sm":""}`,children:[y.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),y.jsx("div",{className:"piece-gallery-grid",children:xqe.map(ae=>y.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Ib(vd===ae.key?null:ae.key)},children:[y.jsx("img",{src:ae.img,alt:ae.name,className:"piece-gallery-img"}),y.jsx("div",{className:"piece-gallery-name",children:ae.name}),vd===ae.key&&y.jsx("div",{className:"piece-gallery-desc",children:ae.desc})]},ae.key))}),y.jsx("div",{className:"piece-gallery-tip",children:K})]}),Tb=()=>y.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:y.jsx("div",{className:"difficulty-controls-col",children:y.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[y.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),y.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[y.jsx("button",{className:`difficulty-btn${m==="easy"?" selected":""}`,style:{background:m==="easy"?"#00ff00":"transparent",color:m==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:m==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),y.jsx("button",{className:`difficulty-btn${m==="hard"?" selected":""}`,style:{background:m==="hard"?"#00ff00":"transparent",color:m==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:m==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),y.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{L1()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[y.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),U1=(q,K,ae,oe)=>{if(oe.toLowerCase()==="p"&&(bn(oe)==="blue"&&ae.row===0||bn(oe)==="red"&&ae.row===7)){const ne=bn(oe)==="blue"?"q":"Q";q[ae.row][ae.col]=ne}if(oe.toLowerCase()==="k"&&Math.abs(K.col-ae.col)===2){if(ae.col===6)q[K.row][7]=null,q[K.row][5]=bn(oe)==="blue"?"r":"R";else if(ae.col===2){const ne=q[K.row][3];q[K.row][0]=null,q[K.row][3]=bn(oe)==="blue"?"r":"R",ne&&ne.toLowerCase()==="q"&&(q[K.row][4]=ne)}}},rR=(q,K,ae,oe)=>{const ne=kf(q.row,q.col),Ie=kf(K.row,K.col);return`${ne}-${Ie}`},vm=(q,K,ae)=>{const oe={...ie};ae.toLowerCase()==="k"?bn(ae)==="blue"?oe.blueKingMoved=!0:oe.redKingMoved=!0:ae.toLowerCase()==="r"&&(bn(ae)==="blue"?(q.col===0&&(oe.blueRooksMove.left=!0),q.col===7&&(oe.blueRooksMove.right=!0)):(q.col===0&&(oe.redRooksMove.left=!0),q.col===7&&(oe.redRooksMove.right=!0))),ae.toLowerCase()==="p"&&Math.abs(q.row-K.row)===2?oe.lastPawnDoubleMove={row:K.row,col:K.col}:oe.lastPawnDoubleMove=null,Q(oe)},Rb=(q,K,ae="q",oe=!1)=>{l[q.row][q.col];const Ie=l[K.row][K.col]!==null;if(vo(Ie?"capture":"move"),Ie){j({row:K.row,col:K.col,show:!0}),setTimeout(()=>{M1(q,K,oe),j(null)},500);return}M1(q,K,oe)},vo=q=>{if(!wm)return;let K="";switch(q){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;case"loser":K="/images/loser.mp3";break;case"upgrade":K="/images/upgrade.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},Mf=()=>{vo("victory");for(let q=0;q<50;q++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},q*100);for(let q=0;q<15;q++)setTimeout(()=>{const K=document.createElement("div"),ae=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],oe=ae[Math.floor(Math.random()*ae.length)];K.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${oe};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),6e3)},q*200);setTimeout(()=>_b(!1),5e3)},[sR,Hs]=k.useState(!1),[iR,Pb]=k.useState(!1),B1=()=>{Hs(!1),Pb(!1)},Zl=()=>{B1(),_B()},oR=()=>{B1(),W(!1)},Ya=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},na=a==="online",[Qa,Lf]=k.useState("leaderboard"),Em=(q,K,ae)=>{ae.preventDefault(),D1(q,K)},$1=q=>{q.preventDefault()};return y.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ct?" chess-dark-mode":""}${G?" game-active":""}`,children:[y.jsxs("div",{className:"chess-header",children:[y.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),y.jsxs("div",{className:"chess-controls",children:[e&&y.jsx("button",{onClick:e,children:"_"}),y.jsx("button",{onClick:t,children:""})]})]}),y.jsx("div",{className:"game-stable-layout",children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"left-sidebar",children:[Qa==="leaderboard"&&y.jsxs("div",{className:"leaderboard-compact",children:[y.jsx("h3",{children:"Leaderboard"}),y.jsx("div",{className:"leaderboard-table-compact",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Rank"}),y.jsx("th",{children:"Player"}),y.jsx("th",{children:"Pts"})]})}),y.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,K)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const ae=q;return y.jsxs("tr",{children:[y.jsx("td",{children:K+1}),y.jsx("td",{children:nR(ae.username)}),y.jsx("td",{children:ae.points})]},ae.username)}return null})})]})})]}),Qa==="moves"&&G&&y.jsxs("div",{className:"move-history-compact",children:[y.jsx("div",{className:"move-history-title",children:"Moves"}),y.jsx("ul",{className:"move-history-list-compact",children:C.slice().reverse().map((q,K)=>y.jsx("li",{children:q},C.length-1-K))})]}),Qa==="gallery"&&y.jsx("div",{className:"piece-gallery-compact",children:Nb(!0,"Click pieces to learn more")})]}),y.jsxs("div",{className:"center-area",children:[G&&y.jsxs("div",{className:"game-info-compact",children:[y.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===p2.AI&&y.jsxs("span",{className:"mode-play",children:[m==="easy"?"Easy":"Hard"," AI"]}),na&&y.jsxs("span",{className:"wager-display",children:["Wager: ",se," tDMT"]})]}),G?y.jsxs("div",{className:"chess-main-area",children:[y.jsx("div",{className:"chessboard-container",children:y.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${zc})`},children:[Array.from({length:8},(q,K)=>y.jsx("div",{className:"board-row",children:Array.from({length:8},(ae,oe)=>Sb(K,oe))},K)),M&&M.show&&y.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:y.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),y.jsxs("div",{className:"game-controls-compact",children:[y.jsxs("div",{className:"sidebar-toggle-group",children:[y.jsx("button",{className:Qa==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Lf("leaderboard"),children:"Leaderboard"}),y.jsx("button",{className:Qa==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Lf("moves"),children:"Moves"}),y.jsx("button",{className:Qa==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Lf("gallery"),children:"Gallery"})]}),y.jsx("button",{onClick:Zl,children:"New Game"}),y.jsx("button",{onClick:oR,children:"Menu"})]})]}):ln?Tb():na?y.jsx(Cne,{onClose:t,onMinimize:e,fullscreen:n}):y.jsxs("div",{className:"game-mode-panel-streamlined",children:[y.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:y.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),y.jsxs("div",{className:"mode-selection-compact",children:[y.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),y.jsx("button",{className:`mode-btn-compact ${na?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===p2.AI&&y.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),na&&y.jsxs("div",{className:"pvp-info",children:[y.jsx("p",{children:"Challenge other players with tDMT wagers"}),y.jsx("p",{children:"Create or join games instantly"})]}),y.jsxs("div",{className:"help-section-compact",children:[y.jsx("h4",{children:"How to Play"}),y.jsxs("div",{className:"help-content",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),y.jsx("p",{children:y.jsx("strong",{children:"Piece Movements:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Special Rules:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Game Modes:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Multiplayer:"})," wage tDMT and challenge other players on Sanko testnet. Winner takes the pot minus 5% house fee."]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Multiplayer Flow:"})}),y.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsx("li",{children:"Connect your wallet to Sanko testnet"}),y.jsx("li",{children:"Create a game and set your wager amount in tDMT"}),y.jsx("li",{children:"Share your invite code with an opponent"}),y.jsx("li",{children:"Opponent joins and matches your wager"}),y.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),y.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Lawb Chess Testnet Contract:"})," ",y.jsx("a",{href:"https://testnet.sankoscan.io/address/0x3112AF5728520F52FD1C6710dD7bD52285a68e47?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"})]}),y.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Network Name:"})," Sanko Testnet"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"RPC URL:"})," https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Chain ID:"})," 1992"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Currency Symbol:"})," tDMT"]})]})]})]}),y.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:y.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),y.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[y.jsx("button",{className:Qa==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Lf("leaderboard"),children:"Leaderboard"}),y.jsx("button",{className:Qa==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Lf("gallery"),children:"Gallery"})]})]})]})]})}),ce&&Nb(!0),I&&xb(),me&&y.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),sR&&y.jsxs("div",{className:"victory-overlay",children:[y.jsx("div",{className:"balloons-container"}),y.jsx("div",{className:"victory-modal",children:y.jsxs("div",{className:"victory-content",children:[y.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),y.jsx("div",{children:"Victory!"}),y.jsx("button",{onClick:Zl,children:"New Game"})]})})]}),iR&&y.jsxs("div",{className:"defeat-overlay",children:[y.jsx("div",{className:"blood-overlay"}),y.jsx("div",{className:"victory-modal",children:y.jsxs("div",{className:"victory-content",children:[y.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),y.jsx("div",{children:"Defeat!"}),y.jsx("button",{onClick:Zl,children:"Try Again"})]})})]})]})};function kW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const DW=()=>{const[t,e]=k.useState("singleplayer"),n=()=>{window.location.href="/"};return y.jsx("div",{className:"chess-page",children:y.jsx("div",{className:"chess-content",children:t==="singleplayer"?y.jsx(Tqe,{onClose:n}):y.jsx(Cne,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},Rqe=new Z4e,Pqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),Oqe=()=>JFe("(max-width: 768px)")?y.jsx(QFe,{}):y.jsx(L8e,{});D2.createRoot(document.getElementById("root")).render(y.jsx(zo.StrictMode,{children:y.jsx(C4e,{config:ZFe,children:y.jsx(vFe,{client:Rqe,children:y.jsx(D8e,{children:y.jsx(P8e,{children:Pqe?y.jsx(DS,{path:"/*",element:y.jsx(DW,{})}):y.jsxs(y.Fragment,{children:[y.jsx(DS,{path:"/",element:y.jsx(Oqe,{})}),y.jsx(DS,{path:"/chess",element:y.jsx(DW,{})})]})})})})})}));export{nKe as $,qe as A,yt as B,Ue as C,at as D,fE as E,OD as F,Nv as G,wc as H,gye as I,Un as J,iKe as K,N3 as L,ms as M,dye as N,ve as O,xd as P,RS as Q,Ft as R,Cc as S,Yi as T,F_e as U,mE as V,Ls as W,eKe as X,gs as Y,Qg as Z,yl as _,OS as a,CX as a0,T3 as a1,Ow as a2,Xs as a3,cKe as a4,zu as a5,jl as a6,JC as a7,tt as a8,Gr as a9,VW as aA,Hqe as aB,aC,qbe as aD,d4e as aE,ja as aF,Fa as aG,tQ as aH,WEe as aI,Qd as aa,$Y as ab,DT as ac,ge as ad,BL as ae,Xr as af,sbe as ag,JN as ah,iU as ai,dEe as aj,X_ as ak,Ua as al,Rf as am,cE as an,Fl as ao,l2e as ap,WVe as aq,kF as ar,XJ as as,XOe as at,u2e as au,zVe as av,jVe as aw,ET as ax,qVe as ay,HVe as az,$n as b,Be as c,it as d,H as e,ur as f,Wu as g,sKe as h,Ju as i,Fo as j,wt as k,Qi as l,VPe as m,xl as n,Z$e as o,Ve as p,bl as q,rKe as r,vn as s,eK as t,or as u,m4 as v,Xo as w,XVe as x,oi as y,si as z};
