const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BEK3UHkv.js","assets/hmac-CdRtLNnV.js","assets/secp256k1-QJ90U0H1.js","assets/embedded-wallet-BldN9GOw.js","assets/if-defined-aLszEAMM.js","assets/index-1_Lr3sEM.js","assets/index-BpzBzPud.js","assets/ref-DrL19PAT.js","assets/index-Cdr_Q46s.js","assets/index-4wQ9hcPU.js","assets/index-D5Y75ZT1.js","assets/index-BsO5Gmqs.js","assets/index-DNdb181E.js","assets/index-ZnYi4E1o.js","assets/index-C1PGKkQz.js","assets/email-ghyzGl7w.js","assets/index-BAFJS0sh.js","assets/socials-sKtRZ279.js","assets/index-DaizuS1C.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-RwzAENGZ.js","assets/index-WeVGf0B2.js","assets/index-C24K1jE1.js","assets/index-DOqjvqwQ.js","assets/swaps-er7PPDib.js","assets/index-BLThnIXb.js","assets/index-UgORf2h0.js","assets/index-tQLXQs4G.js","assets/send-_CTnOR3t.js","assets/index-fbKF7EpU.js","assets/index-DICthYfQ.js","assets/receive-ByKuwtR9.js","assets/index-DoEodCvd.js","assets/onramp-CIGocEAm.js","assets/index-DifrcNRI.js","assets/index-mYBOQ8ZB.js","assets/index-vVDwjQsS.js","assets/transactions-BzBVV6Wu.js","assets/index-DOampr0z.js","assets/index-C6KRUgTf.js","assets/index-U0rrDOxV.js","assets/index-CPxPq8RE.js","assets/index-BbOTSVtB.js","assets/w3m-modal-CePpyCZz.js"])))=>i.map(i=>d[i]);
var YV=Object.defineProperty;var B3=t=>{throw TypeError(t)};var ZV=(t,e,n)=>e in t?YV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>ZV(t,typeof e!="symbol"?e+"":e,n),RA=(t,e,n)=>e.has(t)||B3("Cannot "+n);var E=(t,e,n)=>(RA(t,e,"read from private field"),n?n.call(t):e.get(t)),H=(t,e,n)=>e.has(t)?B3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),O=(t,e,n,r)=>(RA(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ee=(t,e,n)=>(RA(t,e,"access private method"),n);var El=(t,e,n,r)=>({set _(s){O(t,e,s,n)},get _(){return E(t,e,r)}});function XV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var $n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var FB={exports:{}},zx={},zB={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=Symbol.for("react.element"),eK=Symbol.for("react.portal"),tK=Symbol.for("react.fragment"),nK=Symbol.for("react.strict_mode"),rK=Symbol.for("react.profiler"),sK=Symbol.for("react.provider"),iK=Symbol.for("react.context"),oK=Symbol.for("react.forward_ref"),aK=Symbol.for("react.suspense"),cK=Symbol.for("react.memo"),lK=Symbol.for("react.lazy"),L3=Symbol.iterator;function uK(t){return t===null||typeof t!="object"?null:(t=L3&&t[L3]||t["@@iterator"],typeof t=="function"?t:null)}var HB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WB=Object.assign,qB={};function iy(t,e,n){this.props=t,this.context=e,this.refs=qB,this.updater=n||HB}iy.prototype.isReactComponent={};iy.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};iy.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GB(){}GB.prototype=iy.prototype;function yk(t,e,n){this.props=t,this.context=e,this.refs=qB,this.updater=n||HB}var wk=yk.prototype=new GB;wk.constructor=yk;WB(wk,iy.prototype);wk.isPureReactComponent=!0;var M3=Array.isArray,VB=Object.prototype.hasOwnProperty,bk={current:null},KB={key:!0,ref:!0,__self:!0,__source:!0};function QB(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)VB.call(e,r)&&!KB.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:fv,type:t,key:i,ref:o,props:s,_owner:bk.current}}function dK(t,e){return{$$typeof:fv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vk(t){return typeof t=="object"&&t!==null&&t.$$typeof===fv}function hK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var j3=/\/+/g;function DA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hK(""+t.key):e.toString(36)}function vE(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fv:case eK:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+DA(o,0):r,M3(s)?(n="",t!=null&&(n=t.replace(j3,"$&/")+"/"),vE(s,e,n,"",function(l){return l})):s!=null&&(vk(s)&&(s=dK(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(j3,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",M3(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+DA(i,a);o+=vE(i,e,n,c,s)}else if(c=uK(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+DA(i,a++),o+=vE(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function e1(t,e,n){if(t==null)return t;var r=[],s=0;return vE(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Os={current:null},EE={transition:null},pK={ReactCurrentDispatcher:Os,ReactCurrentBatchConfig:EE,ReactCurrentOwner:bk};function JB(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:e1,forEach:function(t,e,n){e1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return e1(t,function(){e++}),e},toArray:function(t){return e1(t,function(e){return e})||[]},only:function(t){if(!vk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wt.Component=iy;wt.Fragment=tK;wt.Profiler=rK;wt.PureComponent=yk;wt.StrictMode=nK;wt.Suspense=aK;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pK;wt.act=JB;wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=WB({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)VB.call(e,c)&&!KB.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:fv,type:t.type,key:s,ref:i,props:r,_owner:o}};wt.createContext=function(t){return t={$$typeof:iK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sK,_context:t},t.Consumer=t};wt.createElement=QB;wt.createFactory=function(t){var e=QB.bind(null,t);return e.type=t,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(t){return{$$typeof:oK,render:t}};wt.isValidElement=vk;wt.lazy=function(t){return{$$typeof:lK,_payload:{_status:-1,_result:t},_init:fK}};wt.memo=function(t,e){return{$$typeof:cK,type:t,compare:e===void 0?null:e}};wt.startTransition=function(t){var e=EE.transition;EE.transition={};try{t()}finally{EE.transition=e}};wt.unstable_act=JB;wt.useCallback=function(t,e){return Os.current.useCallback(t,e)};wt.useContext=function(t){return Os.current.useContext(t)};wt.useDebugValue=function(){};wt.useDeferredValue=function(t){return Os.current.useDeferredValue(t)};wt.useEffect=function(t,e){return Os.current.useEffect(t,e)};wt.useId=function(){return Os.current.useId()};wt.useImperativeHandle=function(t,e,n){return Os.current.useImperativeHandle(t,e,n)};wt.useInsertionEffect=function(t,e){return Os.current.useInsertionEffect(t,e)};wt.useLayoutEffect=function(t,e){return Os.current.useLayoutEffect(t,e)};wt.useMemo=function(t,e){return Os.current.useMemo(t,e)};wt.useReducer=function(t,e,n){return Os.current.useReducer(t,e,n)};wt.useRef=function(t){return Os.current.useRef(t)};wt.useState=function(t){return Os.current.useState(t)};wt.useSyncExternalStore=function(t,e,n){return Os.current.useSyncExternalStore(t,e,n)};wt.useTransition=function(){return Os.current.useTransition()};wt.version="18.3.1";zB.exports=wt;var D=zB.exports;const Ri=Lf(D),gK=XV({__proto__:null,default:Ri},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mK=D,yK=Symbol.for("react.element"),wK=Symbol.for("react.fragment"),bK=Object.prototype.hasOwnProperty,vK=mK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EK={key:!0,ref:!0,__self:!0,__source:!0};function YB(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bK.call(e,r)&&!EK.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yK,type:t,key:i,ref:o,props:s,_owner:vK.current}}zx.Fragment=wK;zx.jsx=YB;zx.jsxs=YB;FB.exports=zx;var m=FB.exports,EI={},ZB={exports:{}},Mi={},XB={exports:{}},eL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var M=U.length;U.push($);e:for(;0<M;){var q=M-1>>>1,Z=U[q];if(0<s(Z,$))U[q]=$,U[M]=Z,M=q;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],M=U.pop();if(M!==$){U[0]=M;e:for(var q=0,Z=U.length,ie=Z>>>1;q<ie;){var re=2*(q+1)-1,ce=U[re],ge=re+1,J=U[ge];if(0>s(ce,M))ge<Z&&0>s(J,ce)?(U[q]=J,U[ge]=M,q=ge):(U[q]=ce,U[re]=M,q=re);else if(ge<Z&&0>s(J,M))U[q]=J,U[ge]=M,q=ge;else break e}}return $}function s(U,$){var M=U.sortIndex-$.sortIndex;return M!==0?M:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=U)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function x(U){if(g=!1,b(U),!p)if(n(c)!==null)p=!0,N(_);else{var $=n(l);$!==null&&L(x,$.startTime-U)}}function _(U,$){p=!1,g&&(g=!1,w(T),T=-1),f=!0;var M=h;try{for(b($),d=n(c);d!==null&&(!(d.expirationTime>$)||U&&!R());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var Z=q(d.expirationTime<=$);$=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(c)&&r(c),b($)}else r(c);d=n(c)}if(d!==null)var ie=!0;else{var re=n(l);re!==null&&L(x,re.startTime-$),ie=!1}return ie}finally{d=null,h=M,f=!1}}var C=!1,S=null,T=-1,A=5,P=-1;function R(){return!(t.unstable_now()-P<A)}function j(){if(S!==null){var U=t.unstable_now();P=U;var $=!0;try{$=S(!0,U)}finally{$?z():(C=!1,S=null)}}else C=!1}var z;if(typeof v=="function")z=function(){v(j)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,I=V.port2;V.port1.onmessage=j,z=function(){I.postMessage(null)}}else z=function(){y(j,0)};function N(U){S=U,C||(C=!0,z())}function L(U,$){T=y(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(_))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var M=h;h=$;try{return U()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var M=h;h=U;try{return $()}finally{h=M}},t.unstable_scheduleCallback=function(U,$,M){var q=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?q+M:q):M=q,U){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=M+Z,U={id:u++,callback:$,priorityLevel:U,startTime:M,expirationTime:Z,sortIndex:-1},M>q?(U.sortIndex=M,e(l,U),n(c)===null&&U===n(l)&&(g?(w(T),T=-1):g=!0,L(x,M-q))):(U.sortIndex=Z,e(c,U),p||f||(p=!0,N(_))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var $=h;return function(){var M=h;h=$;try{return U.apply(this,arguments)}finally{h=M}}}})(eL);XB.exports=eL;var _K=XB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xK=D,Bi=_K;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tL=new Set,vw={};function Mf(t,e){Nm(t,e),Nm(t+"Capture",e)}function Nm(t,e){for(vw[t]=e,t=0;t<e.length;t++)tL.add(e[t])}var ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_I=Object.prototype.hasOwnProperty,CK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F3={},z3={};function AK(t){return _I.call(z3,t)?!0:_I.call(F3,t)?!1:CK.test(t)?z3[t]=!0:(F3[t]=!0,!1)}function SK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IK(t,e,n,r){if(e===null||typeof e>"u"||SK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rs(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lr[t]=new Rs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lr[e]=new Rs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lr[t]=new Rs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lr[t]=new Rs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lr[t]=new Rs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lr[t]=new Rs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lr[t]=new Rs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lr[t]=new Rs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lr[t]=new Rs(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ek=/[\-:]([a-z])/g;function _k(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ek,_k);Lr[e]=new Rs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ek,_k);Lr[e]=new Rs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ek,_k);Lr[e]=new Rs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lr[t]=new Rs(t,1,!1,t.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new Rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lr[t]=new Rs(t,1,!1,t.toLowerCase(),null,!0,!0)});function xk(t,e,n,r){var s=Lr.hasOwnProperty(e)?Lr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IK(e,n,s,r)&&(n=null),r||s===null?AK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yl=xK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,t1=Symbol.for("react.element"),Wp=Symbol.for("react.portal"),qp=Symbol.for("react.fragment"),Ck=Symbol.for("react.strict_mode"),xI=Symbol.for("react.profiler"),nL=Symbol.for("react.provider"),rL=Symbol.for("react.context"),Ak=Symbol.for("react.forward_ref"),CI=Symbol.for("react.suspense"),AI=Symbol.for("react.suspense_list"),Sk=Symbol.for("react.memo"),Jl=Symbol.for("react.lazy"),sL=Symbol.for("react.offscreen"),H3=Symbol.iterator;function Dy(t){return t===null||typeof t!="object"?null:(t=H3&&t[H3]||t["@@iterator"],typeof t=="function"?t:null)}var Pn=Object.assign,$A;function w0(t){if($A===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$A=e&&e[1]||""}return`
`+$A+t}var UA=!1;function BA(t,e){if(!t||UA)return"";UA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{UA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?w0(t):""}function TK(t){switch(t.tag){case 5:return w0(t.type);case 16:return w0("Lazy");case 13:return w0("Suspense");case 19:return w0("SuspenseList");case 0:case 2:case 15:return t=BA(t.type,!1),t;case 11:return t=BA(t.type.render,!1),t;case 1:return t=BA(t.type,!0),t;default:return""}}function SI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qp:return"Fragment";case Wp:return"Portal";case xI:return"Profiler";case Ck:return"StrictMode";case CI:return"Suspense";case AI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rL:return(t.displayName||"Context")+".Consumer";case nL:return(t._context.displayName||"Context")+".Provider";case Ak:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sk:return e=t.displayName||null,e!==null?e:SI(t.type)||"Memo";case Jl:e=t._payload,t=t._init;try{return SI(t(e))}catch{}}return null}function NK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return SI(e);case 8:return e===Ck?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PK(t){var e=iL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function n1(t){t._valueTracker||(t._valueTracker=PK(t))}function oL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function c_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function II(t,e){var n=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function W3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aL(t,e){e=e.checked,e!=null&&xk(t,"checked",e,!1)}function TI(t,e){aL(t,e);var n=hd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?NI(t,e.type,n):e.hasOwnProperty("defaultValue")&&NI(t,e.type,hd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function q3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function NI(t,e,n){(e!=="number"||c_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var b0=Array.isArray;function dg(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hd(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function PI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function G3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(pe(92));if(b0(n)){if(1<n.length)throw Error(pe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hd(n)}}function cL(t,e){var n=hd(e.value),r=hd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var r1,uL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(r1=r1||document.createElement("div"),r1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=r1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ew(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var j0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kK=["Webkit","ms","Moz","O"];Object.keys(j0).forEach(function(t){kK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),j0[e]=j0[t]})});function dL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||j0.hasOwnProperty(t)&&j0[t]?(""+e).trim():e+"px"}function hL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var OK=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function OI(t,e){if(e){if(OK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function RI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DI=null;function Ik(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $I=null,hg=null,fg=null;function K3(t){if(t=mv(t)){if(typeof $I!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=Vx(e),$I(t.stateNode,t.type,e))}}function fL(t){hg?fg?fg.push(t):fg=[t]:hg=t}function pL(){if(hg){var t=hg,e=fg;if(fg=hg=null,K3(t),e)for(t=0;t<e.length;t++)K3(e[t])}}function gL(t,e){return t(e)}function mL(){}var LA=!1;function yL(t,e,n){if(LA)return t(e,n);LA=!0;try{return gL(t,e,n)}finally{LA=!1,(hg!==null||fg!==null)&&(mL(),pL())}}function _w(t,e){var n=t.stateNode;if(n===null)return null;var r=Vx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(pe(231,e,typeof n));return n}var UI=!1;if(ol)try{var $y={};Object.defineProperty($y,"passive",{get:function(){UI=!0}}),window.addEventListener("test",$y,$y),window.removeEventListener("test",$y,$y)}catch{UI=!1}function RK(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var F0=!1,l_=null,u_=!1,BI=null,DK={onError:function(t){F0=!0,l_=t}};function $K(t,e,n,r,s,i,o,a,c){F0=!1,l_=null,RK.apply(DK,arguments)}function UK(t,e,n,r,s,i,o,a,c){if($K.apply(this,arguments),F0){if(F0){var l=l_;F0=!1,l_=null}else throw Error(pe(198));u_||(u_=!0,BI=l)}}function jf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Q3(t){if(jf(t)!==t)throw Error(pe(188))}function BK(t){var e=t.alternate;if(!e){if(e=jf(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Q3(s),t;if(i===r)return Q3(s),e;i=i.sibling}throw Error(pe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(pe(189))}}if(n.alternate!==r)throw Error(pe(190))}if(n.tag!==3)throw Error(pe(188));return n.stateNode.current===n?t:e}function bL(t){return t=BK(t),t!==null?vL(t):null}function vL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vL(t);if(e!==null)return e;t=t.sibling}return null}var EL=Bi.unstable_scheduleCallback,J3=Bi.unstable_cancelCallback,LK=Bi.unstable_shouldYield,MK=Bi.unstable_requestPaint,Fn=Bi.unstable_now,jK=Bi.unstable_getCurrentPriorityLevel,Tk=Bi.unstable_ImmediatePriority,_L=Bi.unstable_UserBlockingPriority,d_=Bi.unstable_NormalPriority,FK=Bi.unstable_LowPriority,xL=Bi.unstable_IdlePriority,Hx=null,Qa=null;function zK(t){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Hx,t,void 0,(t.current.flags&128)===128)}catch{}}var na=Math.clz32?Math.clz32:qK,HK=Math.log,WK=Math.LN2;function qK(t){return t>>>=0,t===0?32:31-(HK(t)/WK|0)|0}var s1=64,i1=4194304;function v0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function h_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=v0(a):(i&=o,i!==0&&(r=v0(i)))}else o=n&~s,o!==0?r=v0(o):i!==0&&(r=v0(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-na(e),s=1<<n,r|=t[n],e&=~s;return r}function GK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-na(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=GK(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function LI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CL(){var t=s1;return s1<<=1,!(s1&4194240)&&(s1=64),t}function MA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-na(e),t[e]=n}function KK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-na(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-na(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Jt=0;function AL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SL,Pk,IL,TL,NL,MI=!1,o1=[],Vu=null,Ku=null,Qu=null,xw=new Map,Cw=new Map,ou=[],QK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y3(t,e){switch(t){case"focusin":case"focusout":Vu=null;break;case"dragenter":case"dragleave":Ku=null;break;case"mouseover":case"mouseout":Qu=null;break;case"pointerover":case"pointerout":xw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cw.delete(e.pointerId)}}function Uy(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=mv(e),e!==null&&Pk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JK(t,e,n,r,s){switch(e){case"focusin":return Vu=Uy(Vu,t,e,n,r,s),!0;case"dragenter":return Ku=Uy(Ku,t,e,n,r,s),!0;case"mouseover":return Qu=Uy(Qu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xw.set(i,Uy(xw.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Cw.set(i,Uy(Cw.get(i)||null,t,e,n,r,s)),!0}return!1}function PL(t){var e=lh(t.target);if(e!==null){var n=jf(e);if(n!==null){if(e=n.tag,e===13){if(e=wL(n),e!==null){t.blockedOn=e,NL(t.priority,function(){IL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _E(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jI(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);DI=r,n.target.dispatchEvent(r),DI=null}else return e=mv(n),e!==null&&Pk(e),t.blockedOn=n,!1;e.shift()}return!0}function Z3(t,e,n){_E(t)&&n.delete(e)}function YK(){MI=!1,Vu!==null&&_E(Vu)&&(Vu=null),Ku!==null&&_E(Ku)&&(Ku=null),Qu!==null&&_E(Qu)&&(Qu=null),xw.forEach(Z3),Cw.forEach(Z3)}function By(t,e){t.blockedOn===e&&(t.blockedOn=null,MI||(MI=!0,Bi.unstable_scheduleCallback(Bi.unstable_NormalPriority,YK)))}function Aw(t){function e(s){return By(s,t)}if(0<o1.length){By(o1[0],t);for(var n=1;n<o1.length;n++){var r=o1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vu!==null&&By(Vu,t),Ku!==null&&By(Ku,t),Qu!==null&&By(Qu,t),xw.forEach(e),Cw.forEach(e),n=0;n<ou.length;n++)r=ou[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ou.length&&(n=ou[0],n.blockedOn===null);)PL(n),n.blockedOn===null&&ou.shift()}var pg=yl.ReactCurrentBatchConfig,f_=!0;function ZK(t,e,n,r){var s=Jt,i=pg.transition;pg.transition=null;try{Jt=1,kk(t,e,n,r)}finally{Jt=s,pg.transition=i}}function XK(t,e,n,r){var s=Jt,i=pg.transition;pg.transition=null;try{Jt=4,kk(t,e,n,r)}finally{Jt=s,pg.transition=i}}function kk(t,e,n,r){if(f_){var s=jI(t,e,n,r);if(s===null)QA(t,e,r,p_,n),Y3(t,r);else if(JK(s,t,e,n,r))r.stopPropagation();else if(Y3(t,r),e&4&&-1<QK.indexOf(t)){for(;s!==null;){var i=mv(s);if(i!==null&&SL(i),i=jI(t,e,n,r),i===null&&QA(t,e,r,p_,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else QA(t,e,r,null,n)}}var p_=null;function jI(t,e,n,r){if(p_=null,t=Ik(r),t=lh(t),t!==null)if(e=jf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return p_=t,null}function kL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jK()){case Tk:return 1;case _L:return 4;case d_:case FK:return 16;case xL:return 536870912;default:return 16}default:return 16}}var Mu=null,Ok=null,xE=null;function OL(){if(xE)return xE;var t,e=Ok,n=e.length,r,s="value"in Mu?Mu.value:Mu.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return xE=s.slice(t,1<r?1-r:void 0)}function CE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function a1(){return!0}function X3(){return!1}function ji(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?a1:X3,this.isPropagationStopped=X3,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=a1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=a1)},persist:function(){},isPersistent:a1}),e}var oy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rk=ji(oy),gv=Pn({},oy,{view:0,detail:0}),eQ=ji(gv),jA,FA,Ly,Wx=Pn({},gv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ly&&(Ly&&t.type==="mousemove"?(jA=t.screenX-Ly.screenX,FA=t.screenY-Ly.screenY):FA=jA=0,Ly=t),jA)},movementY:function(t){return"movementY"in t?t.movementY:FA}}),eD=ji(Wx),tQ=Pn({},Wx,{dataTransfer:0}),nQ=ji(tQ),rQ=Pn({},gv,{relatedTarget:0}),zA=ji(rQ),sQ=Pn({},oy,{animationName:0,elapsedTime:0,pseudoElement:0}),iQ=ji(sQ),oQ=Pn({},oy,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aQ=ji(oQ),cQ=Pn({},oy,{data:0}),tD=ji(cQ),lQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dQ[t])?!!e[t]:!1}function Dk(){return hQ}var fQ=Pn({},gv,{key:function(t){if(t.key){var e=lQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=CE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dk,charCode:function(t){return t.type==="keypress"?CE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?CE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pQ=ji(fQ),gQ=Pn({},Wx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nD=ji(gQ),mQ=Pn({},gv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dk}),yQ=ji(mQ),wQ=Pn({},oy,{propertyName:0,elapsedTime:0,pseudoElement:0}),bQ=ji(wQ),vQ=Pn({},Wx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EQ=ji(vQ),_Q=[9,13,27,32],$k=ol&&"CompositionEvent"in window,z0=null;ol&&"documentMode"in document&&(z0=document.documentMode);var xQ=ol&&"TextEvent"in window&&!z0,RL=ol&&(!$k||z0&&8<z0&&11>=z0),rD=" ",sD=!1;function DL(t,e){switch(t){case"keyup":return _Q.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $L(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gp=!1;function CQ(t,e){switch(t){case"compositionend":return $L(e);case"keypress":return e.which!==32?null:(sD=!0,rD);case"textInput":return t=e.data,t===rD&&sD?null:t;default:return null}}function AQ(t,e){if(Gp)return t==="compositionend"||!$k&&DL(t,e)?(t=OL(),xE=Ok=Mu=null,Gp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RL&&e.locale!=="ko"?null:e.data;default:return null}}var SQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SQ[t.type]:e==="textarea"}function UL(t,e,n,r){fL(r),e=g_(e,"onChange"),0<e.length&&(n=new Rk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var H0=null,Sw=null;function IQ(t){VL(t,0)}function qx(t){var e=Qp(t);if(oL(e))return t}function TQ(t,e){if(t==="change")return e}var BL=!1;if(ol){var HA;if(ol){var WA="oninput"in document;if(!WA){var oD=document.createElement("div");oD.setAttribute("oninput","return;"),WA=typeof oD.oninput=="function"}HA=WA}else HA=!1;BL=HA&&(!document.documentMode||9<document.documentMode)}function aD(){H0&&(H0.detachEvent("onpropertychange",LL),Sw=H0=null)}function LL(t){if(t.propertyName==="value"&&qx(Sw)){var e=[];UL(e,Sw,t,Ik(t)),yL(IQ,e)}}function NQ(t,e,n){t==="focusin"?(aD(),H0=e,Sw=n,H0.attachEvent("onpropertychange",LL)):t==="focusout"&&aD()}function PQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qx(Sw)}function kQ(t,e){if(t==="click")return qx(e)}function OQ(t,e){if(t==="input"||t==="change")return qx(e)}function RQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aa=typeof Object.is=="function"?Object.is:RQ;function Iw(t,e){if(aa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_I.call(e,s)||!aa(t[s],e[s]))return!1}return!0}function cD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lD(t,e){var n=cD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cD(n)}}function ML(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ML(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jL(){for(var t=window,e=c_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=c_(t.document)}return e}function Uk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DQ(t){var e=jL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ML(n.ownerDocument.documentElement,n)){if(r!==null&&Uk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lD(n,i);var o=lD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $Q=ol&&"documentMode"in document&&11>=document.documentMode,Vp=null,FI=null,W0=null,zI=!1;function uD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zI||Vp==null||Vp!==c_(r)||(r=Vp,"selectionStart"in r&&Uk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),W0&&Iw(W0,r)||(W0=r,r=g_(FI,"onSelect"),0<r.length&&(e=new Rk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vp)))}function c1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kp={animationend:c1("Animation","AnimationEnd"),animationiteration:c1("Animation","AnimationIteration"),animationstart:c1("Animation","AnimationStart"),transitionend:c1("Transition","TransitionEnd")},qA={},FL={};ol&&(FL=document.createElement("div").style,"AnimationEvent"in window||(delete Kp.animationend.animation,delete Kp.animationiteration.animation,delete Kp.animationstart.animation),"TransitionEvent"in window||delete Kp.transitionend.transition);function Gx(t){if(qA[t])return qA[t];if(!Kp[t])return t;var e=Kp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FL)return qA[t]=e[n];return t}var zL=Gx("animationend"),HL=Gx("animationiteration"),WL=Gx("animationstart"),qL=Gx("transitionend"),GL=new Map,dD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Id(t,e){GL.set(t,e),Mf(e,[t])}for(var GA=0;GA<dD.length;GA++){var VA=dD[GA],UQ=VA.toLowerCase(),BQ=VA[0].toUpperCase()+VA.slice(1);Id(UQ,"on"+BQ)}Id(zL,"onAnimationEnd");Id(HL,"onAnimationIteration");Id(WL,"onAnimationStart");Id("dblclick","onDoubleClick");Id("focusin","onFocus");Id("focusout","onBlur");Id(qL,"onTransitionEnd");Nm("onMouseEnter",["mouseout","mouseover"]);Nm("onMouseLeave",["mouseout","mouseover"]);Nm("onPointerEnter",["pointerout","pointerover"]);Nm("onPointerLeave",["pointerout","pointerover"]);Mf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var E0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(E0));function hD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UK(r,e,void 0,t),t.currentTarget=null}function VL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;hD(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;hD(s,a,l),i=c}}}if(u_)throw t=BI,u_=!1,BI=null,t}function mn(t,e){var n=e[VI];n===void 0&&(n=e[VI]=new Set);var r=t+"__bubble";n.has(r)||(KL(e,t,2,!1),n.add(r))}function KA(t,e,n){var r=0;e&&(r|=4),KL(n,t,r,e)}var l1="_reactListening"+Math.random().toString(36).slice(2);function Tw(t){if(!t[l1]){t[l1]=!0,tL.forEach(function(n){n!=="selectionchange"&&(LQ.has(n)||KA(n,!1,t),KA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[l1]||(e[l1]=!0,KA("selectionchange",!1,e))}}function KL(t,e,n,r){switch(kL(e)){case 1:var s=ZK;break;case 4:s=XK;break;default:s=kk}n=s.bind(null,e,n,t),s=void 0,!UI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function QA(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=lh(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}yL(function(){var l=i,u=Ik(n),d=[];e:{var h=GL.get(t);if(h!==void 0){var f=Rk,p=t;switch(t){case"keypress":if(CE(n)===0)break e;case"keydown":case"keyup":f=pQ;break;case"focusin":p="focus",f=zA;break;case"focusout":p="blur",f=zA;break;case"beforeblur":case"afterblur":f=zA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=eD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=nQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=yQ;break;case zL:case HL:case WL:f=iQ;break;case qL:f=bQ;break;case"scroll":f=eQ;break;case"wheel":f=EQ;break;case"copy":case"cut":case"paste":f=aQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=nD}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,w!==null&&(x=_w(v,w),x!=null&&g.push(Nw(v,x,b)))),y)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==DI&&(p=n.relatedTarget||n.fromElement)&&(lh(p)||p[al]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?lh(p):null,p!==null&&(y=jf(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=eD,x="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=nD,x="onPointerLeave",w="onPointerEnter",v="pointer"),y=f==null?h:Qp(f),b=p==null?h:Qp(p),h=new g(x,v+"leave",f,n,u),h.target=y,h.relatedTarget=b,x=null,lh(u)===l&&(g=new g(w,v+"enter",p,n,u),g.target=b,g.relatedTarget=y,x=g),y=x,f&&p)t:{for(g=f,w=p,v=0,b=g;b;b=rp(b))v++;for(b=0,x=w;x;x=rp(x))b++;for(;0<v-b;)g=rp(g),v--;for(;0<b-v;)w=rp(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=rp(g),w=rp(w)}g=null}else g=null;f!==null&&fD(d,h,f,g,!1),p!==null&&y!==null&&fD(d,y,p,g,!0)}}e:{if(h=l?Qp(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=TQ;else if(iD(h))if(BL)_=OQ;else{_=PQ;var C=NQ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=kQ);if(_&&(_=_(t,l))){UL(d,_,n,u);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&NI(h,"number",h.value)}switch(C=l?Qp(l):window,t){case"focusin":(iD(C)||C.contentEditable==="true")&&(Vp=C,FI=l,W0=null);break;case"focusout":W0=FI=Vp=null;break;case"mousedown":zI=!0;break;case"contextmenu":case"mouseup":case"dragend":zI=!1,uD(d,n,u);break;case"selectionchange":if($Q)break;case"keydown":case"keyup":uD(d,n,u)}var S;if($k)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Gp?DL(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(RL&&n.locale!=="ko"&&(Gp||T!=="onCompositionStart"?T==="onCompositionEnd"&&Gp&&(S=OL()):(Mu=u,Ok="value"in Mu?Mu.value:Mu.textContent,Gp=!0)),C=g_(l,T),0<C.length&&(T=new tD(T,t,null,n,u),d.push({event:T,listeners:C}),S?T.data=S:(S=$L(n),S!==null&&(T.data=S)))),(S=xQ?CQ(t,n):AQ(t,n))&&(l=g_(l,"onBeforeInput"),0<l.length&&(u=new tD("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}VL(d,e)})}function Nw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function g_(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_w(t,n),i!=null&&r.unshift(Nw(t,i,s)),i=_w(t,e),i!=null&&r.push(Nw(t,i,s))),t=t.return}return r}function rp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fD(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=_w(n,i),c!=null&&o.unshift(Nw(n,c,a))):s||(c=_w(n,i),c!=null&&o.push(Nw(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MQ=/\r\n?/g,jQ=/\u0000|\uFFFD/g;function pD(t){return(typeof t=="string"?t:""+t).replace(MQ,`
`).replace(jQ,"")}function u1(t,e,n){if(e=pD(e),pD(t)!==e&&n)throw Error(pe(425))}function m_(){}var HI=null,WI=null;function qI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var GI=typeof setTimeout=="function"?setTimeout:void 0,FQ=typeof clearTimeout=="function"?clearTimeout:void 0,gD=typeof Promise=="function"?Promise:void 0,zQ=typeof queueMicrotask=="function"?queueMicrotask:typeof gD<"u"?function(t){return gD.resolve(null).then(t).catch(HQ)}:GI;function HQ(t){setTimeout(function(){throw t})}function JA(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Aw(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Aw(e)}function Ju(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ay=Math.random().toString(36).slice(2),Ha="__reactFiber$"+ay,Pw="__reactProps$"+ay,al="__reactContainer$"+ay,VI="__reactEvents$"+ay,WQ="__reactListeners$"+ay,qQ="__reactHandles$"+ay;function lh(t){var e=t[Ha];if(e)return e;for(var n=t.parentNode;n;){if(e=n[al]||n[Ha]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mD(t);t!==null;){if(n=t[Ha])return n;t=mD(t)}return e}t=n,n=t.parentNode}return null}function mv(t){return t=t[Ha]||t[al],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function Vx(t){return t[Pw]||null}var KI=[],Jp=-1;function Td(t){return{current:t}}function bn(t){0>Jp||(t.current=KI[Jp],KI[Jp]=null,Jp--)}function dn(t,e){Jp++,KI[Jp]=t.current,t.current=e}var fd={},us=Td(fd),oi=Td(!1),uf=fd;function Pm(t,e){var n=t.type.contextTypes;if(!n)return fd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ai(t){return t=t.childContextTypes,t!=null}function y_(){bn(oi),bn(us)}function yD(t,e,n){if(us.current!==fd)throw Error(pe(168));dn(us,e),dn(oi,n)}function QL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(pe(108,NK(t)||"Unknown",s));return Pn({},n,r)}function w_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fd,uf=us.current,dn(us,t),dn(oi,oi.current),!0}function wD(t,e,n){var r=t.stateNode;if(!r)throw Error(pe(169));n?(t=QL(t,e,uf),r.__reactInternalMemoizedMergedChildContext=t,bn(oi),bn(us),dn(us,t)):bn(oi),dn(oi,n)}var Tc=null,Kx=!1,YA=!1;function JL(t){Tc===null?Tc=[t]:Tc.push(t)}function GQ(t){Kx=!0,JL(t)}function Nd(){if(!YA&&Tc!==null){YA=!0;var t=0,e=Jt;try{var n=Tc;for(Jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tc=null,Kx=!1}catch(s){throw Tc!==null&&(Tc=Tc.slice(t+1)),EL(Tk,Nd),s}finally{Jt=e,YA=!1}}return null}var Yp=[],Zp=0,b_=null,v_=0,co=[],lo=0,df=null,Kc=1,Qc="";function Gd(t,e){Yp[Zp++]=v_,Yp[Zp++]=b_,b_=t,v_=e}function YL(t,e,n){co[lo++]=Kc,co[lo++]=Qc,co[lo++]=df,df=t;var r=Kc;t=Qc;var s=32-na(r)-1;r&=~(1<<s),n+=1;var i=32-na(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kc=1<<32-na(e)+s|n<<s|r,Qc=i+t}else Kc=1<<i|n<<s|r,Qc=t}function Bk(t){t.return!==null&&(Gd(t,1),YL(t,1,0))}function Lk(t){for(;t===b_;)b_=Yp[--Zp],Yp[Zp]=null,v_=Yp[--Zp],Yp[Zp]=null;for(;t===df;)df=co[--lo],co[lo]=null,Qc=co[--lo],co[lo]=null,Kc=co[--lo],co[lo]=null}var Di=null,ki=null,_n=!1,Vo=null;function ZL(t,e){var n=uo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Di=t,ki=Ju(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Di=t,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=df!==null?{id:Kc,overflow:Qc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=uo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Di=t,ki=null,!0):!1;default:return!1}}function QI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function JI(t){if(_n){var e=ki;if(e){var n=e;if(!bD(t,e)){if(QI(t))throw Error(pe(418));e=Ju(n.nextSibling);var r=Di;e&&bD(t,e)?ZL(r,n):(t.flags=t.flags&-4097|2,_n=!1,Di=t)}}else{if(QI(t))throw Error(pe(418));t.flags=t.flags&-4097|2,_n=!1,Di=t}}}function vD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Di=t}function d1(t){if(t!==Di)return!1;if(!_n)return vD(t),_n=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qI(t.type,t.memoizedProps)),e&&(e=ki)){if(QI(t))throw XL(),Error(pe(418));for(;e;)ZL(t,e),e=Ju(e.nextSibling)}if(vD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ki=Ju(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ki=null}}else ki=Di?Ju(t.stateNode.nextSibling):null;return!0}function XL(){for(var t=ki;t;)t=Ju(t.nextSibling)}function km(){ki=Di=null,_n=!1}function Mk(t){Vo===null?Vo=[t]:Vo.push(t)}var VQ=yl.ReactCurrentBatchConfig;function My(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pe(309));var r=n.stateNode}if(!r)throw Error(pe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(pe(284));if(!n._owner)throw Error(pe(290,t))}return t}function h1(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ED(t){var e=t._init;return e(t._payload)}function eM(t){function e(w,v){if(t){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=ed(w,v),w.index=0,w.sibling=null,w}function i(w,v,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,b,x){return v===null||v.tag!==6?(v=sS(b,w.mode,x),v.return=w,v):(v=s(v,b),v.return=w,v)}function c(w,v,b,x){var _=b.type;return _===qp?u(w,v,b.props.children,x,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Jl&&ED(_)===v.type)?(x=s(v,b.props),x.ref=My(w,v,b),x.return=w,x):(x=kE(b.type,b.key,b.props,null,w.mode,x),x.ref=My(w,v,b),x.return=w,x)}function l(w,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=iS(b,w.mode,x),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function u(w,v,b,x,_){return v===null||v.tag!==7?(v=tf(b,w.mode,x,_),v.return=w,v):(v=s(v,b),v.return=w,v)}function d(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sS(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case t1:return b=kE(v.type,v.key,v.props,null,w.mode,b),b.ref=My(w,null,v),b.return=w,b;case Wp:return v=iS(v,w.mode,b),v.return=w,v;case Jl:var x=v._init;return d(w,x(v._payload),b)}if(b0(v)||Dy(v))return v=tf(v,w.mode,b,null),v.return=w,v;h1(w,v)}return null}function h(w,v,b,x){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(w,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case t1:return b.key===_?c(w,v,b,x):null;case Wp:return b.key===_?l(w,v,b,x):null;case Jl:return _=b._init,h(w,v,_(b._payload),x)}if(b0(b)||Dy(b))return _!==null?null:u(w,v,b,x,null);h1(w,b)}return null}function f(w,v,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(b)||null,a(v,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case t1:return w=w.get(x.key===null?b:x.key)||null,c(v,w,x,_);case Wp:return w=w.get(x.key===null?b:x.key)||null,l(v,w,x,_);case Jl:var C=x._init;return f(w,v,b,C(x._payload),_)}if(b0(x)||Dy(x))return w=w.get(b)||null,u(v,w,x,_,null);h1(v,x)}return null}function p(w,v,b,x){for(var _=null,C=null,S=v,T=v=0,A=null;S!==null&&T<b.length;T++){S.index>T?(A=S,S=null):A=S.sibling;var P=h(w,S,b[T],x);if(P===null){S===null&&(S=A);break}t&&S&&P.alternate===null&&e(w,S),v=i(P,v,T),C===null?_=P:C.sibling=P,C=P,S=A}if(T===b.length)return n(w,S),_n&&Gd(w,T),_;if(S===null){for(;T<b.length;T++)S=d(w,b[T],x),S!==null&&(v=i(S,v,T),C===null?_=S:C.sibling=S,C=S);return _n&&Gd(w,T),_}for(S=r(w,S);T<b.length;T++)A=f(S,w,T,b[T],x),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),v=i(A,v,T),C===null?_=A:C.sibling=A,C=A);return t&&S.forEach(function(R){return e(w,R)}),_n&&Gd(w,T),_}function g(w,v,b,x){var _=Dy(b);if(typeof _!="function")throw Error(pe(150));if(b=_.call(b),b==null)throw Error(pe(151));for(var C=_=null,S=v,T=v=0,A=null,P=b.next();S!==null&&!P.done;T++,P=b.next()){S.index>T?(A=S,S=null):A=S.sibling;var R=h(w,S,P.value,x);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(w,S),v=i(R,v,T),C===null?_=R:C.sibling=R,C=R,S=A}if(P.done)return n(w,S),_n&&Gd(w,T),_;if(S===null){for(;!P.done;T++,P=b.next())P=d(w,P.value,x),P!==null&&(v=i(P,v,T),C===null?_=P:C.sibling=P,C=P);return _n&&Gd(w,T),_}for(S=r(w,S);!P.done;T++,P=b.next())P=f(S,w,T,P.value,x),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),v=i(P,v,T),C===null?_=P:C.sibling=P,C=P);return t&&S.forEach(function(j){return e(w,j)}),_n&&Gd(w,T),_}function y(w,v,b,x){if(typeof b=="object"&&b!==null&&b.type===qp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case t1:e:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===qp){if(C.tag===7){n(w,C.sibling),v=s(C,b.props.children),v.return=w,w=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Jl&&ED(_)===C.type){n(w,C.sibling),v=s(C,b.props),v.ref=My(w,C,b),v.return=w,w=v;break e}n(w,C);break}else e(w,C);C=C.sibling}b.type===qp?(v=tf(b.props.children,w.mode,x,b.key),v.return=w,w=v):(x=kE(b.type,b.key,b.props,null,w.mode,x),x.ref=My(w,v,b),x.return=w,w=x)}return o(w);case Wp:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=iS(b,w.mode,x),v.return=w,w=v}return o(w);case Jl:return C=b._init,y(w,v,C(b._payload),x)}if(b0(b))return p(w,v,b,x);if(Dy(b))return g(w,v,b,x);h1(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=sS(b,w.mode,x),v.return=w,w=v),o(w)):n(w,v)}return y}var Om=eM(!0),tM=eM(!1),E_=Td(null),__=null,Xp=null,jk=null;function Fk(){jk=Xp=__=null}function zk(t){var e=E_.current;bn(E_),t._currentValue=e}function YI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function gg(t,e){__=t,jk=Xp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(si=!0),t.firstContext=null)}function po(t){var e=t._currentValue;if(jk!==t)if(t={context:t,memoizedValue:e,next:null},Xp===null){if(__===null)throw Error(pe(308));Xp=t,__.dependencies={lanes:0,firstContext:t}}else Xp=Xp.next=t;return e}var uh=null;function Hk(t){uh===null?uh=[t]:uh.push(t)}function nM(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hk(e)):(n.next=s.next,s.next=n),e.interleaved=n,cl(t,r)}function cl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yl=!1;function Wk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Nt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cl(t,n)}return s=r.interleaved,s===null?(e.next=e,Hk(r)):(e.next=s.next,s.next=e),r.interleaved=e,cl(t,n)}function AE(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nk(t,n)}}function _D(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function x_(t,e,n,r){var s=t.updateQueue;Yl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Pn({},d,h);break e;case 2:Yl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ff|=o,t.lanes=o,t.memoizedState=d}}function xD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(pe(191,s));s.call(r)}}}var yv={},Ja=Td(yv),kw=Td(yv),Ow=Td(yv);function dh(t){if(t===yv)throw Error(pe(174));return t}function qk(t,e){switch(dn(Ow,e),dn(kw,t),dn(Ja,yv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kI(e,t)}bn(Ja),dn(Ja,e)}function Rm(){bn(Ja),bn(kw),bn(Ow)}function sM(t){dh(Ow.current);var e=dh(Ja.current),n=kI(e,t.type);e!==n&&(dn(kw,t),dn(Ja,n))}function Gk(t){kw.current===t&&(bn(Ja),bn(kw))}var Sn=Td(0);function C_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ZA=[];function Vk(){for(var t=0;t<ZA.length;t++)ZA[t]._workInProgressVersionPrimary=null;ZA.length=0}var SE=yl.ReactCurrentDispatcher,XA=yl.ReactCurrentBatchConfig,hf=0,Nn=null,rr=null,pr=null,A_=!1,q0=!1,Rw=0,KQ=0;function Kr(){throw Error(pe(321))}function Kk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!aa(t[n],e[n]))return!1;return!0}function Qk(t,e,n,r,s,i){if(hf=i,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,SE.current=t===null||t.memoizedState===null?ZQ:XQ,t=n(r,s),q0){i=0;do{if(q0=!1,Rw=0,25<=i)throw Error(pe(301));i+=1,pr=rr=null,e.updateQueue=null,SE.current=eJ,t=n(r,s)}while(q0)}if(SE.current=S_,e=rr!==null&&rr.next!==null,hf=0,pr=rr=Nn=null,A_=!1,e)throw Error(pe(300));return t}function Jk(){var t=Rw!==0;return Rw=0,t}function Aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Nn.memoizedState=pr=t:pr=pr.next=t,pr}function go(){if(rr===null){var t=Nn.alternate;t=t!==null?t.memoizedState:null}else t=rr.next;var e=pr===null?Nn.memoizedState:pr.next;if(e!==null)pr=e,rr=t;else{if(t===null)throw Error(pe(310));rr=t,t={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},pr===null?Nn.memoizedState=pr=t:pr=pr.next=t}return pr}function Dw(t,e){return typeof e=="function"?e(t):e}function eS(t){var e=go(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=rr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((hf&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Nn.lanes|=u,ff|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,aa(r,e.memoizedState)||(si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Nn.lanes|=i,ff|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tS(t){var e=go(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);aa(i,e.memoizedState)||(si=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function iM(){}function oM(t,e){var n=Nn,r=go(),s=e(),i=!aa(r.memoizedState,s);if(i&&(r.memoizedState=s,si=!0),r=r.queue,Yk(lM.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pr!==null&&pr.memoizedState.tag&1){if(n.flags|=2048,$w(9,cM.bind(null,n,r,s,e),void 0,null),vr===null)throw Error(pe(349));hf&30||aM(n,e,s)}return s}function aM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cM(t,e,n,r){e.value=n,e.getSnapshot=r,uM(e)&&dM(t)}function lM(t,e,n){return n(function(){uM(e)&&dM(t)})}function uM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!aa(t,n)}catch{return!0}}function dM(t){var e=cl(t,1);e!==null&&ra(e,t,1,-1)}function CD(t){var e=Aa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dw,lastRenderedState:t},e.queue=t,t=t.dispatch=YQ.bind(null,Nn,t),[e.memoizedState,t]}function $w(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hM(){return go().memoizedState}function IE(t,e,n,r){var s=Aa();Nn.flags|=t,s.memoizedState=$w(1|e,n,void 0,r===void 0?null:r)}function Qx(t,e,n,r){var s=go();r=r===void 0?null:r;var i=void 0;if(rr!==null){var o=rr.memoizedState;if(i=o.destroy,r!==null&&Kk(r,o.deps)){s.memoizedState=$w(e,n,i,r);return}}Nn.flags|=t,s.memoizedState=$w(1|e,n,i,r)}function AD(t,e){return IE(8390656,8,t,e)}function Yk(t,e){return Qx(2048,8,t,e)}function fM(t,e){return Qx(4,2,t,e)}function pM(t,e){return Qx(4,4,t,e)}function gM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mM(t,e,n){return n=n!=null?n.concat([t]):null,Qx(4,4,gM.bind(null,e,t),n)}function Zk(){}function yM(t,e){var n=go();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wM(t,e){var n=go();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bM(t,e,n){return hf&21?(aa(n,e)||(n=CL(),Nn.lanes|=n,ff|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,si=!0),t.memoizedState=n)}function QQ(t,e){var n=Jt;Jt=n!==0&&4>n?n:4,t(!0);var r=XA.transition;XA.transition={};try{t(!1),e()}finally{Jt=n,XA.transition=r}}function vM(){return go().memoizedState}function JQ(t,e,n){var r=Xu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},EM(t))_M(e,n);else if(n=nM(t,e,n,r),n!==null){var s=Ss();ra(n,t,r,s),xM(n,e,r)}}function YQ(t,e,n){var r=Xu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(EM(t))_M(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,aa(a,o)){var c=e.interleaved;c===null?(s.next=s,Hk(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=nM(t,e,s,r),n!==null&&(s=Ss(),ra(n,t,r,s),xM(n,e,r))}}function EM(t){var e=t.alternate;return t===Nn||e!==null&&e===Nn}function _M(t,e){q0=A_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nk(t,n)}}var S_={readContext:po,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},ZQ={readContext:po,useCallback:function(t,e){return Aa().memoizedState=[t,e===void 0?null:e],t},useContext:po,useEffect:AD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,IE(4194308,4,gM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return IE(4194308,4,t,e)},useInsertionEffect:function(t,e){return IE(4,2,t,e)},useMemo:function(t,e){var n=Aa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Aa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JQ.bind(null,Nn,t),[r.memoizedState,t]},useRef:function(t){var e=Aa();return t={current:t},e.memoizedState=t},useState:CD,useDebugValue:Zk,useDeferredValue:function(t){return Aa().memoizedState=t},useTransition:function(){var t=CD(!1),e=t[0];return t=QQ.bind(null,t[1]),Aa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Nn,s=Aa();if(_n){if(n===void 0)throw Error(pe(407));n=n()}else{if(n=e(),vr===null)throw Error(pe(349));hf&30||aM(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,AD(lM.bind(null,r,i,t),[t]),r.flags|=2048,$w(9,cM.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Aa(),e=vr.identifierPrefix;if(_n){var n=Qc,r=Kc;n=(r&~(1<<32-na(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KQ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XQ={readContext:po,useCallback:yM,useContext:po,useEffect:Yk,useImperativeHandle:mM,useInsertionEffect:fM,useLayoutEffect:pM,useMemo:wM,useReducer:eS,useRef:hM,useState:function(){return eS(Dw)},useDebugValue:Zk,useDeferredValue:function(t){var e=go();return bM(e,rr.memoizedState,t)},useTransition:function(){var t=eS(Dw)[0],e=go().memoizedState;return[t,e]},useMutableSource:iM,useSyncExternalStore:oM,useId:vM,unstable_isNewReconciler:!1},eJ={readContext:po,useCallback:yM,useContext:po,useEffect:Yk,useImperativeHandle:mM,useInsertionEffect:fM,useLayoutEffect:pM,useMemo:wM,useReducer:tS,useRef:hM,useState:function(){return tS(Dw)},useDebugValue:Zk,useDeferredValue:function(t){var e=go();return rr===null?e.memoizedState=t:bM(e,rr.memoizedState,t)},useTransition:function(){var t=tS(Dw)[0],e=go().memoizedState;return[t,e]},useMutableSource:iM,useSyncExternalStore:oM,useId:vM,unstable_isNewReconciler:!1};function $o(t,e){if(t&&t.defaultProps){e=Pn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ZI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jx={isMounted:function(t){return(t=t._reactInternals)?jf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ss(),s=Xu(t),i=Zc(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yu(t,i,s),e!==null&&(ra(e,t,s,r),AE(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ss(),s=Xu(t),i=Zc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yu(t,i,s),e!==null&&(ra(e,t,s,r),AE(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ss(),r=Xu(t),s=Zc(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yu(t,s,r),e!==null&&(ra(e,t,r,n),AE(e,t,r))}};function SD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Iw(n,r)||!Iw(s,i):!0}function CM(t,e,n){var r=!1,s=fd,i=e.contextType;return typeof i=="object"&&i!==null?i=po(i):(s=ai(e)?uf:us.current,r=e.contextTypes,i=(r=r!=null)?Pm(t,s):fd),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ID(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jx.enqueueReplaceState(e,e.state,null)}function XI(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wk(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=po(i):(i=ai(e)?uf:us.current,s.context=Pm(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ZI(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jx.enqueueReplaceState(s,s.state,null),x_(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Dm(t,e){try{var n="",r=e;do n+=TK(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function nS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tJ=typeof WeakMap=="function"?WeakMap:Map;function AM(t,e,n){n=Zc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){T_||(T_=!0,uT=r),eT(t,e)},n}function SM(t,e,n){n=Zc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){eT(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){eT(t,e),typeof r!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function TD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gJ.bind(null,t,e,n),e.then(t,t))}function ND(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function PD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zc(-1,1),e.tag=2,Yu(n,e,1))),n.lanes|=1),t)}var nJ=yl.ReactCurrentOwner,si=!1;function ws(t,e,n,r){e.child=t===null?tM(e,null,n,r):Om(e,t.child,n,r)}function kD(t,e,n,r,s){n=n.render;var i=e.ref;return gg(e,s),r=Qk(t,e,n,r,i,s),n=Jk(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ll(t,e,s)):(_n&&n&&Bk(e),e.flags|=1,ws(t,e,r,s),e.child)}function OD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!oO(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,IM(t,e,i,r,s)):(t=kE(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Iw,n(o,r)&&t.ref===e.ref)return ll(t,e,s)}return e.flags|=1,t=ed(i,r),t.ref=e.ref,t.return=e,e.child=t}function IM(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Iw(i,r)&&t.ref===e.ref)if(si=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(si=!0);else return e.lanes=t.lanes,ll(t,e,s)}return tT(t,e,n,r,s)}function TM(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(tg,Ii),Ii|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dn(tg,Ii),Ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,dn(tg,Ii),Ii|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,dn(tg,Ii),Ii|=r;return ws(t,e,s,n),e.child}function NM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tT(t,e,n,r,s){var i=ai(n)?uf:us.current;return i=Pm(e,i),gg(e,s),n=Qk(t,e,n,r,i,s),r=Jk(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ll(t,e,s)):(_n&&r&&Bk(e),e.flags|=1,ws(t,e,n,s),e.child)}function RD(t,e,n,r,s){if(ai(n)){var i=!0;w_(e)}else i=!1;if(gg(e,s),e.stateNode===null)TE(t,e),CM(e,n,r),XI(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=po(l):(l=ai(n)?uf:us.current,l=Pm(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&ID(e,o,r,l),Yl=!1;var h=e.memoizedState;o.state=h,x_(e,r,o,s),c=e.memoizedState,a!==r||h!==c||oi.current||Yl?(typeof u=="function"&&(ZI(e,n,u,r),c=e.memoizedState),(a=Yl||SD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rM(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:$o(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=po(c):(c=ai(n)?uf:us.current,c=Pm(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&ID(e,o,r,c),Yl=!1,h=e.memoizedState,o.state=h,x_(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||oi.current||Yl?(typeof f=="function"&&(ZI(e,n,f,r),p=e.memoizedState),(l=Yl||SD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return nT(t,e,n,r,i,s)}function nT(t,e,n,r,s,i){NM(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wD(e,n,!1),ll(t,e,i);r=e.stateNode,nJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Om(e,t.child,null,i),e.child=Om(e,null,a,i)):ws(t,e,a,i),e.memoizedState=r.state,s&&wD(e,n,!0),e.child}function PM(t){var e=t.stateNode;e.pendingContext?yD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yD(t,e.context,!1),qk(t,e.containerInfo)}function DD(t,e,n,r,s){return km(),Mk(s),e.flags|=256,ws(t,e,n,r),e.child}var rT={dehydrated:null,treeContext:null,retryLane:0};function sT(t){return{baseLanes:t,cachePool:null,transitions:null}}function kM(t,e,n){var r=e.pendingProps,s=Sn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),dn(Sn,s&1),t===null)return JI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Xx(o,r,0,null),t=tf(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=sT(n),e.memoizedState=rT,t):Xk(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rJ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ed(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ed(a,i):(i=tf(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?sT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=rT,r}return i=t.child,t=i.sibling,r=ed(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xk(t,e){return e=Xx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function f1(t,e,n,r){return r!==null&&Mk(r),Om(e,t.child,null,n),t=Xk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=nS(Error(pe(422))),f1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Xx({mode:"visible",children:r.children},s,0,null),i=tf(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Om(e,t.child,null,o),e.child.memoizedState=sT(o),e.memoizedState=rT,i);if(!(e.mode&1))return f1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(pe(419)),r=nS(i,r,void 0),f1(t,e,o,r)}if(a=(o&t.childLanes)!==0,si||a){if(r=vr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cl(t,s),ra(r,t,s,-1))}return iO(),r=nS(Error(pe(421))),f1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mJ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ki=Ju(s.nextSibling),Di=e,_n=!0,Vo=null,t!==null&&(co[lo++]=Kc,co[lo++]=Qc,co[lo++]=df,Kc=t.id,Qc=t.overflow,df=e),e=Xk(e,r.children),e.flags|=4096,e)}function $D(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),YI(t.return,e,n)}function rS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function OM(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ws(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$D(t,n,e);else if(t.tag===19)$D(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dn(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&C_(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),rS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&C_(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}rS(e,!0,n,null,i);break;case"together":rS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function TE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ll(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ff|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,n=ed(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ed(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sJ(t,e,n){switch(e.tag){case 3:PM(e),km();break;case 5:sM(e);break;case 1:ai(e.type)&&w_(e);break;case 4:qk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;dn(E_,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dn(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?kM(t,e,n):(dn(Sn,Sn.current&1),t=ll(t,e,n),t!==null?t.sibling:null);dn(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OM(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),dn(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,TM(t,e,n)}return ll(t,e,n)}var RM,iT,DM,$M;RM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iT=function(){};DM=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,dh(Ja.current);var i=null;switch(n){case"input":s=II(t,s),r=II(t,r),i=[];break;case"select":s=Pn({},s,{value:void 0}),r=Pn({},r,{value:void 0}),i=[];break;case"textarea":s=PI(t,s),r=PI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=m_)}OI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vw.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vw.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&mn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};$M=function(t,e,n,r){n!==r&&(e.flags|=4)};function jy(t,e){if(!_n)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iJ(t,e,n){var r=e.pendingProps;switch(Lk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(e),null;case 1:return ai(e.type)&&y_(),Qr(e),null;case 3:return r=e.stateNode,Rm(),bn(oi),bn(us),Vk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(d1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vo!==null&&(fT(Vo),Vo=null))),iT(t,e),Qr(e),null;case 5:Gk(e);var s=dh(Ow.current);if(n=e.type,t!==null&&e.stateNode!=null)DM(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(pe(166));return Qr(e),null}if(t=dh(Ja.current),d1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ha]=e,r[Pw]=i,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(s=0;s<E0.length;s++)mn(E0[s],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":W3(r,i),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},mn("invalid",r);break;case"textarea":G3(r,i),mn("invalid",r)}OI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&u1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&u1(r.textContent,a,t),s=["children",""+a]):vw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":n1(r),q3(r,i,!0);break;case"textarea":n1(r),V3(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=m_)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ha]=e,t[Pw]=r,RM(t,e,!1,!1),e.stateNode=t;e:{switch(o=RI(n,r),n){case"dialog":mn("cancel",t),mn("close",t),s=r;break;case"iframe":case"object":case"embed":mn("load",t),s=r;break;case"video":case"audio":for(s=0;s<E0.length;s++)mn(E0[s],t);s=r;break;case"source":mn("error",t),s=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),s=r;break;case"details":mn("toggle",t),s=r;break;case"input":W3(t,r),s=II(t,r),mn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pn({},r,{value:void 0}),mn("invalid",t);break;case"textarea":G3(t,r),s=PI(t,r),mn("invalid",t);break;default:s=r}OI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?hL(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uL(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ew(t,c):typeof c=="number"&&Ew(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vw.hasOwnProperty(i)?c!=null&&i==="onScroll"&&mn("scroll",t):c!=null&&xk(t,i,c,o))}switch(n){case"input":n1(t),q3(t,r,!1);break;case"textarea":n1(t),V3(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hd(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?dg(t,!!r.multiple,i,!1):r.defaultValue!=null&&dg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=m_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qr(e),null;case 6:if(t&&e.stateNode!=null)$M(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(pe(166));if(n=dh(Ow.current),dh(Ja.current),d1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ha]=e,(i=r.nodeValue!==n)&&(t=Di,t!==null))switch(t.tag){case 3:u1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&u1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ha]=e,e.stateNode=r}return Qr(e),null;case 13:if(bn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_n&&ki!==null&&e.mode&1&&!(e.flags&128))XL(),km(),e.flags|=98560,i=!1;else if(i=d1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(pe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Ha]=e}else km(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qr(e),i=!1}else Vo!==null&&(fT(Vo),Vo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?or===0&&(or=3):iO())),e.updateQueue!==null&&(e.flags|=4),Qr(e),null);case 4:return Rm(),iT(t,e),t===null&&Tw(e.stateNode.containerInfo),Qr(e),null;case 10:return zk(e.type._context),Qr(e),null;case 17:return ai(e.type)&&y_(),Qr(e),null;case 19:if(bn(Sn),i=e.memoizedState,i===null)return Qr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)jy(i,!1);else{if(or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=C_(t),o!==null){for(e.flags|=128,jy(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dn(Sn,Sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fn()>$m&&(e.flags|=128,r=!0,jy(i,!1),e.lanes=4194304)}else{if(!r)if(t=C_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jy(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_n)return Qr(e),null}else 2*Fn()-i.renderingStartTime>$m&&n!==1073741824&&(e.flags|=128,r=!0,jy(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fn(),e.sibling=null,n=Sn.current,dn(Sn,r?n&1|2:n&1),e):(Qr(e),null);case 22:case 23:return sO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ii&1073741824&&(Qr(e),e.subtreeFlags&6&&(e.flags|=8192)):Qr(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function oJ(t,e){switch(Lk(e),e.tag){case 1:return ai(e.type)&&y_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rm(),bn(oi),bn(us),Vk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gk(e),null;case 13:if(bn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));km()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bn(Sn),null;case 4:return Rm(),null;case 10:return zk(e.type._context),null;case 22:case 23:return sO(),null;case 24:return null;default:return null}}var p1=!1,cs=!1,aJ=typeof WeakSet=="function"?WeakSet:Set,Be=null;function eg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dn(t,e,r)}else n.current=null}function oT(t,e,n){try{n()}catch(r){Dn(t,e,r)}}var UD=!1;function cJ(t,e){if(HI=f_,t=jL(),Uk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(WI={focusedElem:t,selectionRange:n},f_=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:$o(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(x){Dn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return p=UD,UD=!1,p}function G0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&oT(e,n,i)}s=s.next}while(s!==r)}}function Yx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function aT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UM(t){var e=t.alternate;e!==null&&(t.alternate=null,UM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ha],delete e[Pw],delete e[VI],delete e[WQ],delete e[qQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BM(t){return t.tag===5||t.tag===3||t.tag===4}function BD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=m_));else if(r!==4&&(t=t.child,t!==null))for(cT(t,e,n),t=t.sibling;t!==null;)cT(t,e,n),t=t.sibling}function lT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lT(t,e,n),t=t.sibling;t!==null;)lT(t,e,n),t=t.sibling}var Or=null,qo=!1;function _l(t,e,n){for(n=n.child;n!==null;)LM(t,e,n),n=n.sibling}function LM(t,e,n){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Hx,n)}catch{}switch(n.tag){case 5:cs||eg(n,e);case 6:var r=Or,s=qo;Or=null,_l(t,e,n),Or=r,qo=s,Or!==null&&(qo?(t=Or,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Or.removeChild(n.stateNode));break;case 18:Or!==null&&(qo?(t=Or,n=n.stateNode,t.nodeType===8?JA(t.parentNode,n):t.nodeType===1&&JA(t,n),Aw(t)):JA(Or,n.stateNode));break;case 4:r=Or,s=qo,Or=n.stateNode.containerInfo,qo=!0,_l(t,e,n),Or=r,qo=s;break;case 0:case 11:case 14:case 15:if(!cs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&oT(n,e,o),s=s.next}while(s!==r)}_l(t,e,n);break;case 1:if(!cs&&(eg(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Dn(n,e,a)}_l(t,e,n);break;case 21:_l(t,e,n);break;case 22:n.mode&1?(cs=(r=cs)||n.memoizedState!==null,_l(t,e,n),cs=r):_l(t,e,n);break;default:_l(t,e,n)}}function LD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aJ),e.forEach(function(r){var s=yJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Or=a.stateNode,qo=!1;break e;case 3:Or=a.stateNode.containerInfo,qo=!0;break e;case 4:Or=a.stateNode.containerInfo,qo=!0;break e}a=a.return}if(Or===null)throw Error(pe(160));LM(i,o,s),Or=null,qo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Dn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MM(e,t),e=e.sibling}function MM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xo(e,t),ya(t),r&4){try{G0(3,t,t.return),Yx(3,t)}catch(g){Dn(t,t.return,g)}try{G0(5,t,t.return)}catch(g){Dn(t,t.return,g)}}break;case 1:xo(e,t),ya(t),r&512&&n!==null&&eg(n,n.return);break;case 5:if(xo(e,t),ya(t),r&512&&n!==null&&eg(n,n.return),t.flags&32){var s=t.stateNode;try{Ew(s,"")}catch(g){Dn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&aL(s,i),RI(a,o);var l=RI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?hL(s,d):u==="dangerouslySetInnerHTML"?uL(s,d):u==="children"?Ew(s,d):xk(s,u,d,l)}switch(a){case"input":TI(s,i);break;case"textarea":cL(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?dg(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?dg(s,!!i.multiple,i.defaultValue,!0):dg(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pw]=i}catch(g){Dn(t,t.return,g)}}break;case 6:if(xo(e,t),ya(t),r&4){if(t.stateNode===null)throw Error(pe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Dn(t,t.return,g)}}break;case 3:if(xo(e,t),ya(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aw(e.containerInfo)}catch(g){Dn(t,t.return,g)}break;case 4:xo(e,t),ya(t);break;case 13:xo(e,t),ya(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(nO=Fn())),r&4&&LD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(cs=(l=cs)||u,xo(e,t),cs=l):xo(e,t),ya(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Be=t,u=t.child;u!==null;){for(d=Be=u;Be!==null;){switch(h=Be,f=h.child,h.tag){case 0:case 11:case 14:case 15:G0(4,h,h.return);break;case 1:eg(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Dn(r,n,g)}}break;case 5:eg(h,h.return);break;case 22:if(h.memoizedState!==null){jD(d);continue}}f!==null?(f.return=h,Be=f):jD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=dL("display",o))}catch(g){Dn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Dn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xo(e,t),ya(t),r&4&&LD(t);break;case 21:break;default:xo(e,t),ya(t)}}function ya(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BM(n)){var r=n;break e}n=n.return}throw Error(pe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ew(s,""),r.flags&=-33);var i=BD(t);lT(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=BD(t);cT(t,a,o);break;default:throw Error(pe(161))}}catch(c){Dn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lJ(t,e,n){Be=t,jM(t)}function jM(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||p1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||cs;a=p1;var l=cs;if(p1=o,(cs=c)&&!l)for(Be=s;Be!==null;)o=Be,c=o.child,o.tag===22&&o.memoizedState!==null?FD(s):c!==null?(c.return=o,Be=c):FD(s);for(;i!==null;)Be=i,jM(i),i=i.sibling;Be=s,p1=a,cs=l}MD(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):MD(t)}}function MD(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cs||Yx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$o(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Aw(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}cs||e.flags&512&&aT(e)}catch(h){Dn(e,e.return,h)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function jD(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function FD(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yx(4,e)}catch(c){Dn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Dn(e,s,c)}}var i=e.return;try{aT(e)}catch(c){Dn(e,i,c)}break;case 5:var o=e.return;try{aT(e)}catch(c){Dn(e,o,c)}}}catch(c){Dn(e,e.return,c)}if(e===t){Be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Be=a;break}Be=e.return}}var uJ=Math.ceil,I_=yl.ReactCurrentDispatcher,eO=yl.ReactCurrentOwner,fo=yl.ReactCurrentBatchConfig,Nt=0,vr=null,Qn=null,Ur=0,Ii=0,tg=Td(0),or=0,Uw=null,ff=0,Zx=0,tO=0,V0=null,ei=null,nO=0,$m=1/0,Cc=null,T_=!1,uT=null,Zu=null,g1=!1,ju=null,N_=0,K0=0,dT=null,NE=-1,PE=0;function Ss(){return Nt&6?Fn():NE!==-1?NE:NE=Fn()}function Xu(t){return t.mode&1?Nt&2&&Ur!==0?Ur&-Ur:VQ.transition!==null?(PE===0&&(PE=CL()),PE):(t=Jt,t!==0||(t=window.event,t=t===void 0?16:kL(t.type)),t):1}function ra(t,e,n,r){if(50<K0)throw K0=0,dT=null,Error(pe(185));pv(t,n,r),(!(Nt&2)||t!==vr)&&(t===vr&&(!(Nt&2)&&(Zx|=n),or===4&&au(t,Ur)),ci(t,r),n===1&&Nt===0&&!(e.mode&1)&&($m=Fn()+500,Kx&&Nd()))}function ci(t,e){var n=t.callbackNode;VK(t,e);var r=h_(t,t===vr?Ur:0);if(r===0)n!==null&&J3(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&J3(n),e===1)t.tag===0?GQ(zD.bind(null,t)):JL(zD.bind(null,t)),zQ(function(){!(Nt&6)&&Nd()}),n=null;else{switch(AL(r)){case 1:n=Tk;break;case 4:n=_L;break;case 16:n=d_;break;case 536870912:n=xL;break;default:n=d_}n=KM(n,FM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FM(t,e){if(NE=-1,PE=0,Nt&6)throw Error(pe(327));var n=t.callbackNode;if(mg()&&t.callbackNode!==n)return null;var r=h_(t,t===vr?Ur:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=P_(t,r);else{e=r;var s=Nt;Nt|=2;var i=HM();(vr!==t||Ur!==e)&&(Cc=null,$m=Fn()+500,ef(t,e));do try{fJ();break}catch(a){zM(t,a)}while(!0);Fk(),I_.current=i,Nt=s,Qn!==null?e=0:(vr=null,Ur=0,e=or)}if(e!==0){if(e===2&&(s=LI(t),s!==0&&(r=s,e=hT(t,s))),e===1)throw n=Uw,ef(t,0),au(t,r),ci(t,Fn()),n;if(e===6)au(t,r);else{if(s=t.current.alternate,!(r&30)&&!dJ(s)&&(e=P_(t,r),e===2&&(i=LI(t),i!==0&&(r=i,e=hT(t,i))),e===1))throw n=Uw,ef(t,0),au(t,r),ci(t,Fn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(pe(345));case 2:Vd(t,ei,Cc);break;case 3:if(au(t,r),(r&130023424)===r&&(e=nO+500-Fn(),10<e)){if(h_(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ss(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=GI(Vd.bind(null,t,ei,Cc),e);break}Vd(t,ei,Cc);break;case 4:if(au(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-na(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uJ(r/1960))-r,10<r){t.timeoutHandle=GI(Vd.bind(null,t,ei,Cc),r);break}Vd(t,ei,Cc);break;case 5:Vd(t,ei,Cc);break;default:throw Error(pe(329))}}}return ci(t,Fn()),t.callbackNode===n?FM.bind(null,t):null}function hT(t,e){var n=V0;return t.current.memoizedState.isDehydrated&&(ef(t,e).flags|=256),t=P_(t,e),t!==2&&(e=ei,ei=n,e!==null&&fT(e)),t}function fT(t){ei===null?ei=t:ei.push.apply(ei,t)}function dJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!aa(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function au(t,e){for(e&=~tO,e&=~Zx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-na(e),r=1<<n;t[n]=-1,e&=~r}}function zD(t){if(Nt&6)throw Error(pe(327));mg();var e=h_(t,0);if(!(e&1))return ci(t,Fn()),null;var n=P_(t,e);if(t.tag!==0&&n===2){var r=LI(t);r!==0&&(e=r,n=hT(t,r))}if(n===1)throw n=Uw,ef(t,0),au(t,e),ci(t,Fn()),n;if(n===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vd(t,ei,Cc),ci(t,Fn()),null}function rO(t,e){var n=Nt;Nt|=1;try{return t(e)}finally{Nt=n,Nt===0&&($m=Fn()+500,Kx&&Nd())}}function pf(t){ju!==null&&ju.tag===0&&!(Nt&6)&&mg();var e=Nt;Nt|=1;var n=fo.transition,r=Jt;try{if(fo.transition=null,Jt=1,t)return t()}finally{Jt=r,fo.transition=n,Nt=e,!(Nt&6)&&Nd()}}function sO(){Ii=tg.current,bn(tg)}function ef(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FQ(n)),Qn!==null)for(n=Qn.return;n!==null;){var r=n;switch(Lk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&y_();break;case 3:Rm(),bn(oi),bn(us),Vk();break;case 5:Gk(r);break;case 4:Rm();break;case 13:bn(Sn);break;case 19:bn(Sn);break;case 10:zk(r.type._context);break;case 22:case 23:sO()}n=n.return}if(vr=t,Qn=t=ed(t.current,null),Ur=Ii=e,or=0,Uw=null,tO=Zx=ff=0,ei=V0=null,uh!==null){for(e=0;e<uh.length;e++)if(n=uh[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}uh=null}return t}function zM(t,e){do{var n=Qn;try{if(Fk(),SE.current=S_,A_){for(var r=Nn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}A_=!1}if(hf=0,pr=rr=Nn=null,q0=!1,Rw=0,eO.current=null,n===null||n.return===null){or=1,Uw=e,Qn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ur,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ND(o);if(f!==null){f.flags&=-257,PD(f,o,a,i,e),f.mode&1&&TD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){TD(i,l,e),iO();break e}c=Error(pe(426))}}else if(_n&&a.mode&1){var y=ND(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),PD(y,o,a,i,e),Mk(Dm(c,a));break e}}i=c=Dm(c,a),or!==4&&(or=2),V0===null?V0=[i]:V0.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=AM(i,c,e);_D(i,w);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zu===null||!Zu.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=SM(i,a,e);_D(i,x);break e}}i=i.return}while(i!==null)}qM(n)}catch(_){e=_,Qn===n&&n!==null&&(Qn=n=n.return);continue}break}while(!0)}function HM(){var t=I_.current;return I_.current=S_,t===null?S_:t}function iO(){(or===0||or===3||or===2)&&(or=4),vr===null||!(ff&268435455)&&!(Zx&268435455)||au(vr,Ur)}function P_(t,e){var n=Nt;Nt|=2;var r=HM();(vr!==t||Ur!==e)&&(Cc=null,ef(t,e));do try{hJ();break}catch(s){zM(t,s)}while(!0);if(Fk(),Nt=n,I_.current=r,Qn!==null)throw Error(pe(261));return vr=null,Ur=0,or}function hJ(){for(;Qn!==null;)WM(Qn)}function fJ(){for(;Qn!==null&&!LK();)WM(Qn)}function WM(t){var e=VM(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,e===null?qM(t):Qn=e,eO.current=null}function qM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oJ(n,e),n!==null){n.flags&=32767,Qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{or=6,Qn=null;return}}else if(n=iJ(n,e,Ii),n!==null){Qn=n;return}if(e=e.sibling,e!==null){Qn=e;return}Qn=e=t}while(e!==null);or===0&&(or=5)}function Vd(t,e,n){var r=Jt,s=fo.transition;try{fo.transition=null,Jt=1,pJ(t,e,n,r)}finally{fo.transition=s,Jt=r}return null}function pJ(t,e,n,r){do mg();while(ju!==null);if(Nt&6)throw Error(pe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KK(t,i),t===vr&&(Qn=vr=null,Ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||g1||(g1=!0,KM(d_,function(){return mg(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fo.transition,fo.transition=null;var o=Jt;Jt=1;var a=Nt;Nt|=4,eO.current=null,cJ(t,n),MM(n,t),DQ(WI),f_=!!HI,WI=HI=null,t.current=n,lJ(n),MK(),Nt=a,Jt=o,fo.transition=i}else t.current=n;if(g1&&(g1=!1,ju=t,N_=s),i=t.pendingLanes,i===0&&(Zu=null),zK(n.stateNode),ci(t,Fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(T_)throw T_=!1,t=uT,uT=null,t;return N_&1&&t.tag!==0&&mg(),i=t.pendingLanes,i&1?t===dT?K0++:(K0=0,dT=t):K0=0,Nd(),null}function mg(){if(ju!==null){var t=AL(N_),e=fo.transition,n=Jt;try{if(fo.transition=null,Jt=16>t?16:t,ju===null)var r=!1;else{if(t=ju,ju=null,N_=0,Nt&6)throw Error(pe(331));var s=Nt;for(Nt|=4,Be=t.current;Be!==null;){var i=Be,o=i.child;if(Be.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Be=l;Be!==null;){var u=Be;switch(u.tag){case 0:case 11:case 15:G0(8,u,i)}var d=u.child;if(d!==null)d.return=u,Be=d;else for(;Be!==null;){u=Be;var h=u.sibling,f=u.return;if(UM(u),u===l){Be=null;break}if(h!==null){h.return=f,Be=h;break}Be=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Be=o;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:G0(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Be=w;break e}Be=i.return}}var v=t.current;for(Be=v;Be!==null;){o=Be;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Be=b;else e:for(o=v;Be!==null;){if(a=Be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yx(9,a)}}catch(_){Dn(a,a.return,_)}if(a===o){Be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Be=x;break e}Be=a.return}}if(Nt=s,Nd(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Hx,t)}catch{}r=!0}return r}finally{Jt=n,fo.transition=e}}return!1}function HD(t,e,n){e=Dm(n,e),e=AM(t,e,1),t=Yu(t,e,1),e=Ss(),t!==null&&(pv(t,1,e),ci(t,e))}function Dn(t,e,n){if(t.tag===3)HD(t,t,n);else for(;e!==null;){if(e.tag===3){HD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zu===null||!Zu.has(r))){t=Dm(n,t),t=SM(e,t,1),e=Yu(e,t,1),t=Ss(),e!==null&&(pv(e,1,t),ci(e,t));break}}e=e.return}}function gJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ss(),t.pingedLanes|=t.suspendedLanes&n,vr===t&&(Ur&n)===n&&(or===4||or===3&&(Ur&130023424)===Ur&&500>Fn()-nO?ef(t,0):tO|=n),ci(t,e)}function GM(t,e){e===0&&(t.mode&1?(e=i1,i1<<=1,!(i1&130023424)&&(i1=4194304)):e=1);var n=Ss();t=cl(t,e),t!==null&&(pv(t,e,n),ci(t,n))}function mJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GM(t,n)}function yJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(pe(314))}r!==null&&r.delete(e),GM(t,n)}var VM;VM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||oi.current)si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return si=!1,sJ(t,e,n);si=!!(t.flags&131072)}else si=!1,_n&&e.flags&1048576&&YL(e,v_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;TE(t,e),t=e.pendingProps;var s=Pm(e,us.current);gg(e,n),s=Qk(null,e,r,t,s,n);var i=Jk();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ai(r)?(i=!0,w_(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wk(e),s.updater=Jx,e.stateNode=s,s._reactInternals=e,XI(e,r,t,n),e=nT(null,e,r,!0,i,n)):(e.tag=0,_n&&i&&Bk(e),ws(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(TE(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=bJ(r),t=$o(r,t),s){case 0:e=tT(null,e,r,t,n);break e;case 1:e=RD(null,e,r,t,n);break e;case 11:e=kD(null,e,r,t,n);break e;case 14:e=OD(null,e,r,$o(r.type,t),n);break e}throw Error(pe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$o(r,s),tT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$o(r,s),RD(t,e,r,s,n);case 3:e:{if(PM(e),t===null)throw Error(pe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rM(t,e),x_(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Dm(Error(pe(423)),e),e=DD(t,e,r,n,s);break e}else if(r!==s){s=Dm(Error(pe(424)),e),e=DD(t,e,r,n,s);break e}else for(ki=Ju(e.stateNode.containerInfo.firstChild),Di=e,_n=!0,Vo=null,n=tM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(km(),r===s){e=ll(t,e,n);break e}ws(t,e,r,n)}e=e.child}return e;case 5:return sM(e),t===null&&JI(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,qI(r,s)?o=null:i!==null&&qI(r,i)&&(e.flags|=32),NM(t,e),ws(t,e,o,n),e.child;case 6:return t===null&&JI(e),null;case 13:return kM(t,e,n);case 4:return qk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Om(e,null,r,n):ws(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$o(r,s),kD(t,e,r,s,n);case 7:return ws(t,e,e.pendingProps,n),e.child;case 8:return ws(t,e,e.pendingProps.children,n),e.child;case 12:return ws(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,dn(E_,r._currentValue),r._currentValue=o,i!==null)if(aa(i.value,o)){if(i.children===s.children&&!oi.current){e=ll(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),YI(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(pe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),YI(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ws(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,gg(e,n),s=po(s),r=r(s),e.flags|=1,ws(t,e,r,n),e.child;case 14:return r=e.type,s=$o(r,e.pendingProps),s=$o(r.type,s),OD(t,e,r,s,n);case 15:return IM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$o(r,s),TE(t,e),e.tag=1,ai(r)?(t=!0,w_(e)):t=!1,gg(e,n),CM(e,r,s),XI(e,r,s,n),nT(null,e,r,!0,t,n);case 19:return OM(t,e,n);case 22:return TM(t,e,n)}throw Error(pe(156,e.tag))};function KM(t,e){return EL(t,e)}function wJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(t,e,n,r){return new wJ(t,e,n,r)}function oO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bJ(t){if(typeof t=="function")return oO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ak)return 11;if(t===Sk)return 14}return 2}function ed(t,e){var n=t.alternate;return n===null?(n=uo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kE(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")oO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qp:return tf(n.children,s,i,e);case Ck:o=8,s|=8;break;case xI:return t=uo(12,n,e,s|2),t.elementType=xI,t.lanes=i,t;case CI:return t=uo(13,n,e,s),t.elementType=CI,t.lanes=i,t;case AI:return t=uo(19,n,e,s),t.elementType=AI,t.lanes=i,t;case sL:return Xx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nL:o=10;break e;case rL:o=9;break e;case Ak:o=11;break e;case Sk:o=14;break e;case Jl:o=16,r=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=uo(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function tf(t,e,n,r){return t=uo(7,t,r,e),t.lanes=n,t}function Xx(t,e,n,r){return t=uo(22,t,r,e),t.elementType=sL,t.lanes=n,t.stateNode={isHidden:!1},t}function sS(t,e,n){return t=uo(6,t,null,e),t.lanes=n,t}function iS(t,e,n){return e=uo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vJ(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=MA(0),this.expirationTimes=MA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=MA(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function aO(t,e,n,r,s,i,o,a,c){return t=new vJ(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=uo(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wk(i),t}function EJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function QM(t){if(!t)return fd;t=t._reactInternals;e:{if(jf(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var n=t.type;if(ai(n))return QL(t,n,e)}return e}function JM(t,e,n,r,s,i,o,a,c){return t=aO(n,r,!0,t,s,i,o,a,c),t.context=QM(null),n=t.current,r=Ss(),s=Xu(n),i=Zc(r,s),i.callback=e??null,Yu(n,i,s),t.current.lanes=s,pv(t,s,r),ci(t,r),t}function eC(t,e,n,r){var s=e.current,i=Ss(),o=Xu(s);return n=QM(n),e.context===null?e.context=n:e.pendingContext=n,e=Zc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yu(s,e,o),t!==null&&(ra(t,s,o,i),AE(t,s,o)),o}function k_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cO(t,e){WD(t,e),(t=t.alternate)&&WD(t,e)}function _J(){return null}var YM=typeof reportError=="function"?reportError:function(t){console.error(t)};function lO(t){this._internalRoot=t}tC.prototype.render=lO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));eC(t,e,null,null)};tC.prototype.unmount=lO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pf(function(){eC(null,t,null,null)}),e[al]=null}};function tC(t){this._internalRoot=t}tC.prototype.unstable_scheduleHydration=function(t){if(t){var e=TL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ou.length&&e!==0&&e<ou[n].priority;n++);ou.splice(n,0,t),n===0&&PL(t)}};function uO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qD(){}function xJ(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=k_(o);i.call(l)}}var o=JM(e,r,t,0,null,!1,!1,"",qD);return t._reactRootContainer=o,t[al]=o.current,Tw(t.nodeType===8?t.parentNode:t),pf(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=k_(c);a.call(l)}}var c=aO(t,0,!1,null,null,!1,!1,"",qD);return t._reactRootContainer=c,t[al]=c.current,Tw(t.nodeType===8?t.parentNode:t),pf(function(){eC(e,c,n,r)}),c}function rC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=k_(o);a.call(c)}}eC(e,o,t,s)}else o=xJ(n,e,t,s,r);return k_(o)}SL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=v0(e.pendingLanes);n!==0&&(Nk(e,n|1),ci(e,Fn()),!(Nt&6)&&($m=Fn()+500,Nd()))}break;case 13:pf(function(){var r=cl(t,1);if(r!==null){var s=Ss();ra(r,t,1,s)}}),cO(t,1)}};Pk=function(t){if(t.tag===13){var e=cl(t,134217728);if(e!==null){var n=Ss();ra(e,t,134217728,n)}cO(t,134217728)}};IL=function(t){if(t.tag===13){var e=Xu(t),n=cl(t,e);if(n!==null){var r=Ss();ra(n,t,e,r)}cO(t,e)}};TL=function(){return Jt};NL=function(t,e){var n=Jt;try{return Jt=t,e()}finally{Jt=n}};$I=function(t,e,n){switch(e){case"input":if(TI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vx(r);if(!s)throw Error(pe(90));oL(r),TI(r,s)}}}break;case"textarea":cL(t,n);break;case"select":e=n.value,e!=null&&dg(t,!!n.multiple,e,!1)}};gL=rO;mL=pf;var CJ={usingClientEntryPoint:!1,Events:[mv,Qp,Vx,fL,pL,rO]},Fy={findFiberByHostInstance:lh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AJ={bundleType:Fy.bundleType,version:Fy.version,rendererPackageName:Fy.rendererPackageName,rendererConfig:Fy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bL(t),t===null?null:t.stateNode},findFiberByHostInstance:Fy.findFiberByHostInstance||_J,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m1.isDisabled&&m1.supportsFiber)try{Hx=m1.inject(AJ),Qa=m1}catch{}}Mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CJ;Mi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uO(e))throw Error(pe(200));return EJ(t,e,null,n)};Mi.createRoot=function(t,e){if(!uO(t))throw Error(pe(299));var n=!1,r="",s=YM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=aO(t,1,!1,null,null,n,!1,r,s),t[al]=e.current,Tw(t.nodeType===8?t.parentNode:t),new lO(e)};Mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=bL(e),t=t===null?null:t.stateNode,t};Mi.flushSync=function(t){return pf(t)};Mi.hydrate=function(t,e,n){if(!nC(e))throw Error(pe(200));return rC(null,t,e,!0,n)};Mi.hydrateRoot=function(t,e,n){if(!uO(t))throw Error(pe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=YM;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JM(e,null,t,1,n??null,s,!1,i,o),t[al]=e.current,Tw(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tC(e)};Mi.render=function(t,e,n){if(!nC(e))throw Error(pe(200));return rC(null,t,e,!1,n)};Mi.unmountComponentAtNode=function(t){if(!nC(t))throw Error(pe(40));return t._reactRootContainer?(pf(function(){rC(null,null,t,!1,function(){t._reactRootContainer=null,t[al]=null})}),!0):!1};Mi.unstable_batchedUpdates=rO;Mi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nC(n))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return rC(t,e,n,!1,r)};Mi.version="18.3.1-next-f1338f8080-20240426";function ZM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZM)}catch(t){console.error(t)}}ZM(),ZB.exports=Mi;var dO=ZB.exports,GD=dO;EI.createRoot=GD.createRoot,EI.hydrateRoot=GD.hydrateRoot;const XM="2.31.4";let zy={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${XM}`},de=class pT extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof pT?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof pT&&n.cause.docsPath||n.docsPath,i=(a=zy.getDocsUrl)==null?void 0:a.call(zy,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...zy.version?[`Version: ${zy.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=XM}walk(e){return ej(this,e)}};function ej(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?ej(t.cause,e):e?null:t}let tj=class extends de{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class SJ extends de{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let IJ=class extends de{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class nj extends de{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let rj=class extends de{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class VD extends de{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function cy(t,{dir:e,size:n=32}={}){return typeof t=="string"?td(t,{dir:e,size:n}):TJ(t,{dir:e,size:n})}function td(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new rj({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function TJ(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new rj({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function ul(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Wn(t){return ul(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function ly(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const NJ=new TextEncoder;function sC(t,e={}){return typeof t=="number"||typeof t=="bigint"?kJ(t,e):typeof t=="boolean"?PJ(t,e):ul(t)?nc(t,e):yg(t,e)}function PJ(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(da(n,{size:e.size}),cy(n,{size:e.size})):n}const lc={zero:48,nine:57,A:65,F:70,a:97,f:102};function KD(t){if(t>=lc.zero&&t<=lc.nine)return t-lc.zero;if(t>=lc.A&&t<=lc.F)return t-(lc.A-10);if(t>=lc.a&&t<=lc.f)return t-(lc.a-10)}function nc(t,e={}){let n=t;e.size&&(da(n,{size:e.size}),n=cy(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=KD(r.charCodeAt(a++)),l=KD(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new de(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function kJ(t,e){const n=et(t,e);return nc(n)}function yg(t,e={}){const n=NJ.encode(t);return typeof e.size=="number"?(da(n,{size:e.size}),cy(n,{dir:"right",size:e.size})):n}function da(t,{size:e}){if(Wn(t)>e)throw new IJ({givenSize:Wn(t),maxSize:e})}function dl(t,e={}){const{signed:n}=e;e.size&&da(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function hl(t,e={}){return Number(dl(t,e))}function sj(t,e={}){let n=nc(t);return e.size&&(da(n,{size:e.size}),n=ly(n,{dir:"right"})),new TextDecoder().decode(n)}const OJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gf(t,e={}){return typeof t=="number"||typeof t=="bigint"?et(t,e):typeof t=="string"?iC(t,e):typeof t=="boolean"?ij(t,e):Ps(t,e)}function ij(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(da(n,{size:e.size}),cy(n,{size:e.size})):n}function Ps(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=OJ[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(da(r,{size:e.size}),cy(r,{dir:"right",size:e.size})):r}function et(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new tj({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?cy(a,{size:r}):a}const RJ=new TextEncoder;function iC(t,e={}){const n=RJ.encode(t);return Ps(n,e)}async function DJ(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:et(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function pd(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new VJ(t.type);return`${t.name}(${oC(t.inputs,{includeName:e})})`}function oC(t,{includeName:e=!1}={}){return t?t.map(n=>$J(n,{includeName:e})).join(e?", ":","):""}function $J(t,{includeName:e}){return t.type.startsWith("tuple")?`(${oC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class UJ extends de{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class QD extends de{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class oj extends de{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${oC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class aC extends de{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class BJ extends de{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class LJ extends de{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Wn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class MJ extends de{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class N5e extends de{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class P5e extends de{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class aj extends de{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class jJ extends de{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class cj extends de{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class O_ extends de{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class FJ extends de{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class k5e extends de{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class zJ extends de{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${pd(e.abiItem)}\`, and`,`\`${n.type}\` in \`${pd(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class HJ extends de{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class gT extends de{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${oC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class lj extends de{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${pd(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class WJ extends de{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class qJ extends de{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class GJ extends de{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class VJ extends de{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function gd(t){return typeof t[0]=="string"?cC(t):KJ(t)}function KJ(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function cC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class md extends de{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let lC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const y1=BigInt(2**32-1),JD=BigInt(32);function QJ(t,e=!1){return e?{h:Number(t&y1),l:Number(t>>JD&y1)}:{h:Number(t>>JD&y1)|0,l:Number(t&y1)|0}}function JJ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=QJ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const YJ=(t,e,n)=>t<<n|e>>>32-n,ZJ=(t,e,n)=>e<<n|t>>>32-n,XJ=(t,e,n)=>e<<n-32|t>>>64-n,eY=(t,e,n)=>t<<n-32|e>>>64-n,sp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function R_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function mf(t,...e){if(!tY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function R5e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");R_(t.outputLen),R_(t.blockLen)}function D_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uj(t,e){mf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function nY(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Bw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function oS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function wa(t,e){return t<<32-e|t>>>e}const rY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sY(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function iY(t){for(let e=0;e<t.length;e++)t[e]=sY(t[e]);return t}const YD=rY?t=>t:iY,dj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",oY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function D5e(t){if(mf(t),dj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=oY[t[n]];return e}const uc={_0:48,_9:57,A:65,F:70,a:97,f:102};function ZD(t){if(t>=uc._0&&t<=uc._9)return t-uc._0;if(t>=uc.A&&t<=uc.F)return t-(uc.A-10);if(t>=uc.a&&t<=uc.f)return t-(uc.a-10)}function $5e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(dj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=ZD(t.charCodeAt(i)),a=ZD(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function aY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function uC(t){return typeof t=="string"&&(t=aY(t)),mf(t),t}function U5e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];mf(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let hj=class{};function fj(t){const e=r=>t().update(uC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cY(t){const e=(r,s)=>t(s).update(uC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function L5e(t=32){if(sp&&typeof sp.getRandomValues=="function")return sp.getRandomValues(new Uint8Array(t));if(sp&&typeof sp.randomBytes=="function")return Uint8Array.from(sp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const lY=BigInt(0),Hy=BigInt(1),uY=BigInt(2),dY=BigInt(7),hY=BigInt(256),fY=BigInt(113),pj=[],gj=[],mj=[];for(let t=0,e=Hy,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],pj.push(2*(5*r+n)),gj.push((t+1)*(t+2)/2%64);let s=lY;for(let i=0;i<7;i++)e=(e<<Hy^(e>>dY)*fY)%hY,e&uY&&(s^=Hy<<(Hy<<BigInt(i))-Hy);mj.push(s)}const yj=JJ(mj,!0),pY=yj[0],gY=yj[1],XD=(t,e,n)=>n>32?XJ(t,e,n):YJ(t,e,n),e$=(t,e,n)=>n>32?eY(t,e,n):ZJ(t,e,n);function wj(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=XD(l,u,1)^n[a],h=e$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=gj[o],c=XD(s,i,a),l=e$(s,i,a),u=pj[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=pY[r],t[1]^=gY[r]}Bw(n)}let hO=class bj extends hj{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,R_(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=nY(this.state)}clone(){return this._cloneInto()}keccak(){YD(this.state32),wj(this.state32,this.rounds),YD(this.state32),this.posOut=0,this.pos=0}update(e){D_(this),e=uC(e),mf(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){D_(this,!1),mf(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return R_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(uj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Bw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new bj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Pd=(t,e,n)=>fj(()=>new hO(e,t,n)),mY=Pd(6,144,224/8),yY=Pd(6,136,256/8),wY=Pd(6,104,384/8),bY=Pd(6,72,512/8),vY=Pd(1,144,224/8),fO=Pd(1,136,256/8),EY=Pd(1,104,384/8),_Y=Pd(1,72,512/8),vj=(t,e,n)=>cY((r={})=>new hO(e,t,r.dkLen===void 0?n:r.dkLen,!0)),xY=vj(31,168,128/8),CY=vj(31,136,256/8),M5e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:hO,keccakP:wj,keccak_224:vY,keccak_256:fO,keccak_384:EY,keccak_512:_Y,sha3_224:mY,sha3_256:yY,sha3_384:wY,sha3_512:bY,shake128:xY,shake256:CY},Symbol.toStringTag,{value:"Module"}));function uy(t,e){const n=e||"hex",r=fO(ul(t,{strict:!1})?sC(t):t);return n==="bytes"?r:gf(r)}const aS=new lC(8192);function wv(t,e){if(aS.has(`${t}.${e}`))return aS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=uy(yg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return aS.set(`${t}.${e}`,i),i}function Fu(t,e){if(!ca(t,{strict:!1}))throw new md({address:t});return wv(t,e)}const AY=/^0x[a-fA-F0-9]{40}$/,cS=new lC(8192);function ca(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(cS.has(r))return cS.get(r);const s=AY.test(t)?t.toLowerCase()===t?!0:n?wv(t)===t:!0:!1;return cS.set(r,s),s}function $_(t,e,n,{strict:r}={}){return ul(t,{strict:!1})?mT(t,e,n,{strict:r}):xj(t,e,n,{strict:r})}function Ej(t,e){if(typeof e=="number"&&e>0&&e>Wn(t)-1)throw new nj({offset:e,position:"start",size:Wn(t)})}function _j(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Wn(t)!==n-e)throw new nj({offset:n,position:"end",size:Wn(t)})}function xj(t,e,n,{strict:r}={}){Ej(t,e);const s=t.slice(e,n);return r&&_j(s,e,n),s}function mT(t,e,n,{strict:r}={}){Ej(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&_j(s,e,n),s}const SY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Cj=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Aj(t,e){if(t.length!==e.length)throw new MJ({expectedLength:t.length,givenLength:e.length});const n=IY({params:t,values:e}),r=gO(n);return r.length===0?"0x":r}function IY({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(pO({param:t[r],value:e[r]}));return n}function pO({param:t,value:e}){const n=mO(t.type);if(n){const[r,s]=n;return NY(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return DY(e,{param:t});if(t.type==="address")return TY(e);if(t.type==="bool")return kY(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Cj.exec(t.type)??[];return OY(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return PY(e,{param:t});if(t.type==="string")return RY(e);throw new WJ(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function gO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Wn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(et(e+s,{size:32})),r.push(a),s+=Wn(a)):n.push(a)}return gd([...n,...r])}function TY(t){if(!ca(t))throw new md({address:t});return{dynamic:!1,encoded:td(t.toLowerCase())}}function NY(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new GJ(t);if(!r&&t.length!==e)throw new BJ({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=pO({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=gO(i);if(r){const a=et(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?gd([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:gd(i.map(({encoded:o})=>o))}}function PY(t,{param:e}){const[,n]=e.type.split("bytes"),r=Wn(t);if(!n){let s=t;return r%32!==0&&(s=td(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:gd([td(et(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new LJ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:td(t,{dir:"right"})}}function kY(t){if(typeof t!="boolean")throw new de(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:td(ij(t))}}function OY(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new tj({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:et(t,{size:32,signed:e})}}function RY(t){const e=iC(t),n=Math.ceil(Wn(e)/32),r=[];for(let s=0;s<n;s++)r.push(td($_(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:gd([td(et(Wn(e),{size:32})),...r])}}function DY(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=pO({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?gO(r):gd(r.map(({encoded:s})=>s))}}function mO(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const lS="/docs/contract/encodeDeployData";function yO(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new UJ({docsPath:lS});if(!("inputs"in s))throw new QD({docsPath:lS});if(!s.inputs||s.inputs.length===0)throw new QD({docsPath:lS});const i=Aj(s.inputs,n);return cC([r,i])}function Mr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Ff extends de{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class OE extends de{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function $Y(t){const e=uy(`0x${t.substring(4)}`).substring(26);return wv(`0x${e}`)}const UY="modulepreload",BY=function(t){return"/"+t},t$={},Mn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=BY(c),c in t$)return;t$[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":UY,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function LY({hash:t,signature:e}){const n=ul(t)?t:gf(t),{secp256k1:r}=await Mn(async()=>{const{secp256k1:o}=await import("./secp256k1-BEK3UHkv.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=n$(f);return new r.Signature(dl(l),dl(u)).addRecoveryBit(p)}const o=ul(e)?e:gf(e);if(Wn(o)!==65)throw new Error("invalid signature length");const a=hl(`0x${o.slice(130)}`),c=n$(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function n$(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function MY({hash:t,signature:e}){return $Y(await LY({hash:t,signature:e}))}class r$ extends de{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Sj extends de{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class jY extends de{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const FY={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new jY({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Sj({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new r$({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new r$({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function wO(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(FY);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function zY(t,e="hex"){const n=Ij(t),r=wO(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ps(r.bytes):r.bytes}function Ij(t){return Array.isArray(t)?HY(t.map(e=>Ij(e))):WY(t)}function HY(t){const e=t.reduce((s,i)=>s+i.length,0),n=Tj(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function WY(t){const e=typeof t=="string"?nc(t):t,n=Tj(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Tj(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new de("Length is too large.")}function qY(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=uy(cC(["0x05",zY([e?et(e):"0x",s,n?et(n):"0x"])]));return r==="bytes"?nc(i):i}async function Nj(t){const{authorization:e,signature:n}=t;return MY({hash:qY(e),signature:n??e})}class yT extends de{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class GY extends de{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class VY extends de{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Pj extends de{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function kj({chain:t,currentChainId:e}){if(!t)throw new VY;if(e!==t.id)throw new GY({chain:t,currentChainId:e})}const KY={gwei:9,wei:18},QY={ether:-9,wei:9},JY={ether:-18,gwei:-9};function dy(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function li(t,e="wei"){return dy(t,QY[e])}class hh extends de{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(hh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class U_ extends de{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${li(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(U_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class wT extends de{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${li(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(wT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class bT extends de{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(bT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class vT extends de{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(vT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ET extends de{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ET,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class _T extends de{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(_T,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class xT extends de{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(xT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class CT extends de{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(CT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class AT extends de{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(AT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class B_ extends de{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${li(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${li(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(B_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class dC extends de{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function bO(t,e="wei"){return dy(t,KY[e])}function bv(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class YY extends de{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class ZY extends de{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",bv(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class XY extends de{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=bv({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${bO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${li(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${li(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${li(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Oj extends de{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Rj extends de{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class eZ extends de{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Is=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),tZ=t=>t,vO=t=>t;class Q0 extends de{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${vO(o)}`,e&&`Request body: ${Is(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class EO extends de{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${vO(r)}`,`Request body: ${Is(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class s$ extends de{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${vO(n)}`,`Request body: ${Is(e)}`],name:"TimeoutError"})}}const nZ=-1;class fi extends de{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof EO?e.code:n??nZ}}class Fi extends fi{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Lw extends fi{constructor(e){super(e,{code:Lw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Mw extends fi{constructor(e){super(e,{code:Mw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class jw extends fi{constructor(e,{method:n}={}){super(e,{code:jw.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Fw extends fi{constructor(e){super(e,{code:Fw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Fw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class yf extends fi{constructor(e){super(e,{code:yf.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(yf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class zw extends fi{constructor(e){super(e,{code:zw.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Hw extends fi{constructor(e){super(e,{code:Hw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class nd extends fi{constructor(e){super(e,{code:nd.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(nd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Um extends fi{constructor(e){super(e,{code:Um.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Um,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fh extends fi{constructor(e,{method:n}={}){super(e,{code:fh.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Bm extends fi{constructor(e){super(e,{code:Bm.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Ww extends fi{constructor(e){super(e,{code:Ww.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class nr extends Fi{constructor(e){super(e,{code:nr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(nr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class qw extends Fi{constructor(e){super(e,{code:qw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Gw extends Fi{constructor(e,{method:n}={}){super(e,{code:Gw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Vw extends Fi{constructor(e){super(e,{code:Vw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Kw extends Fi{constructor(e){super(e,{code:Kw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class rc extends Fi{constructor(e){super(e,{code:rc.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(rc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Lm extends Fi{constructor(e){super(e,{code:Lm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Lm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Qw extends Fi{constructor(e){super(e,{code:Qw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Jw extends Fi{constructor(e){super(e,{code:Jw.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Yw extends Fi{constructor(e){super(e,{code:Yw.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Zw extends Fi{constructor(e){super(e,{code:Zw.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Xw extends Fi{constructor(e){super(e,{code:Xw.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Xw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Mm extends Fi{constructor(e){super(e,{code:Mm.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class rZ extends fi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function _O(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof de?t.walk(s=>(s==null?void 0:s.code)===hh.code):t;return r instanceof de?new hh({cause:t,message:r.details}):hh.nodeMessage.test(n)?new hh({cause:t,message:t.details}):U_.nodeMessage.test(n)?new U_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):wT.nodeMessage.test(n)?new wT({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):bT.nodeMessage.test(n)?new bT({cause:t,nonce:e==null?void 0:e.nonce}):vT.nodeMessage.test(n)?new vT({cause:t,nonce:e==null?void 0:e.nonce}):ET.nodeMessage.test(n)?new ET({cause:t,nonce:e==null?void 0:e.nonce}):_T.nodeMessage.test(n)?new _T({cause:t}):xT.nodeMessage.test(n)?new xT({cause:t,gas:e==null?void 0:e.gas}):CT.nodeMessage.test(n)?new CT({cause:t,gas:e==null?void 0:e.gas}):AT.nodeMessage.test(n)?new AT({cause:t}):B_.nodeMessage.test(n)?new B_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new dC({cause:t})}function Dj(t,{docsPath:e,...n}){const r=(()=>{const s=_O(t,n);return s instanceof dC?t:s})();return new XY(r,{docsPath:e,...n})}function xO(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const sZ={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function hC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=iZ(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ps(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=et(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=et(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=et(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=et(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=et(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=et(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=sZ[t.type]),typeof t.value<"u"&&(e.value=et(t.value)),e}function iZ(t){return t.map(e=>({address:e.address,r:e.r?et(BigInt(e.r)):e.r,s:e.s?et(BigInt(e.s)):e.s,chainId:et(e.chainId),nonce:et(e.nonce),...typeof e.yParity<"u"?{yParity:et(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:et(e.v)}:{}}))}function rn(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const oZ=2n**256n-1n;function vv(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Mr(e):void 0;if(o&&!ca(o.address))throw new md({address:o.address});if(i&&!ca(i))throw new md({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new YY;if(r&&r>oZ)throw new U_({maxFeePerGas:r});if(s&&r&&s>r)throw new B_({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Ev(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return hl(e)}class aZ extends de{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class CO extends de{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class cZ extends de{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${li(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class $j extends de{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Uj={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Bj(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?hl(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?hl(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Uj[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=lZ(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function lZ(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function uZ(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Bj(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function eb(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?et(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new $j({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||uZ)(c)}async function Lj(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function dZ(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await rn(t,eb,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return dl(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):rn(t,eb,"getBlock")({}),rn(t,Lj,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new CO;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function i$(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new aZ;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await rn(t,eb,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new CO;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await dZ(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await rn(t,Lj,"getGasPrice")({}))}}class hZ extends de{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=bv({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${bO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${li(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${li(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${li(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function fZ(t,{docsPath:e,...n}){const r=(()=>{const s=_O(t,n);return s instanceof dC?t:s})();return new hZ(r,{docsPath:e,...n})}class pZ extends de{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class gZ extends de{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function o$(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function mZ(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=o$(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=o$(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function a$(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new VD({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new VD({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function yZ(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=et(e)),n!==void 0&&(o.nonce=et(n)),r!==void 0&&(o.state=a$(r)),s!==void 0){if(o.state)throw new gZ;o.stateDiff=a$(s)}return o}function Mj(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!ca(n,{strict:!1}))throw new md({address:n});if(e[n])throw new pZ({address:n});e[n]=yZ(r)}return e}async function jj(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?et(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Fj(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Mr(n):void 0;try{let V=function(N){const{block:L,request:U,rpcStateOverride:$}=N;return t.request({method:"eth_estimateGas",params:$?[U,L??"latest",$]:L?[U,L]:[U]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,value:x,stateOverride:_,...C}=await fC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?et(d):void 0)||h,A=Mj(_),P=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await Nj({authorization:c[0]}).catch(()=>{throw new de("`to` is required. Could not infer from `authorizationList`")})})();vv(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,z=(R||hC)({...xO(C,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:P,value:x});let I=BigInt(await V({block:T,request:z,rpcStateOverride:A}));if(c){const N=await jj(t,{address:z.from}),L=await Promise.all(c.map(async U=>{const{address:$}=U,M=await V({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:$,value:et(N)},rpcStateOverride:A}).catch(()=>100000n);return 2n*BigInt(M)}));I+=L.reduce((U,$)=>U+$,0n)}return I}catch(a){throw fZ(a,{...e,account:r,chain:t.chain})}}async function zj(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?et(r):n]},{dedupe:!!r});return hl(s)}function Hj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>nc(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ps(i))}function Wj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>nc(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>nc(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ps(o))}function wZ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function bZ(t,e,n){return t&e^~t&n}function vZ(t,e,n){return t&e^t&n^e&n}class EZ extends hj{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=oS(this.buffer)}update(e){D_(this),e=uC(e),mf(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=oS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){D_(this),uj(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Bw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;wZ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=oS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const xl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_Z=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cl=new Uint32Array(64);let xZ=class extends EZ{constructor(e=32){super(64,e,8,!1),this.A=xl[0]|0,this.B=xl[1]|0,this.C=xl[2]|0,this.D=xl[3]|0,this.E=xl[4]|0,this.F=xl[5]|0,this.G=xl[6]|0,this.H=xl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Cl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Cl[d-15],f=Cl[d-2],p=wa(h,7)^wa(h,18)^h>>>3,g=wa(f,17)^wa(f,19)^f>>>10;Cl[d]=g+Cl[d-7]+p+Cl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=wa(a,6)^wa(a,11)^wa(a,25),f=u+h+bZ(a,c,l)+_Z[d]+Cl[d]|0,g=(wa(r,2)^wa(r,13)^wa(r,22))+vZ(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Bw(Cl)}destroy(){this.set(0,0,0,0,0,0,0,0),Bw(this.buffer)}};const CZ=fj(()=>new xZ),AZ=CZ;function SZ(t,e){return AZ(ul(t,{strict:!1})?sC(t):t)}function IZ(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=SZ(e);return s.set([n],0),r==="bytes"?s:Ps(s)}function TZ(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(IZ({commitment:i,to:r,version:n}));return s}const c$=6,qj=32,AO=4096,Gj=qj*AO,l$=Gj*c$-1-1*AO*c$;class NZ extends de{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class PZ extends de{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function kZ(t){const e=typeof t.data=="string"?nc(t.data):t.data,n=Wn(e);if(!n)throw new PZ;if(n>l$)throw new NZ({maxSize:l$,size:n});const r=[];let s=!0,i=0;for(;s;){const o=wO(new Uint8Array(Gj));let a=0;for(;a<AO;){const c=e.slice(i,i+(qj-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Ps(o.bytes))}function OZ(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??kZ({data:e}),i=t.commitments??Hj({blobs:s,kzg:n,to:r}),o=t.proofs??Wj({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function RZ(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new ZY({transaction:t})}const Vj=["blobVersionedHashes","chainId","fees","gas","nonce","type"],u$=new Map;async function fC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=Vj,type:u}=e,d=n&&Mr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await rn(t,eb,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await rn(t,Ev,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await y();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await rn(t,zj,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=Hj({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const v=TZ({commitments:w,to:"hex"});h.blobVersionedHashes=v}if(l.includes("sidecars")){const v=Wj({blobs:r,commitments:w,kzg:o}),b=OZ({blobs:r,commitments:w,proofs:v,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=RZ(h)}catch{let w=u$.get(t.uid);if(typeof w>"u"){const v=await p();w=typeof(v==null?void 0:v.baseFeePerGas)=="bigint",u$.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:v,maxPriorityFeePerGas:b}=await i$(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new cZ({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=v}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new CO;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:v}=await i$(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=v}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await rn(t,Fj,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),vv(h),delete h.parameters,h}async function Kj(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const uS=new lC(128);async function _v(t,e){var v,b,x,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new Ff({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Mr(n):null;try{vv(e);const C=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Nj({authorization:i[0]}).catch(()=>{throw new de("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let S;r!==null&&(S=await rn(t,Ev,"getChainId")({}),kj({currentChainId:S,chain:r}));const T=(x=(b=(v=t.chain)==null?void 0:v.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,P=(T||hC)({...xO(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:C,type:p,value:g}),R=uS.get(t.uid),j=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:j,params:[P]},{retryCount:0})}catch(z){if(R===!1)throw z;const V=z;if(V.name==="InvalidInputRpcError"||V.name==="InvalidParamsRpcError"||V.name==="MethodNotFoundRpcError"||V.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[P]},{retryCount:0}).then(I=>(uS.set(t.uid,!0),I)).catch(I=>{const N=I;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(uS.set(t.uid,!1),V):N});throw V}}if((w==null?void 0:w.type)==="local"){const S=await rn(t,fC,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[...Vj,"sidecars"],type:p,value:g,...y,to:C}),T=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,A=await w.signTransaction(S,{serializer:T});return await rn(t,Kj,"sendRawTransaction")({serializedTransaction:A})}throw(w==null?void 0:w.type)==="smart"?new OE({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new OE({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(C){throw C instanceof OE?C:Dj(C,{...e,account:w,chain:e.chain||void 0})}}function DZ(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=yO({abi:n,args:r,bytecode:s});return _v(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const ST=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],F5e=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],$Z=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],UZ=[...$Z,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function BZ(t,e={}){typeof e.size<"u"&&da(t,{size:e.size});const n=Ps(t,e);return dl(n,e)}function LZ(t,e={}){let n=t;if(typeof e.size<"u"&&(da(n,{size:e.size}),n=ly(n)),n.length>1||n[0]>1)throw new SJ(n);return!!n[0]}function Xc(t,e={}){typeof e.size<"u"&&da(t,{size:e.size});const n=Ps(t,e);return hl(n,e)}function MZ(t,e={}){let n=t;return typeof e.size<"u"&&(da(n,{size:e.size}),n=ly(n,{dir:"right"})),new TextDecoder().decode(n)}function pC(t,e){const n=typeof e=="string"?nc(e):e,r=wO(n);if(Wn(n)===0&&t.length>0)throw new aC;if(Wn(e)&&Wn(e)<32)throw new oj({data:typeof e=="string"?e:Ps(e),params:t,size:Wn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=wg(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function wg(t,e,{staticPosition:n}){const r=mO(e.type);if(r){const[s,i]=r;return FZ(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return qZ(t,e,{staticPosition:n});if(e.type==="address")return jZ(t);if(e.type==="bool")return zZ(t);if(e.type.startsWith("bytes"))return HZ(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return WZ(t,e);if(e.type==="string")return GZ(t,{staticPosition:n});throw new qJ(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const d$=32,IT=32;function jZ(t){const e=t.readBytes(32);return[wv(Ps(xj(e,-20))),32]}function FZ(t,e,{length:n,staticPosition:r}){if(!n){const o=Xc(t.readBytes(IT)),a=r+o,c=a+d$;t.setPosition(a);const l=Xc(t.readBytes(d$)),u=tb(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=wg(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(tb(e)){const o=Xc(t.readBytes(IT)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=wg(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=wg(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function zZ(t){return[LZ(t.readBytes(32),{size:32}),32]}function HZ(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Xc(t.readBytes(32));t.setPosition(n+o);const a=Xc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ps(c),32]}return[Ps(t.readBytes(Number.parseInt(s),32)),32]}function WZ(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?BZ(s,{signed:n}):Xc(s,{signed:n}),32]}function qZ(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(tb(e)){const o=Xc(t.readBytes(IT)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=wg(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=wg(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function GZ(t,{staticPosition:e}){const n=Xc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Xc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=MZ(ly(i));return t.setPosition(e+32),[o,32]}function tb(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(tb);const n=mO(t.type);return!!(n&&tb({...t,type:n[1]}))}const VZ=t=>uy(sC(t));function KZ(t){return VZ(t)}const QZ="1.0.8";let wo=class TT extends Error{constructor(e,n={}){var o;const r=n.cause instanceof TT?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof TT&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${QZ}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function wl(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const Qj=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Jj=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Yj=/^\(.+?\).*?$/,h$=/^tuple(?<array>(\[(\d*)\])*)$/;function NT(t){let e=t.type;if(h$.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=NT(i),s<n-1&&(e+=", ")}const r=wl(h$,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,NT({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Wy(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=NT(s),r!==n-1&&(e+=", ")}return e}function JZ(t){var e;return t.type==="function"?`function ${t.name}(${Wy(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Wy(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Wy(t.inputs)})`:t.type==="error"?`error ${t.name}(${Wy(t.inputs)})`:t.type==="constructor"?`constructor(${Wy(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Zj=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function YZ(t){return Zj.test(t)}function ZZ(t){return wl(Zj,t)}const Xj=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function XZ(t){return Xj.test(t)}function eX(t){return wl(Xj,t)}const eF=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function tX(t){return eF.test(t)}function nX(t){return wl(eF,t)}const tF=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function nF(t){return tF.test(t)}function rX(t){return wl(tF,t)}const rF=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function sX(t){return rF.test(t)}function iX(t){return wl(rF,t)}const sF=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function oX(t){return sF.test(t)}function aX(t){return wl(sF,t)}const cX=/^receive\(\) external payable$/;function lX(t){return cX.test(t)}const uX=new Set(["indexed"]),PT=new Set(["calldata","memory","storage"]);class dX extends wo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class hX extends wo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class fX extends wo{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class pX extends wo{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class gX extends wo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class mX extends wo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class yX extends wo{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class hy extends wo{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class wX extends wo{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class bX extends wo{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class vX extends wo{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class EX extends wo{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function _X(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const dS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function xX(t,e={}){if(tX(t))return CX(t,e);if(XZ(t))return AX(t,e);if(YZ(t))return SX(t,e);if(sX(t))return IX(t,e);if(oX(t))return TX(t);if(lX(t))return{type:"receive",stateMutability:"payable"};throw new wX({signature:t})}function CX(t,e={}){const n=nX(t);if(!n)throw new hy({signature:t,type:"function"});const r=Yo(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(wf(r[a],{modifiers:PT,structs:e,type:"function"}));const o=[];if(n.returns){const a=Yo(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(wf(a[l],{modifiers:PT,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function AX(t,e={}){const n=eX(t);if(!n)throw new hy({signature:t,type:"event"});const r=Yo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wf(r[o],{modifiers:uX,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function SX(t,e={}){const n=ZZ(t);if(!n)throw new hy({signature:t,type:"error"});const r=Yo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wf(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function IX(t,e={}){const n=iX(t);if(!n)throw new hy({signature:t,type:"constructor"});const r=Yo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wf(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function TX(t){const e=aX(t);if(!e)throw new hy({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const NX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,PX=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,kX=/^u?int$/;function wf(t,e){var d,h;const n=_X(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(dS.has(n))return dS.get(n);const r=Yj.test(t),s=wl(r?PX:NX,t);if(!s)throw new fX({param:t});if(s.name&&RX(s.name))throw new pX({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Yo(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(wf(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(kX.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!iF(c))throw new hX({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new gX({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(PT.has(s.modifier)&&!DX(c,!!s.array))throw new mX({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return dS.set(n,u),u}function Yo(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Yo(a,[...e,n.trim()]):Yo(a,e,`${n}${o}`,r);case"(":return Yo(a,e,`${n}${o}`,r+1);case")":return Yo(a,e,`${n}${o}`,r-1);default:return Yo(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new EX({current:n,depth:r});return e.push(n.trim()),e}function iF(t){return t==="address"||t==="bool"||t==="function"||t==="string"||Qj.test(t)||Jj.test(t)}const OX=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function RX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||Qj.test(t)||Jj.test(t)||OX.test(t)}function DX(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function $X(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!nF(a))continue;const c=rX(a);if(!c)throw new hy({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=wf(p,{type:"struct"});u.push(g)}if(!u.length)throw new bX({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=oF(c,e)}return r}const UX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function oF(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(Yj.test(o.type))r.push(o);else{const c=wl(UX,o.type);if(!(c!=null&&c.type))throw new yX({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new vX({type:u});r.push({...o,type:`tuple${l??""}`,components:oF(e[u]??[],e,new Set([...n,u]))})}else if(iF(u))r.push(o);else throw new dX({type:u})}}return r}function aF(t){const e=$X(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];nF(i)||n.push(xX(i,e))}return n}function BX(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new de("Unable to normalize signature.");return s}const LX=t=>{const e=typeof t=="string"?t:JZ(t);return BX(e)};function cF(t){return KZ(LX(t))}const SO=cF,IO=t=>$_(cF(t),0,4);function TO(t){const{abi:e,args:n=[],name:r}=t,s=ul(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?IO(a)===r:a.type==="event"?SO(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?kT(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=lF(a.inputs,o.inputs,n);if(l)throw new zJ({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function kT(t,e){const n=typeof t,r=e.type;switch(r){case"address":return ca(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>kT(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>kT(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function lF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return lF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ca(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?ca(n[r],{strict:!1}):!1)return o}}const hS="/docs/contract/decodeFunctionResult";function NO(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=TO({abi:e,args:n,name:r});if(!a)throw new O_(r,{docsPath:hS});i=a}if(i.type!=="function")throw new O_(void 0,{docsPath:hS});if(!i.outputs)throw new FJ(i.name,{docsPath:hS});const o=pC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const f$="/docs/contract/encodeFunctionData";function MX(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=TO({abi:e,args:n,name:r});if(!i)throw new O_(r,{docsPath:f$});s=i}if(s.type!=="function")throw new O_(void 0,{docsPath:f$});return{abi:[s],functionName:IO(pd(s))}}function xv(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:MX(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Aj(s.inputs,e??[]):void 0;return cC([i,o??"0x"])}function PO({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new yT({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new yT({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const uF={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},jX={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},FX={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function zX(t){const{abi:e,data:n}=t,r=$_(n,0,4);if(r==="0x")throw new aC;const i=[...e||[],jX,FX].find(o=>o.type==="error"&&r===IO(pd(o)));if(!i)throw new aj(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?pC(i.inputs,$_(n,4)):void 0,errorName:i.name}}function dF({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Is(e[i]):e[i]}`).join(", ")})`}class HX extends de{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Mr(n):void 0;let g=bv({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${bO(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${li(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${li(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${li(l)} gwei`,nonce:u});f&&(g+=`
${mZ(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class hF extends de{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=TO({abi:n,args:r,name:o}),l=c?dF({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?pd(c,{includeName:!0}):void 0,d=bv({address:s&&tZ(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class OT extends de{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=zX({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=uF[f]}else{const f=u?pd(u,{includeName:!0}):void 0,p=u&&h?dF({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof aj&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class WX extends de{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class qX extends de{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class kO extends de{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function GX(t,e){var r,s,i,o,a,c;if(!(t instanceof de))return!1;const n=t.walk(l=>l instanceof OT);return n instanceof OT?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===uF[50]):!1}function VX(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ul(e)?e:null}function KX(t){return`[${t.slice(2)}]`}function QX(t){const e=new Uint8Array(32).fill(0);return t?VX(t)||uy(yg(t)):Ps(e)}function JX(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(yg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=yg(s[i]);o.byteLength>255&&(o=yg(KX(QX(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const YX=3;function L_(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof kO?t:t instanceof de?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof aC?new WX({functionName:i}):[YX,yf.code].includes(c)&&(l||u||d||h)?new OT({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof EO?u:h??d}):t;return new hF(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const ZX="0.1.1";function XX(){return ZX}let fF=class RT extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof RT){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof RT&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${XX()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return pF(this,e)}};function pF(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?pF(t.cause,e):e?null:t}function eee(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new ree({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Nc(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new nee({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?tee(c,r):c}function tee(t,e){return eee(t,{dir:"left",size:e})}let nee=class extends fF{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},ree=class extends fF{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function see(t){return{address:t.address,amount:Nc(t.amount),index:Nc(t.index),validatorIndex:Nc(t.validatorIndex)}}function iee(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Nc(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Nc(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Nc(t.gasLimit)},...typeof t.number=="bigint"&&{number:Nc(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Nc(t.prevRandao)},...typeof t.time=="bigint"&&{time:Nc(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(see)}}}const oee="0x82ad56cb",aee="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",cee="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function lee(t,{docsPath:e,...n}){const r=(()=>{const s=_O(t,n);return s instanceof dC?t:s})();return new HX(r,{docsPath:e,...n})}function OO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const fS=new Map;function gF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>fS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>fS.get(e)||[],l=u=>fS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=OO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function mF(t,e){var z,V,I,N;const{account:n=t.account,authorizationList:r,batch:s=!!((z=t.batch)!=null&&z.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:x,value:_,stateOverride:C,...S}=e,T=n?Mr(n):void 0;if(u&&(h||f))throw new de("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&x)throw new de("Cannot provide both `code` & `to` as parameters.");const A=u&&d,P=h&&f&&x&&d,R=A||P,j=A?hee({code:u,data:d}):P?fee({data:d,factory:h,factoryData:f,to:x}):d;try{vv(e);const U=(typeof i=="bigint"?et(i):void 0)||o,$=l?iee(l):void 0,M=Mj(C),q=(N=(I=(V=t.chain)==null?void 0:V.formatters)==null?void 0:I.transactionRequest)==null?void 0:N.format,ie=(q||hC)({...xO(S,{format:q}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:j,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:R?void 0:x,value:_});if(s&&uee({request:ie})&&!M&&!$)try{return await dee(t,{...ie,blockNumber:i,blockTag:o})}catch(ge){if(!(ge instanceof Pj)&&!(ge instanceof yT))throw ge}const re=(()=>{const ge=[ie,U];return M&&$?[...ge,M,$]:M?[...ge,M]:$?[...ge,{},$]:ge})(),ce=await t.request({method:"eth_call",params:re});return ce==="0x"?{data:void 0}:{data:ce}}catch(L){const U=pee(L),{offchainLookup:$,offchainLookupSignature:M}=await Mn(async()=>{const{offchainLookup:q,offchainLookupSignature:Z}=await import("./ccip-Df2BfKon.js");return{offchainLookup:q,offchainLookupSignature:Z}},[]);if(t.ccipRead!==!1&&(U==null?void 0:U.slice(0,10))===M&&x)return{data:await $(t,{data:U,to:x})};throw R&&(U==null?void 0:U.slice(0,10))==="0x101bb98d"?new qX({factory:h}):lee(L,{...e,account:T,chain:t.chain})}}function uee({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(oee)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function dee(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new Pj;l=PO({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?et(s):void 0)||i,{schedule:h}=gF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((v,{data:b})=>v+(b.length-2),0)>n*2},fn:async y=>{const w=y.map(x=>({allowFailure:!0,callData:x.data,target:x.to})),v=xv({abi:ST,args:[w],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{data:v,to:l},d]});return NO({abi:ST,args:[w],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new kO({data:f});return f==="0x"?{data:void 0}:{data:f}}function hee(t){const{code:e,data:n}=t;return yO({abi:aF(["constructor(bytes, bytes)"]),bytecode:aee,args:[e,n]})}function fee(t){const{data:e,factory:n,factoryData:r,to:s}=t;return yO({abi:aF(["constructor(address, bytes, address, bytes)"]),bytecode:cee,args:[s,e,n,r]})}function pee(t){var n;if(!(t instanceof de))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function RO(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=xv({abi:n,args:s,functionName:i});try{const{data:c}=await rn(t,mF,"call")({...o,data:a,to:r});return NO({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw L_(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function gee(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=PO({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:UZ,functionName:"reverse",args:[gf(JX(c))],blockNumber:n,blockTag:r},u=rn(t,RO,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(GX(l))return null;throw l}}function mee(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function yee(t){const e=mee(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const wee=new Map,bee=new Map;function vee(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,wee),r=e(t,bee);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Eee(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=vee(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const _ee=t=>`blockNumber.${t}`;async function xee(t,{cacheTime:e=t.cacheTime}={}){const n=await Eee(()=>t.request({method:"eth_blockNumber"}),{cacheKey:_ee(t.uid),cacheTime:e});return BigInt(n)}function yF(t,e){if(!ca(t,{strict:!1}))throw new md({address:t});if(!ca(e,{strict:!1}))throw new md({address:e});return t.toLowerCase()===e.toLowerCase()}const p$="/docs/contract/decodeEventLog";function Cee(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new jJ({docsPath:p$});const c=e.find(g=>g.type==="event"&&o===SO(pd(g)));if(!(c&&"name"in c)||c.type!=="event")throw new cj(o,{docsPath:p$});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,w]=f[g],v=a[g];if(!v)throw new lj({abiItem:c,param:y});h[d?w:y.name||w]=Aee({param:y,value:v})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=pC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof oj||g instanceof Sj?new gT({abiItem:c,data:n,params:p,size:Wn(n)}):g}else if(i)throw new gT({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Aee({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(pC([t],e)||[])[0]}function See(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===SO(u));if(!c)return null;const l=Cee({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Iee({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof cj)return null;if(c instanceof gT||c instanceof lj){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Iee(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?yF(o,a):i.type==="string"||i.type==="bytes"?uy(sC(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function wF(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Tee(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>wF(i));return!("abi"in e)||!e.abi?s:See({abi:e.abi,logs:s,strict:n})}async function bF(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?et(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,et(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,et(i)]},{dedupe:!!a}),!c)throw new Oj({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Bj)(c)}const vF={"0x0":"reverted","0x1":"success"};function Nee(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>wF(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?hl(t.transactionIndex):null,status:t.status?vF[t.status]:null,type:t.type?Uj[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function g$(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Rj({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Nee)(n)}async function Pee(t,e){var w;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=PO({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let v=0;v<l.length;v++){const{abi:b,address:x,args:_,functionName:C}=l[v];try{const S=xv({abi:b,args:_,functionName:C});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:x}]}catch(S){const T=L_(S,{abi:b,address:x,args:_,docsPath:"/docs/contract/multicall",functionName:C,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:x}]}}const g=await Promise.allSettled(h.map(v=>rn(t,RO,"readContract")({abi:ST,account:n,address:d,args:[v],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let v=0;v<g.length;v++){const b=g[v];if(b.status==="rejected"){if(!r)throw b.reason;for(let _=0;_<h[v].length;_++)y.push({status:"failure",error:b.reason,result:void 0});continue}const x=b.value;for(let _=0;_<x.length;_++){const{returnData:C,success:S}=x[_],{callData:T}=h[v][_],{abi:A,address:P,functionName:R,args:j}=l[y.length];try{if(T==="0x")throw new aC;if(!S)throw new kO({data:C});const z=NO({abi:A,args:j,data:C,functionName:R});y.push(r?{result:z,status:"success"}:z)}catch(z){const V=L_(z,{abi:A,address:P,args:j,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw V;y.push({error:V,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new de("multicall results mismatch");return y}const w1=new lC(8192);function kee(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(w1.get(n))return w1.get(n);const r=t().finally(()=>w1.delete(n));return w1.set(n,r),r}async function M_(t){return new Promise(e=>setTimeout(e,t))}function j_(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await M_(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Oee(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new fh(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new fh(new Error("method not supported"),{method:l});const u=s?iC(`${c}.${Is(n)}`):void 0;return kee(()=>j_(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Lw.code:throw new Lw(f);case Mw.code:throw new Mw(f);case jw.code:throw new jw(f,{method:n.method});case Fw.code:throw new Fw(f);case yf.code:throw new yf(f);case zw.code:throw new zw(f);case Hw.code:throw new Hw(f);case nd.code:throw new nd(f);case Um.code:throw new Um(f);case fh.code:throw new fh(f,{method:n.method});case Bm.code:throw new Bm(f);case Ww.code:throw new Ww(f);case nr.code:throw new nr(f);case qw.code:throw new qw(f);case Gw.code:throw new Gw(f);case Vw.code:throw new Vw(f);case Kw.code:throw new Kw(f);case rc.code:throw new rc(f);case Lm.code:throw new Lm(f);case Qw.code:throw new Qw(f);case Jw.code:throw new Jw(f);case Yw.code:throw new Yw(f);case Zw.code:throw new Zw(f);case Xw.code:throw new Xw(f);case Mm.code:throw new Mm(f);case 5e3:throw new nr(f);default:throw h instanceof de?h:new rZ(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Q0){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Ree(h)}),{enabled:s,id:u})}}function Ree(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Bm.code||t.code===yf.code:t instanceof Q0&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Dee(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function EF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function $ee(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const m$=$ee();function Uee(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await EF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Is(r.map(b=>({jsonrpc:"2.0",id:b.id??m$.take(),...b}))):Is({jsonrpc:"2.0",id:r.id??m$.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),w=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new s$({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Q0({body:r,details:Is(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Q0||h instanceof s$?h:new Q0({body:r,cause:h,url:t})}}}}class Bee extends de{constructor({domain:e}){super(`Invalid domain "${Is(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Lee extends de{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Mee extends de{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function jee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Is({domain:o,message:a,primaryType:r,types:s})}function Fee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Cj);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,w]=h;et(d,{signed:y==="int",size:Number.parseInt(w)/8})}if(u==="address"&&typeof d=="string"&&!ca(d))throw new md({address:d});const f=u.match(SY);if(f){const[g,y]=f;if(y&&Wn(d)!==Number.parseInt(y))throw new HJ({expectedSize:Number.parseInt(y),givenSize:Wn(d)})}const p=s[u];p&&(Hee(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Bee({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Lee({primaryType:r,types:s})}function zee({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Hee(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Mee({type:t})}class Wee extends de{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function qee(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Wee({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const pS=new Map,y$=new Map;let Gee=0;function nb(t,e,n){const r=++Gee,s=()=>pS.get(t)||[],i=()=>{const u=s();pS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=y$.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(pS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&y$.set(t,l),o}function DO(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await M_(c);const l=async()=>{s&&(await t({unpoll:i}),await M_(r),l())};l()})(),i}function Vee(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Is(["watchBlockNumber",t.uid,e,n,o]);return nb(d,{onBlockNumber:r,onError:s},h=>DO(async()=>{var f;try{const p=await rn(t,xee,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Is(["watchBlockNumber",t.uid,e,n]);return nb(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var b;if(!f)return;const v=dl((b=w.result)==null?void 0:b.number);h.onBlockNumber(v,c),c=v},onError(w){var v;(v=h.onError)==null||v.call(h,w)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function Kee(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Qee(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Is(["watchPendingTransactions",t.uid,e,i]);return nb(l,{onTransactions:r,onError:n},u=>{let d;const h=DO(async()=>{var f;try{if(!d)try{d=await rn(t,yee,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await rn(t,Tee,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await rn(t,Kee,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Jee(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>wv(r))}async function Yee(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Zee(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Mr(n):void 0,i=r?[s==null?void 0:s.address,[et(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const _F="0x5792579257925792579257925792579257925792579257925792579257925792",xF=et(0,{size:32});async function Xee(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Mr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?xv({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?gd([p,f.dataSuffix]):p,to:f.to,value:f.value?et(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:et(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(v=>!v.optional)){const v="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Lm(new de(v,{details:v}))}if(a&&d.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Mm(new de(w,{details:w}))}const p=[];for(const w of d){const v=_v(t,{account:u,chain:s,data:w.data,to:w.to,value:w.value?dl(w.value):void 0});p.push(v),o>0&&await new Promise(b=>setTimeout(b,o))}const g=await Promise.allSettled(p);if(g.every(w=>w.status==="rejected"))throw g[0].reason;const y=g.map(w=>w.status==="fulfilled"?w.value:xF);return{id:gd([...y,et(s.id,{size:32}),_F])}}throw Dj(h,{...e,account:u,chain:e.chain})}}async function CF(t,e){async function n(u){if(u.endsWith(_F.slice(2))){const h=ly(mT(u,-64,-32)),f=mT(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>xF.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:hl(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?hl(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:dl(u.blockNumber),gasUsed:dl(u.gasUsed),status:vF[u.status]})))??[],statusCode:l,status:c,version:o}}async function ete(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function tte(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Is(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=OO();let u;const d=nb(o,{resolve:c,reject:l},h=>{const f=DO(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await CF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new nte({id:n}))},i):void 0,await a}class nte extends de{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function rte(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Is(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:w}=OO(),v=a?setTimeout(()=>{p(),f(),w(new eZ({hash:n}))},a):void 0;return f=nb(c,{onReplaced:r,resolve:y,reject:w},b=>{p=rn(t,Vee,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(x){const _=S=>{clearTimeout(v),p(),S(),f()};let C=x;if(!h)try{if(d){if(e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;_(()=>b.resolve(d));return}if(l||(h=!0,await j_(async()=>{l=await rn(t,bF,"getTransaction")({hash:n}),l.blockNumber&&(C=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await rn(t,g$,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;_(()=>b.resolve(d))}catch(S){if(S instanceof Oj||S instanceof Rj){if(!l){h=!1;return}try{u=l,h=!0;const T=await j_(()=>rn(t,eb,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof $j});h=!1;const A=T.transactions.find(({from:R,nonce:j})=>R===u.from&&j===u.nonce);if(!A||(d=await rn(t,g$,"getTransactionReceipt")({hash:A.hash}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e)))return;let P="replaced";A.to===u.to&&A.value===u.value&&A.input===u.input?P="repriced":A.from===A.to&&A.value===0n&&(P="cancelled"),_(()=>{var R;(R=b.onReplaced)==null||R.call(b,{reason:P,replacedTransaction:u,transaction:A,transactionReceipt:d}),b.resolve(d)})}catch(T){_(()=>b.reject(T))}}else _(()=>b.reject(S))}}})}),g}async function ste(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Fu(n))}async function ite(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function AF(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Ff({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Mr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Mr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await rn(t,Ev,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await rn(t,zj,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&yF(o.address,i.address))&&(a.nonce+=1)),a}async function ote(t,e){const{account:n=t.account}=e;if(!n)throw new Ff({docsPath:"/docs/eip7702/signAuthorization"});const r=Mr(n);if(!r.signAuthorization)throw new OE({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await AF(t,e);return r.signAuthorization(s)}async function ate(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Ff({docsPath:"/docs/actions/wallet/signTransaction"});const i=Mr(n);vv({account:i,...e});const o=await rn(t,Ev,"getChainId")({});r!==null&&kj({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||hC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:et(o),from:i.address}]},{retryCount:0})}async function SF(t,{account:e=t.account,message:n}){if(!e)throw new Ff({docsPath:"/docs/actions/wallet/signMessage"});const r=Mr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?iC(n):n.raw instanceof Uint8Array?gf(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function cte(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Ff({docsPath:"/docs/actions/wallet/signTypedData"});const o=Mr(n),a={EIP712Domain:zee({domain:r}),...e.types};if(Fee({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=jee({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function lte(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:et(e)}]},{retryCount:0})}async function ute(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function IF(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Ff({docsPath:"/docs/contract/writeContract"});const l=r?Mr(r):null,u=xv({abi:n,args:i,functionName:a});try{return await rn(t,_v,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw L_(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function $i(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const RE="2.17.3",dte=()=>`@wagmi/core@${RE}`;var TF=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},F_,NF;let bl=class DT extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return dte()}constructor(e,n={}){var i;super(),F_.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof DT?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof DT&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return TF(this,F_,"m",NF).call(this,this,e)}};F_=new WeakSet,NF=function t(e,n){return n!=null&&n(e)?e:e.cause?TF(this,F_,"m",t).call(this,e.cause,n):e};class rb extends bl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class hte extends bl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class fte extends bl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class pte extends bl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class gte extends bl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class mte extends bl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function DE(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new hte;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const $T=256;let b1=$T,v1;function PF(t=11){if(!v1||b1+t>$T*2){v1="",b1=0;for(let e=0;e<$T;e++)v1+=(256+Math.random()*256|0).toString(16).substring(1)}return v1.substring(b1,b1+++t)}function kF(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Mr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:PF()};function w(v){return b=>{const x=b(v);for(const C in y)delete x[C];const _={...v,...x};return Object.assign(_,{extend:w(_)})}}return Object.assign(y,{extend:w(y)})}function $O({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=PF();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Oee(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function yte(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>$O({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function w$(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=wte,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=$O({key:n,name:r,async request({method:g,params:y}){let w;const v=async(b=0)=>{const x=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const _=await x.request({method:g,params:y});return f({method:g,params:y,response:_,transport:x,status:"success"}),_}catch(_){if(f({error:_,method:g,params:y,transport:x,status:"error"}),i(_)||b===h.length-1||(w??(w=h.slice(b+1).some(C=>{const{include:S,exclude:T}=C({chain:c}).config.methods||{};return S?S.includes(g):T?!T.includes(g):!0})),!w))throw _;return v(b+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};bte({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function wte(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Um.code||t.code===nr.code||hh.nodeMessage.test(t.message)||t.code===5e3))}function bte({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let v,b;try{await(r?r({transport:y}):y.request({method:"net_listening"})),b=1}catch{b=0}finally{v=Date.now()}return{latency:v-w,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=u.map(C=>C[y].latency),b=1-w.reduce((C,S)=>C+S,0)/w.length/f,x=u.map(C=>C[y].success),_=x.reduce((C,S)=>C+S,0)/x.length;return _===0?[0,y]:[l*b+c*_,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await M_(e),d()};d()}class vte extends de{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function E1(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,w=f??e.timeout??1e4,v=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!v)throw new vte;const b=Uee(v,{fetchOptions:r,onRequest:a,onResponse:c,timeout:w});return $O({key:s,methods:i,name:o,async request({method:x,params:_}){const C={method:x,params:_},{schedule:S}=gF({id:v,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>b.request({body:R}),sort:(R,j)=>R.id-j.id}),T=async R=>n?S(R):[await b.request({body:R})],[{error:A,result:P}]=await T(C);if(u)return{error:A,result:P};if(A)throw new EO({body:C,error:A,url:v});return P},retryCount:y,retryDelay:l,timeout:w,type:"http"},{fetchOptions:r,url:v})}}function Ete(t){return{addChain:e=>DJ(t,e),deployContract:e=>DZ(t,e),getAddresses:()=>Jee(t),getCallsStatus:e=>CF(t,e),getCapabilities:e=>Zee(t,e),getChainId:()=>Ev(t),getPermissions:()=>Yee(t),prepareAuthorization:e=>AF(t,e),prepareTransactionRequest:e=>fC(t,e),requestAddresses:()=>ste(t),requestPermissions:e=>ite(t,e),sendCalls:e=>Xee(t,e),sendRawTransaction:e=>Kj(t,e),sendTransaction:e=>_v(t,e),showCallsStatus:e=>ete(t,e),signAuthorization:e=>ote(t,e),signMessage:e=>SF(t,e),signTransaction:e=>ate(t,e),signTypedData:e=>cte(t,e),switchChain:e=>lte(t,e),waitForCallsStatus:e=>tte(t,e),watchAsset:e=>ute(t,e),writeContract:e=>IF(t,e)}}async function Cv(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new mte({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new fte;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new gte({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Mr(e.account??n.accounts[0]);if(o&&(o.address=Fu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new pte({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return kF({account:o,chain:a,name:"Connector Client",transport:l=>yte(c)({...l,retryCount:0})})}async function OF(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function _te(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Cv(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return $i(o,Fj,"estimateGas")({...s,account:i})}function RF(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(JY[t])}function bg(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function xte(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return $i(o,Pee,"multicall")({allowFailure:n,contracts:s,...i})}function Cte(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $i(s,RO,"readContract")(r)}async function Ate(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>xte(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof hF)throw c;const l=()=>o.map(u=>Cte(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Ste(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await b$(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await b$(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=sj(ly(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await $i(c,jj,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:dy(u,RF(a)),symbol:d.nativeCurrency.symbol,value:u}}async function b$(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Ate(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=dy(c??"0",RF(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function v$(t){return t.state.chainId}function bf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!bf(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!bf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let _1=[];function Na(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||bf(_1,e)?_1:(_1=e,e)}let gS=[];function E$(t){const e=t.connectors;return bf(gS,e)?gS:(gS=e,e)}function Ite(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $i(s,gee,"getEnsName")(r)}async function Tte(t,e={}){return(await Cv(t,e)).extend(Ete)}async function Nte(t,e){const{account:n,chainId:r,...s}=e,i=n??bg(t).address,o=t.getClient({chainId:r});return $i(o,fC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let mS=!1;async function UT(t,e={}){var l,u;if(mS)return[];mS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),mS=!1,a}async function Pte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Cv(t,{account:n??void 0,chainId:r,connector:s}),await $i(o,_v,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function kte(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Cv(t,{account:n,connector:r}),$i(i,SF,"signMessage")({...s,...n?{account:n}:{}})}class Zl extends bl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Ote extends bl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function _$(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Ote({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new rb;return t.setState(a=>({...a,chainId:r})),i}function DF(t,e){const{onChange:n}=e;return t.subscribe(()=>bg(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return bf(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Rte(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function Dte(t,e){const{onChange:n}=e;return t.subscribe(()=>Na(t),n,{equalityFn:bf})}function $F(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function $te(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=$i(l,Qee,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function Ute(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await $i(i,rte,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await $i(i,bF,"getTransaction")({hash:a.transactionHash}),d=await $i(i,mF,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?sj(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Bte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Cv(t,{account:n??void 0,chainId:r,connector:s}),await $i(o,IF,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function W5e(t){return t}gC.type="injected";function gC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Lte[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:gC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,w,v;const d=await this.getProvider();if(!d)throw new Zl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(x=>Fu(x)),h.length>0&&(h=await this.getAccounts())}catch(b){const x=b;if(x.code===nr.code)throw new nr(x);if(x.code===nd.code)throw x}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Fu(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let b=await this.getChainId();if(l&&b!==l){const x=await this.switchChain({chainId:l}).catch(_=>{if(_.code===nr.code)throw _;return{id:b}});b=(x==null?void 0:x.id)??b}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((v=c.storage)==null?void 0:v.setItem("injected.connected",!0)),{accounts:h,chainId:b}}catch(b){const x=b;throw x.code===nr.code?new nr(x):x.code===nd.code?new nd(x):x}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Zl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await EF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Zl;return(await l.request({method:"eth_accounts"})).map(d=>Fu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Zl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=$E(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new Zl}return!!(await j_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,w;const d=await this.getProvider();if(!d)throw new Zl;const h=c.chains.find(v=>v.id===u);if(!h)throw new rc(new rb);const f=new Promise(v=>{const b=x=>{"chainId"in x&&x.chainId===u&&(c.emitter.off("change",b),v())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:et(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(v){const b=v;if(b.code===4902||((g=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:x,..._}=h.blockExplorers??{};let C;l!=null&&l.blockExplorerUrls?C=l.blockExplorerUrls:x&&(C=[x.url,...Object.values(_).map(A=>A.url)]);let S;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?S=l.rpcUrls:S=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const T={blockExplorerUrls:C,chainId:et(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new nr(new Error("User rejected switch after adding network."))}),f]),h}catch(x){throw new nr(x)}throw b.code===nr.code?new nr(b):new rc(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Fu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Lte={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:$E(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return $E(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:$E(t,"isPhantom")}}};function $E(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Mte(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function jte(){const t=new Set;let e=[];const n=()=>Mte(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Fte=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},zte=Fte;function Hte(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const BT=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return BT(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return BT(r)(n)}}}},Wte=(t,e)=>(n,r,s)=>{let i={storage:Hte(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:h)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return BT(l.getItem.bind(l))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,_]=v;if(f=i.merge(_,(b=r())!=null?b:h),n(f,!0),x)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(v=>v(f))}).catch(v=>{w==null||w(void 0,v)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},qte=Wte,x$=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},yS=t=>t?x$(t):x$;var UF={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,v,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(b=1,v=new Array(w-1);b<w;b++)v[b-1]=arguments[b];y.fn.apply(y.context,v)}else{var x=y.length,_;for(b=0;b<x;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),w){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,d);break;case 4:y[b].fn.call(y[b].context,u,d,h);break;default:if(!v)for(_=1,v=new Array(w-1);_<w;_++)v[_-1]=arguments[_];y[b].fn.apply(y[b].context,v)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(UF);var Gte=UF.exports;const Vte=Lf(Gte);class Kte{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Vte})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Qte(t){return new Kte(t)}function Jte(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function C$(t,e){return t.slice(0,e).join(".")||"."}function A$(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Yte(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=A$(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=A$(s,c);if(u!==0)return r?e.call(this,a,c,C$(i,u)):`[ref=${C$(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Zte(t,e,n,r){return JSON.stringify(t,Yte((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Xte(t){const{deserialize:e=Jte,key:n="wagmi",serialize:r=Zte,storage:s=BF}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const BF={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function ene(){const t=typeof window<"u"&&window.localStorage?window.localStorage:BF;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const LT=256;let x1=LT,C1;function tne(t=11){if(!C1||x1+t>LT*2){C1="",x1=0;for(let e=0;e<LT;e++)C1+=(256+Math.random()*256|0).toString(16).substring(1)}return C1.substring(x1,x1+++t)}function nne(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Xte({storage:ene()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?jte():void 0,a=yS(()=>i.chains),c=yS(()=>{const _=[],C=new Set;for(const S of i.connectors??[]){const T=l(S);if(_.push(T),!s&&T.rdns){const A=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const P of A)C.add(P)}}if(!s&&o){const S=o.getProviders();for(const T of S)C.has(T.info.rdns)||_.push(l(u(T)))}return _});function l(_){var T;const C=Qte(tne()),S={..._({emitter:C,chains:a.getState(),storage:n,transports:i.transports}),emitter:C,uid:C.uid};return C.on("connect",b),(T=S.setup)==null||T.call(S),S}function u(_){const{info:C}=_,S=_.provider;return gC({target:{...C,id:C.rdns,provider:S}})}const d=new Map;function h(_={}){const C=_.chainId??y.getState().chainId,S=a.getState().find(A=>A.id===C);if(_.chainId&&!S)throw new rb;{const A=d.get(y.getState().chainId);if(A&&!S)return A;if(!S)throw new rb}{const A=d.get(C);if(A)return A}let T;if(i.client)T=i.client({chain:S});else{const A=S.id,P=a.getState().map(z=>z.id),R={},j=Object.entries(i);for(const[z,V]of j)if(!(z==="chains"||z==="client"||z==="connectors"||z==="transports"))if(typeof V=="object")if(A in V)R[z]=V[A];else{if(P.some(N=>N in V))continue;R[z]=V}else R[z]=V;T=kF({...R,chain:S,batch:R.batch??{multicall:!0},transport:z=>i.transports[A]({...z,connectors:c})})}return d.set(C,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";RE.startsWith(g)?p=Number.parseInt(RE.replace(g,"")):p=Number.parseInt(RE.split(".")[0]??"0");const y=yS(zte(n?qte(f,{migrate(_,C){if(C===p)return _;const S=f(),T=w(_,S.chainId);return{...S,chainId:T}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([C,S])=>{const{id:T,name:A,type:P,uid:R}=S.connector;return[C,{...S,connector:{id:T,name:A,type:P,uid:R}}]})},chainId:_.chainId,current:_.current}},merge(_,C){typeof _=="object"&&_&&"status"in _&&delete _.status;const S=w(_,C.chainId);return{...C,..._,chainId:S}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function w(_,C){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(S=>S.id===_.chainId)?_.chainId:C}r&&y.subscribe(({connections:_,current:C})=>{var S;return C?(S=_.get(C))==null?void 0:S.chainId:void 0},_=>{if(a.getState().some(S=>S.id===_))return y.setState(S=>({...S,chainId:_??S.chainId}))}),o==null||o.subscribe(_=>{const C=new Set,S=new Set;for(const A of c.getState())if(C.add(A.id),A.rdns){const P=typeof A.rdns=="string"?[A.rdns]:A.rdns;for(const R of P)S.add(R)}const T=[];for(const A of _){if(S.has(A.info.rdns))continue;const P=l(u(A));C.has(P.id)||T.push(P)}n&&!y.persist.hasHydrated()||c.setState(A=>[...A,...T],!0)});function v(_){y.setState(C=>{const S=C.connections.get(_.uid);return S?{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts??S.accounts,chainId:_.chainId??S.chainId,connector:S.connector})}:C})}function b(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(C=>{const S=c.getState().find(T=>T.uid===_.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",v),S.emitter.listenerCount("change")||S.emitter.on("change",v),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",x),{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:S}),current:_.uid,status:"connected"}):C})}function x(_){y.setState(C=>{const S=C.connections.get(_.uid);if(S){const A=S.connector;A.emitter.listenerCount("change")&&S.connector.emitter.off("change",v),A.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",x),A.emitter.listenerCount("connect")||S.connector.emitter.on("connect",b)}if(C.connections.delete(_.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const T=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(_){let C;typeof _=="function"?C=_(y.getState()):C=_;const S=f();typeof C!="object"&&(C=S),Object.keys(S).some(A=>!(A in C))&&(C=S),y.setState(C,!0)},subscribe(_,C,S){return y.subscribe(_,C,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const C=typeof _=="function"?_(a.getState()):_;if(C.length!==0)return a.setState(C,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:v,connect:b,disconnect:x}}}}function rne(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?UT(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function sne(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=rne(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const LF=D.createContext(void 0);function ine(t){const{children:e,config:n}=t,r={value:n};return D.createElement(sne,t,D.createElement(LF.Provider,r,e))}const one="2.15.6",ane=()=>`wagmi@${one}`;let cne=class extends bl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return ane()}};class lne extends cne{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function kd(t={}){const e=t.config??D.useContext(LF);if(!e)throw new lne;return e}var MF={exports:{}},jF={},FF={exports:{}},zF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=D;function une(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dne=typeof Object.is=="function"?Object.is:une,hne=jm.useState,fne=jm.useEffect,pne=jm.useLayoutEffect,gne=jm.useDebugValue;function mne(t,e){var n=e(),r=hne({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return pne(function(){s.value=n,s.getSnapshot=e,wS(s)&&i({inst:s})},[t,n,e]),fne(function(){return wS(s)&&i({inst:s}),t(function(){wS(s)&&i({inst:s})})},[t]),gne(n),n}function wS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dne(t,n)}catch{return!0}}function yne(t,e){return e()}var wne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yne:mne;zF.useSyncExternalStore=jm.useSyncExternalStore!==void 0?jm.useSyncExternalStore:wne;FF.exports=zF;var bne=FF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=D,vne=bne;function Ene(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _ne=typeof Object.is=="function"?Object.is:Ene,xne=vne.useSyncExternalStore,Cne=mC.useRef,Ane=mC.useEffect,Sne=mC.useMemo,Ine=mC.useDebugValue;jF.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Cne(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Sne(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,_ne(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=xne(t,i[0],i[1]);return Ane(function(){o.hasValue=!0,o.value=a},[a]),Ine(a),a};MF.exports=jF;var Tne=MF.exports;const bS=t=>typeof t=="object"&&!Array.isArray(t);function Nne(t,e,n=e,r=bf){const s=D.useRef([]),i=Tne.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(bS(o)&&bS(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(bS(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function Av(t={}){const e=kd(t);return Nne(n=>DF(e,{onChange:n}),()=>bg(e))}var fy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vf=typeof window>"u"||"Deno"in globalThis;function vs(){}function Pne(t,e){return typeof t=="function"?t(e):t}function MT(t){return typeof t=="number"&&t>=0&&t!==1/0}function HF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rd(t,e){return typeof t=="function"?t(e):t}function Ko(t,e){return typeof t=="function"?t(e):t}function S$(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==UO(o,e.options))return!1}else if(!sb(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function I$(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ef(e.options.mutationKey)!==Ef(i))return!1}else if(!sb(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function UO(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ef)(t)}function Ef(t){return JSON.stringify(t,(e,n)=>jT(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function sb(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>sb(t[n],e[n])):!1}function WF(t,e){if(t===e)return t;const n=T$(t)&&T$(e);if(n||jT(t)&&jT(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=WF(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function z_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function T$(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jT(t){if(!N$(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!N$(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function N$(t){return Object.prototype.toString.call(t)==="[object Object]"}function kne(t){return new Promise(e=>{setTimeout(e,t)})}function FT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?WF(t,e):e}function One(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Rne(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var BO=Symbol();function qF(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===BO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function GF(t,e){return typeof t=="function"?t(...e):!!t}var Ah,hu,Pg,NB,Dne=(NB=class extends fy{constructor(){super();H(this,Ah);H(this,hu);H(this,Pg);O(this,Pg,e=>{if(!vf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){E(this,hu)||this.setEventListener(E(this,Pg))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,hu))==null||e.call(this),O(this,hu,void 0))}setEventListener(e){var n;O(this,Pg,e),(n=E(this,hu))==null||n.call(this),O(this,hu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){E(this,Ah)!==e&&(O(this,Ah,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof E(this,Ah)=="boolean"?E(this,Ah):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ah=new WeakMap,hu=new WeakMap,Pg=new WeakMap,NB),LO=new Dne,kg,fu,Og,PB,$ne=(PB=class extends fy{constructor(){super();H(this,kg,!0);H(this,fu);H(this,Og);O(this,Og,e=>{if(!vf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){E(this,fu)||this.setEventListener(E(this,Og))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,fu))==null||e.call(this),O(this,fu,void 0))}setEventListener(e){var n;O(this,Og,e),(n=E(this,fu))==null||n.call(this),O(this,fu,e(this.setOnline.bind(this)))}setOnline(e){E(this,kg)!==e&&(O(this,kg,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return E(this,kg)}},kg=new WeakMap,fu=new WeakMap,Og=new WeakMap,PB),H_=new $ne;function zT(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Une(t){return Math.min(1e3*2**t,3e4)}function VF(t){return(t??"online")==="online"?H_.isOnline():!0}var KF=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function vS(t){return t instanceof KF}function QF(t){let e=!1,n=0,r=!1,s;const i=zT(),o=g=>{var y;r||(h(new KF(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>LO.isFocused()&&(t.networkMode==="always"||H_.isOnline())&&t.canRun(),u=()=>VF(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=w=>{(r||l())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var C;if(r)return;const v=t.retry??(vf?0:3),b=t.retryDelay??Une,x=typeof b=="function"?b(n,w):b,_=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!_){h(w);return}n++,(C=t.onFail)==null||C.call(t,n,w),kne(x).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Bne=t=>setTimeout(t,0);function Lne(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Bne;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ir=Lne(),Sh,kB,JF=(kB=class{constructor(){H(this,Sh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MT(this.gcTime)&&O(this,Sh,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vf?1/0:5*60*1e3))}clearGcTimeout(){E(this,Sh)&&(clearTimeout(E(this,Sh)),O(this,Sh,void 0))}},Sh=new WeakMap,kB),Rg,Ih,eo,Th,ss,Yb,Nh,Bo,bc,OB,Mne=(OB=class extends JF{constructor(e){super();H(this,Bo);H(this,Rg);H(this,Ih);H(this,eo);H(this,Th);H(this,ss);H(this,Yb);H(this,Nh);O(this,Nh,!1),O(this,Yb,e.defaultOptions),this.setOptions(e.options),this.observers=[],O(this,Th,e.client),O(this,eo,E(this,Th).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,O(this,Rg,jne(this.options)),this.state=e.state??E(this,Rg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=E(this,ss))==null?void 0:e.promise}setOptions(e){this.options={...E(this,Yb),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,eo).remove(this)}setData(e,n){const r=FT(this.state.data,e,this.options);return ee(this,Bo,bc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ee(this,Bo,bc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=E(this,ss))==null?void 0:r.promise;return(s=E(this,ss))==null||s.cancel(e),n?n.then(vs).catch(vs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,Rg))}isActive(){return this.observers.some(e=>Ko(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===BO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>rd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!HF(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,ss))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,ss))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),E(this,eo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(E(this,ss)&&(E(this,Nh)?E(this,ss).cancel({revert:!0}):E(this,ss).cancelRetry()),this.scheduleGc()),E(this,eo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ee(this,Bo,bc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(E(this,ss))return E(this,ss).continueRetry(),E(this,ss).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(O(this,Nh,!0),r.signal)})},i=()=>{const h=qF(this.options,n),p=(()=>{const g={client:E(this,Th),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return O(this,Nh,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:E(this,Th),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),O(this,Ih,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&ee(this,Bo,bc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;vS(h)&&h.silent||ee(this,Bo,bc).call(this,{type:"error",error:h}),vS(h)||((p=(f=E(this,eo).config).onError)==null||p.call(f,h,this),(y=(g=E(this,eo).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return O(this,ss,QF({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(p=(f=E(this,eo).config).onSuccess)==null||p.call(f,h,this),(y=(g=E(this,eo).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{ee(this,Bo,bc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{ee(this,Bo,bc).call(this,{type:"pause"})},onContinue:()=>{ee(this,Bo,bc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),E(this,ss).start()}},Rg=new WeakMap,Ih=new WeakMap,eo=new WeakMap,Th=new WeakMap,ss=new WeakMap,Yb=new WeakMap,Nh=new WeakMap,Bo=new WeakSet,bc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...YF(r.data,this.options),fetchMeta:e.meta??null};case"success":return O(this,Ih,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return vS(s)&&s.revert&&E(this,Ih)?{...E(this,Ih),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ir.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),E(this,eo).notify({query:this,type:"updated",action:e})})},OB);function YF(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VF(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jne(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Pa,RB,Fne=(RB=class extends fy{constructor(e={}){super();H(this,Pa);this.config=e,O(this,Pa,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??UO(s,n);let o=this.get(i);return o||(o=new Mne({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){E(this,Pa).has(e.queryHash)||(E(this,Pa).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=E(this,Pa).get(e.queryHash);n&&(e.destroy(),n===e&&E(this,Pa).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ir.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return E(this,Pa).get(e)}getAll(){return[...E(this,Pa).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>S$(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>S$(e,r)):n}notify(e){ir.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ir.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ir.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pa=new WeakMap,RB),ka,ps,Ph,Oa,ql,DB,zne=(DB=class extends JF{constructor(e){super();H(this,Oa);H(this,ka);H(this,ps);H(this,Ph);this.mutationId=e.mutationId,O(this,ps,e.mutationCache),O(this,ka,[]),this.state=e.state||ZF(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){E(this,ka).includes(e)||(E(this,ka).push(e),this.clearGcTimeout(),E(this,ps).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){O(this,ka,E(this,ka).filter(n=>n!==e)),this.scheduleGc(),E(this,ps).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){E(this,ka).length||(this.state.status==="pending"?this.scheduleGc():E(this,ps).remove(this))}continue(){var e;return((e=E(this,Ph))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,w,v,b,x,_,C,S,T;const n=()=>{ee(this,Oa,ql).call(this,{type:"continue"})};O(this,Ph,QF({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,P)=>{ee(this,Oa,ql).call(this,{type:"failed",failureCount:A,error:P})},onPause:()=>{ee(this,Oa,ql).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,ps).canRun(this)}));const r=this.state.status==="pending",s=!E(this,Ph).canStart();try{if(r)n();else{ee(this,Oa,ql).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=E(this,ps).config).onMutate)==null?void 0:o.call(i,e,this));const P=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));P!==this.state.context&&ee(this,Oa,ql).call(this,{type:"pending",context:P,variables:e,isPaused:s})}const A=await E(this,Ph).start();return await((u=(l=E(this,ps).config).onSuccess)==null?void 0:u.call(l,A,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,A,e,this.state.context)),await((p=(f=E(this,ps).config).onSettled)==null?void 0:p.call(f,A,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,A,null,e,this.state.context)),ee(this,Oa,ql).call(this,{type:"success",data:A}),A}catch(A){try{throw await((v=(w=E(this,ps).config).onError)==null?void 0:v.call(w,A,e,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,A,e,this.state.context)),await((C=(_=E(this,ps).config).onSettled)==null?void 0:C.call(_,void 0,A,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,A,e,this.state.context)),A}finally{ee(this,Oa,ql).call(this,{type:"error",error:A})}}finally{E(this,ps).runNext(this)}}},ka=new WeakMap,ps=new WeakMap,Ph=new WeakMap,Oa=new WeakSet,ql=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ir.batch(()=>{E(this,ka).forEach(r=>{r.onMutationUpdate(e)}),E(this,ps).notify({mutation:this,type:"updated",action:e})})},DB);function ZF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Oc,Lo,Zb,$B,Hne=($B=class extends fy{constructor(e={}){super();H(this,Oc);H(this,Lo);H(this,Zb);this.config=e,O(this,Oc,new Set),O(this,Lo,new Map),O(this,Zb,0)}build(e,n,r){const s=new zne({mutationCache:this,mutationId:++El(this,Zb)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){E(this,Oc).add(e);const n=A1(e);if(typeof n=="string"){const r=E(this,Lo).get(n);r?r.push(e):E(this,Lo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(E(this,Oc).delete(e)){const n=A1(e);if(typeof n=="string"){const r=E(this,Lo).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&E(this,Lo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=A1(e);if(typeof n=="string"){const r=E(this,Lo).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=A1(e);if(typeof n=="string"){const s=(r=E(this,Lo).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ir.batch(()=>{E(this,Oc).forEach(e=>{this.notify({type:"removed",mutation:e})}),E(this,Oc).clear(),E(this,Lo).clear()})}getAll(){return Array.from(E(this,Oc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>I$(n,r))}findAll(e={}){return this.getAll().filter(n=>I$(e,n))}notify(e){ir.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ir.batch(()=>Promise.all(e.map(n=>n.continue().catch(vs))))}},Oc=new WeakMap,Lo=new WeakMap,Zb=new WeakMap,$B);function A1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function P$(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=qF(e.options,e.fetchOptions),v=async(b,x,_)=>{if(g)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:x,direction:_?"backward":"forward",meta:e.options.meta};return y(R),R})(),T=await w(S),{maxPages:A}=e.options,P=_?Rne:One;return{pages:P(b.pages,T,A),pageParams:P(b.pageParams,x,A)}};if(s&&i.length){const b=s==="backward",x=b?Wne:k$,_={pages:i,pageParams:o},C=x(r,_);a=await v(_,C,b)}else{const b=t??i.length;do{const x=c===0?o[0]??r.initialPageParam:k$(r,a);if(c>0&&x==null)break;a=await v(a,x),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function k$(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Wne(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var On,pu,gu,Dg,$g,mu,Ug,Bg,UB,qne=(UB=class{constructor(t={}){H(this,On);H(this,pu);H(this,gu);H(this,Dg);H(this,$g);H(this,mu);H(this,Ug);H(this,Bg);O(this,On,t.queryCache||new Fne),O(this,pu,t.mutationCache||new Hne),O(this,gu,t.defaultOptions||{}),O(this,Dg,new Map),O(this,$g,new Map),O(this,mu,0)}mount(){El(this,mu)._++,E(this,mu)===1&&(O(this,Ug,LO.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,On).onFocus())})),O(this,Bg,H_.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,On).onOnline())})))}unmount(){var t,e;El(this,mu)._--,E(this,mu)===0&&((t=E(this,Ug))==null||t.call(this),O(this,Ug,void 0),(e=E(this,Bg))==null||e.call(this),O(this,Bg,void 0))}isFetching(t){return E(this,On).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return E(this,pu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,On).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=E(this,On).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(rd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return E(this,On).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=E(this,On).get(r.queryHash),i=s==null?void 0:s.state.data,o=Pne(e,i);if(o!==void 0)return E(this,On).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ir.batch(()=>E(this,On).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,On).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=E(this,On);ir.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=E(this,On);return ir.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ir.batch(()=>E(this,On).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(vs).catch(vs)}invalidateQueries(t,e={}){return ir.batch(()=>(E(this,On).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ir.batch(()=>E(this,On).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(vs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(vs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=E(this,On).build(this,e);return n.isStaleByTime(rd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(vs).catch(vs)}fetchInfiniteQuery(t){return t.behavior=P$(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(vs).catch(vs)}ensureInfiniteQueryData(t){return t.behavior=P$(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return H_.isOnline()?E(this,pu).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,On)}getMutationCache(){return E(this,pu)}getDefaultOptions(){return E(this,gu)}setDefaultOptions(t){O(this,gu,t)}setQueryDefaults(t,e){E(this,Dg).set(Ef(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...E(this,Dg).values()],n={};return e.forEach(r=>{sb(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){E(this,$g).set(Ef(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...E(this,$g).values()],n={};return e.forEach(r=>{sb(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...E(this,gu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=UO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===BO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...E(this,gu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){E(this,On).clear(),E(this,pu).clear()}},On=new WeakMap,pu=new WeakMap,gu=new WeakMap,Dg=new WeakMap,$g=new WeakMap,mu=new WeakMap,Ug=new WeakMap,Bg=new WeakMap,UB),qs,Et,Xb,gs,kh,Lg,yu,wu,ev,Mg,jg,Oh,Rh,bu,Fg,Wt,_0,HT,WT,qT,GT,VT,KT,QT,XF,BB,Gne=(BB=class extends fy{constructor(e,n){super();H(this,Wt);H(this,qs);H(this,Et);H(this,Xb);H(this,gs);H(this,kh);H(this,Lg);H(this,yu);H(this,wu);H(this,ev);H(this,Mg);H(this,jg);H(this,Oh);H(this,Rh);H(this,bu);H(this,Fg,new Set);this.options=n,O(this,qs,e),O(this,wu,null),O(this,yu,zT()),this.options.experimental_prefetchInRender||E(this,yu).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,Et).addObserver(this),O$(E(this,Et),this.options)?ee(this,Wt,_0).call(this):this.updateResult(),ee(this,Wt,GT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return JT(E(this,Et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return JT(E(this,Et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ee(this,Wt,VT).call(this),ee(this,Wt,KT).call(this),E(this,Et).removeObserver(this)}setOptions(e){const n=this.options,r=E(this,Et);if(this.options=E(this,qs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ko(this.options.enabled,E(this,Et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ee(this,Wt,QT).call(this),E(this,Et).setOptions(this.options),n._defaulted&&!z_(this.options,n)&&E(this,qs).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,Et),observer:this});const s=this.hasListeners();s&&R$(E(this,Et),r,this.options,n)&&ee(this,Wt,_0).call(this),this.updateResult(),s&&(E(this,Et)!==r||Ko(this.options.enabled,E(this,Et))!==Ko(n.enabled,E(this,Et))||rd(this.options.staleTime,E(this,Et))!==rd(n.staleTime,E(this,Et)))&&ee(this,Wt,HT).call(this);const i=ee(this,Wt,WT).call(this);s&&(E(this,Et)!==r||Ko(this.options.enabled,E(this,Et))!==Ko(n.enabled,E(this,Et))||i!==E(this,bu))&&ee(this,Wt,qT).call(this,i)}getOptimisticResult(e){const n=E(this,qs).getQueryCache().build(E(this,qs),e),r=this.createResult(n,e);return Kne(this,r)&&(O(this,gs,r),O(this,Lg,this.options),O(this,kh,E(this,Et).state)),r}getCurrentResult(){return E(this,gs)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){E(this,Fg).add(e)}getCurrentQuery(){return E(this,Et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=E(this,qs).defaultQueryOptions(e),r=E(this,qs).getQueryCache().build(E(this,qs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ee(this,Wt,_0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,gs)))}createResult(e,n){var A;const r=E(this,Et),s=this.options,i=E(this,gs),o=E(this,kh),a=E(this,Lg),l=e!==r?e.state:E(this,Xb),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const P=this.hasListeners(),R=!P&&O$(e,n),j=P&&R$(e,r,n,s);(R||j)&&(d={...d,...YF(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(P=i.data,w=!0):P=typeof n.placeholderData=="function"?n.placeholderData((A=E(this,jg))==null?void 0:A.state.data,E(this,jg)):n.placeholderData,P!==void 0&&(y="success",f=FT(i==null?void 0:i.data,P,n),h=!0)}if(n.select&&f!==void 0&&!w)if(i&&f===(o==null?void 0:o.data)&&n.select===E(this,ev))f=E(this,Mg);else try{O(this,ev,n.select),f=n.select(f),f=FT(i==null?void 0:i.data,f,n),O(this,Mg,f),O(this,wu,null)}catch(P){O(this,wu,P)}E(this,wu)&&(p=E(this,wu),f=E(this,Mg),g=Date.now(),y="error");const v=d.fetchStatus==="fetching",b=y==="pending",x=y==="error",_=b&&v,C=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:b,isSuccess:y==="success",isError:x,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:x&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:x&&C,isStale:MO(e,n),refetch:this.refetch,promise:E(this,yu)};if(this.options.experimental_prefetchInRender){const P=z=>{T.status==="error"?z.reject(T.error):T.data!==void 0&&z.resolve(T.data)},R=()=>{const z=O(this,yu,T.promise=zT());P(z)},j=E(this,yu);switch(j.status){case"pending":e.queryHash===r.queryHash&&P(j);break;case"fulfilled":(T.status==="error"||T.data!==j.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==j.reason)&&R();break}}return T}updateResult(){const e=E(this,gs),n=this.createResult(E(this,Et),this.options);if(O(this,kh,E(this,Et).state),O(this,Lg,this.options),E(this,kh).data!==void 0&&O(this,jg,E(this,Et)),z_(n,e))return;O(this,gs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!E(this,Fg).size)return!0;const o=new Set(i??E(this,Fg));return this.options.throwOnError&&o.add("error"),Object.keys(E(this,gs)).some(a=>{const c=a;return E(this,gs)[c]!==e[c]&&o.has(c)})};ee(this,Wt,XF).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ee(this,Wt,GT).call(this)}},qs=new WeakMap,Et=new WeakMap,Xb=new WeakMap,gs=new WeakMap,kh=new WeakMap,Lg=new WeakMap,yu=new WeakMap,wu=new WeakMap,ev=new WeakMap,Mg=new WeakMap,jg=new WeakMap,Oh=new WeakMap,Rh=new WeakMap,bu=new WeakMap,Fg=new WeakMap,Wt=new WeakSet,_0=function(e){ee(this,Wt,QT).call(this);let n=E(this,Et).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(vs)),n},HT=function(){ee(this,Wt,VT).call(this);const e=rd(this.options.staleTime,E(this,Et));if(vf||E(this,gs).isStale||!MT(e))return;const r=HF(E(this,gs).dataUpdatedAt,e)+1;O(this,Oh,setTimeout(()=>{E(this,gs).isStale||this.updateResult()},r))},WT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,Et)):this.options.refetchInterval)??!1},qT=function(e){ee(this,Wt,KT).call(this),O(this,bu,e),!(vf||Ko(this.options.enabled,E(this,Et))===!1||!MT(E(this,bu))||E(this,bu)===0)&&O(this,Rh,setInterval(()=>{(this.options.refetchIntervalInBackground||LO.isFocused())&&ee(this,Wt,_0).call(this)},E(this,bu)))},GT=function(){ee(this,Wt,HT).call(this),ee(this,Wt,qT).call(this,ee(this,Wt,WT).call(this))},VT=function(){E(this,Oh)&&(clearTimeout(E(this,Oh)),O(this,Oh,void 0))},KT=function(){E(this,Rh)&&(clearInterval(E(this,Rh)),O(this,Rh,void 0))},QT=function(){const e=E(this,qs).getQueryCache().build(E(this,qs),this.options);if(e===E(this,Et))return;const n=E(this,Et);O(this,Et,e),O(this,Xb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},XF=function(e){ir.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(E(this,gs))}),E(this,qs).getQueryCache().notify({query:E(this,Et),type:"observerResultsUpdated"})})},BB);function Vne(t,e){return Ko(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function O$(t,e){return Vne(t,e)||t.state.data!==void 0&&JT(t,e,e.refetchOnMount)}function JT(t,e,n){if(Ko(e.enabled,t)!==!1&&rd(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&MO(t,e)}return!1}function R$(t,e,n,r){return(t!==e||Ko(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&MO(t,n)}function MO(t,e){return Ko(e.enabled,t)!==!1&&t.isStaleByTime(rd(e.staleTime,t))}function Kne(t,e){return!z_(t.getCurrentResult(),e)}var vu,Eu,Gs,Rc,il,UE,YT,LB,Qne=(LB=class extends fy{constructor(n,r){super();H(this,il);H(this,vu);H(this,Eu);H(this,Gs);H(this,Rc);O(this,vu,n),this.setOptions(r),this.bindMethods(),ee(this,il,UE).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=E(this,vu).defaultMutationOptions(n),z_(this.options,r)||E(this,vu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Gs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ef(r.mutationKey)!==Ef(this.options.mutationKey)?this.reset():((s=E(this,Gs))==null?void 0:s.state.status)==="pending"&&E(this,Gs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=E(this,Gs))==null||n.removeObserver(this)}onMutationUpdate(n){ee(this,il,UE).call(this),ee(this,il,YT).call(this,n)}getCurrentResult(){return E(this,Eu)}reset(){var n;(n=E(this,Gs))==null||n.removeObserver(this),O(this,Gs,void 0),ee(this,il,UE).call(this),ee(this,il,YT).call(this)}mutate(n,r){var s;return O(this,Rc,r),(s=E(this,Gs))==null||s.removeObserver(this),O(this,Gs,E(this,vu).getMutationCache().build(E(this,vu),this.options)),E(this,Gs).addObserver(this),E(this,Gs).execute(n)}},vu=new WeakMap,Eu=new WeakMap,Gs=new WeakMap,Rc=new WeakMap,il=new WeakSet,UE=function(){var r;const n=((r=E(this,Gs))==null?void 0:r.state)??ZF();O(this,Eu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},YT=function(n){ir.batch(()=>{var r,s,i,o,a,c,l,u;if(E(this,Rc)&&this.hasListeners()){const d=E(this,Eu).variables,h=E(this,Eu).context;(n==null?void 0:n.type)==="success"?((s=(r=E(this,Rc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=E(this,Rc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=E(this,Rc)).onError)==null||c.call(a,n.error,d,h),(u=(l=E(this,Rc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(E(this,Eu))})})},LB);function Jne(t){return JSON.stringify(t,(e,n)=>Yne(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Yne(t){if(!D$(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!D$(n)||!n.hasOwnProperty("isPrototypeOf"))}function D$(t){return Object.prototype.toString.call(t)==="[object Object]"}function e9(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:w,initialPageParam:v,_optimisticResults:b,enabled:x,notifyOnChangeProps:_,placeholderData:C,refetchInterval:S,refetchIntervalInBackground:T,refetchOnMount:A,refetchOnReconnect:P,refetchOnWindowFocus:R,retryOnMount:j,select:z,staleTime:V,suspense:I,throwOnError:N,config:L,connector:U,query:$,...M}=t;return M}function Zne(t){return{mutationFn(e){return DE(t,e)},mutationKey:["connect"]}}function Xne(t){return{mutationFn(e){return OF(t,e)},mutationKey:["disconnect"]}}function ere(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Ite(t,{...i,address:r})},queryKey:tre(e)}}function tre(t={}){return["ensName",e9(t)]}function nre(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Tte(t,{...o,connector:r})},queryKey:rre(e)}}function rre(t={}){const{connector:e,...n}=t;return["walletClient",{...e9(n),connectorUid:e==null?void 0:e.uid}]}var t9=D.createContext(void 0),jO=t=>{const e=D.useContext(t9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},sre=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(t9.Provider,{value:t,children:e})),n9=D.createContext(!1),ire=()=>D.useContext(n9);n9.Provider;function ore(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var are=D.createContext(ore()),cre=()=>D.useContext(are),lre=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ure=t=>{D.useEffect(()=>{t.clearReset()},[t])},dre=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||GF(n,[t.error,r])),hre=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},fre=(t,e)=>t.isLoading&&t.isFetching&&!e,pre=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,$$=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function gre(t,e,n){var d,h,f,p,g;const r=ire(),s=cre(),i=jO(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",hre(o),lre(o,s),ure(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(y=>{const w=u?c.subscribe(ir.batchCalls(y)):vs;return c.updateResult(),w},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),pre(o,l))throw $$(o,c,s);if(dre({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!vf&&fre(l,r)){const y=a?$$(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(vs).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function mre(t,e){return gre(t,Gne)}function r9(t,e){const n=jO(),[r]=D.useState(()=>new Qne(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(ir.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(vs)},[r]);if(s.error&&GF(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function s9(t){const e=mre({...t,queryKeyHashFn:Jne});return e.queryKey=t.queryKey,e}function i9(t={}){const e=kd(t);return D.useSyncExternalStore(n=>Rte(e,{onChange:n}),()=>v$(e),()=>v$(e))}function yre(t={}){const e=kd(t);return D.useSyncExternalStore(n=>$F(e,{onChange:n}),()=>E$(e),()=>E$(e))}function o9(t={}){const{mutation:e}=t,n=kd(t),r=Zne(n),{mutate:s,mutateAsync:i,...o}=r9({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:yre({config:n})}}function wre(t={}){const e=kd(t);return D.useSyncExternalStore(n=>Dte(e,{onChange:n}),()=>Na(e),()=>Na(e))}function a9(t={}){const{mutation:e}=t,n=kd(t),r=Xne(n),{mutate:s,mutateAsync:i,...o}=r9({...e,...r});return{...o,connectors:wre({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function c9(t={}){const{address:e,query:n={}}=t,r=kd(t),s=i9({config:r}),i=ere(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return s9({...n,...i,enabled:o})}function l9(t={}){const{query:e={},...n}=t,r=kd(n),s=jO(),{address:i,connector:o,status:a}=Av({config:r}),c=i9({config:r}),l=t.connector??o,{queryKey:u,...d}=nre(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),s9({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const bre="_verified_lvyh0_1",FO={verified:bre},vre=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:FO.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Ere=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:FO.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),_re=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:FO.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function u9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=u9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sd(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=u9(t))&&(r&&(r+=" "),r+=e);return r}const xre="_root_98iqw_1",Cre="_article_98iqw_21",U$={root:xre,article:Cre},zO=({className:t,children:e})=>m.jsx("div",{className:sd("react-tweet-theme",U$.root,t),children:m.jsx("article",{className:U$.article,children:e})}),d9=t=>m.jsx("img",{...t}),Are="_header_nqq4j_1",Sre="_avatar_nqq4j_11",Ire="_avatarOverflow_nqq4j_16",Tre="_avatarSquare_nqq4j_23",Nre="_avatarShadow_nqq4j_26",Pre="_author_nqq4j_37",kre="_authorLink_nqq4j_44",Ore="_authorVerified_nqq4j_53",Rre="_authorLinkText_nqq4j_56",Dre="_authorMeta_nqq4j_63",$re="_authorFollow_nqq4j_66",Ure="_username_nqq4j_69",Bre="_follow_nqq4j_74",Lre="_separator_nqq4j_82",Mre="_brand_nqq4j_86",jre="_twitterIcon_nqq4j_90",xr={header:Are,avatar:Sre,avatarOverflow:Ire,avatarSquare:Tre,avatarShadow:Nre,author:Pre,authorLink:kre,authorVerified:Ore,authorLinkText:Rre,authorMeta:Dre,authorFollow:$re,username:Ure,follow:Bre,separator:Lre,brand:Mre,twitterIcon:jre},Fre="_verifiedOld_lcna5_1",zre="_verifiedBlue_lcna5_4",Hre="_verifiedGovernment_lcna5_7",ES={verifiedOld:Fre,verifiedBlue:zre,verifiedGovernment:Hre},h9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(vre,{}),s=ES.verifiedBlue;if(n)switch(t.is_blue_verified||(s=ES.verifiedOld),t.verified_type){case"Government":r=m.jsx(_re,{}),s=ES.verifiedGovernment;break;case"Business":r=m.jsx(Ere,{}),s=null;break}return n?m.jsx("div",{className:sd(e,s),children:r}):null},Wre=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:d9,{user:s}=t;return m.jsxs("div",{className:xr.header,children:[m.jsxs("a",{href:t.url,className:xr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:sd(xr.avatarOverflow,s.profile_image_shape==="Square"&&xr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:xr.avatarOverflow,children:m.jsx("div",{className:xr.avatarShadow})})]}),m.jsxs("div",{className:xr.author,children:[m.jsxs("a",{href:t.url,className:xr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:xr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(h9,{user:s,className:xr.authorVerified})]}),m.jsxs("div",{className:xr.authorMeta,children:[m.jsx("a",{href:t.url,className:xr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:xr.authorFollow,children:[m.jsx("span",{className:xr.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:xr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:xr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:xr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},qre="_root_1ec15_1",Gre={root:qre},Vre=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:Gre.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Kre="_root_eihfa_1",Qre={root:Kre},Jre=({href:t,children:e})=>m.jsx("a",{href:t,className:Qre.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Yre="_root_1xq52_1",Zre={root:Yre},Xre=({tweet:t})=>m.jsx("p",{className:Zre.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Jre,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),B$=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,f9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,ese=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,tse=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,nse=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,rse=t=>`https://x.com/hashtag/${t.text}`,sse=t=>`https://x.com/search?q=%24${t.text}`,ise=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,p9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},ose=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},ase=t=>{const e=ose(t);return e.length>1?e[1]:e[0]},ZT=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function L$(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return qy(n,"hashtag",t.entities.hashtags),qy(n,"mention",t.entities.user_mentions),qy(n,"url",t.entities.urls),qy(n,"symbol",t.entities.symbols),t.entities.media&&qy(n,"media",t.entities.media),cse(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:rse(r),text:s});case"mention":return Object.assign(r,{href:f9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:sse(r),text:s});default:return Object.assign(r,{text:s})}})}function qy(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function cse(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const lse=t=>({...t,url:B$(t),user:{...t.user,url:f9(t),follow_url:nse(t)},like_url:ese(t),reply_url:tse(t),in_reply_to_url:t.in_reply_to_screen_name?ise(t):void 0,entities:L$(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:B$(t.quoted_tweet),entities:L$(t.quoted_tweet)}:void 0}),use="_root_g9tkv_1",dse="_rounded_g9tkv_6",hse="_mediaWrapper_g9tkv_10",fse="_grid2Columns_g9tkv_17",pse="_grid3_g9tkv_20",gse="_grid2x2_g9tkv_23",mse="_mediaContainer_g9tkv_26",yse="_mediaLink_g9tkv_34",wse="_skeleton_g9tkv_38",bse="_image_g9tkv_43",wi={root:use,rounded:dse,mediaWrapper:hse,grid2Columns:fse,grid3:pse,grid2x2:gse,mediaContainer:mse,mediaLink:yse,skeleton:wse,image:bse},vse="_anchor_fp31d_1",Ese="_videoButton_fp31d_17",_se="_videoButtonIcon_fp31d_35",xse="_watchOnTwitter_fp31d_44",Cse="_viewReplies_fp31d_60",ip={anchor:vse,videoButton:Ese,videoButtonIcon:_se,watchOnTwitter:xse,viewReplies:Cse},Ase=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=ase(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:wi.image,poster:p9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:ip.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:ip.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:ip.watchOnTwitter,children:m.jsx("a",{href:t.url,className:ip.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:sd(ip.anchor,ip.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Sse=t=>m.jsx("img",{...t}),M$=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},g9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Sse;return m.jsx("div",{className:sd(wi.root,!n&&wi.rounded),children:m.jsx("div",{className:sd(wi.mediaWrapper,o>1&&wi.grid2Columns,o===3&&wi.grid3,o>4&&wi.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:sd(wi.mediaContainer,wi.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:wi.skeleton,style:M$(l,o)}),m.jsx(c,{src:p9(l,"small"),alt:l.ext_alt_text||"Image",className:wi.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:wi.mediaContainer,children:[m.jsx("div",{className:wi.skeleton,style:M$(l,o)}),m.jsx(Ase,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Ise={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Tse=new Intl.DateTimeFormat("en-US",Ise),Nse=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Pse=t=>{const e=Nse(Tse.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},kse="_root_i24yn_1",Ose={root:kse},Rse=({tweet:t})=>{const e=new Date(t.created_at),n=Pse(e);return m.jsx("a",{className:Ose.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},Dse="_info_19qcj_1",$se="_infoLink_19qcj_10",Use="_infoIcon_19qcj_30",_S={info:Dse,infoLink:$se,infoIcon:Use},Bse=({tweet:t})=>m.jsxs("div",{className:_S.info,children:[m.jsx(Rse,{tweet:t}),m.jsx("a",{className:_S.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:_S.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Lse="_actions_n2anf_1",Mse="_like_n2anf_13",jse="_reply_n2anf_14",Fse="_copy_n2anf_15",zse="_likeIconWrapper_n2anf_27",Hse="_likeCount_n2anf_30",Wse="_replyIconWrapper_n2anf_35",qse="_copyIconWrapper_n2anf_36",Gse="_likeIcon_n2anf_27",Vse="_replyIcon_n2anf_35",Kse="_copyIcon_n2anf_36",Qse="_replyText_n2anf_56",Jse="_copyText_n2anf_57",Qs={actions:Lse,like:Mse,reply:jse,copy:Fse,likeIconWrapper:zse,likeCount:Hse,replyIconWrapper:Wse,copyIconWrapper:qse,likeIcon:Gse,replyIcon:Vse,copyIcon:Kse,replyText:Qse,copyText:Jse},Yse=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Qs.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Qs.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Qs.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Qs.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Qs.copyText,children:e?"Copied!":"Copy link"})]})},Zse=({tweet:t})=>{const e=ZT(t.favorite_count);return m.jsxs("div",{className:Qs.actions,children:[m.jsxs("a",{className:Qs.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Qs.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Qs.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Qs.likeCount,children:e})]}),m.jsxs("a",{className:Qs.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Qs.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Qs.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Qs.replyText,children:"Reply"})]}),m.jsx(Yse,{tweet:t})]})},Xse="_replies_1cutb_1",eie="_link_1cutb_4",tie="_text_1cutb_23",xS={replies:Xse,link:eie,text:tie},nie=({tweet:t})=>m.jsx("div",{className:xS.replies,children:m.jsx("a",{className:xS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:xS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${ZT(t.conversation_count)} reply`:`Read ${ZT(t.conversation_count)} replies`})})}),rie="_root_q5799_1",sie="_article_q5799_16",j$={root:rie,article:sie},iie=({tweet:t,children:e})=>m.jsx("div",{className:j$.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:j$.article,children:e})}),oie="_header_r31i5_1",aie="_avatar_r31i5_11",cie="_avatarSquare_r31i5_17",lie="_author_r31i5_21",uie="_authorText_r31i5_26",die="_username_r31i5_33",Ud={header:oie,avatar:aie,avatarSquare:cie,author:lie,authorText:uie,username:die},hie=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Ud.header,children:[m.jsx("a",{href:t.url,className:Ud.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:sd(Ud.avatarOverflow,e.profile_image_shape==="Square"&&Ud.avatarSquare),children:m.jsx(d9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Ud.author,children:[m.jsx("div",{className:Ud.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(h9,{user:e}),m.jsx("div",{className:Ud.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},fie="_root_175ot_1",pie={root:fie},gie=({tweet:t})=>m.jsx("p",{className:pie.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),mie=({tweet:t})=>{var e;return m.jsxs(iie,{tweet:t,children:[m.jsx(hie,{tweet:t}),m.jsx(gie,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(g9,{quoted:!0,tweet:t}):null]})},yie=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>lse(t),[t]);return m.jsxs(zO,{children:[m.jsx(Wre,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Vre,{tweet:r}),m.jsx(Xre,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(g9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(mie,{tweet:r.quoted_tweet}),m.jsx(Bse,{tweet:r}),m.jsx(Zse,{tweet:r}),m.jsx(nie,{tweet:r})]})},wie="_root_16yxa_1",bie={root:wie},vie=t=>m.jsx(zO,{children:m.jsxs("div",{className:bie.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Eie="_skeleton_oi7hr_1",_ie={skeleton:Eie},S1=({style:t})=>m.jsx("span",{className:_ie.skeleton,style:t}),xie="_root_17qqv_1",Cie={root:xie},Aie=()=>m.jsxs(zO,{className:Cie.root,children:[m.jsx(S1,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(S1,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(S1,{style:{height:"2rem"}}),m.jsx(S1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var m9={exports:{}},y9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=D;function Sie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iie=typeof Object.is=="function"?Object.is:Sie,Tie=Fm.useState,Nie=Fm.useEffect,Pie=Fm.useLayoutEffect,kie=Fm.useDebugValue;function Oie(t,e){var n=e(),r=Tie({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Pie(function(){s.value=n,s.getSnapshot=e,CS(s)&&i({inst:s})},[t,n,e]),Nie(function(){return CS(s)&&i({inst:s}),t(function(){CS(s)&&i({inst:s})})},[t]),kie(n),n}function CS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Iie(t,n)}catch{return!0}}function Rie(t,e){return e()}var Die=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rie:Oie;y9.useSyncExternalStore=Fm.useSyncExternalStore!==void 0?Fm.useSyncExternalStore:Die;m9.exports=y9;var $ie=m9.exports;const w9=0,b9=1,v9=2,F$=3;var z$=Object.prototype.hasOwnProperty;function XT(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&XT(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(z$.call(t,n)&&++r&&!z$.call(e,n)||!(n in e)||!XT(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const qc=new WeakMap,zu=()=>{},Es=zu(),eN=Object,Tt=t=>t===Es,Wa=t=>typeof t=="function",yd=(t,e)=>({...t,...e}),E9=t=>Wa(t.then),AS={},I1={},HO="undefined",Sv=typeof window!=HO,tN=typeof document!=HO,Uie=Sv&&"Deno"in window,Bie=()=>Sv&&typeof window.requestAnimationFrame!=HO,_9=(t,e)=>{const n=qc.get(t);return[()=>!Tt(e)&&t.get(e)||AS,r=>{if(!Tt(e)){const s=t.get(e);e in I1||(I1[e]=s),n[5](e,yd(s,r),s||AS)}},n[6],()=>!Tt(e)&&e in I1?I1[e]:!Tt(e)&&t.get(e)||AS]};let nN=!0;const Lie=()=>nN,[rN,sN]=Sv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[zu,zu],Mie=()=>{const t=tN&&document.visibilityState;return Tt(t)||t!=="hidden"},jie=t=>(tN&&document.addEventListener("visibilitychange",t),rN("focus",t),()=>{tN&&document.removeEventListener("visibilitychange",t),sN("focus",t)}),Fie=t=>{const e=()=>{nN=!0,t()},n=()=>{nN=!1};return rN("online",e),rN("offline",n),()=>{sN("online",e),sN("offline",n)}},zie={isOnline:Lie,isVisible:Mie},Hie={initFocus:jie,initReconnect:Fie},H$=!Ri.useId,ib=!Sv||Uie,Wie=t=>Bie()?window.requestAnimationFrame(t):setTimeout(t,1),SS=ib?D.useEffect:D.useLayoutEffect,IS=typeof navigator<"u"&&navigator.connection,W$=!ib&&IS&&(["slow-2g","2g"].includes(IS.effectiveType)||IS.saveData),T1=new WeakMap,TS=(t,e)=>eN.prototype.toString.call(t)===`[object ${e}]`;let qie=0;const iN=t=>{const e=typeof t,n=TS(t,"Date"),r=TS(t,"RegExp"),s=TS(t,"Object");let i,o;if(eN(t)===t&&!n&&!r){if(i=T1.get(t),i)return i;if(i=++qie+"~",T1.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=iN(t[o])+",";T1.set(t,i)}if(s){i="#";const a=eN.keys(t).sort();for(;!Tt(o=a.pop());)Tt(t[o])||(i+=o+":"+iN(t[o])+",");T1.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},WO=t=>{if(Wa(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?iN(t):"",[t,e]};let Gie=0;const oN=()=>++Gie;async function x9(...t){const[e,n,r,s]=t,i=yd({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Wa(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=WO(h);if(!f)return;const[p,g]=_9(e,f),[y,w,v,b]=qc.get(e),x=()=>{const z=y[f];return(Wa(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete v[f],delete b[f],z&&z[0])?z[0](v9).then(()=>p().data):p().data};if(t.length<3)return x();let _=r,C;const S=oN();w[f]=[S,0];const T=!Tt(c),A=p(),P=A.data,R=A._c,j=Tt(R)?P:R;if(T&&(c=Wa(c)?c(j,P):c,g({data:c,_c:j})),Wa(_))try{_=_(j)}catch(z){C=z}if(_&&E9(_))if(_=await _.catch(z=>{C=z}),S!==w[f][0]){if(C)throw C;return _}else C&&T&&l(C)&&(o=!0,g({data:j,_c:Es}));if(o&&!C)if(Wa(o)){const z=o(_,j);g({data:z,error:Es,_c:Es})}else g({data:_,error:Es,_c:Es});if(w[f][1]=oN(),Promise.resolve(x()).then(()=>{g({_c:Es})}),C){if(u)throw C;return}return _}}const q$=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Vie=(t,e)=>{if(!qc.has(t)){const n=yd(Hie,e),r=Object.create(null),s=x9.bind(Es,t);let i=zu;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!qc.has(t)&&(qc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!ib)){const u=n.initFocus(setTimeout.bind(Es,q$.bind(Es,r,w9))),d=n.initReconnect(setTimeout.bind(Es,q$.bind(Es,r,b9)));i=()=>{u&&u(),d&&d(),qc.delete(t)}}};return l(),[t,s,l,i]}return[t,qc.get(t)[4]]},Kie=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Tt(i)&&o>i||setTimeout(r,a,s)},Qie=XT,[C9,Jie]=Vie(new Map),Yie=yd({onLoadingSlow:zu,onSuccess:zu,onError:zu,onErrorRetry:Kie,onDiscarded:zu,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:W$?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:W$?5e3:3e3,compare:Qie,isPaused:()=>!1,cache:C9,mutate:Jie,fallback:{}},zie),Zie=(t,e)=>{const n=yd(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=yd(s,o))}return n},Xie=D.createContext({}),eoe="$inf$",A9=Sv&&window.__SWR_DEVTOOLS_USE__,toe=A9?window.__SWR_DEVTOOLS_USE__:[],noe=()=>{A9&&(window.__SWR_DEVTOOLS_REACT__=Ri)},roe=t=>Wa(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],soe=()=>yd(Yie,D.useContext(Xie)),ioe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=WO(e),[,,,a]=qc.get(C9);if(o.startsWith(eoe))return n(...i);const c=a[o];return Tt(c)?n(...i):(delete a[o],c)}),r),ooe=toe.concat(ioe),aoe=t=>function(...n){const r=soe(),[s,i,o]=roe(n),a=Zie(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(ooe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},coe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};noe();const NS=Ri.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),PS={dedupe:!0},loe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=qc.get(r),[w,v]=WO(t),b=D.useRef(!1),x=D.useRef(!1),_=D.useRef(w),C=D.useRef(e),S=D.useRef(n),T=()=>S.current,A=()=>T().isVisible()&&T().isOnline(),[P,R,j,z]=_9(r,w),V=D.useRef({}).current,I=Tt(o)?Tt(n.fallback)?Es:n.fallback[w]:o,N=(ve,_e)=>{for(const Fe in V){const Ge=Fe;if(Ge==="data"){if(!s(ve[Ge],_e[Ge])&&(!Tt(ve[Ge])||!s(ce,_e[Ge])))return!1}else if(_e[Ge]!==ve[Ge])return!1}return!0},L=D.useMemo(()=>{const ve=!w||!e?!1:Tt(a)?T().isPaused()||i?!1:c!==!1:a,_e=Ct=>{const pn=yd(Ct);return delete pn._k,ve?{isValidating:!0,isLoading:!0,...pn}:pn},Fe=P(),Ge=z(),Bt=_e(Fe),xn=Fe===Ge?Bt:_e(Ge);let qt=Bt;return[()=>{const Ct=_e(P());return N(Ct,qt)?(qt.data=Ct.data,qt.isLoading=Ct.isLoading,qt.isValidating=Ct.isValidating,qt.error=Ct.error,qt):(qt=Ct,Ct)},()=>xn]},[r,w]),U=$ie.useSyncExternalStore(D.useCallback(ve=>j(w,(_e,Fe)=>{N(Fe,_e)||ve()}),[r,w]),L[0],L[1]),$=!b.current,M=f[w]&&f[w].length>0,q=U.data,Z=Tt(q)?I&&E9(I)?NS(I):I:q,ie=U.error,re=D.useRef(Z),ce=h?Tt(q)?Tt(re.current)?Z:re.current:q:Z,ge=M&&!Tt(ie)?!1:$&&!Tt(a)?a:T().isPaused()?!1:i?Tt(Z)?!1:c:Tt(Z)||c,J=!!(w&&e&&$&&ge),te=Tt(U.isValidating)?J:U.isValidating,oe=Tt(U.isLoading)?J:U.isLoading,se=D.useCallback(async ve=>{const _e=C.current;if(!w||!_e||x.current||T().isPaused())return!1;let Fe,Ge,Bt=!0;const xn=ve||{},qt=!g[w]||!xn.dedupe,Ct=()=>H$?!x.current&&w===_.current&&b.current:w===_.current,pn={isValidating:!1,isLoading:!1},qr=()=>{R(pn)},ga=()=>{const Yn=g[w];Yn&&Yn[1]===Ge&&delete g[w]},ma={isValidating:!0};Tt(P().data)&&(ma.isLoading=!0);try{if(qt&&(R(ma),n.loadingTimeout&&Tt(P().data)&&setTimeout(()=>{Bt&&Ct()&&T().onLoadingSlow(w,n)},n.loadingTimeout),g[w]=[_e(v),oN()]),[Fe,Ge]=g[w],Fe=await Fe,qt&&setTimeout(ga,n.dedupingInterval),!g[w]||g[w][1]!==Ge)return qt&&Ct()&&T().onDiscarded(w),!1;pn.error=Es;const Yn=p[w];if(!Tt(Yn)&&(Ge<=Yn[0]||Ge<=Yn[1]||Yn[1]===0))return qr(),qt&&Ct()&&T().onDiscarded(w),!1;const Gr=P().data;pn.data=s(Gr,Fe)?Gr:Fe,qt&&Ct()&&T().onSuccess(Fe,w,n)}catch(Yn){ga();const Gr=T(),{shouldRetryOnError:_o}=Gr;Gr.isPaused()||(pn.error=Yn,qt&&Ct()&&(Gr.onError(Yn,w,Gr),(_o===!0||Wa(_o)&&_o(Yn))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||A())&&Gr.onErrorRetry(Yn,w,Gr,ue=>{const He=f[w];He&&He[0]&&He[0](F$,ue)},{retryCount:(xn.retryCount||0)+1,dedupe:!0})))}return Bt=!1,qr(),!0},[w,r]),me=D.useCallback((...ve)=>x9(r,_.current,...ve),[]);if(SS(()=>{C.current=e,S.current=n,Tt(q)||(re.current=q)}),SS(()=>{if(!w)return;const ve=se.bind(Es,PS);let _e=0;T().revalidateOnFocus&&(_e=Date.now()+T().focusThrottleInterval);const Ge=coe(w,f,(Bt,xn={})=>{if(Bt==w9){const qt=Date.now();T().revalidateOnFocus&&qt>_e&&A()&&(_e=qt+T().focusThrottleInterval,ve())}else if(Bt==b9)T().revalidateOnReconnect&&A()&&ve();else{if(Bt==v9)return se();if(Bt==F$)return se(xn)}});return x.current=!1,_.current=w,b.current=!0,R({_k:v}),ge&&(Tt(Z)||ib?ve():Wie(ve)),()=>{x.current=!0,Ge()}},[w]),SS(()=>{let ve;function _e(){const Ge=Wa(l)?l(P().data):l;Ge&&ve!==-1&&(ve=setTimeout(Fe,Ge))}function Fe(){!P().error&&(u||T().isVisible())&&(d||T().isOnline())?se(PS).then(_e):_e()}return _e(),()=>{ve&&(clearTimeout(ve),ve=-1)}},[l,u,d,w]),D.useDebugValue(ce),i&&Tt(Z)&&w){if(!H$&&ib)throw new Error("Fallback data is required when using Suspense in SSR.");C.current=e,S.current=n,x.current=!1;const ve=y[w];if(!Tt(ve)){const _e=me(ve);NS(_e)}if(Tt(ie)){const _e=se(PS);Tt(ce)||(_e.status="fulfilled",_e.value=!0),NS(_e)}else throw ie}return{mutate:me,get data(){return V.data=!0,ce},get error(){return V.error=!0,ie},get isValidating(){return V.isValidating=!0,te},get isLoading(){return V.isLoading=!0,oe}}},G$=aoe(loe);class uoe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const doe=G$.default||G$,hoe="https://react-tweet.vercel.app";async function foe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new uoe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const poe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=doe(()=>e||t?[e||t&&`${hoe}/api/tweet/${t}`,n]:null,foe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},goe=({id:t,apiUrl:e,fallback:n=m.jsx(Aie,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=poe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||vie;return m.jsx(l,{error:i?i(a):a})}return m.jsx(yie,{tweet:o,components:r})};var yC={exports:{}},S9={},I9={exports:{}},moe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yoe=moe,woe=yoe;function T9(){}function N9(){}N9.resetWarningCache=T9;var boe=function(){function t(r,s,i,o,a,c){if(c!==woe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:N9,resetWarningCache:T9};return n.PropTypes=n,n};I9.exports=boe();var P9=I9.exports;function k9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=k9(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function V$(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=k9(t))&&(r&&(r+=" "),r+=e);return r}const voe=Object.freeze(Object.defineProperty({__proto__:null,clsx:V$,default:V$},Symbol.toStringTag,{value:"Module"})),Eoe=Fx(voe);var Bn={},ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.dontSetMe=Soe;ac.findInArray=_oe;ac.int=Aoe;ac.isFunction=xoe;ac.isNum=Coe;function _oe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function xoe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Coe(t){return typeof t=="number"&&!isNaN(t)}function Aoe(t){return parseInt(t,10)}function Soe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.browserPrefixToKey=R9;zf.browserPrefixToStyle=Ioe;zf.default=void 0;zf.getPrefix=O9;const kS=["Moz","Webkit","O","ms"];function O9(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<kS.length;r++)if(R9(e,kS[r])in n)return kS[r];return""}function R9(t,e){return e?"".concat(e).concat(Toe(t)):t}function Ioe(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function Toe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}zf.default=O9();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.addClassName=U9;Bn.addEvent=koe;Bn.addUserSelectStyles=zoe;Bn.createCSSTransform=Loe;Bn.createSVGTransform=Moe;Bn.getTouch=joe;Bn.getTouchIdentifier=Foe;Bn.getTranslation=qO;Bn.innerHeight=$oe;Bn.innerWidth=Uoe;Bn.matchesSelector=$9;Bn.matchesSelectorAndParentsTo=Poe;Bn.offsetXYFromParent=Boe;Bn.outerHeight=Roe;Bn.outerWidth=Doe;Bn.removeClassName=B9;Bn.removeEvent=Ooe;Bn.removeUserSelectStyles=Hoe;var Ui=ac,K$=Noe(zf);function D9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(D9=function(r){return r?n:e})(t)}function Noe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=D9(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let N1="";function $9(t,e){return N1||(N1=(0,Ui.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ui.isFunction)(t[n])})),(0,Ui.isFunction)(t[N1])?t[N1](e):!1}function Poe(t,e,n){let r=t;do{if($9(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function koe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Ooe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Roe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ui.int)(n.borderTopWidth),e+=(0,Ui.int)(n.borderBottomWidth),e}function Doe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ui.int)(n.borderLeftWidth),e+=(0,Ui.int)(n.borderRightWidth),e}function $oe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ui.int)(n.paddingTop),e-=(0,Ui.int)(n.paddingBottom),e}function Uoe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ui.int)(n.paddingLeft),e-=(0,Ui.int)(n.paddingRight),e}function Boe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Loe(t,e){const n=qO(t,e,"px");return{[(0,K$.browserPrefixToKey)("transform",K$.default)]:n}}function Moe(t,e){return qO(t,e,"")}function qO(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function joe(t,e){return t.targetTouches&&(0,Ui.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Ui.findInArray)(t.changedTouches,n=>e===n.identifier)}function Foe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function zoe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&U9(t.body,"react-draggable-transparent-selection")}function Hoe(t){if(t)try{if(t.body&&B9(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function U9(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function B9(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.canDragX=Goe;cc.canDragY=Voe;cc.createCoreData=Qoe;cc.createDraggableData=Joe;cc.getBoundPosition=Woe;cc.getControlPosition=Koe;cc.snapToGrid=qoe;var bi=ac,ng=Bn;function Woe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Yoe(r);const s=GO(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,bi.int)(u.paddingLeft)+(0,bi.int)(l.marginLeft),top:-s.offsetTop+(0,bi.int)(u.paddingTop)+(0,bi.int)(l.marginTop),right:(0,ng.innerWidth)(c)-(0,ng.outerWidth)(s)-s.offsetLeft+(0,bi.int)(u.paddingRight)-(0,bi.int)(l.marginRight),bottom:(0,ng.innerHeight)(c)-(0,ng.outerHeight)(s)-s.offsetTop+(0,bi.int)(u.paddingBottom)-(0,bi.int)(l.marginBottom)}}return(0,bi.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,bi.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,bi.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,bi.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function qoe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Goe(t){return t.props.axis==="both"||t.props.axis==="x"}function Voe(t){return t.props.axis==="both"||t.props.axis==="y"}function Koe(t,e,n){const r=typeof e=="number"?(0,ng.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=GO(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,ng.offsetXYFromParent)(r||t,i,n.props.scale)}function Qoe(t,e,n){const r=!(0,bi.isNum)(t.lastX),s=GO(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Joe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Yoe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function GO(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var wC={},bC={};Object.defineProperty(bC,"__esModule",{value:!0});bC.default=Zoe;function Zoe(){}Object.defineProperty(wC,"__esModule",{value:!0});wC.default=void 0;var OS=eae(D),Ds=VO(P9),Xoe=VO(dO),Jr=Bn,Al=cc,RS=ac,Gy=VO(bC);function VO(t){return t&&t.__esModule?t:{default:t}}function L9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(L9=function(r){return r?n:e})(t)}function eae(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=L9(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function fs(t,e,n){return e=tae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tae(t){var e=nae(t,"string");return typeof e=="symbol"?e:String(e)}function nae(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const To={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Sl=To.mouse,vC=class extends OS.Component{constructor(){super(...arguments),fs(this,"dragging",!1),fs(this,"lastX",NaN),fs(this,"lastY",NaN),fs(this,"touchIdentifier",null),fs(this,"mounted",!1),fs(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Jr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Jr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,Jr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Al.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Al.createCoreData)(this,o,a);(0,Gy.default)("DraggableCore: handleDragStart: %j",c),(0,Gy.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Jr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Jr.addEvent)(r,Sl.move,this.handleDrag),(0,Jr.addEvent)(r,Sl.stop,this.handleDragStop))}),fs(this,"handleDrag",e=>{const n=(0,Al.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Al.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Al.createCoreData)(this,r,s);if((0,Gy.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),fs(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Al.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Al.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Al.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Jr.removeUserSelectStyles)(a.ownerDocument),(0,Gy.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Gy.default)("DraggableCore: Removing handlers"),(0,Jr.removeEvent)(a.ownerDocument,Sl.move,this.handleDrag),(0,Jr.removeEvent)(a.ownerDocument,Sl.stop,this.handleDragStop))}),fs(this,"onMouseDown",e=>(Sl=To.mouse,this.handleDragStart(e))),fs(this,"onMouseUp",e=>(Sl=To.mouse,this.handleDragStop(e))),fs(this,"onTouchStart",e=>(Sl=To.touch,this.handleDragStart(e))),fs(this,"onTouchEnd",e=>(Sl=To.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Jr.addEvent)(e,To.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Jr.removeEvent)(n,To.mouse.move,this.handleDrag),(0,Jr.removeEvent)(n,To.touch.move,this.handleDrag),(0,Jr.removeEvent)(n,To.mouse.stop,this.handleDragStop),(0,Jr.removeEvent)(n,To.touch.stop,this.handleDragStop),(0,Jr.removeEvent)(e,To.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Jr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:Xoe.default.findDOMNode(this)}render(){return OS.cloneElement(OS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};wC.default=vC;fs(vC,"displayName","DraggableCore");fs(vC,"propTypes",{allowAnyClick:Ds.default.bool,children:Ds.default.node.isRequired,disabled:Ds.default.bool,enableUserSelectHack:Ds.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ds.default.arrayOf(Ds.default.number),handle:Ds.default.string,cancel:Ds.default.string,nodeRef:Ds.default.object,onStart:Ds.default.func,onDrag:Ds.default.func,onStop:Ds.default.func,onMouseDown:Ds.default.func,scale:Ds.default.number,className:RS.dontSetMe,style:RS.dontSetMe,transform:RS.dontSetMe});fs(vC,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(D),n=u(P9),r=u(dO),s=u(Eoe),i=Bn,o=cc,a=ac,c=u(wC),l=u(bC);function u(v){return v&&v.__esModule?v:{default:v}}function d(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,x=new WeakMap;return(d=function(_){return _?x:b})(v)}function h(v,b){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var x=d(b);if(x&&x.has(v))return x.get(v);var _={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in v)if(S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)){var T=C?Object.getOwnPropertyDescriptor(v,S):null;T&&(T.get||T.set)?Object.defineProperty(_,S,T):_[S]=v[S]}return _.default=v,x&&x.set(v,_),_}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},f.apply(this,arguments)}function p(v,b,x){return b=g(b),b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function g(v){var b=y(v,"string");return typeof b=="symbol"?b:String(b)}function y(v,b){if(typeof v!="object"||v===null)return v;var x=v[Symbol.toPrimitive];if(x!==void 0){var _=x.call(v,b);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(v)}class w extends e.Component{static getDerivedStateFromProps(b,x){let{position:_}=b,{prevPropsPosition:C}=x;return _&&(!C||_.x!==C.x||_.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:C}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(b){super(b),p(this,"onDragStart",(x,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(x,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(x,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const C=(0,o.createDraggableData)(this,_),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:A,y:P}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,j]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=j,S.slackX=this.state.slackX+(A-S.x),S.slackY=this.state.slackY+(P-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(x,C)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(x,_)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:A,y:P}=this.props.position;S.x=A,S.y=P}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var b,x;return(b=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&b!==void 0?b:r.default.findDOMNode(this)}render(){const{axis:b,bounds:x,children:_,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:T,defaultClassNameDragged:A,position:P,positionOffset:R,scale:j,...z}=this.props;let V={},I=null;const L=!!!P||this.state.dragging,U=P||C,$={x:(0,o.canDragX)(this)&&L?this.state.x:U.x,y:(0,o.canDragY)(this)&&L?this.state.y:U.y};this.state.isElementSVG?I=(0,i.createSVGTransform)($,R):V=(0,i.createCSSTransform)($,R);const M=(0,s.default)(_.props.className||"",S,{[T]:this.state.dragging,[A]:this.state.dragged});return e.createElement(c.default,f({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:M,style:{..._.props.style,...V},transform:I}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(S9);const{default:M9,DraggableCore:rae}=S9;yC.exports=M9;yC.exports.default=M9;yC.exports.DraggableCore=rae;var sae=yC.exports;const Iv=Lf(sae);function Tn(){return Tn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tn.apply(null,arguments)}function j9(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var F9={exports:{}},Zt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r=typeof Symbol=="function"&&Symbol.for,KO=_r?Symbol.for("react.element"):60103,QO=_r?Symbol.for("react.portal"):60106,EC=_r?Symbol.for("react.fragment"):60107,_C=_r?Symbol.for("react.strict_mode"):60108,xC=_r?Symbol.for("react.profiler"):60114,CC=_r?Symbol.for("react.provider"):60109,AC=_r?Symbol.for("react.context"):60110,JO=_r?Symbol.for("react.async_mode"):60111,SC=_r?Symbol.for("react.concurrent_mode"):60111,IC=_r?Symbol.for("react.forward_ref"):60112,TC=_r?Symbol.for("react.suspense"):60113,iae=_r?Symbol.for("react.suspense_list"):60120,NC=_r?Symbol.for("react.memo"):60115,PC=_r?Symbol.for("react.lazy"):60116,oae=_r?Symbol.for("react.block"):60121,aae=_r?Symbol.for("react.fundamental"):60117,cae=_r?Symbol.for("react.responder"):60118,lae=_r?Symbol.for("react.scope"):60119;function zi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case KO:switch(t=t.type,t){case JO:case SC:case EC:case xC:case _C:case TC:return t;default:switch(t=t&&t.$$typeof,t){case AC:case IC:case PC:case NC:case CC:return t;default:return e}}case QO:return e}}}function z9(t){return zi(t)===SC}Zt.AsyncMode=JO;Zt.ConcurrentMode=SC;Zt.ContextConsumer=AC;Zt.ContextProvider=CC;Zt.Element=KO;Zt.ForwardRef=IC;Zt.Fragment=EC;Zt.Lazy=PC;Zt.Memo=NC;Zt.Portal=QO;Zt.Profiler=xC;Zt.StrictMode=_C;Zt.Suspense=TC;Zt.isAsyncMode=function(t){return z9(t)||zi(t)===JO};Zt.isConcurrentMode=z9;Zt.isContextConsumer=function(t){return zi(t)===AC};Zt.isContextProvider=function(t){return zi(t)===CC};Zt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===KO};Zt.isForwardRef=function(t){return zi(t)===IC};Zt.isFragment=function(t){return zi(t)===EC};Zt.isLazy=function(t){return zi(t)===PC};Zt.isMemo=function(t){return zi(t)===NC};Zt.isPortal=function(t){return zi(t)===QO};Zt.isProfiler=function(t){return zi(t)===xC};Zt.isStrictMode=function(t){return zi(t)===_C};Zt.isSuspense=function(t){return zi(t)===TC};Zt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===EC||t===SC||t===xC||t===_C||t===TC||t===iae||typeof t=="object"&&t!==null&&(t.$$typeof===PC||t.$$typeof===NC||t.$$typeof===CC||t.$$typeof===AC||t.$$typeof===IC||t.$$typeof===aae||t.$$typeof===cae||t.$$typeof===lae||t.$$typeof===oae)};Zt.typeOf=zi;F9.exports=Zt;var uae=F9.exports,YO=uae,dae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hae={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},H9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZO={};ZO[YO.ForwardRef]=fae;ZO[YO.Memo]=H9;function Q$(t){return YO.isMemo(t)?H9:ZO[t.$$typeof]||dae}var pae=Object.defineProperty,gae=Object.getOwnPropertyNames,J$=Object.getOwnPropertySymbols,mae=Object.getOwnPropertyDescriptor,yae=Object.getPrototypeOf,Y$=Object.prototype;function W9(t,e,n){if(typeof e!="string"){if(Y$){var r=yae(e);r&&r!==Y$&&W9(t,r,n)}var s=gae(e);J$&&(s=s.concat(J$(e)));for(var i=Q$(t),o=Q$(e),a=0;a<s.length;++a){var c=s[a];if(!hae[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=mae(e,c);try{pae(t,c,l)}catch{}}}}return t}var wae=W9;const bae=Lf(wae);var q9={};Object.defineProperty(q9,"__esModule",{value:!0});q9.default=vae;function vae(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function P1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W_(){return W_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W_.apply(this,arguments)}function Eae(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Il(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ae(t){var e=function(n){Eae(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,P1(Il(Il(i)),"cachedTheme",void 0),P1(Il(Il(i)),"lastOuterTheme",void 0),P1(Il(Il(i)),"lastTheme",void 0),P1(Il(Il(i)),"renderProvider",function(l){var u=i.props.children;return Ri.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?W_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Ri.createElement(t.Consumer,null,this.renderProvider):null},r}(Ri.Component);return e}function xae(t){return function(n){var r=Ri.forwardRef(function(s,i){return Ri.createElement(t.Consumer,null,function(o){return Ri.createElement(n,W_({theme:o,ref:i},s))})});return bae(r,n),r}}function Cae(t){var e=function(){var r=Ri.useContext(t);return r};return e}function Aae(t){return{context:t,withTheme:xae(t),useTheme:Cae(t),ThemeProvider:_ae(t)}}var G9=D.createContext();Aae(G9);var Z$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py=(typeof window>"u"?"undefined":Z$(window))==="object"&&(typeof document>"u"?"undefined":Z$(document))==="object"&&document.nodeType===9;function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function Sae(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Iae(t){var e=Sae(t,"string");return ob(e)=="symbol"?e:e+""}function Tae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Iae(r.key),r)}}function XO(t,e,n){return e&&Tae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aN(t,e){return aN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},aN(t,e)}function V9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,aN(t,e)}function X$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Nae={}.constructor;function cN(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(cN);if(t.constructor!==Nae)return t;var e={};for(var n in t)e[n]=cN(t[n]);return e}function kC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=cN(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var e8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},nf=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=e8(e[r]," ");else n=e8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function gy(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Vy(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function ab(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=gy(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Vy(f+":"+u+nf(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=Vy(g+":"+u+nf(y)+";",o))}for(var w in e){var v=e[w];v!=null&&w!=="fallbacks"&&(r&&(r+=l),r+=Vy(w+":"+u+nf(v)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Vy(""+t+u+"{"+r,o)+Vy("}",o))}var Pae=/([[\].#*$><+~=|^:(),"'`\s])/g,t8=typeof CSS<"u"&&CSS.escape,eR=function(t){return t8?t8(t):t.replace(Pae,"\\$1")},K9=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),lN=function(t){V9(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(X$(X$(o)),l),o.selectorText="."+eR(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=nf(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Tn({},s,{allowEmpty:!0}):s;return ab(this.selectorText,this.style,a)},XO(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(K9),kae={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new lN(e,n,r)}},DS={indent:1,children:!0},Oae=/@([\w-]+)/,Rae=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Oae);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new OC(Tn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=DS);var s=gy(r),i=s.linebreak;if(r.indent==null&&(r.indent=DS.indent),r.children==null&&(r.children=DS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Dae=/@container|@media|@supports\s+/,$ae={onCreateRule:function(e,n,r){return Dae.test(e)?new Rae(e,n,r):null}},$S={indent:1,children:!0},Uae=/@keyframes\s+([\w-]+)/,uN=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Uae);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:eR(c(this,a)),this.rules=new OC(Tn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Tn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=$S);var s=gy(r),i=s.linebreak;if(r.indent==null&&(r.indent=$S.indent),r.children==null&&(r.children=$S.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Bae=/@keyframes\s+/,Lae=/\$([\w-]+)/g,dN=function(e,n){return typeof e=="string"?e.replace(Lae,function(r,s){return s in n?n[s]:r}):e},n8=function(e,n,r){var s=e[n],i=dN(s,r);i!==s&&(e[n]=i)},Mae={onCreateRule:function(e,n,r){return typeof e=="string"&&Bae.test(e)?new uN(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&n8(e,"animation-name",r.keyframes),"animation"in e&&n8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return dN(e,s.keyframes);case"animation-name":return dN(e,s.keyframes);default:return e}}},jae=function(t){V9(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Tn({},s,{allowEmpty:!0}):s;return ab(this.key,this.style,a)},e}(K9),Fae={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new jae(e,n,r):null}},zae=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=gy(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=ab(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return ab(this.at,this.style,r)},t}(),Hae=/@font-face/,Wae={onCreateRule:function(e,n,r){return Hae.test(e)?new zae(e,n,r):null}},qae=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return ab(this.key,this.style,r)},t}(),Gae={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new qae(e,n,r):null}},Vae=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Kae={"@charset":!0,"@import":!0,"@namespace":!0},Qae={onCreateRule:function(e,n,r){return e in Kae?new Vae(e,n,r):null}},r8=[kae,$ae,Mae,Fae,Wae,Gae,Qae],Jae={process:!0},s8={force:!0,process:!0},OC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Tn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+eR(this.classes[p]));var g=kC(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Tn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof lN?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof uN&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof lN?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof uN&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Jae);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,s8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,s8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=gy(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),Q9=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Tn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new OC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Yae=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Zae=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=j9(s,["attached"]),a=gy(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},XO(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),J0=new Zae,hN=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),fN="2f1acc6c3a606b082e5eef5e54414ffb";hN[fN]==null&&(hN[fN]=0);var i8=hN[fN]++,o8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+i8+a+n:c+i.key+"-"+i8+(a?"-"+a:"")+"-"+n};return r},J9=function(e){var n;return function(){return n||(n=e()),n}},Xae=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},ece=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=nf(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},tce=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},nce=function(e,n){return e.selectorText=n,e.selectorText===n},Y9=J9(function(){return document.querySelector("head")});function rce(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function sce(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function ice(t){for(var e=Y9(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function oce(t){var e=J0.registry;if(e.length>0){var n=rce(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=sce(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=ice(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function ace(t,e){var n=e.insertionPoint,r=oce(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}Y9().appendChild(t)}var cce=J9(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),a8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},c8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},lce=function(){var e=document.createElement("style");return e.textContent=`
`,e},uce=function(){function t(n){this.getPropertyValue=Xae,this.setProperty=ece,this.removeProperty=tce,this.setSelector=nce,this.hasInsertedRules=!1,this.cssRules=[],n&&J0.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||lce(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=cce();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){ace(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=c8(i,s);if(a=a8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=c8(i,s),d=a8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof Q9&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),dce=0,hce=function(){function t(n){this.id=dce++,this.version="10.10.0",this.plugins=new Yae,this.options={id:{minify:!1},createGenerateId:o8,Renderer:py?uce:null,plugins:[]},this.generateId=o8({minify:!1});for(var r=0;r<r8.length;r++)this.plugins.use(r8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Tn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=J0.index===0?0:J0.index+1);var a=new Q9(r,Tn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),J0.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Tn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=kC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),Z9=function(e){return new hce(e)},l8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},XO(t,[{key:"size",get:function(){return this.length}}]),t}(),tR=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function X9(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=X9(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */Z9();var e7=Date.now(),US="fnValues"+e7,BS="fnStyle"+ ++e7,fce=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=kC(n,{},s);return i[BS]=r,i},onProcessStyle:function(n,r){if(US in r||BS in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[US]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[BS];a&&(o.style=a(n)||{});var c=o[US];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function pce(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var $p;typeof self<"u"?$p=self:typeof window<"u"?$p=window:typeof global<"u"?$p=global:typeof module<"u"?$p=module:$p=Function("return this")();var u8=pce($p),d8=function(e){return e&&e[u8]&&e===e[u8]()},gce=function(e){return{onCreateRule:function(r,s,i){if(!d8(s))return null;var o=s,a=kC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!d8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},mce=/;\n/,yce=function(e){for(var n={},r=e.split(mce),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},wce=function(e){typeof e.style=="string"&&(e.style=yce(e.style))};function bce(){return{onProcessRule:wce}}var id="@global",pN="@global ",vce=function(){function t(n,r,s){this.type="global",this.at=id,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new OC(Tn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Ece=function(){function t(n,r,s){this.type="global",this.at=id,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(pN.length);this.rule=s.jss.createRule(i,r,Tn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),_ce=/\s*,\s*/g;function t7(t,e){for(var n=t.split(_ce),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function xce(t,e){var n=t.options,r=t.style,s=r?r[id]:null;if(s){for(var i in s)e.addRule(i,s[i],Tn({},n,{selector:t7(i,t.selector)}));delete r[id]}}function Cce(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,id.length)!==id)){var i=t7(s.substr(id.length),t.selector);e.addRule(i,r[s],Tn({},n,{selector:i})),delete r[s]}}function Ace(){function t(n,r,s){if(!n)return null;if(n===id)return new vce(n,r,s);if(n[0]==="@"&&n.substr(0,pN.length)===pN)return new Ece(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(xce(n,r),Cce(n,r))}return{onCreateRule:t,onProcessRule:e}}var BE=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},LS="extendCurrValue"+Date.now();function Sce(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];ph(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Tn({},t,{extend:l}):t.extend[c];ph(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){ph(t.extend.extend,e,n,r);continue}if(BE(t.extend[d])){d in r||(r[d]={}),ph(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Ice(t,e,n,r){for(var s in t)if(s!=="extend"){if(BE(r[s])&&BE(t[s])){ph(t[s],e,n,r[s]);continue}if(BE(t[s])){r[s]=ph(t[s],e,n);continue}r[s]=t[s]}}function ph(t,e,n,r){return r===void 0&&(r={}),Sce(t,e,n,r),Ice(t,e,n,r),r}function Tce(){function t(n,r,s){return"extend"in n?ph(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[LS])s.prop(i,null);return s[LS]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[LS]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var h8=/\s*,\s*/g,Nce=/&/g,Pce=/\$([\w-]+)/g;function kce(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(h8),a=s.split(h8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Nce,u):u+" "+h}return c}function n(s,i,o){if(o)return Tn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Tn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Pce,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Tn({},l,{selector:p})):c.addRule(g,s[d],Tn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function gN(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=gN(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return gN(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Oce(){function t(e,n){return"composes"in e&&(gN(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Rce=/[A-Z]/g,Dce=/^ms-/,MS={};function $ce(t){return"-"+t.toLowerCase()}function n7(t){if(MS.hasOwnProperty(t))return MS[t];var e=t.replace(Rce,$ce);return MS[t]=Dce.test(e)?"-"+e:e}function q_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:n7(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(q_):e.fallbacks=q_(t.fallbacks)),e}function Uce(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=q_(n[r]);return n}return q_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=n7(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ne=tR&&CSS?CSS.px:"px",k1=tR&&CSS?CSS.ms:"ms",op=tR&&CSS?CSS.percent:"%",Bce={"animation-delay":k1,"animation-duration":k1,"background-position":ne,"background-position-x":ne,"background-position-y":ne,"background-size":ne,border:ne,"border-bottom":ne,"border-bottom-left-radius":ne,"border-bottom-right-radius":ne,"border-bottom-width":ne,"border-left":ne,"border-left-width":ne,"border-radius":ne,"border-right":ne,"border-right-width":ne,"border-top":ne,"border-top-left-radius":ne,"border-top-right-radius":ne,"border-top-width":ne,"border-width":ne,"border-block":ne,"border-block-end":ne,"border-block-end-width":ne,"border-block-start":ne,"border-block-start-width":ne,"border-block-width":ne,"border-inline":ne,"border-inline-end":ne,"border-inline-end-width":ne,"border-inline-start":ne,"border-inline-start-width":ne,"border-inline-width":ne,"border-start-start-radius":ne,"border-start-end-radius":ne,"border-end-start-radius":ne,"border-end-end-radius":ne,margin:ne,"margin-bottom":ne,"margin-left":ne,"margin-right":ne,"margin-top":ne,"margin-block":ne,"margin-block-end":ne,"margin-block-start":ne,"margin-inline":ne,"margin-inline-end":ne,"margin-inline-start":ne,padding:ne,"padding-bottom":ne,"padding-left":ne,"padding-right":ne,"padding-top":ne,"padding-block":ne,"padding-block-end":ne,"padding-block-start":ne,"padding-inline":ne,"padding-inline-end":ne,"padding-inline-start":ne,"mask-position-x":ne,"mask-position-y":ne,"mask-size":ne,height:ne,width:ne,"min-height":ne,"max-height":ne,"min-width":ne,"max-width":ne,bottom:ne,left:ne,top:ne,right:ne,inset:ne,"inset-block":ne,"inset-block-end":ne,"inset-block-start":ne,"inset-inline":ne,"inset-inline-end":ne,"inset-inline-start":ne,"box-shadow":ne,"text-shadow":ne,"column-gap":ne,"column-rule":ne,"column-rule-width":ne,"column-width":ne,"font-size":ne,"font-size-delta":ne,"letter-spacing":ne,"text-decoration-thickness":ne,"text-indent":ne,"text-stroke":ne,"text-stroke-width":ne,"word-spacing":ne,motion:ne,"motion-offset":ne,outline:ne,"outline-offset":ne,"outline-width":ne,perspective:ne,"perspective-origin-x":op,"perspective-origin-y":op,"transform-origin":op,"transform-origin-x":op,"transform-origin-y":op,"transform-origin-z":op,"transition-delay":k1,"transition-duration":k1,"vertical-align":ne,"flex-basis":ne,"shape-margin":ne,size:ne,gap:ne,grid:ne,"grid-gap":ne,"row-gap":ne,"grid-row-gap":ne,"grid-column-gap":ne,"grid-template-rows":ne,"grid-template-columns":ne,"grid-auto-rows":ne,"grid-auto-columns":ne,"box-shadow-x":ne,"box-shadow-y":ne,"box-shadow-blur":ne,"box-shadow-spread":ne,"font-line-height":ne,"text-shadow-x":ne,"text-shadow-y":ne,"text-shadow-blur":ne};function r7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Lce=r7(Bce);function Y0(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Y0(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Y0(s,e[s],n);else for(var i in e)e[i]=Y0(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Lce[t];return o&&!(e===0&&o===ne)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Mce(t){t===void 0&&(t={});var e=r7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Y0(o,s[o],e);return s}function r(s,i){return Y0(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var jce={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Fce={position:!0,size:!0},O1={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},jS={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function zce(t,e,n){return t.map(function(r){return i7(r,e,n,!1,!0)})}function s7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?s7(t[0],e,n,r):typeof t[0]=="object"?zce(t,e,r):[t]}function i7(t,e,n,r,s){if(!(O1[e]||jS[e]))return[];var i=[];if(jS[e]&&(t=Hce(t,n,jS[e],r)),Object.keys(t).length)for(var o in O1[e]){if(t[o]){Array.isArray(t[o])?i.push(Fce[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}O1[e][o]!=null&&i.push(O1[e][o])}return!i.length||s?i:[i]}function Hce(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=cb((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function cb(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=cb(t.fallbacks[i],e,!0);continue}t[r]=s7(s,r,jce,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=cb(t.fallbacks,e,!0);continue}t[r]=i7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Wce(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=cb(e[r],n);return e}return cb(e,n)}return{onProcessStyle:t}}function mN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function qce(t){if(Array.isArray(t))return mN(t)}function Gce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vce(t,e){if(t){if(typeof t=="string")return mN(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mN(t,e):void 0}}function Kce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qce(t){return qce(t)||Gce(t)||Vce(t)||Kce()}var x0="",yN="",o7="",a7="",Jce=py&&"ontouchstart"in document.documentElement;if(py){var FS={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Yce=document.createElement("p"),zS=Yce.style,Zce="Transform";for(var HS in FS)if(HS+Zce in zS){x0=HS,yN=FS[HS];break}x0==="Webkit"&&"msHyphens"in zS&&(x0="ms",yN=FS.ms,a7="edge"),x0==="Webkit"&&"-apple-trailing-word"in zS&&(o7="apple")}var at={js:x0,css:yN,vendor:o7,browser:a7,isTouch:Jce};function Xce(t){return t[1]==="-"||at.js==="ms"?t:"@"+at.css+"keyframes"+t.substr(10)}var ele={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:at.js==="ms"?"-webkit-"+e:at.css+e}},tle={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:at.js==="Webkit"?at.css+"print-"+e:e}},nle=/[-\s]+(.)?/g;function rle(t,e){return e?e.toUpperCase():""}function nR(t){return t.replace(nle,rle)}function wd(t){return nR("-"+t)}var sle={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(at.js==="Webkit"){var r="mask-image";if(nR(r)in n)return e;if(at.js+wd(r)in n)return at.css+e}return e}},ile={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:at.vendor==="apple"&&!at.isTouch?at.css+e:e}},ole={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:at.css+e}},ale={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:at.css+e}},cle={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:at.js==="Webkit"||at.js==="ms"&&at.browser!=="edge"?at.css+e:e}},lle={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:at.js==="Moz"||at.js==="ms"||at.vendor==="apple"?at.css+e:e}},ule={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(at.js==="Webkit"){var r="WebkitColumn"+wd(e);return r in n?at.css+"column-"+e:!1}if(at.js==="Moz"){var s="page"+wd(e);return s in n?"page-"+e:!1}return!1}},dle={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(at.js==="Moz")return e;var r=e.replace("-inline","");return at.js+wd(r)in n?at.css+r:!1}},hle={supportedProperty:function(e,n){return nR(e)in n?e:!1}},fle={supportedProperty:function(e,n){var r=wd(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:at.js+r in n?at.css+e:at.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},ple={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:at.js==="ms"?""+at.css+e:e}},gle={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:at.js==="ms"?at.css+"scroll-chaining":e}},mle={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},yle={supportedProperty:function(e,n){var r=mle[e];return r&&at.js+wd(r)in n?at.css+r:!1}},c7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},wle=Object.keys(c7),ble=function(e){return at.css+e},vle={supportedProperty:function(e,n,r){var s=r.multiple;if(wle.indexOf(e)>-1){var i=c7[e];if(!Array.isArray(i))return at.js+wd(i)in n?at.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(at.js+wd(i[0])in n))return!1;return i.map(ble)}return!1}},l7=[ele,tle,sle,ile,ole,ale,cle,lle,ule,dle,hle,fle,ple,gle,yle,vle],f8=l7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Ele=l7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Qce(e.noPrefill)),t},[]),C0,Xd={};if(py){C0=document.createElement("p");var WS=window.getComputedStyle(document.documentElement,"");for(var qS in WS)isNaN(qS)||(Xd[WS[qS]]=WS[qS]);Ele.forEach(function(t){return delete Xd[t]})}function wN(t,e){if(e===void 0&&(e={}),!C0)return t;if(Xd[t]!=null)return Xd[t];(t==="transition"||t==="transform")&&(e[t]=t in C0.style);for(var n=0;n<f8.length&&(Xd[t]=f8[n](t,C0.style,e),!Xd[t]);n++);try{C0.style[t]=""}catch{return!1}return Xd[t]}var ap={},_le={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},xle=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Gl;function Cle(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?wN(e):", "+wN(n);return r||e||n}py&&(Gl=document.createElement("p"));function p8(t,e){var n=e;if(!Gl||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(ap[r]!=null)return ap[r];try{Gl.style[t]=n}catch{return ap[r]=!1,!1}if(_le[t])n=n.replace(xle,Cle);else if(Gl.style[t]===""&&(n=at.css+n,n==="-ms-flex"&&(Gl.style[t]="-ms-flexbox"),Gl.style[t]=n,Gl.style[t]===""))return ap[r]=!1,!1;return Gl.style[t]="",ap[r]=n,ap[r]}function Ale(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Xce(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=wN(i);c&&c!==i&&(a=!0);var l=!1,u=p8(c,nf(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return p8(i,nf(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Sle(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Ile=function(e){return e===void 0&&(e={}),{plugins:[fce(),gce(e.observable),bce(),Ace(),Tce(),kce(),Oce(),Uce(),Mce(e.defaultUnit),Wce(),Ale(),Sle()]}},Tle=Number.MIN_SAFE_INTEGER||-1e9,Nle=function(){return Tle++},Ple=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!py}),g8=new Map,rR=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new l8),r[n];var s=g8.get(n);return s||(s=new l8,g8.set(n,s)),s},m8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=rR(r,s);o.manage(i),r.registry&&r.registry.add(n)}},kle=function(e){if(e.sheet){var n=rR(e.context,e.index);n.unmanage(e.theme)}},Ole=Z9(Ile()),u7=new WeakMap,d7=function(e){return u7.get(e)},Rle=function(e,n){u7.set(e,n)},Dle=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function $le(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Tn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Ule=function(e){if(!e.context.disableStylesGeneration){var n=rR(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Ole,i=Dle(e),o=X9(i),a=s.createStyleSheet(i,$le(e,o!==null));return Rle(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Ble=function(e,n){for(var r in n)e.deleteRule(n[r])},Lle=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Mle=function(e,n){var r=d7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},jle=function(e,n){if(!n)return e.classes;var r=d7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function y8(t){return t?D.useEffect:Ri.useInsertionEffect||D.useLayoutEffect}var GS={},ha=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Nle():s,o=r.theming,a=r.name,c=j9(r,["index","theming","name"]),l=o&&o.context||G9,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||GS},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Ple),y=u(f&&f.theme),w=D.useMemo(function(){var _=Ule({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return _&&g.isSSR&&m8({index:i,context:g,sheet:_,theme:y}),[_,_?Mle(_,f):null]},[g,y]),v=w[0],b=w[1];y8(g.isSSR)(function(){v&&b&&!p.current&&Lle(f,v,b)},[f]),y8(g.isSSR)(function(){return v&&m8({index:i,context:g,sheet:v,theme:y}),function(){v&&(kle({index:i,context:g,sheet:v,theme:y}),b&&Ble(v,b))}},[v]);var x=D.useMemo(function(){return v&&b?jle(v,b):d},[v,b]);return D.useDebugValue(x),D.useDebugValue(y===GS?"No theme":y),D.useEffect(function(){p.current=!1}),x}};const Fle=ha({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function VS({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Fle(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(Iv,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const zle=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Ji({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=zle({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(Iv,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const KS=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Hle=80,Wle=80,qle=10,Gle=10,Vle=10,Kle=10,Qle=({onIconClick:t})=>{const e=KS.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Vle+d*(Hle+qle),y:Kle+u*(Wle+Gle)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(VS,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Ji,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:KS.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(VS,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Ji,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:KS.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(VS,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Jle=ha({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Yle=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=Jle({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function h7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function sR(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function f7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function iR(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function p7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function g7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function Zle(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const Xle=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),eue=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Xle({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:y}=l9();D.useEffect(()=>{t&&r&&w()},[t,r]);const w=async()=>{l(!0),g(null);try{const C=await h7(r);a(C);const S={};C.forEach(T=>{S[T.id]=0}),f(S)}catch(C){g(C.message)}finally{l(!1)}},v=(C,S)=>{f(T=>({...T,[C]:Math.max(0,S)}))},b=async()=>{const C=Object.entries(h).filter(([,S])=>S>0).map(([S,T])=>({id:S,quantity:T}));if(C.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await f7(r,C);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},x=(C,S)=>`${parseFloat(C)} ${S}`,_=()=>{n&&n()};return t?m.jsx(Iv,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(C=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:C.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(C.token_price,C.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",C.wallet_limit===4294967295?"Unlimited":C.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:C.wallet_limit===4294967295?999:C.wallet_limit,value:h[C.id]||0,onChange:S=>v(C.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},C.id))]}),m.jsx("button",{onClick:b,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},tue=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),nue=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},rue=({nft:t,onClose:e})=>{const n=tue(),r=D.useRef(null),s=nue(t.attributes);return m.jsx(Iv,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},sue=Symbol(),w8=Object.getPrototypeOf,bN=new WeakMap,iue=t=>t&&(bN.has(t)?bN.get(t):w8(t)===Object.prototype||w8(t)===Array.prototype),oue=t=>iue(t)&&t[sue]||null,b8=(t,e=!0)=>{bN.set(t,e)},G_={},QS=t=>typeof t=="object"&&t!==null,Xl=new WeakMap,A0=new WeakSet,aue=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>QS(l)&&!A0.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return b8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:y,configurable:!0};if(A0.has(g))b8(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(Xl.has(g)){const[v,b]=Xl.get(g);w.value=i(v,b(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!QS(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(A,P=++a[0])=>{d!==P&&(d=P,h.forEach(R=>R(A,P)))};let p=a[1];const g=(A=++a[1])=>(p!==A&&!h.size&&(p=A,w.forEach(([P])=>{const R=P[1](A);R>d&&(d=R)})),d),y=A=>(P,R)=>{const j=[...P];j[1]=[A,...j[1]],f(j,R)},w=new Map,v=(A,P)=>{if((G_?"production":void 0)!=="production"&&w.has(A))throw new Error("prop listener already exists");if(h.size){const R=P[3](y(A));w.set(A,[P,R])}else w.set(A,[P])},b=A=>{var P;const R=w.get(A);R&&(w.delete(A),(P=R[1])==null||P.call(R))},x=A=>(h.add(A),h.size===1&&w.forEach(([R,j],z)=>{if((G_?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const V=R[3](y(z));w.set(z,[R,V])}),()=>{h.delete(A),h.size===0&&w.forEach(([R,j],z)=>{j&&(j(),w.set(z,[R]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(_,{deleteProperty(A,P){const R=Reflect.get(A,P);b(P);const j=Reflect.deleteProperty(A,P);return j&&f(["delete",[P],R]),j},set(A,P,R,j){const z=Reflect.has(A,P),V=Reflect.get(A,P,j);if(z&&(t(V,R)||o.has(R)&&t(V,o.get(R))))return!0;b(P),QS(R)&&(R=oue(R)||R);let I=R;if(R instanceof Promise)R.then(N=>{R.status="fulfilled",R.value=N,f(["resolve",[P],N])}).catch(N=>{R.status="rejected",R.reason=N,f(["reject",[P],N])});else{!Xl.has(R)&&n(R)&&(I=c(R));const N=!A0.has(I)&&Xl.get(I);N&&v(P,N)}return Reflect.set(A,P,I,j),f(["set",[P],R,V]),!0}});o.set(l,S);const T=[_,g,i,x];return Xl.set(S,T),Reflect.ownKeys(l).forEach(A=>{const P=Object.getOwnPropertyDescriptor(l,A);"value"in P&&(S[A]=l[A],delete P.value,delete P.writable),Object.defineProperty(_,A,P)}),S})=>[c,Xl,A0,t,e,n,r,s,i,o,a],[cue]=aue();function fn(t={}){return cue(t)}function jr(t,e,n){const r=Xl.get(t);(G_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function lb(t,e){const n=Xl.get(t);(G_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function _f(t){return A0.add(t),t}function Fr(t,e,n,r){let s=t[e];return jr(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function lue(t){const e=fn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var v8={};const ae={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof v8<"u"?v8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},ub={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ae.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var uue=20,due=1,xf=1e6,E8=1e6,hue=-7,fue=21,pue=!1,Tv="[big.js] ",Hf=Tv+"Invalid ",RC=Hf+"decimal places",gue=Hf+"rounding mode",m7=Tv+"Division by zero",Yt={},Ya=void 0,mue=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function y7(){function t(e){var n=this;if(!(n instanceof t))return e===Ya?y7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Hf+"value");e=e===0&&1/e<0?"-0":String(e)}yue(n,e)}n.constructor=t}return t.prototype=Yt,t.DP=uue,t.RM=due,t.NE=hue,t.PE=fue,t.strict=pue,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function yue(t,e){var n,r,s;if(!mue.test(e))throw Error(Hf+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Wf(t,e,n,r){var s=t.c;if(n===Ya&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(gue);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Ya))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Ya||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function qf(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Yt.abs=function(){var t=new this.constructor(this);return t.s=1,t};Yt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Yt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>xf)throw Error(RC);if(!s[0])throw Error(m7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,w=t,v=w.c=[],b=0,x=o+(w.e=e.e-t.e)+1;for(w.s=i,i=x<0?0:x,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}v[b++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Ya)&&i--);return!v[0]&&b!=1&&(v.shift(),w.e--,x--),b>x&&Wf(w,x,n.RM,g[0]!==Ya),w};Yt.eq=function(t){return this.cmp(t)===0};Yt.gt=function(t){return this.cmp(t)>0};Yt.gte=function(t){return this.cmp(t)>-1};Yt.lt=function(t){return this.cmp(t)<0};Yt.lte=function(t){return this.cmp(t)<1};Yt.minus=Yt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Yt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(m7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Yt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Yt.plus=Yt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Yt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-E8||t>E8)throw Error(Hf+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Yt.prec=function(t,e){if(t!==~~t||t<1||t>xf)throw Error(Hf+"precision");return Wf(new this.constructor(this),t,e)};Yt.round=function(t,e){if(t===Ya)t=0;else if(t!==~~t||t<-xf||t>xf)throw Error(RC);return Wf(new this.constructor(this),t+this.e+1,e)};Yt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Tv+"No square root");i=Math.sqrt(+qf(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Wf(t,(s.DP-=4)+t.e+1,s.RM)};Yt.times=Yt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Yt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Ya){if(t!==~~t||t<0||t>xf)throw Error(RC);for(n=Wf(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return qf(n,!0,!!r)};Yt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Ya){if(t!==~~t||t<0||t>xf)throw Error(RC);for(n=Wf(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return qf(n,!1,!!r)};Yt[Symbol.for("nodejs.util.inspect.custom")]=Yt.toJSON=Yt.toString=function(){var t=this,e=t.constructor;return qf(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Yt.toNumber=function(){var t=+qf(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Tv+"Imprecise conversion");return t};Yt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Ya){if(t!==~~t||t<1||t>xf)throw Error(Hf+"precision");for(n=Wf(new r(n),t,e);n.c.length<t;)n.c.push(0)}return qf(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Yt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Tv+"valueOf disallowed");return qf(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ky=y7();const wue={bigNumber(t){return t?new Ky(t):new Ky(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ky(0);const n=new Ky(t),r=new Ky(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},bue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vue=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Eue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],_ue={getERC20Abi:t=>ae.USDT_CONTRACT_ADDRESSES.includes(t)?Eue:bue,getSwapAbi:()=>vue},Ti={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},tt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function JS(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Ze={setItem(t,e){S0()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(S0())return localStorage.getItem(t)||void 0},removeItem(t){S0()&&localStorage.removeItem(t)},clear(){S0()&&localStorage.clear()}};function S0(){return typeof window<"u"&&typeof localStorage<"u"}function Jc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var _8={};const YS=(typeof process<"u"&&typeof _8<"u"?_8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",w7=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],xue="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Kt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:YS,SECURE_SITE_DASHBOARD:`${YS}/dashboard`,SECURE_SITE_FAVICON:`${YS}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},xe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=xe.getActiveNamespace(),e=xe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Ze.setItem(tt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Ze.getItem(tt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Ze.removeItem(tt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Ze.setItem(tt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Ze.setItem(tt.ACTIVE_CAIP_NETWORK_ID,t),xe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Ze.getItem(tt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Ze.removeItem(tt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=JS(t);Ze.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=xe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Ze.setItem(tt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Ze.getItem(tt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=JS(t);Ze.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Ze.getItem(tt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=JS(t);return Ze.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Ze.setItem(tt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Ze.getItem(tt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Ze.removeItem(tt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Ze.getItem(tt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Ze.getItem(tt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Ze.setItem(tt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Ze.getItem(tt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Ze.getItem(tt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Ze.setItem(tt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=xe.getConnectedNamespaces();e.includes(t)||(e.push(t),xe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=xe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),xe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Ze.getItem(tt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Ze.setItem(tt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Ze.removeItem(tt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Ze.getItem(tt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=xe.getBalanceCache();Ze.setItem(tt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=xe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;xe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=xe.getBalanceCache();e[t.caipAddress]=t,Ze.setItem(tt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Ze.getItem(tt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=xe.getBalanceCache();Ze.setItem(tt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=xe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),xe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=xe.getNativeBalanceCache();e[t.caipAddress]=t,Ze.setItem(tt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Ze.getItem(tt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=xe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;xe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=xe.getEnsCache();e[t.address]=t,Ze.setItem(tt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=xe.getEnsCache();Ze.setItem(tt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Ze.getItem(tt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=xe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;xe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=xe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Ze.setItem(tt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=xe.getIdentityCache();Ze.setItem(tt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Ze.removeItem(tt.PORTFOLIO_CACHE),Ze.removeItem(tt.NATIVE_BALANCE_CACHE),Ze.removeItem(tt.ENS_CACHE),Ze.removeItem(tt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Ze.setItem(tt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Ze.getItem(tt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=xe.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ae.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Ze.setItem(tt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Ze.getItem(tt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=xe.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Ze.setItem(tt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Ze.getItem(tt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=xe.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Ze.setItem(tt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=xe.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Ze.setItem(tt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(xe.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Me={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Me.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Kt.TEN_SEC_MS:!0},isAllowedRetry(t,e=Kt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Me.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Kt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Me.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Me.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?xe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Me.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ae.W3M_API_URL},getBlockchainApiUrl(){return ae.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ae.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Kt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ae.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Qy(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Nv{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Qy(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Qy(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Qy(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Qy(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Qy(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Cue={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Kt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Me.isTelegram()){if(Me.isIos())return t.filter(e=>e!=="google");if(Me.isMac())return t.filter(e=>e!=="x");if(Me.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ve=fn({features:Kt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Kt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),fe={state:Ve,subscribeKey(t,e){return Fr(Ve,t,e)},setOptions(t){Object.assign(Ve,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Ve.remoteFeatures,...t};Ve.remoteFeatures=e,(n=Ve.remoteFeatures)!=null&&n.socials&&(Ve.remoteFeatures.socials=Cue.filterSocialsByPlatform(Ve.remoteFeatures.socials))},setFeatures(t){if(!t)return;Ve.features||(Ve.features=Kt.DEFAULT_FEATURES);const e={...Ve.features,...t};Ve.features=e},setProjectId(t){Ve.projectId=t},setCustomRpcUrls(t){Ve.customRpcUrls=t},setAllWallets(t){Ve.allWallets=t},setIncludeWalletIds(t){Ve.includeWalletIds=t},setExcludeWalletIds(t){Ve.excludeWalletIds=t},setFeaturedWalletIds(t){Ve.featuredWalletIds=t},setTokens(t){Ve.tokens=t},setTermsConditionsUrl(t){Ve.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ve.privacyPolicyUrl=t},setCustomWallets(t){Ve.customWallets=t},setIsSiweEnabled(t){Ve.isSiweEnabled=t},setIsUniversalProvider(t){Ve.isUniversalProvider=t},setSdkVersion(t){Ve.sdkVersion=t},setMetadata(t){Ve.metadata=t},setDisableAppend(t){Ve.disableAppend=t},setEIP6963Enabled(t){Ve.enableEIP6963=t},setDebug(t){Ve.debug=t},setEnableWalletConnect(t){Ve.enableWalletConnect=t},setEnableWalletGuide(t){Ve.enableWalletGuide=t},setEnableAuthLogger(t){Ve.enableAuthLogger=t},setEnableWallets(t){Ve.enableWallets=t},setPreferUniversalLinks(t){Ve.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Ve.hasMultipleAddresses=t},setSIWX(t){Ve.siwx=t},setConnectMethodsOrder(t){Ve.features={...Ve.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ve.features={...Ve.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ve.remoteFeatures={...Ve.remoteFeatures,socials:t}},setCollapseWallets(t){Ve.features={...Ve.features,collapseWallets:t}},setEnableEmbedded(t){Ve.enableEmbedded=t},setAllowUnsupportedChain(t){Ve.allowUnsupportedChain=t},setManualWCControl(t){Ve.manualWCControl=t},setEnableNetworkSwitch(t){Ve.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ve.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ve.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ve.universalProviderConfigOverride},getSnapshot(){return lb(Ve)}},Aue=Object.freeze({enabled:!0,events:[]}),Sue=new Nv({baseUrl:Me.getAnalyticsUrl(),clientId:null}),Iue=5,Tue=60*1e3,Tl=fn({...Aue}),Nue={state:Tl,subscribeKey(t,e){return Fr(Tl,t,e)},async sendError(t,e){if(!Tl.enabled)return;const n=Date.now();if(Tl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Tue}).length>=Iue)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Tl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=fe.state;await Sue.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Me.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Tl.enabled=!0},disable(){Tl.enabled=!1},clearEvents(){Tl.events=[]}};class zm extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,zm.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,zm):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function x8(t,e){const n=t instanceof zm?t:new zm(t instanceof Error?t.message:String(t),e,t);throw Nue.sendError(n,n.category),n}function Hi(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return x8(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return x8(a,e)}},n[r]=i}else n[r]=s}),n}const Fa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Pue={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Fa.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Fa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Fa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Fa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ae.CHAIN.SOLANA&&t===Fa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Fa.COINBASE.url}/dapp?cb_url=${r}`)}},gi=fn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kue={state:gi,subscribeNetworkImages(t){return jr(gi.networkImages,()=>t(gi.networkImages))},subscribeKey(t,e){return Fr(gi,t,e)},subscribe(t){return jr(gi,()=>t(gi))},setWalletImage(t,e){gi.walletImages[t]=e},setNetworkImage(t,e){gi.networkImages[t]=e},setChainImage(t,e){gi.chainImages[t]=e},setConnectorImage(t,e){gi.connectorImages={...gi.connectorImages,[t]:e}},setTokenImage(t,e){gi.tokenImages[t]=e},setCurrencyImage(t,e){gi.currencyImages[t]=e}},Qo=Hi(kue),Oue={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},ZS=fn({networkImagePromises:{}}),b7={async fetchWalletImage(t){if(t)return await We._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(ZS.networkImagePromises[t]||(ZS.networkImagePromises[t]=We._fetchNetworkImage(t)),await ZS.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Qo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Qo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Qo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Qo.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Qo.state.connectorImages[t.imageId]},getChainImage(t){return Qo.state.networkImages[Oue[t]]}},Nl=fn({message:"",variant:"info",open:!1}),Rue={state:Nl,subscribeKey(t,e){return Fr(Nl,t,e)},open(t,e){const{debug:n}=fe.state,{shortMessage:r,longMessage:s}=t;n&&(Nl.message=r,Nl.variant=e,Nl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Nl.open=!1,Nl.message="",Nl.variant="info"}},Vn=Hi(Rue),Due=Me.getAnalyticsUrl(),$ue=new Nv({baseUrl:Due,clientId:null}),Uue=["MODAL_CREATED"],dc=fn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Qt={state:dc,subscribe(t){return jr(dc,()=>t(dc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=fe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ee.state.address;if(Uue.includes(t.data.event)||typeof window>"u")return;await $ue.post({path:"/e",params:Qt.getSdkProperties(),body:{eventId:Me.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),dc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ae.HTTP_STATUS_CODES.FORBIDDEN&&!dc.reportedErrors.FORBIDDEN&&(Vn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${S0()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),dc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;dc.timestamp=Date.now(),dc.data=t,(e=fe.state.features)!=null&&e.analytics&&Qt._sendAnalyticsEvent(dc)}},Bue=Me.getApiUrl(),$s=new Nv({baseUrl:Bue,clientId:null}),Lue=40,C8=4,Mue=20,st=fn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),We={state:st,subscribeKey(t,e){return Fr(st,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=fe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return fe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${$s.baseUrl}/getWalletImage/${t}`,n=await $s.getBlob({path:e,params:We._getSdkProperties()});Qo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${$s.baseUrl}/public/getAssetImage/${t}`,n=await $s.getBlob({path:e,params:We._getSdkProperties()});Qo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${$s.baseUrl}/public/getAssetImage/${t}`,n=await $s.getBlob({path:e,params:We._getSdkProperties()});Qo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${$s.baseUrl}/public/getCurrencyImage/${t}`,n=await $s.getBlob({path:e,params:We._getSdkProperties()});Qo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${$s.baseUrl}/public/getTokenImage/${t}`,n=await $s.getBlob({path:e,params:We._getSdkProperties()});Qo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Me.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Fa.COINBASE.id?!0:B.state.activeChain==="solana"&&(n.id===Fa.SOLFLARE.id||n.id===Fa.PHANTOM.id)):t},async fetchProjectConfig(){return(await $s.get({path:"/appkit/v1/config",params:We._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await $s.get({path:"/projects/v1/origins",params:We._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ae.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ae.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=B.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!b7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>We._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Se.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>We._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>We._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>We._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];We._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Fa).map(o=>o.id));const r=await $s.get({path:"/getWallets",params:{...We._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:We._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=fe.state;if(t!=null&&t.length){const e={...We._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??C8,include:t},{data:n}=await We.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>We._fetchWalletImage(i))),st.featured=r,st.allFeatured=r}},async fetchRecommendedWallets(){try{st.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=fe.state,r=[...e??[],...n??[]].filter(Boolean),s=B.getRequestedCaipNetworkIds().join(","),i={page:1,entries:C8,include:t,exclude:r,chains:s},{data:o,count:a}=await We.fetchWallets(i),c=xe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>We._fetchWalletImage(d))),st.recommended=o,st.allRecommended=o,st.count=a??0}catch{}finally{st.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=fe.state,s=B.getRequestedCaipNetworkIds().join(","),i=[...st.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Lue,include:e,exclude:i,chains:s},{data:a,count:c}=await We.fetchWallets(o),l=a.slice(0,Mue).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>We._fetchWalletImage(u))),st.wallets=Me.uniqueBy([...st.wallets,...We._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),st.count=c>st.count?c:st.count,st.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await We.fetchWallets(e);n&&n.forEach(r=>{st.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=fe.state,s=B.getRequestedCaipNetworkIds().join(",");st.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await We.fetchWallets(i);Qt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>We._fetchWalletImage(c)),Me.wait(300)]),st.search=We._filterOutExtensions(o)},initPromise(t,e){const n=st.promises[t];return n||(st.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&We.initPromise("connectorImages",We.fetchConnectorImages),e&&We.initPromise("featuredWallets",We.fetchFeaturedWallets),n&&We.initPromise("recommendedWallets",We.fetchRecommendedWallets),r&&We.initPromise("networkImages",We.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=fe.state.features)!=null&&t.analytics&&We.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await $s.get({path:"/getAnalyticsConfig",params:We._getSdkProperties()});fe.setFeatures({analytics:t})}catch{fe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){st.featured=st.allFeatured,st.recommended=st.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");st.featured=st.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),st.recommended=st.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),st.filteredWallets=st.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){st.filteredWallets=[]},setFilterByNamespace(t){if(!t){st.featured=st.allFeatured,st.recommended=st.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");st.featured=st.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),st.recommended=st.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),st.filteredWallets=st.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Xt=fn({view:"Connect",history:["Connect"],transactionStack:[]}),jue={state:Xt,subscribeKey(t,e){return Fr(Xt,t,e)},pushTransactionStack(t){Xt.transactionStack.push(t)},popTransactionStack(t){const e=Xt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ye.goBack();break;case"cancel":s==null||s(),Ye.goBack();break}},push(t,e){t!==Xt.view&&(Xt.view=t,Xt.history.push(t),Xt.data=e)},reset(t,e){Xt.view=t,Xt.history=[t],Xt.data=e},replace(t,e){Xt.history.at(-1)===t||(Xt.view=t,Xt.history[Xt.history.length-1]=t,Xt.data=e)},goBack(){var r;const t=B.state.activeCaipAddress,e=Ye.state.view==="ConnectingFarcaster",n=!t&&e;if(Xt.history.length>1){Xt.history.pop();const[s]=Xt.history.slice(-1);s&&(t&&s==="Connect"?Xt.view="Account":Xt.view=s)}else Ft.close();(r=Xt.data)!=null&&r.wallet&&(Xt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ee.setFarcasterUrl(void 0,B.state.activeChain);const a=Se.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=lb(fe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Xt.history.length>1){Xt.history=Xt.history.slice(0,t+1);const[e]=Xt.history.slice(-1);e&&(Xt.view=e)}},goBackOrCloseModal(){Ye.state.history.length>1?Ye.goBack():Ft.close()}},Ye=Hi(jue),hc=fn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),vN={state:hc,subscribe(t){return jr(hc,()=>t(hc))},setThemeMode(t){hc.themeMode=t;try{const e=Se.getAuthConnector();if(e){const n=vN.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Jc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){hc.themeVariables={...hc.themeVariables,...t};try{const e=Se.getAuthConnector();if(e){const n=vN.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Jc(hc.themeVariables,hc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return lb(hc)}},Js=Hi(vN),v7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Pt=fn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...v7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Fue={state:Pt,subscribe(t){return jr(Pt,()=>{t(Pt)})},subscribeKey(t,e){return Fr(Pt,t,e)},initialize(t){t.forEach(e=>{const n=xe.getConnectedConnectorId(e);n&&Se.setConnectorId(n,e)})},setActiveConnector(t){t&&(Pt.activeConnector=_f(t))},setConnectors(t){t.filter(s=>!Pt.allConnectors.some(i=>i.id===s.id&&Se.getConnectorName(i.name)===Se.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Pt.allConnectors.push(_f(s))});const n=Se.getEnabledNamespaces(),r=Se.getEnabledConnectors(n);Pt.connectors=Se.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Pt.filterByNamespaceMap).forEach(e=>{Pt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Pt.filterByNamespaceMap[e]=!0}),Se.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Pt.filterByNamespaceMap[t]=e,Se.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Se.getEnabledNamespaces(),e=Se.getEnabledConnectors(t),n=Se.areAllNamespacesEnabled();Pt.connectors=Se.mergeMultiChainConnectors(e),n?We.clearFilterByNamespaces():We.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Pt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Pt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Pt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Se.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ae.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Se.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ae.CONNECTOR_ID.AUTH){const s=t,i=lb(fe.state),o=Js.getSnapshot().themeMode,a=Js.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Jc(a,o)}),Se.setConnectors([t])}else Se.setConnectors([t])},getAuthConnector(t){var r;const e=t||B.state.activeChain,n=Pt.connectors.find(s=>s.id===ae.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Pt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Pt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Pt.allConnectors.filter(r=>r.chain===B.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=lb(fe.state),r=Js.getSnapshot().themeMode,s=Js.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Jc(s,r)})},getConnectorsByNamespace(t){const e=Pt.allConnectors.filter(n=>n.chain===t);return Se.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Se.getConnector(t.id,t.rdns),n=B.state.activeChain;Pue.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ye.push("ConnectingExternal",{connector:e}):Ye.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Se.getConnectorsByNamespace(t):Se.mergeMultiChainConnectors(Pt.allConnectors)},setFilterByNamespace(t){Pt.filterByNamespace=t,Pt.connectors=Se.getConnectors(t),We.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Pt.activeConnectorIds={...Pt.activeConnectorIds,[e]:t},xe.setConnectedConnectorId(e,t))},removeConnectorId(t){Pt.activeConnectorIds={...Pt.activeConnectorIds,[t]:void 0},xe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Pt.activeConnectorIds[t]},isConnected(t){return t?!!Pt.activeConnectorIds[t]:Object.values(Pt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Pt.activeConnectorIds={...v7}}},Se=Hi(Fue),db={getConnectionStatus(t,e){const n=Se.state.activeConnectorIds[e],r=Re.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===ae.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=Re.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=Se.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>Se.getConnectorById(a.connectorId)),o=db.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var Hm={};const zue="https://secure.walletconnect.org/sdk",Hue=(typeof process<"u"&&typeof Hm<"u"?Hm.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||zue,Wue=(typeof process<"u"&&typeof Hm<"u"?Hm.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",que=(typeof process<"u"&&typeof Hm<"u"?Hm.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ue={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Er={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Gue=1e3,Gc={checkNamespaceConnectorId(t,e){return Se.getConnectorId(t)===e},isSocialProvider(t){return Kt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Se.setActiveConnector(e),s==null||s(Me.isMobile()&&t),r){const l=Ft.subscribeKey("open",u=>{u||(Ye.state.view!==r&&Ye.replace(r),l(),a(new Error("Modal closed")))})}const c=B.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Ft.close(),c(),o(Ti.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=B.subscribeKey("activeCaipAddress",s=>{s&&(Ft.close(),r(),e(Ti.parseCaipAddress(s)))});Re.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Ee.state.socialWindow,i=Ee.state.socialProvider,o=!1,a=null;const c=B.subscribeKey("activeCaipAddress",l=>{l&&(e&&Ft.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ae.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Se.getAuthConnector();if(g&&!o){s&&(s.close(),Ee.setSocialWindow(void 0,B.state.activeChain),s=Ee.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&Qt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(y),i){xe.setConnectedSocialProvider(i),await Re.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=B.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Ti.parseCaipAddress(w)),Qt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Qt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Qt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Ee.setSocialProvider(t,B.state.activeChain),i=Ee.state.socialProvider,Qt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Ft.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Se.getAuthConnector();if(p&&!Ee.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Ee.setFarcasterUrl(g,B.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Se.getAuthConnector();a=Me.returnOpenHref(`${ae.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Ee.setSocialWindow(a,B.state.activeChain),s=Ee.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Ft.subscribeKey("open",c=>{c||(Ye.state.view!==e&&Ye.replace(e),a(),i(new Error("Modal closed")))})}const o=B.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Ft.close(),o(),s(Ti.parseCaipAddress(a)))})})},async updateEmail(){const t=xe.getConnectedConnectorId(B.state.activeChain),e=Se.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ae.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ye.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Ft.close(),clearInterval(i),o(),r({email:a}))},Gue),o=Ft.subscribeKey("open",a=>{a||(Ye.state.view!=="Connect"&&Ye.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return B.checkIfSmartAccountEnabled()&&((n=Ee.state.preferredAccountTypes)==null?void 0:n[t])===Er.ACCOUNT_TYPES.EOA}},Kd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Xn=fn({...Kd}),Vue={state:Xn,subscribeKey(t,e){return Fr(Xn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Me.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Xn.message=Kd.message,Xn.variant=Kd.variant,Xn.svg=Kd.svg,Xn.open=Kd.open,Xn.autoClose=Kd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Kd.autoClose}){Xn.open?(Xn.open=!1,setTimeout(()=>{Xn.message=t,Xn.variant=n,Xn.svg=e,Xn.open=!0,Xn.autoClose=r},150)):(Xn.message=t,Xn.variant=n,Xn.svg=e,Xn.open=!0,Xn.autoClose=r)}},Zo=Vue,an=fn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Kue={state:an,subscribe(t){return jr(an,()=>t(an))},setLastNetworkInView(t){an.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");an.loading=!0;try{const s=await Ke.fetchTransactions({account:t,cursor:an.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=I0.filterSpamTransactions(s.data),o=I0.filterByConnectedChain(i),a=[...an.transactions,...o];an.loading=!1,e==="coinbase"?an.coinbaseTransactions=I0.groupTransactionsByYearAndMonth(an.coinbaseTransactions,s.data):(an.transactions=a,an.transactionsByYear=I0.groupTransactionsByYearAndMonth(an.transactionsByYear,o)),an.empty=a.length===0,an.next=s.next?s.next:void 0}catch{const i=B.state.activeChain;Qt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:fe.state.projectId,cursor:an.next,isSmartAccount:((r=Ee.state.preferredAccountTypes)==null?void 0:r[i])===Er.ACCOUNT_TYPES.SMART_ACCOUNT}}),Zo.showError("Failed to fetch transactions"),an.loading=!1,an.empty=!0,an.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){an.next=void 0},resetTransactions(){an.transactions=[],an.transactionsByYear={},an.lastNetworkInView=void 0,an.loading=!1,an.empty=!1,an.next=void 0}},I0=Hi(Kue,"API_ERROR"),St=fn({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Bd;const Que={state:St,subscribe(t){return jr(St,()=>t(St))},subscribeKey(t,e){return Fr(St,t,e)},_getClient(){return St._client},setClient(t){St._client=_f(t)},initialize(t){const e=xe.getConnections();for(const n of t){const r=n.namespace;if(r){const s=St.connections.get(r)??[],i=e[r]??[],o=[...s,...i];St.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Me.isTelegram()||Me.isSafari()&&Me.isIos()){if(Bd){await Bd,Bd=void 0;return}if(!Me.isPairingExpired(St==null?void 0:St.wcPairingExpiry)){const s=St.wcUri;St.wcUri=s;return}Bd=(e=(t=Re._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Re.state.status="connecting",await Bd,Bd=void 0,St.wcPairingExpiry=void 0,Re.state.status="connected"}else await((r=(n=Re._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Re._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&B.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Re._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||B.state.activeChain;e&&Se.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Ft.setLoading(!0,B.state.activeChain);const n=Se.getAuthConnector();n&&(Ee.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),xe.setPreferredAccountTypes(Ee.state.preferredAccountTypes??{[e]:t}),await Re.reconnectExternal(n),Ft.setLoading(!1,B.state.activeChain),Qt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Re._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Re._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Re._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Re._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Re._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Re._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Re._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Re._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Re._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Re._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Re._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Re._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){St.wcUri=void 0,St.wcPairingExpiry=void 0,St.wcLinking=void 0,St.recentWallet=void 0,St.status="disconnected",I0.resetTransactions(),xe.deleteWalletConnectDeepLink()},resetUri(){St.wcUri=void 0,St.wcPairingExpiry=void 0,Bd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Re.state;t&&xe.setWalletConnectDeepLink(t),e&&xe.setAppKitRecent(e),Qt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ye.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){St.wcBasic=t},setUri(t){St.wcUri=t,St.wcPairingExpiry=Me.getPairingExpiry()},setWcLinking(t){St.wcLinking=t},setWcError(t){St.wcError=t,St.buffering=!1},setRecentWallet(t){St.recentWallet=t},setBuffering(t){St.buffering=t},setStatus(t){St.status=t},setIsSwitchingConnection(t){St.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=Re._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new zm("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){St.connections=new Map(St.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Gc.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await Re.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Se.getConnectorById(t.connectorId),s=t.connectorId===ae.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await Re.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await Re.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Se.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ae.CONNECTOR_ID.AUTH,a=t.connectorId===ae.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Gc.isSocialProvider(i)){const{address:d}=await Gc.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Ft.open({view:"ConnectingFarcaster"})},onConnect(){Ye.replace("ProfileWallets")}});c=d}else{const{address:d}=await Gc.connectEmail({closeModalOnConnect:r,onOpen(){Ft.open({view:"EmailLogin"})},onConnect(){Ye.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Gc.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Ft.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ye.replace("ProfileWallets")}});c=d}else{const d=await Re.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Re.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){db.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=Ee.getCaipAddress(n);if(o){const{address:c}=Ti.parseCaipAddress(o);i=c}const a=db.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Re.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Re.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Re=Hi(Que),cp=fn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Za={state:cp,subscribe(t){return jr(cp,()=>t(cp))},subscribeOpen(t){return Fr(cp,"open",t)},set(t){Object.assign(cp,{...cp,...t})}};function Jue(t){const e=Array.from(B.state.chains.keys());let n=[];return t?(n.push([t,B.state.chains.get(t)]),Gc.checkNamespaceConnectorId(t,ae.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Gc.checkNamespaceConnectorId(r,ae.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,B.state.chains.get(r)])}):Gc.checkNamespaceConnectorId(t,ae.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Gc.checkNamespaceConnectorId(r,ae.CONNECTOR_ID.AUTH)&&n.push([r,B.state.chains.get(r)])})):n=Array.from(B.state.chains.entries()),n}function E7(){var r,s;const t=((r=B.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=B.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Kt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const Yue={async getTokenList(){var r;const t=B.state.activeCaipNetwork,e=await Ke.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=B.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Re==null?void 0:Re.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Ke.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Ke.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Re.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await oR.getMyTokensWithBalance(t);return Ee.setTokenBalance(e,B.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:E7(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Vt=fn({tokenBalances:[],loading:!1}),Zue={state:Vt,subscribe(t){return jr(Vt,()=>t(Vt))},subscribeKey(t,e){return Fr(Vt,t,e)},setToken(t){t&&(Vt.token=_f(t))},setTokenAmount(t){Vt.sendTokenAmount=t},setReceiverAddress(t){Vt.receiverAddress=t},setReceiverProfileImageUrl(t){Vt.receiverProfileImageUrl=t},setReceiverProfileName(t){Vt.receiverProfileName=t},setNetworkBalanceInUsd(t){Vt.networkBalanceInUSD=t},setLoading(t){Vt.loading=t},async sendToken(){var t;try{switch(Lt.setLoading(!0),(t=B.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Lt.sendEvmToken();return;case"solana":await Lt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Lt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=B.state.activeChain,e=(n=Ee.state.preferredAccountTypes)==null?void 0:n[t];if(!Lt.state.sendTokenAmount||!Lt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Lt.state.token)throw new Error("A token is required");(r=Lt.state.token)!=null&&r.address?(Qt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Er.ACCOUNT_TYPES.SMART_ACCOUNT,token:Lt.state.token.address,amount:Lt.state.sendTokenAmount,network:((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Lt.sendERC20Token({receiverAddress:Lt.state.receiverAddress,tokenAddress:Lt.state.token.address,sendTokenAmount:Lt.state.sendTokenAmount,decimals:Lt.state.token.quantity.decimals})):(Qt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Er.ACCOUNT_TYPES.SMART_ACCOUNT,token:Lt.state.token.symbol||"",amount:Lt.state.sendTokenAmount,network:((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Lt.sendNativeToken({receiverAddress:Lt.state.receiverAddress,sendTokenAmount:Lt.state.sendTokenAmount,decimals:Lt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Vt.loading=!0;const e=(i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=B.state.activeCaipAddress,s=r?Me.getPlainAddress(r):void 0;if(Vt.lastRetry&&!Me.isAllowedRetry(Vt.lastRetry,30*Kt.ONE_SEC_MS))return Vt.loading=!1,[];try{if(s&&e&&n){const a=await oR.getMyTokensWithBalance();return Vt.tokenBalances=a,Vt.lastRetry=void 0,a}}catch(a){Vt.lastRetry=Date.now(),t==null||t(a),Zo.showError("Token Balance Unavailable")}finally{Vt.loading=!1}return[]},fetchNetworkBalance(){if(Vt.tokenBalances.length===0)return;const t=Yue.mapBalancesToSwapTokens(Vt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===E7());e&&(Vt.networkBalanceInUSD=e?wue.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ye.pushTransactionStack({});const e=t.receiverAddress,n=Ee.state.address,r=Re.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Re.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Qt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ee.state.preferredAccountTypes)==null?void 0:i.eip155)===Er.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Lt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Re._getClient())==null||c.updateBalance("eip155"),Lt.resetSend()},async sendERC20Token(t){Ye.pushTransactionStack({onSuccess(){Ye.replace("Account")}});const e=Re.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ee.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Me.getPlainAddress(t.tokenAddress);await Re.writeContract({fromAddress:Ee.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:_ue.getERC20Abi(n),chainNamespace:"eip155"}),Lt.resetSend()}},async sendSolanaToken(){var t;if(!Lt.state.sendTokenAmount||!Lt.state.receiverAddress)throw new Error("An amount and receiver address are required");Ye.pushTransactionStack({onSuccess(){Ye.replace("Account")}}),await Re.sendTransaction({chainNamespace:"solana",to:Lt.state.receiverAddress,value:Lt.state.sendTokenAmount}),(t=Re._getClient())==null||t.updateBalance("solana"),Lt.resetSend()},resetSend(){Vt.token=void 0,Vt.sendTokenAmount=void 0,Vt.receiverAddress=void 0,Vt.receiverProfileImageUrl=void 0,Vt.receiverProfileName=void 0,Vt.loading=!1,Vt.tokenBalances=[]}},Lt=Hi(Zue),XS={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},R1={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Te=fn({chains:lue(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Xue={state:Te,subscribe(t){return jr(Te,()=>{t(Te)})},subscribeKey(t,e){return Fr(Te,t,e)},subscribeChainProp(t,e,n){let r;return jr(Te.chains,()=>{var i;const s=n||Te.activeChain;if(s){const o=(i=Te.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=xe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=fe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Te.noAdapters=!0),Te.noAdapters||(Te.activeChain=a==null?void 0:a.namespace,Te.activeCaipNetwork=i,B.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Te.activeChain&&Za.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);B.state.chains.set(u,{namespace:u,networkState:fn({...R1,caipNetwork:d==null?void 0:d[0]}),accountState:fn(XS),caipNetworks:d??[],...n}),B.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Te.activeChain===t){const r=Array.from(Te.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&B.setActiveCaipNetwork(s)}}Te.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Te.chains.set(t.namespace,{namespace:t.namespace,networkState:{...R1,caipNetwork:r[0]},accountState:XS,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),B.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Te.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Te.chains.set(t.chainNamespace,{...e,caipNetworks:r}),B.setRequestedCaipNetworks(r,t.chainNamespace),Se.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Te.chains.get(t);if(n){const o=((r=Te.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&B.setActiveCaipNetwork(n.caipNetworks[0]),Te.chains.set(t,{...n,caipNetworks:a}),B.setRequestedCaipNetworks(a||[],t),a.length===0&&Se.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Te.chains.get(t);n&&(n.networkState={...n.networkState||R1,...e},Te.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Te.chains.get(t);if(r){const s={...r.accountState||XS,...e};Te.chains.set(t,{...r,accountState:s}),(Te.chains.size===1||Te.activeChain===t)&&(e.caipAddress&&(Te.activeCaipAddress=e.caipAddress),Ee.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Te.chains.get(t);if(n){const r={...n.networkState||R1,...e};Te.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){B.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Se.removeConnectorId(n)},setActiveNamespace(t){var r,s;Te.activeChain=t;const e=t?Te.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Te.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Te.activeCaipNetwork=n,B.setChainNetworkData(t,{caipNetwork:n}),xe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Za.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Te.activeChain!==t.chainNamespace&&B.setIsSwitchingNamespace(!0);const e=Te.chains.get(t.chainNamespace);Te.activeChain=t.chainNamespace,Te.activeCaipNetwork=t,B.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Te.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Te.activeCaipAddress=void 0,B.setAccountProp("caipAddress",Te.activeCaipAddress,t.chainNamespace),e&&Ee.replaceState(e.accountState),Lt.resetSend(),Za.set({activeChain:Te.activeChain,selectedNetworkId:(i=Te.activeCaipNetwork)==null?void 0:i.caipNetworkId}),xe.setActiveCaipNetworkId(t.caipNetworkId),!B.checkIfSupportedNetwork(t.chainNamespace)&&fe.state.enableNetworkSwitch&&!fe.state.allowUnsupportedChain&&!Re.state.wcBasic&&B.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Te.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==B.state.activeChain,n=(s=B.getNetworkData(t))==null?void 0:s.caipNetwork,r=B.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await B.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=B.state.chains.get(B.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Te.activeCaipNetwork)==null?void 0:o.id)})),r=B.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Ft.close()}catch{Ye.goBack()}Qt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Te.activeChain,n=Te.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Te.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Te.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Te.activeChain;if(e&&(n=e),!n)return;const r=(s=Te.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Te.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Te.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Me.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Te.chains.forEach(e=>{const n=B.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){B.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=B.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Se.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Te.chains.forEach(e=>{const n=B.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Te.activeCaipNetwork},getActiveCaipAddress(){return Te.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Te.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=B.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());B.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Te.activeCaipNetwork,r=B.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Te.activeChain)return!0;const e=B.getRequestedCaipNetworks(Te.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){B.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=ub.caipNetworkIdToNumber((r=Te.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Te.activeChain;if(!e||!t)return!1;const n=B.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Ft.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Te.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Kt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){B.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Te.activeCaipAddress=void 0,B.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Se.removeConnectorId(e)},setIsSwitchingNamespace(t){Te.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Te.chains.forEach(s=>{ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Te.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=B.state.chains.get(t))==null?void 0:e.accountState:Ee.state},getNetworkData(t){var n;const e=t||Te.activeChain;if(e)return(n=B.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=B.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Se.state.filterByNamespace;return(t?[Te.chains.get(t)]:Array.from(Te.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?B.getRequestedCaipNetworks(t):B.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Te.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Te.lastConnectedSIWECaipNetwork}},B=Hi(Xue),ede={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},_7=Me.getBlockchainApiUrl(),Us=fn({clientId:null,api:new Nv({baseUrl:_7,clientId:null}),supportedChains:{http:[],ws:[]}}),Ke={state:Us,async get(t){const{st:e,sv:n}=Ke.getSdkProperties(),r=fe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Us.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=fe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Us.supportedChains.http.length||await Ke.getSupportedNetworks()}catch{return!1}return Us.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ke.get({path:"v1/supported-chains"});return Us.supportedChains=t,t}catch{return Us.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ke.isNetworkSupported(e))return{avatar:"",name:""};const r=xe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Ke.get({path:`/v1/identity/${t}`,params:{sender:B.state.activeCaipAddress?Me.getPlainAddress(B.state.activeCaipAddress):void 0}});return xe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Ke.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ke.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Ke.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ke.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Ke.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ke.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Ke.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Us.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:fe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Ke.isNetworkSupported((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ke.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Ke.getSdkProperties();if(!await Ke.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ke.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Ke.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Us.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Kt.CONVERT_SLIPPAGE_TOLERANCE},projectId:fe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Ke.getSdkProperties();if(!await Ke.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ke.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Ke.getSdkProperties();if(!await Ke.isNetworkSupported((l=B.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Zo.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=xe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ke.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return xe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Ke.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ke.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Ke.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ke.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ee.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Ke.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ke.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Ke.isNetworkSupported((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Us.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Ke.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Us.api.post({path:"/v1/generators/onrampurl",params:{projectId:fe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ke.isNetworkSupported((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ke.get({path:"/v1/onramp/options"})}catch{return ede}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Ke.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Us.api.post({path:"/v1/onramp/quote",params:{projectId:fe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Ke.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ke.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Ke.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Us.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:fe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Us.clientId=t,Us.api=new Nv({baseUrl:_7,clientId:t})}},e2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return dy(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},oR={async getMyTokensWithBalance(t){const e=Ee.state.address,n=B.state.activeCaipNetwork,r=Se.getConnectorId("eip155")===ae.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=xe.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Ke.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=e2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Re.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Re.walletGetAssets({account:t,chainFilter:[s]});if(!e2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>e2.createBalance(l,e.caipNetworkId));return xe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Wi=fn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),tde={state:Wi,replaceState(t){t&&Object.assign(Wi,_f(t))},subscribe(t){return B.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return B.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){B.setAccountProp("status",t,e)},getCaipAddress(t){return B.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Me.getPlainAddress(t):void 0;e===B.state.activeChain&&(B.state.activeCaipAddress=t),B.setAccountProp("caipAddress",t,e),B.setAccountProp("address",n,e)},setBalance(t,e,n){B.setAccountProp("balance",t,n),B.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){B.setAccountProp("profileName",t,e)},setProfileImage(t,e){B.setAccountProp("profileImage",t,e)},setUser(t,e){B.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){B.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){B.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){B.setAccountProp("currentTab",t,B.state.activeChain)},setTokenBalance(t,e){t&&B.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){B.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){B.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=B.getAccountProp("addressLabels",n)||new Map;r.set(t,e),B.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=B.getAccountProp("addressLabels",e)||new Map;n.delete(t),B.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){B.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){B.setAccountProp("preferredAccountTypes",{...Wi.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Wi.preferredAccountTypes=t},setSocialProvider(t,e){t&&B.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){B.setAccountProp("socialWindow",t?_f(t):void 0,e)},setFarcasterUrl(t,e){B.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Wi.balanceLoading=!0;const e=(i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=B.state.activeCaipAddress,s=r?Me.getPlainAddress(r):void 0;if(Wi.lastRetry&&!Me.isAllowedRetry(Wi.lastRetry,30*Kt.ONE_SEC_MS))return Wi.balanceLoading=!1,[];try{if(s&&e&&n){const a=await oR.getMyTokensWithBalance();return Ee.setTokenBalance(a,n),Wi.lastRetry=void 0,Wi.balanceLoading=!1,a}}catch(a){Wi.lastRetry=Date.now(),t==null||t(a),Zo.showError("Token Balance Unavailable")}finally{Wi.balanceLoading=!1}return[]},resetAccount(t){B.resetAccount(t)}},Ee=Hi(tde),nde={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=B.state.activeCaipNetwork,r=Ye.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ee.getCaipAddress(B.state.activeChain),o=t.chainNamespace!==B.state.activeChain,a=Ee.getCaipAddress(t.chainNamespace),l=Se.getConnectorId(B.state.activeChain)===ae.CONNECTOR_ID.AUTH,u=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ye.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ye.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ye.push("SwitchNetwork",{...r,network:t})}},Bs=fn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),rde={state:Bs,subscribe(t){return jr(Bs,()=>t(Bs))},subscribeKey(t,e){return Fr(Bs,t,e)},async open(t){var o,a;const e=Ee.state.status==="connected",n=t==null?void 0:t.namespace,r=B.state.activeChain,s=n&&n!==r,i=(o=B.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Re.state.wcBasic?We.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await We.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Se.setFilterByNamespace(t==null?void 0:t.namespace),Ft.setLoading(!0,n),n&&s){const c=((a=B.getNetworkData(n))==null?void 0:a.caipNetwork)||B.getRequestedCaipNetworks(n)[0];c&&nde.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=B.state.noAdapters;fe.state.manualWCControl||c&&!i?Me.isMobile()?Ye.reset("AllWallets"):Ye.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ye.reset(t.view,t.data):i?Ye.reset("Account"):Ye.reset("Connect")}Bs.open=!0,Za.set({open:!0}),Qt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=fe.state.enableEmbedded,e=!!B.state.activeCaipAddress;Bs.open&&Qt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Bs.open=!1,Ye.reset("Connect"),Ft.clearLoading(),t?e?Ye.replace("Account"):Ye.push("Connect"):Za.set({open:!1}),Re.resetUri()},setLoading(t,e){e&&Bs.loadingNamespaceMap.set(e,t),Bs.loading=t,Za.set({loading:t})},clearLoading(){Bs.loadingNamespaceMap.clear(),Bs.loading=!1},shake(){Bs.shake||(Bs.shake=!0,setTimeout(()=>{Bs.shake=!1},500))}},Ft=Hi(rde),Z0={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},EN={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},sde={providers:w7,selectedProvider:null,error:null,purchaseCurrency:Z0,paymentCurrency:EN,purchaseCurrencies:[Z0],paymentCurrencies:[],quotesLoading:!1},It=fn(sde),ide={state:It,subscribe(t){return jr(It,()=>t(It))},subscribeKey(t,e){return Fr(It,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=B.state.activeChain===ae.CHAIN.SOLANA?"SOL":"USDC",n=Ee.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",xue),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",fe.state.projectId),It.selectedProvider={...t,url:r.toString()}}else It.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=w7.filter(r=>e.includes(r.name));It.providers=n}else It.providers=[]},setPurchaseCurrency(t){It.purchaseCurrency=t},setPaymentCurrency(t){It.paymentCurrency=t},setPurchaseAmount(t){_N.state.purchaseAmount=t},setPaymentAmount(t){_N.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ke.getOnrampOptions();It.purchaseCurrencies=t.purchaseCurrencies,It.paymentCurrencies=t.paymentCurrencies,It.paymentCurrency=t.paymentCurrencies[0]||EN,It.purchaseCurrency=t.purchaseCurrencies[0]||Z0,await We.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await We.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;It.quotesLoading=!0;try{const n=await Ke.getOnrampQuote({purchaseCurrency:It.purchaseCurrency,paymentCurrency:It.paymentCurrency,amount:((t=It.paymentAmount)==null?void 0:t.toString())||"0",network:(e=It.purchaseCurrency)==null?void 0:e.symbol});return It.quotesLoading=!1,It.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return It.error=n.message,It.quotesLoading=!1,null}finally{It.quotesLoading=!1}},resetState(){It.selectedProvider=null,It.error=null,It.purchaseCurrency=Z0,It.paymentCurrency=EN,It.purchaseCurrencies=[Z0],It.paymentCurrencies=[],It.paymentAmount=void 0,It.purchaseAmount=void 0,It.quotesLoading=!1}},_N=Hi(ide),A8=2147483648,ode={convertEVMChainIdToCoinType(t){if(t>=A8)throw new Error("Invalid chainId");return(A8|t)>>>0}},qi=fn({suggestions:[],loading:!1}),ade={state:qi,subscribe(t){return jr(qi,()=>t(qi))},subscribeKey(t,e){return Fr(qi,t,e)},async resolveName(t){var e,n;try{return await Ke.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ke.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{qi.loading=!0,qi.suggestions=[];const e=await Ke.getEnsNameSuggestions(t);return qi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],qi.suggestions}catch(e){const n=X0.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{qi.loading=!1}},async getNamesForAddress(t){try{if(!B.state.activeCaipNetwork)return[];const n=xe.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ke.reverseLookupEnsName({address:t});return xe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=X0.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=B.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ee.state.address,r=Se.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");qi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ye.pushTransactionStack({onCancel(){Ye.replace("RegisterAccountName")}});const i=await Re.signMessage(s);qi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=ode.convertEVMChainIdToCoinType(Number(o));await Ke.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ee.setProfileName(t,e.chainNamespace),Ye.replace("RegisterAccountNameSuccess")}catch(s){const i=X0.parseEnsApiError(s,`Error registering name ${t}`);throw Ye.replace("RegisterAccountName"),new Error(i)}finally{qi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},X0=Hi(ade);var aR={exports:{}},vg=typeof Reflect=="object"?Reflect:null,S8=vg&&typeof vg.apply=="function"?vg.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},LE;vg&&typeof vg.ownKeys=="function"?LE=vg.ownKeys:Object.getOwnPropertySymbols?LE=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:LE=function(e){return Object.getOwnPropertyNames(e)};function cde(t){console&&console.warn&&console.warn(t)}var x7=Number.isNaN||function(e){return e!==e};function sn(){sn.init.call(this)}aR.exports=sn;aR.exports.once=hde;sn.EventEmitter=sn;sn.prototype._events=void 0;sn.prototype._eventsCount=0;sn.prototype._maxListeners=void 0;var I8=10;function DC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(sn,"defaultMaxListeners",{enumerable:!0,get:function(){return I8},set:function(t){if(typeof t!="number"||t<0||x7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");I8=t}});sn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};sn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||x7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function C7(t){return t._maxListeners===void 0?sn.defaultMaxListeners:t._maxListeners}sn.prototype.getMaxListeners=function(){return C7(this)};sn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")S8(c,this,n);else for(var l=c.length,u=N7(c,l),r=0;r<l;++r)S8(u[r],this,n);return!0};function A7(t,e,n,r){var s,i,o;if(DC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=C7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,cde(a)}return t}sn.prototype.addListener=function(e,n){return A7(this,e,n,!1)};sn.prototype.on=sn.prototype.addListener;sn.prototype.prependListener=function(e,n){return A7(this,e,n,!0)};function lde(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=lde.bind(r);return s.listener=n,r.wrapFn=s,s}sn.prototype.once=function(e,n){return DC(n),this.on(e,S7(this,e,n)),this};sn.prototype.prependOnceListener=function(e,n){return DC(n),this.prependListener(e,S7(this,e,n)),this};sn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(DC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():ude(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};sn.prototype.off=sn.prototype.removeListener;sn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function I7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?dde(s):N7(s,s.length)}sn.prototype.listeners=function(e){return I7(this,e,!0)};sn.prototype.rawListeners=function(e){return I7(this,e,!1)};sn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):T7.call(t,e)};sn.prototype.listenerCount=T7;function T7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}sn.prototype.eventNames=function(){return this._eventsCount>0?LE(this._events):[]};function N7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ude(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function dde(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function hde(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}P7(t,e,i,{once:!0}),e!=="error"&&fde(t,s,{once:!0})})}function fde(t,e,n){typeof t.on=="function"&&P7(t,"error",e,n)}function P7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var bo=aR.exports;const cR=Lf(bo);var we={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xN=function(t,e){return xN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},xN(t,e)};function pde(t,e){xN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var CN=function(){return CN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},CN.apply(this,arguments)};function gde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mde(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function yde(t,e){return function(n,r){e(n,r,t)}}function wde(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function bde(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function vde(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ede(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function _de(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function AN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function k7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function xde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(k7(arguments[e]));return t}function Cde(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function hb(t){return this instanceof hb?(this.v=t,this):new hb(t)}function Ade(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof hb?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Sde(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:hb(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ide(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AN=="function"?AN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Tde(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Nde(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Pde(t){return t&&t.__esModule?t:{default:t}}function kde(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ode(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Rde=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return CN},__asyncDelegator:Sde,__asyncGenerator:Ade,__asyncValues:Ide,__await:hb,__awaiter:bde,__classPrivateFieldGet:kde,__classPrivateFieldSet:Ode,__createBinding:Ede,__decorate:mde,__exportStar:_de,__extends:pde,__generator:vde,__importDefault:Pde,__importStar:Nde,__makeTemplateObject:Tde,__metadata:wde,__param:yde,__read:k7,__rest:gde,__spread:xde,__spreadArrays:Cde,__values:AN},Symbol.toStringTag,{value:"Module"})),$C=Fx(Rde);var t2={},Jy={},T8;function Dde(){if(T8)return Jy;T8=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Jy.delay=t,Jy}var Ld={},n2={},Md={},N8;function $de(){return N8||(N8=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.ONE_THOUSAND=Md.ONE_HUNDRED=void 0,Md.ONE_HUNDRED=100,Md.ONE_THOUSAND=1e3),Md}var r2={},P8;function Ude(){return P8||(P8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(r2)),r2}var k8;function O7(){return k8||(k8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$C;e.__exportStar($de(),t),e.__exportStar(Ude(),t)}(n2)),n2}var O8;function Bde(){if(O8)return Ld;O8=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.fromMiliseconds=Ld.toMiliseconds=void 0;const t=O7();function e(r){return r*t.ONE_THOUSAND}Ld.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ld.fromMiliseconds=n,Ld}var R8;function Lde(){return R8||(R8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$C;e.__exportStar(Dde(),t),e.__exportStar(Bde(),t)}(t2)),t2}var lp={},D8;function Mde(){if(D8)return lp;D8=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return lp.Watch=t,lp.default=t,lp}var s2={},Yy={},$8;function jde(){if($8)return Yy;$8=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.IWatch=void 0;class t{}return Yy.IWatch=t,Yy}var U8;function Fde(){return U8||(U8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),$C.__exportStar(jde(),t)}(s2)),s2}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$C;e.__exportStar(Lde(),t),e.__exportStar(Mde(),t),e.__exportStar(Fde(),t),e.__exportStar(O7(),t)})(we);class Gf{}let zde=class extends Gf{constructor(e){super()}};const B8=we.FIVE_SECONDS,Vf={pulse:"heartbeat_pulse"};let Hde=class R7 extends zde{constructor(e){super(e),this.events=new bo.EventEmitter,this.interval=B8,this.interval=(e==null?void 0:e.interval)||B8}static async init(e){const n=new R7(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(Vf.pulse)}};const Wde=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qde=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Gde=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Vde(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Kde(t);return}return e}function Kde(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function D1(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Gde.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Wde.test(t)||qde.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Vde)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Qde(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function dr(t,...e){try{return Qde(t(...e))}catch(n){return Promise.reject(n)}}function Jde(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Yde(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ME(t){if(Jde(t))return String(t);if(Yde(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ME(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const SN="base64:";function Zde(t){return typeof t=="string"?t:SN+the(t)}function Xde(t){return typeof t!="string"||!t.startsWith(SN)?t:ehe(t.slice(SN.length))}function ehe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function the(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Hs(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function nhe(...t){return Hs(t.join(":"))}function $1(t){return t=Hs(t),t?t+":":""}function rhe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function she(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const ihe="memory",ohe=()=>{const t=new Map;return{name:ihe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function ahe(t={}){const e={mounts:{"":t.driver||ohe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Hs(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await L8(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Hs(g?p:p.key),w=g?void 0:p.value,v=g||!p.options?u:{...u,...p.options},b=n(y);f(b).items.push({key:y,value:w,relativeKey:b.relativeKey,options:v})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Hs(l);const{relativeKey:d,driver:h}=n(l);return dr(h.hasItem,d,u)},getItem(l,u={}){l=Hs(l);const{relativeKey:d,driver:h}=n(l);return dr(h.getItem,d,u).then(f=>D1(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?dr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:nhe(d.base,f.key),value:D1(f.value)}))):Promise.all(d.items.map(h=>dr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:D1(f)})))))},getItemRaw(l,u={}){l=Hs(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?dr(h.getItemRaw,d,u):dr(h.getItem,d,u).then(f=>Xde(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Hs(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await dr(f.setItem,h,ME(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return dr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:ME(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>dr(d.driver.setItem,h.relativeKey,ME(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Hs(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await dr(f.setItemRaw,h,u,d);else if(f.setItem)await dr(f.setItem,h,Zde(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Hs(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await dr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await dr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Hs(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await dr(h.getMeta,d,u)),!u.nativeOnly){const p=await dr(h.getItem,d+"$",u).then(g=>D1(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=$1(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const v=await dr(w.driver.getKeys,w.relativeBase,u);for(const b of v){const x=w.mountpoint+Hs(b);h.some(_=>x.startsWith(_))||f.push(x)}h=[w.mountpoint,...h.filter(b=>!b.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||rhe(w,u.maxDepth))&&she(w,l))},async clear(l,u={}){l=$1(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return dr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>M8(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=$1(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(L8(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=$1(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await M8(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Hs(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Hs(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function L8(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function M8(t){typeof t.dispose=="function"&&await dr(t.dispose)}function Kf(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function D7(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Kf(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let i2;function Pv(){return i2||(i2=D7("keyval-store","keyval")),i2}function j8(t,e=Pv()){return e("readonly",n=>Kf(n.get(t)))}function che(t,e,n=Pv()){return n("readwrite",r=>(r.put(e,t),Kf(r.transaction)))}function lhe(t,e=Pv()){return e("readwrite",n=>(n.delete(t),Kf(n.transaction)))}function uhe(t=Pv()){return t("readwrite",e=>(e.clear(),Kf(e.transaction)))}function dhe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Kf(t.transaction)}function hhe(t=Pv()){return t("readonly",e=>{if(e.getAllKeys)return Kf(e.getAllKeys());const n=[];return dhe(e,r=>n.push(r.key)).then(()=>n)})}const fhe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),phe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Cf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return phe(t)}catch{return t}}function fl(t){return typeof t=="string"?t:fhe(t)||""}const ghe="idb-keyval";var mhe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=D7(t.dbName,t.storeName)),{name:ghe,options:t,async hasItem(s){return!(typeof await j8(n(s),r)>"u")},async getItem(s){return await j8(n(s),r)??null},setItem(s,i){return che(n(s),i,r)},removeItem(s){return lhe(n(s),r)},getKeys(){return hhe(r)},clear(){return uhe(r)}}};const yhe="WALLET_CONNECT_V2_INDEXED_DB",whe="keyvaluestorage";let bhe=class{constructor(){this.indexedDb=ahe({driver:mhe({dbName:yhe,storeName:whe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,fl(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var o2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jE={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof o2<"u"&&o2.localStorage?jE.exports=o2.localStorage:typeof window<"u"&&window.localStorage?jE.exports=window.localStorage:jE.exports=new e})();function vhe(t){var e;return[t[0],Cf((e=t[1])!=null?e:"")]}let Ehe=class{constructor(){this.localStorage=jE.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(vhe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Cf(n)}async setItem(e,n){this.localStorage.setItem(e,fl(n))}async removeItem(e){this.localStorage.removeItem(e)}};const _he="wc_storage_version",F8=1,xhe=async(t,e,n)=>{const r=_he,s=await e.getItem(r);if(s&&s>=F8){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,F8),n(e),Che(t,o)},Che=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Ahe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Ehe;this.storage=e;try{const n=new bhe;xhe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function She(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Ihe=The;function The(t,e,n){var r=n&&n.stringify||She,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const z8=Ihe;var Up=Xa;const fb=Lhe().console||{},Nhe={mapHttpRequest:U1,mapHttpResponse:U1,wrapRequestSerializer:a2,wrapResponseSerializer:a2,wrapErrorSerializer:a2,req:U1,res:U1,err:Dhe};function Phe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Xa(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||fb;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Phe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=pb),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:$he(t)};c.levels=Xa.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=pb,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=IN());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,up(l,c,"error","log"),up(l,c,"fatal","error"),up(l,c,"warn","error"),up(l,c,"info","log"),up(l,c,"debug","log"),up(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),v=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,UC([p],v,w,this._stdErrSerialize)}function b(x){this._childLevel=(x._childLevel|0)+1,this.error=dp(x,p,"error"),this.fatal=dp(x,p,"fatal"),this.warn=dp(x,p,"warn"),this.info=dp(x,p,"info"),this.debug=dp(x,p,"debug"),this.trace=dp(x,p,"trace"),w&&(this.serializers=w,this._serialize=v),e&&(this._logEvent=IN([].concat(x._logEvent.bindings,p)))}return b.prototype=this,new b(this)}return c}Xa.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Xa.stdSerializers=Nhe;Xa.stdTimeFunctions=Object.assign({},{nullTime:$7,epochTime:U7,unixTime:Uhe,isoTime:Bhe});function up(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?pb:s[n]?s[n]:fb[n]||fb[r]||pb,khe(t,e,n)}function khe(t,e,n){!t.transmit&&e[n]===pb||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===fb?fb:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&UC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Ohe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Xa.levels.values[l],d=Xa.levels.values[n];if(d<u)return;Rhe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Xa.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Ohe(t,e,n,r){t._serialize&&UC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Xa.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?z8(s.shift(),s):void 0}else typeof i=="string"&&(i=z8(s.shift(),s));return i!==void 0&&(o.msg=i),o}function UC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Xa.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function dp(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Rhe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;UC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=IN(c)}function IN(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Dhe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function $he(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?$7:U7}function U1(){return{}}function a2(t){return t}function pb(){}function $7(){return!1}function U7(){return Date.now()}function Uhe(){return Math.round(Date.now()/1e3)}function Bhe(){return new Date(Date.now()).toISOString()}function Lhe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const kv=Lf(Up),Mhe={level:"info"},Ov="custom_context",lR=1e3*1024;let jhe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},H8=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new jhe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},B7=class{constructor(e,n=lR){this.level=e??"error",this.levelValue=Up.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new H8(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Up.levels.values.error?console.error(e):n===Up.levels.values.warn?console.warn(e):n===Up.levels.values.debug?console.debug(e):n===Up.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(fl({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new H8(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(fl({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Fhe=class{constructor(e,n=lR){this.baseChunkLogger=new B7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},zhe=class{constructor(e,n=lR){this.baseChunkLogger=new B7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Hhe=Object.defineProperty,Whe=Object.defineProperties,qhe=Object.getOwnPropertyDescriptors,W8=Object.getOwnPropertySymbols,Ghe=Object.prototype.hasOwnProperty,Vhe=Object.prototype.propertyIsEnumerable,q8=(t,e,n)=>e in t?Hhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V_=(t,e)=>{for(var n in e||(e={}))Ghe.call(e,n)&&q8(t,n,e[n]);if(W8)for(var n of W8(e))Vhe.call(e,n)&&q8(t,n,e[n]);return t},K_=(t,e)=>Whe(t,qhe(e));function my(t){return K_(V_({},t),{level:(t==null?void 0:t.level)||Mhe.level})}function Khe(t,e=Ov){return t[e]||""}function Qhe(t,e,n=Ov){return t[n]=e,t}function pi(t,e=Ov){let n="";return typeof t.bindings>"u"?n=Khe(t,e):n=t.bindings().context||"",n}function Jhe(t,e,n=Ov){const r=pi(t,n);return r.trim()?`${r}/${e}`:e}function hs(t,e,n=Ov){const r=Jhe(t,e,n),s=t.child({context:r});return Qhe(s,r,n)}function Yhe(t){var e,n;const r=new Fhe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:kv(K_(V_({},t.opts),{level:"trace",browser:K_(V_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Zhe(t){var e;const n=new zhe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:kv(K_(V_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function uR(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Yhe(t):Zhe(t)}var Xhe=Object.defineProperty,efe=(t,e,n)=>e in t?Xhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G8=(t,e,n)=>efe(t,typeof e!="symbol"?e+"":e,n);let tfe=class extends Gf{constructor(e){super(),this.opts=e,G8(this,"protocol","wc"),G8(this,"version",2)}};var nfe=Object.defineProperty,rfe=(t,e,n)=>e in t?nfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sfe=(t,e,n)=>rfe(t,e+"",n);let ife=class extends Gf{constructor(e,n){super(),this.core=e,this.logger=n,sfe(this,"records",new Map)}},ofe=class{constructor(e,n){this.logger=e,this.core=n}},afe=class extends Gf{constructor(e,n){super(),this.relayer=e,this.logger=n}},cfe=class extends Gf{constructor(e){super()}},lfe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},ufe=class extends Gf{constructor(e,n){super(),this.relayer=e,this.logger=n}},dfe=class extends Gf{constructor(e,n){super(),this.core=e,this.logger=n}},hfe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},ffe=class{constructor(e,n){this.projectId=e,this.logger=n}},pfe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var gfe=Object.defineProperty,mfe=(t,e,n)=>e in t?gfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V8=(t,e,n)=>mfe(t,typeof e!="symbol"?e+"":e,n);let yfe=class{constructor(e){this.opts=e,V8(this,"protocol","wc"),V8(this,"version",2)}},wfe=class{constructor(e){this.client=e}};function bfe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function L7(t,...e){if(!bfe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function K8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vfe(t,e){L7(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const hp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Efe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function M7(t){return typeof t=="string"&&(t=Efe(t)),L7(t),t}let _fe=class{clone(){return this._cloneInto()}};function xfe(t){const e=r=>t().update(M7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function j7(t=32){if(hp&&typeof hp.getRandomValues=="function")return hp.getRandomValues(new Uint8Array(t));if(hp&&typeof hp.randomBytes=="function")return hp.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Cfe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Afe=class extends _fe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=c2(this.buffer)}update(e){K8(this);const{view:n,buffer:r,blockLen:s}=this;e=M7(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=c2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){K8(this),vfe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Cfe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=c2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const B1=BigInt(2**32-1),TN=BigInt(32);function F7(t,e=!1){return e?{h:Number(t&B1),l:Number(t>>TN&B1)}:{h:Number(t>>TN&B1)|0,l:Number(t&B1)|0}}function Sfe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=F7(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Ife=(t,e)=>BigInt(t>>>0)<<TN|BigInt(e>>>0),Tfe=(t,e,n)=>t>>>n,Nfe=(t,e,n)=>t<<32-n|e>>>n,Pfe=(t,e,n)=>t>>>n|e<<32-n,kfe=(t,e,n)=>t<<32-n|e>>>n,Ofe=(t,e,n)=>t<<64-n|e>>>n-32,Rfe=(t,e,n)=>t>>>n-32|e<<64-n,Dfe=(t,e)=>e,$fe=(t,e)=>t,Ufe=(t,e,n)=>t<<n|e>>>32-n,Bfe=(t,e,n)=>e<<n|t>>>32-n,Lfe=(t,e,n)=>e<<n-32|t>>>64-n,Mfe=(t,e,n)=>t<<n-32|e>>>64-n;function jfe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Ffe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zfe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Hfe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Wfe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,qfe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Gfe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ut={fromBig:F7,split:Sfe,toBig:Ife,shrSH:Tfe,shrSL:Nfe,rotrSH:Pfe,rotrSL:kfe,rotrBH:Ofe,rotrBL:Rfe,rotr32H:Dfe,rotr32L:$fe,rotlSH:Ufe,rotlSL:Bfe,rotlBH:Lfe,rotlBL:Mfe,add:jfe,add3L:Ffe,add3H:zfe,add4L:Hfe,add4H:Wfe,add5H:Gfe,add5L:qfe},[Vfe,Kfe]=ut.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Pl=new Uint32Array(80),kl=new Uint32Array(80);let Qfe=class extends Afe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Pl[b]=e.getUint32(n),kl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Pl[b-15]|0,_=kl[b-15]|0,C=ut.rotrSH(x,_,1)^ut.rotrSH(x,_,8)^ut.shrSH(x,_,7),S=ut.rotrSL(x,_,1)^ut.rotrSL(x,_,8)^ut.shrSL(x,_,7),T=Pl[b-2]|0,A=kl[b-2]|0,P=ut.rotrSH(T,A,19)^ut.rotrBH(T,A,61)^ut.shrSH(T,A,6),R=ut.rotrSL(T,A,19)^ut.rotrBL(T,A,61)^ut.shrSL(T,A,6),j=ut.add4L(S,R,kl[b-7],kl[b-16]),z=ut.add4H(j,C,P,Pl[b-7],Pl[b-16]);Pl[b]=z|0,kl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=ut.rotrSH(d,h,14)^ut.rotrSH(d,h,18)^ut.rotrBH(d,h,41),_=ut.rotrSL(d,h,14)^ut.rotrSL(d,h,18)^ut.rotrBL(d,h,41),C=d&f^~d&g,S=h&p^~h&y,T=ut.add5L(v,_,S,Kfe[b],kl[b]),A=ut.add5H(T,w,x,C,Vfe[b],Pl[b]),P=T|0,R=ut.rotrSH(r,s,28)^ut.rotrBH(r,s,34)^ut.rotrBH(r,s,39),j=ut.rotrSL(r,s,28)^ut.rotrBL(r,s,34)^ut.rotrBL(r,s,39),z=r&i^r&a^i&a,V=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=ut.add(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=ut.add3L(P,j,V);r=ut.add3H(I,A,R,z),s=I|0}({h:r,l:s}=ut.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ut.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ut.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ut.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ut.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ut.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=ut.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=ut.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Pl.fill(0),kl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Jfe=xfe(()=>new Qfe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dR=BigInt(0),z7=BigInt(1),Yfe=BigInt(2);function hR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fR(t){if(!hR(t))throw new Error("Uint8Array expected")}function l2(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Zfe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pR(t){fR(t);let e="";for(let n=0;n<t.length;n++)e+=Zfe[t[n]];return e}function H7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dR:BigInt("0x"+t)}const fc={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q8(t){if(t>=fc._0&&t<=fc._9)return t-fc._0;if(t>=fc.A&&t<=fc.F)return t-(fc.A-10);if(t>=fc.a&&t<=fc.f)return t-(fc.a-10)}function W7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Q8(t.charCodeAt(i)),a=Q8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Xfe(t){return H7(pR(t))}function FE(t){return fR(t),H7(pR(Uint8Array.from(t).reverse()))}function q7(t,e){return W7(t.toString(16).padStart(e*2,"0"))}function NN(t,e){return q7(t,e).reverse()}function pc(t,e,n){let r;if(typeof e=="string")try{r=W7(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(hR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function J8(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];fR(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const u2=t=>typeof t=="bigint"&&dR<=t;function epe(t,e,n){return u2(t)&&u2(e)&&u2(n)&&e<=t&&t<n}function Zy(t,e,n,r){if(!epe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tpe(t){let e;for(e=0;t>dR;t>>=z7,e+=1);return e}const npe=t=>(Yfe<<BigInt(t-1))-z7,rpe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||hR(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gR(t,e,n={}){const r=(s,i,o)=>{const a=rpe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Y8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const wr=BigInt(0),zn=BigInt(1),eh=BigInt(2),spe=BigInt(3),PN=BigInt(4),Z8=BigInt(5),X8=BigInt(8);function sr(t,e){const n=t%e;return n>=wr?n:e+n}function ipe(t,e,n){if(e<wr)throw new Error("invalid exponent, negatives unsupported");if(n<=wr)throw new Error("invalid modulus");if(n===zn)return wr;let r=zn;for(;e>wr;)e&zn&&(r=r*t%n),t=t*t%n,e>>=zn;return r}function ba(t,e,n){let r=t;for(;e-- >wr;)r*=r,r%=n;return r}function e5(t,e){if(t===wr)throw new Error("invert: expected non-zero number");if(e<=wr)throw new Error("invert: expected positive modulus, got "+e);let n=sr(t,e),r=e,s=wr,i=zn;for(;n!==wr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==zn)throw new Error("invert: does not exist");return sr(s,e)}function ope(t){const e=(t-zn)/eh;let n,r,s;for(n=t-zn,r=0;n%eh===wr;n/=eh,r++);for(s=eh;s<t&&ipe(s,e,t)!==t-zn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+zn)/PN;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+zn)/eh;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,zn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function ape(t){if(t%PN===spe){const e=(t+zn)/PN;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%X8===Z8){const e=(t-Z8)/X8;return function(n,r){const s=n.mul(r,eh),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,eh),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return ope(t)}const cpe=(t,e)=>(sr(t,e)&zn)===zn,lpe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function upe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lpe.reduce((r,s)=>(r[s]="function",r),e);return gR(t,n)}function dpe(t,e,n){if(n<wr)throw new Error("invalid exponent, negatives unsupported");if(n===wr)return t.ONE;if(n===zn)return e;let r=t.ONE,s=e;for(;n>wr;)n&zn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=zn;return r}function hpe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function G7(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function V7(t,e,n=!1,r={}){if(t<=wr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=G7(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:npe(s),ZERO:wr,ONE:zn,create:c=>sr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return wr<=c&&c<t},is0:c=>c===wr,isOdd:c=>(c&zn)===zn,neg:c=>sr(-c,t),eql:(c,l)=>c===l,sqr:c=>sr(c*c,t),add:(c,l)=>sr(c+l,t),sub:(c,l)=>sr(c-l,t),mul:(c,l)=>sr(c*l,t),pow:(c,l)=>dpe(a,c,l),div:(c,l)=>sr(c*e5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>e5(c,t),sqrt:r.sqrt||(c=>(o||(o=ape(t)),o(a,c))),invertBatch:c=>hpe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?NN(c,i):q7(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?FE(c):Xfe(c)}});return Object.freeze(a)}const t5=BigInt(0),L1=BigInt(1);function d2(t,e){const n=e.negate();return t?n:e}function K7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function h2(t,e){K7(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function fpe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ppe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const f2=new WeakMap,Q7=new WeakMap;function p2(t){return Q7.get(t)||1}function gpe(t,e){return{constTimeNegate:d2,hasPrecomputes(n){return p2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>t5;)r&L1&&(s=s.add(i)),i=i.double(),r>>=L1;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=h2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=h2(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=L1);const g=f,y=f+Math.abs(p)-1,w=h%2!==0,v=p<0;p===0?c=c.add(d2(w,r[g])):a=a.add(d2(v,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=h2(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===t5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=L1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=f2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&f2.set(r,s(i))),i},wNAFCached(n,r,s){const i=p2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=p2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){K7(r,e),Q7.set(n,r),f2.delete(n)}}}function mpe(t,e,n,r){if(fpe(n,t),ppe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=tpe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function ype(t){return upe(t.Fp),gR(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...G7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Co=BigInt(0),Ls=BigInt(1),M1=BigInt(2),wpe=BigInt(8),bpe={zip215:!0};function vpe(t){const e=ype(t);return gR(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Epe(t){const e=vpe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=M1<<BigInt(a*8)-Ls,u=n.create,d=V7(e.n,e.nBitLength),h=e.uvRatio||((I,N)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(N))}}catch{return{isValid:!1,value:Co}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,N,L)=>{if(l2("phflag",L),N.length||L)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,N){Zy("coordinate "+I,N,Co,l)}function y(I){if(!(I instanceof b))throw new Error("ExtendedPoint expected")}const w=Y8((I,N)=>{const{ex:L,ey:U,ez:$}=I,M=I.is0();N==null&&(N=M?wpe:n.inv($));const q=u(L*N),Z=u(U*N),ie=u($*N);if(M)return{x:Co,y:Ls};if(ie!==Ls)throw new Error("invZ was invalid");return{x:q,y:Z}}),v=Y8(I=>{const{a:N,d:L}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:U,ey:$,ez:M,et:q}=I,Z=u(U*U),ie=u($*$),re=u(M*M),ce=u(re*re),ge=u(Z*N),J=u(re*u(ge+ie)),te=u(ce+u(L*u(Z*ie)));if(J!==te)throw new Error("bad point: equation left != right (1)");const oe=u(U*$),se=u(M*q);if(oe!==se)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(N,L,U,$){this.ex=N,this.ey=L,this.ez=U,this.et=$,g("x",N),g("y",L),g("z",U),g("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof b)throw new Error("extended point not allowed");const{x:L,y:U}=N||{};return g("x",L),g("y",U),new b(L,U,Ls,u(L*U))}static normalizeZ(N){const L=n.invertBatch(N.map(U=>U.ez));return N.map((U,$)=>U.toAffine(L[$])).map(b.fromAffine)}static msm(N,L){return mpe(b,d,N,L)}_setWindowSize(N){C.setWindowSize(this,N)}assertValidity(){v(this)}equals(N){y(N);const{ex:L,ey:U,ez:$}=this,{ex:M,ey:q,ez:Z}=N,ie=u(L*Z),re=u(M*$),ce=u(U*Z),ge=u(q*$);return ie===re&&ce===ge}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:L,ey:U,ez:$}=this,M=u(L*L),q=u(U*U),Z=u(M1*u($*$)),ie=u(N*M),re=L+U,ce=u(u(re*re)-M-q),ge=ie+q,J=ge-Z,te=ie-q,oe=u(ce*J),se=u(ge*te),me=u(ce*te),je=u(J*ge);return new b(oe,se,je,me)}add(N){y(N);const{a:L,d:U}=e,{ex:$,ey:M,ez:q,et:Z}=this,{ex:ie,ey:re,ez:ce,et:ge}=N;if(L===BigInt(-1)){const qt=u((M-$)*(re+ie)),Ct=u((M+$)*(re-ie)),pn=u(Ct-qt);if(pn===Co)return this.double();const qr=u(q*M1*ge),ga=u(Z*M1*ce),ma=ga+qr,Yn=Ct+qt,Gr=ga-qr,_o=u(ma*pn),ue=u(Yn*Gr),He=u(ma*Gr),pt=u(pn*Yn);return new b(_o,ue,pt,He)}const J=u($*ie),te=u(M*re),oe=u(Z*U*ge),se=u(q*ce),me=u(($+M)*(ie+re)-J-te),je=se-oe,ve=se+oe,_e=u(te-L*J),Fe=u(me*je),Ge=u(ve*_e),Bt=u(me*_e),xn=u(je*ve);return new b(Fe,Ge,xn,Bt)}subtract(N){return this.add(N.negate())}wNAF(N){return C.wNAFCached(this,N,b.normalizeZ)}multiply(N){const L=N;Zy("scalar",L,Ls,r);const{p:U,f:$}=this.wNAF(L);return b.normalizeZ([U,$])[0]}multiplyUnsafe(N,L=b.ZERO){const U=N;return Zy("scalar",U,Co,r),U===Co?_:this.is0()||U===Ls?this:C.wNAFCachedUnsafe(this,U,b.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,r).is0()}toAffine(N){return w(this,N)}clearCofactor(){const{h:N}=e;return N===Ls?this:this.multiplyUnsafe(N)}static fromHex(N,L=!1){const{d:U,a:$}=e,M=n.BYTES;N=pc("pointHex",N,M),l2("zip215",L);const q=N.slice(),Z=N[M-1];q[M-1]=Z&-129;const ie=FE(q),re=L?l:n.ORDER;Zy("pointHex.y",ie,Co,re);const ce=u(ie*ie),ge=u(ce-Ls),J=u(U*ce-$);let{isValid:te,value:oe}=h(ge,J);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const se=(oe&Ls)===Ls,me=(Z&128)!==0;if(!L&&oe===Co&&me)throw new Error("Point.fromHex: x=0 and x_0=1");return me!==se&&(oe=u(-oe)),b.fromAffine({x:oe,y:ie})}static fromPrivateKey(N){return A(N).point}toRawBytes(){const{x:N,y:L}=this.toAffine(),U=NN(L,n.BYTES);return U[U.length-1]|=N&Ls?128:0,U}toHex(){return pR(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Ls,u(e.Gx*e.Gy)),b.ZERO=new b(Co,Ls,Ls,Co);const{BASE:x,ZERO:_}=b,C=gpe(b,a*8);function S(I){return sr(I,r)}function T(I){return S(FE(I))}function A(I){const N=n.BYTES;I=pc("private key",I,N);const L=pc("hashed private key",i(I),2*N),U=f(L.slice(0,N)),$=L.slice(N,2*N),M=T(U),q=x.multiply(M),Z=q.toRawBytes();return{head:U,prefix:$,scalar:M,point:q,pointBytes:Z}}function P(I){return A(I).pointBytes}function R(I=new Uint8Array,...N){const L=J8(...N);return T(i(p(L,pc("context",I),!!s)))}function j(I,N,L={}){I=pc("message",I),s&&(I=s(I));const{prefix:U,scalar:$,pointBytes:M}=A(N),q=R(L.context,U,I),Z=x.multiply(q).toRawBytes(),ie=R(L.context,Z,M,I),re=S(q+ie*$);Zy("signature.s",re,Co,r);const ce=J8(Z,NN(re,n.BYTES));return pc("result",ce,n.BYTES*2)}const z=bpe;function V(I,N,L,U=z){const{context:$,zip215:M}=U,q=n.BYTES;I=pc("signature",I,2*q),N=pc("message",N),L=pc("publicKey",L,q),M!==void 0&&l2("zip215",M),s&&(N=s(N));const Z=FE(I.slice(q,2*q));let ie,re,ce;try{ie=b.fromHex(L,M),re=b.fromHex(I.slice(0,q),M),ce=x.multiplyUnsafe(Z)}catch{return!1}if(!M&&ie.isSmallOrder())return!1;const ge=R($,re.toRawBytes(),ie.toRawBytes(),N);return re.add(ie.multiplyUnsafe(ge)).subtract(ce).clearCofactor().equals(b.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:j,verify:V,ExtendedPoint:b,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,N=b.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const mR=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),n5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _pe=BigInt(1),r5=BigInt(2);BigInt(3);const xpe=BigInt(5),Cpe=BigInt(8);function Ape(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=mR,o=t*t%i*t%i,a=ba(o,r5,i)*o%i,c=ba(a,_pe,i)*t%i,l=ba(c,xpe,i)*c%i,u=ba(l,e,i)*l%i,d=ba(u,n,i)*u%i,h=ba(d,r,i)*d%i,f=ba(h,s,i)*h%i,p=ba(f,s,i)*h%i,g=ba(p,e,i)*l%i;return{pow_p_5_8:ba(g,r5,i)*t%i,b2:o}}function Spe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Ipe(t,e){const n=mR,r=sr(e*e*e,n),s=sr(r*r*e,n),i=Ape(t*s).pow_p_5_8;let o=sr(t*r*i,n);const a=sr(e*o*o,n),c=o,l=sr(o*n5,n),u=a===t,d=a===sr(-t,n),h=a===sr(-t*n5,n);return u&&(o=c),(d||h)&&(o=l),cpe(o,n)&&(o=sr(-o,n)),{isValid:u||d,value:o}}const Tpe=V7(mR,void 0,!0),Npe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Tpe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Cpe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Jfe,randomBytes:j7,adjustScalarBytes:Spe,uvRatio:Ipe},J7=Epe(Npe),Ppe="EdDSA",kpe="JWT",Q_=".",BC="base64url",Y7="utf8",Z7="utf8",Ope=":",Rpe="did",Dpe="key",s5="base58btc",$pe="z",Upe="K36",Bpe=32;function yR(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function X7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ez(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=X7(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return yR(n)}function Lpe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,S=b-1;(_!==0||C<y)&&S!==-1;S--,C++)_+=256*x[S]>>>0,x[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var A=c.repeat(g);T<b;++T)A+=t.charAt(x[T]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var T=new Uint8Array(y+(v-S)),A=y;S!==v;)T[A++]=b[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Mpe=Lpe,jpe=Mpe;const tz=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Fpe=t=>new TextEncoder().encode(t),zpe=t=>new TextDecoder().decode(t);let Hpe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Wpe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nz(this,e)}},qpe=class{constructor(e){this.decoders=e}or(e){return nz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const nz=(t,e)=>new qpe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Gpe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Hpe(e,n,r),this.decoder=new Wpe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const LC=({name:t,prefix:e,encode:n,decode:r})=>new Gpe(t,e,n,r),Rv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=jpe(n,e);return LC({prefix:t,name:e,encode:r,decode:i=>tz(s(i))})},Vpe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Kpe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},zr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>LC({prefix:e,name:t,encode(s){return Kpe(s,r,n)},decode(s){return Vpe(s,r,n,t)}}),Qpe=LC({prefix:"\0",name:"identity",encode:t=>zpe(t),decode:t=>Fpe(t)});var Jpe=Object.freeze({__proto__:null,identity:Qpe});const Ype=zr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Zpe=Object.freeze({__proto__:null,base2:Ype});const Xpe=zr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ege=Object.freeze({__proto__:null,base8:Xpe});const tge=Rv({prefix:"9",name:"base10",alphabet:"0123456789"});var nge=Object.freeze({__proto__:null,base10:tge});const rge=zr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sge=zr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ige=Object.freeze({__proto__:null,base16:rge,base16upper:sge});const oge=zr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),age=zr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cge=zr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lge=zr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uge=zr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dge=zr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hge=zr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fge=zr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pge=zr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gge=Object.freeze({__proto__:null,base32:oge,base32upper:age,base32pad:cge,base32padupper:lge,base32hex:uge,base32hexupper:dge,base32hexpad:hge,base32hexpadupper:fge,base32z:pge});const mge=Rv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yge=Rv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wge=Object.freeze({__proto__:null,base36:mge,base36upper:yge});const bge=Rv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vge=Rv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ege=Object.freeze({__proto__:null,base58btc:bge,base58flickr:vge});const _ge=zr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xge=zr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cge=zr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Age=zr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Sge=Object.freeze({__proto__:null,base64:_ge,base64pad:xge,base64url:Cge,base64urlpad:Age});const rz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ige=rz.reduce((t,e,n)=>(t[n]=e,t),[]),Tge=rz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Nge(t){return t.reduce((e,n)=>(e+=Ige[n],e),"")}function Pge(t){const e=[];for(const n of t){const r=Tge[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const kge=LC({prefix:"🚀",name:"base256emoji",encode:Nge,decode:Pge});var Oge=Object.freeze({__proto__:null,base256emoji:kge}),Rge=sz,i5=128,Dge=-128,$ge=Math.pow(2,31);function sz(t,e,n){e=e||[],n=n||0;for(var r=n;t>=$ge;)e[n++]=t&255|i5,t/=128;for(;t&Dge;)e[n++]=t&255|i5,t>>>=7;return e[n]=t|0,sz.bytes=n-r+1,e}var Uge=kN,Bge=128,o5=127;function kN(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw kN.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&o5)<<s:(o&o5)*Math.pow(2,s),s+=7}while(o>=Bge);return kN.bytes=i-r,n}var Lge=Math.pow(2,7),Mge=Math.pow(2,14),jge=Math.pow(2,21),Fge=Math.pow(2,28),zge=Math.pow(2,35),Hge=Math.pow(2,42),Wge=Math.pow(2,49),qge=Math.pow(2,56),Gge=Math.pow(2,63),Vge=function(t){return t<Lge?1:t<Mge?2:t<jge?3:t<Fge?4:t<zge?5:t<Hge?6:t<Wge?7:t<qge?8:t<Gge?9:10},Kge={encode:Rge,decode:Uge,encodingLength:Vge},iz=Kge;const a5=(t,e,n=0)=>(iz.encode(t,e,n),e),c5=t=>iz.encodingLength(t),ON=(t,e)=>{const n=e.byteLength,r=c5(t),s=r+c5(n),i=new Uint8Array(s+n);return a5(t,i,0),a5(n,i,r),i.set(e,s),new Qge(t,n,e,i)};let Qge=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const oz=({name:t,code:e,encode:n})=>new Jge(t,e,n);let Jge=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?ON(this.code,n):n.then(r=>ON(this.code,r))}else throw Error("Unknown type, must be binary type")}};const az=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Yge=oz({name:"sha2-256",code:18,encode:az("SHA-256")}),Zge=oz({name:"sha2-512",code:19,encode:az("SHA-512")});var Xge=Object.freeze({__proto__:null,sha256:Yge,sha512:Zge});const cz=0,eme="identity",lz=tz,tme=t=>ON(cz,lz(t)),nme={code:cz,name:eme,encode:lz,digest:tme};var rme=Object.freeze({__proto__:null,identity:nme});new TextEncoder,new TextDecoder;const l5={...Jpe,...Zpe,...ege,...nge,...ige,...gge,...wge,...Ege,...Sge,...Oge};({...Xge,...rme});function uz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const u5=uz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),g2=uz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=X7(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),dz={utf8:u5,"utf-8":u5,hex:l5.base16,latin1:g2,ascii:g2,binary:g2,...l5};function MC(t,e="utf8"){const n=dz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function yy(t,e="utf8"){const n=dz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yR(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function d5(t){return Cf(MC(yy(t,BC),Y7))}function J_(t){return MC(yy(fl(t),Y7),BC)}function hz(t){const e=yy(Upe,s5),n=$pe+MC(ez([e,t]),s5);return[Rpe,Dpe,n].join(Ope)}function sme(t){return MC(t,BC)}function ime(t){return yy(t,BC)}function ome(t){return yy([J_(t.header),J_(t.payload)].join(Q_),Z7)}function ame(t){return[J_(t.header),J_(t.payload),sme(t.signature)].join(Q_)}function RN(t){const e=t.split(Q_),n=d5(e[0]),r=d5(e[1]),s=ime(e[2]),i=yy(e.slice(0,2).join(Q_),Z7);return{header:n,payload:r,signature:s,data:i}}function h5(t=j7(Bpe)){const e=J7.getPublicKey(t);return{secretKey:ez([t,e]),publicKey:e}}async function cme(t,e,n,r,s=we.fromMiliseconds(Date.now())){const i={alg:Ppe,typ:kpe},o=hz(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=ome({header:i,payload:c}),u=J7.sign(l,r.secretKey.slice(0,32));return ame({header:i,payload:c,signature:u})}var f5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},lme=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),ume=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),dme=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),hme=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),fme=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),pme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,gme=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,p5=3,mme=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pme]],g5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yme(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new fme:typeof navigator<"u"?bme(navigator.userAgent):Eme()}function wme(t){return t!==""&&mme.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function bme(t){var e=wme(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new hme;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<p5&&(s=f5(f5([],s,!0),_me(p5-s.length),!0)):s=[];var i=s.join("."),o=vme(t),a=gme.exec(t);return a&&a[1]?new dme(n,i,o,a[1]):new lme(n,i,o)}function vme(t){for(var e=0,n=g5.length;e<n;e++){var r=g5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Eme(){var t=typeof process<"u"&&process.version;return t?new ume(process.version.slice(1)):null}function _me(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var un={};Object.defineProperty(un,"__esModule",{value:!0});un.getLocalStorage=un.getLocalStorageOrThrow=un.getCrypto=un.getCryptoOrThrow=fz=un.getLocation=un.getLocationOrThrow=wR=un.getNavigator=un.getNavigatorOrThrow=Af=un.getDocument=un.getDocumentOrThrow=un.getFromWindowOrThrow=un.getFromWindow=void 0;function Qf(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}un.getFromWindow=Qf;function wy(t){const e=Qf(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}un.getFromWindowOrThrow=wy;function xme(){return wy("document")}un.getDocumentOrThrow=xme;function Cme(){return Qf("document")}var Af=un.getDocument=Cme;function Ame(){return wy("navigator")}un.getNavigatorOrThrow=Ame;function Sme(){return Qf("navigator")}var wR=un.getNavigator=Sme;function Ime(){return wy("location")}un.getLocationOrThrow=Ime;function Tme(){return Qf("location")}var fz=un.getLocation=Tme;function Nme(){return wy("crypto")}un.getCryptoOrThrow=Nme;function Pme(){return Qf("crypto")}un.getCrypto=Pme;function kme(){return wy("localStorage")}un.getLocalStorageOrThrow=kme;function Ome(){return Qf("localStorage")}un.getLocalStorage=Ome;var bR={};Object.defineProperty(bR,"__esModule",{value:!0});var pz=bR.getWindowMetadata=void 0;const m5=un;function Rme(){let t,e;try{t=m5.getDocumentOrThrow(),e=m5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const v=e.pathname.split("/");v.pop();const b=v.join("/");w+=b+"/"+y}h.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;h.push(w)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}pz=bR.getWindowMetadata=Rme;function gb(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function DN(t){return gb(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const gz="2.31.0";let Xy={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${gz}`};class Sf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Sf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Sf&&n.cause.docsPath||n.docsPath,i=(a=Xy.getDocsUrl)==null?void 0:a.call(Xy,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Xy.version?[`Version: ${Xy.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=gz}walk(e){return mz(this,e)}}function mz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?mz(t.cause,e):e?null:t}class yz extends Sf{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function by(t,{dir:e,size:n=32}={}){return typeof t=="string"?Dme(t,{dir:e,size:n}):$me(t,{dir:e,size:n})}function Dme(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new yz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function $me(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new yz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class Ume extends Sf{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Bme extends Sf{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function vy(t,{size:e}){if(DN(t)>e)throw new Bme({givenSize:DN(t),maxSize:e})}function $N(t,e={}){const{signed:n}=e;e.size&&vy(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Lme(t,e={}){return Number($N(t,e))}const Mme=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function UN(t,e={}){return typeof t=="number"||typeof t=="bigint"?bz(t,e):typeof t=="string"?zme(t,e):typeof t=="boolean"?jme(t,e):wz(t,e)}function jme(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(vy(n,{size:e.size}),by(n,{size:e.size})):n}function wz(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Mme[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(vy(r,{size:e.size}),by(r,{dir:"right",size:e.size})):r}function bz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Ume({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?by(a,{size:r}):a}const Fme=new TextEncoder;function zme(t,e={}){const n=Fme.encode(t);return wz(n,e)}const Hme=new TextEncoder;function Wme(t,e={}){return typeof t=="number"||typeof t=="bigint"?Gme(t,e):typeof t=="boolean"?qme(t,e):gb(t)?vz(t,e):Ez(t,e)}function qme(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(vy(n,{size:e.size}),by(n,{size:e.size})):n}const gc={zero:48,nine:57,A:65,F:70,a:97,f:102};function y5(t){if(t>=gc.zero&&t<=gc.nine)return t-gc.zero;if(t>=gc.A&&t<=gc.F)return t-(gc.A-10);if(t>=gc.a&&t<=gc.f)return t-(gc.a-10)}function vz(t,e={}){let n=t;e.size&&(vy(n,{size:e.size}),n=by(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=y5(r.charCodeAt(a++)),l=y5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Sf(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Gme(t,e){const n=bz(t,e);return vz(n)}function Ez(t,e={}){const n=Hme.encode(t);return typeof e.size=="number"?(vy(n,{size:e.size}),by(n,{dir:"right",size:e.size})):n}function _z(t,e){const n=e||"hex",r=fO(gb(t,{strict:!1})?Wme(t):t);return n==="bytes"?r:UN(r)}class Vme extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const m2=new Vme(8192);function Kme(t,e){if(m2.has(`${t}.${e}`))return m2.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=_z(Ez(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return m2.set(`${t}.${e}`,i),i}function Qme(t){const e=_z(`0x${t.substring(4)}`).substring(26);return Kme(`0x${e}`)}async function Jme({hash:t,signature:e}){const n=gb(t)?t:UN(t),{secp256k1:r}=await Mn(async()=>{const{secp256k1:o}=await import("./secp256k1-QJ90U0H1.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=w5(f);return new r.Signature($N(l),$N(u)).addRecoveryBit(p)}const o=gb(e)?e:UN(e);if(DN(o)!==65)throw new Error("invalid signature length");const a=Lme(`0x${o.slice(130)}`),c=w5(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function w5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Yme({hash:t,signature:e}){return Qme(await Jme({hash:t,signature:e}))}function Zme(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let v=l[h],b=0;for(let x=p-1;(v!==0||b<d)&&x!==-1;x--,b++)v+=256*g[x]>>>0,g[x]=v%n>>>0,v=v/n>>>0;if(v!==0)throw new Error("Non-zero carry");d=b,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(u);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let b=e[v];if(b===255)return;let x=0;for(let _=f-1;(b!==0||x<h)&&_!==-1;_--,x++)b+=n*p[_]>>>0,p[_]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=x,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)y[w++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Xme="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ey=Zme(Xme);function eye(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function tye(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const nye=new TextEncoder,rye=50;function sye(t,e,n){nye.encodeInto(t,e.subarray(n))}function iye(t,e,n){t.length>rye?sye(t,e,n):tye(t,e,n)}const oye=4096;function xz(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=oye&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const aye=new TextDecoder,cye=200;function lye(t,e,n){const r=t.subarray(e,e+n);return aye.decode(r)}function uye(t,e,n){return n>cye?lye(t,e,n):xz(t,e,n)}class j1{constructor(e,n){this.type=e,this.data=n}}class Ni extends Error{constructor(e){super(e);const n=Object.create(Ni.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ni.name})}}const e0=4294967295;function dye(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Cz(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Az(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function hye(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const fye=-1,pye=4294967296-1,gye=17179869184-1;function mye({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=gye)if(e===0&&t<=pye){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Cz(r,4,t),n}}function yye(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function wye(t){if(t instanceof Date){const e=yye(t);return mye(e)}else return null}function bye(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Az(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Ni(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function vye(t){const e=bye(t);return new Date(e.sec*1e3+e.nsec/1e6)}const Eye={type:fye,encode:wye,decode:vye};class Y_{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Eye)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new j1(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new j1(o,i)}}}return e instanceof j1?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new j1(n,e)}}Y_.defaultCodec=new Y_;function _ye(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function BN(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):_ye(t)?new Uint8Array(t):Uint8Array.from(t)}const xye=100,Cye=2048;let Aye=class Sz{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Y_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??xye,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??Cye,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Sz({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=eye(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),iye(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=BN(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),dye(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Cz(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Sye(t,e){return new Aye(e).encodeSharedRef(t)}function y2(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Iye=16,Tye=16;class Nye{constructor(e=Iye,n=Tye){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=xz(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const LN="array",ew="map_key",Iz="map_value",Pye=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ni("The type of key must be string or number but "+typeof t)};class kye{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=LN,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=ew,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===LN){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===ew||e.type===Iz){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const t0=-1,vR=new DataView(new ArrayBuffer(0)),Oye=new Uint8Array(vR.buffer);try{vR.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const b5=new RangeError("Insufficient data"),Rye=new Nye;let Dye=class Tz{constructor(e){this.totalPos=0,this.pos=0,this.view=vR,this.bytes=Oye,this.headByte=t0,this.stack=new kye,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Y_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??e0,this.maxBinLength=(e==null?void 0:e.maxBinLength)??e0,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??e0,this.maxMapLength=(e==null?void 0:e.maxMapLength)??e0,this.maxExtLength=(e==null?void 0:e.maxExtLength)??e0,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Rye,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??Pye}clone(){return new Tz({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=t0,this.stack.reset()}setBuffer(e){const n=BN(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===t0&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=BN(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${y2(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Ni(`Unrecognized type byte: ${y2(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===LN)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===ew){if(n==="__proto__")throw new Ni("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=Iz;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=ew;continue e}}return n}}readHeadByte(){return this.headByte===t0&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=t0}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ni(`Unrecognized array type byte: ${y2(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ni(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ni(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Ni(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw b5;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=uye(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===ew:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ni(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw b5;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ni(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=hye(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Az(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function $ye(t,e){return new Dye(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uye(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Nz(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Z_(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function ER(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function MN(t){if(!Array.isArray(t))throw new Error("array expected")}function X_(t,e){if(!Nz(!0,e))throw new Error(`${t}: array of strings expected`)}function Bye(t,e){if(!Nz(!1,e))throw new Error(`${t}: array of numbers expected`)}function Lye(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function Mye(t){const e=typeof t=="string"?t.split(""):t,n=e.length;X_("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(MN(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(MN(s),s.map(i=>{Z_("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function jye(t=""){return Z_("join",t),{encode:e=>(X_("join.decode",e),e.join(t)),decode:e=>(Z_("join.decode",e),e.split(t))}}function Fye(t,e="="){return ER(t),Z_("padding",e),{encode(n){for(X_("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){X_("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Pz=(t,e)=>e===0?t:Pz(e,t%e),ex=(t,e)=>t+(e-Pz(t,e)),w2=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function v5(t,e,n,r){if(MN(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ex(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${ex(e,n)}`);let s=0,i=0;const o=w2[e],a=w2[n]-1,c=[];for(const l of t){if(ER(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=w2[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function zye(t,e=!1){if(ER(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(ex(8,t)>32||ex(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Uye(n))throw new Error("radix2.encode input should be Uint8Array");return v5(Array.from(n),8,t,!e)},decode:n=>(Bye("radix2.decode",n),Uint8Array.from(v5(n,t,8,e)))}}const Hye=Lye(zye(5),Mye("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Fye(5),jye(""));function _R(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function kz(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_R(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function tw(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=kz(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return _R(n)}function Wye(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,S=b-1;(_!==0||C<y)&&S!==-1;S--,C++)_+=256*x[S]>>>0,x[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var A=c.repeat(g);T<b;++T)A+=t.charAt(x[T]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var T=new Uint8Array(y+(v-S)),A=y;S!==v;)T[A++]=b[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var qye=Wye,Gye=qye;const Vye=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Kye=t=>new TextEncoder().encode(t),Qye=t=>new TextDecoder().decode(t);class Jye{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Yye{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Oz(this,e)}}class Zye{constructor(e){this.decoders=e}or(e){return Oz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Oz=(t,e)=>new Zye({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Xye{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Jye(e,n,r),this.decoder=new Yye(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const jC=({name:t,prefix:e,encode:n,decode:r})=>new Xye(t,e,n,r),Dv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Gye(n,e);return jC({prefix:t,name:e,encode:r,decode:i=>Vye(s(i))})},e0e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},t0e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Hr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>jC({prefix:e,name:t,encode(s){return t0e(s,r,n)},decode(s){return e0e(s,r,n,t)}}),n0e=jC({prefix:"\0",name:"identity",encode:t=>Qye(t),decode:t=>Kye(t)}),r0e=Object.freeze(Object.defineProperty({__proto__:null,identity:n0e},Symbol.toStringTag,{value:"Module"})),s0e=Hr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),i0e=Object.freeze(Object.defineProperty({__proto__:null,base2:s0e},Symbol.toStringTag,{value:"Module"})),o0e=Hr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),a0e=Object.freeze(Object.defineProperty({__proto__:null,base8:o0e},Symbol.toStringTag,{value:"Module"})),c0e=Dv({prefix:"9",name:"base10",alphabet:"0123456789"}),l0e=Object.freeze(Object.defineProperty({__proto__:null,base10:c0e},Symbol.toStringTag,{value:"Module"})),u0e=Hr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),d0e=Hr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),h0e=Object.freeze(Object.defineProperty({__proto__:null,base16:u0e,base16upper:d0e},Symbol.toStringTag,{value:"Module"})),f0e=Hr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),p0e=Hr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),g0e=Hr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),m0e=Hr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),y0e=Hr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),w0e=Hr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),b0e=Hr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v0e=Hr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),E0e=Hr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_0e=Object.freeze(Object.defineProperty({__proto__:null,base32:f0e,base32hex:y0e,base32hexpad:b0e,base32hexpadupper:v0e,base32hexupper:w0e,base32pad:g0e,base32padupper:m0e,base32upper:p0e,base32z:E0e},Symbol.toStringTag,{value:"Module"})),x0e=Dv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),C0e=Dv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),A0e=Object.freeze(Object.defineProperty({__proto__:null,base36:x0e,base36upper:C0e},Symbol.toStringTag,{value:"Module"})),S0e=Dv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),I0e=Dv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),T0e=Object.freeze(Object.defineProperty({__proto__:null,base58btc:S0e,base58flickr:I0e},Symbol.toStringTag,{value:"Module"})),N0e=Hr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),P0e=Hr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),k0e=Hr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O0e=Hr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),R0e=Object.freeze(Object.defineProperty({__proto__:null,base64:N0e,base64pad:P0e,base64url:k0e,base64urlpad:O0e},Symbol.toStringTag,{value:"Module"})),Rz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),D0e=Rz.reduce((t,e,n)=>(t[n]=e,t),[]),$0e=Rz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function U0e(t){return t.reduce((e,n)=>(e+=D0e[n],e),"")}function B0e(t){const e=[];for(const n of t){const r=$0e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const L0e=jC({prefix:"🚀",name:"base256emoji",encode:U0e,decode:B0e}),M0e=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:L0e},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const E5={...r0e,...i0e,...a0e,...l0e,...h0e,..._0e,...A0e,...T0e,...R0e,...M0e};function Dz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _5=Dz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),b2=Dz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=kz(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),$z={utf8:_5,"utf-8":_5,hex:E5.base16,latin1:b2,ascii:b2,binary:b2,...E5};function ho(t,e="utf8"){const n=$z[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_R(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ui(t,e="utf8"){const n=$z[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const j0e={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},F0e="Input must be an string, Buffer or Uint8Array";function z0e(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(F0e);return e}function H0e(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function F1(t){return(4294967296+t).toString(16).substring(1)}function W0e(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=F1(e[s]).toUpperCase(),r+=" ",r+=F1(e[s+1]).toUpperCase();else if(n===64)r+=F1(e[s+1]).toUpperCase(),r+=F1(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function q0e(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Uz={normalizeInput:z0e,toHex:H0e,debugPrint:W0e,testSpeed:q0e};const zE=Uz;function z1(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function x5(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function Bz(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ol(t,e,n,r,s,i){const o=T0[s],a=T0[s+1],c=T0[i],l=T0[i+1];z1(it,t,e),x5(it,t,o,a);let u=it[r]^it[t],d=it[r+1]^it[t+1];it[r]=d,it[r+1]=u,z1(it,n,r),u=it[e]^it[n],d=it[e+1]^it[n+1],it[e]=u>>>24^d<<8,it[e+1]=d>>>24^u<<8,z1(it,t,e),x5(it,t,c,l),u=it[r]^it[t],d=it[r+1]^it[t+1],it[r]=u>>>16^d<<16,it[r+1]=d>>>16^u<<16,z1(it,n,r),u=it[e]^it[n],d=it[e+1]^it[n+1],it[e]=d>>>31^u<<1,it[e+1]=u>>>31^d<<1}const Lz=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),G0e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Yr=new Uint8Array(G0e.map(function(t){return t*2})),it=new Uint32Array(32),T0=new Uint32Array(32);function Mz(t,e){let n=0;for(n=0;n<16;n++)it[n]=t.h[n],it[n+16]=Lz[n];for(it[24]=it[24]^t.t,it[25]=it[25]^t.t/4294967296,e&&(it[28]=~it[28],it[29]=~it[29]),n=0;n<32;n++)T0[n]=Bz(t.b,4*n);for(n=0;n<12;n++)Ol(0,8,16,24,Yr[n*16+0],Yr[n*16+1]),Ol(2,10,18,26,Yr[n*16+2],Yr[n*16+3]),Ol(4,12,20,28,Yr[n*16+4],Yr[n*16+5]),Ol(6,14,22,30,Yr[n*16+6],Yr[n*16+7]),Ol(0,10,20,30,Yr[n*16+8],Yr[n*16+9]),Ol(2,12,22,24,Yr[n*16+10],Yr[n*16+11]),Ol(4,14,16,26,Yr[n*16+12],Yr[n*16+13]),Ol(6,8,18,28,Yr[n*16+14],Yr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^it[n]^it[n+16]}const Rl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function jz(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Rl.fill(0),Rl[0]=t,e&&(Rl[1]=e.length),Rl[2]=1,Rl[3]=1,n&&Rl.set(n,32),r&&Rl.set(r,48);for(let i=0;i<16;i++)s.h[i]=Lz[i]^Bz(Rl,i*4);return e&&(xR(s,e),s.c=128),s}function xR(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,Mz(t,!1),t.c=0),t.b[t.c++]=e[n]}function Fz(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Mz(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function zz(t,e,n,r,s){n=n||64,t=zE.normalizeInput(t),r&&(r=zE.normalizeInput(r)),s&&(s=zE.normalizeInput(s));const i=jz(n,e,r,s);return xR(i,t),Fz(i)}function V0e(t,e,n,r,s){const i=zz(t,e,n,r,s);return zE.toHex(i)}var K0e={blake2b:zz,blake2bHex:V0e,blake2bInit:jz,blake2bUpdate:xR,blake2bFinal:Fz};const Hz=Uz;function Q0e(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Dl(t,e,n,r,s,i){Dt[t]=Dt[t]+Dt[e]+s,Dt[r]=H1(Dt[r]^Dt[t],16),Dt[n]=Dt[n]+Dt[r],Dt[e]=H1(Dt[e]^Dt[n],12),Dt[t]=Dt[t]+Dt[e]+i,Dt[r]=H1(Dt[r]^Dt[t],8),Dt[n]=Dt[n]+Dt[r],Dt[e]=H1(Dt[e]^Dt[n],7)}function H1(t,e){return t>>>e^t<<32-e}const Wz=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Dt=new Uint32Array(16),Cr=new Uint32Array(16);function qz(t,e){let n=0;for(n=0;n<8;n++)Dt[n]=t.h[n],Dt[n+8]=Wz[n];for(Dt[12]^=t.t,Dt[13]^=t.t/4294967296,e&&(Dt[14]=~Dt[14]),n=0;n<16;n++)Cr[n]=Q0e(t.b,4*n);for(n=0;n<10;n++)Dl(0,4,8,12,Cr[Zr[n*16+0]],Cr[Zr[n*16+1]]),Dl(1,5,9,13,Cr[Zr[n*16+2]],Cr[Zr[n*16+3]]),Dl(2,6,10,14,Cr[Zr[n*16+4]],Cr[Zr[n*16+5]]),Dl(3,7,11,15,Cr[Zr[n*16+6]],Cr[Zr[n*16+7]]),Dl(0,5,10,15,Cr[Zr[n*16+8]],Cr[Zr[n*16+9]]),Dl(1,6,11,12,Cr[Zr[n*16+10]],Cr[Zr[n*16+11]]),Dl(2,7,8,13,Cr[Zr[n*16+12]],Cr[Zr[n*16+13]]),Dl(3,4,9,14,Cr[Zr[n*16+14]],Cr[Zr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Dt[n]^Dt[n+8]}function Gz(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Wz),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(CR(r,e),r.c=64),r}function CR(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,qz(t,!1),t.c=0),t.b[t.c++]=e[n]}function Vz(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;qz(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function Kz(t,e,n){n=n||32,t=Hz.normalizeInput(t);const r=Gz(n,e);return CR(r,t),Vz(r)}function J0e(t,e,n){const r=Kz(t,e,n);return Hz.toHex(r)}var Y0e={blake2s:Kz,blake2sHex:J0e,blake2sInit:Gz,blake2sUpdate:CR,blake2sFinal:Vz};const n0=K0e,r0=Y0e;var Z0e={blake2b:n0.blake2b,blake2bHex:n0.blake2bHex,blake2bInit:n0.blake2bInit,blake2bUpdate:n0.blake2bUpdate,blake2bFinal:n0.blake2bFinal,blake2s:r0.blake2s,blake2sHex:r0.blake2sHex,blake2sInit:r0.blake2sInit,blake2sUpdate:r0.blake2sUpdate,blake2sFinal:r0.blake2sFinal},X0e={};const ewe=":";function Eg(t){const[e,n]=t.split(ewe);return{namespace:e,reference:n}}function Qz(t,e){return t.includes(":")?[t]:e.chains||[]}var twe=Object.defineProperty,nwe=Object.defineProperties,rwe=Object.getOwnPropertyDescriptors,C5=Object.getOwnPropertySymbols,swe=Object.prototype.hasOwnProperty,iwe=Object.prototype.propertyIsEnumerable,A5=(t,e,n)=>e in t?twe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S5=(t,e)=>{for(var n in e||(e={}))swe.call(e,n)&&A5(t,n,e[n]);if(C5)for(var n of C5(e))iwe.call(e,n)&&A5(t,n,e[n]);return t},owe=(t,e)=>nwe(t,rwe(e));const awe="ReactNative",Oi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},cwe="js";function tx(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Od(){return!Af()&&!!wR()&&navigator.product===awe}function lwe(){return Od()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function uwe(){return Od()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function _y(){return!tx()&&!!wR()&&!!Af()}function $v(){return Od()?Oi.reactNative:tx()?Oi.node:_y()?Oi.browser:Oi.unknown}function I5(){var t;try{return Od()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function dwe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function hwe(t){var e,n;const r=Jz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),owe(S5(S5({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Jz(){return pz()||{name:"",description:"",url:"",icons:[""]}}function fwe(){if($v()===Oi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=yme();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function pwe(){var t;const e=$v();return e===Oi.browser?[e,((t=fz())==null?void 0:t.host)||"unknown"].join(":"):e}function Yz(t,e,n){const r=fwe(),s=pwe();return[[t,e].join("-"),[cwe,n].join("-"),r,s].join("/")}function gwe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=Yz(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=dwe(l[1]||"",d);return l[0]+"?"+h}function gh(t,e){return t.filter(n=>e.includes(n)).length===t.length}function jN(t){return Object.fromEntries(t.entries())}function FN(t){return new Map(Object.entries(t))}function Qd(t=we.FIVE_MINUTES,e){const n=we.toMiliseconds(t||we.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Hu(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Zz(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function mwe(t){return Zz("topic",t)}function ywe(t){return Zz("id",t)}function Xz(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function tr(t,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(t))}function eu(t){return Date.now()>=we.toMiliseconds(t)}function jt(t,e){return`${t}${e?`:${e}`:""}`}function ec(t=[],e=[]){return[...new Set([...t,...e])]}async function wwe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=bwe(i,t,e),a=$v();if(a===Oi.browser){if(!((r=Af())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}vwe(o)}else a===Oi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function bwe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Cwe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function vwe(t){let e="_self";xwe()?e="_top":(_we()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Ewe(t,e){let n="";try{if(_y()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function T5(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function N5(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function AR(){return typeof process<"u"&&X0e.IS_VITEST==="true"}function _we(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function xwe(){try{return window.self!==window.top}catch{return!1}}function Cwe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function eH(t){return Buffer.from(t,"base64").toString("utf-8")}function Awe(t){return new Promise(e=>setTimeout(e,t))}const W1=BigInt(2**32-1),P5=BigInt(32);function tH(t,e=!1){return e?{h:Number(t&W1),l:Number(t>>P5&W1)}:{h:Number(t>>P5&W1)|0,l:Number(t&W1)|0}}function nH(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=tH(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const k5=(t,e,n)=>t>>>n,O5=(t,e,n)=>t<<32-n|e>>>n,tu=(t,e,n)=>t>>>n|e<<32-n,nu=(t,e,n)=>t<<32-n|e>>>n,N0=(t,e,n)=>t<<64-n|e>>>n-32,P0=(t,e,n)=>t>>>n-32|e<<64-n,Swe=(t,e)=>e,Iwe=(t,e)=>t,Twe=(t,e,n)=>t<<n|e>>>32-n,Nwe=(t,e,n)=>e<<n|t>>>32-n,Pwe=(t,e,n)=>e<<n-32|t>>>64-n,kwe=(t,e,n)=>t<<n-32|e>>>64-n;function Oo(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const SR=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),IR=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Owe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Rwe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Dwe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),$we=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,fp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function TR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function mo(t,...e){if(!TR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function NR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");pl(t.outputLen),pl(t.blockLen)}function bd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function PR(t,e){mo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function mb(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function yo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function v2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function va(t,e){return t<<32-e|t>>>e}const rH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sH(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const vc=rH?t=>t:t=>sH(t);function Uwe(t){for(let e=0;e<t.length;e++)t[e]=sH(t[e]);return t}const ru=rH?t=>t:Uwe,iH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Bwe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yb(t){if(mo(t),iH)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Bwe[t[n]];return e}const mc={_0:48,_9:57,A:65,F:70,a:97,f:102};function R5(t){if(t>=mc._0&&t<=mc._9)return t-mc._0;if(t>=mc.A&&t<=mc.F)return t-(mc.A-10);if(t>=mc.a&&t<=mc.f)return t-(mc.a-10)}function kR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(iH)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=R5(t.charCodeAt(i)),a=R5(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Lwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function sa(t){return typeof t=="string"&&(t=Lwe(t)),mo(t),t}function mh(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];mo(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let FC=class{};function Uv(t){const e=r=>t().update(sa(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Mwe(t){const e=(r,s)=>t(s).update(sa(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function xy(t=32){if(fp&&typeof fp.getRandomValues=="function")return fp.getRandomValues(new Uint8Array(t));if(fp&&typeof fp.randomBytes=="function")return Uint8Array.from(fp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const jwe=BigInt(0),s0=BigInt(1),Fwe=BigInt(2),zwe=BigInt(7),Hwe=BigInt(256),Wwe=BigInt(113),oH=[],aH=[],cH=[];for(let t=0,e=s0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],oH.push(2*(5*r+n)),aH.push((t+1)*(t+2)/2%64);let s=jwe;for(let i=0;i<7;i++)e=(e<<s0^(e>>zwe)*Wwe)%Hwe,e&Fwe&&(s^=s0<<(s0<<BigInt(i))-s0);cH.push(s)}const lH=nH(cH,!0),qwe=lH[0],Gwe=lH[1],D5=(t,e,n)=>n>32?Pwe(t,e,n):Twe(t,e,n),$5=(t,e,n)=>n>32?kwe(t,e,n):Nwe(t,e,n);function Vwe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=D5(l,u,1)^n[a],h=$5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=aH[o],c=D5(s,i,a),l=$5(s,i,a),u=oH[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=qwe[r],t[1]^=Gwe[r]}yo(n)}let Kwe=class uH extends FC{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,pl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=mb(this.state)}clone(){return this._cloneInto()}keccak(){ru(this.state32),Vwe(this.state32,this.rounds),ru(this.state32),this.posOut=0,this.pos=0}update(e){bd(this),e=sa(e),mo(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){bd(this,!1),mo(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return pl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(PR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,yo(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new uH(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Qwe=(t,e,n)=>Uv(()=>new Kwe(e,t,n)),Jwe=Qwe(1,136,256/8);function Ywe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Zwe(t,e,n){return t&e^~t&n}function Xwe(t,e,n){return t&e^t&n^e&n}let dH=class extends FC{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=v2(this.buffer)}update(e){bd(this),e=sa(e),mo(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=v2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){bd(this),PR(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,yo(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ywe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=v2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const $l=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),es=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ebe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ul=new Uint32Array(64);let tbe=class extends dH{constructor(e=32){super(64,e,8,!1),this.A=$l[0]|0,this.B=$l[1]|0,this.C=$l[2]|0,this.D=$l[3]|0,this.E=$l[4]|0,this.F=$l[5]|0,this.G=$l[6]|0,this.H=$l[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ul[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ul[d-15],f=Ul[d-2],p=va(h,7)^va(h,18)^h>>>3,g=va(f,17)^va(f,19)^f>>>10;Ul[d]=g+Ul[d-7]+p+Ul[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=va(a,6)^va(a,11)^va(a,25),f=u+h+Zwe(a,c,l)+ebe[d]+Ul[d]|0,p=(va(r,2)^va(r,13)^va(r,22))+Xwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){yo(Ul)}destroy(){this.set(0,0,0,0,0,0,0,0),yo(this.buffer)}};const hH=nH(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),nbe=hH[0],rbe=hH[1],Bl=new Uint32Array(80),Ll=new Uint32Array(80);let OR=class extends dH{constructor(e=64){super(128,e,16,!1),this.Ah=es[0]|0,this.Al=es[1]|0,this.Bh=es[2]|0,this.Bl=es[3]|0,this.Ch=es[4]|0,this.Cl=es[5]|0,this.Dh=es[6]|0,this.Dl=es[7]|0,this.Eh=es[8]|0,this.El=es[9]|0,this.Fh=es[10]|0,this.Fl=es[11]|0,this.Gh=es[12]|0,this.Gl=es[13]|0,this.Hh=es[14]|0,this.Hl=es[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Bl[b]=e.getUint32(n),Ll[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Bl[b-15]|0,_=Ll[b-15]|0,C=tu(x,_,1)^tu(x,_,8)^k5(x,_,7),S=nu(x,_,1)^nu(x,_,8)^O5(x,_,7),T=Bl[b-2]|0,A=Ll[b-2]|0,P=tu(T,A,19)^N0(T,A,61)^k5(T,A,6),R=nu(T,A,19)^P0(T,A,61)^O5(T,A,6),j=Owe(S,R,Ll[b-7],Ll[b-16]),z=Rwe(j,C,P,Bl[b-7],Bl[b-16]);Bl[b]=z|0,Ll[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=tu(d,h,14)^tu(d,h,18)^N0(d,h,41),_=nu(d,h,14)^nu(d,h,18)^P0(d,h,41),C=d&f^~d&g,S=h&p^~h&y,T=Dwe(v,_,S,rbe[b],Ll[b]),A=$we(T,w,x,C,nbe[b],Bl[b]),P=T|0,R=tu(r,s,28)^N0(r,s,34)^N0(r,s,39),j=nu(r,s,28)^P0(r,s,34)^P0(r,s,39),z=r&i^r&a^i&a,V=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Oo(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=SR(P,j,V);r=IR(I,A,R,z),s=I|0}({h:r,l:s}=Oo(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Oo(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Oo(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Oo(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Oo(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Oo(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Oo(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=Oo(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){yo(Bl,Ll)}destroy(){yo(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},sbe=class extends OR{constructor(){super(48),this.Ah=Xr[0]|0,this.Al=Xr[1]|0,this.Bh=Xr[2]|0,this.Bl=Xr[3]|0,this.Ch=Xr[4]|0,this.Cl=Xr[5]|0,this.Dh=Xr[6]|0,this.Dl=Xr[7]|0,this.Eh=Xr[8]|0,this.El=Xr[9]|0,this.Fh=Xr[10]|0,this.Fl=Xr[11]|0,this.Gh=Xr[12]|0,this.Gl=Xr[13]|0,this.Hh=Xr[14]|0,this.Hl=Xr[15]|0}};const ts=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let ibe=class extends OR{constructor(){super(32),this.Ah=ts[0]|0,this.Al=ts[1]|0,this.Bh=ts[2]|0,this.Bl=ts[3]|0,this.Ch=ts[4]|0,this.Cl=ts[5]|0,this.Dh=ts[6]|0,this.Dl=ts[7]|0,this.Eh=ts[8]|0,this.El=ts[9]|0,this.Fh=ts[10]|0,this.Fl=ts[11]|0,this.Gh=ts[12]|0,this.Gl=ts[13]|0,this.Hh=ts[14]|0,this.Hl=ts[15]|0}};const zC=Uv(()=>new tbe),obe=Uv(()=>new OR),abe=Uv(()=>new sbe),cbe=Uv(()=>new ibe),lbe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),er=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ne=new Uint32Array(32);function Ml(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Ne[2*t],l=Ne[2*t+1],u=Ne[2*e],d=Ne[2*e+1],h=Ne[2*n],f=Ne[2*n+1],p=Ne[2*r],g=Ne[2*r+1],y=SR(c,u,o);l=IR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Swe(g,p),Dl:Iwe(g)},{h:f,l:h}=Oo(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:tu(d,u,24),Bl:nu(d,u,24)},Ne[2*t]=c,Ne[2*t+1]=l,Ne[2*e]=u,Ne[2*e+1]=d,Ne[2*n]=h,Ne[2*n+1]=f,Ne[2*r]=p,Ne[2*r+1]=g}function jl(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Ne[2*t],l=Ne[2*t+1],u=Ne[2*e],d=Ne[2*e+1],h=Ne[2*n],f=Ne[2*n+1],p=Ne[2*r],g=Ne[2*r+1],y=SR(c,u,o);l=IR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:tu(g,p,16),Dl:nu(g,p,16)},{h:f,l:h}=Oo(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:N0(d,u,63),Bl:P0(d,u,63)},Ne[2*t]=c,Ne[2*t+1]=l,Ne[2*e]=u,Ne[2*e+1]=d,Ne[2*n]=h,Ne[2*n+1]=f,Ne[2*r]=p,Ne[2*r+1]=g}function ube(t,e={},n,r,s){if(pl(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class dbe extends FC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,pl(e),pl(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=mb(this.buffer)}update(e){bd(this),e=sa(e),mo(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(ru(s),this.compress(s,0,!1),ru(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));ru(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);ru(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){bd(this),PR(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,yo(this.buffer.subarray(n)),ru(r),this.compress(r,0,!0),ru(r);const s=mb(e);this.get().forEach((i,o)=>s[o]=vc(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class hbe extends dbe{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=er[0]|0,this.v0h=er[1]|0,this.v1l=er[2]|0,this.v1h=er[3]|0,this.v2l=er[4]|0,this.v2h=er[5]|0,this.v3l=er[6]|0,this.v3h=er[7]|0,this.v4l=er[8]|0,this.v4h=er[9]|0,this.v5l=er[10]|0,this.v5h=er[11]|0,this.v6l=er[12]|0,this.v6h=er[13]|0,this.v7l=er[14]|0,this.v7h=er[15]|0,ube(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=sa(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=sa(i);const a=mb(i);this.v4l^=vc(a[0]),this.v4h^=vc(a[1]),this.v5l^=vc(a[2]),this.v5h^=vc(a[3])}if(s!==void 0){s=sa(s);const a=mb(s);this.v6l^=vc(a[0]),this.v6h^=vc(a[1]),this.v7l^=vc(a[2]),this.v7h^=vc(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>Ne[l]=c),Ne.set(er,16);let{h:s,l:i}=tH(BigInt(this.length));Ne[24]=er[8]^i,Ne[25]=er[9]^s,r&&(Ne[28]=~Ne[28],Ne[29]=~Ne[29]);let o=0;const a=lbe;for(let c=0;c<12;c++)Ml(0,4,8,12,e,n+2*a[o++]),jl(0,4,8,12,e,n+2*a[o++]),Ml(1,5,9,13,e,n+2*a[o++]),jl(1,5,9,13,e,n+2*a[o++]),Ml(2,6,10,14,e,n+2*a[o++]),jl(2,6,10,14,e,n+2*a[o++]),Ml(3,7,11,15,e,n+2*a[o++]),jl(3,7,11,15,e,n+2*a[o++]),Ml(0,5,10,15,e,n+2*a[o++]),jl(0,5,10,15,e,n+2*a[o++]),Ml(1,6,11,12,e,n+2*a[o++]),jl(1,6,11,12,e,n+2*a[o++]),Ml(2,7,8,13,e,n+2*a[o++]),jl(2,7,8,13,e,n+2*a[o++]),Ml(3,4,9,14,e,n+2*a[o++]),jl(3,4,9,14,e,n+2*a[o++]);this.v0l^=Ne[0]^Ne[16],this.v0h^=Ne[1]^Ne[17],this.v1l^=Ne[2]^Ne[18],this.v1h^=Ne[3]^Ne[19],this.v2l^=Ne[4]^Ne[20],this.v2h^=Ne[5]^Ne[21],this.v3l^=Ne[6]^Ne[22],this.v3h^=Ne[7]^Ne[23],this.v4l^=Ne[8]^Ne[24],this.v4h^=Ne[9]^Ne[25],this.v5l^=Ne[10]^Ne[26],this.v5h^=Ne[11]^Ne[27],this.v6l^=Ne[12]^Ne[28],this.v6h^=Ne[13]^Ne[29],this.v7l^=Ne[14]^Ne[30],this.v7h^=Ne[15]^Ne[31],yo(Ne)}destroy(){this.destroyed=!0,yo(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fbe=Mwe(t=>new hbe(t)),pbe="https://rpc.walletconnect.org/v1";function fH(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Jwe(n)).toString("hex")}async function gbe(t,e,n,r,s,i){switch(n.t){case"eip191":return await mbe(t,e,n.s);case"eip1271":return await ybe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function mbe(t,e,n){return(await Yme({hash:fH(e),signature:n})).toLowerCase()===t.toLowerCase()}async function ybe(t,e,n,r,s,i){const o=Eg(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:fH(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||pbe}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:wbe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function wbe(){return Date.now()+Math.floor(Math.random()*1e3)}function bbe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ey.encode(i)}function vbe(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=fbe(r,{dkLen:32});return Ey.encode(s)}function U5(t){const e=new Uint8Array(zC(Ebe(t)));return Ey.encode(e)}function Ebe(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function B5(t){const e=Buffer.from(t,"base64"),n=$ye(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Sye(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=cbe(i);return Hye.encode(o).replace(/=+$/,"")}function E2(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function _be(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(E2(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(E2(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(E2(r.length)),s.push(r);const i=Buffer.concat(s),o=zC(i);return Buffer.from(o).toString("hex").toUpperCase()}var xbe=Object.defineProperty,Cbe=Object.defineProperties,Abe=Object.getOwnPropertyDescriptors,L5=Object.getOwnPropertySymbols,Sbe=Object.prototype.hasOwnProperty,Ibe=Object.prototype.propertyIsEnumerable,M5=(t,e,n)=>e in t?xbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tbe=(t,e)=>{for(var n in e||(e={}))Sbe.call(e,n)&&M5(t,n,e[n]);if(L5)for(var n of L5(e))Ibe.call(e,n)&&M5(t,n,e[n]);return t},Nbe=(t,e)=>Cbe(t,Abe(e));const Pbe="did:pkh:",RR=t=>t==null?void 0:t.split(":"),kbe=t=>{const e=t&&RR(t);if(e)return t.includes(Pbe)?e[3]:e[1]},zN=t=>{const e=t&&RR(t);if(e)return e[2]+":"+e[3]},nx=t=>{const e=t&&RR(t);if(e)return e.pop()};async function j5(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=pH(s,s.iss),o=nx(s.iss);return await gbe(o,i,r,zN(s.iss),n)}const pH=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=nx(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${kbe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=HE(t.resources);if(p){const g=wb(p);s=jbe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Obe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Rbe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function If(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Dbe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:$be(e,n,r)}}}function $be(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function gH(t){return If(t),`urn:recap:${Obe(t).replace(/=/g,"")}`}function wb(t){const e=Rbe(t.replace("urn:recap:",""));return If(e),e}function Ube(t,e,n){const r=Dbe(t,e,n);return gH(r)}function Bbe(t){return t&&t.includes("urn:recap:")}function Lbe(t,e){const n=wb(t),r=wb(e),s=Mbe(n,r);return gH(s)}function Mbe(t,e){If(t),If(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Nbe(Tbe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function jbe(t="",e){If(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function F5(t){var e;const n=wb(t);If(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function z5(t){const e=wb(t);If(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function HE(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Bbe(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function mH(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function HN(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function _2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Zs(t,...e){if(!mH(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function H5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fbe(t,e){Zs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function od(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Wm(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function zbe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Hbe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Wbe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function WN(t){if(typeof t=="string")t=Wbe(t);else if(mH(t))t=qN(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function qbe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Gbe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Vbe=(t,e)=>{function n(r,...s){if(Zs(r),!Hbe)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Zs(l):Zs(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Zs(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Zs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Zs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Zs(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function W5(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Qbe(e))throw new Error("invalid output, must be aligned");return e}function q5(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Kbe(t,e,n){HN(n);const r=new Uint8Array(16),s=zbe(r);return q5(s,0,BigInt(e),n),q5(s,8,BigInt(t),n),r}function Qbe(t){return t.byteOffset%4===0}function qN(t){return Uint8Array.from(t)}const yH=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Jbe=yH("expand 16-byte k"),Ybe=yH("expand 32-byte k"),Zbe=od(Jbe),Xbe=od(Ybe);function kt(t,e){return t<<e|t>>>32-e}function GN(t){return t.byteOffset%4===0}const q1=64,eve=16,wH=2**32-1,G5=new Uint32Array;function tve(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(q1),u=od(l),d=GN(s)&&GN(i),h=d?od(s):G5,f=d?od(i):G5;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=wH)throw new Error("arx: counter overflow");const g=Math.min(q1,c-p);if(d&&g===q1){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,v;w<eve;w++)v=y+w,f[v]=h[v]^u[w];p+=q1;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^l[y];p+=g}}function nve(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=qbe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return _2(s),_2(o),HN(i),HN(n),(a,c,l,u,d=0)=>{Zs(a),Zs(c),Zs(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Zs(u),_2(d),d<0||d>=wH)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=qN(a)),y=Xbe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=Zbe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);GN(c)||f.push(c=qN(c));const w=od(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,od(c.subarray(0,16)),w),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const x=new Uint8Array(12);x.set(c,i?0:12-c.length),c=x,f.push(c)}const b=od(c);return tve(t,y,w,b,l,u,d,o),Wm(...f),u}}const Ar=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class rve{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=WN(e),Zs(e,32);const n=Ar(e,0),r=Ar(e,2),s=Ar(e,4),i=Ar(e,6),o=Ar(e,8),a=Ar(e,10),c=Ar(e,12),l=Ar(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ar(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],w=Ar(e,n+0),v=Ar(e,n+2),b=Ar(e,n+4),x=Ar(e,n+6),_=Ar(e,n+8),C=Ar(e,n+10),S=Ar(e,n+12),T=Ar(e,n+14);let A=i[0]+(w&8191),P=i[1]+((w>>>13|v<<3)&8191),R=i[2]+((v>>>10|b<<6)&8191),j=i[3]+((b>>>7|x<<9)&8191),z=i[4]+((x>>>4|_<<12)&8191),V=i[5]+(_>>>1&8191),I=i[6]+((_>>>14|C<<2)&8191),N=i[7]+((C>>>11|S<<5)&8191),L=i[8]+((S>>>8|T<<8)&8191),U=i[9]+(T>>>5|s),$=0,M=$+A*a+P*(5*y)+R*(5*g)+j*(5*p)+z*(5*f);$=M>>>13,M&=8191,M+=V*(5*h)+I*(5*d)+N*(5*u)+L*(5*l)+U*(5*c),$+=M>>>13,M&=8191;let q=$+A*c+P*a+R*(5*y)+j*(5*g)+z*(5*p);$=q>>>13,q&=8191,q+=V*(5*f)+I*(5*h)+N*(5*d)+L*(5*u)+U*(5*l),$+=q>>>13,q&=8191;let Z=$+A*l+P*c+R*a+j*(5*y)+z*(5*g);$=Z>>>13,Z&=8191,Z+=V*(5*p)+I*(5*f)+N*(5*h)+L*(5*d)+U*(5*u),$+=Z>>>13,Z&=8191;let ie=$+A*u+P*l+R*c+j*a+z*(5*y);$=ie>>>13,ie&=8191,ie+=V*(5*g)+I*(5*p)+N*(5*f)+L*(5*h)+U*(5*d),$+=ie>>>13,ie&=8191;let re=$+A*d+P*u+R*l+j*c+z*a;$=re>>>13,re&=8191,re+=V*(5*y)+I*(5*g)+N*(5*p)+L*(5*f)+U*(5*h),$+=re>>>13,re&=8191;let ce=$+A*h+P*d+R*u+j*l+z*c;$=ce>>>13,ce&=8191,ce+=V*a+I*(5*y)+N*(5*g)+L*(5*p)+U*(5*f),$+=ce>>>13,ce&=8191;let ge=$+A*f+P*h+R*d+j*u+z*l;$=ge>>>13,ge&=8191,ge+=V*c+I*a+N*(5*y)+L*(5*g)+U*(5*p),$+=ge>>>13,ge&=8191;let J=$+A*p+P*f+R*h+j*d+z*u;$=J>>>13,J&=8191,J+=V*l+I*c+N*a+L*(5*y)+U*(5*g),$+=J>>>13,J&=8191;let te=$+A*g+P*p+R*f+j*h+z*d;$=te>>>13,te&=8191,te+=V*u+I*l+N*c+L*a+U*(5*y),$+=te>>>13,te&=8191;let oe=$+A*y+P*g+R*p+j*f+z*h;$=oe>>>13,oe&=8191,oe+=V*d+I*u+N*l+L*c+U*a,$+=oe>>>13,oe&=8191,$=($<<2)+$|0,$=$+M|0,M=$&8191,$=$>>>13,q+=$,i[0]=M,i[1]=q,i[2]=Z,i[3]=ie,i[4]=re,i[5]=ce,i[6]=ge,i[7]=J,i[8]=te,i[9]=oe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Wm(r)}update(e){H5(this),e=WN(e),Zs(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Wm(this.h,this.r,this.buffer,this.pad)}digestInto(e){H5(this),Fbe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function sve(t){const e=(r,s)=>t(s).update(WN(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const ive=sve(t=>new rve(t));function ove(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],w=e[7],v=s,b=n[0],x=n[1],_=n[2],C=o,S=a,T=c,A=l,P=u,R=d,j=h,z=f,V=p,I=g,N=y,L=w,U=v,$=b,M=x,q=_;for(let ie=0;ie<i;ie+=2)C=C+P|0,U=kt(U^C,16),V=V+U|0,P=kt(P^V,12),C=C+P|0,U=kt(U^C,8),V=V+U|0,P=kt(P^V,7),S=S+R|0,$=kt($^S,16),I=I+$|0,R=kt(R^I,12),S=S+R|0,$=kt($^S,8),I=I+$|0,R=kt(R^I,7),T=T+j|0,M=kt(M^T,16),N=N+M|0,j=kt(j^N,12),T=T+j|0,M=kt(M^T,8),N=N+M|0,j=kt(j^N,7),A=A+z|0,q=kt(q^A,16),L=L+q|0,z=kt(z^L,12),A=A+z|0,q=kt(q^A,8),L=L+q|0,z=kt(z^L,7),C=C+R|0,q=kt(q^C,16),N=N+q|0,R=kt(R^N,12),C=C+R|0,q=kt(q^C,8),N=N+q|0,R=kt(R^N,7),S=S+j|0,U=kt(U^S,16),L=L+U|0,j=kt(j^L,12),S=S+j|0,U=kt(U^S,8),L=L+U|0,j=kt(j^L,7),T=T+z|0,$=kt($^T,16),V=V+$|0,z=kt(z^V,12),T=T+z|0,$=kt($^T,8),V=V+$|0,z=kt(z^V,7),A=A+P|0,M=kt(M^A,16),I=I+M|0,P=kt(P^I,12),A=A+P|0,M=kt(M^A,8),I=I+M|0,P=kt(P^I,7);let Z=0;r[Z++]=o+C|0,r[Z++]=a+S|0,r[Z++]=c+T|0,r[Z++]=l+A|0,r[Z++]=u+P|0,r[Z++]=d+R|0,r[Z++]=h+j|0,r[Z++]=f+z|0,r[Z++]=p+V|0,r[Z++]=g+I|0,r[Z++]=y+N|0,r[Z++]=w+L|0,r[Z++]=v+U|0,r[Z++]=b+$|0,r[Z++]=x+M|0,r[Z++]=_+q|0}const ave=nve(ove,{counterRight:!1,counterLength:4,allowShortKeys:!1}),cve=new Uint8Array(16),V5=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(cve.subarray(n))},lve=new Uint8Array(32);function K5(t,e,n,r,s){const i=t(e,n,lve),o=ive.create(i);s&&V5(o,s),V5(o,r);const a=Kbe(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Wm(i,a),c}const uve=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=W5(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=K5(t,e,n,a,r);return i.set(c,o),Wm(c),i},decrypt(s,i){i=W5(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=K5(t,e,n,o,r);if(!Gbe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Wm(c),i}}),bH=Vbe({blockSize:64,nonceLength:12,tagLength:16},uve(ave));let vH=class extends FC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,NR(e);const r=sa(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),yo(i)}update(e){return bd(this),this.iHash.update(e),this}digestInto(e){bd(this),mo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const HC=(t,e,n)=>new vH(t,e).update(n).digest();HC.create=(t,e)=>new vH(t,e);function dve(t,e,n){return NR(t),n===void 0&&(n=new Uint8Array(t.outputLen)),HC(t,sa(n),sa(e))}const x2=Uint8Array.from([0]),Q5=Uint8Array.of();function hve(t,e,n,r=32){NR(t),pl(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Q5);const o=new Uint8Array(i*s),a=HC.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)x2[0]=u+1,c.update(u===0?Q5:l).update(n).update(x2).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),yo(l,x2),o.slice(0,r)}const fve=(t,e,n,r,s)=>hve(t,dve(t,e,n),r,s),WC=zC,DR=BigInt(0),VN=BigInt(1);function rx(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function G1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function EH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?DR:BigInt("0x"+t)}function qC(t){return EH(yb(t))}function sx(t){return mo(t),EH(yb(Uint8Array.from(t).reverse()))}function $R(t,e){return kR(t.toString(16).padStart(e*2,"0"))}function UR(t,e){return $R(t,e).reverse()}function Ys(t,e,n){let r;if(typeof e=="string")try{r=kR(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(TR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const C2=t=>typeof t=="bigint"&&DR<=t;function pve(t,e,n){return C2(t)&&C2(e)&&C2(n)&&e<=t&&t<n}function KN(t,e,n,r){if(!pve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gve(t){let e;for(e=0;t>DR;t>>=VN,e+=1);return e}const GC=t=>(VN<<BigInt(t))-VN;function mve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return mh(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function VC(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function J5(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ii=BigInt(0),Ts=BigInt(1),yh=BigInt(2),yve=BigInt(3),_H=BigInt(4),xH=BigInt(5),CH=BigInt(8);function ao(t,e){const n=t%e;return n>=ii?n:e+n}function No(t,e,n){let r=t;for(;e-- >ii;)r*=r,r%=n;return r}function Y5(t,e){if(t===ii)throw new Error("invert: expected non-zero number");if(e<=ii)throw new Error("invert: expected positive modulus, got "+e);let n=ao(t,e),r=e,s=ii,i=Ts;for(;n!==ii;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ts)throw new Error("invert: does not exist");return ao(s,e)}function AH(t,e){const n=(t.ORDER+Ts)/_H,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function wve(t,e){const n=(t.ORDER-xH)/CH,r=t.mul(e,yh),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,yh),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function bve(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ts,n=0;for(;e%yh===ii;)e/=yh,n++;let r=yh;const s=Cy(t);for(;Z5(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return AH;let i=s.pow(r,e);const o=(e+Ts)/yh;return function(a,c){if(a.is0(c))return c;if(Z5(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=Ts<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function vve(t){return t%_H===yve?AH:t%CH===xH?wve:bve(t)}const Eve=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _ve(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Eve.reduce((r,s)=>(r[s]="function",r),e);return VC(t,n),t}function xve(t,e,n){if(n<ii)throw new Error("invalid exponent, negatives unsupported");if(n===ii)return t.ONE;if(n===Ts)return e;let r=t.ONE,s=e;for(;n>ii;)n&Ts&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ts;return r}function SH(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Z5(t,e){const n=(t.ORDER-Ts)/yh,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Cve(t,e){e!==void 0&&pl(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Cy(t,e,n=!1,r={}){if(t<=ii)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Cve(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:GC(o),ZERO:ii,ONE:Ts,create:u=>ao(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return ii<=u&&u<t},is0:u=>u===ii,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ts)===Ts,neg:u=>ao(-u,t),eql:(u,d)=>u===d,sqr:u=>ao(u*u,t),add:(u,d)=>ao(u+d,t),sub:(u,d)=>ao(u-d,t),mul:(u,d)=>ao(u*d,t),pow:(u,d)=>xve(l,u,d),div:(u,d)=>ao(u*Y5(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>Y5(u,t),sqrt:i||(u=>(c||(c=vve(t)),c(l,u))),toBytes:u=>n?UR(u,a):$R(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?sx(u):qC(u)},invertBatch:u=>SH(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function IH(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function TH(t){const e=IH(t);return e+Math.ceil(e/2)}function Ave(t,e,n=!1){const r=t.length,s=IH(e),i=TH(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?sx(t):qC(t),a=ao(o,e-Ts)+Ts;return n?UR(a,s):$R(a,s)}const qm=BigInt(0),wh=BigInt(1);function nw(t,e){const n=e.negate();return t?n:e}function Sve(t,e,n){const r=i=>i.pz,s=SH(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function NH(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function A2(t,e){NH(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=GC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function X5(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=wh);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Ive(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Tve(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const S2=new WeakMap,PH=new WeakMap;function I2(t){return PH.get(t)||1}function eU(t){if(t!==qm)throw new Error("invalid wNAF")}function Nve(t,e){return{constTimeNegate:nw,hasPrecomputes(n){return I2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>qm;)r&wh&&(s=s.add(i)),i=i.double(),r>>=wh;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=A2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=A2(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=X5(s,c,a);s=l,d?o=o.add(nw(f,r[p])):i=i.add(nw(h,r[u]))}return eU(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=A2(n,e);for(let a=0;a<o.windows&&s!==qm;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=X5(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return eU(s),i},getPrecomputes(n,r,s){let i=S2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),S2.set(r,i))),i},wNAFCached(n,r,s){const i=I2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=I2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){NH(r,e),PH.set(n,r),S2.delete(n)}}}function Pve(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>qm||r>qm;)n&wh&&(i=i.add(s)),r&wh&&(o=o.add(s)),s=s.double(),n>>=wh,r>>=wh;return{p1:i,p2:o}}function kve(t,e,n,r){Ive(n,t),Tve(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=gve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=GC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function tU(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return _ve(e),e}else return Cy(t)}function Ove(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>qm))throw new Error(`CURVE.${o} must be positive bigint`)}const r=tU(e.p,n.Fp),s=tU(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const i0=BigInt(0),pp=BigInt(1),V1=BigInt(2);function Rve(t){return VC(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Dve(t){const e=Rve(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||xy,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?V1**BigInt(254):V1**BigInt(447),p=a?BigInt(8)*V1**BigInt(251)-pp:BigInt(4)*V1**BigInt(445)-pp,g=f+p+pp,y=A=>ao(A,n),w=v(d);function v(A){return UR(y(A),u)}function b(A){const P=Ys("u coordinate",A,u);return a&&(P[31]&=127),y(sx(P))}function x(A){return sx(s(Ys("scalar",A,u)))}function _(A,P){const R=T(b(P),x(A));if(R===i0)throw new Error("invalid private or public key received");return v(R)}function C(A){return _(A,w)}function S(A,P,R){const j=y(A*(P-R));return P=y(P-j),R=y(R+j),{x_2:P,x_3:R}}function T(A,P){KN("u",A,i0,n),KN("scalar",P,f,g);const R=P,j=A;let z=pp,V=i0,I=A,N=pp,L=i0;for(let $=BigInt(l-1);$>=i0;$--){const M=R>>$&pp;L^=M,{x_2:z,x_3:I}=S(L,z,I),{x_2:V,x_3:N}=S(L,V,N),L=M;const q=z+V,Z=y(q*q),ie=z-V,re=y(ie*ie),ce=Z-re,ge=I+N,J=I-N,te=y(J*q),oe=y(ge*ie),se=te+oe,me=te-oe;I=y(se*se),N=y(j*y(me*me)),z=y(Z*re),V=y(ce*(Z+y(h*ce)))}({x_2:z,x_3:I}=S(L,z,I)),{x_2:V,x_3:N}=S(L,V,N);const U=i(V);return y(z*U)}return{scalarMult:_,scalarMultBase:C,getSharedSecret:(A,P)=>_(A,P),getPublicKey:A=>C(A),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const $ve=BigInt(1),nU=BigInt(2),Uve=BigInt(3),Bve=BigInt(5);BigInt(8);const kH={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Lve(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=kH.p,o=t*t%i*t%i,a=No(o,nU,i)*o%i,c=No(a,$ve,i)*t%i,l=No(c,Bve,i)*c%i,u=No(l,e,i)*l%i,d=No(u,n,i)*u%i,h=No(d,r,i)*d%i,f=No(h,s,i)*h%i,p=No(f,s,i)*h%i,g=No(p,e,i)*l%i;return{pow_p_5_8:No(g,nU,i)*t%i,b2:o}}function Mve(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const QN=(()=>{const t=kH.p;return Dve({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Lve(e);return ao(No(n,Uve,t)*r,t)},adjustScalarBytes:Mve})})();function rU(t){t.lowS!==void 0&&rx("lowS",t.lowS),t.prehash!==void 0&&rx("prehash",t.prehash)}class jve extends Error{constructor(e=""){super(e)}}const Pc={Err:jve,_tlv:{encode:(t,e)=>{const{Err:n}=Pc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=G1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?G1(s.length/2|128):"";return G1(t)+i+s+e},decode(t,e){const{Err:n}=Pc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Pc;if(t<rw)throw new e("integer: negative integers are not allowed");let n=G1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Pc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return qC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Pc,s=Ys("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Pc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},rw=BigInt(0),sw=BigInt(1),Fve=BigInt(2),K1=BigInt(3),zve=BigInt(4);function Hve(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function OH(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Ys("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Wve(t,e={}){const{Fp:n,Fn:r}=Ove("weierstrass",t,e),{h:s,n:i}=t;VC(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,A,P){const{x:R,y:j}=A.toAffine(),z=n.toBytes(R);if(rx("isCompressed",P),P){a();const V=!n.isOdd(j);return mh(RH(V),z)}else return mh(Uint8Array.of(4),z,n.toBytes(j))}function l(T){mo(T);const A=n.BYTES,P=A+1,R=2*A+1,j=T.length,z=T[0],V=T.subarray(1);if(j===P&&(z===2||z===3)){const I=n.fromBytes(V);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const N=h(I);let L;try{L=n.sqrt(N)}catch($){const M=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+M)}a();const U=n.isOdd(L);return(z&1)===1!==U&&(L=n.neg(L)),{x:I,y:L}}else if(j===R&&z===4){const I=n.fromBytes(V.subarray(A*0,A*1)),N=n.fromBytes(V.subarray(A*1,A*2));if(!f(I,N))throw new Error("bad point: is not on curve");return{x:I,y:N}}else throw new Error(`bad point: got length ${j}, expected compressed=${P} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Hve(n,t.a,t.b);function f(T,A){const P=n.sqr(A),R=h(T);return n.eql(P,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,K1),zve),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,A,P=!1){if(!n.isValid(A)||P&&n.is0(A))throw new Error(`bad point coordinate ${T}`);return A}function w(T){if(!(T instanceof _))throw new Error("ProjectivePoint expected")}const v=J5((T,A)=>{const{px:P,py:R,pz:j}=T;if(n.eql(j,n.ONE))return{x:P,y:R};const z=T.is0();A==null&&(A=z?n.ONE:n.inv(j));const V=n.mul(P,A),I=n.mul(R,A),N=n.mul(j,A);if(z)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:V,y:I}}),b=J5(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:A,y:P}=T.toAffine();if(!n.isValid(A)||!n.isValid(P))throw new Error("bad point: x or y not field elements");if(!f(A,P))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function x(T,A,P,R,j){return P=new _(n.mul(P.px,T),P.py,P.pz),A=nw(R,A),P=nw(j,P),A.add(P)}class _{constructor(A,P,R){this.px=y("x",A),this.py=y("y",P,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(A){const{x:P,y:R}=A||{};if(!A||!n.isValid(P)||!n.isValid(R))throw new Error("invalid affine point");if(A instanceof _)throw new Error("projective point not allowed");return n.is0(P)&&n.is0(R)?_.ZERO:new _(P,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){return Sve(_,"pz",A)}static fromBytes(A){return mo(A),_.fromHex(A)}static fromHex(A){const P=_.fromAffine(d(Ys("pointHex",A)));return P.assertValidity(),P}static fromPrivateKey(A){const P=OH(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(P(A))}static msm(A,P){return kve(_,r,A,P)}precompute(A=8,P=!0){return S.setWindowSize(this,A),P||this.multiply(K1),this}_setWindowSize(A){this.precompute(A)}assertValidity(){b(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){w(A);const{px:P,py:R,pz:j}=this,{px:z,py:V,pz:I}=A,N=n.eql(n.mul(P,I),n.mul(z,j)),L=n.eql(n.mul(R,I),n.mul(V,j));return N&&L}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:P}=t,R=n.mul(P,K1),{px:j,py:z,pz:V}=this;let I=n.ZERO,N=n.ZERO,L=n.ZERO,U=n.mul(j,j),$=n.mul(z,z),M=n.mul(V,V),q=n.mul(j,z);return q=n.add(q,q),L=n.mul(j,V),L=n.add(L,L),I=n.mul(A,L),N=n.mul(R,M),N=n.add(I,N),I=n.sub($,N),N=n.add($,N),N=n.mul(I,N),I=n.mul(q,I),L=n.mul(R,L),M=n.mul(A,M),q=n.sub(U,M),q=n.mul(A,q),q=n.add(q,L),L=n.add(U,U),U=n.add(L,U),U=n.add(U,M),U=n.mul(U,q),N=n.add(N,U),M=n.mul(z,V),M=n.add(M,M),U=n.mul(M,q),I=n.sub(I,U),L=n.mul(M,$),L=n.add(L,L),L=n.add(L,L),new _(I,N,L)}add(A){w(A);const{px:P,py:R,pz:j}=this,{px:z,py:V,pz:I}=A;let N=n.ZERO,L=n.ZERO,U=n.ZERO;const $=t.a,M=n.mul(t.b,K1);let q=n.mul(P,z),Z=n.mul(R,V),ie=n.mul(j,I),re=n.add(P,R),ce=n.add(z,V);re=n.mul(re,ce),ce=n.add(q,Z),re=n.sub(re,ce),ce=n.add(P,j);let ge=n.add(z,I);return ce=n.mul(ce,ge),ge=n.add(q,ie),ce=n.sub(ce,ge),ge=n.add(R,j),N=n.add(V,I),ge=n.mul(ge,N),N=n.add(Z,ie),ge=n.sub(ge,N),U=n.mul($,ce),N=n.mul(M,ie),U=n.add(N,U),N=n.sub(Z,U),U=n.add(Z,U),L=n.mul(N,U),Z=n.add(q,q),Z=n.add(Z,q),ie=n.mul($,ie),ce=n.mul(M,ce),Z=n.add(Z,ie),ie=n.sub(q,ie),ie=n.mul($,ie),ce=n.add(ce,ie),q=n.mul(Z,ce),L=n.add(L,q),q=n.mul(ge,ce),N=n.mul(re,N),N=n.sub(N,q),q=n.mul(re,Z),U=n.mul(ge,U),U=n.add(U,q),new _(N,L,U)}subtract(A){return this.add(A.negate())}is0(){return this.equals(_.ZERO)}multiply(A){const{endo:P}=e;if(!r.isValidNot0(A))throw new Error("invalid scalar: out of range");let R,j;const z=V=>S.wNAFCached(this,V,_.normalizeZ);if(P){const{k1neg:V,k1:I,k2neg:N,k2:L}=P.splitScalar(A),{p:U,f:$}=z(I),{p:M,f:q}=z(L);j=$.add(q),R=x(P.beta,U,M,V,N)}else{const{p:V,f:I}=z(A);R=V,j=I}return _.normalizeZ([R,j])[0]}multiplyUnsafe(A){const{endo:P}=e,R=this;if(!r.isValid(A))throw new Error("invalid scalar: out of range");if(A===rw||R.is0())return _.ZERO;if(A===sw)return R;if(S.hasPrecomputes(this))return this.multiply(A);if(P){const{k1neg:j,k1:z,k2neg:V,k2:I}=P.splitScalar(A),{p1:N,p2:L}=Pve(_,R,z,I);return x(P.beta,N,L,j,V)}else return S.wNAFCachedUnsafe(R,A)}multiplyAndAddUnsafe(A,P,R){const j=this.multiplyUnsafe(P).add(A.multiplyUnsafe(R));return j.is0()?void 0:j}toAffine(A){return v(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return s===sw?!0:A?A(_,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:A}=e;return s===sw?this:A?A(_,this):this.multiplyUnsafe(s)}toBytes(A=!0){return rx("isCompressed",A),this.assertValidity(),u(_,this,A)}toRawBytes(A=!0){return this.toBytes(A)}toHex(A=!0){return yb(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const C=r.BITS,S=Nve(_,e.endo?Math.ceil(C/2):C);return _}function RH(t){return Uint8Array.of(t?2:3)}function qve(t,e,n={}){VC(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||xy,s=e.hmac||((R,...j)=>HC(e.hash,R,mh(...j))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const j=a>>sw;return R>j}function u(R){return l(R)?o.neg(R):R}function d(R,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(j,z,V){d("r",j),d("s",z),this.r=j,this.s=z,V!=null&&(this.recovery=V),Object.freeze(this)}static fromCompact(j){const z=o.BYTES,V=Ys("compactSignature",j,z*2);return new h(o.fromBytes(V.subarray(0,z)),o.fromBytes(V.subarray(z,z*2)))}static fromDER(j){const{r:z,s:V}=Pc.toSig(Ys("DER",j));return new h(z,V)}assertValidity(){}addRecoveryBit(j){return new h(this.r,this.s,j)}recoverPublicKey(j){const z=i.ORDER,{r:V,s:I,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Fve<z&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=N===2||N===3?V+a:V;if(!i.isValid(L))throw new Error("recovery id 2 or 3 invalid");const U=i.toBytes(L),$=t.fromHex(mh(RH((N&1)===0),U)),M=o.inv(L),q=b(Ys("msgHash",j)),Z=o.create(-q*M),ie=o.create(I*M),re=t.BASE.multiplyUnsafe(Z).add($.multiplyUnsafe(ie));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(j){if(j==="compact")return mh(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return kR(Pc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return yb(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return yb(this.toBytes("compact"))}}const f=OH(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return Ave(r(TH(R)),R)},precompute(R=8,j=t.BASE){return j.precompute(R,!1)}};function g(R,j=!0){return t.fromPrivateKey(R).toBytes(j)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const j=Ys("key",R).length,z=i.BYTES,V=z+1,I=2*z+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===V))return j===V||j===I}function w(R,j,z=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(j)===!1)throw new Error("second arg must be public key");return t.fromHex(j).multiply(f(R)).toBytes(z)}const v=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const j=qC(R),z=R.length*8-c;return z>0?j>>BigInt(z):j},b=e.bits2int_modN||function(R){return o.create(v(R))},x=GC(c);function _(R){return KN("num < 2^"+c,R,rw,x),o.toBytes(R)}function C(R,j,z=S){if(["recovered","canonical"].some(re=>re in z))throw new Error("sign() legacy options not supported");const{hash:V}=e;let{lowS:I,prehash:N,extraEntropy:L}=z;I==null&&(I=!0),R=Ys("msgHash",R),rU(z),N&&(R=Ys("prehashed msgHash",V(R)));const U=b(R),$=f(j),M=[_($),_(U)];if(L!=null&&L!==!1){const re=L===!0?r(i.BYTES):L;M.push(Ys("extraEntropy",re))}const q=mh(...M),Z=U;function ie(re){const ce=v(re);if(!o.isValidNot0(ce))return;const ge=o.inv(ce),J=t.BASE.multiply(ce).toAffine(),te=o.create(J.x);if(te===rw)return;const oe=o.create(ge*o.create(Z+te*$));if(oe===rw)return;let se=(J.x===te?0:2)|Number(J.y&sw),me=oe;return I&&l(oe)&&(me=u(oe),se^=1),new h(te,me,se)}return{seed:q,k2sig:ie}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function A(R,j,z=S){const{seed:V,k2sig:I}=C(R,j,z);return mve(e.hash.outputLen,o.BYTES,s)(V,I)}t.BASE.precompute(8);function P(R,j,z,V=T){const I=R;j=Ys("msgHash",j),z=Ys("publicKey",z),rU(V);const{lowS:N,prehash:L,format:U}=V;if("strict"in V)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&!["compact","der","js"].includes(U))throw new Error('format must be "compact", "der" or "js"');const $=typeof I=="string"||TR(I),M=!$&&!U&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!$&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,Z;try{if(M)if(U===void 0||U==="js")q=new h(I.r,I.s);else throw new Error("invalid format");if($){try{U!=="compact"&&(q=h.fromDER(I))}catch(se){if(!(se instanceof Pc.Err))throw se}!q&&U!=="der"&&(q=h.fromCompact(I))}Z=t.fromHex(z)}catch{return!1}if(!q||N&&q.hasHighS())return!1;L&&(j=e.hash(j));const{r:ie,s:re}=q,ce=b(j),ge=o.inv(re),J=o.create(ce*ge),te=o.create(ie*ge),oe=t.BASE.multiplyUnsafe(J).add(Z.multiplyUnsafe(te));return oe.is0()?!1:o.create(oe.x)===ie}return Object.freeze({getPublicKey:g,getSharedSecret:w,sign:A,verify:P,utils:p,Point:t,Signature:h})}function Gve(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Cy(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Vve(t){const{CURVE:e,curveOpts:n}=Gve(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Kve(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Qve(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Vve(t),s=Wve(e,n),i=qve(s,r,n);return Kve(t,i)}function JN(t,e){const n=r=>Qve({...t,hash:r});return{...n(e),create:n}}const DH={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},$H={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},UH={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Jve=Cy(DH.p),Yve=Cy($H.p),Zve=Cy(UH.p),Xve=JN({...DH,Fp:Jve,lowS:!1},zC);JN({...$H,Fp:Yve,lowS:!1},abe),JN({...UH,Fp:Zve,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},obe);const e1e=Xve,BH="base10",Ns="base16",ea="base64pad",cu="base64url",Bv="utf8",LH=0,el=1,Lv=2,t1e=0,sU=1,iw=12,BR=32;function n1e(){const t=QN.utils.randomPrivateKey(),e=QN.getPublicKey(t);return{privateKey:ui(t,Ns),publicKey:ui(e,Ns)}}function YN(){const t=xy(BR);return ui(t,Ns)}function r1e(t,e){const n=QN.getSharedSecret(ho(t,Ns),ho(e,Ns)),r=fve(WC,n,void 0,void 0,BR);return ui(r,Ns)}function WE(t){const e=WC(ho(t,Ns));return ui(e,Ns)}function za(t){const e=WC(ho(t,Bv));return ui(e,Ns)}function MH(t){return ho(`${t}`,BH)}function Tf(t){return Number(ui(t,BH))}function jH(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function FH(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function s1e(t){const e=MH(typeof t.type<"u"?t.type:LH);if(Tf(e)===el&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ho(t.senderPublicKey,Ns):void 0,r=typeof t.iv<"u"?ho(t.iv,Ns):xy(iw),s=ho(t.symKey,Ns),i=bH(s,r).encrypt(ho(t.message,Bv)),o=zH({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===cu?jH(o):o}function i1e(t){const e=ho(t.symKey,Ns),{sealed:n,iv:r}=bb({encoded:t.encoded,encoding:t.encoding}),s=bH(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ui(s,Bv)}function o1e(t,e){const n=MH(Lv),r=xy(iw),s=ho(t,Bv),i=zH({type:n,sealed:s,iv:r});return e===cu?jH(i):i}function a1e(t,e){const{sealed:n}=bb({encoded:t,encoding:e});return ui(n,Bv)}function zH(t){if(Tf(t.type)===Lv)return ui(tw([t.type,t.sealed]),ea);if(Tf(t.type)===el){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ui(tw([t.type,t.senderPublicKey,t.iv,t.sealed]),ea)}return ui(tw([t.type,t.iv,t.sealed]),ea)}function bb(t){const e=(t.encoding||ea)===cu?FH(t.encoded):t.encoded,n=ho(e,ea),r=n.slice(t1e,sU),s=sU;if(Tf(r)===el){const c=s+BR,l=c+iw,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Tf(r)===Lv){const c=n.slice(s),l=xy(iw);return{type:r,sealed:c,iv:l}}const i=s+iw,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function c1e(t,e){const n=bb({encoded:t,encoding:e==null?void 0:e.encoding});return HH({type:Tf(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ui(n.senderPublicKey,Ns):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function HH(t){const e=(t==null?void 0:t.type)||LH;if(e===el){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function iU(t){return t.type===el&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function oU(t){return t.type===Lv}function l1e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return tw([new Uint8Array([4]),e,n])}function u1e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(FH(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=WC(c),u=l1e(e);if(!e1e.verify(tw([o,a]),l,u))throw new Error("Invalid signature");return RN(t).payload}const d1e="irn";function ix(t){return(t==null?void 0:t.relay)||{protocol:d1e}}function k0(t){const e=j0e[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function h1e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function aU(t){if(!t.includes("wc:")){const l=eH(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:f1e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:h1e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function f1e(t){return t.startsWith("//")?t.substring(2):t}function p1e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function cU(t){const e=new URLSearchParams,n=p1e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Q1(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var g1e=Object.defineProperty,m1e=Object.defineProperties,y1e=Object.getOwnPropertyDescriptors,lU=Object.getOwnPropertySymbols,w1e=Object.prototype.hasOwnProperty,b1e=Object.prototype.propertyIsEnumerable,uU=(t,e,n)=>e in t?g1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v1e=(t,e)=>{for(var n in e||(e={}))w1e.call(e,n)&&uU(t,n,e[n]);if(lU)for(var n of lU(e))b1e.call(e,n)&&uU(t,n,e[n]);return t},E1e=(t,e)=>m1e(t,y1e(e));function Ay(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function _1e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ay(n.accounts))}),e}function x1e(t,e){const n=[];return Object.values(t).forEach(r=>{Ay(r.accounts).includes(e)&&n.push(...r.methods)}),n}function C1e(t,e){const n=[];return Object.values(t).forEach(r=>{Ay(r.accounts).includes(e)&&n.push(...r.events)}),n}function KC(t){return t.includes(":")}function rg(t){return KC(t)?t.split(":")[0]:t}function dU(t){var e,n,r;const s={};if(!ad(t))return s;for(const[i,o]of Object.entries(t)){const a=KC(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=rg(i);s[u]=E1e(v1e({},s[u]),{chains:ec(a,(e=s[u])==null?void 0:e.chains),methods:ec(c,(n=s[u])==null?void 0:n.methods),events:ec(l,(r=s[u])==null?void 0:r.events)})}return s}function A1e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function hU(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=A1e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=ec(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function S1e(t,e){var n,r,s,i,o,a;const c=dU(t),l=dU(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:ec((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:ec((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:ec((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const I1e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},T1e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(t,e){const{message:n,code:r}=T1e[t];return{message:e?`${n} ${e}`:n,code:r}}function En(t,e){const{message:n,code:r}=I1e[t];return{message:e?`${n} ${e}`:n,code:r}}function tl(t,e){return!!Array.isArray(t)}function ad(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Rr(t){return typeof t>"u"}function Kn(t,e){return e&&Rr(t)?!0:typeof t=="string"&&!!t.trim().length}function LR(t,e){return e&&Rr(t)?!0:typeof t=="number"&&!isNaN(t)}function N1e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return gh(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Ay(a),d=n[o];(!gh(Qz(o,d),u)||!gh(d.methods,c)||!gh(d.events,l))&&(i=!1)}),i):!1}function ox(t){return Kn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function P1e(t){if(Kn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&ox(n)}}return!1}function k1e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Kn(t,!1)){if(e(t))return!0;const n=eH(t);return e(n)}}catch{}return!1}function O1e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function R1e(t){return t==null?void 0:t.topic}function D1e(t,e){let n=null;return Kn(t==null?void 0:t.publicKey,!1)||(n=be("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function fU(t){let e=!0;return tl(t)?t.length&&(e=t.every(n=>Kn(n,!1))):e=!1,e}function $1e(t,e,n){let r=null;return tl(e)&&e.length?e.forEach(s=>{r||ox(s)||(r=En("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ox(t)||(r=En("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function U1e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=$1e(s,Qz(s,i),`${e} ${n}`);o&&(r=o)}),r}function B1e(t,e){let n=null;return tl(t)?t.forEach(r=>{n||P1e(r)||(n=En("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=En("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function L1e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=B1e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function M1e(t,e){let n=null;return fU(t==null?void 0:t.methods)?fU(t==null?void 0:t.events)||(n=En("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=En("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function WH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=M1e(r,`${e}, namespace`);s&&(n=s)}),n}function j1e(t,e,n){let r=null;if(t&&ad(t)){const s=WH(t,e);s&&(r=s);const i=U1e(t,e,n);i&&(r=i)}else r=be("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function T2(t,e){let n=null;if(t&&ad(t)){const r=WH(t,e);r&&(n=r);const s=L1e(t,e);s&&(n=s)}else n=be("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function qH(t){return Kn(t.protocol,!0)}function F1e(t,e){let n=!1;return t?t&&tl(t)&&t.length&&t.forEach(r=>{n=qH(r)}):n=!0,n}function z1e(t){return typeof t=="number"}function Ws(t){return typeof t<"u"&&typeof t!==null}function H1e(t){return!(!t||typeof t!="object"||!t.code||!LR(t.code,!1)||!t.message||!Kn(t.message,!1))}function W1e(t){return!(Rr(t)||!Kn(t.method,!1))}function q1e(t){return!(Rr(t)||Rr(t.result)&&Rr(t.error)||!LR(t.id,!1)||!Kn(t.jsonrpc,!1))}function G1e(t){return!(Rr(t)||!Kn(t.name,!1))}function pU(t,e){return!(!ox(e)||!_1e(t).includes(e))}function V1e(t,e,n){return Kn(n,!1)?x1e(t,e).includes(n):!1}function K1e(t,e,n){return Kn(n,!1)?C1e(t,e).includes(n):!1}function gU(t,e,n){let r=null;const s=Q1e(t),i=J1e(e),o=Object.keys(s),a=Object.keys(i),c=mU(Object.keys(t)),l=mU(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),gh(o,a)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Ay(e[d].accounts);h.includes(d)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(gh(s[d].methods,i[d].methods)?gh(s[d].events,i[d].events)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Q1e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function mU(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function J1e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ay(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Y1e(t,e){return LR(t,!1)&&t<=e.max&&t>=e.min}function yU(){const t=$v();return new Promise(e=>{switch(t){case Oi.browser:e(Z1e());break;case Oi.reactNative:e(X1e());break;case Oi.node:e(eEe());break;default:e(!0)}})}function Z1e(){return _y()&&(navigator==null?void 0:navigator.onLine)}async function X1e(){if(Od()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function eEe(){return!0}function tEe(t){switch($v()){case Oi.browser:nEe(t);break;case Oi.reactNative:rEe(t);break}}function nEe(t){!Od()&&_y()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function rEe(t){Od()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function sEe(){var t;return _y()&&Af()?((t=Af())==null?void 0:t.visibilityState)==="visible":!0}const N2={};class o0{static get(e){return N2[e]}static set(e,n){N2[e]=n}static delete(e){delete N2[e]}}function iEe(t){const e=Ey.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function oEe({publicKey:t,signature:e,payload:n}){var r;const s=ZN(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=lEe(n.address),a=n.era==="00"?new Uint8Array([0]):ZN(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${cEe(n.tip)}`),d=dEe(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=uEe(h.length+1);return new Uint8Array([...f,i,...h])}function aEe(t){const e=ZN(t),n=Z0e.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function ZN(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function cEe(t){return t.startsWith("0x")?t.slice(2):t}function lEe(t){const e=Ey.decode(t)[0];return e===42?0:e===60?2:1}function uEe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function dEe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function hEe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=iEe(t.transaction.address),r=oEe({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return aEe(s)}const fEe="PARSE_ERROR",pEe="INVALID_REQUEST",gEe="METHOD_NOT_FOUND",mEe="INVALID_PARAMS",GH="INTERNAL_ERROR",MR="SERVER_ERROR",yEe=[-32700,-32600,-32601,-32602,-32603],ow={[fEe]:{code:-32700,message:"Parse error"},[pEe]:{code:-32600,message:"Invalid Request"},[gEe]:{code:-32601,message:"Method not found"},[mEe]:{code:-32602,message:"Invalid params"},[GH]:{code:-32603,message:"Internal error"},[MR]:{code:-32e3,message:"Server error"}},VH=MR;function wEe(t){return yEe.includes(t)}function wU(t){return Object.keys(ow).includes(t)?ow[t]:ow[VH]}function bEe(t){const e=Object.values(ow).find(n=>n.code===t);return e||ow[VH]}function KH(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var QH={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XN=function(t,e){return XN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},XN(t,e)};function vEe(t,e){XN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var eP=function(){return eP=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eP.apply(this,arguments)};function EEe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _Ee(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function xEe(t,e){return function(n,r){e(n,r,t)}}function CEe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function AEe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function SEe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function IEe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function TEe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function tP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function JH(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function NEe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(JH(arguments[e]));return t}function PEe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function vb(t){return this instanceof vb?(this.v=t,this):new vb(t)}function kEe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof vb?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function OEe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:vb(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function REe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof tP=="function"?tP(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function DEe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function $Ee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function UEe(t){return t&&t.__esModule?t:{default:t}}function BEe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function LEe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const MEe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return eP},__asyncDelegator:OEe,__asyncGenerator:kEe,__asyncValues:REe,__await:vb,__awaiter:AEe,__classPrivateFieldGet:BEe,__classPrivateFieldSet:LEe,__createBinding:IEe,__decorate:_Ee,__exportStar:TEe,__extends:vEe,__generator:SEe,__importDefault:UEe,__importStar:$Ee,__makeTemplateObject:DEe,__metadata:CEe,__param:xEe,__read:JH,__rest:EEe,__spread:NEe,__spreadArrays:PEe,__values:tP},Symbol.toStringTag,{value:"Module"})),jEe=Fx(MEe);var yc={},bU;function FEe(){if(bU)return yc;bU=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.isBrowserCryptoAvailable=yc.getSubtleCrypto=yc.getBrowerCrypto=void 0;function t(){return($n==null?void 0:$n.crypto)||($n==null?void 0:$n.msCrypto)||{}}yc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}yc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return yc.isBrowserCryptoAvailable=n,yc}var wc={},vU;function zEe(){if(vU)return wc;vU=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.isBrowser=wc.isNode=wc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}wc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}wc.isNode=e;function n(){return!t()&&!e()}return wc.isBrowser=n,wc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=jEe;e.__exportStar(FEe(),t),e.__exportStar(zEe(),t)})(QH);function Sa(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function bh(t=6){return BigInt(Sa(t))}function Wu(t,e,n){return{id:n||Sa(),jsonrpc:"2.0",method:t,params:e}}function QC(t,e){return{id:t,jsonrpc:"2.0",result:e}}function JC(t,e,n){return{id:t,jsonrpc:"2.0",error:HEe(e)}}function HEe(t,e){return typeof t>"u"?wU(GH):(typeof t=="string"&&(t=Object.assign(Object.assign({},wU(MR)),{message:t})),wEe(t.code)&&(t=bEe(t.code)),t)}let WEe=class{},qEe=class extends WEe{constructor(){super()}},GEe=class extends qEe{constructor(e){super()}};const VEe="^https?:",KEe="^wss?:";function QEe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function YH(t,e){const n=QEe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function EU(t){return YH(t,VEe)}function _U(t){return YH(t,KEe)}function JEe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ZH(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function jR(t){return ZH(t)&&"method"in t}function YC(t){return ZH(t)&&(Ia(t)||io(t))}function Ia(t){return"result"in t}function io(t){return"error"in t}let vo=class extends GEe{constructor(e){super(e),this.events=new bo.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Wu(e.method,e.params||[],e.id||bh().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{io(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),YC(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const YEe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ZEe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",xU=t=>t.split("?")[0],CU=10,XEe=YEe();let e_e=class{constructor(e){if(this.url=e,this.events=new bo.EventEmitter,this.registering=!1,!_U(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(fl(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!_U(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=QH.isReactNative()?void 0:{rejectUnauthorized:!JEe(e)},i=new XEe(e,[],s);ZEe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Cf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=JC(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return KH(e,xU(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>CU&&this.events.setMaxListeners(CU)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${xU(this.url)}`));return this.events.emit("register_error",n),n}};var t_e={};const XH="wc",eW=2,nP="core",sc=`${XH}@2:${nP}:`,n_e={logger:"error"},r_e={database:":memory:"},s_e="crypto",AU="client_ed25519_seed",i_e=we.ONE_DAY,o_e="keychain",a_e="0.3",c_e="messages",l_e="0.3",SU=we.SIX_HOURS,u_e="publisher",tW="irn",d_e="error",nW="wss://relay.walletconnect.org",h_e="relayer",mr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},f_e="_subscription",Gi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},p_e=.1,rP="2.21.3",yn={link_mode:"link_mode",relay:"relay"},qE={inbound:"inbound",outbound:"outbound"},g_e="0.3",m_e="WALLETCONNECT_CLIENT_ID",IU="WALLETCONNECT_LINK_MODE_APPS",Ei={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},y_e="subscription",w_e="0.3",b_e="pairing",v_e="0.3",a0={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},th={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ao={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},E_e="history",__e="0.3",x_e="expirer",Yi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},C_e="0.3",A_e="verify-api",S_e="https://verify.walletconnect.com",rW="https://verify.walletconnect.org",aw=rW,I_e=`${aw}/v3`,T_e=[S_e,rW],N_e="echo",P_e="https://echo.walletconnect.com",Ca={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ec={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},So={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},jd={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Fd={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},c0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},k_e=.1,O_e="event-client",R_e=86400,D_e="https://pulse.walletconnect.org/batch";function $_e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,S=b-1;(_!==0||C<y)&&S!==-1;S--,C++)_+=256*x[S]>>>0,x[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var A=c.repeat(g);T<b;++T)A+=t.charAt(x[T]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var T=new Uint8Array(y+(v-S)),A=y;S!==v;)T[A++]=b[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var U_e=$_e,B_e=U_e;const sW=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},L_e=t=>new TextEncoder().encode(t),M_e=t=>new TextDecoder().decode(t);class j_e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class F_e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return iW(this,e)}}class z_e{constructor(e){this.decoders=e}or(e){return iW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const iW=(t,e)=>new z_e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class H_e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new j_e(e,n,r),this.decoder=new F_e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ZC=({name:t,prefix:e,encode:n,decode:r})=>new H_e(t,e,n,r),Mv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=B_e(n,e);return ZC({prefix:t,name:e,encode:r,decode:i=>sW(s(i))})},W_e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},q_e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Wr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ZC({prefix:e,name:t,encode(s){return q_e(s,r,n)},decode(s){return W_e(s,r,n,t)}}),G_e=ZC({prefix:"\0",name:"identity",encode:t=>M_e(t),decode:t=>L_e(t)});var V_e=Object.freeze({__proto__:null,identity:G_e});const K_e=Wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Q_e=Object.freeze({__proto__:null,base2:K_e});const J_e=Wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Y_e=Object.freeze({__proto__:null,base8:J_e});const Z_e=Mv({prefix:"9",name:"base10",alphabet:"0123456789"});var X_e=Object.freeze({__proto__:null,base10:Z_e});const exe=Wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),txe=Wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nxe=Object.freeze({__proto__:null,base16:exe,base16upper:txe});const rxe=Wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sxe=Wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ixe=Wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oxe=Wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),axe=Wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cxe=Wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lxe=Wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uxe=Wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dxe=Wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hxe=Object.freeze({__proto__:null,base32:rxe,base32upper:sxe,base32pad:ixe,base32padupper:oxe,base32hex:axe,base32hexupper:cxe,base32hexpad:lxe,base32hexpadupper:uxe,base32z:dxe});const fxe=Mv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pxe=Mv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var gxe=Object.freeze({__proto__:null,base36:fxe,base36upper:pxe});const mxe=Mv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yxe=Mv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wxe=Object.freeze({__proto__:null,base58btc:mxe,base58flickr:yxe});const bxe=Wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vxe=Wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Exe=Wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_xe=Wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xxe=Object.freeze({__proto__:null,base64:bxe,base64pad:vxe,base64url:Exe,base64urlpad:_xe});const oW=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Cxe=oW.reduce((t,e,n)=>(t[n]=e,t),[]),Axe=oW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Sxe(t){return t.reduce((e,n)=>(e+=Cxe[n],e),"")}function Ixe(t){const e=[];for(const n of t){const r=Axe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Txe=ZC({prefix:"🚀",name:"base256emoji",encode:Sxe,decode:Ixe});var Nxe=Object.freeze({__proto__:null,base256emoji:Txe}),Pxe=aW,TU=128,kxe=-128,Oxe=Math.pow(2,31);function aW(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Oxe;)e[n++]=t&255|TU,t/=128;for(;t&kxe;)e[n++]=t&255|TU,t>>>=7;return e[n]=t|0,aW.bytes=n-r+1,e}var Rxe=sP,Dxe=128,NU=127;function sP(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw sP.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&NU)<<s:(o&NU)*Math.pow(2,s),s+=7}while(o>=Dxe);return sP.bytes=i-r,n}var $xe=Math.pow(2,7),Uxe=Math.pow(2,14),Bxe=Math.pow(2,21),Lxe=Math.pow(2,28),Mxe=Math.pow(2,35),jxe=Math.pow(2,42),Fxe=Math.pow(2,49),zxe=Math.pow(2,56),Hxe=Math.pow(2,63),Wxe=function(t){return t<$xe?1:t<Uxe?2:t<Bxe?3:t<Lxe?4:t<Mxe?5:t<jxe?6:t<Fxe?7:t<zxe?8:t<Hxe?9:10},qxe={encode:Pxe,decode:Rxe,encodingLength:Wxe},cW=qxe;const PU=(t,e,n=0)=>(cW.encode(t,e,n),e),kU=t=>cW.encodingLength(t),iP=(t,e)=>{const n=e.byteLength,r=kU(t),s=r+kU(n),i=new Uint8Array(s+n);return PU(t,i,0),PU(n,i,r),i.set(e,s),new Gxe(t,n,e,i)};class Gxe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const lW=({name:t,code:e,encode:n})=>new Vxe(t,e,n);class Vxe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?iP(this.code,n):n.then(r=>iP(this.code,r))}else throw Error("Unknown type, must be binary type")}}const uW=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Kxe=lW({name:"sha2-256",code:18,encode:uW("SHA-256")}),Qxe=lW({name:"sha2-512",code:19,encode:uW("SHA-512")});var Jxe=Object.freeze({__proto__:null,sha256:Kxe,sha512:Qxe});const dW=0,Yxe="identity",hW=sW,Zxe=t=>iP(dW,hW(t)),Xxe={code:dW,name:Yxe,encode:hW,digest:Zxe};var eCe=Object.freeze({__proto__:null,identity:Xxe});new TextEncoder,new TextDecoder;const OU={...V_e,...Q_e,...Y_e,...X_e,...nxe,...hxe,...gxe,...wxe,...xxe,...Nxe};({...Jxe,...eCe});function fW(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function tCe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fW(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function pW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const RU=pW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),P2=pW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=tCe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),nCe={utf8:RU,"utf-8":RU,hex:OU.base16,latin1:P2,ascii:P2,binary:P2,...OU};function rCe(t,e="utf8"){const n=nCe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fW(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var sCe=Object.defineProperty,iCe=(t,e,n)=>e in t?sCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ea=(t,e,n)=>iCe(t,typeof e!="symbol"?e+"":e,n);class oCe{constructor(e,n){this.core=e,this.logger=n,Ea(this,"keychain",new Map),Ea(this,"name",o_e),Ea(this,"version",a_e),Ea(this,"initialized",!1),Ea(this,"storagePrefix",sc),Ea(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Ea(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Ea(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Ea(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Ea(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=hs(n,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,jN(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?FN(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aCe=Object.defineProperty,cCe=(t,e,n)=>e in t?aCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sr=(t,e,n)=>cCe(t,typeof e!="symbol"?e+"":e,n);class lCe{constructor(e,n,r){this.core=e,this.logger=n,Sr(this,"name",s_e),Sr(this,"keychain"),Sr(this,"randomSessionIdentifier",YN()),Sr(this,"initialized",!1),Sr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Sr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Sr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=h5(s);return hz(i.publicKey)}),Sr(this,"generateKeyPair",()=>{this.isInitialized();const s=n1e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Sr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=h5(i),a=this.randomSessionIdentifier;return await cme(a,s,i_e,o)}),Sr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=r1e(a,i);return this.setSymKey(c,o)}),Sr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||WE(s);return await this.keychain.set(o,s),o}),Sr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Sr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Sr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=HH(o),c=fl(i);if(oU(a))return o1e(c,o==null?void 0:o.encoding);if(iU(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return s1e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Sr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=c1e(i,o);if(oU(a)){const c=a1e(i,o==null?void 0:o.encoding);return Cf(c)}if(iU(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=i1e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Cf(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Sr(this,"getPayloadType",(s,i=ea)=>{const o=bb({encoded:s,encoding:i});return Tf(o.type)}),Sr(this,"getPayloadSenderPublicKey",(s,i=ea)=>{const o=bb({encoded:s,encoding:i});return o.senderPublicKey?ui(o.senderPublicKey,Ns):void 0}),this.core=e,this.logger=hs(n,this.name),this.keychain=r||new oCe(this.core,this.logger)}get context(){return pi(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(AU)}catch{e=YN(),await this.keychain.set(AU,e)}return rCe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var uCe=Object.defineProperty,dCe=Object.defineProperties,hCe=Object.getOwnPropertyDescriptors,DU=Object.getOwnPropertySymbols,fCe=Object.prototype.hasOwnProperty,pCe=Object.prototype.propertyIsEnumerable,oP=(t,e,n)=>e in t?uCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gCe=(t,e)=>{for(var n in e||(e={}))fCe.call(e,n)&&oP(t,n,e[n]);if(DU)for(var n of DU(e))pCe.call(e,n)&&oP(t,n,e[n]);return t},mCe=(t,e)=>dCe(t,hCe(e)),mi=(t,e,n)=>oP(t,typeof e!="symbol"?e+"":e,n);class yCe extends ofe{constructor(e,n){super(e,n),this.logger=e,this.core=n,mi(this,"messages",new Map),mi(this,"messagesWithoutClientAck",new Map),mi(this,"name",c_e),mi(this,"version",l_e),mi(this,"initialized",!1),mi(this,"storagePrefix",sc),mi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),mi(this,"set",async(r,s,i)=>{this.isInitialized();const o=za(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===qE.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,mCe(gCe({},c),{[o]:s}))}return await this.persist(),o}),mi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),mi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),mi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=za(s);return typeof i[o]<"u"}),mi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=za(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),mi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=hs(e,this.name),this.core=n}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,jN(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,jN(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?FN(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?FN(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wCe=Object.defineProperty,bCe=Object.defineProperties,vCe=Object.getOwnPropertyDescriptors,$U=Object.getOwnPropertySymbols,ECe=Object.prototype.hasOwnProperty,_Ce=Object.prototype.propertyIsEnumerable,aP=(t,e,n)=>e in t?wCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,J1=(t,e)=>{for(var n in e||(e={}))ECe.call(e,n)&&aP(t,n,e[n]);if($U)for(var n of $U(e))_Ce.call(e,n)&&aP(t,n,e[n]);return t},k2=(t,e)=>bCe(t,vCe(e)),Io=(t,e,n)=>aP(t,typeof e!="symbol"?e+"":e,n);class xCe extends afe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Io(this,"events",new bo.EventEmitter),Io(this,"name",u_e),Io(this,"queue",new Map),Io(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),Io(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Io(this,"needsTransportRestart",!1),Io(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||SU,c=ix(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||bh().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:v})=>{h.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(mr.publish,y),g(h))};this.relayer.events.on(mr.publish,y);const w=Hu(new Promise((v,b)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(x=>{this.logger.warn(x,x==null?void 0:x.message),b(x)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(mr.publish,y)}catch(v){this.queue.set(d,k2(J1({},h),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Hu(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Io(this,"on",(r,s)=>{this.events.on(r,s)}),Io(this,"once",(r,s)=>{this.events.once(r,s)}),Io(this,"off",(r,s)=>{this.events.off(r,s)}),Io(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=hs(n,this.name),this.registerEventListeners()}get context(){return pi(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=SU,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:k0(ix().protocol).publish,params:J1({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Rr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Rr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(mr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,k2(J1({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(k2(J1({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Vf.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(mr.connection_stalled);return}this.checkQueue()}),this.relayer.on(mr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var CCe=Object.defineProperty,ACe=(t,e,n)=>e in t?CCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gp=(t,e,n)=>ACe(t,typeof e!="symbol"?e+"":e,n);class SCe{constructor(){gp(this,"map",new Map),gp(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),gp(this,"get",e=>this.map.get(e)||[]),gp(this,"exists",(e,n)=>this.get(e).includes(n)),gp(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),gp(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ICe=Object.defineProperty,TCe=Object.defineProperties,NCe=Object.getOwnPropertyDescriptors,UU=Object.getOwnPropertySymbols,PCe=Object.prototype.hasOwnProperty,kCe=Object.prototype.propertyIsEnumerable,cP=(t,e,n)=>e in t?ICe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l0=(t,e)=>{for(var n in e||(e={}))PCe.call(e,n)&&cP(t,n,e[n]);if(UU)for(var n of UU(e))kCe.call(e,n)&&cP(t,n,e[n]);return t},O2=(t,e)=>TCe(t,NCe(e)),on=(t,e,n)=>cP(t,typeof e!="symbol"?e+"":e,n);class OCe extends ufe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,on(this,"subscriptions",new Map),on(this,"topicMap",new SCe),on(this,"events",new bo.EventEmitter),on(this,"name",y_e),on(this,"version",w_e),on(this,"pending",new Map),on(this,"cached",[]),on(this,"initialized",!1),on(this,"storagePrefix",sc),on(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),on(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),on(this,"clientId"),on(this,"batchSubscribeTopicsLimit",500),on(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),on(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=ix(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),on(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),on(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),on(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),on(this,"on",(r,s)=>{this.events.on(r,s)}),on(this,"once",(r,s)=>{this.events.once(r,s)}),on(this,"off",(r,s)=>{this.events.off(r,s)}),on(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),on(this,"start",async()=>{await this.onConnect()}),on(this,"stop",async()=>{await this.onDisconnect()}),on(this,"restart",async()=>{await this.restore(),await this.onRestart()}),on(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),on(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Vf.pulse,async()=>{await this.checkPending()}),this.events.on(Ei.created,async r=>{const s=Ei.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ei.deleted,async r=>{const s=Ei.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=hs(n,this.name),this.clientId=""}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=ix(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=En("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===yn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:k0(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===yn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},we.toMiliseconds(we.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ei.created,d),u(h.id))};this.events.on(Ei.created,d);try{const h=await Hu(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ei.created,d),u(h)}catch{}}),l=await Hu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(mr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:k0(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Hu(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(mr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:k0(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Hu(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(mr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:k0(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,O2(l0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,l0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,l0({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ei.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ei.deleted,O2(l0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ei.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ei.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>O2(l0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Awe(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return za(e+await this.getClientId())}}var RCe=Object.defineProperty,BU=Object.getOwnPropertySymbols,DCe=Object.prototype.hasOwnProperty,$Ce=Object.prototype.propertyIsEnumerable,lP=(t,e,n)=>e in t?RCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LU=(t,e)=>{for(var n in e||(e={}))DCe.call(e,n)&&lP(t,n,e[n]);if(BU)for(var n of BU(e))$Ce.call(e,n)&&lP(t,n,e[n]);return t},Ot=(t,e,n)=>lP(t,typeof e!="symbol"?e+"":e,n);class UCe extends cfe{constructor(e){super(e),Ot(this,"protocol","wc"),Ot(this,"version",2),Ot(this,"core"),Ot(this,"logger"),Ot(this,"events",new bo.EventEmitter),Ot(this,"provider"),Ot(this,"messages"),Ot(this,"subscriber"),Ot(this,"publisher"),Ot(this,"name",h_e),Ot(this,"transportExplicitlyClosed",!1),Ot(this,"initialized",!1),Ot(this,"connectionAttemptInProgress",!1),Ot(this,"relayUrl"),Ot(this,"projectId"),Ot(this,"packageName"),Ot(this,"bundleId"),Ot(this,"hasExperiencedNetworkDisruption",!1),Ot(this,"pingTimeout"),Ot(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),Ot(this,"reconnectTimeout"),Ot(this,"connectPromise"),Ot(this,"reconnectInProgress",!1),Ot(this,"requestsInFlight",[]),Ot(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Ot(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||bh().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ot(this,"resetPingTimeout",()=>{tx()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ot(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ot(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(mr.connect)}),Ot(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Ot(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(mr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ot(this,"registerProviderListeners",()=>{this.provider.on(Gi.payload,this.onPayloadHandler),this.provider.on(Gi.connect,this.onConnectHandler),this.provider.on(Gi.disconnect,this.onDisconnectHandler),this.provider.on(Gi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?hs(e.logger,this.name):kv(my({level:e.logger||d_e})),this.messages=new yCe(this.logger,e.core),this.subscriber=new OCe(this,this.logger),this.publisher=new xCe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||nW,this.projectId=e.projectId,lwe()?this.packageName=I5():uwe()&&(this.bundleId=I5()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return pi(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:yn.relay},qE.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ei.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ei.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,LU({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Hu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yU())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=tr(we.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(mr.message,e),await this.recordMessageEvent(e,qE.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Gi.disconnect,i),await Hu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Gi.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Gi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Gi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(tx())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new vo(new e_e(gwe({sdkVersion:rP,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),jR(e)){if(!e.method.endsWith(f_e))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:yn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(LU({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else YC(e)&&this.events.emit(mr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,qE.inbound),this.events.emit(mr.message,e))}async acknowledgePayload(e){const n=QC(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Gi.payload,this.onPayloadHandler),this.provider.off(Gi.connect,this.onConnectHandler),this.provider.off(Gi.disconnect,this.onDisconnectHandler),this.provider.off(Gi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await yU();tEe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Vf.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&sEe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(mr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(p_e)))))}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function BCe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function MU(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function jU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const LCe="[object RegExp]",MCe="[object String]",jCe="[object Number]",FCe="[object Boolean]",FU="[object Arguments]",zCe="[object Symbol]",HCe="[object Date]",WCe="[object Map]",qCe="[object Set]",GCe="[object Array]",VCe="[object Function]",KCe="[object ArrayBuffer]",R2="[object Object]",QCe="[object Error]",JCe="[object DataView]",YCe="[object Uint8Array]",ZCe="[object Uint8ClampedArray]",XCe="[object Uint16Array]",eAe="[object Uint32Array]",tAe="[object BigUint64Array]",nAe="[object Int8Array]",rAe="[object Int16Array]",sAe="[object Int32Array]",iAe="[object BigInt64Array]",oAe="[object Float32Array]",aAe="[object Float64Array]";function cAe(){}function zU(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function lAe(t,e,n){return O0(t,e,void 0,void 0,void 0,void 0,n)}function O0(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return cw(t,e,i,o)}return cw(t,e,i,o)}function cw(t,e,n,r){if(Object.is(t,e))return!0;let s=jU(t),i=jU(e);if(s===FU&&(s=R2),i===FU&&(i=R2),s!==i)return!1;switch(s){case MCe:return t.toString()===e.toString();case jCe:{const c=t.valueOf(),l=e.valueOf();return BCe(c,l)}case FCe:case HCe:case zCe:return Object.is(t.valueOf(),e.valueOf());case LCe:return t.source===e.source&&t.flags===e.flags;case VCe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case WCe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!O0(l,e.get(c),c,t,e,n,r))return!1;return!0}case qCe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>O0(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case GCe:case YCe:case ZCe:case XCe:case eAe:case tAe:case nAe:case rAe:case sAe:case iAe:case oAe:case aAe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!O0(t[c],e[c],c,t,e,n,r))return!1;return!0}case KCe:return t.byteLength!==e.byteLength?!1:cw(new Uint8Array(t),new Uint8Array(e),n,r);case JCe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:cw(new Uint8Array(t),new Uint8Array(e),n,r);case QCe:return t.name===e.name&&t.message===e.message;case R2:{if(!(cw(t.constructor,e.constructor,n,r)||zU(t)&&zU(e)))return!1;const c=[...Object.keys(t),...MU(t)],l=[...Object.keys(e),...MU(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!O0(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function uAe(t,e){return lAe(t,e,cAe)}var dAe=Object.defineProperty,HU=Object.getOwnPropertySymbols,hAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,uP=(t,e,n)=>e in t?dAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WU=(t,e)=>{for(var n in e||(e={}))hAe.call(e,n)&&uP(t,n,e[n]);if(HU)for(var n of HU(e))fAe.call(e,n)&&uP(t,n,e[n]);return t},Ms=(t,e,n)=>uP(t,typeof e!="symbol"?e+"":e,n);class Jf extends lfe{constructor(e,n,r,s=sc,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ms(this,"map",new Map),Ms(this,"version",g_e),Ms(this,"cached",[]),Ms(this,"initialized",!1),Ms(this,"getKey"),Ms(this,"storagePrefix",sc),Ms(this,"recentlyDeleted",[]),Ms(this,"recentlyDeletedLimit",200),Ms(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Rr(o)?this.map.set(this.getKey(o),o):O1e(o)?this.map.set(o.id,o):R1e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ms(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ms(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ms(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>uAe(a[c],o[c]))):this.values)),Ms(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=WU(WU({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ms(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=hs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var pAe=Object.defineProperty,gAe=(t,e,n)=>e in t?pAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bt=(t,e,n)=>gAe(t,typeof e!="symbol"?e+"":e,n);class mAe{constructor(e,n){this.core=e,this.logger=n,bt(this,"name",b_e),bt(this,"version",v_e),bt(this,"events",new cR),bt(this,"pairings"),bt(this,"initialized",!1),bt(this,"storagePrefix",sc),bt(this,"ignoredPayloadTypes",[el]),bt(this,"registeredMethods",[]),bt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),bt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),bt(this,"create",async r=>{this.isInitialized();const s=YN(),i=await this.core.crypto.setSymKey(s),o=tr(we.FIVE_MINUTES),a={protocol:tW},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=cU({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(th.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),bt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Ca.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=aU(r.uri);s.props.properties.topic=i,s.addTrace(Ca.pairing_uri_validation_success),s.addTrace(Ca.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Ca.existing_pairing),u.active)throw s.setError(Ec.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Ca.pairing_not_expired)}const d=c||tr(we.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Ca.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(th.create,h),s.addTrace(Ca.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Ca.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Ec.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Ec.subscribe_pairing_topic_failure),f}return s.addTrace(Ca.subscribe_pairing_topic_success),h}),bt(this,"activate",async({topic:r})=>{this.isInitialized();const s=tr(we.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),bt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Qd();this.events.once(jt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),bt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),bt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),bt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),bt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",En("USER_DISCONNECTED")),await this.deletePairing(s))}),bt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return cU({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),bt(this,"sendRequest",async(r,s,i)=>{const o=Wu(s,i),a=await this.core.crypto.encode(r,o),c=a0[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),bt(this,"sendResult",async(r,s,i)=>{const o=QC(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=a0[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),bt(this,"sendError",async(r,s,i)=>{const o=JC(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=a0[c]?a0[c].res:a0.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),bt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,En("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),bt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>eu(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),bt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),bt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),bt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(th.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ia(s)?this.events.emit(jt("pairing_ping",i),{}):io(s)&&this.events.emit(jt("pairing_ping",i),{error:s.error})},500)}),bt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(th.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=En("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),bt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(En("WC_METHOD_UNSUPPORTED",r))}),bt(this,"isValidPair",(r,s)=>{var i;if(!Ws(r)){const{message:a}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Ec.malformed_pairing_uri),new Error(a)}if(!k1e(r.uri)){const{message:a}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Ec.malformed_pairing_uri),new Error(a)}const o=aU(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Ec.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=be("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Ec.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&we.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Ec.pairing_expired);const{message:a}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),bt(this,"isValidPing",async r=>{if(!Ws(r)){const{message:i}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidDisconnect",async r=>{if(!Ws(r)){const{message:i}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidPairingTopic",async r=>{if(!Kn(r,!1)){const{message:s}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(eu(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=hs(n,this.name),this.pairings=new Jf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return pi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(mr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==yn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);jR(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):YC(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Yi.expired,async e=>{const{topic:n}=Xz(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(th.expire,{topic:n}))})}}var yAe=Object.defineProperty,wAe=(t,e,n)=>e in t?yAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ir=(t,e,n)=>wAe(t,typeof e!="symbol"?e+"":e,n);class bAe extends ife{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ir(this,"records",new Map),Ir(this,"events",new bo.EventEmitter),Ir(this,"name",E_e),Ir(this,"version",__e),Ir(this,"cached",[]),Ir(this,"initialized",!1),Ir(this,"storagePrefix",sc),Ir(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ir(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:tr(we.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ao.created,o)}),Ir(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=io(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ao.updated,s))}),Ir(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ir(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Ao.deleted,i)}}),this.persist()}),Ir(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ir(this,"on",(r,s)=>{this.events.on(r,s)}),Ir(this,"once",(r,s)=>{this.events.once(r,s)}),Ir(this,"off",(r,s)=>{this.events.off(r,s)}),Ir(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=hs(n,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Wu(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ao.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ao.created,e=>{const n=Ao.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ao.updated,e=>{const n=Ao.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ao.deleted,e=>{const n=Ao.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Vf.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Ao.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vAe=Object.defineProperty,EAe=(t,e,n)=>e in t?vAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ns=(t,e,n)=>EAe(t,typeof e!="symbol"?e+"":e,n);class _Ae extends dfe{constructor(e,n){super(e,n),this.core=e,this.logger=n,ns(this,"expirations",new Map),ns(this,"events",new bo.EventEmitter),ns(this,"name",x_e),ns(this,"version",C_e),ns(this,"cached",[]),ns(this,"initialized",!1),ns(this,"storagePrefix",sc),ns(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ns(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ns(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Yi.created,{target:i,expiration:o})}),ns(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ns(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Yi.deleted,{target:s,expiration:i})}}),ns(this,"on",(r,s)=>{this.events.on(r,s)}),ns(this,"once",(r,s)=>{this.events.once(r,s)}),ns(this,"off",(r,s)=>{this.events.off(r,s)}),ns(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=hs(n,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return mwe(e);if(typeof e=="number")return ywe(e);const{message:n}=be("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Yi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;we.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Yi.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Vf.pulse,()=>this.checkExpirations()),this.events.on(Yi.created,e=>{const n=Yi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Yi.expired,e=>{const n=Yi.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Yi.deleted,e=>{const n=Yi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xAe=Object.defineProperty,CAe=(t,e,n)=>e in t?xAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gn=(t,e,n)=>CAe(t,typeof e!="symbol"?e+"":e,n);class AAe extends hfe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Gn(this,"name",A_e),Gn(this,"abortController"),Gn(this,"isDevEnv"),Gn(this,"verifyUrlV3",I_e),Gn(this,"storagePrefix",sc),Gn(this,"version",eW),Gn(this,"publicKey"),Gn(this,"fetchPromise"),Gn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Gn(this,"register",async s=>{if(!_y()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Af(),u=this.startAbortTimer(we.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const v=JSON.parse(w.data);if(v.type==="verify_attestation"){if(RN(v.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Gn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(RN(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Gn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(we.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Gn(this,"getVerifyUrl",s=>{let i=s||aw;return T_e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${aw}`),i=aw),i}),Gn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(we.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Gn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Gn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Gn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Gn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Gn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Gn(this,"validateAttestation",(s,i)=>{const o=u1e(s,i.publicKey),a={hasExpired:we.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=hs(n,this.name),this.abortController=new AbortController,this.isDevEnv=AR(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return pi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(e))}}var SAe=Object.defineProperty,IAe=(t,e,n)=>e in t?SAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qU=(t,e,n)=>IAe(t,typeof e!="symbol"?e+"":e,n);class TAe extends ffe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,qU(this,"context",N_e),qU(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${P_e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=hs(n,this.context)}}var NAe=Object.defineProperty,GU=Object.getOwnPropertySymbols,PAe=Object.prototype.hasOwnProperty,kAe=Object.prototype.propertyIsEnumerable,dP=(t,e,n)=>e in t?NAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u0=(t,e)=>{for(var n in e||(e={}))PAe.call(e,n)&&dP(t,n,e[n]);if(GU)for(var n of GU(e))kAe.call(e,n)&&dP(t,n,e[n]);return t},lr=(t,e,n)=>dP(t,typeof e!="symbol"?e+"":e,n);class OAe extends pfe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,lr(this,"context",O_e),lr(this,"storagePrefix",sc),lr(this,"storageVersion",k_e),lr(this,"events",new Map),lr(this,"shouldPersist",!1),lr(this,"init",async()=>{if(!AR())try{const s={eventId:N5(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Yz(this.core.relayer.protocol,this.core.relayer.version,rP)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),lr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=N5(),u=this.core.projectId||"",d=Date.now(),h=u0({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),lr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return u0(u0({},a),this.setMethods(a.eventId))}),lr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),lr(this,"setEventListeners",()=>{this.core.heartbeat.on(Vf.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(s.timestamp)>R_e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),lr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),lr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),lr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),lr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),lr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,u0(u0({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),lr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),lr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${D_e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${rP}${i}`,{method:"POST",body:JSON.stringify(s)})}),lr(this,"getAppDomain",()=>Jz().url),this.logger=hs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var RAe=Object.defineProperty,VU=Object.getOwnPropertySymbols,DAe=Object.prototype.hasOwnProperty,$Ae=Object.prototype.propertyIsEnumerable,hP=(t,e,n)=>e in t?RAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KU=(t,e)=>{for(var n in e||(e={}))DAe.call(e,n)&&hP(t,n,e[n]);if(VU)for(var n of VU(e))$Ae.call(e,n)&&hP(t,n,e[n]);return t},cn=(t,e,n)=>hP(t,typeof e!="symbol"?e+"":e,n);let UAe=class gW extends tfe{constructor(e){var n;super(e),cn(this,"protocol",XH),cn(this,"version",eW),cn(this,"name",nP),cn(this,"relayUrl"),cn(this,"projectId"),cn(this,"customStoragePrefix"),cn(this,"events",new bo.EventEmitter),cn(this,"logger"),cn(this,"heartbeat"),cn(this,"relayer"),cn(this,"crypto"),cn(this,"storage"),cn(this,"history"),cn(this,"expirer"),cn(this,"pairing"),cn(this,"verify"),cn(this,"echoClient"),cn(this,"linkModeSupportedApps"),cn(this,"eventClient"),cn(this,"initialized",!1),cn(this,"logChunkController"),cn(this,"on",(a,c)=>this.events.on(a,c)),cn(this,"once",(a,c)=>this.events.once(a,c)),cn(this,"off",(a,c)=>this.events.off(a,c)),cn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),cn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:yn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||nW,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=my({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:n_e.logger,name:nP}),{logger:i,chunkLoggerController:o}=uR({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=hs(i,this.name),this.heartbeat=new Hde,this.crypto=new lCe(this,this.logger,e==null?void 0:e.keychain),this.history=new bAe(this,this.logger),this.expirer=new _Ae(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Ahe(KU(KU({},r_e),e==null?void 0:e.storageOptions)),this.relayer=new UCe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new mAe(this,this.logger),this.verify=new AAe(this,this.logger,this.storage),this.echoClient=new TAe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new OAe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new gW(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(m_e,r),n}get context(){return pi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(IU,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(IU)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&t_e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const BAe=UAe,mW="wc",yW=2,wW="client",FR=`${mW}@${yW}:${wW}:`,D2={name:wW,logger:"error"},QU="WALLETCONNECT_DEEPLINK_CHOICE",LAe="proposal",JU="Proposal expired",MAe="session",mp=we.SEVEN_DAYS,jAe="engine",ur={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},$2={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},_a={idle:"IDLE",active:"ACTIVE"},FAe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},zAe="request",HAe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],WAe="wc",qAe="auth",GAe="authKeys",VAe="pairingTopics",KAe="requests",XC=`${WAe}@${1.5}:${qAe}:`,GE=`${XC}:PUB_KEY`;var QAe=Object.defineProperty,JAe=Object.defineProperties,YAe=Object.getOwnPropertyDescriptors,YU=Object.getOwnPropertySymbols,ZAe=Object.prototype.hasOwnProperty,XAe=Object.prototype.propertyIsEnumerable,fP=(t,e,n)=>e in t?QAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gn=(t,e)=>{for(var n in e||(e={}))ZAe.call(e,n)&&fP(t,n,e[n]);if(YU)for(var n of YU(e))XAe.call(e,n)&&fP(t,n,e[n]);return t},js=(t,e)=>JAe(t,YAe(e)),he=(t,e,n)=>fP(t,typeof e!="symbol"?e+"":e,n);class eSe extends wfe{constructor(e){super(e),he(this,"name",jAe),he(this,"events",new cR),he(this,"initialized",!1),he(this,"requestQueue",{state:_a.idle,queue:[]}),he(this,"sessionRequestQueue",{state:_a.idle,queue:[]}),he(this,"requestQueueDelay",we.ONE_SECOND),he(this,"expectedPairingMethodMap",new Map),he(this,"recentlyDeletedMap",new Map),he(this,"recentlyDeletedLimit",200),he(this,"relayMessageCache",[]),he(this,"pendingSessions",new Map),he(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ur)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),he(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=js(gn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=S1e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const C=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),C}if(!u||!h){const{topic:C,uri:S}=await this.client.core.pairing.create();u=C,d=S}if(!u){const{message:C}=be("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const f=await this.client.core.crypto.generateKeyPair(),p=ur.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,g=tr(p),y=js(gn(gn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:tW}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Sa()}),w=jt("session_connect",y.id),{reject:v,resolve:b,done:x}=Qd(p,JU),_=({id:C})=>{C===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:JU,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(w,({error:C,session:S})=>{this.client.events.off("proposal_expire",_),C?v(C):S&&b(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:x}}),he(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),he(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[So.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(A){throw o.setError(jd.no_internet_connection),A}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(A){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(jd.proposal_not_found),A}try{await this.isValidApprove(n)}catch(A){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(jd.session_approve_namespace_validation_failure),A}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:So.session_approve_started,properties:{topic:p,trace:[So.session_approve_started,So.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),x=g.publicKey,_=await this.client.core.crypto.generateSharedKey(b,x),C=gn(gn(gn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:tr(mp)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=yn.relay;v.addTrace(So.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:S})}catch(A){throw v.setError(jd.subscribe_session_topic_failure),A}v.addTrace(So.subscribe_session_topic_success);const T=js(gn({},C),{topic:_,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:C.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:yn.relay});await this.client.session.set(_,T),v.addTrace(So.store_session);try{v.addTrace(So.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(A=>{throw v==null||v.setError(jd.session_settle_publish_failure),A}),v.addTrace(So.session_settle_publish_success),v.addTrace(So.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(A=>{throw v==null||v.setError(jd.session_approve_publish_failure),A}),v.addTrace(So.session_approve_publish_success)}catch(A){throw this.client.logger.error(A),this.client.session.delete(_,En("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),A}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,tr(mp)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),he(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:ur.wc_sessionPropose.reject}),await this.deleteProposal(r)}),he(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Qd(),c=Sa(),l=bh().toString(),u=this.client.session.get(r).namespaces;return this.events.once(jt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),he(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Sa(),{done:i,resolve:o,reject:a}=Qd();return this.events.once(jt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,tr(mp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),he(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=ur.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===yn.relay&&await this.confirmOnlineStateOrThrow();const c=Sa(),l=bh().toString(),{done:u,resolve:d,reject:h}=Qd(o,"Request expired. Please try again.");this.events.once(jt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:js(gn({},s),{expiryTimestamp:tr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:js(gn({},s),{expiryTimestamp:tr(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await Ewe(this.client.core.storage,QU);await wwe({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),he(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===yn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ia(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):io(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),he(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Sa(),i=bh().toString(),{done:o,resolve:a,reject:c}=Qd();this.events.once(jt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),he(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=bh().toString(),a=Sa();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),he(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:En("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),he(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>N1e(r,n)))),he(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),he(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?yn.link_mode:yn.relay;o===yn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:v,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:b}});const x=await this.client.core.crypto.generateKeyPair(),_=WE(x);if(await Promise.all([this.client.auth.authKeys.set(GE,{responseTopic:_,publicKey:x}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:v})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:$}=Eg(a[0]);let M=Ube($,"request",g);HE(w)&&(M=Lbe(M,w.pop())),w.push(M)}const C=y&&y>ur.wc_sessionAuthenticate.req.ttl?y:ur.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:tr(C)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},A={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:tr(ur.wc_sessionPropose.req.ttl),id:Sa()},{done:P,resolve:R,reject:j}=Qd(C,"Request expired"),z=Sa(),V=jt("session_connect",A.id),I=jt("session_request",z),N=async({error:$,session:M})=>{this.events.off(I,L),$?j($):M&&R({session:M})},L=async $=>{var M,q,Z;if(await this.deletePendingAuthRequest(z,{message:"fulfilled",code:0}),$.error){const oe=En("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===oe.code?void 0:(this.events.off(V,N),j($.error.message))}await this.deleteProposal(A.id),this.events.off(V,N);const{cacaos:ie,responder:re}=$.result,ce=[],ge=[];for(const oe of ie){await j5({cacao:oe,projectId:this.client.core.projectId})||(this.client.logger.error(oe,"Signature verification failed"),j(En("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:se}=oe,me=HE(se.resources),je=[zN(se.iss)],ve=nx(se.iss);if(me){const _e=F5(me),Fe=z5(me);ce.push(..._e),je.push(...Fe)}for(const _e of je)ge.push(`${_e}:${ve}`)}const J=await this.client.core.crypto.generateSharedKey(x,re.publicKey);let te;ce.length>0&&(te={topic:J,acknowledged:!0,self:{publicKey:x,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:tr(mp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:hU([...new Set(ce)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(J,{transportType:o}),await this.client.session.set(J,te),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:re.metadata}),te=this.client.session.get(J)),(M=this.client.metadata.redirect)!=null&&M.linkMode&&(q=re.metadata.redirect)!=null&&q.linkMode&&(Z=re.metadata.redirect)!=null&&Z.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(J,{transportType:yn.link_mode})),R({auths:ie,session:te})};this.events.once(V,N),this.events.once(I,L);let U;try{if(i){const $=Wu("wc_sessionAuthenticate",S,z);this.client.core.history.set(v,$);const M=await this.client.core.crypto.encode("",$,{type:Lv,encoding:cu});U=Q1(r,v,M)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:z}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:A,expiry:ur.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch($){throw this.events.off(V,N),this.events.off(I,L),$}return await this.setProposal(A.id,A),await this.setAuthRequest(z,{request:js(gn({},S),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:U??b,response:P}}),he(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Fd.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(c0.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(c0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||yn.relay;a===yn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=WE(c),d={type:el,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await j5({cacao:y,projectId:this.client.core.projectId})){i.setError(c0.invalid_cacao);const _=En("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Fd.cacaos_verified);const{p:w}=y,v=HE(w.resources),b=[zN(w.iss)],x=nx(w.iss);if(v){const _=F5(v),C=z5(v);h.push(..._),b.push(...C)}for(const _ of b)f.push(`${_}:${x}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Fd.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:tr(mp),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:hU([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Fd.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(c0.subscribe_authenticated_session_topic_failure),y}i.addTrace(Fd.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Fd.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Fd.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(c0.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),he(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===yn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=WE(o),l={type:el,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:ur.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),he(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return pH(r,s)}),he(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),he(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),he(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,En("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(QU).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,En("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=_a.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),he(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(jd.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,En("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),he(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=_a.idle,this.client.events.emit("session_request_expire",{id:n}))}),he(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),he(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),he(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,tr(ur.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),he(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=yn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),he(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||tr(ur.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),he(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Wu(s,i,c);let f;const p=!!u;try{const w=p?cu:ea;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(HAe.includes(s)){const w=za(JSON.stringify(h)),v=za(f);g=await this.client.core.verify.register({id:v,decryptedId:w})}const y=ur[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const w=Q1(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=ur[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=js(gn({},d),{correlationId:h.id}),l?(w.internal=js(gn({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(v=>this.client.logger.error(v))}return h.id}),he(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=QC(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?cu:ea;u=await this.client.core.crypto.encode(s,l,js(gn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Q1(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ur[p].res;g.tvf=js(gn({},f),{correlationId:r}),o?(g.internal=js(gn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),he(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=JC(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?cu:ea;u=await this.client.core.crypto.encode(s,l,js(gn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Q1(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ur[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),he(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;eu(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{eu(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),he(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),he(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),he(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===_a.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_a.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=_a.idle}),he(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),he(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),he(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),he(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),he(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Ec.proposal_listener_not_found)),this.isValidConnect(gn({},s.params));const u=a.expiryTimestamp||tr(ur.wc_sessionPropose.req.ttl),d=gn({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:za(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Ca.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ur.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),he(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ia(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(io(r)){await this.deleteProposal(i);const o=jt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),he(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=js(gn(gn(gn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:yn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(jt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),he(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ia(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(jt("session_approve",s),{})):io(r)&&(await this.client.session.delete(n,En("USER_DISCONNECTED")),this.events.emit(jt("session_approve",s),{error:r.error}))}),he(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=o0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:En("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(gn({topic:n},s));try{o0.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw o0.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),he(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),he(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=jt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ia(r)?this.events.emit(jt("session_update",s),{}):io(r)&&this.events.emit(jt("session_update",s),{error:r.error})}),he(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,tr(mp)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),he(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=jt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ia(r)?this.events.emit(jt("session_extend",s),{}):io(r)&&this.events.emit(jt("session_extend",s),{error:r.error})}),he(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),he(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=jt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ia(r)?this.events.emit(jt("session_ping",s),{}):io(r)&&this.events.emit(jt("session_ping",s),{error:r.error})},500)}),he(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(mr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:En("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),he(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(gn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:za(JSON.stringify(Wu("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===yn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),he(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=jt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ia(r)?this.events.emit(jt("session_request",s),{result:r.result}):io(r)&&this.events.emit(jt("session_request",s),{error:r.error})}),he(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=o0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(gn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),o0.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),he(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ia(r)?this.events.emit(jt("session_request",s),{result:r.result}):io(r)&&this.events.emit(jt("session_request",s),{error:r.error})}),he(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:za(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===yn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:el,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:ur.wc_sessionAuthenticate.autoReject,appLink:h})}}),he(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),he(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_a.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),he(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=jt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(jt("session_request",i.request.id),{error:r})})}),he(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===_a.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=_a.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),he(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),he(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Wu("wc_sessionPropose",js(gn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),he(this,"isValidConnect",async n=>{if(!Ws(n)){const{message:l}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Rr(r)||await this.isValidPairingTopic(r),!F1e(c)){const{message:l}=be("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Rr(s)&&ad(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Rr(i)&&ad(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Rr(o)||this.validateSessionProps(o,"sessionProperties"),!Rr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),he(this,"validateNamespaces",(n,r)=>{const s=j1e(n,"connect()",r);if(s)throw new Error(s.message)}),he(this,"isValidApprove",async n=>{if(!Ws(n))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=T2(s,"approve()");if(l)throw new Error(l.message);const u=gU(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Kn(i,!0)){const{message:d}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Rr(o)||this.validateSessionProps(o,"sessionProperties"),!Rr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),he(this,"isValidReject",async n=>{if(!Ws(n)){const{message:i}=be("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!H1e(s)){const{message:i}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),he(this,"isValidSessionSettleRequest",n=>{if(!Ws(n)){const{message:l}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!qH(r)){const{message:l}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=D1e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=T2(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(eu(o)){const{message:l}=be("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),he(this,"isValidUpdate",async n=>{if(!Ws(n)){const{message:c}=be("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=T2(s,"update()");if(o)throw new Error(o.message);const a=gU(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),he(this,"isValidExtend",async n=>{if(!Ws(n)){const{message:s}=be("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),he(this,"isValidRequest",async n=>{if(!Ws(n)){const{message:c}=be("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!pU(a,i)){const{message:c}=be("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!W1e(s)){const{message:c}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!V1e(a,i,s.method)){const{message:c}=be("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Y1e(o,$2)){const{message:c}=be("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${$2.min} and ${$2.max}`);throw new Error(c)}}),he(this,"isValidRespond",async n=>{var r;if(!Ws(n)){const{message:o}=be("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!q1e(i)){const{message:o}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),he(this,"isValidPing",async n=>{if(!Ws(n)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),he(this,"isValidEmit",async n=>{if(!Ws(n)){const{message:a}=be("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!pU(o,i)){const{message:a}=be("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!G1e(s)){const{message:a}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!K1e(o,i,s.name)){const{message:a}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),he(this,"isValidDisconnect",async n=>{if(!Ws(n)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),he(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Kn(s,!1))throw new Error("uri is required parameter");if(!Kn(i,!1))throw new Error("domain is required parameter");if(!Kn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Eg(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Eg(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),he(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||aw,validation:"UNKNOWN",origin:o.url||""}};try{if(a===yn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),he(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),he(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),he(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),he(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),he(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==yn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),he(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),he(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=T5(n,"topic")||"",s=decodeURIComponent(T5(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:yn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),he(this,"registerLinkModeListeners",async()=>{var n;if(AR()||Od()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),he(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),he(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),he(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=FAe[i];if(i==="sui_signTransaction")return[vbe(r.transactionBytes)];if(i==="near_signTransaction")return[U5(r)];if(i==="near_signTransactions")return r.map(c=>U5(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[hEe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return tl(r)?r.map(c=>B5(c)):[B5(r)];if(i==="cosmos_signDirect")return[_be(r)];if(typeof r=="string")return[r];const a=r[o.key];if(tl(a))return i==="solana_signAllTransactions"?a.map(c=>bbe(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(mr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(GE)?this.client.auth.authKeys.get(GE):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===yn.link_mode?cu:ea});jR(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:za(r)})):YC(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Yi.expired,async e=>{const{topic:n,id:r}=Xz(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(th.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(th.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Kn(e,!1)){const{message:n}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(eu(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=be("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Kn(e,!1)){const{message:n}=be("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(eu(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=be("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Kn(e,!1)){const{message:n}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!z1e(e)){const{message:n}=be("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(eu(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=be("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class tSe extends Jf{constructor(e,n){super(e,n,LAe,FR),this.core=e,this.logger=n}}let nSe=class extends Jf{constructor(e,n){super(e,n,MAe,FR),this.core=e,this.logger=n}};class rSe extends Jf{constructor(e,n){super(e,n,zAe,FR,r=>r.id),this.core=e,this.logger=n}}class sSe extends Jf{constructor(e,n){super(e,n,GAe,XC,()=>GE),this.core=e,this.logger=n}}class iSe extends Jf{constructor(e,n){super(e,n,VAe,XC),this.core=e,this.logger=n}}class oSe extends Jf{constructor(e,n){super(e,n,KAe,XC,r=>r.id),this.core=e,this.logger=n}}var aSe=Object.defineProperty,cSe=(t,e,n)=>e in t?aSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U2=(t,e,n)=>cSe(t,typeof e!="symbol"?e+"":e,n);class lSe{constructor(e,n){this.core=e,this.logger=n,U2(this,"authKeys"),U2(this,"pairingTopics"),U2(this,"requests"),this.authKeys=new sSe(this.core,this.logger),this.pairingTopics=new iSe(this.core,this.logger),this.requests=new oSe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var uSe=Object.defineProperty,dSe=(t,e,n)=>e in t?uSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vt=(t,e,n)=>dSe(t,typeof e!="symbol"?e+"":e,n);let hSe=class bW extends yfe{constructor(e){super(e),vt(this,"protocol",mW),vt(this,"version",yW),vt(this,"name",D2.name),vt(this,"metadata"),vt(this,"core"),vt(this,"logger"),vt(this,"events",new bo.EventEmitter),vt(this,"engine"),vt(this,"session"),vt(this,"proposal"),vt(this,"pendingRequest"),vt(this,"auth"),vt(this,"signConfig"),vt(this,"on",(r,s)=>this.events.on(r,s)),vt(this,"once",(r,s)=>this.events.once(r,s)),vt(this,"off",(r,s)=>this.events.off(r,s)),vt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),vt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),vt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),vt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),vt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||D2.name,this.metadata=hwe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:kv(my({level:(e==null?void 0:e.logger)||D2.logger}));this.core=(e==null?void 0:e.core)||new BAe(e),this.logger=hs(n,this.name),this.session=new nSe(this.core,this.logger),this.proposal=new tSe(this.core,this.logger),this.pendingRequest=new rSe(this.core,this.logger),this.engine=new eSe(this),this.auth=new lSe(this.core,this.logger)}static async init(e){const n=new bW(e);return await n.initialize(),n}get context(){return pi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},we.toMiliseconds(we.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var pP={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $n<"u"&&$n,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof $n<"u"&&$n||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var N={next:function(){var L=I.shift();return{done:L===void 0,value:L}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(I){this.map={},I instanceof g?I.forEach(function(N,L){this.append(L,N)},this):Array.isArray(I)?I.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(N){this.append(N,I[N])},this)}g.prototype.append=function(I,N){I=h(I),N=f(N);var L=this.map[I];this.map[I]=L?L+", "+N:N},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,N){this.map[h(I)]=f(N)},g.prototype.forEach=function(I,N){for(var L in this.map)this.map.hasOwnProperty(L)&&I.call(N,this.map[L],L,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(N,L){I.push(L)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(N){I.push(N)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(N,L){I.push([L,N])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function w(I){return new Promise(function(N,L){I.onload=function(){N(I.result)},I.onerror=function(){L(I.error)}})}function v(I){var N=new FileReader,L=w(N);return N.readAsArrayBuffer(I),L}function b(I){var N=new FileReader,L=w(N),U=/charset=([A-Za-z0-9_-]+)/.exec(I.type),$=U?U[1]:"utf-8";return N.readAsText(I,$),L}function x(I){for(var N=new Uint8Array(I),L=new Array(N.length),U=0;U<N.length;U++)L[U]=String.fromCharCode(N[U]);return L.join("")}function _(I){if(I.slice)return I.slice(0);var N=new Uint8Array(I.byteLength);return N.set(new Uint8Array(I)),N.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=_(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=_(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=y(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var N=I.toUpperCase();return S.indexOf(N)>-1?N:I}function A(I,N){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var L=N.body;if(I instanceof A){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,N.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!L&&I._bodyInit!=null&&(L=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var M=new AbortController;return M.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function P(I){var N=new FormData;return I.trim().split("&").forEach(function(L){if(L){var U=L.split("="),$=U.shift().replace(/\+/g," "),M=U.join("=").replace(/\+/g," ");N.append(decodeURIComponent($),decodeURIComponent(M))}}),N}function R(I){var N=new g,L=I.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var $=U.split(":"),M=$.shift().trim();if(M){var q=$.join(":").trim();try{N.append(M,q)}catch(Z){console.warn("Response "+Z.message)}}}),N}C.call(A.prototype);function j(I,N){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(I)}C.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var I=new j(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var z=[301,302,303,307,308];j.redirect=function(I,N){if(z.indexOf(N)===-1)throw new RangeError("Invalid status code");return new j(null,{status:N,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,L){this.message=N,this.name=L;var U=Error(N);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function V(I,N){return new Promise(function(L,U){var $=new A(I,N);if($.signal&&$.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function q(){M.abort()}M.onload=function(){var re={statusText:M.statusText,headers:R(M.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(M.status<200||M.status>599)?re.status=200:re.status=M.status,re.url="responseURL"in M?M.responseURL:re.headers.get("X-Request-URL");var ce="response"in M?M.response:M.responseText;setTimeout(function(){L(new j(ce,re))},0)},M.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function Z(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(M.open($.method,Z($.url),!0),$.credentials==="include"?M.withCredentials=!0:$.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(c.blob?M.responseType="blob":c.arrayBuffer&&(M.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ie=[];Object.getOwnPropertyNames(N.headers).forEach(function(re){ie.push(h(re)),M.setRequestHeader(re,f(N.headers[re]))}),$.headers.forEach(function(re,ce){ie.indexOf(ce)===-1&&M.setRequestHeader(ce,re)})}else $.headers.forEach(function(re,ce){M.setRequestHeader(ce,re)});$.signal&&($.signal.addEventListener("abort",q),M.onreadystatechange=function(){M.readyState===4&&$.signal.removeEventListener("abort",q)}),M.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return V.polyfill=!0,a.fetch||(a.fetch=V,a.Headers=g,a.Request=A,a.Response=j),o.Headers=g,o.Request=A,o.Response=j,o.fetch=V,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(pP,pP.exports);var fSe=pP.exports;const ZU=Lf(fSe);var pSe=Object.defineProperty,gSe=Object.defineProperties,mSe=Object.getOwnPropertyDescriptors,XU=Object.getOwnPropertySymbols,ySe=Object.prototype.hasOwnProperty,wSe=Object.prototype.propertyIsEnumerable,e4=(t,e,n)=>e in t?pSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t4=(t,e)=>{for(var n in e||(e={}))ySe.call(e,n)&&e4(t,n,e[n]);if(XU)for(var n of XU(e))wSe.call(e,n)&&e4(t,n,e[n]);return t},n4=(t,e)=>gSe(t,mSe(e));const bSe={Accept:"application/json","Content-Type":"application/json"},vSe="POST",r4={headers:bSe,method:vSe},s4=10;let fa=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new bo.EventEmitter,this.isAvailable=!1,this.registering=!1,!EU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=fl(e),r=await(await ZU(this.url,n4(t4({},r4),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!EU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=fl({id:1,jsonrpc:"2.0",method:"test",params:[]});await ZU(e,n4(t4({},r4),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Cf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=JC(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return KH(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>s4&&this.events.setMaxListeners(s4)}};const i4="error",ESe="wss://relay.walletconnect.org",_Se="wc",xSe="universal_provider",Y1=`${_Se}@2:${xSe}:`,vW="https://rpc.walletconnect.org/v1/",Bp="generic",CSe=`${vW}bundler`,Eo={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function zR(t){return t==null||typeof t!="object"&&typeof t!="function"}function EW(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function _W(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ASe="[object RegExp]",xW="[object String]",CW="[object Number]",AW="[object Boolean]",SW="[object Arguments]",SSe="[object Symbol]",ISe="[object Date]",TSe="[object Map]",NSe="[object Set]",PSe="[object Array]",kSe="[object ArrayBuffer]",OSe="[object Object]",RSe="[object DataView]",DSe="[object Uint8Array]",$Se="[object Uint8ClampedArray]",USe="[object Uint16Array]",BSe="[object Uint32Array]",LSe="[object Int8Array]",MSe="[object Int16Array]",jSe="[object Int32Array]",FSe="[object Float32Array]",zSe="[object Float64Array]";function HR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function HSe(t,e){return sg(t,void 0,t,new Map,e)}function sg(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(zR(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=sg(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,sg(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(sg(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(HR(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=sg(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),nh(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),nh(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),nh(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,nh(o,t,n,r,s),o}if(typeof t=="object"&&WSe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),nh(o,t,n,r,s),o}return t}function nh(t,e,n=t,r,s){const i=[...Object.keys(e),...EW(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=sg(e[a],a,n,r,s))}}function WSe(t){switch(_W(t)){case SW:case PSe:case kSe:case RSe:case AW:case ISe:case FSe:case zSe:case LSe:case MSe:case jSe:case TSe:case CW:case OSe:case ASe:case NSe:case xW:case SSe:case DSe:case $Se:case USe:case BSe:return!0;default:return!1}}function qSe(t,e){return HSe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case CW:case xW:case AW:{const o=new t.constructor(t==null?void 0:t.valueOf());return nh(o,t),o}case SW:{const o={};return nh(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function o4(t){return qSe(t)}function a4(t){return t!==null&&typeof t=="object"&&_W(t)==="[object Arguments]"}function c4(t){return typeof t=="object"&&t!==null}function GSe(){}function VSe(t){return HR(t)}function KSe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function QSe(t){if(zR(t))return t;if(Array.isArray(t)||HR(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function JSe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=gP(s,o,r,new Map)}return s}function gP(t,e,n,r){if(zR(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return QSe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...EW(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(a4(a)&&(a={...a}),a4(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=o4(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||c4(c)&&c4(a)?t[o]=gP(c,a,n,r):c==null&&KSe(a)?t[o]=gP({},a,n,r):c==null&&VSe(a)?t[o]=o4(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function YSe(t,...e){return JSe(t,...e,GSe)}var ZSe=Object.defineProperty,XSe=Object.defineProperties,e2e=Object.getOwnPropertyDescriptors,l4=Object.getOwnPropertySymbols,t2e=Object.prototype.hasOwnProperty,n2e=Object.prototype.propertyIsEnumerable,u4=(t,e,n)=>e in t?ZSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z1=(t,e)=>{for(var n in e||(e={}))t2e.call(e,n)&&u4(t,n,e[n]);if(l4)for(var n of l4(e))n2e.call(e,n)&&u4(t,n,e[n]);return t},r2e=(t,e)=>XSe(t,e2e(e));function Li(t,e,n){var r;const s=Eg(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${vW}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Yf(t){return t.includes(":")?t.split(":")[1]:t}function IW(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function s2e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function X1(t={},e={}){const n=d4(t),r=d4(e);return YSe(n,r)}function d4(t){var e,n,r,s,i;const o={};if(!ad(t))return o;for(const[a,c]of Object.entries(t)){const l=KC(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=rg(a);o[f]=r2e(Z1(Z1({},o[f]),c),{chains:ec(l,(e=o[f])==null?void 0:e.chains),methods:ec(u,(n=o[f])==null?void 0:n.methods),events:ec(d,(r=o[f])==null?void 0:r.events)}),(ad(h)||ad(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Z1(Z1({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function h4(t){return t.includes(":")?t.split(":")[2]:t}function f4(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=KC(n)?[n]:r.chains?r.chains:IW(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function B2(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const TW={},Ut=t=>TW[t],L2=(t,e)=>{TW[t]=e};var i2e=Object.defineProperty,o2e=(t,e,n)=>e in t?i2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yp=(t,e,n)=>o2e(t,typeof e!="symbol"?e+"":e,n);class a2e{constructor(e){yp(this,"name","polkadot"),yp(this,"client"),yp(this,"httpProviders"),yp(this,"events"),yp(this,"namespace"),yp(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Yf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var c2e=Object.defineProperty,l2e=Object.defineProperties,u2e=Object.getOwnPropertyDescriptors,p4=Object.getOwnPropertySymbols,d2e=Object.prototype.hasOwnProperty,h2e=Object.prototype.propertyIsEnumerable,mP=(t,e,n)=>e in t?c2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g4=(t,e)=>{for(var n in e||(e={}))d2e.call(e,n)&&mP(t,n,e[n]);if(p4)for(var n of p4(e))h2e.call(e,n)&&mP(t,n,e[n]);return t},m4=(t,e)=>l2e(t,u2e(e)),wp=(t,e,n)=>mP(t,typeof e!="symbol"?e+"":e,n);class f2e{constructor(e){wp(this,"name","eip155"),wp(this,"client"),wp(this,"chainId"),wp(this,"namespace"),wp(this,"httpProviders"),wp(this,"events"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Li(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Yf(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:m4(g4({},u.sessionProperties||{}),{capabilities:m4(g4({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Wu("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${CSe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var p2e=Object.defineProperty,g2e=(t,e,n)=>e in t?p2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bp=(t,e,n)=>g2e(t,typeof e!="symbol"?e+"":e,n);class m2e{constructor(e){bp(this,"name","solana"),bp(this,"client"),bp(this,"httpProviders"),bp(this,"events"),bp(this,"namespace"),bp(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Yf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var y2e=Object.defineProperty,w2e=(t,e,n)=>e in t?y2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vp=(t,e,n)=>w2e(t,typeof e!="symbol"?e+"":e,n);class b2e{constructor(e){vp(this,"name","cosmos"),vp(this,"client"),vp(this,"httpProviders"),vp(this,"events"),vp(this,"namespace"),vp(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Yf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var v2e=Object.defineProperty,E2e=(t,e,n)=>e in t?v2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ep=(t,e,n)=>E2e(t,typeof e!="symbol"?e+"":e,n);class _2e{constructor(e){Ep(this,"name","algorand"),Ep(this,"client"),Ep(this,"httpProviders"),Ep(this,"events"),Ep(this,"namespace"),Ep(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Li(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new vo(new fa(r,Ut("disableProviderPing")))}}var x2e=Object.defineProperty,C2e=(t,e,n)=>e in t?x2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_p=(t,e,n)=>C2e(t,typeof e!="symbol"?e+"":e,n);class A2e{constructor(e){_p(this,"name","cip34"),_p(this,"client"),_p(this,"httpProviders"),_p(this,"events"),_p(this,"namespace"),_p(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Yf(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var S2e=Object.defineProperty,I2e=(t,e,n)=>e in t?S2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xp=(t,e,n)=>I2e(t,typeof e!="symbol"?e+"":e,n);class T2e{constructor(e){xp(this,"name","elrond"),xp(this,"client"),xp(this,"httpProviders"),xp(this,"events"),xp(this,"namespace"),xp(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Yf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var N2e=Object.defineProperty,P2e=(t,e,n)=>e in t?N2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cp=(t,e,n)=>P2e(t,typeof e!="symbol"?e+"":e,n);class k2e{constructor(e){Cp(this,"name","multiversx"),Cp(this,"client"),Cp(this,"httpProviders"),Cp(this,"events"),Cp(this,"namespace"),Cp(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Yf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var O2e=Object.defineProperty,R2e=(t,e,n)=>e in t?O2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ap=(t,e,n)=>R2e(t,typeof e!="symbol"?e+"":e,n);class D2e{constructor(e){Ap(this,"name","near"),Ap(this,"client"),Ap(this,"httpProviders"),Ap(this,"events"),Ap(this,"namespace"),Ap(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Li(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace);return typeof r>"u"?void 0:new vo(new fa(r,Ut("disableProviderPing")))}}var $2e=Object.defineProperty,U2e=(t,e,n)=>e in t?$2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sp=(t,e,n)=>U2e(t,typeof e!="symbol"?e+"":e,n);class B2e{constructor(e){Sp(this,"name","tezos"),Sp(this,"client"),Sp(this,"httpProviders"),Sp(this,"events"),Sp(this,"namespace"),Sp(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Li(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace);return typeof r>"u"?void 0:new vo(new fa(r))}}var L2e=Object.defineProperty,M2e=(t,e,n)=>e in t?L2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ip=(t,e,n)=>M2e(t,typeof e!="symbol"?e+"":e,n);class j2e{constructor(e){Ip(this,"name",Bp),Ip(this,"client"),Ip(this,"httpProviders"),Ip(this,"events"),Ip(this,"namespace"),Ip(this,"chainId"),this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Eo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Eg(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Li(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vo(new fa(r,Ut("disableProviderPing")))}}var F2e=Object.defineProperty,z2e=Object.defineProperties,H2e=Object.getOwnPropertyDescriptors,y4=Object.getOwnPropertySymbols,W2e=Object.prototype.hasOwnProperty,q2e=Object.prototype.propertyIsEnumerable,yP=(t,e,n)=>e in t?F2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eE=(t,e)=>{for(var n in e||(e={}))W2e.call(e,n)&&yP(t,n,e[n]);if(y4)for(var n of y4(e))q2e.call(e,n)&&yP(t,n,e[n]);return t},M2=(t,e)=>z2e(t,H2e(e)),Vi=(t,e,n)=>yP(t,typeof e!="symbol"?e+"":e,n);let G2e=class NW{constructor(e){Vi(this,"client"),Vi(this,"namespaces"),Vi(this,"optionalNamespaces"),Vi(this,"sessionProperties"),Vi(this,"scopedProperties"),Vi(this,"events",new cR),Vi(this,"rpcProviders",{}),Vi(this,"session"),Vi(this,"providerOpts"),Vi(this,"logger"),Vi(this,"uri"),Vi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:kv(my({level:(e==null?void 0:e.logger)||i4})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new NW(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:eE({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,QC(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:En("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=f4(this.session.namespaces);this.namespaces=X1(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=f4(s.namespaces);return this.namespaces=X1(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Bp?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(tl(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await hSe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||i4,relayUrl:this.providerOpts.relayUrl||ESe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>rg(n)))];L2("client",this.client),L2("events",this.events),L2("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=s2e(n,this.session),s=IW(r),i=X1(this.namespaces,this.optionalNamespaces),o=M2(eE({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new f2e({namespace:o});break;case"algorand":this.rpcProviders[n]=new _2e({namespace:o});break;case"solana":this.rpcProviders[n]=new m2e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new b2e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new a2e({namespace:o});break;case"cip34":this.rpcProviders[n]=new A2e({namespace:o});break;case"elrond":this.rpcProviders[n]=new T2e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new k2e({namespace:o});break;case"near":this.rpcProviders[n]=new D2e({namespace:o});break;case"tezos":this.rpcProviders[n]=new B2e({namespace:o});break;default:this.rpcProviders[Bp]?this.rpcProviders[Bp].updateNamespace(o):this.rpcProviders[Bp]=new j2e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&tl(o)&&this.events.emit("accountsChanged",o.map(h4))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=rg(o),l=B2(o)!==B2(a)?`${c}:${B2(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=M2(eE({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",M2(eE({},En("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Eo.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Bp]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=X1(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>rg(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=rg(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(h4);if(!tl(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Y1}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Y1}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Y1}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Y1)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const lw={getSIWX(){return fe.state.siwx},async initializeIfEnabled(){var i;const t=fe.state.siwx,e=B.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(B.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Ft.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Qt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Re._getClient())==null?void 0:i.disconnect().catch(console.error)),Ye.reset("Connect"),Zo.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=fe.state.siwx,e=Me.getPlainAddress(B.getActiveCaipAddress()),n=B.getActiveCaipNetwork(),r=Re._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Se.getConnectorId(n.chainNamespace)===ae.CONNECTOR_ID.AUTH&&Ye.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),B.setLastConnectedSIWECaipNetwork(n),Ft.close(),Qt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Ft.state.open||Ye.state.view==="ApproveTransaction")&&await Ft.open({view:"SIWXSignMessage"}),i.isSmartAccount?Zo.showError("This application might not support Smart Accounts"):Zo.showError("Signature declined"),Qt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=B.getLastConnectedSIWECaipNetwork();r?B.switchActiveNetwork(r):await Re.disconnect()}else Ft.close();Ye.reset("Connect"),Qt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=B.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Me.getPlainAddress(B.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=fe.state.siwx,e=Me.getPlainAddress(B.getActiveCaipAddress()),n=B.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ye.state.view==="ApproveTransaction",r=Ye.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=lw.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=B.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Zo.showLoading("Authenticating...",{autoClose:!1}),Ee.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Qt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:lw.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Qt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:lw.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Zo.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=B.state.activeChain;return{network:((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ee.state.preferredAccountTypes)==null?void 0:n[t])===Er.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},wn={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},qu={ConnectorExplorerIds:{[ae.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ae.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ae.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[wn.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[wn.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[wn.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[wn.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[wn.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[wn.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[wn.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[wn.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[wn.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[wn.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[wn.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ae.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ae.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ae.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ae.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ae.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ae.CONNECTOR_ID.COINBASE]:"Coinbase",[ae.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ae.CONNECTOR_ID.LEDGER]:"Ledger",[ae.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ae.CONNECTOR_ID.INJECTED]:"INJECTED",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ae.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ae.CONNECTOR_ID.AUTH]:"AUTH"}},Eb={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${wn.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=B.state.activeChain;return ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Se.getConnectorId(e)===ae.CONNECTOR_ID.AUTH&&e===t)}},V2e=new AbortController,Cn={EmbeddedWalletAbortController:V2e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${K2e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function K2e(){return typeof window<"u"}const Q2e={createLogger(t,e="error"){const n=my({level:e}),{logger:r}=uR({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},J2e="rpc.walletconnect.org";function w4(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const j2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],qa={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===J2e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ae.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ae.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return j2.includes(e)?w4(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(w=>w.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:qu.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>qa.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(E1(a.url,a.config))}),j2.includes(t.caipNetworkId)&&r.push(E1(w4(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(E1(a))}),w$(r)},extendWagmiTransports(t,e,n){if(j2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return w$([n,E1(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ae.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=xe.getActiveCaipNetworkId(),n=B.getAllRequestedCaipNetworks(),r=Array.from(((c=B.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},ax={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Fs=fn({providers:{...ax},providerIds:{...ax}}),tn={state:Fs,subscribeKey(t,e){return Fr(Fs,t,e)},subscribe(t){return jr(Fs,()=>{t(Fs)})},subscribeProviders(t){return jr(Fs.providers,()=>t(Fs.providers))},setProvider(t,e){e&&(Fs.providers[t]=_f(e))},getProvider(t){return Fs.providers[t]},setProviderId(t,e){e&&(Fs.providerIds[t]=e)},getProviderId(t){if(t)return Fs.providerIds[t]},reset(){Fs.providers={...ax},Fs.providerIds={...ax}},resetChain(t){Fs.providers[t]=void 0,Fs.providerIds[t]=void 0}},b4={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Pr={set(t,e){Pi.isClient&&localStorage.setItem(`${Ue.STORAGE_KEY}${t}`,e)},get(t){return Pi.isClient?localStorage.getItem(`${Ue.STORAGE_KEY}${t}`):null},delete(t,e){Pi.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ue.STORAGE_KEY}${t}`))}},tE=30*1e3,Pi={checkIfAllowedToTriggerEmail(){const t=Pr.get(Ue.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<tE){const n=Math.ceil((tE-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Pr.get(Ue.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<tE)return Math.ceil((tE-e)/1e3)}return 0},checkIfRequestExists(t){return Er.NOT_SAFE_RPC_METHODS.includes(t.method)||Er.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(b4.transactionHash))||(t==null?void 0:t.match(b4.signedMessage)))?Ue.RPC_RESPONSE_TYPE_TX:Ue.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Er.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var $t;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})($t||($t={}));var wP;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(wP||(wP={}));const Pe=$t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lu=t=>{switch(typeof t){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return isNaN(t)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(t)?Pe.array:t===null?Pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Pe.promise:typeof Map<"u"&&t instanceof Map?Pe.map:typeof Set<"u"&&t instanceof Set?Pe.set:typeof Date<"u"&&t instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},ye=$t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Y2e=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ia extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,$t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ia.create=t=>new ia(t);const _b=(t,e)=>{let n;switch(t.code){case ye.invalid_type:t.received===Pe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ye.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,$t.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:n=`Unrecognized key(s) in object: ${$t.joinValues(t.keys,", ")}`;break;case ye.invalid_union:n="Invalid input";break;case ye.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${$t.joinValues(t.options)}`;break;case ye.invalid_enum_value:n=`Invalid enum value. Expected ${$t.joinValues(t.options)}, received '${t.received}'`;break;case ye.invalid_arguments:n="Invalid function arguments";break;case ye.invalid_return_type:n="Invalid function return type";break;case ye.invalid_date:n="Invalid date";break;case ye.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:$t.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ye.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ye.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ye.custom:n="Invalid input";break;case ye.invalid_intersection_types:n="Intersection results could not be merged";break;case ye.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ye.not_finite:n="Number must be finite";break;default:n=e.defaultError,$t.assertNever(t)}return{message:n}};let PW=_b;function Z2e(t){PW=t}function cx(){return PW}const lx=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},X2e=[];function De(t,e){const n=lx({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,cx(),_b].filter(r=>!!r)});t.common.issues.push(n)}class ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return nt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ds.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return nt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const nt=Object.freeze({status:"aborted"}),kW=t=>({status:"dirty",value:t}),ks=t=>({status:"valid",value:t}),bP=t=>t.status==="aborted",vP=t=>t.status==="dirty",xb=t=>t.status==="valid",ux=t=>typeof Promise<"u"&&t instanceof Promise;var qe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(qe||(qe={}));class ic{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const v4=(t,e)=>{if(xb(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ia(t.common.issues);return this._error=n,this._error}}};function ct(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class ft{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return lu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:lu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ds,ctx:{common:e.parent.common,data:e.data,parsedType:lu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(ux(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lu(e)},i=this._parseSync({data:e,path:s.path,parent:s});return v4(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lu(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(ux(s)?s:Promise.resolve(s));return v4(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ye.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new la({schema:this,typeName:Xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return nl.create(this,this._def)}nullable(){return kf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oa.create(this,this._def)}promise(){return Vm.create(this,this._def)}or(e){return Ib.create([this,e],this._def)}and(e){return Tb.create(this,e,this._def)}transform(e){return new la({...ct(this._def),schema:this,typeName:Xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Rb({...ct(this._def),innerType:this,defaultValue:n,typeName:Xe.ZodDefault})}brand(){return new RW({typeName:Xe.ZodBranded,type:this,...ct(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new px({...ct(this._def),innerType:this,catchValue:n,typeName:Xe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return jv.create(this,e)}readonly(){return mx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const eIe=/^c[^\s-]{8,}$/i,tIe=/^[a-z][a-z0-9]*$/,nIe=/^[0-9A-HJKMNP-TV-Z]{26}$/,rIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,sIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let F2;const oIe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,aIe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,cIe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function lIe(t,e){return!!((e==="v4"||!e)&&oIe.test(t)||(e==="v6"||!e)&&aIe.test(t))}class ta extends ft{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pe.string){const i=this._getOrReturnCtx(e);return De(i,{code:ye.invalid_type,expected:Pe.string,received:i.parsedType}),nt}const r=new ds;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:ye.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:ye.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?De(s,{code:ye.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&De(s,{code:ye.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")sIe.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"email",code:ye.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")F2||(F2=new RegExp(iIe,"u")),F2.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"emoji",code:ye.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")rIe.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"uuid",code:ye.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")eIe.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"cuid",code:ye.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")tIe.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"cuid2",code:ye.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")nIe.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"ulid",code:ye.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),De(s,{validation:"url",code:ye.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"regex",code:ye.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),De(s,{code:ye.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),De(s,{code:ye.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),De(s,{code:ye.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?cIe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{code:ye.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?lIe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"ip",code:ye.invalid_string,message:i.message}),r.dirty()):$t.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ye.invalid_string,...qe.errToObj(r)})}_addCheck(e){return new ta({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...qe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...qe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...qe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...qe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...qe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...qe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...qe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...qe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...qe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...qe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...qe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...qe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...qe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...qe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...qe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...qe.errToObj(n)})}nonempty(e){return this.min(1,qe.errToObj(e))}trim(){return new ta({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ta({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ta({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ta.create=t=>{var e;return new ta({checks:[],typeName:Xe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ct(t)})};function uIe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class vd extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pe.number){const i=this._getOrReturnCtx(e);return De(i,{code:ye.invalid_type,expected:Pe.number,received:i.parsedType}),nt}let r;const s=new ds;for(const i of this._def.checks)i.kind==="int"?$t.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:ye.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:ye.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:ye.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?uIe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),De(r,{code:ye.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:ye.not_finite,message:i.message}),s.dirty()):$t.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,qe.toString(n))}setLimit(e,n,r,s){return new vd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:qe.toString(s)}]})}_addCheck(e){return new vd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:qe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:qe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:qe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$t.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}vd.create=t=>new vd({checks:[],typeName:Xe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ct(t)});class Ed extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Pe.bigint){const i=this._getOrReturnCtx(e);return De(i,{code:ye.invalid_type,expected:Pe.bigint,received:i.parsedType}),nt}let r;const s=new ds;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:ye.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:ye.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),De(r,{code:ye.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):$t.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,qe.toString(n))}setLimit(e,n,r,s){return new Ed({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:qe.toString(s)}]})}_addCheck(e){return new Ed({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:qe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ed.create=t=>{var e;return new Ed({checks:[],typeName:Xe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ct(t)})};class Cb extends ft{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pe.boolean){const r=this._getOrReturnCtx(e);return De(r,{code:ye.invalid_type,expected:Pe.boolean,received:r.parsedType}),nt}return ks(e.data)}}Cb.create=t=>new Cb({typeName:Xe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ct(t)});class Nf extends ft{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pe.date){const i=this._getOrReturnCtx(e);return De(i,{code:ye.invalid_type,expected:Pe.date,received:i.parsedType}),nt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return De(i,{code:ye.invalid_date}),nt}const r=new ds;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:ye.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:ye.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):$t.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Nf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:qe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:qe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Nf.create=t=>new Nf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Xe.ZodDate,...ct(t)});class dx extends ft{_parse(e){if(this._getType(e)!==Pe.symbol){const r=this._getOrReturnCtx(e);return De(r,{code:ye.invalid_type,expected:Pe.symbol,received:r.parsedType}),nt}return ks(e.data)}}dx.create=t=>new dx({typeName:Xe.ZodSymbol,...ct(t)});class Ab extends ft{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:ye.invalid_type,expected:Pe.undefined,received:r.parsedType}),nt}return ks(e.data)}}Ab.create=t=>new Ab({typeName:Xe.ZodUndefined,...ct(t)});class Sb extends ft{_parse(e){if(this._getType(e)!==Pe.null){const r=this._getOrReturnCtx(e);return De(r,{code:ye.invalid_type,expected:Pe.null,received:r.parsedType}),nt}return ks(e.data)}}Sb.create=t=>new Sb({typeName:Xe.ZodNull,...ct(t)});class Gm extends ft{constructor(){super(...arguments),this._any=!0}_parse(e){return ks(e.data)}}Gm.create=t=>new Gm({typeName:Xe.ZodAny,...ct(t)});class rf extends ft{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ks(e.data)}}rf.create=t=>new rf({typeName:Xe.ZodUnknown,...ct(t)});class gl extends ft{_parse(e){const n=this._getOrReturnCtx(e);return De(n,{code:ye.invalid_type,expected:Pe.never,received:n.parsedType}),nt}}gl.create=t=>new gl({typeName:Xe.ZodNever,...ct(t)});class hx extends ft{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:ye.invalid_type,expected:Pe.void,received:r.parsedType}),nt}return ks(e.data)}}hx.create=t=>new hx({typeName:Xe.ZodVoid,...ct(t)});class oa extends ft{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Pe.array)return De(n,{code:ye.invalid_type,expected:Pe.array,received:n.parsedType}),nt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(De(n,{code:o?ye.too_big:ye.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(De(n,{code:ye.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(De(n,{code:ye.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new ic(n,o,n.path,a)))).then(o=>ds.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new ic(n,o,n.path,a)));return ds.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new oa({...this._def,minLength:{value:e,message:qe.toString(n)}})}max(e,n){return new oa({...this._def,maxLength:{value:e,message:qe.toString(n)}})}length(e,n){return new oa({...this._def,exactLength:{value:e,message:qe.toString(n)}})}nonempty(e){return this.min(1,e)}}oa.create=(t,e)=>new oa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Xe.ZodArray,...ct(e)});function Lp(t){if(t instanceof An){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=nl.create(Lp(r))}return new An({...t._def,shape:()=>e})}else return t instanceof oa?new oa({...t._def,type:Lp(t.element)}):t instanceof nl?nl.create(Lp(t.unwrap())):t instanceof kf?kf.create(Lp(t.unwrap())):t instanceof oc?oc.create(t.items.map(e=>Lp(e))):t}class An extends ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=$t.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Pe.object){const l=this._getOrReturnCtx(e);return De(l,{code:ye.invalid_type,expected:Pe.object,received:l.parsedType}),nt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof gl&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ic(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof gl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(De(s,{code:ye.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ic(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ds.mergeObjectSync(r,l)):ds.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return qe.errToObj,new An({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=qe.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new An({...this._def,unknownKeys:"strip"})}passthrough(){return new An({...this._def,unknownKeys:"passthrough"})}extend(e){return new An({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new An({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Xe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new An({...this._def,catchall:e})}pick(e){const n={};return $t.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new An({...this._def,shape:()=>n})}omit(e){const n={};return $t.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new An({...this._def,shape:()=>n})}deepPartial(){return Lp(this)}partial(e){const n={};return $t.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new An({...this._def,shape:()=>n})}required(e){const n={};return $t.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof nl;)i=i._def.innerType;n[r]=i}}),new An({...this._def,shape:()=>n})}keyof(){return OW($t.objectKeys(this.shape))}}An.create=(t,e)=>new An({shape:()=>t,unknownKeys:"strip",catchall:gl.create(),typeName:Xe.ZodObject,...ct(e)});An.strictCreate=(t,e)=>new An({shape:()=>t,unknownKeys:"strict",catchall:gl.create(),typeName:Xe.ZodObject,...ct(e)});An.lazycreate=(t,e)=>new An({shape:t,unknownKeys:"strip",catchall:gl.create(),typeName:Xe.ZodObject,...ct(e)});class Ib extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ia(a.ctx.common.issues));return De(n,{code:ye.invalid_union,unionErrors:o}),nt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ia(c));return De(n,{code:ye.invalid_union,unionErrors:a}),nt}}get options(){return this._def.options}}Ib.create=(t,e)=>new Ib({options:t,typeName:Xe.ZodUnion,...ct(e)});const VE=t=>t instanceof Pb?VE(t.schema):t instanceof la?VE(t.innerType()):t instanceof kb?[t.value]:t instanceof _d?t.options:t instanceof Ob?Object.keys(t.enum):t instanceof Rb?VE(t._def.innerType):t instanceof Ab?[void 0]:t instanceof Sb?[null]:null;class eA extends ft{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.object)return De(n,{code:ye.invalid_type,expected:Pe.object,received:n.parsedType}),nt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(De(n,{code:ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),nt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=VE(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new eA({typeName:Xe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ct(r)})}}function EP(t,e){const n=lu(t),r=lu(e);if(t===e)return{valid:!0,data:t};if(n===Pe.object&&r===Pe.object){const s=$t.objectKeys(e),i=$t.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=EP(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Pe.array&&r===Pe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=EP(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Pe.date&&r===Pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Tb extends ft{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(bP(i)||bP(o))return nt;const a=EP(i.value,o.value);return a.valid?((vP(i)||vP(o))&&n.dirty(),{status:n.value,value:a.data}):(De(r,{code:ye.invalid_intersection_types}),nt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Tb.create=(t,e,n)=>new Tb({left:t,right:e,typeName:Xe.ZodIntersection,...ct(n)});class oc extends ft{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.array)return De(r,{code:ye.invalid_type,expected:Pe.array,received:r.parsedType}),nt;if(r.data.length<this._def.items.length)return De(r,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),nt;!this._def.rest&&r.data.length>this._def.items.length&&(De(r,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ic(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ds.mergeArray(n,o)):ds.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new oc({...this._def,rest:e})}}oc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oc({items:t,typeName:Xe.ZodTuple,rest:null,...ct(e)})};class Nb extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.object)return De(r,{code:ye.invalid_type,expected:Pe.object,received:r.parsedType}),nt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new ic(r,a,r.path,a)),value:o._parse(new ic(r,r.data[a],r.path,a))});return r.common.async?ds.mergeObjectAsync(n,s):ds.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ft?new Nb({keyType:e,valueType:n,typeName:Xe.ZodRecord,...ct(r)}):new Nb({keyType:ta.create(),valueType:e,typeName:Xe.ZodRecord,...ct(n)})}}class fx extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.map)return De(r,{code:ye.invalid_type,expected:Pe.map,received:r.parsedType}),nt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new ic(r,a,r.path,[l,"key"])),value:i._parse(new ic(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return nt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return nt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}fx.create=(t,e,n)=>new fx({valueType:e,keyType:t,typeName:Xe.ZodMap,...ct(n)});class Pf extends ft{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.set)return De(r,{code:ye.invalid_type,expected:Pe.set,received:r.parsedType}),nt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(De(r,{code:ye.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(De(r,{code:ye.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return nt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new ic(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Pf({...this._def,minSize:{value:e,message:qe.toString(n)}})}max(e,n){return new Pf({...this._def,maxSize:{value:e,message:qe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Pf.create=(t,e)=>new Pf({valueType:t,minSize:null,maxSize:null,typeName:Xe.ZodSet,...ct(e)});class _g extends ft{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.function)return De(n,{code:ye.invalid_type,expected:Pe.function,received:n.parsedType}),nt;function r(a,c){return lx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cx(),_b].filter(l=>!!l),issueData:{code:ye.invalid_arguments,argumentsError:c}})}function s(a,c){return lx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cx(),_b].filter(l=>!!l),issueData:{code:ye.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Vm){const a=this;return ks(async function(...c){const l=new ia([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return ks(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new ia([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new ia([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _g({...this._def,args:oc.create(e).rest(rf.create())})}returns(e){return new _g({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new _g({args:e||oc.create([]).rest(rf.create()),returns:n||rf.create(),typeName:Xe.ZodFunction,...ct(r)})}}class Pb extends ft{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Pb.create=(t,e)=>new Pb({getter:t,typeName:Xe.ZodLazy,...ct(e)});class kb extends ft{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return De(n,{received:n.data,code:ye.invalid_literal,expected:this._def.value}),nt}return{status:"valid",value:e.data}}get value(){return this._def.value}}kb.create=(t,e)=>new kb({value:t,typeName:Xe.ZodLiteral,...ct(e)});function OW(t,e){return new _d({values:t,typeName:Xe.ZodEnum,...ct(e)})}class _d extends ft{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{expected:$t.joinValues(r),received:n.parsedType,code:ye.invalid_type}),nt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{received:n.data,code:ye.invalid_enum_value,options:r}),nt}return ks(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return _d.create(e)}exclude(e){return _d.create(this.options.filter(n=>!e.includes(n)))}}_d.create=OW;class Ob extends ft{_parse(e){const n=$t.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Pe.string&&r.parsedType!==Pe.number){const s=$t.objectValues(n);return De(r,{expected:$t.joinValues(s),received:r.parsedType,code:ye.invalid_type}),nt}if(n.indexOf(e.data)===-1){const s=$t.objectValues(n);return De(r,{received:r.data,code:ye.invalid_enum_value,options:s}),nt}return ks(e.data)}get enum(){return this._def.values}}Ob.create=(t,e)=>new Ob({values:t,typeName:Xe.ZodNativeEnum,...ct(e)});class Vm extends ft{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.promise&&n.common.async===!1)return De(n,{code:ye.invalid_type,expected:Pe.promise,received:n.parsedType}),nt;const r=n.parsedType===Pe.promise?n.data:Promise.resolve(n.data);return ks(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Vm.create=(t,e)=>new Vm({type:t,typeName:Xe.ZodPromise,...ct(e)});class la extends ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{De(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?nt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?nt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!xb(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>xb(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);$t.assertNever(s)}}la.create=(t,e,n)=>new la({schema:t,typeName:Xe.ZodEffects,effect:e,...ct(n)});la.createWithPreprocess=(t,e,n)=>new la({schema:e,effect:{type:"preprocess",transform:t},typeName:Xe.ZodEffects,...ct(n)});class nl extends ft{_parse(e){return this._getType(e)===Pe.undefined?ks(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nl.create=(t,e)=>new nl({innerType:t,typeName:Xe.ZodOptional,...ct(e)});class kf extends ft{_parse(e){return this._getType(e)===Pe.null?ks(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kf.create=(t,e)=>new kf({innerType:t,typeName:Xe.ZodNullable,...ct(e)});class Rb extends ft{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Pe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Rb.create=(t,e)=>new Rb({innerType:t,typeName:Xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ct(e)});class px extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ux(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}px.create=(t,e)=>new px({innerType:t,typeName:Xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ct(e)});class gx extends ft{_parse(e){if(this._getType(e)!==Pe.nan){const r=this._getOrReturnCtx(e);return De(r,{code:ye.invalid_type,expected:Pe.nan,received:r.parsedType}),nt}return{status:"valid",value:e.data}}}gx.create=t=>new gx({typeName:Xe.ZodNaN,...ct(t)});const dIe=Symbol("zod_brand");class RW extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class jv extends ft{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?nt:i.status==="dirty"?(n.dirty(),kW(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?nt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new jv({in:e,out:n,typeName:Xe.ZodPipeline})}}class mx extends ft{_parse(e){const n=this._def.innerType._parse(e);return xb(n)&&(n.value=Object.freeze(n.value)),n}}mx.create=(t,e)=>new mx({innerType:t,typeName:Xe.ZodReadonly,...ct(e)});const DW=(t,e={},n)=>t?Gm.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Gm.create(),hIe={object:An.lazycreate};var Xe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Xe||(Xe={}));const fIe=(t,e={message:`Input not instance of ${t.name}`})=>DW(n=>n instanceof t,e),$W=ta.create,UW=vd.create,pIe=gx.create,gIe=Ed.create,BW=Cb.create,mIe=Nf.create,yIe=dx.create,wIe=Ab.create,bIe=Sb.create,vIe=Gm.create,EIe=rf.create,_Ie=gl.create,xIe=hx.create,CIe=oa.create,AIe=An.create,SIe=An.strictCreate,IIe=Ib.create,TIe=eA.create,NIe=Tb.create,PIe=oc.create,kIe=Nb.create,OIe=fx.create,RIe=Pf.create,DIe=_g.create,$Ie=Pb.create,UIe=kb.create,BIe=_d.create,LIe=Ob.create,MIe=Vm.create,E4=la.create,jIe=nl.create,FIe=kf.create,zIe=la.createWithPreprocess,HIe=jv.create,WIe=()=>$W().optional(),qIe=()=>UW().optional(),GIe=()=>BW().optional(),VIe={string:t=>ta.create({...t,coerce:!0}),number:t=>vd.create({...t,coerce:!0}),boolean:t=>Cb.create({...t,coerce:!0}),bigint:t=>Ed.create({...t,coerce:!0}),date:t=>Nf.create({...t,coerce:!0})},KIe=nt;var k=Object.freeze({__proto__:null,defaultErrorMap:_b,setErrorMap:Z2e,getErrorMap:cx,makeIssue:lx,EMPTY_PATH:X2e,addIssueToContext:De,ParseStatus:ds,INVALID:nt,DIRTY:kW,OK:ks,isAborted:bP,isDirty:vP,isValid:xb,isAsync:ux,get util(){return $t},get objectUtil(){return wP},ZodParsedType:Pe,getParsedType:lu,ZodType:ft,ZodString:ta,ZodNumber:vd,ZodBigInt:Ed,ZodBoolean:Cb,ZodDate:Nf,ZodSymbol:dx,ZodUndefined:Ab,ZodNull:Sb,ZodAny:Gm,ZodUnknown:rf,ZodNever:gl,ZodVoid:hx,ZodArray:oa,ZodObject:An,ZodUnion:Ib,ZodDiscriminatedUnion:eA,ZodIntersection:Tb,ZodTuple:oc,ZodRecord:Nb,ZodMap:fx,ZodSet:Pf,ZodFunction:_g,ZodLazy:Pb,ZodLiteral:kb,ZodEnum:_d,ZodNativeEnum:Ob,ZodPromise:Vm,ZodEffects:la,ZodTransformer:la,ZodOptional:nl,ZodNullable:kf,ZodDefault:Rb,ZodCatch:px,ZodNaN:gx,BRAND:dIe,ZodBranded:RW,ZodPipeline:jv,ZodReadonly:mx,custom:DW,Schema:ft,ZodSchema:ft,late:hIe,get ZodFirstPartyTypeKind(){return Xe},coerce:VIe,any:vIe,array:CIe,bigint:gIe,boolean:BW,date:mIe,discriminatedUnion:TIe,effect:E4,enum:BIe,function:DIe,instanceof:fIe,intersection:NIe,lazy:$Ie,literal:UIe,map:OIe,nan:pIe,nativeEnum:LIe,never:_Ie,null:bIe,nullable:FIe,number:UW,object:AIe,oboolean:GIe,onumber:qIe,optional:jIe,ostring:WIe,pipeline:HIe,preprocess:zIe,promise:MIe,record:kIe,set:RIe,strictObject:SIe,string:$W,symbol:yIe,transformer:E4,tuple:PIe,undefined:wIe,union:IIe,unknown:EIe,void:xIe,NEVER:KIe,ZodIssueCode:ye,quotelessJson:Y2e,ZodError:ia});const kn=k.object({message:k.string()});function ke(t){return k.literal(Ue[t])}k.object({accessList:k.array(k.string()),blockHash:k.string().nullable(),blockNumber:k.string().nullable(),chainId:k.string().or(k.number()),from:k.string(),gas:k.string(),hash:k.string(),input:k.string().nullable(),maxFeePerGas:k.string(),maxPriorityFeePerGas:k.string(),nonce:k.string(),r:k.string(),s:k.string(),to:k.string(),transactionIndex:k.string().nullable(),type:k.string(),v:k.string(),value:k.string()});const QIe=k.object({chainId:k.string().or(k.number())}),JIe=k.object({email:k.string().email()}),YIe=k.object({otp:k.string()}),ZIe=k.object({uri:k.string(),preferredAccountType:k.optional(k.string()),chainId:k.optional(k.string().or(k.number()))}),XIe=k.object({chainId:k.optional(k.string().or(k.number())),preferredAccountType:k.optional(k.string()),socialUri:k.optional(k.string())}),eTe=k.object({provider:k.enum(["google","github","apple","facebook","x","discord"])}),tTe=k.object({email:k.string().email()}),nTe=k.object({otp:k.string()}),rTe=k.object({otp:k.string()}),sTe=k.object({themeMode:k.optional(k.enum(["light","dark"])),themeVariables:k.optional(k.record(k.string(),k.string().or(k.number()))),w3mThemeVariables:k.optional(k.record(k.string(),k.string()))}),iTe=k.object({metadata:k.object({name:k.string(),description:k.string(),url:k.string(),icons:k.array(k.string())}).optional(),sdkVersion:k.string().optional(),sdkType:k.string().optional(),projectId:k.string()}),oTe=k.object({type:k.string()}),aTe=k.object({action:k.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),cTe=k.object({url:k.string()}),lTe=k.object({userName:k.string()}),uTe=k.object({email:k.string().optional().nullable(),address:k.string(),chainId:k.string().or(k.number()),accounts:k.array(k.object({address:k.string(),type:k.enum([Er.ACCOUNT_TYPES.EOA,Er.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:k.string().optional().nullable(),preferredAccountType:k.optional(k.string())}),dTe=k.object({action:k.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),hTe=k.object({email:k.string().email().optional().nullable(),address:k.string(),chainId:k.string().or(k.number()),smartAccountDeployed:k.optional(k.boolean()),accounts:k.array(k.object({address:k.string(),type:k.enum([Er.ACCOUNT_TYPES.EOA,Er.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:k.optional(k.string())}),fTe=k.object({uri:k.string()}),pTe=k.object({isConnected:k.boolean()}),gTe=k.object({chainId:k.string().or(k.number())}),mTe=k.object({chainId:k.string().or(k.number())}),yTe=k.object({newEmail:k.string().email()}),wTe=k.object({smartAccountEnabledNetworks:k.array(k.number())});k.object({address:k.string(),isDeployed:k.boolean()});const bTe=k.object({version:k.string().optional()}),vTe=k.object({type:k.string(),address:k.string()}),ETe=k.any(),_Te=k.object({method:k.literal("eth_accounts")}),xTe=k.object({method:k.literal("eth_blockNumber")}),CTe=k.object({method:k.literal("eth_call"),params:k.array(k.any())}),ATe=k.object({method:k.literal("eth_chainId")}),STe=k.object({method:k.literal("eth_estimateGas"),params:k.array(k.any())}),ITe=k.object({method:k.literal("eth_feeHistory"),params:k.array(k.any())}),TTe=k.object({method:k.literal("eth_gasPrice")}),NTe=k.object({method:k.literal("eth_getAccount"),params:k.array(k.any())}),PTe=k.object({method:k.literal("eth_getBalance"),params:k.array(k.any())}),kTe=k.object({method:k.literal("eth_getBlockByHash"),params:k.array(k.any())}),OTe=k.object({method:k.literal("eth_getBlockByNumber"),params:k.array(k.any())}),RTe=k.object({method:k.literal("eth_getBlockReceipts"),params:k.array(k.any())}),DTe=k.object({method:k.literal("eth_getBlockTransactionCountByHash"),params:k.array(k.any())}),$Te=k.object({method:k.literal("eth_getBlockTransactionCountByNumber"),params:k.array(k.any())}),UTe=k.object({method:k.literal("eth_getCode"),params:k.array(k.any())}),BTe=k.object({method:k.literal("eth_getFilterChanges"),params:k.array(k.any())}),LTe=k.object({method:k.literal("eth_getFilterLogs"),params:k.array(k.any())}),MTe=k.object({method:k.literal("eth_getLogs"),params:k.array(k.any())}),jTe=k.object({method:k.literal("eth_getProof"),params:k.array(k.any())}),FTe=k.object({method:k.literal("eth_getStorageAt"),params:k.array(k.any())}),zTe=k.object({method:k.literal("eth_getTransactionByBlockHashAndIndex"),params:k.array(k.any())}),HTe=k.object({method:k.literal("eth_getTransactionByBlockNumberAndIndex"),params:k.array(k.any())}),WTe=k.object({method:k.literal("eth_getTransactionByHash"),params:k.array(k.any())}),qTe=k.object({method:k.literal("eth_getTransactionCount"),params:k.array(k.any())}),GTe=k.object({method:k.literal("eth_getTransactionReceipt"),params:k.array(k.any())}),VTe=k.object({method:k.literal("eth_getUncleCountByBlockHash"),params:k.array(k.any())}),KTe=k.object({method:k.literal("eth_getUncleCountByBlockNumber"),params:k.array(k.any())}),QTe=k.object({method:k.literal("eth_maxPriorityFeePerGas")}),JTe=k.object({method:k.literal("eth_newBlockFilter")}),YTe=k.object({method:k.literal("eth_newFilter"),params:k.array(k.any())}),ZTe=k.object({method:k.literal("eth_newPendingTransactionFilter")}),XTe=k.object({method:k.literal("eth_sendRawTransaction"),params:k.array(k.any())}),eNe=k.object({method:k.literal("eth_syncing"),params:k.array(k.any())}),tNe=k.object({method:k.literal("eth_uninstallFilter"),params:k.array(k.any())}),_4=k.object({method:k.literal("personal_sign"),params:k.array(k.any())}),nNe=k.object({method:k.literal("eth_signTypedData_v4"),params:k.array(k.any())}),rNe=k.object({method:k.literal("eth_sendTransaction"),params:k.array(k.any())}),sNe=k.object({method:k.literal("solana_signMessage"),params:k.object({message:k.string(),pubkey:k.string()})}),iNe=k.object({method:k.literal("solana_signTransaction"),params:k.object({transaction:k.string()})}),oNe=k.object({method:k.literal("solana_signAllTransactions"),params:k.object({transactions:k.array(k.string())})}),aNe=k.object({method:k.literal("solana_signAndSendTransaction"),params:k.object({transaction:k.string(),options:k.object({skipPreflight:k.boolean().optional(),preflightCommitment:k.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:k.number().optional(),minContextSlot:k.number().optional()}).optional()})}),cNe=k.object({method:k.literal("wallet_sendCalls"),params:k.array(k.object({chainId:k.string().or(k.number()).optional(),from:k.string().optional(),version:k.string().optional(),capabilities:k.any().optional(),calls:k.array(k.object({to:k.string().startsWith("0x"),data:k.string().startsWith("0x").optional(),value:k.string().optional()}))}))}),lNe=k.object({method:k.literal("wallet_getCallsStatus"),params:k.array(k.string())}),uNe=k.object({method:k.literal("wallet_getCapabilities")}),dNe=k.object({method:k.literal("wallet_grantPermissions"),params:k.array(k.any())}),hNe=k.object({method:k.literal("wallet_revokePermissions"),params:k.any()}),fNe=k.object({method:k.literal("wallet_getAssets"),params:k.any()}),x4=k.object({token:k.string()}),Oe=k.object({id:k.string().optional()}),d0={appEvent:Oe.extend({type:ke("APP_SWITCH_NETWORK"),payload:QIe}).or(Oe.extend({type:ke("APP_CONNECT_EMAIL"),payload:JIe})).or(Oe.extend({type:ke("APP_CONNECT_DEVICE")})).or(Oe.extend({type:ke("APP_CONNECT_OTP"),payload:YIe})).or(Oe.extend({type:ke("APP_CONNECT_SOCIAL"),payload:ZIe})).or(Oe.extend({type:ke("APP_GET_FARCASTER_URI")})).or(Oe.extend({type:ke("APP_CONNECT_FARCASTER")})).or(Oe.extend({type:ke("APP_GET_USER"),payload:k.optional(XIe)})).or(Oe.extend({type:ke("APP_GET_SOCIAL_REDIRECT_URI"),payload:eTe})).or(Oe.extend({type:ke("APP_SIGN_OUT")})).or(Oe.extend({type:ke("APP_IS_CONNECTED"),payload:k.optional(x4)})).or(Oe.extend({type:ke("APP_GET_CHAIN_ID")})).or(Oe.extend({type:ke("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Oe.extend({type:ke("APP_INIT_SMART_ACCOUNT")})).or(Oe.extend({type:ke("APP_SET_PREFERRED_ACCOUNT"),payload:oTe})).or(Oe.extend({type:ke("APP_RPC_REQUEST"),payload:_4.or(fNe).or(_Te).or(xTe).or(CTe).or(ATe).or(STe).or(ITe).or(TTe).or(NTe).or(PTe).or(kTe).or(OTe).or(RTe).or(DTe).or($Te).or(UTe).or(BTe).or(LTe).or(MTe).or(jTe).or(FTe).or(zTe).or(HTe).or(WTe).or(qTe).or(GTe).or(VTe).or(KTe).or(QTe).or(JTe).or(YTe).or(ZTe).or(XTe).or(eNe).or(tNe).or(_4).or(nNe).or(rNe).or(sNe).or(iNe).or(oNe).or(aNe).or(lNe).or(cNe).or(uNe).or(dNe).or(hNe)})).or(Oe.extend({type:ke("APP_UPDATE_EMAIL"),payload:tTe})).or(Oe.extend({type:ke("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:nTe})).or(Oe.extend({type:ke("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:rTe})).or(Oe.extend({type:ke("APP_SYNC_THEME"),payload:sTe})).or(Oe.extend({type:ke("APP_SYNC_DAPP_DATA"),payload:iTe})).or(Oe.extend({type:ke("APP_RELOAD")})),frameEvent:Oe.extend({type:ke("FRAME_SWITCH_NETWORK_ERROR"),payload:kn}).or(Oe.extend({type:ke("FRAME_SWITCH_NETWORK_SUCCESS"),payload:mTe})).or(Oe.extend({type:ke("FRAME_CONNECT_EMAIL_SUCCESS"),payload:aTe})).or(Oe.extend({type:ke("FRAME_CONNECT_EMAIL_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:cTe})).or(Oe.extend({type:ke("FRAME_GET_FARCASTER_URI_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:lTe})).or(Oe.extend({type:ke("FRAME_CONNECT_FARCASTER_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_CONNECT_OTP_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_CONNECT_OTP_SUCCESS")})).or(Oe.extend({type:ke("FRAME_CONNECT_DEVICE_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Oe.extend({type:ke("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:uTe})).or(Oe.extend({type:ke("FRAME_CONNECT_SOCIAL_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_GET_USER_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_GET_USER_SUCCESS"),payload:hTe})).or(Oe.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:fTe})).or(Oe.extend({type:ke("FRAME_SIGN_OUT_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_SIGN_OUT_SUCCESS")})).or(Oe.extend({type:ke("FRAME_IS_CONNECTED_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_IS_CONNECTED_SUCCESS"),payload:pTe})).or(Oe.extend({type:ke("FRAME_GET_CHAIN_ID_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_GET_CHAIN_ID_SUCCESS"),payload:gTe})).or(Oe.extend({type:ke("FRAME_RPC_REQUEST_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_RPC_REQUEST_SUCCESS"),payload:ETe})).or(Oe.extend({type:ke("FRAME_SESSION_UPDATE"),payload:x4})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_SUCCESS"),payload:dTe})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:yTe})).or(Oe.extend({type:ke("FRAME_SYNC_THEME_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_SYNC_THEME_SUCCESS")})).or(Oe.extend({type:ke("FRAME_SYNC_DAPP_DATA_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Oe.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:wTe})).or(Oe.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:vTe})).or(Oe.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_READY"),payload:bTe})).or(Oe.extend({type:ke("FRAME_RELOAD_ERROR"),payload:kn})).or(Oe.extend({type:ke("FRAME_RELOAD_SUCCESS")}))};function z2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class pNe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ae.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!z2(Ue.FRAME_EVENT_KEY,l))return;const u=d0.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Pi.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Pi.isClient&&window.addEventListener("message",({data:o})=>{if(!z2(Ue.FRAME_EVENT_KEY,o))return;const a=d0.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Pi.isClient&&window.addEventListener("message",({data:o})=>{if(!z2(Ue.APP_EVENT_KEY,o))return;const a=d0.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Pi.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");d0.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Pi.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");d0.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Pi.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Hue}?projectId=${e}&chainId=${r}&version=${que}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class gNe{constructor(e){var i;const n=my({level:Wue}),{logger:r,chunkLoggerController:s}=uR({opts:n});this.logger=hs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class mNe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new gNe(e)),this.abortController=i,this.w3mFrame=new pNe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Pr.get(Ue.EMAIL_LOGIN_USED_KEY)}getEmail(){return Pr.get(Ue.EMAIL)}getUsername(){return Pr.get(Ue.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ue.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Pi.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ue.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ue.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ue.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ue.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ue.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ue.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ue.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ue.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ue.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ue.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ue.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ue.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ue.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ue.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ue.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ue.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ue.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ue.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ue.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ue.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Er.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ue.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ue.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ue.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Er.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ue.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Er.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ue.APP_SYNC_DAPP_DATA,Ue.APP_SYNC_THEME,Ue.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ue.APP_CONNECT_EMAIL,Ue.APP_CONNECT_DEVICE,Ue.APP_CONNECT_OTP,Ue.APP_CONNECT_SOCIAL,Ue.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,w){var v,b,x;y.id===u&&((b=w==null?void 0:(v=w.logger).info)==null||b.call(v,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((x=y.payload)==null?void 0:x.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Pr.set(Ue.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Pr.set(Ue.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Pr.set(Ue.EMAIL,e),Pr.set(Ue.EMAIL_LOGIN_USED_KEY,"true"),Pr.delete(Ue.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Pr.delete(Ue.EMAIL_LOGIN_USED_KEY),Pr.delete(Ue.EMAIL),Pr.delete(Ue.LAST_USED_CHAIN_KEY),Pr.delete(Ue.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Pr.set(Ue.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Pr.get(Ue.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Pr.set(Ue.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class sf{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return sf.instance||(sf.instance=new mNe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),sf.instance}}var C4={};const yNe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof C4<"u"?C4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},_P={filterOutDuplicatesByRDNS(t){const e=fe.state.enableEIP6963?Se.state.connectors:[],n=xe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Me.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Se.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=xe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Se.state,{featuredWalletIds:n}=fe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=fe.state.features)==null?void 0:c.connectMethodsOrder),r=e||Se.state.connectors;if(n)return n;const{injected:s,announced:i}=KE.getConnectorsByType(r,We.state.recommended,We.state.featured),o=s.filter(KE.showConnector),a=i.filter(KE.showConnector);return o.length||a.length?["wallet","email","social"]:yNe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&We.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&We.state.excludedWallets.some(r=>Eb.isLowerCaseMatch(r.name,t.name));return e||n}},KE={getConnectorsByType(t,e,n){const{customWallets:r}=fe.state,s=xe.getRecentWallets(),i=_P.filterOutDuplicateWallets(e),o=_P.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&We.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&We.state.excludedWallets.some(i=>Eb.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Me.isMobile()||Me.isMobile()&&!e&&!Re.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(B.state.chains.values()).some(n=>Se.getConnectorId(n.namespace)===ae.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=fe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=KE.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:fe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),y=f.filter(({type:w})=>!g.some(({type:b})=>b===w));return Array.from(new Set([...g,...y].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Me.isMobile())return{accounts:[],chainId:void 0};if(t.id===ae.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QE=globalThis,WR=QE.ShadowRoot&&(QE.ShadyCSS===void 0||QE.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qR=Symbol(),A4=new WeakMap;let LW=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==qR)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(WR&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=A4.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&A4.set(n,e))}return e}toString(){return this.cssText}};const Qi=t=>new LW(typeof t=="string"?t:t+"",void 0,qR),xg=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new LW(n,t,qR)},wNe=(t,e)=>{if(WR)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=QE.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},S4=WR?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Qi(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:bNe,defineProperty:vNe,getOwnPropertyDescriptor:ENe,getOwnPropertyNames:_Ne,getOwnPropertySymbols:xNe,getPrototypeOf:CNe}=Object,cd=globalThis,I4=cd.trustedTypes,ANe=I4?I4.emptyScript:"",H2=cd.reactiveElementPolyfillSupport,uw=(t,e)=>t,xP={toAttribute(t,e){switch(e){case Boolean:t=t?ANe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},MW=(t,e)=>!bNe(t,e),T4={attribute:!0,type:String,converter:xP,reflect:!1,useDefault:!1,hasChanged:MW};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),cd.litPropertyMetadata??(cd.litPropertyMetadata=new WeakMap);let Mp=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=T4){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&vNe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=ENe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??T4}static _$Ei(){if(this.hasOwnProperty(uw("elementProperties")))return;const e=CNe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(uw("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(uw("properties"))){const n=this.properties,r=[..._Ne(n),...xNe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(S4(s))}else e!==void 0&&n.push(S4(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return wNe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:xP).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:xP;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??MW)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Mp.elementStyles=[],Mp.shadowRootOptions={mode:"open"},Mp[uw("elementProperties")]=new Map,Mp[uw("finalized")]=new Map,H2==null||H2({ReactiveElement:Mp}),(cd.reactiveElementVersions??(cd.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dw=globalThis,yx=dw.trustedTypes,N4=yx?yx.createPolicy("lit-html",{createHTML:t=>t}):void 0,jW="$lit$",uu=`lit$${Math.random().toFixed(9).slice(2)}$`,FW="?"+uu,SNe=`<${FW}>`,Of=document,Db=()=>Of.createComment(""),$b=t=>t===null||typeof t!="object"&&typeof t!="function",GR=Array.isArray,INe=t=>GR(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",W2=`[ 	
\f\r]`,h0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P4=/-->/g,k4=/>/g,zd=RegExp(`>|${W2}(?:([^\\s"'>=/]+)(${W2}*=${W2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),O4=/'/g,R4=/"/g,zW=/^(?:script|style|textarea|title)$/i,HW=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),FUe=HW(1),zUe=HW(2),Km=Symbol.for("lit-noChange"),yr=Symbol.for("lit-nothing"),D4=new WeakMap,vh=Of.createTreeWalker(Of,129);function WW(t,e){if(!GR(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return N4!==void 0?N4.createHTML(e):e}const TNe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=h0;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===h0?u[1]==="!--"?o=P4:u[1]!==void 0?o=k4:u[2]!==void 0?(zW.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=zd):u[3]!==void 0&&(o=zd):o===zd?u[0]===">"?(o=s??h0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?zd:u[3]==='"'?R4:O4):o===R4||o===O4?o=zd:o===P4||o===k4?o=h0:(o=zd,s=void 0);const f=o===zd&&t[a+1].startsWith("/>")?" ":"";i+=o===h0?c+SNe:d>=0?(r.push(l),c.slice(0,d)+jW+c.slice(d)+uu+f):c+uu+(d===-2?a:f)}return[WW(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Ub{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=TNe(e,n);if(this.el=Ub.createElement(l,r),vh.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=vh.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(jW)){const h=u[o++],f=s.getAttribute(d).split(uu),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?PNe:p[1]==="?"?kNe:p[1]==="@"?ONe:tA}),s.removeAttribute(d)}else d.startsWith(uu)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(zW.test(s.tagName)){const d=s.textContent.split(uu),h=d.length-1;if(h>0){s.textContent=yx?yx.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Db()),vh.nextNode(),c.push({type:2,index:++i});s.append(d[h],Db())}}}else if(s.nodeType===8)if(s.data===FW)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(uu,d+1))!==-1;)c.push({type:7,index:i}),d+=uu.length-1}i++}}static createElement(e,n){const r=Of.createElement("template");return r.innerHTML=e,r}}function Qm(t,e,n=t,r){var o,a;if(e===Km)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=$b(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Qm(t,s._$AS(t,e.values),s,r)),e}class NNe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Of).importNode(n,!0);vh.currentNode=s;let i=vh.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Fv(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new RNe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=vh.nextNode(),o++)}return vh.currentNode=Of,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Fv{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=yr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Qm(this,e,n),$b(e)?e===yr||e==null||e===""?(this._$AH!==yr&&this._$AR(),this._$AH=yr):e!==this._$AH&&e!==Km&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):INe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==yr&&$b(this._$AH)?this._$AA.nextSibling.data=e:this.T(Of.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Ub.createElement(WW(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new NNe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=D4.get(e.strings);return n===void 0&&D4.set(e.strings,n=new Ub(e)),n}k(e){GR(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Fv(this.O(Db()),this.O(Db()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class tA{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=yr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=yr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Qm(this,e,n,0),o=!$b(e)||e!==this._$AH&&e!==Km,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Qm(this,a[r+c],n,c),l===Km&&(l=this._$AH[c]),o||(o=!$b(l)||l!==this._$AH[c]),l===yr?e=yr:e!==yr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===yr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class PNe extends tA{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===yr?void 0:e}}class kNe extends tA{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==yr)}}class ONe extends tA{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Qm(this,e,n,0)??yr)===Km)return;const r=this._$AH,s=e===yr&&r!==yr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==yr&&(r===yr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class RNe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Qm(this,e)}}const q2=dw.litHtmlPolyfillSupport;q2==null||q2(Ub,Fv),(dw.litHtmlVersions??(dw.litHtmlVersions=[])).push("3.3.0");const DNe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Fv(e.insertBefore(Db(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const of=globalThis;let JE=class extends Mp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=DNe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Km}};var MB;JE._$litElement$=!0,JE.finalized=!0,(MB=of.litElementHydrateSupport)==null||MB.call(of,{LitElement:JE});const G2=of.litElementPolyfillSupport;G2==null||G2({LitElement:JE});(of.litElementVersions??(of.litElementVersions=[])).push("4.2.0");let hw,ld,ud;function WUe(t,e){hw=document.createElement("style"),ld=document.createElement("style"),ud=document.createElement("style"),hw.textContent=Cg(t).core.cssText,ld.textContent=Cg(t).dark.cssText,ud.textContent=Cg(t).light.cssText,document.head.appendChild(hw),document.head.appendChild(ld),document.head.appendChild(ud),qW(e)}function qW(t){ld&&ud&&(t==="light"?(ld.removeAttribute("media"),ud.media="enabled"):(ud.removeAttribute("media"),ld.media="enabled"))}function $Ne(t){hw&&ld&&ud&&(hw.textContent=Cg(t).core.cssText,ld.textContent=Cg(t).dark.cssText,ud.textContent=Cg(t).light.cssText)}function Cg(t){return{core:xg`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Qi(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Qi((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Qi((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Qi((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Qi((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:xg`
      :root {
        --w3m-color-mix: ${Qi((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Qi(Jc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Qi(Jc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:xg`
      :root {
        --w3m-color-mix: ${Qi((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Qi(Jc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Qi(Jc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const qUe=xg`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,GUe=xg`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,VUe=xg`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,R0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},GW=Dee({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function zv(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const $4=zv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),U4=zv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});zv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});zv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});zv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const UNe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},fw={getMethodsByChainNamespace(t){return UNe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case $4.caipNetworkId:u.chains.push($4.deprecatedCaipNetworkId);break;case U4.caipNetworkId:u.chains.push(U4.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await X0.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class VR{constructor({provider:e,namespace:n}){this.id=ae.CONNECTOR_ID.WALLET_CONNECT,this.name=qu.ConnectorNamesMap[ae.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=qu.ConnectorImageIds[ae.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=B.getCaipNetworks.bind(B),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=fe.state.universalProviderConfigOverride,s=fw.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return lw.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:BNe})}}const BNe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class VW{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>B.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ae.CONNECTOR_ID.AUTH,type:"AUTH",name:ae.CONNECTOR_NAMES.AUTH,provider:e,imageId:qu.ConnectorImageIds[ae.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ee.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ee.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof VR);if(!e)throw new Error("WalletConnectConnector not found");return e}}class LNe extends VW{setUniversalProvider(e){this.addConnector(new VR({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Me.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Kt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ee.state.balanceLoading&&e.chainId===((c=B.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ee.state.balance||"0.00",symbol:Ee.state.balanceSymbol||""};const s=(await Ee.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ae.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Ey.encode(new TextEncoder().encode(r)),pubkey:s}},(a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=B.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ae.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:gf(n.id)}]}))}catch(u){if(u.code===R0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===R0.ERROR_INVALID_CHAIN_ID||u.code===R0.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===R0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:gf(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const MNe=["email","socials","swaps","onramp","activity","reownBranding"],nE={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Kt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Kt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Kt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Kt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Kt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Kt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Kt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Kt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Kt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},jNe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=nE[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=nE[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return nE[t].processApi(e)},processFallbackFeature(t,e){return nE[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await We.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Kt.DEFAULT_REMOTE_FEATURES:Kt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of MNe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Kt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Vn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class FNe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=B.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=B.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=B.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return B.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>B.getCaipNetworks(n),this.getActiveChainNamespace=()=>B.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{B.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>B.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>B.state.activeChain===n||!n?B.state.activeCaipAddress:B.getAccountProp("caipAddress",n),this.setClientId=n=>{Ke.setClientId(n)},this.getProvider=n=>tn.getProvider(n),this.getProviderType=n=>tn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ee.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ee.setCaipAddress(n,r),n&&fe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ee.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ee.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ee.setProfileImage(n,r)},this.setUser=(n,r)=>{Ee.setUser(n,r)},this.resetAccount=n=>{Ee.resetAccount(n)},this.setCaipNetwork=n=>{B.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{B.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ee.setAllAccounts(n,r),fe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ee.setStatus(n,r),Se.isConnected()?xe.setConnectionStatus("connected"):xe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>B.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Se.state.allConnectors,...n];Se.setConnectors(r)},this.setConnections=(n,r)=>{Re.setConnections(n,r)},this.fetchIdentity=n=>Ke.fetchIdentity(n),this.getReownName=n=>X0.getNamesForAddress(n),this.getConnectors=()=>Se.getConnectors(),this.getConnectorImage=n=>b7.getConnectorImage(n),this.getConnections=n=>db.getConnectionsData(n).connections,this.getRecentConnections=n=>db.getConnectionsData(n).recentConnections,this.switchConnection=n=>Re.switchConnection(n),this.deleteConnection=n=>xe.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=tn.getProviderId(r),i=n?{...n,type:s}:void 0;Ee.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!B.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ee.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ee.removeAddressLabel(n,r)},this.getAddress=n=>B.state.activeChain===n||!n?Ee.state.address:B.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>B.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{B.resetNetwork(n)},this.addConnector=n=>{Se.addConnector(n)},this.resetWcConnection=()=>{Re.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ee.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ee.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{B.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ee.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{fe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await jNe.fetchRemoteFeatures(e),fe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&_N.setOnrampProviders(this.remoteFeatures.onramp),((n=fe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=fe.state.remoteFeatures)==null?void 0:r.socials)&&((s=fe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await We.fetchAllowedOrigins();if(!e||!Me.isClient()){Vn.open(Cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;fw.isOriginAllowed(n,e,R0.DEFAULT_ALLOWED_ANCESTORS)||Vn.open(Cn.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){Vn.open(Cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Vn.open(Cn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Vn.open({shortMessage:Cn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Cn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Vn.open(Cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Qt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Js.setThemeMode(e.themeMode),e.themeVariables&&Js.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");B.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&B.setActiveCaipNetwork(n)}initializeConnectionController(e){Re.initialize(e.adapters??[]),Re.setWcBasic(e.basic??!1)}initializeConnectorController(){Se.initialize(this.chainNamespaces)}initializeProjectSettings(e){fe.setProjectId(e.projectId),fe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;fe.setDebug(e.debug!==!1),fe.setEnableWalletConnect(e.enableWalletConnect!==!1),fe.setEnableWalletGuide(e.enableWalletGuide!==!1),fe.setEnableWallets(e.enableWallets!==!1),fe.setEIP6963Enabled(e.enableEIP6963!==!1),fe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),fe.setEnableAuthLogger(e.enableAuthLogger!==!1),fe.setCustomRpcUrls(e.customRpcUrls),fe.setEnableEmbedded(e.enableEmbedded),fe.setAllWallets(e.allWallets),fe.setIncludeWalletIds(e.includeWalletIds),fe.setExcludeWalletIds(e.excludeWalletIds),fe.setFeaturedWalletIds(e.featuredWalletIds),fe.setTokens(e.tokens),fe.setTermsConditionsUrl(e.termsConditionsUrl),fe.setPrivacyPolicyUrl(e.privacyPolicyUrl),fe.setCustomWallets(e.customWallets),fe.setFeatures(e.features),fe.setAllowUnsupportedChain(e.allowUnsupportedChain),fe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),fe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),fe.setDefaultAccountTypes(e.defaultAccountTypes);const n=xe.getPreferredAccountTypes()||{},r={...fe.state.defaultAccountTypes,...n};Ee.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),fe.setMetadata(e.metadata),fe.setDisableAppend(e.disableAppend),fe.setEnableEmbedded(e.enableEmbedded),fe.setSIWX(e.siwx),!e.projectId){Vn.open(Cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ae.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");fe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Me.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=qa.getUnsupportedNetwork(`${n}:${e}`);B.setActiveCaipNetwork(r)}}getDefaultNetwork(){return qa.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return qa.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return qa.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?qa.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=tn.getProvider(e),s=tn.getProviderId(e),{caipAddress:i}=B.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),xe.removeConnectedNamespace(e),tn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Se.removeConnectorId(e),B.resetAccount(e),B.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=B.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),xe.setConnectedNamespaces([...B.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Se.setConnectorId(wn.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,w,v,b,x;const c=B.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(C=>C.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:w[0])||((x=(b=(v=d==null?void 0:d.rpcUrls)==null?void 0:v.default)==null?void 0:b.http)==null?void 0:x[0])});if(!h)return;xe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ee.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=B.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),xe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=Jue(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Lt.resetSend(),Re.resetWcConnection(),await lw.clearSessions(),Se.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));xe.deleteConnectedSocialProvider(),Qt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(B.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ee.state.address,provider:tn.getProvider(B.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Kt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(B.state.activeChain),s=tn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ae.CHAIN.EVM){const n=this.getAdapter(B.state.activeChain),r=tn.getProvider(B.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ee.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:B.state.activeChain}),Ee.state.profileImage||!1},getEnsAddress:async e=>await fw.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(B.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=tn.getProvider(B.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(B.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ee.state.address||this.updateNativeBalance(Ee.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Re.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(tn.getProviderId(B.state.activeChain)===wn.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=tn.getProvider(n),i=tn.getProviderId(n);if(e.chainNamespace===B.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===wn.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Ti.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new LNe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=xe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(xe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=B.state.activeChain===e,c=B.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ee.state.address,i=B.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=B.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=B.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=B.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ae.CHAIN.EVM&&Me.isSafeApp()&&Se.setConnectorId(ae.CONNECTOR_ID.SAFE,e);const n=Se.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ae.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ae.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Se.getConnectorId(e),s=this.getCaipNetwork(e),o=Se.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Me.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=B.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=Ti.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=Ti.validateCaipAddress(l),{chainId:y,address:w}=Ti.parseCaipAddress(g);if(tn.setProviderId(i,wn.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&B.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==ae.CHAIN.EVM){const v=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:B.state.activeCaipNetwork});tn.setProvider(i,v)}else tn.setProvider(i,this.universalProvider);Se.setConnectorId(ae.CONNECTOR_ID.WALLET_CONNECT,i),xe.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:w,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await B.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Ti.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Me.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){tn.setProviderId(s,e),tn.setProvider(s,n),Se.setConnectorId(r,s)}async syncAllAccounts(e){const n=Se.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===B.state.activeChain,r=B.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=xe.getActiveNetworkProps(),c=i||a,l=((d=B.state.activeCaipNetwork)==null?void 0:d.name)===ae.UNSUPPORTED_NETWORK_NAME,u=B.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],w=y.find(b=>{var x;return((x=Ti.parseCaipNetworkId(b))==null?void 0:x.chainId)===c.toString()}),v=y.find(b=>{var x;return((x=Ti.parseCaipNetworkId(b))==null?void 0:x.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===w),p=this.getCaipNetworks().find(b=>b.caipNetworkId===v||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===B.state.activeChain?fe.state.enableNetworkSwitch&&!fe.state.allowUnsupportedChain&&((h=B.state.activeCaipNetwork)==null?void 0:h.name)===ae.UNSUPPORTED_NETWORK_NAME?B.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Eb.isLowerCaseMatch(s,Ee.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Se.getConnectorId(e),r=tn.getProviderId(e);if(r===wn.CONNECTOR_TYPE_ANNOUNCED||r===wn.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===wn.CONNECTOR_TYPE_WALLET_CONNECT){const i=tn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ae.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ae.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!ub.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=B.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Q2e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};fe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await G2e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Re.setUri(e)}),this.universalProvider.on("connect",Re.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Re.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(fw.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Me.isCaipAddress(r[0])&&this.syncAccount(Ti.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Me.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Qt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Cn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Cn.ALERT_ERRORS[o];a&&(Vn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Re.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Ft.open({...e,data:{swap:e.arguments}})}return Ft.open(e)}async close(){await this.injectModalUi(),Ft.close()}setLoading(e,n){Ft.setLoading(e,n)}async disconnect(e){await Re.disconnect({namespace:e})}getSIWX(){return fe.state.siwx}getError(){return""}getChainId(){var e;return(e=B.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Vn.open(Cn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await B.switchActiveNetwork(n)}getWalletProvider(){return B.state.activeChain?tn.state.providers[B.state.activeChain]:null}getWalletProviderType(){return tn.getProviderId(B.state.activeChain)}subscribeProviders(e){return tn.subscribeProviders(e)}getThemeMode(){return Js.state.themeMode}getThemeVariables(){return Js.state.themeVariables}setThemeMode(e){Js.setThemeMode(e),qW(Js.state.themeMode)}setTermsConditionsUrl(e){fe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){fe.setPrivacyPolicyUrl(e)}setThemeVariables(e){Js.setThemeVariables(e),$Ne(Js.state.themeVariables)}subscribeTheme(e){return Js.subscribe(e)}subscribeConnections(e){return Re.subscribe(e)}getWalletInfo(e){return e?B.getAccountProp("connectedWalletInfo",e):Ee.state.connectedWalletInfo}getAccount(e){var o;const n=Se.getAuthConnector(e),r=B.getAccountData(e),s=B.state.activeChain,i=xe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Me.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ae.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:xe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?B.subscribeChainProp("accountState",r,n):B.subscribe(r),Se.subscribe(r)}subscribeNetwork(e){return B.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Ee.subscribeKey("connectedWalletInfo",e,n):Ee.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ee.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){B.subscribeKey("activeCaipNetwork",e)}getState(){return Za.state}subscribeState(e){return Za.subscribe(e)}showErrorMessage(e){Zo.showError(e)}showSuccessMessage(e){Zo.showSuccess(e)}getEvent(){return{...Qt.state}}subscribeEvents(e){return Qt.subscribe(e)}replace(e){Ye.replace(e)}redirect(e){Ye.push(e)}popTransactionStack(e){Ye.popTransactionStack(e)}isOpen(){return Ft.state.open}isTransactionStackEmpty(){return Ye.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){fe.setFeatures(e)}updateRemoteFeatures(e){fe.setRemoteFeatures(e)}updateOptions(e){const r={...fe.state||{},...e};fe.setOptions(r)}setConnectMethodsOrder(e){fe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){fe.setWalletFeaturesOrder(e)}setCollapseWallets(e){fe.setCollapseWallets(e)}setSocialsOrder(e){fe.setSocialsOrder(e)}getConnectMethodsOrder(){return _P.getConnectOrderMethod(fe.state.features,Se.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||B.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&B.removeNetwork(e,n)}}let B4=!1;class zNe extends FNe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Pi.checkIfRequestExists(n)?Pi.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Er.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Er.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Pi.checkIfRequestIsSafe(r),i=Ee.state.address,o=B.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=B.state.activeChain;Se.getConnectorId(n)===ae.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=B.state.activeChain,s=r===ae.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=fe.state.defaultAccountTypes[r],o=(l=Ee.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Eb.isLowerCaseMatch(n.address,Ee.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ee.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Me.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Me.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ee.state.user||{},username:n},B.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,B.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,B.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===B.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=Ee.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Js.getSnapshot(),u=fe.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:Jc(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:ae.CONNECTOR_ID.AUTH,info:{name:ae.CONNECTOR_ID.AUTH},type:wn.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=B.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):Se.getConnectorId(n)===ae.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),xe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Me.isTelegram())return;const r=xe.getTelegramSocialProvider();if(!r||!Me.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ee.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Se.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Re.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),xe.setConnectedSocialProvider(r),xe.removeTelegramSocialProvider(),Qt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Eb.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=sf.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Cn.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?Vn.open(Cn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?Vn.open(Cn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&Vn.open(Cn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Za.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===B.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&We.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=B.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=tn.getProvider(r),u=tn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=tn.getProviderId(n)===wn.CONNECTOR_TYPE_AUTH,u=tn.getProviderId(r),d=u===wn.CONNECTOR_TYPE_AUTH,h=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(B.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ae.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:wn.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===wn.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Za.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ae.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=tn.getProviderId(e);if(n===wn.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=xe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Me.isClient()&&!B4)try{const e={...Kt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Me.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!fe.state.disableAppend&&!fe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}B4=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Me.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Mn(()=>import("./embedded-wallet-BldN9GOw.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(Mn(()=>import("./email-ghyzGl7w.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(Mn(()=>import("./socials-sKtRZ279.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(Mn(()=>import("./swaps-er7PPDib.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(Mn(()=>import("./send-_CTnOR3t.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(Mn(()=>import("./receive-ByKuwtR9.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(Mn(()=>import("./onramp-CIGocEAm.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(Mn(()=>import("./transactions-BzBVV6Wu.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(Mn(()=>import("./index-C6KRUgTf.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,Mn(()=>import("./index-CPxPq8RE.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),Mn(()=>import("./w3m-modal-CePpyCZz.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Vl;function HNe(t){t&&(Vl=t)}function nA(){if(!Vl)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Vl==null?void 0:Vl.open(n))}async function e(){await(Vl==null?void 0:Vl.close())}return{open:t,close:e}}const WNe="1.7.10";let rE;function qNe(t){return rE||(rE=new zNe({...t,sdkVersion:Me.generateSdkVersion(t.adapters??[],"react",WNe)}),HNe(rE)),rE}const GNe=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),L4=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],VNe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=GNe({isOpen:t}),{open:i}=nA(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,y]=D.useState(1),[w,v]=D.useState(1),[b,x]=D.useState(0),[_,C]=D.useState(null),[S,T]=D.useState(L4[0]),[A,P]=D.useState(!1),[R,j]=D.useState(null),z=D.useCallback(async()=>{var $,M;try{if(($=window.solana)!=null&&$.isPhantom){const q=await window.solana.connect();j(q.publicKey.toString());return}if((M=window.solflare)!=null&&M.isSolflare){const q=await window.solflare.connect();j(q.publicKey.toString());return}i()}catch(q){console.error("Failed to connect Solana wallet:",q),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}P(!1)},[i]);D.useEffect(()=>{var $,M;($=window.solana)!=null&&$.publicKey?j(window.solana.publicKey.toString()):(M=window.solflare)!=null&&M.publicKey&&j(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var M;u(!0),h(null);try{let q,Z=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){P(!0),u(!1);return}Z=R||void 0,q=await g7(S.slug,50),console.log("Fetched Solana NFTs from collection:",q.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(M=q.data[0])==null?void 0:M.owners),console.log("All NFTs owner data:",q.data.map(re=>({name:re.name,owners:re.owners,owner_of:re.owner_of}))),q.data.some(re=>re.owners&&re.owners.length>0)?(q.data=q.data.filter(re=>{const ce=re.owners.some(ge=>ge.owner_of&&ge.owner_of.toLowerCase()===R.toLowerCase());return ce&&console.log("Found owned NFT:",re.name),ce}),console.log("NFTs after filtering:",q.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?q=await iR(S.slug,50,Z):q=await sR(S.slug,g,50,Z);c(q.data),v(q.totalPages),x(q.totalCount)}catch(q){q instanceof Error?h(q.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),D.useEffect(()=>{A&&z()},[A,z]);const V=$=>new Date($).toLocaleDateString(),I=$=>S.api==="opensea-solana"&&(!$.owners||$.owners.length===0)?"Owner data unavailable":$.owners.length>0?`${$.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},L=async $=>{if(S.api==="opensea"&&S.chain)try{const M=await p7(S.chain,$.address,$.token_id.toString()),q={...$,attributes:JSON.stringify(M.traits||[])};C(q)}catch(M){console.error("Failed to fetch full NFT details",M),C($)}else C($)},U=$=>{T($),y(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(Iv,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:L4.map($=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===$.slug?"active":""}`,onClick:()=>U($),children:$.name},$.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{z()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${b} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map($=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{L($)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${$.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",$.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I($)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",V($.created_at)]})]},$.id))}),f!=="recent"&&w>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>y($=>Math.max(1,$-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",w]}),m.jsx("button",{onClick:()=>y($=>Math.min(w,$+1)),disabled:g===w,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===w?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(rue,{nft:_,onClose:()=>C(null)})]}):null};var sE,KNe=new Uint8Array(16);function QNe(){if(!sE&&(sE=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sE(KNe)}const JNe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function YNe(t){return typeof t=="string"&&JNe.test(t)}var Nr=[];for(var V2=0;V2<256;++V2)Nr.push((V2+256).toString(16).substr(1));function ZNe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Nr[t[e+0]]+Nr[t[e+1]]+Nr[t[e+2]]+Nr[t[e+3]]+"-"+Nr[t[e+4]]+Nr[t[e+5]]+"-"+Nr[t[e+6]]+Nr[t[e+7]]+"-"+Nr[t[e+8]]+Nr[t[e+9]]+"-"+Nr[t[e+10]]+Nr[t[e+11]]+Nr[t[e+12]]+Nr[t[e+13]]+Nr[t[e+14]]+Nr[t[e+15]]).toLowerCase();if(!YNe(n))throw TypeError("Stringified UUID is invalid");return n}function XNe(t,e,n){t=t||{};var r=t.random||(t.rng||QNe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZNe(r)}const ePe=ha({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),tPe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],nPe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],yi=500;function KW(){const t=ePe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[y,w]=D.useState(!1),[v,b]=D.useState(!1),[x,_]=D.useState(!1),[C,S]=D.useState([]),[T,A]=D.useState(null),P=D.useRef(null),[R,j]=D.useState(null),z=async J=>{const te=J.getContext("2d");if(!te)return;te.clearRect(0,0,J.width,J.height),n?await new Promise(se=>{const me=new window.Image;me.crossOrigin="anonymous",me.onload=()=>{const je=Math.min(J.width/me.width,J.height/me.height),ve=(J.width-me.width*je)/2,_e=(J.height-me.height*je)/2;te.drawImage(me,ve,_e,me.width*je,me.height*je),se()},me.onerror=()=>se(),me.src=n}):(te.fillStyle="#333",te.fillRect(0,0,J.width,J.height)),(se=>{se.textAlign="center",se.strokeStyle="black",se.lineWidth=3,se.fillStyle="white";const me=(je,ve)=>{const _e=je.toUpperCase().split(" "),Fe=[];let Ge=_e[0];for(let Bt=1;Bt<_e.length;Bt++){const xn=_e[Bt];se.measureText(Ge+" "+xn).width<ve?Ge+=" "+xn:(Fe.push(Ge),Ge=xn)}return Fe.push(Ge),Fe};s&&(se.font=`${c}px Impact`,me(s,yi-20).forEach((ve,_e)=>{const Fe=c+_e*c*1.2;se.strokeText(ve,yi/2,Fe),se.fillText(ve,yi/2,Fe)})),o&&(se.font=`${u}px Impact`,me(o,yi-20).reverse().forEach((ve,_e)=>{const Fe=yi-u*1.2*(_e+1);se.strokeText(ve,yi/2,Fe),se.fillText(ve,yi/2,Fe)}))})(te),await Promise.all(C.map(se=>new Promise(me=>{const je=new window.Image;je.src=se.src,je.onload=()=>{te.save(),te.translate(se.x,se.y),te.rotate(se.rotation*Math.PI/180),te.scale(se.scale,se.scale),te.drawImage(je,-40,-40,80,80),te.restore(),me()},je.onerror=()=>me()})));try{h&&V(J),p&&I(J),y&&N(J)}catch(se){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",se),f(!1),g(!1),w(!1)}},V=J=>{const te=J.getContext("2d");if(!te)return;const oe=te.getImageData(0,0,J.width,J.height),se=oe.data;for(let me=0;me<se.length;me+=4){const je=se[me],ve=se[me+1],_e=se[me+2],Fe=(je+ve+_e)/3,Ge=1.8;se[me]=Math.min(255,Fe+(je-Fe)*Ge),se[me+1]=Math.min(255,Fe+(ve-Fe)*Ge*.7),se[me+2]=Math.min(255,Fe+(_e-Fe)*Ge*.4);const Bt=1.3;se[me]=Math.min(255,Math.max(0,se[me]*Bt)),se[me+1]=Math.min(255,Math.max(0,se[me+1]*Bt)),se[me+2]=Math.min(255,Math.max(0,se[me+2]*Bt))}te.putImageData(oe,0,0)},I=J=>{const te=J.getContext("2d");if(!te)return;const oe=4,me=te.getImageData(0,0,J.width,J.height).data,je=new Uint8ClampedArray(me);for(let ve=0;ve<J.height;ve+=oe)for(let _e=0;_e<J.width;_e+=oe){const Fe=(ve*J.width+_e)*4,Ge=me[Fe],Bt=me[Fe+1],xn=me[Fe+2],qt=me[Fe+3];for(let Ct=0;Ct<oe&&ve+Ct<J.height;Ct++)for(let pn=0;pn<oe&&_e+pn<J.width;pn++){const qr=((ve+Ct)*J.width+(_e+pn))*4;je[qr]=Ge,je[qr+1]=Bt,je[qr+2]=xn,je[qr+3]=qt}}te.putImageData(new ImageData(je,J.width,J.height),0,0)},N=J=>{const te=J.getContext("2d");if(!te)return;const oe=te.getImageData(0,0,J.width,J.height),se=oe.data;for(let me=0;me<se.length;me+=4){const je=(Math.random()-.5)*50;se[me]=Math.max(0,Math.min(255,se[me]+je)),se[me+1]=Math.max(0,Math.min(255,se[me+1]+je)),se[me+2]=Math.max(0,Math.min(255,se[me+2]+je))}te.putImageData(oe,0,0)};D.useEffect(()=>{e.current&&z(e.current)},[z]);const L=J=>{var oe;const te=(oe=J.target.files)==null?void 0:oe[0];te&&r(URL.createObjectURL(te))},U=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),w(!1)},$=async()=>{const J=e.current;if(!J)return;await z(J);const te=document.createElement("a");te.download="meme.png",te.href=J.toDataURL("image/png"),document.body.appendChild(te),te.click(),document.body.removeChild(te)},M=async J=>{_(!0),b(!1);try{console.log("Fetching NFTs for collection:",J);let te;if(J.api==="opensea"){console.log("Using OpenSea API for:",J.slug);const oe=await iR(J.slug,50);te=oe.data,console.log("OpenSea response:",oe)}else if(J.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",J.slug);const oe=await g7(J.slug,50);te=oe.data,console.log("OpenSea Solana response:",oe)}else{console.log("Using Scatter API for:",J.slug);const oe=await sR(J.slug,1,50);te=oe.data,console.log("Scatter response:",oe)}if(te&&te.length>0){const oe=te[Math.floor(Math.random()*te.length)],se=oe.image||oe.image_url||oe.image_url_shrunk;console.log("Selected NFT:",oe),console.log("Image URL:",se),r(se)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(te){console.error("Error fetching NFTs:",te),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},q=J=>{const te={id:XNe(),src:J,x:80,y:80,scale:1,rotation:0};S(oe=>oe.length>=2||oe.some(se=>se.src===J&&!se.id.startsWith("upload-"))?oe:[...oe,te]),j(te.id)},Z=J=>{var oe;const te=(oe=J.target.files)==null?void 0:oe[0];if(te){const se=URL.createObjectURL(te);q(se)}},ie=(J,te,oe)=>{S(se=>se.map(me=>{if(me.id!==J)return me;let je=me.x+te/1.2,ve=me.y+oe/1.2;const _e=40*me.scale,Fe=40*me.scale;return je=Math.max(_e,Math.min(yi-_e,je)),ve=Math.max(Fe,Math.min(yi-Fe,ve)),{...me,x:je,y:ve}}))},re=(J,te,oe,se,me)=>{S(je=>je.map(ve=>{if(ve.id!==J)return ve;const _e=ve.x,Fe=ve.y,Ge=Math.atan2(me-Fe,se-_e)*180/Math.PI;return{...ve,rotation:oe+(Ge-te)*.5}}))},ce=J=>{S(te=>te.filter(oe=>oe.id!==J))},ge=(J,te)=>{S(oe=>oe.map(se=>se.id===J?{...se,scale:Math.max(.2,se.scale*(1+(te-1)*.2))}:se))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>b(J=>!J),children:"Collections"}),v&&m.jsx("div",{className:t.dropdownContent,children:tPe.map(J=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{M(J)},children:J.name},J.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:L})]}),x&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:J=>i(J.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:J=>l(Number(J.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:J=>a(J.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:J=>d(Number(J.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(J=>!J),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(J=>!J),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>w(J=>!J),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[nPe.map((J,te)=>m.jsx("img",{src:J,alt:`sticker${te+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>q(J)},J)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:P,onChange:Z})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:$,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:U,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:yi,height:yi,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:yi,height:yi,pointerEvents:"none"},children:C.map(J=>R===J.id?m.jsxs("div",{style:{position:"absolute",left:J.x,top:J.y,width:80*J.scale,height:80*J.scale,transform:`rotate(${J.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:te=>{A(J.id),te.stopPropagation()},onMouseUp:()=>A(null),onMouseMove:te=>{T===J.id&&te.buttons===1&&ie(J.id,te.movementX,te.movementY)},children:[m.jsx("img",{src:J.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:te=>{var Ge;te.stopPropagation();const oe=(Ge=te.currentTarget.parentElement)==null?void 0:Ge.getBoundingClientRect(),se=oe?oe.left+oe.width/2:0,me=oe?oe.top+oe.height/2:0,je=Math.atan2(te.clientY-me,te.clientX-se)*180/Math.PI,ve=J.rotation,_e=Bt=>{re(J.id,je,ve,Bt.clientX,Bt.clientY)},Fe=()=>{window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",Fe)};window.addEventListener("mousemove",_e),window.addEventListener("mouseup",Fe)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:te=>{te.stopPropagation();const oe=te.clientX,se=je=>{const ve=(je.clientX-oe)/80;ge(J.id,1+ve)},me=()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",me)};window.addEventListener("mousemove",se),window.addEventListener("mouseup",me)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ce(J.id),children:"×"}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>j(null),children:"Place"})]},J.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bb(){return Bb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bb.apply(this,arguments)}var Gu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gu||(Gu={}));const M4="popstate";function rPe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return CP("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:JW(s)}return iPe(e,n,null,t)}function cr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QW(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sPe(){return Math.random().toString(36).substr(2,8)}function j4(t,e){return{usr:t.state,key:t.key,idx:e}}function CP(t,e,n,r){return n===void 0&&(n=null),Bb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sy(e):e,{state:n,key:e&&e.key||r||sPe()})}function JW(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sy(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iPe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Gu.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Bb({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Gu.Pop;let y=u(),w=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:w})}function h(y,w){a=Gu.Push;let v=CP(g.location,y,w);l=u()+1;let b=j4(v,l),x=g.createHref(v);try{o.pushState(b,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(x)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,w){a=Gu.Replace;let v=CP(g.location,y,w);l=u();let b=j4(v,l),x=g.createHref(v);o.replaceState(b,"",x),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:JW(y);return v=v.replace(/ $/,"%20"),cr(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(M4,d),c=y,()=>{s.removeEventListener(M4,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let w=p(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var F4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F4||(F4={}));function oPe(t,e,n){return n===void 0&&(n="/"),aPe(t,e,n)}function aPe(t,e,n,r){let s=typeof e=="string"?Sy(e):e,i=XW(s.pathname||"/",n);if(i==null)return null;let o=YW(t);cPe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=vPe(i);a=yPe(o[c],l)}return a}function YW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(cr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=af([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(cr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),YW(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:gPe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of ZW(i.path))s(i,o,c)}),e}function ZW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ZW(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function cPe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mPe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lPe=/^:[\w-]+$/,uPe=3,dPe=2,hPe=1,fPe=10,pPe=-2,z4=t=>t==="*";function gPe(t,e){let n=t.split("/"),r=n.length;return n.some(z4)&&(r+=pPe),e&&(r+=dPe),n.filter(s=>!z4(s)).reduce((s,i)=>s+(lPe.test(i)?uPe:i===""?hPe:fPe),r)}function mPe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yPe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=wPe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:af([i,d.pathname]),pathnameBase:SPe(af([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=af([i,d.pathnameBase]))}return o}function wPe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bPe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function bPe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),QW(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vPe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QW(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function XW(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EPe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Sy(t):t;return{pathname:n?n.startsWith("/")?n:_Pe(n,e):e,search:IPe(r),hash:TPe(s)}}function _Pe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function K2(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xPe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function CPe(t,e){let n=xPe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function APe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Sy(t):(s=Bb({},t),cr(!s.pathname||!s.pathname.includes("?"),K2("?","pathname","search",s)),cr(!s.pathname||!s.pathname.includes("#"),K2("#","pathname","hash",s)),cr(!s.search||!s.search.includes("#"),K2("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=EPe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const af=t=>t.join("/").replace(/\/\/+/g,"/"),SPe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IPe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TPe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NPe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eq=["post","put","patch","delete"];new Set(eq);const PPe=["get",...eq];new Set(PPe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lb.apply(this,arguments)}const KR=D.createContext(null),kPe=D.createContext(null),rA=D.createContext(null),sA=D.createContext(null),Iy=D.createContext({outlet:null,matches:[],isDataRoute:!1}),tq=D.createContext(null);function iA(){return D.useContext(sA)!=null}function nq(){return iA()||cr(!1),D.useContext(sA).location}function rq(t){D.useContext(rA).static||D.useLayoutEffect(t)}function OPe(){let{isDataRoute:t}=D.useContext(Iy);return t?qPe():RPe()}function RPe(){iA()||cr(!1);let t=D.useContext(KR),{basename:e,future:n,navigator:r}=D.useContext(rA),{matches:s}=D.useContext(Iy),{pathname:i}=nq(),o=JSON.stringify(CPe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return rq(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=APe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:af([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function DPe(t,e){return $Pe(t,e)}function $Pe(t,e,n,r){iA()||cr(!1);let{navigator:s}=D.useContext(rA),{matches:i}=D.useContext(Iy),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=nq(),u;if(e){var d;let y=typeof e=="string"?Sy(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||cr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=oPe(t,{pathname:f}),g=jPe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:af([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:af([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?D.createElement(sA.Provider,{value:{location:Lb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Gu.Pop}},g):g}function UPe(){let t=WPe(),e=NPe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const BPe=D.createElement(UPe,null);class LPe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Iy.Provider,{value:this.props.routeContext},D.createElement(tq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MPe(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(KR);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Iy.Provider,{value:e},r)}function jPe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||cr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||BPe,c&&(l<0&&h===0?(GPe("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=y:d.route.Component?b=D.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,D.createElement(MPe,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(LPe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var sq=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sq||{}),iq=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iq||{});function FPe(t){let e=D.useContext(KR);return e||cr(!1),e}function zPe(t){let e=D.useContext(kPe);return e||cr(!1),e}function HPe(t){let e=D.useContext(Iy);return e||cr(!1),e}function oq(t){let e=HPe(),n=e.matches[e.matches.length-1];return n.route.id||cr(!1),n.route.id}function WPe(){var t;let e=D.useContext(tq),n=zPe(),r=oq();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qPe(){let{router:t}=FPe(sq.UseNavigateStable),e=oq(iq.UseNavigateStable),n=D.useRef(!1);return rq(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Lb({fromRouteId:e},i)))},[t,e])}const H4={};function GPe(t,e,n){H4[t]||(H4[t]=!0)}function VPe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function YE(t){cr(!1)}function KPe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Gu.Pop,navigator:i,static:o=!1,future:a}=t;iA()&&cr(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:Lb({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Sy(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let y=XW(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(rA.Provider,{value:l},D.createElement(sA.Provider,{children:n,value:g}))}function QPe(t){let{children:e,location:n}=t;return DPe(AP(e),n)}new Promise(()=>{});function AP(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,AP(r.props.children,i));return}r.type!==YE&&cr(!1),!r.props.index||!r.props.children||cr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=AP(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const JPe="6";try{window.__reactRouterVersion=JPe}catch{}const YPe="startTransition",W4=gK[YPe];function ZPe(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=rPe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&W4?W4(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>VPe(r),[r]),D.createElement(KPe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var q4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(q4||(q4={}));var G4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(G4||(G4={}));const XPe=ha({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function eke(){const t=XPe(),{open:e}=nA(),{address:n,isConnected:r}=Av(),{isPending:s}=o9(),{disconnect:i}=a9(),{data:o}=c9({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState(!1),b=OPe(),x=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&x.current){const N=x.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const L=document.createElement("script");L.src="https://www.tiktok.com/embed.js",L.async=!0,L.setAttribute("data-tiktok-embed","true"),x.current.appendChild(L)}},[a]);const _=(N,L,U)=>{if(N==="url"&&U)window.open(U,"_blank");else if(N==="popup"&&L)c(L),u($=>{const M=new Set($);return M.delete(L),M}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):e().then(()=>{const $=()=>{window.ethereum&&window.ethereum.selectedAddress?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):setTimeout($,200)};$()}))},C=()=>c(null),S=N=>{u(L=>new Set(L).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(L=>{const U=new Set(L);return U.delete(N),U})},A=()=>h(!1),P=()=>p(!1),R=()=>y(!1),j=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},z=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},V=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[w&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(Qle,{onIconClick:_}),m.jsx(Yle,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(Ji,{id:"chat-popup",isOpen:a==="chat-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ji,{id:"purity-popup",isOpen:a==="purity-popup",onClose:C,onMinimize:S,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ji,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ji,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Ji,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Ji,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(goe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Ji,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:C,onMinimize:S,children:(()=>{const N=L=>{L.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Ji,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:C,onMinimize:S,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:x,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(Ji,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:C,onMinimize:S,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(eue,{isOpen:d,onClose:A,onMinimize:j,walletAddress:n||""}),m.jsx(VNe,{isOpen:f,onClose:P,onMinimize:z,walletAddress:n}),m.jsx(Ji,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:V,children:m.jsx(KW,{})})]})}const tke=ha({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),V4=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],nke=({onBack:t,walletAddress:e})=>{const n=tke(),{open:r}=nA(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(V4[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[y,w]=D.useState("all"),[v,b]=D.useState(null),x=D.useCallback(async()=>{var T,A;try{if((T=window.solana)!=null&&T.isPhantom){const P=await window.solana.connect();g(P.publicKey.toString());return}if((A=window.solflare)!=null&&A.isSolflare){const P=await window.solflare.connect();g(P.publicKey.toString());return}r()}catch(P){console.error("Failed to connect Solana wallet:",P),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,A;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(A=window.solflare)!=null&&A.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let A,P=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}P=p,A=await Zle(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",A.data.length)}else u.api==="opensea"?A=await iR(u.slug,100,P):A=await sR(u.slug,1,100,P);y==="owned"&&p&&(console.log("Filtering for owner:",p),A.data.some(j=>j.owners&&j.owners.length>0)?A.data=A.data.filter(j=>j.owners.some(V=>V.owner_of&&V.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),b("Owner data not available for this Solana collection. Showing all NFTs."))),i(A.data)}catch(A){console.error(A)}finally{a(!1)}})()},[e,u,p,y]),D.useEffect(()=>{h&&x()},[h,x]);const _=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const A=await p7(u.chain,T.address,T.token_id.toString()),P={...T,attributes:JSON.stringify(A.traits||[])};l(P)}catch(A){console.error("Failed to fetch full NFT details",A),l(T)}else l(T);a(!1)},C=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(A){console.error("Failed to parse NFT attributes:",A)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((A,P)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[A.trait_type,":"]})," ",A.value]},P))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:V4.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>w("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>w("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{x()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),v&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:v}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let A=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(T),children:[m.jsx("img",{src:A,alt:T.name,onError:P=>{P.currentTarget.src!==T.image_url&&T.image_url?P.currentTarget.src=T.image_url:P.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?P.currentTarget.src=T.image_url_shrunk:P.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?C():S()})]})},rke=ha({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Po=({isOpen:t,onClose:e,title:n,children:r})=>{const s=rke();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},ske=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=l9();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const x=await h7(n);s(x);const _={};x.forEach(C=>{_[C.id]=0}),u(_)}catch(x){h(x.message)}finally{o(!1)}},g=(x,_)=>{u(C=>({...C,[x]:Math.max(0,_)}))},y=async()=>{const x=Object.entries(l).filter(([,_])=>_>0).map(([_,C])=>({id:_,quantity:C}));if(x.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const _=await f7(n,x);if(_.success&&_.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const C=await f.sendTransaction({to:_.mintTransaction.to,value:BigInt(_.mintTransaction.value),data:_.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${C}`),e()}catch(C){h("Transaction failed: "+C.message)}}else throw new Error(_.message||"Could not retrieve minting transaction.")}catch(_){h("Minting failed: "+_.message)}finally{c(!1)}},w=(x,_)=>`${parseFloat(x)} ${_}`,v={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},b={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Po,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:b,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(x=>m.jsxs("div",{style:v,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",w(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:x.wallet_limit===4294967295?void 0:x.wallet_limit,value:l[x.id]||"",onChange:_=>g(x.id,parseInt(_.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},x.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},ike=ha({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),oke=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],ake=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],cke=()=>{const t=ike(),{open:e}=nA(),{address:n,isConnected:r}=Av(),{isPending:s}=o9(),{disconnect:i}=a9(),{data:o}=c9({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState(!1),[b,x]=D.useState(!1),[_,C]=D.useState(!1),[S,T]=D.useState(!1),[A,P]=D.useState(!1),[R,j]=D.useState(!1),[z,V]=D.useState(!1),[I,N]=D.useState(!1),[L,U]=D.useState(!1),[$,M]=D.useState(!1),q=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>v(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>x(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>C(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],Z=ce=>{ce.disabled||ce.action()};if(D.useEffect(()=>{const ce=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ce)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(nke,{onBack:()=>c("main"),walletAddress:n||void 0});function ie({open:ce,onClose:ge,title:J,nfts:te}){const oe=se=>{switch(se){case"lawbsters":T(!0);break;case"lawbstarz":P(!0);break;case"pixelawbs":j(!0);break;case"halloween":V(!0);break;case"lawbstation":N(!0);break;case"nexus":U(!0);break}};return m.jsx(Po,{isOpen:ce,onClose:ge,title:J,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:te.map(se=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>oe(se.id),children:[m.jsx("img",{src:se.image,alt:se.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:se.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:se.description})]},se.id))})})}function re({open:ce,onClose:ge}){return ce?m.jsxs(Po,{isOpen:ce,onClose:ge,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:q.map(ce=>m.jsxs("div",{className:t.icon,onClick:()=>Z(ce),children:[m.jsx("img",{src:ce.icon,alt:ce.label}),m.jsx("span",{children:ce.label})]},ce.label))}),l&&m.jsxs(Po,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ce=>ce.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),M(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(ske,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),m.jsx(ie,{open:w,onClose:()=>v(!1),title:"EVM NFT'S FOLDER",nfts:oke}),m.jsx(ie,{open:b,onClose:()=>x(!1),title:"SOL NFTS FOLDER",nfts:ake}),m.jsx(re,{open:_,onClose:()=>C(!1)}),m.jsxs(Po,{isOpen:S,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Po,{isOpen:A,onClose:()=>P(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Po,{isOpen:R,onClose:()=>j(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{j(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Po,{isOpen:z,onClose:()=>V(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Po,{isOpen:I,onClose:()=>N(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Po,{isOpen:L,onClose:()=>U(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Po,{isOpen:$,onClose:()=>M(!1),title:"Meme Generator",children:m.jsx(KW,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function lke(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function uke(t){let e=[],n,r;function s(a){return ub.parseEvmChainId(a)||1}function i(){var a;return n||(n=sf.getInstance({projectId:t.options.projectId,chainId:(a=B.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Vn.open(Cn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Vn.open(Cn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Vn.open(Cn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Cn.EmbeddedWalletAbortController})),n}async function o(a={}){var g,y;const c=i();let l=a.chainId;if(a.isReconnecting){const w=ub.parseEvmChainId(c.getLastUsedChainId()||""),v=(g=t.chains)==null?void 0:g[0].id;if(l=w||v,!l)throw new Error("ChainId not found in provider")}const u=(y=Ee.state.preferredAccountTypes)==null?void 0:y.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ae.CONNECTOR_ID.AUTH,name:ae.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ae.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=sf.getInstance({projectId:t.options.projectId,chainId:(c=B.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Cn.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Vn.open(Cn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Vn.open(Cn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Vn.open(Cn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=B.state.activeChain===ae.CHAIN.EVM;if(ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Se.getConnectorId(h)===ae.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new rc(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=Ee.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new rc(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Fu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}QR.type="walletConnect";function QR(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:QR.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=B.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Zl;a||(a=this.onDisplayUri,y.on("display_uri",a));const w=await this.isChainsStale();y.session&&w&&await y.disconnect();const v=fe.state.universalProviderConfigOverride;if(!y.session||w){const A=fw.createNamespaces(g,v);await y.connect({optionalNamespaces:A,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(P=>Number(P.id)))}const b=await this.getAccounts(),x=await this.getChainId(),_=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,C=_==null?void 0:_.some(A=>Number(A.split(":")[1])===x);let S=1;C?S=x:_!=null&&_[0]&&(S=Number(_[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=v==null?void 0:v.defaultChain;return y.setDefaultChain(T??`eip155:${S}`),{accounts:b,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new nr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,y;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(y=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[ae.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=xe.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=xe.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),v=w==null?void 0:w.find(b=>b.id===y);v&&v.chainNamespace===ae.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(v.id)}))}return r},async getChainId(){var g,y,w,v;const d=(g=e.getCaipNetwork(ae.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(v=(w=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[ae.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:v[0],p=B.getCaipNetworks().find(b=>b.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,w,v;const f=await this.getProvider();if(!f)throw new Zl;const p=B.getCaipNetworks().find(b=>b.id===h);if(!p)throw new rc(new rb);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:et(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,h]),{...p,id:p.id}}catch(b){const x=b;if(/(?:user rejected)/iu.test(x.message))throw new nr(x);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const C=((v=(w=p.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:v.http)||[],S={blockExplorerUrls:_,chainId:et(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:C};await f.request({method:"wallet_addEthereumChain",params:[S]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(_){throw new nr(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Fu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(B.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ae.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const f0=fn({pendingTransactions:0}),K4={state:f0,subscribeKey(t,e){return Fr(f0,t,e)},increase(t){f0[t]+=1},decrease(t){f0[t]-=1},reset(t){f0[t]=0}};function dke(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function hke(t){if(Me.isSafeApp()){const{safe:e}=await Mn(async()=>{const{safe:n}=await import("./index-BnQbys4-.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function fke(t){try{const{coinbaseWallet:e}=await Mn(async()=>{const{coinbaseWallet:n}=await import("./index-BnQbys4-.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const pke={enable:!1,pollingInterval:3e4};class gke extends VW{constructor(e){const n=qa.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ae.CHAIN.EVM,this.adapterType=ae.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...pke,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ae.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Me.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=bg(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Me.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=bg(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ae.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=qa.getCaipNetworkId(s);i?n[s.id]=qa.extendWagmiTransports(s,e.projectId,i):n[s.id]=qa.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=nne({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=$te(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),K4.increase("pendingTransactions")}});const e=K4.subscribeKey("pendingTransactions",n=>{var r;n>=ae.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){DF(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await fke(this.wagmiConfig.connectors);s&&n.push(s)}const r=await hke(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(QR(e,n)),e.enableInjected!==!1&&r.push(gC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(uke({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await kte(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=bg(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Nte(this.wagmiConfig,s);const i=await Pte(this.wagmiConfig,s);return await Ute(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(ub.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Bte(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await _te(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return qee(e.value,e.decimals)}formatUnits(e){return dy(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===ae.CONNECTOR_ID.AUTH||e.id===ae.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:qu.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:qu.ConnectorNamesMap[e.id]??e.name,imageId:qu.ConnectorImageIds[e.id],type:qu.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ae.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){$F(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Na(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Me.isSafeApp()&&n===ae.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await DE(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await DE(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await _$(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===ae.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await DE(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await UT(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=xe.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Ste(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});xe.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Na(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await OF(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await _$(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Na(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=dke(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Na(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Na(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Na(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Na(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(B.state.activeChain==="eip155")return;UT(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new VR({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const aq={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://testnet-rpc.sanko.com"]},default:{http:["https://testnet-rpc.sanko.com"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},cq="7c65f27254d6ddd24cf7eedf2685c4fb",mke={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},lq=new gke({networks:[GW,aq],projectId:cq,ssr:!1});qNe({adapters:[lq],networks:[GW,aq],projectId:cq,metadata:mke,features:{analytics:!1}});const yke=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Mn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ty);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class JR extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wke extends JR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bke extends JR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vke extends JR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var SP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(SP||(SP={}));var Eke=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class _ke{constructor(e,{headers:n={},customFetch:r,region:s=SP.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=yke(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Eke(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new wke(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new bke(u);if(!u.ok)throw new vke(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var ti={},YR={},oA={},Hv={},aA={},cA={},xke=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jm=xke();const Cke=Jm.fetch,uq=Jm.fetch.bind(Jm),dq=Jm.Headers,Ake=Jm.Request,Ske=Jm.Response,Ty=Object.freeze(Object.defineProperty({__proto__:null,Headers:dq,Request:Ake,Response:Ske,default:uq,fetch:Cke},Symbol.toStringTag,{value:"Module"})),Ike=Fx(Ty);var lA={};Object.defineProperty(lA,"__esModule",{value:!0});let Tke=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};lA.default=Tke;var hq=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cA,"__esModule",{value:!0});const Nke=hq(Ike),Pke=hq(lA);let kke=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nke.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new Pke.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};cA.default=kke;var Oke=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(aA,"__esModule",{value:!0});const Rke=Oke(cA);let Dke=class extends Rke.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};aA.default=Dke;var $ke=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hv,"__esModule",{value:!0});const Uke=$ke(aA);let Bke=class extends Uke.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Hv.default=Bke;var Lke=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oA,"__esModule",{value:!0});const p0=Lke(Hv);let Mke=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new p0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new p0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new p0.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new p0.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new p0.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};oA.default=Mke;var uA={},dA={};Object.defineProperty(dA,"__esModule",{value:!0});dA.version=void 0;dA.version="0.0.0-automated";Object.defineProperty(uA,"__esModule",{value:!0});uA.DEFAULT_HEADERS=void 0;const jke=dA;uA.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${jke.version}`};var fq=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(YR,"__esModule",{value:!0});const Fke=fq(oA),zke=fq(Hv),Hke=uA;let Wke=class pq{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Hke.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Fke.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new pq(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new zke.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};YR.default=Wke;var Ny=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ti,"__esModule",{value:!0});ti.PostgrestError=ti.PostgrestBuilder=ti.PostgrestTransformBuilder=ti.PostgrestFilterBuilder=ti.PostgrestQueryBuilder=ti.PostgrestClient=void 0;const gq=Ny(YR);ti.PostgrestClient=gq.default;const mq=Ny(oA);ti.PostgrestQueryBuilder=mq.default;const yq=Ny(Hv);ti.PostgrestFilterBuilder=yq.default;const wq=Ny(aA);ti.PostgrestTransformBuilder=wq.default;const bq=Ny(cA);ti.PostgrestBuilder=bq.default;const vq=Ny(lA);ti.PostgrestError=vq.default;var qke=ti.default={PostgrestClient:gq.default,PostgrestQueryBuilder:mq.default,PostgrestFilterBuilder:yq.default,PostgrestTransformBuilder:wq.default,PostgrestBuilder:bq.default,PostgrestError:vq.default};const{PostgrestClient:Gke,PostgrestQueryBuilder:XUe,PostgrestFilterBuilder:e4e,PostgrestTransformBuilder:t4e,PostgrestBuilder:n4e,PostgrestError:r4e}=qke;function Vke(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Kke=Vke(),Qke="2.11.13",Jke={"X-Client-Info":`realtime-js/${Qke}`},Yke="1.0.0",Eq=1e4,Zke=1e3;var pw;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pw||(pw={}));var rs;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rs||(rs={}));var Go;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Go||(Go={}));var IP;(function(t){t.websocket="websocket"})(IP||(IP={}));var rh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rh||(rh={}));class Xke{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class _q{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ln;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ln||(ln={}));const Q4=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=eOe(o,t,e,s),i),{})},eOe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?xq(i,o):TP(o)},xq=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return sOe(e,n)}switch(t){case ln.bool:return tOe(e);case ln.float4:case ln.float8:case ln.int2:case ln.int4:case ln.int8:case ln.numeric:case ln.oid:return nOe(e);case ln.json:case ln.jsonb:return rOe(e);case ln.timestamp:return iOe(e);case ln.abstime:case ln.date:case ln.daterange:case ln.int4range:case ln.int8range:case ln.money:case ln.reltime:case ln.text:case ln.time:case ln.timestamptz:case ln.timetz:case ln.tsrange:case ln.tstzrange:return TP(e);default:return TP(e)}},TP=t=>t,tOe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nOe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rOe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},sOe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>xq(e,a))}return t},iOe=t=>typeof t=="string"?t.replace(" ","T"):t,Cq=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Q2{constructor(e,n,r={},s=Eq){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var J4;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(J4||(J4={}));class gw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gw.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=gw.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=gw.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y4;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Y4||(Y4={}));var Z4;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Z4||(Z4={}));var Ac;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ac||(Ac={}));class ZR{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Q2(this,Go.join,this.params,this.timeout),this.rejoinTimer=new _q(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rs.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Go.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new gw(this),this.broadcastEndpointURL=Cq(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==rs.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ac.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ac.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ac.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:w,schema:v,table:b,filter:x}}=y,_=u&&u[g];if(_&&_.event===w&&_.schema===v&&_.table===b&&_.filter===x)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=rs.errored,e==null||e(Ac.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ac.SUBSCRIBED);return}}).receive("error",u=>{this.state=rs.errored,e==null||e(Ac.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ac.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Go.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Q2(this,Go.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Q2(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Go;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,w,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return x&&((g=n.ids)===null||g===void 0?void 0:g.includes(x))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(v=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:w,type:v,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===rs.closed}_isJoined(){return this.state===rs.joined}_isJoining(){return this.state===rs.joining}_isLeaving(){return this.state===rs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ZR.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Go.close,{},e)}_onError(e){this._on(Go.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Q4(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Q4(e.columns,e.old_record)),n}}const X4=()=>{},oOe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aOe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Jke,this.params={},this.timeout=Eq,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=X4,this.ref=0,this.logger=X4,this.conn=null,this.sendBuffer=[],this.serializer=new Xke,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Mn(async()=>{const{default:c}=await Promise.resolve().then(()=>Ty);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${IP.websocket}`,this.httpEndpoint=Cq(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _q(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=Kke),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yke}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pw.connecting:return rh.Connecting;case pw.open:return rh.Open;case pw.closing:return rh.Closing;default:return rh.Closed}}isConnected(){return this.connectionState()===rh.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ZR(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Go.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Zke,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Go.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oOe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class XR extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cOe extends XR{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class NP extends XR{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var lOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Aq=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Mn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ty);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uOe=()=>lOe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mn(()=>Promise.resolve().then(()=>Ty),void 0)).Response:Response}),PP=t=>{if(Array.isArray(t))return t.map(n=>PP(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=PP(r)}),e};var Zf=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const J2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dOe=(t,e,n)=>Zf(void 0,void 0,void 0,function*(){const r=yield uOe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new cOe(J2(s),t.status||500))}).catch(s=>{e(new NP(J2(s),s))}):e(new NP(J2(t),t))}),hOe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Wv(t,e,n,r,s,i){return Zf(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,hOe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>dOe(c,a,r))})})}function wx(t,e,n,r){return Zf(this,void 0,void 0,function*(){return Wv(t,"GET",e,n,r)})}function su(t,e,n,r,s){return Zf(this,void 0,void 0,function*(){return Wv(t,"POST",e,r,s,n)})}function fOe(t,e,n,r,s){return Zf(this,void 0,void 0,function*(){return Wv(t,"PUT",e,r,s,n)})}function pOe(t,e,n,r){return Zf(this,void 0,void 0,function*(){return Wv(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Sq(t,e,n,r,s){return Zf(this,void 0,void 0,function*(){return Wv(t,"DELETE",e,r,s,n)})}var zs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const gOe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mOe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Aq(s)}uploadOrUpdate(e,n,r,s){return zs(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},e6),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(fr(i))return{data:null,error:i};throw i}})}upload(e,n,r){return zs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return zs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:e6.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(fr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return zs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield su(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new XR("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(fr(r))return{data:null,error:r};throw r}})}update(e,n,r){return zs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return zs(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(fr(s))return{data:null,error:s};throw s}})}copy(e,n,r){return zs(this,void 0,void 0,function*(){try{return{data:{path:(yield su(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(fr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return zs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield su(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(fr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return zs(this,void 0,void 0,function*(){try{const s=yield su(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(fr(s))return{data:null,error:s};throw s}})}download(e,n){return zs(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield wx(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(fr(a))return{data:null,error:a};throw a}})}info(e){return zs(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield wx(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:PP(r),error:null}}catch(r){if(fr(r))return{data:null,error:r};throw r}})}exists(e){return zs(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pOe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(fr(r)&&r instanceof NP){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return zs(this,void 0,void 0,function*(){try{return{data:yield Sq(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(fr(n))return{data:null,error:n};throw n}})}list(e,n,r){return zs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},gOe),n),{prefix:e||""});return{data:yield su(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(fr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const yOe="2.7.1",wOe={"X-Client-Info":`storage-js/${yOe}`};var Tp=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class bOe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},wOe),n),this.fetch=Aq(r)}listBuckets(){return Tp(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(fr(e))return{data:null,error:e};throw e}})}getBucket(e){return Tp(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(fr(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Tp(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(fr(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Tp(this,void 0,void 0,function*(){try{return{data:yield fOe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(fr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Tp(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(fr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Tp(this,void 0,void 0,function*(){try{return{data:yield Sq(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(fr(n))return{data:null,error:n};throw n}})}}class vOe extends bOe{constructor(e,n={},r){super(e,n,r)}from(e){return new mOe(this.url,this.headers,e,this.fetch)}}const EOe="2.50.1";let D0="";typeof Deno<"u"?D0="deno":typeof document<"u"?D0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?D0="react-native":D0="node";const _Oe={"X-Client-Info":`supabase-js-${D0}/${EOe}`},xOe={headers:_Oe},COe={schema:"public"},AOe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SOe={};var IOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const TOe=t=>{let e;return t?e=t:typeof fetch>"u"?e=uq:e=fetch,(...n)=>e(...n)},NOe=()=>typeof Headers>"u"?dq:Headers,POe=(t,e,n)=>{const r=TOe(n),s=NOe();return(i,o)=>IOe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var kOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function OOe(t){return t.endsWith("/")?t:t+"/"}function ROe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>kOe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const Iq="2.70.0",jp=30*1e3,kP=3,Y2=kP*jp,DOe="http://localhost:9999",$Oe="supabase.auth.token",UOe={"X-Client-Info":`gotrue-js/${Iq}`},OP="X-Supabase-Api-Version",Tq={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BOe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LOe=6e5;class e3 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ot(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class MOe extends e3{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jOe(t){return ot(t)&&t.name==="AuthApiError"}class Nq extends e3{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Rd extends e3{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Kl extends Rd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FOe(t){return ot(t)&&t.name==="AuthSessionMissingError"}class iE extends Rd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oE extends Rd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class aE extends Rd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zOe(t){return ot(t)&&t.name==="AuthImplicitGrantRedirectError"}class t6 extends Rd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class RP extends Rd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Z2(t){return ot(t)&&t.name==="AuthRetryableFetchError"}class n6 extends Rd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class mw extends Rd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r6=` 	
\r=`.split(""),HOe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<r6.length;e+=1)t[r6[e].charCodeAt(0)]=-2;for(let e=0;e<bx.length;e+=1)t[bx[e].charCodeAt(0)]=e;return t})();function s6(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(bx[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(bx[r]),e.queuedBits-=6}}function Pq(t,e,n){const r=HOe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function i6(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{GOe(o,r,n)};for(let o=0;o<t.length;o+=1)Pq(t.charCodeAt(o),s,i);return e.join("")}function WOe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qOe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}WOe(r,e)}}function GOe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function VOe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Pq(t.charCodeAt(s),n,r);return new Uint8Array(e)}function KOe(t){const e=[];return qOe(t,n=>e.push(n)),new Uint8Array(e)}function QOe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>s6(s,n,r)),s6(null,n,r),e.join("")}function JOe(t){return Math.round(Date.now()/1e3)+t}function YOe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ko=()=>typeof window<"u"&&typeof document<"u",Hd={tested:!1,writable:!1},yw=()=>{if(!ko())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hd.tested)return Hd.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Hd.tested=!0,Hd.writable=!0}catch{Hd.tested=!0,Hd.writable=!1}return Hd.writable};function ZOe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const kq=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Mn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ty);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},XOe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oq=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},cE=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},lE=async(t,e)=>{await t.removeItem(e)};class hA{constructor(){this.promise=new hA.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}hA.promiseConstructor=Promise;function X2(t){const e=t.split(".");if(e.length!==3)throw new mw("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BOe.test(e[r]))throw new mw("JWT not in base64url format");return{header:JSON.parse(i6(e[0])),payload:JSON.parse(i6(e[1])),signature:VOe(e[2]),raw:{header:e[0],payload:e[1]}}}async function eRe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function tRe(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function nRe(t){return("0"+t.toString(16)).substr(-2)}function rRe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,nRe).join("")}async function sRe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function iRe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sRe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Np(t,e,n=!1){const r=rRe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Oq(t,`${e}-code-verifier`,s);const i=await iRe(r);return[i,r===i?"plain":"s256"]}const oRe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aRe(t){const e=t.headers.get(OP);if(!e||!e.match(oRe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cRe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lRe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uRe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pp(t){if(!uRe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var dRe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Jd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hRe=[502,503,504];async function o6(t){var e;if(!XOe(t))throw new RP(Jd(t),0);if(hRe.includes(t.status))throw new RP(Jd(t),t.status);let n;try{n=await t.json()}catch(i){throw new Nq(Jd(i),i)}let r;const s=aRe(t);if(s&&s.getTime()>=Tq["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new n6(Jd(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Kl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new n6(Jd(n),t.status,n.weak_password.reasons);throw new MOe(Jd(n),t.status||500,r)}const fRe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function yt(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[OP]||(i[OP]=Tq["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await pRe(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function pRe(t,e,n,r,s,i){const o=fRe(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new RP(Jd(c),0)}if(a.ok||await o6(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await o6(c)}}function _c(t){var e;let n=null;wRe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=JOe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function a6(t){const e=_c(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function du(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gRe(t){return{data:t,error:null}}function mRe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=dRe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function yRe(t){return t}function wRe(t){return t.access_token&&t.refresh_token&&t.expires_in}const eI=["global","local","others"];var bRe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class vRe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=kq(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=eI[0]){if(eI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eI.join(", ")}`);try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:du})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=bRe(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:mRe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ot(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:du})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:yRe});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ot(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Pp(e);try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:du})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Pp(e);try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:du})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Pp(e);try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:du})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Pp(e.userId);try{const{data:n,error:r}=await yt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Pp(e.userId),Pp(e.id);try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}}const ERe={getItem:t=>yw()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{yw()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{yw()&&globalThis.localStorage.removeItem(t)}};function c6(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function _Re(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kp={debug:!!(globalThis&&yw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rq extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xRe extends Rq{}async function CRe(t,e,n){kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),kp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xRe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(kp.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}_Re();const ARe={url:DOe,storageKey:$Oe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:UOe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function l6(t,e,n){return await n()}class Mb{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mb.nextInstanceID,Mb.nextInstanceID+=1,this.instanceID>0&&ko()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ARe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new vRe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=kq(s.fetch),this.lock=s.lock||l6,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ko()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=CRe:this.lock=l6,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:yw()?this.storage=ERe:(this.memoryStorage={},this.storage=c6(this.memoryStorage)):(this.memoryStorage={},this.storage=c6(this.memoryStorage)),ko()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Iq}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ZOe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ko()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),zOe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ot(n)?{error:n}:{error:new Nq("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:_c}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ot(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Np(this.storage,this.storageKey)),i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:_c})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_c})}else throw new oE("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ot(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:a6})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:a6})}else throw new oE("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new iE}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ot(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:v,options:b}=e;let x;if(ko())if(typeof w=="object")x=w;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:y,error:w}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:QOe(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:_c});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new iE}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(ot(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await cE(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_c});if(await lE(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new iE}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ot(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_c}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new iE}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(ot(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Np(this.storage,this.storageKey));const{error:d}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new oE("You must provide either an email or phone number.")}catch(a){if(ot(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:_c});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Np(this.storage,this.storageKey)),await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:gRe})}catch(i){if(ot(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Kl;const{error:s}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ot(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await yt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await yt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new oE("You must provide either an email or phone number and a type")}catch(n){if(ot(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await cE(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Y2:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:du}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kl}:await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:du})})}catch(n){if(ot(n))return FOe(n)&&(await this._removeSession(),await lE(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Kl;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Np(this.storage,this.storageKey));const{data:l,error:u}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:du});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kl;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=X2(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ot(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Kl;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ot(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ko())throw new aE("No browser detected.");if(e.error||e.error_description||e.error_code)throw new aE(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new t6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new aE("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new t6("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new aE("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=jp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(ot(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await cE(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(jOe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await lE(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=YOe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Np(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ot(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ko()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ot(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await tRe(async s=>(s>0&&await eRe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_c})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Z2(i)&&Date.now()+o-r<jp})}catch(r){if(this._debug(n,"error",r),ot(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ko()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await cE(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Y2;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Y2}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Z2(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Kl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new hA;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Kl;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ot(i)){const o={session:null,error:i};return Z2(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oq(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await lE(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ko()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/jp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${jp}ms, refresh threshold is ${kP} ticks`),s<=kP&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Rq)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ko()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Np(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await yt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ot(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ot(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=X2(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+LOe>Date.now()))return r;const{data:s,error:i}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new mw("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new mw("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=X2(r);if(cRe(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=lRe(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,KOe(`${a}.${c}`)))throw new mw("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}}Mb.nextInstanceID=0;const SRe=Mb;class IRe extends SRe{constructor(e){super(e)}}var TRe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class NRe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=OOe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:COe,realtime:SOe,auth:Object.assign(Object.assign({},AOe),{storageKey:l}),global:xOe},d=ROe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=POe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Gke(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new _ke(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vOe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return TRe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IRe({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new aOe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const t3=(t,e,n)=>new NRe(t,e,n),PRe="6.14.4";function kRe(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function bs(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Qe(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&kRe(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function ig(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>ig(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return ig(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${ig(r,e)}: ${ig(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function $r(t,e){return t&&t.code===e}function n3(t){return $r(t,"CALL_EXCEPTION")}function vn(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${ig(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+ig(a))}}i.push(`code=${e}`),i.push(`version=${PRe}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Qe(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Qe(s,{shortMessage:r}),s}function le(t,e,n,r){if(!t)throw vn(e,n,r)}function W(t,e,n,r){le(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Dq(t,e,n){n==null&&(n=""),n&&(n=": "+n),le(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),le(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function qv(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),le(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function $q(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}W(!1,"invalid BytesLike value",e||"value",t)}function ht(t,e){return $q(t,e,!1)}function _s(t,e){return $q(t,e,!0)}function hn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function r3(t){return hn(t,!0)||t instanceof Uint8Array}const u6="0123456789abcdef";function Ce(t){const e=ht(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=u6[(s&240)>>4]+u6[s&15]}return n}function Un(t){return"0x"+t.map(e=>Ce(e).substring(2)).join("")}function Ag(t){return hn(t,!0)?(t.length-2)/2:ht(t).length}function Rn(t,e,n){const r=ht(t);return n!=null&&n>r.length&&le(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ce(r.slice(e??0,n??r.length))}function Uq(t,e,n){const r=ht(t);le(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Ce(s)}function ri(t,e){return Uq(t,e,!0)}function ORe(t,e){return Uq(t,e,!1)}const fA=BigInt(0),Xo=BigInt(1),og=9007199254740991;function vx(t,e){const n=pA(t,"value"),r=BigInt(lt(e,"width"));if(le(n>>r===fA,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Xo){const s=(Xo<<r)-Xo;return-((~n&s)+Xo)}return n}function Bq(t,e){let n=Le(t,"value");const r=BigInt(lt(e,"width")),s=Xo<<r-Xo;if(n<fA){n=-n,le(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Xo<<r)-Xo;return(~n&i)+Xo}else le(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Eh(t,e){const n=pA(t,"value"),r=BigInt(lt(e,"bits"));return n&(Xo<<r)-Xo}function Le(t,e){switch(typeof t){case"bigint":return t;case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-og&&t<=og,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){W(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}W(!1,"invalid BigNumberish value",e||"value",t)}function pA(t,e){const n=Le(t,e);return le(n>=fA,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const d6="0123456789abcdef";function gA(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=d6[n>>4],e+=d6[n&15];return BigInt(e)}return Le(t)}function lt(t,e){switch(typeof t){case"bigint":return W(t>=-og&&t<=og,"overflow",e||"value",t),Number(t);case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-og&&t<=og,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return lt(BigInt(t),e)}catch(n){W(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}W(!1,"invalid numeric value",e||"value",t)}function RRe(t){return lt(gA(t))}function xd(t,e){let r=pA(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=lt(e,"width");for(le(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function ar(t){const e=pA(t,"value");if(e===fA)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Jo(t){let e=Ce(r3(t)?t:ar(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const h6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const f6=BigInt(58);function DRe(t){const e=ht(t);let n=gA(e),r="";for(;n;)r=h6[Number(n%f6)]+r,n/=f6;for(let s=0;s<e.length&&!e[s];s++)r=h6[0]+r;return r}function $Re(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return ht(e)}function URe(t){const e=ht(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var zg;class Lq{constructor(e,n,r){Q(this,"filter");Q(this,"emitter");H(this,zg);O(this,zg,n),Qe(this,{emitter:e,filter:r})}async removeListener(){E(this,zg)!=null&&await this.emitter.off(this.filter,E(this,zg))}}zg=new WeakMap;function BRe(t,e,n,r,s){W(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Mq(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function LRe(t,e,n,r,s){return t==="OVERLONG"?(W(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Mq(t,e,n))}const MRe=Object.freeze({error:BRe,ignore:Mq,replace:LRe});function jRe(t,e){e==null&&(e=MRe.error);const n=ht(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function rl(t,e){W(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);W(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function FRe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Ex(t,e){return FRe(jRe(t,e))}function jq(t){async function e(n,r){le(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();le(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),le(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=vn("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=vn("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const zRe=12,HRe=250;let p6=jq();const WRe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),qRe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let tI=!1;async function Fq(t,e){try{const n=t.match(WRe);if(!n)throw new Error("invalid data");return new dd(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?$Re(n[3]):VRe(n[3]))}catch{return new dd(599,"BAD REQUEST (invalid data: URI)",{},null,new Cd(t))}}function zq(t){async function e(n,r){try{const s=n.match(qRe);if(!s)throw new Error("invalid link");return new Cd(`${t}${s[2]}`)}catch{return new dd(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Cd(n))}}return e}const uE={data:Fq,ipfs:zq("https://gateway.ipfs.io/ipfs/")},Hq=new WeakMap;var Dh,_u;class GRe{constructor(e){H(this,Dh);H(this,_u);O(this,Dh,[]),O(this,_u,!1),Hq.set(e,()=>{if(!E(this,_u)){O(this,_u,!0);for(const n of E(this,Dh))setTimeout(()=>{n()},0);O(this,Dh,[])}})}addListener(e){le(!E(this,_u),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,Dh).push(e)}get cancelled(){return E(this,_u)}checkSignal(){le(!this.cancelled,"cancelled","CANCELLED",{})}}Dh=new WeakMap,_u=new WeakMap;function dE(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Hg,Wg,Mo,Dc,qg,Gg,hr,xi,$c,$h,Uh,Bh,Ra,jo,xu,Lh,$0;const Dx=class Dx{constructor(e){H(this,Lh);H(this,Hg);H(this,Wg);H(this,Mo);H(this,Dc);H(this,qg);H(this,Gg);H(this,hr);H(this,xi);H(this,$c);H(this,$h);H(this,Uh);H(this,Bh);H(this,Ra);H(this,jo);H(this,xu);O(this,Gg,String(e)),O(this,Hg,!1),O(this,Wg,!0),O(this,Mo,{}),O(this,Dc,""),O(this,qg,3e5),O(this,jo,{slotInterval:HRe,maxAttempts:zRe}),O(this,xu,null)}get url(){return E(this,Gg)}set url(e){O(this,Gg,String(e))}get body(){return E(this,hr)==null?null:new Uint8Array(E(this,hr))}set body(e){if(e==null)O(this,hr,void 0),O(this,xi,void 0);else if(typeof e=="string")O(this,hr,rl(e)),O(this,xi,"text/plain");else if(e instanceof Uint8Array)O(this,hr,e),O(this,xi,"application/octet-stream");else if(typeof e=="object")O(this,hr,rl(JSON.stringify(e))),O(this,xi,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,hr)!=null}get method(){return E(this,Dc)?E(this,Dc):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),O(this,Dc,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,Mo));return E(this,$c)&&(e.authorization=`Basic ${URe(rl(E(this,$c)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,xi)&&(e["content-type"]=E(this,xi)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){E(this,Mo)[String(e).toLowerCase()]=String(n)}clearHeaders(){O(this,Mo,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,$c)||null}setCredentials(e,n){W(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),O(this,$c,`${e}:${n}`)}get allowGzip(){return E(this,Wg)}set allowGzip(e){O(this,Wg,!!e)}get allowInsecureAuthentication(){return!!E(this,Hg)}set allowInsecureAuthentication(e){O(this,Hg,!!e)}get timeout(){return E(this,qg)}set timeout(e){W(e>=0,"timeout must be non-zero","timeout",e),O(this,qg,e)}get preflightFunc(){return E(this,$h)||null}set preflightFunc(e){O(this,$h,e)}get processFunc(){return E(this,Uh)||null}set processFunc(e){O(this,Uh,e)}get retryFunc(){return E(this,Bh)||null}set retryFunc(e){O(this,Bh,e)}get getUrlFunc(){return E(this,xu)||p6}set getUrlFunc(e){O(this,xu,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,hr)?Ce(E(this,hr)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,jo).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,jo).maxAttempts=e.maxAttempts)}send(){return le(E(this,Ra)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),O(this,Ra,new GRe(this)),ee(this,Lh,$0).call(this,0,g6()+this.timeout,0,this,new dd(0,"",{},null,this))}cancel(){le(E(this,Ra)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Hq.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();le(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Dx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,O(s,Mo,Object.assign({},E(this,Mo))),E(this,hr)&&O(s,hr,new Uint8Array(E(this,hr))),O(s,xi,E(this,xi)),s}clone(){const e=new Dx(this.url);return O(e,Dc,E(this,Dc)),E(this,hr)&&O(e,hr,E(this,hr)),O(e,xi,E(this,xi)),O(e,Mo,Object.assign({},E(this,Mo))),O(e,$c,E(this,$c)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),O(e,$h,E(this,$h)),O(e,Uh,E(this,Uh)),O(e,Bh,E(this,Bh)),O(e,jo,Object.assign({},E(this,jo))),O(e,xu,E(this,xu)),e}static lockConfig(){tI=!0}static getGateway(e){return uE[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(tI)throw new Error("gateways locked");uE[e]=n}static registerGetUrl(e){if(tI)throw new Error("gateways locked");p6=e}static createGetUrlFunc(e){return jq(e)}static createDataGateway(){return Fq}static createIpfsGatewayFunc(e){return zq(e)}};Hg=new WeakMap,Wg=new WeakMap,Mo=new WeakMap,Dc=new WeakMap,qg=new WeakMap,Gg=new WeakMap,hr=new WeakMap,xi=new WeakMap,$c=new WeakMap,$h=new WeakMap,Uh=new WeakMap,Bh=new WeakMap,Ra=new WeakMap,jo=new WeakMap,xu=new WeakMap,Lh=new WeakSet,$0=async function(e,n,r,s,i){var u,d,h;if(e>=E(this,jo).maxAttempts)return i.makeServerError("exceeded maximum retry limit");le(g6()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await KRe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in uE){const f=await uE[a](o.url,dE(E(s,Ra)));if(f instanceof dd){let p=f;if(this.processFunc){dE(E(s,Ra));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,dE(E(s,Ra)));let l=new dd(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return ee(u=o.redirect(f),Lh,$0).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=E(this,jo).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),ee(d=o.clone(),Lh,$0).call(d,e+1,n,p,s,l)}if(this.processFunc){dE(E(s,Ra));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=E(this,jo).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),ee(h=o.clone(),Lh,$0).call(h,e+1,n,p,s,l)}}return l};let Cd=Dx;var tv,nv,rv,Ci,Vg,Mh;const E3=class E3{constructor(e,n,r,s,i){H(this,tv);H(this,nv);H(this,rv);H(this,Ci);H(this,Vg);H(this,Mh);O(this,tv,e),O(this,nv,n),O(this,rv,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),O(this,Ci,s==null?null:new Uint8Array(s)),O(this,Vg,i||null),O(this,Mh,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,Ci)?Ce(E(this,Ci)):"null"}>`}get statusCode(){return E(this,tv)}get statusMessage(){return E(this,nv)}get headers(){return Object.assign({},E(this,rv))}get body(){return E(this,Ci)==null?null:new Uint8Array(E(this,Ci))}get bodyText(){try{return E(this,Ci)==null?"":Ex(E(this,Ci))}catch{le(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{le(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new E3(599,r,this.headers,this.body,E(this,Vg)||void 0);return O(s,Mh,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:W(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Qe(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,Ci)!=null}get request(){return E(this,Vg)}ok(){return E(this,Mh).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=E(this,Mh);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{E(this,Ci)&&(s=Ex(E(this,Ci)))}catch{}le(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};tv=new WeakMap,nv=new WeakMap,rv=new WeakMap,Ci=new WeakMap,Vg=new WeakMap,Mh=new WeakMap;let dd=E3;function g6(){return new Date().getTime()}function VRe(t){return rl(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function KRe(t){return new Promise(e=>setTimeout(e,t))}const QRe=BigInt(-1),Ro=BigInt(0),ag=BigInt(1),JRe=BigInt(5),Op={};let Sg="0000";for(;Sg.length<80;)Sg+=Sg;function Wd(t){let e=Sg;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function g0(t,e,n){const r=BigInt(e.width);if(e.signed){const s=ag<<r-ag;le(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Ro?t=vx(Eh(t,r),r):t=-vx(Eh(-t,r),r)}else{const s=ag<<r;le(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-ag}return t}function nI(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);W(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,o=(a,c,l)=>i[a]==null?l:(W(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}W(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),W(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function YRe(t,e){let n="";t<Ro&&(n="-",t*=QRe);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Sg+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Fo,en,ms,zt,Yd,xc,DP,$P,UP,BP;const iu=class iu{constructor(e,n,r){H(this,zt);Q(this,"format");H(this,Fo);H(this,en);H(this,ms);Q(this,"_value");qv(e,Op,"FixedNumber"),O(this,en,n),O(this,Fo,r);const s=YRe(n,r.decimals);Qe(this,{format:r.name,_value:s}),O(this,ms,Wd(r.decimals))}get signed(){return E(this,Fo).signed}get width(){return E(this,Fo).width}get decimals(){return E(this,Fo).decimals}get value(){return E(this,en)}addUnsafe(e){return ee(this,zt,DP).call(this,e)}add(e){return ee(this,zt,DP).call(this,e,"add")}subUnsafe(e){return ee(this,zt,$P).call(this,e)}sub(e){return ee(this,zt,$P).call(this,e,"sub")}mulUnsafe(e){return ee(this,zt,UP).call(this,e)}mul(e){return ee(this,zt,UP).call(this,e,"mul")}mulSignal(e){ee(this,zt,Yd).call(this,e);const n=E(this,en)*E(e,en);return le(n%E(this,ms)===Ro,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ee(this,zt,xc).call(this,n/E(this,ms),"mulSignal")}divUnsafe(e){return ee(this,zt,BP).call(this,e)}div(e){return ee(this,zt,BP).call(this,e,"div")}divSignal(e){le(E(e,en)!==Ro,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ee(this,zt,Yd).call(this,e);const n=E(this,en)*E(this,ms);return le(n%E(e,en)===Ro,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ee(this,zt,xc).call(this,n/E(e,en),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=Wd(s):s<0&&(n*=Wd(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,en);return E(this,en)<Ro&&(e-=E(this,ms)-ag),e=E(this,en)/E(this,ms)*E(this,ms),ee(this,zt,xc).call(this,e,"floor")}ceiling(){let e=E(this,en);return E(this,en)>Ro&&(e+=E(this,ms)-ag),e=E(this,en)/E(this,ms)*E(this,ms),ee(this,zt,xc).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=JRe*Wd(n-1);let s=this.value+r;const i=Wd(n);return s=s/i*i,g0(s,E(this,Fo),"round"),new iu(Op,s,E(this,Fo))}isZero(){return E(this,en)===Ro}isNegative(){return E(this,en)<Ro}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return iu.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:lt(n),i=nI(r);let o=Le(e,"value");const a=s-i.decimals;if(a>0){const c=Wd(a);le(o%c===Ro,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Wd(-a));return g0(o,i,"fromValue"),new iu(Op,o,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);W(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=nI(n);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=Sg;le(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(r[1]+i+o);return g0(a,s,"fromString"),new iu(Op,a,s)}static fromBytes(e,n){let r=gA(ht(e,"value"));const s=nI(n);return s.signed&&(r=vx(r,s.width)),g0(r,s,"fromBytes"),new iu(Op,r,s)}};Fo=new WeakMap,en=new WeakMap,ms=new WeakMap,zt=new WeakSet,Yd=function(e){W(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},xc=function(e,n){return e=g0(e,E(this,Fo),n),new iu(Op,e,E(this,Fo))},DP=function(e,n){return ee(this,zt,Yd).call(this,e),ee(this,zt,xc).call(this,E(this,en)+E(e,en),n)},$P=function(e,n){return ee(this,zt,Yd).call(this,e),ee(this,zt,xc).call(this,E(this,en)-E(e,en),n)},UP=function(e,n){return ee(this,zt,Yd).call(this,e),ee(this,zt,xc).call(this,E(this,en)*E(e,en)/E(this,ms),n)},BP=function(e,n){return le(E(e,en)!==Ro,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ee(this,zt,Yd).call(this,e),ee(this,zt,xc).call(this,E(this,en)*E(this,ms)/E(e,en),n)};let _x=iu;function ZRe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function m6(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function y6(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Wq(t,n);s.push(i.result),n+=i.consumed,le(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Wq(t,e){le(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{le(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=m6(t,e+1,r);return n(e+1+r+s),y6(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),y6(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=m6(t,e+1,r);n(e+1+r+s);const i=Ce(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Ce(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:ZRe(t[e])}}function Gv(t){const e=ht(t,"data"),n=Wq(e,0);return W(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function w6(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function qq(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(qq(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=w6(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(ht(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=w6(e.length);return n.unshift(183+n.length),n.concat(e)}const b6="0123456789abcdef";function Ad(t){let e="0x";for(const n of qq(t))e+=b6[n>>4],e+=b6[n&15];return e}function XRe(t,e){let n=18;return n=lt(e,"unit"),_x.fromValue(t,n,{decimals:n,width:512}).toString()}function e3e(t,e){W(typeof t=="string","value must be a string","value",t);let n=18;return n=lt(e,"unit"),_x.fromString(t,{decimals:n,width:512}).value}function rI(t){return XRe(t,18)}function v6(t){return e3e(t,18)}const xs=32,LP=new Uint8Array(xs),t3e=["then"],hE={},Gq=new WeakMap;function sh(t){return Gq.get(t)}function E6(t,e){Gq.set(t,e)}function m0(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function MP(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Ym?MP(sh(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Ym&&(o=MP(sh(o),o,n)),r[s]=o),r},{})}var Kg;const cg=class cg extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==hE&&(s=n,i=[],o=!1);super(s.length);H(this,Kg);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(E6(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),O(this,Kg,[]),E(this,Kg)==null&&E(this,Kg),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=lt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&m0(`index ${f}`,p),p}if(t3e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return E6(c,sh(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&m0(`index ${i}`,s),n&&s instanceof cg&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=sh(this);return r.reduce((s,i,o)=>(le(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),MP(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=sh(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new cg(hE,i,o)}filter(n,r){const s=sh(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&m0(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new cg(hE,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&m0(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=sh(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&m0(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new cg(hE,n,r)}};Kg=new WeakMap;let Ym=cg;function _6(t){let e=ar(t);return le(e.length<=xs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:xs,offset:e.length}),e.length!==xs&&(e=_s(Un([LP.slice(e.length%xs),e]))),e}class vl{constructor(e,n,r,s){Q(this,"name");Q(this,"type");Q(this,"localName");Q(this,"dynamic");Qe(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){W(!1,e,this.localName,n)}}var Uc,jh,Qg,ZE;class jP{constructor(){H(this,Qg);H(this,Uc);H(this,jh);O(this,Uc,[]),O(this,jh,0)}get data(){return Un(E(this,Uc))}get length(){return E(this,jh)}appendWriter(e){return ee(this,Qg,ZE).call(this,_s(e.data))}writeBytes(e){let n=_s(e);const r=n.length%xs;return r&&(n=_s(Un([n,LP.slice(r)]))),ee(this,Qg,ZE).call(this,n)}writeValue(e){return ee(this,Qg,ZE).call(this,_6(e))}writeUpdatableValue(){const e=E(this,Uc).length;return E(this,Uc).push(LP),O(this,jh,E(this,jh)+xs),n=>{E(this,Uc)[e]=_6(n)}}}Uc=new WeakMap,jh=new WeakMap,Qg=new WeakSet,ZE=function(e){return E(this,Uc).push(e),O(this,jh,E(this,jh)+e.length),e.length};var Vs,Ai,Fh,zh,Cu,Bf,zP,Vq;const _3=class _3{constructor(e,n,r){H(this,Bf);Q(this,"allowLoose");H(this,Vs);H(this,Ai);H(this,Fh);H(this,zh);H(this,Cu);Qe(this,{allowLoose:!!n}),O(this,Vs,_s(e)),O(this,Fh,0),O(this,zh,null),O(this,Cu,r??1024),O(this,Ai,0)}get data(){return Ce(E(this,Vs))}get dataLength(){return E(this,Vs).length}get consumed(){return E(this,Ai)}get bytes(){return new Uint8Array(E(this,Vs))}subReader(e){const n=new _3(E(this,Vs).slice(E(this,Ai)+e),this.allowLoose,E(this,Cu));return O(n,zh,this),n}readBytes(e,n){let r=ee(this,Bf,Vq).call(this,0,e,!!n);return ee(this,Bf,zP).call(this,e),O(this,Ai,E(this,Ai)+r.length),r.slice(0,e)}readValue(){return gA(this.readBytes(xs))}readIndex(){return RRe(this.readBytes(xs))}};Vs=new WeakMap,Ai=new WeakMap,Fh=new WeakMap,zh=new WeakMap,Cu=new WeakMap,Bf=new WeakSet,zP=function(e){var n;if(E(this,zh))return ee(n=E(this,zh),Bf,zP).call(n,e);O(this,Fh,E(this,Fh)+e),le(E(this,Cu)<1||E(this,Fh)<=E(this,Cu)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,Cu)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:_s(E(this,Vs)),offset:E(this,Ai),length:e,info:{bytesRead:E(this,Fh),dataLength:this.dataLength}})},Vq=function(e,n,r){let s=Math.ceil(n/xs)*xs;return E(this,Ai)+s>E(this,Vs).length&&(this.allowLoose&&r&&E(this,Ai)+n<=E(this,Vs).length?s=n:le(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:_s(E(this,Vs)),length:E(this,Vs).length,offset:E(this,Ai)+s})),E(this,Vs).slice(E(this,Ai),E(this,Ai)+s)};let FP=_3;function xx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function s3(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function n3e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");xx(t.outputLen),xx(t.blockLen)}function Zm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Kq(t,e){s3(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const sI=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qq=t=>t instanceof Uint8Array,r3e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),iI=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xa=(t,e)=>t<<32-e|t>>>e,s3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!s3e)throw new Error("Non little-endian hardware is not supported");function i3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function mA(t){if(typeof t=="string"&&(t=i3e(t)),!Qq(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function o3e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!Qq(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class i3{clone(){return this._cloneInto()}}function o3(t){const e=r=>t().update(mA(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function a3e(t=32){if(sI&&typeof sI.getRandomValues=="function")return sI.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Jq extends i3{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,n3e(e);const r=mA(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Zm(this),this.iHash.update(e),this}digestInto(e){Zm(this),s3(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yq=(t,e,n)=>new Jq(t,e).update(n).digest();Yq.create=(t,e)=>new Jq(t,e);function c3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class Zq extends i3{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=iI(this.buffer)}update(e){Zm(this);const{view:n,buffer:r,blockLen:s}=this;e=mA(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=iI(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zm(this),Kq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;c3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=iI(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const l3e=(t,e,n)=>t&e^~t&n,u3e=(t,e,n)=>t&e^t&n^e&n,d3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zl=new Uint32Array(64);class h3e extends Zq{constructor(){super(64,32,8,!1),this.A=Fl[0]|0,this.B=Fl[1]|0,this.C=Fl[2]|0,this.D=Fl[3]|0,this.E=Fl[4]|0,this.F=Fl[5]|0,this.G=Fl[6]|0,this.H=Fl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)zl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=zl[d-15],f=zl[d-2],p=xa(h,7)^xa(h,18)^h>>>3,g=xa(f,17)^xa(f,19)^f>>>10;zl[d]=g+zl[d-7]+p+zl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=xa(a,6)^xa(a,11)^xa(a,25),f=u+h+l3e(a,c,l)+d3e[d]+zl[d]|0,g=(xa(r,2)^xa(r,13)^xa(r,22))+u3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){zl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Xq=o3(()=>new h3e),fE=BigInt(2**32-1),HP=BigInt(32);function eG(t,e=!1){return e?{h:Number(t&fE),l:Number(t>>HP&fE)}:{h:Number(t>>HP&fE)|0,l:Number(t&fE)|0}}function tG(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=eG(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const f3e=(t,e)=>BigInt(t>>>0)<<HP|BigInt(e>>>0),p3e=(t,e,n)=>t>>>n,g3e=(t,e,n)=>t<<32-n|e>>>n,m3e=(t,e,n)=>t>>>n|e<<32-n,y3e=(t,e,n)=>t<<32-n|e>>>n,w3e=(t,e,n)=>t<<64-n|e>>>n-32,b3e=(t,e,n)=>t>>>n-32|e<<64-n,v3e=(t,e)=>e,E3e=(t,e)=>t,nG=(t,e,n)=>t<<n|e>>>32-n,rG=(t,e,n)=>e<<n|t>>>32-n,sG=(t,e,n)=>e<<n-32|t>>>64-n,iG=(t,e,n)=>t<<n-32|e>>>64-n;function _3e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const x3e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),C3e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,A3e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),S3e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,I3e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),T3e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,dt={fromBig:eG,split:tG,toBig:f3e,shrSH:p3e,shrSL:g3e,rotrSH:m3e,rotrSL:y3e,rotrBH:w3e,rotrBL:b3e,rotr32H:v3e,rotr32L:E3e,rotlSH:nG,rotlSL:rG,rotlBH:sG,rotlBL:iG,add:_3e,add3L:x3e,add3H:C3e,add4L:A3e,add4H:S3e,add5H:T3e,add5L:I3e},[N3e,P3e]=dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Hl=new Uint32Array(80),Wl=new Uint32Array(80);class k3e extends Zq{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Hl[b]=e.getUint32(n),Wl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Hl[b-15]|0,_=Wl[b-15]|0,C=dt.rotrSH(x,_,1)^dt.rotrSH(x,_,8)^dt.shrSH(x,_,7),S=dt.rotrSL(x,_,1)^dt.rotrSL(x,_,8)^dt.shrSL(x,_,7),T=Hl[b-2]|0,A=Wl[b-2]|0,P=dt.rotrSH(T,A,19)^dt.rotrBH(T,A,61)^dt.shrSH(T,A,6),R=dt.rotrSL(T,A,19)^dt.rotrBL(T,A,61)^dt.shrSL(T,A,6),j=dt.add4L(S,R,Wl[b-7],Wl[b-16]),z=dt.add4H(j,C,P,Hl[b-7],Hl[b-16]);Hl[b]=z|0,Wl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=dt.rotrSH(d,h,14)^dt.rotrSH(d,h,18)^dt.rotrBH(d,h,41),_=dt.rotrSL(d,h,14)^dt.rotrSL(d,h,18)^dt.rotrBL(d,h,41),C=d&f^~d&g,S=h&p^~h&y,T=dt.add5L(v,_,S,P3e[b],Wl[b]),A=dt.add5H(T,w,x,C,N3e[b],Hl[b]),P=T|0,R=dt.rotrSH(r,s,28)^dt.rotrBH(r,s,34)^dt.rotrBH(r,s,39),j=dt.rotrSL(r,s,28)^dt.rotrBL(r,s,34)^dt.rotrBL(r,s,39),z=r&i^r&a^i&a,V=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=dt.add(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=dt.add3L(P,j,V);r=dt.add3H(I,A,R,z),s=I|0}({h:r,l:s}=dt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=dt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=dt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=dt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=dt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=dt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=dt.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Hl.fill(0),Wl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const O3e=o3(()=>new k3e);function R3e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const x6=R3e();x6.crypto||x6.msCrypto;function D3e(t){switch(t){case"sha256":return Xq.create();case"sha512":return O3e.create()}W(!1,"invalid hashing algorithm name","algorithm",t)}const[oG,aG,cG]=[[],[],[]],$3e=BigInt(0),y0=BigInt(1),U3e=BigInt(2),B3e=BigInt(7),L3e=BigInt(256),M3e=BigInt(113);for(let t=0,e=y0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],oG.push(2*(5*r+n)),aG.push((t+1)*(t+2)/2%64);let s=$3e;for(let i=0;i<7;i++)e=(e<<y0^(e>>B3e)*M3e)%L3e,e&U3e&&(s^=y0<<(y0<<BigInt(i))-y0);cG.push(s)}const[j3e,F3e]=tG(cG,!0),C6=(t,e,n)=>n>32?sG(t,e,n):nG(t,e,n),A6=(t,e,n)=>n>32?iG(t,e,n):rG(t,e,n);function z3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=C6(l,u,1)^n[a],h=A6(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=aG[o],c=C6(s,i,a),l=A6(s,i,a),u=oG[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=j3e[r],t[1]^=F3e[r]}n.fill(0)}class a3 extends i3{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,xx(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=r3e(this.state)}keccak(){z3e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Zm(this);const{blockLen:n,state:r}=this;e=mA(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Zm(this,!1),s3(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return xx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Kq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new a3(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const H3e=(t,e,n)=>o3(()=>new a3(e,t,n)),W3e=H3e(1,136,256/8);let lG=!1;const uG=function(t){return W3e(t)};let dG=uG;function Jn(t){const e=ht(t,"data");return Ce(dG(e))}Jn._=uG;Jn.lock=function(){lG=!0};Jn.register=function(t){if(lG)throw new TypeError("keccak256 is locked");dG=t};Object.freeze(Jn);const hG=function(t){return D3e("sha256").update(t).digest()};let fG=hG,pG=!1;function Py(t){const e=ht(t,"data");return Ce(fG(e))}Py._=hG;Py.lock=function(){pG=!0};Py.register=function(t){if(pG)throw new Error("sha256 is locked");fG=t};Object.freeze(Py);Object.freeze(Py);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gG=BigInt(0),yA=BigInt(1),q3e=BigInt(2),wA=t=>t instanceof Uint8Array,G3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xm(t){if(!wA(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=G3e[t[n]];return e}function mG(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function c3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function ey(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function cf(t){return c3(Xm(t))}function l3(t){if(!wA(t))throw new Error("Uint8Array expected");return c3(Xm(Uint8Array.from(t).reverse()))}function ty(t,e){return ey(t.toString(16).padStart(e*2,"0"))}function u3(t,e){return ty(t,e).reverse()}function V3e(t){return ey(mG(t))}function Uo(t,e,n){let r;if(typeof e=="string")try{r=ey(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(wA(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function jb(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!wA(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function K3e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Q3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function J3e(t){let e;for(e=0;t>gG;t>>=yA,e+=1);return e}function Y3e(t,e){return t>>BigInt(e)&yA}const Z3e=(t,e,n)=>t|(n?yA:gG)<<BigInt(e),d3=t=>(q3e<<BigInt(t-1))-yA,oI=t=>new Uint8Array(t),S6=t=>Uint8Array.from(t);function yG(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=oI(t),s=oI(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=oI())=>{s=a(S6([0]),d),r=a(),d.length!==0&&(s=a(S6([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return jb(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const X3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Vv(t,e,n={}){const r=(s,i,o)=>{const a=X3e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const eDe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Y3e,bitLen:J3e,bitMask:d3,bitSet:Z3e,bytesToHex:Xm,bytesToNumberBE:cf,bytesToNumberLE:l3,concatBytes:jb,createHmacDrbg:yG,ensureBytes:Uo,equalBytes:K3e,hexToBytes:ey,hexToNumber:c3,numberToBytesBE:ty,numberToBytesLE:u3,numberToHexUnpadded:mG,numberToVarBytesBE:V3e,utf8ToBytes:Q3e,validateObject:Vv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const br=BigInt(0),Hn=BigInt(1),ih=BigInt(2),tDe=BigInt(3),WP=BigInt(4),I6=BigInt(5),T6=BigInt(8);BigInt(9);BigInt(16);function Xs(t,e){const n=t%e;return n>=br?n:e+n}function nDe(t,e,n){if(n<=br||e<br)throw new Error("Expected power/modulo > 0");if(n===Hn)return br;let r=Hn;for(;e>br;)e&Hn&&(r=r*t%n),t=t*t%n,e>>=Hn;return r}function Ki(t,e,n){let r=t;for(;e-- >br;)r*=r,r%=n;return r}function qP(t,e){if(t===br||e<=br)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Xs(t,e),r=e,s=br,i=Hn;for(;n!==br;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Hn)throw new Error("invert: does not exist");return Xs(s,e)}function rDe(t){const e=(t-Hn)/ih;let n,r,s;for(n=t-Hn,r=0;n%ih===br;n/=ih,r++);for(s=ih;s<t&&nDe(s,e,t)!==t-Hn;s++);if(r===1){const o=(t+Hn)/WP;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Hn)/ih;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Hn<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function sDe(t){if(t%WP===tDe){const e=(t+Hn)/WP;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%T6===I6){const e=(t-I6)/T6;return function(r,s){const i=r.mul(s,ih),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,ih),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return rDe(t)}const iDe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=iDe.reduce((r,s)=>(r[s]="function",r),e);return Vv(t,n)}function aDe(t,e,n){if(n<br)throw new Error("Expected power > 0");if(n===br)return t.ONE;if(n===Hn)return e;let r=t.ONE,s=e;for(;n>br;)n&Hn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Hn;return r}function cDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function wG(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function lDe(t,e,n=!1,r={}){if(t<=br)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=wG(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=sDe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:d3(s),ZERO:br,ONE:Hn,create:c=>Xs(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return br<=c&&c<t},is0:c=>c===br,isOdd:c=>(c&Hn)===Hn,neg:c=>Xs(-c,t),eql:(c,l)=>c===l,sqr:c=>Xs(c*c,t),add:(c,l)=>Xs(c+l,t),sub:(c,l)=>Xs(c-l,t),mul:(c,l)=>Xs(c*l,t),pow:(c,l)=>aDe(a,c,l),div:(c,l)=>Xs(c*qP(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>qP(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>cDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?u3(c,i):ty(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?l3(c):cf(c)}});return Object.freeze(a)}function bG(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function vG(t){const e=bG(t);return e+Math.ceil(e/2)}function uDe(t,e,n=!1){const r=t.length,s=bG(e),i=vG(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?cf(t):l3(t),a=Xs(o,e-Hn)+Hn;return n?u3(a,s):ty(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dDe=BigInt(0),aI=BigInt(1);function hDe(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>dDe;)i&aI&&(o=o.add(a)),a=a.double(),i>>=aI;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=aI);const w=g,v=g+Math.abs(y)-1,b=p%2!==0,x=y<0;y===0?u=u.add(n(b,i[w])):l=l.add(n(x,i[v]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function EG(t){return oDe(t.Fp),Vv(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wG(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fDe(t){const e=EG(t);Vv(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:pDe,hexToBytes:gDe}=eDe,_h={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=_h;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:pDe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=_h,n=typeof t=="string"?gDe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=_h._parseInt(n.subarray(2)),{d:o,l:a}=_h._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Vc=BigInt(0),oo=BigInt(1);BigInt(2);const N6=BigInt(3);BigInt(4);function mDe(t){const e=fDe(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const w=g.toAffine();return jb(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),w=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function i(p){const{a:g,b:y}=e,w=n.sqr(p),v=n.mul(w,p);return n.add(n.add(v,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Vc<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:w,n:v}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Xm(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let b;try{b=typeof p=="bigint"?p:cf(Uo("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return w&&(b=Xs(b,v)),a(b),b}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,w){if(this.px=g,this.py=y,this.pz=w,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(g){const{x:y,y:w}=g||{};if(!g||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=b=>n.eql(b,n.ZERO);return v(y)&&v(w)?d.ZERO:new d(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(w=>w.pz));return g.map((w,v)=>w.toAffine(y[v])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Uo("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),v=i(g);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:x,pz:_}=g,C=n.eql(n.mul(y,_),n.mul(b,v)),S=n.eql(n.mul(w,_),n.mul(x,v));return C&&S}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,w=n.mul(y,N6),{px:v,py:b,pz:x}=this;let _=n.ZERO,C=n.ZERO,S=n.ZERO,T=n.mul(v,v),A=n.mul(b,b),P=n.mul(x,x),R=n.mul(v,b);return R=n.add(R,R),S=n.mul(v,x),S=n.add(S,S),_=n.mul(g,S),C=n.mul(w,P),C=n.add(_,C),_=n.sub(A,C),C=n.add(A,C),C=n.mul(_,C),_=n.mul(R,_),S=n.mul(w,S),P=n.mul(g,P),R=n.sub(T,P),R=n.mul(g,R),R=n.add(R,S),S=n.add(T,T),T=n.add(S,T),T=n.add(T,P),T=n.mul(T,R),C=n.add(C,T),P=n.mul(b,x),P=n.add(P,P),T=n.mul(P,R),_=n.sub(_,T),S=n.mul(P,A),S=n.add(S,S),S=n.add(S,S),new d(_,C,S)}add(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:x,pz:_}=g;let C=n.ZERO,S=n.ZERO,T=n.ZERO;const A=e.a,P=n.mul(e.b,N6);let R=n.mul(y,b),j=n.mul(w,x),z=n.mul(v,_),V=n.add(y,w),I=n.add(b,x);V=n.mul(V,I),I=n.add(R,j),V=n.sub(V,I),I=n.add(y,v);let N=n.add(b,_);return I=n.mul(I,N),N=n.add(R,z),I=n.sub(I,N),N=n.add(w,v),C=n.add(x,_),N=n.mul(N,C),C=n.add(j,z),N=n.sub(N,C),T=n.mul(A,I),C=n.mul(P,z),T=n.add(C,T),C=n.sub(j,T),T=n.add(j,T),S=n.mul(C,T),j=n.add(R,R),j=n.add(j,R),z=n.mul(A,z),I=n.mul(P,I),j=n.add(j,z),z=n.sub(R,z),z=n.mul(A,z),I=n.add(I,z),R=n.mul(j,I),S=n.add(S,R),R=n.mul(N,I),C=n.mul(V,C),C=n.sub(C,R),R=n.mul(V,j),T=n.mul(N,T),T=n.add(T,R),new d(C,S,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const w=n.invertBatch(y.map(v=>v.pz));return y.map((v,b)=>v.toAffine(w[b])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Vc)return y;if(a(g),g===oo)return this;const{endo:w}=e;if(!w)return f.unsafeLadder(this,g);let{k1neg:v,k1:b,k2neg:x,k2:_}=w.splitScalar(g),C=y,S=y,T=this;for(;b>Vc||_>Vc;)b&oo&&(C=C.add(T)),_&oo&&(S=S.add(T)),T=T.double(),b>>=oo,_>>=oo;return v&&(C=C.negate()),x&&(S=S.negate()),S=new d(n.mul(S.px,w.beta),S.py,S.pz),C.add(S)}multiply(g){a(g);let y=g,w,v;const{endo:b}=e;if(b){const{k1neg:x,k1:_,k2neg:C,k2:S}=b.splitScalar(y);let{p:T,f:A}=this.wNAF(_),{p:P,f:R}=this.wNAF(S);T=f.constTimeNegate(x,T),P=f.constTimeNegate(C,P),P=new d(n.mul(P.px,b.beta),P.py,P.pz),w=T.add(P),v=A.add(R)}else{const{p:x,f:_}=this.wNAF(y);w=x,v=_}return d.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(g,y,w){const v=d.BASE,b=(_,C)=>C===Vc||C===oo||!_.equals(v)?_.multiplyUnsafe(C):_.multiply(C),x=b(this,y).add(b(g,w));return x.is0()?void 0:x}toAffine(g){const{px:y,py:w,pz:v}=this,b=this.is0();g==null&&(g=b?n.ONE:n.inv(v));const x=n.mul(y,g),_=n.mul(w,g),C=n.mul(v,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x,y:_}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===oo)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===oo?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Xm(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=hDe(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function yDe(t){const e=EG(t);return Vv(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function wDe(t){const e=yDe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Vc<I&&I<n.ORDER}function a(I){return Xs(I,r)}function c(I){return qP(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=mDe({...e,toBytes(I,N,L){const U=N.toAffine(),$=n.toBytes(U.x),M=jb;return L?M(Uint8Array.from([N.hasEvenY()?2:3]),$):M(Uint8Array.from([4]),$,n.toBytes(U.y))},fromBytes(I){const N=I.length,L=I[0],U=I.subarray(1);if(N===s&&(L===2||L===3)){const $=cf(U);if(!o($))throw new Error("Point is not on curve");const M=d($);let q=n.sqrt(M);const Z=(q&oo)===oo;return(L&1)===1!==Z&&(q=n.neg(q)),{x:$,y:q}}else if(N===i&&L===4){const $=n.fromBytes(U.subarray(0,n.BYTES)),M=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:$,y:M}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>Xm(ty(I,e.nByteLength));function p(I){const N=r>>oo;return I>N}function g(I){return p(I)?a(-I):I}const y=(I,N,L)=>cf(I.slice(N,L));class w{constructor(N,L,U){this.r=N,this.s=L,this.recovery=U,this.assertValidity()}static fromCompact(N){const L=e.nByteLength;return N=Uo("compactSignature",N,L*2),new w(y(N,0,L),y(N,L,2*L))}static fromDER(N){const{r:L,s:U}=_h.toSig(Uo("DER",N));return new w(L,U)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new w(this.r,this.s,N)}recoverPublicKey(N){const{r:L,s:U,recovery:$}=this,M=S(Uo("msgHash",N));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const q=$===2||$===3?L+e.n:L;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=$&1?"03":"02",ie=l.fromHex(Z+f(q)),re=c(q),ce=a(-M*re),ge=a(U*re),J=l.BASE.multiplyAndAddUnsafe(ie,ce,ge);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ey(this.toDERHex())}toDERHex(){return _h.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ey(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=vG(e.n);return uDe(e.randomBytes(I),e.n)},precompute(I=8,N=l.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}};function b(I,N=!0){return l.fromPrivateKey(I).toRawBytes(N)}function x(I){const N=I instanceof Uint8Array,L=typeof I=="string",U=(N||L)&&I.length;return N?U===s||U===i:L?U===2*s||U===2*i:I instanceof l}function _(I,N,L=!0){if(x(I))throw new Error("first arg must be private key");if(!x(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(I)).toRawBytes(L)}const C=e.bits2int||function(I){const N=cf(I),L=I.length*8-e.nBitLength;return L>0?N>>BigInt(L):N},S=e.bits2int_modN||function(I){return a(C(I))},T=d3(e.nBitLength);function A(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Vc<=I&&I<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ty(I,e.nByteLength)}function P(I,N,L=R){if(["recovered","canonical"].some(oe=>oe in L))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:$}=e;let{lowS:M,prehash:q,extraEntropy:Z}=L;M==null&&(M=!0),I=Uo("msgHash",I),q&&(I=Uo("prehashed msgHash",U(I)));const ie=S(I),re=u(N),ce=[A(re),A(ie)];if(Z!=null){const oe=Z===!0?$(n.BYTES):Z;ce.push(Uo("extraEntropy",oe))}const ge=jb(...ce),J=ie;function te(oe){const se=C(oe);if(!h(se))return;const me=c(se),je=l.BASE.multiply(se).toAffine(),ve=a(je.x);if(ve===Vc)return;const _e=a(me*a(J+ve*re));if(_e===Vc)return;let Fe=(je.x===ve?0:2)|Number(je.y&oo),Ge=_e;return M&&p(_e)&&(Ge=g(_e),Fe^=1),new w(ve,Ge,Fe)}return{seed:ge,k2sig:te}}const R={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function z(I,N,L=R){const{seed:U,k2sig:$}=P(I,N,L),M=e;return yG(M.hash.outputLen,M.nByteLength,M.hmac)(U,$)}l.BASE._setWindowSize(8);function V(I,N,L,U=j){var je;const $=I;if(N=Uo("msgHash",N),L=Uo("publicKey",L),"strict"in U)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:q}=U;let Z,ie;try{if(typeof $=="string"||$ instanceof Uint8Array)try{Z=w.fromDER($)}catch(ve){if(!(ve instanceof _h.Err))throw ve;Z=w.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){const{r:ve,s:_e}=$;Z=new w(ve,_e)}else throw new Error("PARSE");ie=l.fromHex(L)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&Z.hasHighS())return!1;q&&(N=e.hash(N));const{r:re,s:ce}=Z,ge=S(N),J=c(ce),te=a(ge*J),oe=a(re*J),se=(je=l.BASE.multiplyAndAddUnsafe(ie,te,oe))==null?void 0:je.toAffine();return se?a(se.x)===re:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:z,verify:V,ProjectivePoint:l,Signature:w,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bDe(t){return{hash:t,hmac:(e,...n)=>Yq(t,e,o3e(...n)),randomBytes:a3e}}function vDe(t,e){const n=r=>wDe({...t,...bDe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _G=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),P6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),EDe=BigInt(1),GP=BigInt(2),k6=(t,e)=>(t+e/GP)/e;function _De(t){const e=_G,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ki(u,n,e)*u%e,h=Ki(d,n,e)*u%e,f=Ki(h,GP,e)*l%e,p=Ki(f,s,e)*f%e,g=Ki(p,i,e)*p%e,y=Ki(g,a,e)*g%e,w=Ki(y,c,e)*y%e,v=Ki(w,a,e)*g%e,b=Ki(v,n,e)*u%e,x=Ki(b,o,e)*p%e,_=Ki(x,r,e)*l%e,C=Ki(_,GP,e);if(!VP.eql(VP.sqr(C),t))throw new Error("Cannot find square root");return C}const VP=lDe(_G,void 0,void 0,{sqrt:_De}),Ql=vDe({a:BigInt(0),b:BigInt(7),Fp:VP,n:P6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=P6,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-EDe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=k6(i*t,e),c=k6(-r*t,e);let l=Xs(t-a*n-c*s,e),u=Xs(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Xq);BigInt(0);Ql.ProjectivePoint;const Fb="0x0000000000000000000000000000000000000000",O6="0x0000000000000000000000000000000000000000000000000000000000000000",R6=BigInt(0),D6=BigInt(1),$6=BigInt(2),U6=BigInt(27),B6=BigInt(28),pE=BigInt(35),Rp={};function L6(t){return ri(ar(t),32)}var Jg,Yg,Zg,Hh;const Do=class Do{constructor(e,n,r,s){H(this,Jg);H(this,Yg);H(this,Zg);H(this,Hh);qv(e,Rp,"Signature"),O(this,Jg,n),O(this,Yg,r),O(this,Zg,s),O(this,Hh,null)}get r(){return E(this,Jg)}set r(e){W(Ag(e)===32,"invalid r","value",e),O(this,Jg,Ce(e))}get s(){return E(this,Yg)}set s(e){W(Ag(e)===32,"invalid s","value",e);const n=Ce(e);W(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),O(this,Yg,n)}get v(){return E(this,Zg)}set v(e){const n=lt(e,"value");W(n===27||n===28,"invalid v","v",e),O(this,Zg,n)}get networkV(){return E(this,Hh)}get legacyChainId(){const e=this.networkV;return e==null?null:Do.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ht(this.s);return this.yParity&&(e[0]|=128),Ce(e)}get compactSerialized(){return Un([this.r,this.yParityAndS])}get serialized(){return Un([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Do(Rp,this.r,this.s,this.v);return this.networkV&&O(e,Hh,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const n=Le(e,"v");return n==U6||n==B6?R6:(W(n>=pE,"invalid EIP-155 v","v",e),(n-pE)/$6)}static getChainIdV(e,n){return Le(e)*$6+BigInt(35+n-27)}static getNormalizedV(e){const n=Le(e);return n===R6||n===U6?27:n===D6||n===B6?28:(W(n>=pE,"invalid v","v",e),n&D6?27:28)}static from(e){function n(l,u){W(l,u,"signature",e)}if(e==null)return new Do(Rp,O6,O6,27);if(typeof e=="string"){const l=ht(e,"signature");if(l.length===64){const u=Ce(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Do(Rp,u,Ce(d),h)}if(l.length===65){const u=Ce(l.slice(0,32)),d=l.slice(32,64);n((d[0]&128)===0,"non-canonical s");const h=Do.getNormalizedV(l[64]);return new Do(Rp,u,Ce(d),h)}n(!1,"invalid raw signature length")}if(e instanceof Do)return e.clone();const r=e.r;n(r!=null,"missing r");const s=L6(r),i=function(l,u){if(l!=null)return L6(l);if(u!=null){n(hn(u,32),"invalid yParityAndS");const d=ht(u);return d[0]&=127,Ce(d)}n(!1,"missing s")}(e.s,e.yParityAndS);n((ht(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Le(l);return{networkV:h>=pE?h:void 0,v:Do.getNormalizedV(h)}}if(u!=null)return n(hn(u,32),"invalid yParityAndS"),{v:ht(u)[0]&128?28:27};if(d!=null){switch(lt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Do(Rp,s,i,a);return o&&O(c,Hh,o),n(e.yParity==null||lt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Jg=new WeakMap,Yg=new WeakMap,Zg=new WeakMap,Hh=new WeakMap;let di=Do;var Bc;const oh=class oh{constructor(e){H(this,Bc);W(Ag(e)===32,"invalid private key","privateKey","[REDACTED]"),O(this,Bc,Ce(e))}get privateKey(){return E(this,Bc)}get publicKey(){return oh.computePublicKey(E(this,Bc))}get compressedPublicKey(){return oh.computePublicKey(E(this,Bc),!0)}sign(e){W(Ag(e)===32,"invalid digest length","digest",e);const n=Ql.sign(_s(e),_s(E(this,Bc)),{lowS:!0});return di.from({r:xd(n.r,32),s:xd(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=oh.computePublicKey(e);return Ce(Ql.getSharedSecret(_s(E(this,Bc)),ht(n),!1))}static computePublicKey(e,n){let r=ht(e,"key");if(r.length===32){const i=Ql.getPublicKey(r,!!n);return Ce(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Ql.ProjectivePoint.fromHex(r);return Ce(s.toRawBytes(n))}static recoverPublicKey(e,n){W(Ag(e)===32,"invalid digest length","digest",e);const r=di.from(n);let s=Ql.Signature.fromCompact(_s(Un([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(_s(e));return W(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Ql.ProjectivePoint.fromHex(oh.computePublicKey(e).substring(2)),i=Ql.ProjectivePoint.fromHex(oh.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Bc=new WeakMap;let zb=oh;const xDe=BigInt(0),CDe=BigInt(36);function M6(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=ht(Jn(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const h3={};for(let t=0;t<10;t++)h3[String(t)]=String(t);for(let t=0;t<26;t++)h3[String.fromCharCode(65+t)]=String(10+t);const j6=15;function ADe(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>h3[r]).join("");for(;e.length>=j6;){let r=e.substring(0,j6);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const SDe=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function IDe(t){t=t.toLowerCase();let e=xDe;for(let n=0;n<t.length;n++)e=e*CDe+SDe[t[n]];return e}function Ht(t){if(W(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=M6(t);return W(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){W(t.substring(2,4)===ADe(t),"bad icap checksum","address",t);let e=IDe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return M6("0x"+e)}W(!1,"invalid address","address",t)}function TDe(t){const e=Ht(t.from);let r=Le(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Ht(Rn(Jn(Ad([e,r])),12))}function xG(t){return t&&typeof t.getAddress=="function"}async function cI(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(le(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),W(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ht(n)}function Cs(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Ht(t):(le(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),cI(t,e.resolveName(t)));if(xG(t))return cI(t,t.getAddress());if(t&&typeof t.then=="function")return cI(t,t);W(!1,"unsupported addressable value","target",t)}const Sc={};function $e(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ls(Sc,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Rt(t,e){return new ls(Sc,`bytes${e||""}`,t,{size:e})}const F6=Symbol.for("_ethers_typed");var Wh;const Ic=class Ic{constructor(e,n,r,s){Q(this,"type");Q(this,"value");H(this,Wh);Q(this,"_typedSymbol");s==null&&(s=null),qv(Sc,e,"Typed"),Qe(this,{_typedSymbol:F6,type:n,value:r}),O(this,Wh,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,Wh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,Wh)===!0?-1:E(this,Wh)===!1?this.value.length:null}static from(e,n){return new Ic(Sc,e,n)}static uint8(e){return $e(e,8)}static uint16(e){return $e(e,16)}static uint24(e){return $e(e,24)}static uint32(e){return $e(e,32)}static uint40(e){return $e(e,40)}static uint48(e){return $e(e,48)}static uint56(e){return $e(e,56)}static uint64(e){return $e(e,64)}static uint72(e){return $e(e,72)}static uint80(e){return $e(e,80)}static uint88(e){return $e(e,88)}static uint96(e){return $e(e,96)}static uint104(e){return $e(e,104)}static uint112(e){return $e(e,112)}static uint120(e){return $e(e,120)}static uint128(e){return $e(e,128)}static uint136(e){return $e(e,136)}static uint144(e){return $e(e,144)}static uint152(e){return $e(e,152)}static uint160(e){return $e(e,160)}static uint168(e){return $e(e,168)}static uint176(e){return $e(e,176)}static uint184(e){return $e(e,184)}static uint192(e){return $e(e,192)}static uint200(e){return $e(e,200)}static uint208(e){return $e(e,208)}static uint216(e){return $e(e,216)}static uint224(e){return $e(e,224)}static uint232(e){return $e(e,232)}static uint240(e){return $e(e,240)}static uint248(e){return $e(e,248)}static uint256(e){return $e(e,256)}static uint(e){return $e(e,256)}static int8(e){return $e(e,-8)}static int16(e){return $e(e,-16)}static int24(e){return $e(e,-24)}static int32(e){return $e(e,-32)}static int40(e){return $e(e,-40)}static int48(e){return $e(e,-48)}static int56(e){return $e(e,-56)}static int64(e){return $e(e,-64)}static int72(e){return $e(e,-72)}static int80(e){return $e(e,-80)}static int88(e){return $e(e,-88)}static int96(e){return $e(e,-96)}static int104(e){return $e(e,-104)}static int112(e){return $e(e,-112)}static int120(e){return $e(e,-120)}static int128(e){return $e(e,-128)}static int136(e){return $e(e,-136)}static int144(e){return $e(e,-144)}static int152(e){return $e(e,-152)}static int160(e){return $e(e,-160)}static int168(e){return $e(e,-168)}static int176(e){return $e(e,-176)}static int184(e){return $e(e,-184)}static int192(e){return $e(e,-192)}static int200(e){return $e(e,-200)}static int208(e){return $e(e,-208)}static int216(e){return $e(e,-216)}static int224(e){return $e(e,-224)}static int232(e){return $e(e,-232)}static int240(e){return $e(e,-240)}static int248(e){return $e(e,-248)}static int256(e){return $e(e,-256)}static int(e){return $e(e,-256)}static bytes1(e){return Rt(e,1)}static bytes2(e){return Rt(e,2)}static bytes3(e){return Rt(e,3)}static bytes4(e){return Rt(e,4)}static bytes5(e){return Rt(e,5)}static bytes6(e){return Rt(e,6)}static bytes7(e){return Rt(e,7)}static bytes8(e){return Rt(e,8)}static bytes9(e){return Rt(e,9)}static bytes10(e){return Rt(e,10)}static bytes11(e){return Rt(e,11)}static bytes12(e){return Rt(e,12)}static bytes13(e){return Rt(e,13)}static bytes14(e){return Rt(e,14)}static bytes15(e){return Rt(e,15)}static bytes16(e){return Rt(e,16)}static bytes17(e){return Rt(e,17)}static bytes18(e){return Rt(e,18)}static bytes19(e){return Rt(e,19)}static bytes20(e){return Rt(e,20)}static bytes21(e){return Rt(e,21)}static bytes22(e){return Rt(e,22)}static bytes23(e){return Rt(e,23)}static bytes24(e){return Rt(e,24)}static bytes25(e){return Rt(e,25)}static bytes26(e){return Rt(e,26)}static bytes27(e){return Rt(e,27)}static bytes28(e){return Rt(e,28)}static bytes29(e){return Rt(e,29)}static bytes30(e){return Rt(e,30)}static bytes31(e){return Rt(e,31)}static bytes32(e){return Rt(e,32)}static address(e){return new Ic(Sc,"address",e)}static bool(e){return new Ic(Sc,"bool",!!e)}static bytes(e){return new Ic(Sc,"bytes",e)}static string(e){return new Ic(Sc,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Ic(Sc,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===F6}static dereference(e,n){if(Ic.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Wh=new WeakMap;let ls=Ic;class NDe extends vl{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ls.dereference(n,"string");try{r=Ht(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Ht(xd(e.readValue(),20))}}class PDe extends vl{constructor(n){super(n.name,n.type,"_",n.dynamic);Q(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function CG(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return le(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),le(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else W(!1,"invalid tuple value","tuple",n);W(e.length===r.length,"types/value length mismatch","tuple",n);let s=new jP,i=new jP,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function AG(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if($r(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if($r(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Ym.fromItems(n,r)}class kDe extends vl{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);Q(this,"coder");Q(this,"length");Qe(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ls.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Dq(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return CG(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),le(r*xs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*xs,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new PDe(this.coder));return AG(n,s)}}class ODe extends vl{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ls.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class SG extends vl{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=_s(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class RDe extends SG{constructor(e){super("bytes",e)}decode(e){return Ce(super.decode(e))}}class DDe extends vl{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);Q(this,"size");Qe(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=_s(ls.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Ce(n.readBytes(this.size))}}const $De=new Uint8Array([]);class UDe extends vl{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes($De)}decode(e){return e.readBytes(0),null}}const BDe=BigInt(0),LDe=BigInt(1),MDe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class jDe extends vl{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);Q(this,"size");Q(this,"signed");Qe(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Le(ls.dereference(r,this.type)),i=Eh(MDe,xs*8);if(this.signed){let o=Eh(i,this.size*8-1);(s>o||s<-(o+LDe))&&this._throwError("value out-of-bounds",r),s=Bq(s,8*xs)}else(s<BDe||s>Eh(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Eh(n.readValue(),this.size*8);return this.signed&&(r=vx(r,this.size*8)),r}}class FDe extends SG{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,rl(ls.dereference(n,"string")))}decode(e){return Ex(super.decode(e))}}class gE extends vl{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);Q(this,"coders");Qe(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ls.dereference(r,"tuple");return CG(n,this.coders,s)}decode(n){return AG(n,this.coders)}}function lI(t,e){return{address:Ht(t),storageKeys:e.map((n,r)=>(W(hn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Xf(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(W(n.length===2,"invalid slot set",`value[${r}]`,n),lI(n[0],n[1])):(W(n!=null&&typeof n=="object","invalid address-slot set","value",t),lI(n.address,n.storageKeys)));W(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return lI(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function IG(t){return{address:Ht(t.address),nonce:Le(t.nonce!=null?t.nonce:0),chainId:Le(t.chainId!=null?t.chainId:0),signature:di.from(t.signature)}}function zDe(t){let e;return typeof t=="string"?e=zb.computePublicKey(t,!1):e=t.publicKey,Ht(Jn("0x"+e.substring(4)).substring(26))}function HDe(t,e){return zDe(zb.recoverPublicKey(t,e))}const gr=BigInt(0),WDe=BigInt(2),qDe=BigInt(27),GDe=BigInt(28),VDe=BigInt(35),KDe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),uI=4096*32;function QDe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ht(t.blobToKzgCommitment(Ce(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ht(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return ht(t.blobToKZGCommitment(Ce(r)));W(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return ht(t.computeBlobProof(Ce(r),Ce(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return ht(t.computeBlobKZGProof(Ce(r),Ce(s)));W(!1,"unsupported KZG library","kzg",t)}}}function z6(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Py(e).substring(4),"0x"+n}function ky(t){return t==="0x"?null:Ht(t)}function bA(t,e){try{return Xf(t)}catch(n){W(!1,n.message,e,t)}}function JDe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:ky(s[1]),nonce:nn(s[2],"nonce"),chainId:nn(s[0],"chainId"),signature:di.from({yParity:ep(s[3],"yParity"),r:ri(s[4],32),s:ri(s[5],32)})})}return n}catch(n){W(!1,n.message,e,t)}}function ep(t,e){return t==="0x"?0:lt(t,e)}function nn(t,e){if(t==="0x")return gr;const n=Le(t,e);return W(n<=KDe,"value exceeds uint size",e,n),n}function xt(t,e){const n=Le(t,"value"),r=ar(n);return W(r.length<=32,"value too large",`tx.${e}`,n),r}function vA(t){return Xf(t).map(e=>[e.address,e.storageKeys])}function YDe(t){return t.map(e=>[xt(e.chainId,"chainId"),e.address,xt(e.nonce,"nonce"),xt(e.signature.yParity,"yParity"),ar(e.signature.r),ar(e.signature.s)])}function ZDe(t,e){W(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)W(hn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function XDe(t){const e=Gv(t);W(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ep(e[0],"nonce"),gasPrice:nn(e[1],"gasPrice"),gasLimit:nn(e[2],"gasLimit"),to:ky(e[3]),value:nn(e[4],"value"),data:Ce(e[5]),chainId:gr};if(e.length===6)return n;const r=nn(e[6],"v"),s=nn(e[7],"r"),i=nn(e[8],"s");if(s===gr&&i===gr)n.chainId=r;else{let o=(r-VDe)/WDe;o<gr&&(o=gr),n.chainId=o,W(o!==gr||r===qDe||r===GDe,"non-canonical legacy v","v",e[6]),n.signature=di.from({r:ri(e[7],32),s:ri(e[8],32),v:r})}return n}function e$e(t,e){const n=[xt(t.nonce,"nonce"),xt(t.gasPrice||0,"gasPrice"),xt(t.gasLimit,"gasLimit"),t.to||"0x",xt(t.value,"value"),t.data];let r=gr;if(t.chainId!=gr)r=Le(t.chainId,"tx.chainId"),W(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==gr&&(n.push(ar(r)),n.push("0x"),n.push("0x")),Ad(n);let s=BigInt(27+e.yParity);return r!==gr?s=di.getChainIdV(r,e.v):BigInt(e.v)!==s&&W(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(ar(s)),n.push(ar(e.r)),n.push(ar(e.s)),Ad(n)}function EA(t,e){let n;try{if(n=ep(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{W(!1,"invalid yParity","yParity",e[0])}const r=ri(e[1],32),s=ri(e[2],32),i=di.from({r,s,yParity:n});t.signature=i}function t$e(t){const e=Gv(ht(t).slice(1));W(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ce(t));const n={type:2,chainId:nn(e[0],"chainId"),nonce:ep(e[1],"nonce"),maxPriorityFeePerGas:nn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:nn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:nn(e[4],"gasLimit"),to:ky(e[5]),value:nn(e[6],"value"),data:Ce(e[7]),accessList:bA(e[8],"accessList")};return e.length===9||EA(n,e.slice(9)),n}function n$e(t,e){const n=[xt(t.chainId,"chainId"),xt(t.nonce,"nonce"),xt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xt(t.maxFeePerGas||0,"maxFeePerGas"),xt(t.gasLimit,"gasLimit"),t.to||"0x",xt(t.value,"value"),t.data,vA(t.accessList||[])];return e&&(n.push(xt(e.yParity,"yParity")),n.push(ar(e.r)),n.push(ar(e.s))),Un(["0x02",Ad(n)])}function r$e(t){const e=Gv(ht(t).slice(1));W(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ce(t));const n={type:1,chainId:nn(e[0],"chainId"),nonce:ep(e[1],"nonce"),gasPrice:nn(e[2],"gasPrice"),gasLimit:nn(e[3],"gasLimit"),to:ky(e[4]),value:nn(e[5],"value"),data:Ce(e[6]),accessList:bA(e[7],"accessList")};return e.length===8||EA(n,e.slice(8)),n}function s$e(t,e){const n=[xt(t.chainId,"chainId"),xt(t.nonce,"nonce"),xt(t.gasPrice||0,"gasPrice"),xt(t.gasLimit,"gasLimit"),t.to||"0x",xt(t.value,"value"),t.data,vA(t.accessList||[])];return e&&(n.push(xt(e.yParity,"recoveryParam")),n.push(ar(e.r)),n.push(ar(e.s))),Un(["0x01",Ad(n)])}function i$e(t){let e=Gv(ht(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];W(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),W(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),W(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),W(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),W(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}W(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Ce(t));const s={type:3,chainId:nn(e[0],"chainId"),nonce:ep(e[1],"nonce"),maxPriorityFeePerGas:nn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:nn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:nn(e[4],"gasLimit"),to:ky(e[5]),value:nn(e[6],"value"),data:Ce(e[7]),accessList:bA(e[8],"accessList"),maxFeePerBlobGas:nn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),W(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),W(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)W(hn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||EA(s,e.slice(11)),s}function o$e(t,e,n){const r=[xt(t.chainId,"chainId"),xt(t.nonce,"nonce"),xt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xt(t.maxFeePerGas||0,"maxFeePerGas"),xt(t.gasLimit,"gasLimit"),t.to||Fb,xt(t.value,"value"),t.data,vA(t.accessList||[]),xt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),ZDe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(xt(e.yParity,"yParity")),r.push(ar(e.r)),r.push(ar(e.s)),n)?Un(["0x03",Ad([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Un(["0x03",Ad(r)])}function a$e(t){const e=Gv(ht(t).slice(1));W(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ce(t));const n={type:4,chainId:nn(e[0],"chainId"),nonce:ep(e[1],"nonce"),maxPriorityFeePerGas:nn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:nn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:nn(e[4],"gasLimit"),to:ky(e[5]),value:nn(e[6],"value"),data:Ce(e[7]),accessList:bA(e[8],"accessList"),authorizationList:JDe(e[9],"authorizationList")};return e.length===10||EA(n,e.slice(10)),n}function c$e(t,e){const n=[xt(t.chainId,"chainId"),xt(t.nonce,"nonce"),xt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xt(t.maxFeePerGas||0,"maxFeePerGas"),xt(t.gasLimit,"gasLimit"),t.to||"0x",xt(t.value,"value"),t.data,vA(t.accessList||[]),YDe(t.authorizationList||[])];return e&&(n.push(xt(e.yParity,"yParity")),n.push(ar(e.r)),n.push(ar(e.s))),Un(["0x04",Ad(n)])}var zo,Xg,em,tm,nm,rm,sm,im,om,am,cm,lm,qh,Au,Da,Su,um,dm,XE;const Ta=class Ta{constructor(){H(this,dm);H(this,zo);H(this,Xg);H(this,em);H(this,tm);H(this,nm);H(this,rm);H(this,sm);H(this,im);H(this,om);H(this,am);H(this,cm);H(this,lm);H(this,qh);H(this,Au);H(this,Da);H(this,Su);H(this,um);O(this,zo,null),O(this,Xg,null),O(this,tm,0),O(this,nm,gr),O(this,rm,null),O(this,sm,null),O(this,im,null),O(this,em,"0x"),O(this,om,gr),O(this,am,gr),O(this,cm,null),O(this,lm,null),O(this,qh,null),O(this,Au,null),O(this,Da,null),O(this,Su,null),O(this,um,null)}get type(){return E(this,zo)}set type(e){switch(e){case null:O(this,zo,null);break;case 0:case"legacy":O(this,zo,0);break;case 1:case"berlin":case"eip-2930":O(this,zo,1);break;case 2:case"london":case"eip-1559":O(this,zo,2);break;case 3:case"cancun":case"eip-4844":O(this,zo,3);break;case 4:case"pectra":case"eip-7702":O(this,zo,4);break;default:W(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=E(this,Xg);return e==null&&this.type===3?Fb:e}set to(e){O(this,Xg,e==null?null:Ht(e))}get nonce(){return E(this,tm)}set nonce(e){O(this,tm,lt(e,"value"))}get gasLimit(){return E(this,nm)}set gasLimit(e){O(this,nm,Le(e))}get gasPrice(){const e=E(this,rm);return e==null&&(this.type===0||this.type===1)?gr:e}set gasPrice(e){O(this,rm,e==null?null:Le(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,sm);return e??(this.type===2||this.type===3?gr:null)}set maxPriorityFeePerGas(e){O(this,sm,e==null?null:Le(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,im);return e??(this.type===2||this.type===3?gr:null)}set maxFeePerGas(e){O(this,im,e==null?null:Le(e,"maxFeePerGas"))}get data(){return E(this,em)}set data(e){O(this,em,Ce(e))}get value(){return E(this,om)}set value(e){O(this,om,Le(e,"value"))}get chainId(){return E(this,am)}set chainId(e){O(this,am,Le(e))}get signature(){return E(this,cm)||null}set signature(e){O(this,cm,e==null?null:di.from(e))}get accessList(){const e=E(this,lm)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){O(this,lm,e==null?null:Xf(e))}get authorizationList(){const e=E(this,um)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){O(this,um,e==null?null:e.map(n=>IG(n)))}get maxFeePerBlobGas(){const e=E(this,qh);return e==null&&this.type===3?gr:e}set maxFeePerBlobGas(e){O(this,qh,e==null?null:Le(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,Au);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){W(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)W(hn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}O(this,Au,e)}get blobs(){return E(this,Su)==null?null:E(this,Su).map(e=>Object.assign({},e))}set blobs(e){if(e==null){O(this,Su,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(r3(i)){le(E(this,Da),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ht(i);if(W(o.length<=uI,"blob is too large",`blobs[${s}]`,i),o.length!==uI){const l=new Uint8Array(uI);l.set(o),o=l}const a=E(this,Da).blobToKzgCommitment(o),c=Ce(E(this,Da).computeBlobKzgProof(o,a));n.push({data:Ce(o),commitment:Ce(a),proof:c}),r.push(z6(1,a))}else{const o=Ce(i.commitment);n.push({data:Ce(i.data),commitment:o,proof:Ce(i.proof)}),r.push(z6(1,o))}}O(this,Su,n),O(this,Au,r)}get kzg(){return E(this,Da)}set kzg(e){e==null?O(this,Da,null):O(this,Da,QDe(e))}get hash(){return this.signature==null?null:Jn(ee(this,dm,XE).call(this,!0,!1))}get unsignedHash(){return Jn(this.unsignedSerialized)}get from(){return this.signature==null?null:HDe(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:zb.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ee(this,dm,XE).call(this,!0,!0)}get unsignedSerialized(){return ee(this,dm,XE).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=E(this,qh)!=null||E(this,Au);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&le(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),le(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),le(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ta.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ta;if(typeof e=="string"){const r=ht(e);if(r[0]>=127)return Ta.from(XDe(r));switch(r[0]){case 1:return Ta.from(r$e(r));case 2:return Ta.from(t$e(r));case 3:return Ta.from(i$e(r));case 4:return Ta.from(a$e(r))}le(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Ta;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=di.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(W(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),W(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(W(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),W(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};zo=new WeakMap,Xg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,rm=new WeakMap,sm=new WeakMap,im=new WeakMap,om=new WeakMap,am=new WeakMap,cm=new WeakMap,lm=new WeakMap,qh=new WeakMap,Au=new WeakMap,Da=new WeakMap,Su=new WeakMap,um=new WeakMap,dm=new WeakSet,XE=function(e,n){le(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return e$e(this,r);case 1:return s$e(this,r);case 2:return n$e(this,r);case 3:return o$e(this,r,n?this.blobs:null);case 4:return c$e(this,r)}le(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Cx=Ta;function Rf(t){return Jn(rl(t))}var l$e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const H6=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),W6=4;function u$e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let _=0;_<d;_++)y=y<<1|u();let w=[],v=0,b=h;for(;;){let _=Math.floor(((y-v+1)*s-1)/b),C=0,S=r;for(;S-C>1;){let P=C+S>>>1;_<i[P]?S=P:C=P}if(C==0)break;w.push(C);let T=v+Math.floor(b*i[C]/s),A=v+Math.floor(b*i[C+1]/s)-1;for(;!((T^A)&f);)y=y<<1&g|u(),T=T<<1&g,A=A<<1&g|1;for(;T&~A&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,A=(A^f)<<1|f|1;v=T,b=1+A-T}let x=r-4;return w.map(_=>{switch(_-x){case 3:return x+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return x+256+(t[a++]<<8|t[a++]);case 1:return x+t[a++];default:return _-1}})}function d$e(t){let e=0;return()=>t[e++]}function TG(t){return d$e(u$e(h$e(t)))}function h$e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function f$e(t){return t&1?~t>>1:t>>1}function p$e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=f$e(e());return n}function Hb(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function NG(t){return Wb(()=>{let e=Hb(t);if(e.length)return e})}function PG(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(g$e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(m$e(n,t))}return e.flat()}function Wb(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function kG(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)p$e(t,n).forEach((i,o)=>r[o].push(i));return r}function g$e(t,e){let n=1+e(),r=e(),s=Wb(e);return kG(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function m$e(t,e){let n=1+e();return kG(n,1+t,e).map(s=>[s[0],s.slice(1)])}function y$e(t){let e=[],n=Hb(t);return s(r([]),[]),e;function r(i){let o=t(),a=Wb(()=>{let c=Hb(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function w$e(t){return t.toString(16).toUpperCase().padStart(2,"0")}function OG(t){return`{${w$e(t)}}`}function b$e(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function ny(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function v$e(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var E$e="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const qb=44032,Ax=4352,Sx=4449,Ix=4519,RG=19,DG=21,ry=28,Tx=DG*ry,_$e=RG*Tx,x$e=qb+_$e,C$e=Ax+RG,A$e=Sx+DG,S$e=Ix+ry;function U0(t){return t>>24&255}function $G(t){return t&16777215}let KP,q6,QP,e_;function I$e(){let t=TG(E$e);KP=new Map(NG(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),q6=new Set(Hb(t)),QP=new Map,e_=new Map;for(let[e,n]of PG(t)){if(!q6.has(e)&&n.length==2){let[r,s]=n,i=e_.get(r);i||(i=new Map,e_.set(r,i)),i.set(s,e)}QP.set(e,n.reverse())}}function UG(t){return t>=qb&&t<x$e}function T$e(t,e){if(t>=Ax&&t<C$e&&e>=Sx&&e<A$e)return qb+(t-Ax)*Tx+(e-Sx)*ry;if(UG(t)&&e>Ix&&e<S$e&&(t-qb)%ry==0)return t+(e-Ix);{let n=e_.get(t);return n&&(n=n.get(e),n)?n:-1}}function BG(t){KP||I$e();let e=[],n=[],r=!1;function s(i){let o=KP.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(UG(i)){let o=i-qb,a=o/Tx|0,c=o%Tx/ry|0,l=o%ry;s(Ax+a),s(Sx+c),l>0&&s(Ix+l)}else{let o=QP.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=U0(e[0]);for(let o=1;o<e.length;o++){let a=U0(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=U0(e[--c]),i<=a))break}i=U0(e[o])}}return e}function N$e(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=U0(i),a=$G(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=T$e(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function LG(t){return BG(t).map($G)}function P$e(t){return N$e(BG(t))}const G6=45,MG=".",jG=65039,FG=1,Nx=t=>Array.from(t);function Gb(t,e){return t.P.has(e)||t.Q.has(e)}class k$e extends Array{get is_emoji(){return!0}}let JP,zG,xh,YP,HG,Ig,dI,Fp,Zd,V6,ZP;function f3(){if(JP)return;let t=TG(l$e);const e=()=>Hb(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));JP=new Map(PG(t)),zG=n(),xh=e(),YP=new Set(e().map(u=>xh[u])),xh=new Set(xh),HG=n(),n();let s=NG(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Ig=Wb(u=>{let d=Wb(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=ny(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),dI=n(),Fp=new Map;let a=e().concat(Nx(dI)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),dI.has(u)||Fp.set(u,f)});for(let{V:u,M:d}of new Set(Fp.values())){let h=[];for(let p of u){let g=Ig.filter(w=>Gb(w,p)),y=h.find(({G:w})=>g.some(v=>w.has(v)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>Nx(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(w=>!p.has(w)));for(let w of g)d.set(w,y)}}Zd=new Set;let c=new Set;const l=u=>Zd.has(u)?c.add(u):Zd.add(u);for(let u of Ig){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Zd)!Fp.has(u)&&!c.has(u)&&Fp.set(u,FG);r(Zd,LG(Zd)),V6=y$e(t).map(u=>k$e.from(u)).sort(v$e),ZP=new Map;for(let u of V6){let d=[ZP];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===jG?d.push(...f):d=f}for(let h of d)h.V=u}}function p3(t){return(WG(t)?"":`${g3(_A([t]))} `)+OG(t)}function g3(t){return`"${t}"‎`}function O$e(t){if(t.length>=4&&t[2]==G6&&t[3]==G6)throw new Error(`invalid label extension: "${ny(t.slice(0,4))}"`)}function R$e(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function D$e(t){let e=t[0],n=H6.get(e);if(n)throw ww(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=H6.get(e);if(o){if(s==i)throw ww(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw ww(`trailing ${n}`)}function _A(t,e=1/0,n=OG){let r=[];$$e(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];WG(a)&&(r.push(ny(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(ny(t.slice(s,i))),r.join("")}function $$e(t){return f3(),xh.has(t)}function WG(t){return f3(),HG.has(t)}function U$e(t){return j$e(B$e(t,P$e,H$e))}function B$e(t,e,n){if(!t)return[];f3();let r=0;return t.split(MG).map(s=>{let i=b$e(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=z$e(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(R$e(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))O$e(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(xh.has(u[0]))throw ww("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&xh.has(y[0]))throw ww(`emoji + combining mark: "${ny(a[g-1])} + ${_A([y[0]])}"`)}D$e(u);let f=Nx(new Set(h)),[p]=M$e(f);F$e(p,h),L$e(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function L$e(t,e){let n,r=[];for(let s of e){let i=Fp.get(s);if(i===FG)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):Nx(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>Gb(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function M$e(t){let e=Ig;for(let n of t){let r=e.filter(s=>Gb(s,n));if(!r.length)throw Ig.some(s=>Gb(s,n))?GG(e[0],n):qG(n);if(e=r,r.length==1)break}return e}function j$e(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${g3(_A(e,63))}: ${s}`)}return ny(r)}).join(MG)}function qG(t){return new Error(`disallowed character: ${p3(t)}`)}function GG(t,e){let n=p3(e),r=Ig.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function ww(t){return new Error(`illegal placement: ${t}`)}function F$e(t,e){for(let n of e)if(!Gb(t,n))throw GG(t,n);if(t.M){let n=LG(e);for(let r=1,s=n.length;r<s;r++)if(YP.has(n[r])){let i=r+1;for(let o;i<s&&YP.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${p3(o)}`);if(i-r>W6)throw new Error(`excessive non-spacing marks: ${g3(_A(n.slice(r-1,i)))} (${i-r}/${W6})`);r=i}}}function z$e(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=W$e(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Zd.has(o))s.push(o);else{let a=JP.get(o);if(a)s.push(...a);else if(!zG.has(o))throw qG(o)}}}return s.length&&r.push(e(s)),r}function H$e(t){return t.filter(e=>e!=jG)}function W$e(t,e){let n=ZP,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const VG=new Uint8Array(32);VG.fill(0);function K6(t){return W(t.length!==0,"invalid ENS name; empty component","comp",t),t}function KG(t){const e=rl(q$e(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(K6(e.slice(r,s))),r=s+1);return W(r<e.length,"invalid ENS name; empty component","name",t),n.push(K6(e.slice(r))),n}function q$e(t){try{if(t.length===0)throw new Error("empty label");return U$e(t)}catch(e){W(!1,`invalid ENS name (${e.message})`,"name",t)}}function XP(t){W(typeof t=="string","invalid ENS name; not a string","name",t),W(t.length,"invalid ENS name (empty label)","name",t);let e=VG;const n=KG(t);for(;n.length;)e=Jn(Un([e,Jn(n.pop())]));return Ce(e)}function G$e(t,e){const n=e;return W(n<=255,"DNS encoded label cannot exceed 255","length",n),Ce(Un(KG(t).map(r=>{W(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const QG=new Uint8Array(32);QG.fill(0);const V$e=BigInt(-1),JG=BigInt(0),YG=BigInt(1),K$e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Q$e(t){const e=ht(t),n=e.length%32;return n?Un([e,QG.slice(n)]):Ce(e)}const J$e=xd(YG,32),Y$e=xd(JG,32),Q6={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},hI=["name","version","chainId","verifyingContract","salt"];function J6(t){return function(e){return W(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Z$e={name:J6("name"),version:J6("version"),chainId:function(t){const e=Le(t,"domain.chainId");return W(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Jo(e)},verifyingContract:function(t){try{return Ht(t).toLowerCase()}catch{}W(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=ht(t,"domain.salt");return W(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ce(e)}};function fI(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);W(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Eh(K$e,n?r-1:r),i=n?(s+YG)*V$e:JG;return function(o){const a=Le(o,"value");return W(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),xd(n?Bq(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return W(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=ht(r);return W(s.length===n,`invalid length for ${t}`,"value",r),Q$e(r)}}}switch(t){case"address":return function(e){return ri(Ht(e),32)};case"bool":return function(e){return e?J$e:Y$e};case"bytes":return function(e){return Jn(e)};case"string":return function(e){return Rf(e)}}return null}function Y6(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function mE(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var sv,Lc,hm,$x,ZG;const Zi=class Zi{constructor(e){H(this,$x);Q(this,"primaryType");H(this,sv);H(this,Lc);H(this,hm);O(this,Lc,new Map),O(this,hm,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=mE(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),O(this,sv,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){W(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=mE(u.type).base;W(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!fI(d)&&(W(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);W(o.length!==0,"missing primary type","types",e),W(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Qe(this,{primaryType:o[0]});function a(c,l){W(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),E(this,Lc).set(c,Y6(c,i[c])+u.map(d=>Y6(d,i[d])).join(""))}}get types(){return JSON.parse(E(this,sv))}getEncoder(e){let n=E(this,hm).get(e);return n||(n=ee(this,$x,ZG).call(this,e),E(this,hm).set(e,n)),n}encodeType(e){const n=E(this,Lc).get(e);return W(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Jn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(fI(e))return r(e,n);const s=mE(e).array;if(s)return W(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});W(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Zi(e)}static getPrimaryType(e){return Zi.from(e).primaryType}static hashStruct(e,n,r){return Zi.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=Q6[r];W(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>hI.indexOf(r.name)-hI.indexOf(s.name)),Zi.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Un(["0x1901",Zi.hashDomain(e),Zi.from(n).hash(r)])}static hash(e,n,r){return Jn(Zi.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!hn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Zi.from(n);o.visit(r,(a,c)=>(a==="address"&&!hn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Zi.hashDomain(e);const s={},i=[];hI.forEach(c=>{const l=e[c];l!=null&&(s[c]=Z$e[c](l),i.push({name:c,type:Q6[c]}))});const o=Zi.from(n);n=o.types;const a=Object.assign({},n);return W(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Ce(ht(l));if(c.match(/^u?int/))return Le(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return W(typeof l=="string","invalid string","value",l),l}W(!1,"unsupported type","type",c)})}}};sv=new WeakMap,Lc=new WeakMap,hm=new WeakMap,$x=new WeakSet,ZG=function(e){{const s=fI(e);if(s)return s}const n=mE(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{W(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return E(this,Lc).has(s)&&(a=a.map(Jn)),Jn(Un(a))}}const r=this.types[e];if(r){const s=Rf(E(this,Lc).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return E(this,Lc).has(c)?Jn(l):l});return o.unshift(s),Un(o)}}W(!1,`unknown type: ${e}`,"type",e)};let Px=Zi;function As(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const X$e="external public payable override",e8e=As(X$e.split(" ")),XG="constant external internal payable private public pure view override",t8e=As(XG.split(" ")),eV="constructor error event fallback function receive struct",tV=As(eV.split(" ")),nV="calldata memory storage payable indexed",n8e=As(nV.split(" ")),r8e="tuple returns",s8e=[eV,nV,r8e,XG].join(" "),i8e=As(s8e.split(" ")),o8e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},a8e=new RegExp("^(\\s*)"),c8e=new RegExp("^([0-9]+)"),l8e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),rV=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),sV=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var kr,Ho,iv,ek;const Ux=class Ux{constructor(e){H(this,iv);H(this,kr);H(this,Ho);O(this,kr,0),O(this,Ho,e.slice())}get offset(){return E(this,kr)}get length(){return E(this,Ho).length-E(this,kr)}clone(){return new Ux(E(this,Ho))}reset(){O(this,kr,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=ee(this,iv,ek).call(this,E(this,kr)+1,e.match+1);return O(this,kr,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;E(this,kr)<e.match-1;){const r=this.peek().linkNext;n.push(ee(this,iv,ek).call(this,E(this,kr)+1,r)),O(this,kr,r)}return O(this,kr,e.match+1),n}peek(){if(E(this,kr)>=E(this,Ho).length)throw new Error("out-of-bounds");return E(this,Ho)[E(this,kr)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return El(this,kr)._++,e}toString(){const e=[];for(let n=E(this,kr);n<E(this,Ho).length;n++){const r=E(this,Ho)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};kr=new WeakMap,Ho=new WeakMap,iv=new WeakSet,ek=function(e=0,n=0){return new Ux(E(this,Ho).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let ua=Ux;function Dd(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(a8e);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=o8e[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=lt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(l8e),a){if(c.text=a[1],i+=c.text.length,i8e.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(sV)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(c8e),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ua(e.map(o=>Object.freeze(o)))}function Z6(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function xA(t,e){if(e.peekKeyword(tV)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ml(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function iV(t){let e=ml(t,t8e);return Z6(e,As("constant payable nonpayable".split(" "))),Z6(e,As("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function sl(t,e){return t.popParams().map(n=>Br.from(n,e))}function oV(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Le(t.pop().text);throw new Error("invalid gas")}return null}function Df(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const u8e=new RegExp(/^(.*)\[([0-9]*)\]$/);function X6(t){const e=t.match(sV);if(W(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);W(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);W(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const In={},hi=Symbol.for("_ethers_internal"),eB="_ParamTypeInternal",tB="_ErrorInternal",nB="_EventInternal",rB="_ConstructorInternal",sB="_FallbackInternal",iB="_FunctionInternal",oB="_StructInternal";var fm,t_;const Xi=class Xi{constructor(e,n,r,s,i,o,a,c){H(this,fm);Q(this,"name");Q(this,"type");Q(this,"baseType");Q(this,"indexed");Q(this,"components");Q(this,"arrayLength");Q(this,"arrayChildren");if(qv(e,In,"ParamType"),Object.defineProperty(this,hi,{value:eB}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Qe(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return ee(this,fm,t_).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(Xi.isParamType(e))return e;if(typeof e=="string")try{return Xi.from(Dd(e),n)}catch{W(!1,"invalid param type","obj",e)}else if(e instanceof ua){let a="",c="",l=null;ml(e,As(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Xi.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=X6(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Xi(In,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(ml(e,n8e).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Xi(In,p,a,c,h,l,d,u)}const r=e.name;W(!r||typeof r=="string"&&r.match(rV),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(W(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(u8e);if(o){const a=parseInt(o[2]||"-1"),c=Xi.from({type:o[1],components:e.components});return new Xi(In,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Xi.from(l)):null;return new Xi(In,r||"",i,"tuple",s,a,null,null)}return i=X6(e.type),new Xi(In,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[hi]===eB}};fm=new WeakSet,t_=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;ee(u=o,fm,t_).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;ee(u=o[l],fm,t_).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Br=Xi;class $f{constructor(e,n,r){Q(this,"type");Q(this,"inputs");qv(e,In,"Fragment"),r=Object.freeze(r.slice()),Qe(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{$f.from(JSON.parse(e))}catch{}return $f.from(Dd(e))}if(e instanceof ua)switch(e.peekKeyword(tV)){case"constructor":return Yc.from(e);case"error":return ni.from(e);case"event":return Ga.from(e);case"fallback":case"receive":return kc.from(e);case"function":return Va.from(e);case"struct":return lf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Yc.from(e);case"error":return ni.from(e);case"event":return Ga.from(e);case"fallback":case"receive":return kc.from(e);case"function":return Va.from(e);case"struct":return lf.from(e)}le(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}W(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Yc.isFragment(e)}static isError(e){return ni.isFragment(e)}static isEvent(e){return Ga.isFragment(e)}static isFunction(e){return Va.isFragment(e)}static isStruct(e){return lf.isFragment(e)}}class CA extends $f{constructor(n,r,s,i){super(n,r,i);Q(this,"name");W(typeof s=="string"&&s.match(rV),"invalid identifier","name",s),i=Object.freeze(i.slice()),Qe(this,{name:s})}}function Vb(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class ni extends CA{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,hi,{value:tB})}get selector(){return Rf(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Vb(e,this.inputs)),n.join(" ")}static from(e){if(ni.isFragment(e))return e;if(typeof e=="string")return ni.from(Dd(e));if(e instanceof ua){const n=xA("error",e),r=sl(e);return Df(e),new ni(In,n,r)}return new ni(In,e.name,e.inputs?e.inputs.map(Br.from):[])}static isFragment(e){return e&&e[hi]===tB}}class Ga extends CA{constructor(n,r,s,i){super(n,"event",r,s);Q(this,"anonymous");Object.defineProperty(this,hi,{value:nB}),Qe(this,{anonymous:i})}get topicHash(){return Rf(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Vb(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Br.from(i)),new Ga(In,n,r,!1).topicHash}static from(n){if(Ga.isFragment(n))return n;if(typeof n=="string")try{return Ga.from(Dd(n))}catch{W(!1,"invalid event fragment","obj",n)}else if(n instanceof ua){const r=xA("event",n),s=sl(n,!0),i=!!ml(n,As(["anonymous"])).has("anonymous");return Df(n),new Ga(In,r,s,i)}return new Ga(In,n.name,n.inputs?n.inputs.map(r=>Br.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[hi]===nB}}class Yc extends $f{constructor(n,r,s,i,o){super(n,r,s);Q(this,"payable");Q(this,"gas");Object.defineProperty(this,hi,{value:rB}),Qe(this,{payable:i,gas:o})}format(n){if(le(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${Vb(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Yc.isFragment(n))return n;if(typeof n=="string")try{return Yc.from(Dd(n))}catch{W(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof ua){ml(n,As(["constructor"]));const r=sl(n),s=!!ml(n,e8e).has("payable"),i=oV(n);return Df(n),new Yc(In,"constructor",r,s,i)}return new Yc(In,"constructor",n.inputs?n.inputs.map(Br.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[hi]===rB}}class kc extends $f{constructor(n,r,s){super(n,"fallback",r);Q(this,"payable");Object.defineProperty(this,hi,{value:sB}),Qe(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(kc.isFragment(n))return n;if(typeof n=="string")try{return kc.from(Dd(n))}catch{W(!1,"invalid fallback fragment","obj",n)}else if(n instanceof ua){const r=n.toString(),s=n.peekKeyword(As(["fallback","receive"]));if(W(s,"type must be fallback or receive","obj",r),n.popKeyword(As(["fallback","receive"]))==="receive"){const c=sl(n);return W(c.length===0,"receive cannot have arguments","obj.inputs",c),ml(n,As(["payable"])),Df(n),new kc(In,[],!0)}let o=sl(n);o.length?W(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Br.from("bytes")];const a=iV(n);if(W(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),ml(n,As(["returns"])).has("returns")){const c=sl(n);W(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Df(n),new kc(In,o,a==="payable")}if(n.type==="receive")return new kc(In,[],!0);if(n.type==="fallback"){const r=[Br.from("bytes")],s=n.stateMutability==="payable";return new kc(In,r,s)}W(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[hi]===sB}}class Va extends CA{constructor(n,r,s,i,o,a){super(n,"function",r,i);Q(this,"constant");Q(this,"outputs");Q(this,"stateMutability");Q(this,"payable");Q(this,"gas");Object.defineProperty(this,hi,{value:iB}),o=Object.freeze(o.slice()),Qe(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Rf(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Vb(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Vb(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Br.from(i)),new Va(In,n,"view",r,[],null).selector}static from(n){if(Va.isFragment(n))return n;if(typeof n=="string")try{return Va.from(Dd(n))}catch{W(!1,"invalid function fragment","obj",n)}else if(n instanceof ua){const s=xA("function",n),i=sl(n),o=iV(n);let a=[];ml(n,As(["returns"])).has("returns")&&(a=sl(n));const c=oV(n);return Df(n),new Va(In,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Va(In,n.name,r,n.inputs?n.inputs.map(Br.from):[],n.outputs?n.outputs.map(Br.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[hi]===iB}}class lf extends CA{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,hi,{value:oB})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return lf.from(Dd(e))}catch{W(!1,"invalid struct fragment","obj",e)}else if(e instanceof ua){const n=xA("struct",e),r=sl(e);return Df(e),new lf(In,n,r)}return new lf(In,e.name,e.inputs?e.inputs.map(Br.from):[])}static isFragment(e){return e&&e[hi]===oB}}const pa=new Map;pa.set(0,"GENERIC_PANIC");pa.set(1,"ASSERT_FALSE");pa.set(17,"OVERFLOW");pa.set(18,"DIVIDE_BY_ZERO");pa.set(33,"ENUM_RANGE_ERROR");pa.set(34,"BAD_STORAGE_DATA");pa.set(49,"STACK_UNDERFLOW");pa.set(50,"ARRAY_RANGE_ERROR");pa.set(65,"OUT_OF_MEMORY");pa.set(81,"UNINITIALIZED_FUNCTION_CALL");const d8e=new RegExp(/^bytes([0-9]*)$/),h8e=new RegExp(/^(u?int)([0-9]*)$/);let pI=null,aB=1024;function f8e(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=ht(n);if(n=Ce(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ce(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ce(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${pa.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Ht(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ht(e.from)),vn(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var Iu,zp;const Bx=class Bx{constructor(){H(this,Iu)}getDefaultValue(e){const n=e.map(s=>ee(this,Iu,zp).call(this,Br.from(s)));return new gE(n,"_").defaultValue()}encode(e,n){Dq(n.length,e.length,"types/values length mismatch");const r=e.map(o=>ee(this,Iu,zp).call(this,Br.from(o))),s=new gE(r,"_"),i=new jP;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>ee(this,Iu,zp).call(this,Br.from(o)));return new gE(s,"_").decode(new FP(n,r,aB))}static _setDefaultMaxInflation(e){W(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),aB=e}static defaultAbiCoder(){return pI==null&&(pI=new Bx),pI}static getBuiltinCallException(e,n,r){return f8e(e,n,r,Bx.defaultAbiCoder())}};Iu=new WeakSet,zp=function(e){if(e.isArray())return new kDe(ee(this,Iu,zp).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new gE(e.components.map(r=>ee(this,Iu,zp).call(this,r)),e.name);switch(e.baseType){case"address":return new NDe(e.name);case"bool":return new ODe(e.name);case"string":return new FDe(e.name);case"bytes":return new RDe(e.name);case"":return new UDe(e.name)}let n=e.type.match(h8e);if(n){let r=parseInt(n[2]||"256");return W(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new jDe(r/8,n[1]==="int",e.name)}if(n=e.type.match(d8e),n){let r=parseInt(n[1]);return W(r!==0&&r<=32,"invalid bytes length","param",e),new DDe(r,e.name)}W(!1,"invalid type","type",e.type)};let Kb=Bx;class p8e{constructor(e,n,r){Q(this,"fragment");Q(this,"name");Q(this,"signature");Q(this,"topic");Q(this,"args");const s=e.name,i=e.format();Qe(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class g8e{constructor(e,n,r,s){Q(this,"fragment");Q(this,"name");Q(this,"args");Q(this,"signature");Q(this,"selector");Q(this,"value");const i=e.name,o=e.format();Qe(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class m8e{constructor(e,n,r){Q(this,"fragment");Q(this,"name");Q(this,"args");Q(this,"signature");Q(this,"selector");const s=e.name,i=e.format();Qe(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class cB{constructor(e){Q(this,"hash");Q(this,"_isIndexed");Qe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const lB={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},uB={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&lB[t.toString()]&&(e=lB[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var $a,Ua,Ba,is,tc,n_,r_;const ah=class ah{constructor(e){H(this,tc);Q(this,"fragments");Q(this,"deploy");Q(this,"fallback");Q(this,"receive");H(this,$a);H(this,Ua);H(this,Ba);H(this,is);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,O(this,Ba,new Map),O(this,$a,new Map),O(this,Ua,new Map);const r=[];for(const o of n)try{r.push($f.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Qe(this,{fragments:Object.freeze(r)});let s=null,i=!1;O(this,is,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Qe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(W(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=E(this,Ba);break;case"event":c=E(this,Ua);break;case"error":c=E(this,$a);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Qe(this,{deploy:Yc.from("constructor()")}),Qe(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Kb.defaultAbiCoder()}getFunctionName(e){const n=ee(this,tc,n_).call(this,e,null,!1);return W(n,"no matching function","key",e),n.name}hasFunction(e){return!!ee(this,tc,n_).call(this,e,null,!1)}getFunction(e,n){return ee(this,tc,n_).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(E(this,Ba).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Ba).get(s),r)}}getEventName(e){const n=ee(this,tc,r_).call(this,e,null,!1);return W(n,"no matching event","key",e),n.name}hasEvent(e){return!!ee(this,tc,r_).call(this,e,null,!1)}getEvent(e,n){return ee(this,tc,r_).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(E(this,Ua).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Ua).get(s),r)}}getError(e,n){if(hn(e)){const s=e.toLowerCase();if(uB[s])return ni.from(uB[s].signature);for(const i of E(this,$a).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of E(this,$a))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?ni.from("error Error(string)"):e==="Panic"?ni.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");W(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=ni.from(e).format(),e==="Error(string)")return ni.from("error Error(string)");if(e==="Panic(uint256)")return ni.from("error Panic(uint256)");const r=E(this,$a).get(e);return r||null}forEachError(e){const n=Array.from(E(this,$a).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,$a).get(s),r)}}_decodeParams(e,n){return E(this,is).decode(e,n)}_encodeParams(e,n){return E(this,is).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);W(r,"unknown error","fragment",e),e=r}return W(Rn(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Rn(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);W(r,"unknown error","fragment",e),e=r}return Un([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return W(Rn(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Rn(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return Un([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);W(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=_s(n);if(s.length%32===0)try{return E(this,is).decode(e.outputs,s)}catch{r="could not decode result data"}le(!1,r,"BAD_DATA",{value:Ce(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=ht(e,"data"),s=Kb.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Ce(r.slice(0,4)),c=this.getError(a);if(c)try{const l=E(this,is).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return Ce(E(this,is).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);W(i,"unknown event","eventFragment",e),e=i}le(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Rf(o):i.type==="bytes"?Jn(Ce(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=xd(o):i.type.match(/^bytes/)?o=ORe(o,32):i.type==="address"&&E(this,is).encode(["address"],[o]),ri(Ce(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){W(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?W(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);W(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),W(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Rf(c));else if(o.type==="bytes")r.push(Jn(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(E(this,is).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:E(this,is).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);W(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;W(hn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Br.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?E(this,is).decode(s,Un(r)):null,c=E(this,is).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new cB(null);else if(o[p])g=new cB(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),Ym.fromItems(l,u)}parseTransaction(e){const n=ht(e.data,"tx.data"),r=Le(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ce(n.slice(0,4)));if(!s)return null;const i=E(this,is).decode(s.inputs,n.slice(4));return new g8e(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new p8e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Ce(e),r=this.getError(Rn(n,0,4));if(!r)return null;const s=E(this,is).decode(r.inputs,Rn(n,4));return new m8e(r,r.selector,s)}static from(e){return e instanceof ah?e:typeof e=="string"?new ah(JSON.parse(e)):typeof e.formatJson=="function"?new ah(e.formatJson()):typeof e.format=="function"?new ah(e.format("json")):new ah(e)}};$a=new WeakMap,Ua=new WeakMap,Ba=new WeakMap,is=new WeakMap,tc=new WeakSet,n_=function(e,n,r){if(hn(e)){const i=e.toLowerCase();for(const o of E(this,Ba).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Ba))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ls.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ls.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Ba).get(Va.from(e).format());return s||null},r_=function(e,n,r){if(hn(e)){const i=e.toLowerCase();for(const o of E(this,Ua).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Ua))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ls.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Ua).get(Ga.from(e).format());return s||null};let tk=ah;const aV=BigInt(0);function Tg(t){return t??null}function jn(t){return t==null?null:t.toString()}class dB{constructor(e,n,r){Q(this,"gasPrice");Q(this,"maxFeePerGas");Q(this,"maxPriorityFeePerGas");Qe(this,{gasPrice:Tg(e),maxFeePerGas:Tg(n),maxPriorityFeePerGas:Tg(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:jn(e),maxFeePerGas:jn(n),maxPriorityFeePerGas:jn(r)}}}function kx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ce(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Le(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=lt(t[s],`request.${s}`));return t.accessList&&(e.accessList=Xf(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>r3(s)?Ce(s):Object.assign({},s))),e}var Mc;class y8e{constructor(e,n){Q(this,"provider");Q(this,"number");Q(this,"hash");Q(this,"timestamp");Q(this,"parentHash");Q(this,"parentBeaconBlockRoot");Q(this,"nonce");Q(this,"difficulty");Q(this,"gasLimit");Q(this,"gasUsed");Q(this,"stateRoot");Q(this,"receiptsRoot");Q(this,"blobGasUsed");Q(this,"excessBlobGas");Q(this,"miner");Q(this,"prevRandao");Q(this,"extraData");Q(this,"baseFeePerGas");H(this,Mc);O(this,Mc,e.transactions.map(r=>typeof r!="string"?new Qb(r,n):r)),Qe(this,{provider:n,hash:Tg(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Tg(e.prevRandao),extraData:e.extraData,baseFeePerGas:Tg(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,Mc).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,Mc).slice();return e.length===0?[]:(le(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:jn(e),difficulty:jn(n),extraData:r,gasLimit:jn(s),gasUsed:jn(i),blobGasUsed:jn(this.blobGasUsed),excessBlobGas:jn(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,Mc).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=E(this,Mc)[e];else{const r=e.toLowerCase();for(const s of E(this,Mc))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;W(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return w8e(this)}}Mc=new WeakMap;class Kv{constructor(e,n){Q(this,"provider");Q(this,"transactionHash");Q(this,"blockHash");Q(this,"blockNumber");Q(this,"removed");Q(this,"address");Q(this,"data");Q(this,"topics");Q(this,"index");Q(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Qe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return le(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return le(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return le(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return b8e(this)}}var ov;class cV{constructor(e,n){Q(this,"provider");Q(this,"to");Q(this,"from");Q(this,"contractAddress");Q(this,"hash");Q(this,"index");Q(this,"blockHash");Q(this,"blockNumber");Q(this,"logsBloom");Q(this,"gasUsed");Q(this,"blobGasUsed");Q(this,"cumulativeGasUsed");Q(this,"gasPrice");Q(this,"blobGasPrice");Q(this,"type");Q(this,"status");Q(this,"root");H(this,ov);O(this,ov,Object.freeze(e.logs.map(s=>new Kv(s,n))));let r=aV;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Qe(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,ov)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:jn(this.cumulativeGasUsed),from:n,gasPrice:jn(this.gasPrice),blobGasUsed:jn(this.blobGasUsed),blobGasPrice:jn(this.blobGasPrice),gasUsed:jn(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return uV(this)}reorderedEvent(e){return le(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),lV(this,e)}}ov=new WeakMap;var Tu;const x3=class x3{constructor(e,n){Q(this,"provider");Q(this,"blockNumber");Q(this,"blockHash");Q(this,"index");Q(this,"hash");Q(this,"type");Q(this,"to");Q(this,"from");Q(this,"nonce");Q(this,"gasLimit");Q(this,"gasPrice");Q(this,"maxPriorityFeePerGas");Q(this,"maxFeePerGas");Q(this,"maxFeePerBlobGas");Q(this,"data");Q(this,"value");Q(this,"chainId");Q(this,"signature");Q(this,"accessList");Q(this,"blobVersionedHashes");Q(this,"authorizationList");H(this,Tu);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,O(this,Tu,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:jn(this.chainId),data:l,from:a,gasLimit:jn(this.gasLimit),gasPrice:jn(this.gasPrice),hash:s,maxFeePerGas:jn(this.maxFeePerGas),maxPriorityFeePerGas:jn(this.maxPriorityFeePerGas),maxFeePerBlobGas:jn(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:jn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await bs({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=E(this,Tu),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await bs({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<E(this,Tu)&&(o=E(this,Tu)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const w=await g.getTransaction(y);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(w.hash);if(v==null||h-v.blockNumber+1<r)return;let b="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?b="repriced":w.data==="0x"&&w.from===w.to&&w.value===aV&&(b="cancelled"),le(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:b==="replaced"||b==="cancelled",reason:b,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:v})}}o++}},l=h=>{if(h==null||h.status!==0)return h;le(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(w=>w())};if(p.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{g(),f(vn("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(w)})}const y=async w=>{if(await w.confirmations()>=r){g();try{h(l(w))}catch(v){f(v)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const w=async()=>{try{await c()}catch(v){if($r(v,"TRANSACTION_REPLACED")){g(),f(v);return}}a||this.provider.once("block",w)};p.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return le(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),uV(this)}reorderedEvent(e){return le(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),le(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),lV(this,e)}replaceableTransaction(e){W(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new x3(this,this.provider);return O(n,Tu,e),n}};Tu=new WeakMap;let Qb=x3;function w8e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function lV(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function uV(t){return{orphan:"drop-transaction",tx:t}}function b8e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class m3 extends Kv{constructor(n,r,s){super(n,n.provider);Q(this,"interface");Q(this,"fragment");Q(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Qe(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class dV extends Kv{constructor(n,r){super(n,n.provider);Q(this,"error");Qe(this,{error:r})}}var pm;class v8e extends cV{constructor(n,r,s){super(s,r);H(this,pm);O(this,pm,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?E(this,pm).getEvent(n.topics[0]):null;if(r)try{return new m3(n,E(this,pm),r)}catch(s){return new dV(n,s)}return n})}}pm=new WeakMap;var av;class y3 extends Qb{constructor(n,r,s){super(s,r);H(this,av);O(this,av,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new v8e(E(this,av),this.provider,s)}}av=new WeakMap;class hV extends Lq{constructor(n,r,s,i){super(n,r,s);Q(this,"log");Qe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class E8e extends hV{constructor(e,n,r,s,i){super(e,n,r,new m3(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Qe(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const hB=BigInt(0);function fV(t){return t&&typeof t.call=="function"}function pV(t){return t&&typeof t.estimateGas=="function"}function AA(t){return t&&typeof t.resolveName=="function"}function gV(t){return t&&typeof t.sendTransaction=="function"}function mV(t){if(t!=null){if(AA(t))return t;if(t.provider)return t.provider}}var cv;class _8e{constructor(e,n,r){H(this,cv);Q(this,"fragment");if(Qe(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Uf(e.runner,"resolveName"),i=AA(s)?s:null;O(this,cv,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Cs(h,i))):Cs(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return E(this,cv)}}cv=new WeakMap;function Uf(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ch(t){return t==null?null:t.provider||null}async function yV(t,e){const n=ls.dereference(t,"overrides");W(typeof n=="object","invalid overrides parameter","overrides",t);const r=kx(n);return W(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),W(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function x8e(t,e,n){const r=Uf(t,"resolveName"),s=AA(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ls.dereference(c,a),a==="address"?Cs(c,s):c))))}function C8e(t){const e=async function(o){const a=await yV(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Cs(a.from,mV(t.runner)));const c=t.interface,l=Le(a.value||hB,"overrides.value")===hB,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&W(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),W(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return W(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),W(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Uf(t.runner,"call");le(fV(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw n3(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;le(gV(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Ch(t.runner);return new y3(t.interface,l,c)},s=async function(o){const a=Uf(t.runner,"estimateGas");return le(pV(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Qe(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function A8e(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return le(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await yV(l.pop()),d.from&&(d.from=await Cs(d.from,mV(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await x8e(t.runner,u.inputs,l);return Object.assign({},d,await bs({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;le(gV(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Ch(t.runner);return new y3(t.interface,h,d)},o=async function(...l){const u=Uf(t.runner,"estimateGas");return le(pV(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Uf(t.runner,"call");le(fV(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw n3(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Qe(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return le(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function S8e(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return le(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new _8e(t,n(...s),s)};return Qe(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return le(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const Ox=Symbol.for("_ethersInternal_contract"),wV=new WeakMap;function I8e(t,e){wV.set(t[Ox],e)}function _i(t){return wV.get(t[Ox])}function T8e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function w3(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(hn(o,32))return o;const a=t.interface.getEvent(o);return W(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?hn(e,32)?n=[e]:(r=t.interface.getEvent(e),W(r,"unknown fragment","event",e),n=[r.topicHash]):T8e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):W(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function B0(t,e){const{subs:n}=_i(t);return n.get((await w3(t,e)).tag)||null}async function fB(t,e,n){const r=Ch(t.runner);le(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await w3(t,n),{addr:a,subs:c}=_i(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let w=s;if(w==null)try{w=t.interface.getEvent(y.topics[0])}catch{}if(w){const v=w,b=s?t.interface.decodeEventLog(s,y.data,y.topics):[];rk(t,n,b,x=>new E8e(t,x,n,v,y))}else rk(t,n,[],v=>new hV(t,v,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let nk=Promise.resolve();async function N8e(t,e,n,r){await nk;const s=await B0(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),_i(t).subs.delete(s.tag)),i>0}async function rk(t,e,n,r){try{await nk}catch{}const s=N8e(t,e,n,r);return nk=s,await s}const yE=["then"];var jB;jB=Ox;const bw=class bw{constructor(e,n,r,s){Q(this,"target");Q(this,"interface");Q(this,"runner");Q(this,"filters");Q(this,jB);Q(this,"fallback");W(typeof e=="string"||xG(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=tk.from(n);Qe(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,Ox,{value:{}});let o,a=null,c=null;if(s){const d=Ch(r);c=new y3(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(hn(e))a=e,o=Promise.resolve(e);else{const d=Uf(r,"resolveName");if(!AA(d))throw vn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw vn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return _i(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return _i(this).addr=d,d});I8e(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||yE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!$r(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>yE.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Qe(this,{filters:u}),Qe(this,{fallback:i.receive||i.fallback?C8e(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||yE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!$r(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||yE.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new bw(this.target,this.interface,e)}attach(e){return new bw(e,this.interface,this.runner)}async getAddress(){return await _i(this).addrPromise}async getDeployedCode(){const e=Ch(this.runner);le(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ch(this.runner);return le(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return _i(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),A8e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),S8e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=_i(this),o=s||await i,{fragment:a,topics:c}=await w3(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Ch(this.runner);return le(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new m3(d,this.interface,h)}catch(f){return new dV(d,f)}return new Kv(d,u)})}async on(e,n){const r=await fB(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await fB(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await rk(this,e,n,null)}async listenerCount(e){if(e){const s=await B0(this,e);return s?s.listeners.length:0}const{subs:n}=_i(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await B0(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=_i(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await B0(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),_i(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await B0(this,e);if(!n)return this;n.stop(),_i(this).subs.delete(n.tag)}else{const{subs:n}=_i(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends bw{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let sk=bw;function P8e(){return sk}class Ng extends P8e(){}function gI(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):W(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class k8e{constructor(e){Q(this,"name");Qe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const bV=new RegExp("^(ipfs)://(.*)$","i"),pB=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),bV,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Nu,Gh,Pu,Hp,Lx,vV;const lg=class lg{constructor(e,n,r){H(this,Pu);Q(this,"provider");Q(this,"address");Q(this,"name");H(this,Nu);H(this,Gh);Qe(this,{provider:e,address:n,name:r}),O(this,Nu,null),O(this,Gh,new Ng(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,Nu)==null&&O(this,Nu,(async()=>{try{return await E(this,Gh).supportsInterface("0x9061b923")}catch(e){if($r(e,"CALL_EXCEPTION"))return!1;throw O(this,Nu,null),e}})()),await E(this,Nu)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await ee(this,Pu,Hp).call(this,"addr(bytes32)");return i==null||i===Fb?null:i}catch(i){if($r(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await ee(this,Pu,Hp).call(this,"addr(bytes32,uint)",[i]);if(hn(o,20))return Ht(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof k8e&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await ee(this,Pu,Hp).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;le(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await ee(this,Pu,Hp).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await ee(this,Pu,Hp).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${DRe("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;le(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<pB.length;r++){const s=n.match(pB[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=gI(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Ng(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",xd(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=gI(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Cd(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const w=f.body;return w&&e.push({type:"!metadata",value:Ce(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(bV)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=gI(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return le(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await ee(s=lg,Lx,vV).call(s,e,r);if(i!=null){const o=new lg(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Nu=new WeakMap,Gh=new WeakMap,Pu=new WeakSet,Hp=async function(e,n){n=(n||[]).slice();const r=E(this,Gh).interface;n.unshift(XP(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),le(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[G$e(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await E(this,Gh)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!$r(i,"CALL_EXCEPTION"))throw i}return null},Lx=new WeakSet,vV=async function(e,n){const r=await lg.getEnsAddress(e);try{const i=await new Ng(r,["function resolver(bytes32) view returns (address)"],e).resolver(XP(n),{enableCcipRead:!0});return i===Fb?null:i}catch(s){throw s}return null},H(lg,Lx);let Rx=lg;const gB=BigInt(0);function _t(t,e){return function(n){return n==null?e:t(n)}}function Jb(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function Qv(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";le(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function O8e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}W(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function sy(t){return W(hn(t,!0),"invalid data","value",t),t}function Dr(t){return W(hn(t,32),"invalid hash","value",t),t}const R8e=Qv({address:Ht,blockHash:Dr,blockNumber:lt,data:sy,index:lt,removed:_t(O8e,!1),topics:Jb(Dr),transactionHash:Dr,transactionIndex:lt},{index:["logIndex"]});function D8e(t){return R8e(t)}const $8e=Qv({hash:_t(Dr),parentHash:Dr,parentBeaconBlockRoot:_t(Dr,null),number:lt,timestamp:lt,nonce:_t(sy),difficulty:Le,gasLimit:Le,gasUsed:Le,stateRoot:_t(Dr,null),receiptsRoot:_t(Dr,null),blobGasUsed:_t(Le,null),excessBlobGas:_t(Le,null),miner:_t(Ht),prevRandao:_t(Dr,null),extraData:sy,baseFeePerGas:_t(Le)},{prevRandao:["mixHash"]});function U8e(t){const e=$8e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:EV(n)),e}const B8e=Qv({transactionIndex:lt,blockNumber:lt,transactionHash:Dr,address:Ht,topics:Jb(Dr),data:sy,index:lt,blockHash:Dr},{index:["logIndex"]});function L8e(t){return B8e(t)}const M8e=Qv({to:_t(Ht,null),from:_t(Ht,null),contractAddress:_t(Ht,null),index:lt,root:_t(Ce),gasUsed:Le,blobGasUsed:_t(Le,null),logsBloom:_t(sy),blockHash:Dr,hash:Dr,logs:Jb(L8e),blockNumber:lt,cumulativeGasUsed:Le,effectiveGasPrice:_t(Le),blobGasPrice:_t(Le,null),status:_t(lt),type:_t(lt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function j8e(t){return M8e(t)}function EV(t){t.to&&Le(t.to)===gB&&(t.to="0x0000000000000000000000000000000000000000");const e=Qv({hash:Dr,index:_t(lt,void 0),type:n=>n==="0x"||n==null?0:lt(n),accessList:_t(Xf,null),blobVersionedHashes:_t(Jb(Dr,!0),null),authorizationList:_t(Jb(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Ht(n.address),chainId:Le(n.chainId),nonce:Le(n.nonce),signature:di.from(r)}},!1),null),blockHash:_t(Dr,null),blockNumber:_t(lt,null),transactionIndex:_t(lt,null),from:Ht,gasPrice:_t(Le),maxPriorityFeePerGas:_t(Le),maxFeePerGas:_t(Le),maxFeePerBlobGas:_t(Le,null),gasLimit:Le,to:_t(Ht,null),value:Le,nonce:lt,data:sy,creates:_t(Ht,null),chainId:_t(Le,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=TDe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=di.from(t.signature):e.signature=di.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Le(e.blockHash)===gB&&(e.blockHash=null),e}const F8e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Jv{constructor(e){Q(this,"name");Qe(this,{name:e})}clone(){return new Jv(this.name)}}class SA extends Jv{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Q(this,"effectiveBlock");Q(this,"txBase");Q(this,"txCreate");Q(this,"txDataZero");Q(this,"txDataNonzero");Q(this,"txAccessListStorageKey");Q(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),W(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Qe(this,s)}clone(){return new SA(this.effectiveBlock,this)}}class IA extends Jv{constructor(n,r){super("org.ethers.plugins.network.Ens");Q(this,"address");Q(this,"targetNetwork");Qe(this,{address:n||F8e,targetNetwork:r??1})}clone(){return new IA(this.address,this.targetNetwork)}}var lv,uv;class z8e extends Jv{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");H(this,lv);H(this,uv);O(this,lv,n),O(this,uv,r)}get url(){return E(this,lv)}get processFunc(){return E(this,uv)}clone(){return this}}lv=new WeakMap,uv=new WeakMap;const mI=new Map;var gm,mm,ku;const ug=class ug{constructor(e,n){H(this,gm);H(this,mm);H(this,ku);O(this,gm,e),O(this,mm,Le(n)),O(this,ku,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,gm)}set name(e){O(this,gm,e)}get chainId(){return E(this,mm)}set chainId(e){O(this,mm,Le(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Le(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Le(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Le(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,ku).values())}attachPlugin(e){if(E(this,ku).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,ku).set(e.name,e.clone()),this}getPlugin(e){return E(this,ku).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new ug(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new SA;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Xf(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(H8e(),e==null)return ug.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=mI.get(e);if(n)return n();if(typeof e=="bigint")return new ug("unknown",e);W(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){W(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new ug(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new IA(e.ensAddress,e.ensNetwork)),n}W(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=mI.get(e);r&&W(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),mI.set(e,n)}};gm=new WeakMap,mm=new WeakMap,ku=new WeakMap;let Ka=ug;function mB(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function yB(t){return new z8e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:mB(a.maxFee,9),maxPriorityFeePerGas:mB(a.maxPriorityFee,9)}}catch(i){le(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let wB=!1;function H8e(){if(wB)return;wB=!0;function t(e,n,r){const s=function(){const i=new Ka(e,n);return r.ensNetwork!=null&&i.attachPlugin(new IA(null,r.ensNetwork)),i.attachPlugin(new SA),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ka.register(e,s),Ka.register(n,s),r.altNames&&r.altNames.forEach(i=>{Ka.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[yB("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[yB("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function ik(t){return JSON.parse(JSON.stringify(t))}var jc,to,Ou,La,ym,s_;class W8e{constructor(e){H(this,ym);H(this,jc);H(this,to);H(this,Ou);H(this,La);O(this,jc,e),O(this,to,null),O(this,Ou,4e3),O(this,La,-2)}get pollingInterval(){return E(this,Ou)}set pollingInterval(e){O(this,Ou,e)}start(){E(this,to)||(O(this,to,E(this,jc)._setTimeout(ee(this,ym,s_).bind(this),E(this,Ou))),ee(this,ym,s_).call(this))}stop(){E(this,to)&&(E(this,jc)._clearTimeout(E(this,to)),O(this,to,null))}pause(e){this.stop(),e&&O(this,La,-2)}resume(){this.start()}}jc=new WeakMap,to=new WeakMap,Ou=new WeakMap,La=new WeakMap,ym=new WeakSet,s_=async function(){try{const e=await E(this,jc).getBlockNumber();if(E(this,La)===-2){O(this,La,e);return}if(e!==E(this,La)){for(let n=E(this,La)+1;n<=e;n++){if(E(this,to)==null)return;await E(this,jc).emit("block",n)}O(this,La,e)}}catch{}E(this,to)!=null&&O(this,to,E(this,jc)._setTimeout(ee(this,ym,s_).bind(this),E(this,Ou)))};var Vh,Kh,Ru;class b3{constructor(e){H(this,Vh);H(this,Kh);H(this,Ru);O(this,Vh,e),O(this,Ru,!1),O(this,Kh,n=>{this._poll(n,E(this,Vh))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){E(this,Ru)||(O(this,Ru,!0),E(this,Kh).call(this,-2),E(this,Vh).on("block",E(this,Kh)))}stop(){E(this,Ru)&&(O(this,Ru,!1),E(this,Vh).off("block",E(this,Kh)))}pause(e){this.stop()}resume(){this.start()}}Vh=new WeakMap,Kh=new WeakMap,Ru=new WeakMap;var wm,Fc;class q8e extends b3{constructor(n,r){super(n);H(this,wm);H(this,Fc);O(this,wm,r),O(this,Fc,-2)}pause(n){n&&O(this,Fc,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(E(this,wm));s!=null&&(E(this,Fc)===-2?O(this,Fc,s.number):s.number>E(this,Fc)&&(r.emit(E(this,wm),s.number),O(this,Fc,s.number)))}}wm=new WeakMap,Fc=new WeakMap;var Mx;class G8e extends b3{constructor(n,r){super(n);H(this,Mx);O(this,Mx,ik(r))}async _poll(n,r){throw new Error("@TODO")}}Mx=new WeakMap;var bm;class V8e extends b3{constructor(n,r){super(n);H(this,bm);O(this,bm,r)}async _poll(n,r){const s=await r.getTransactionReceipt(E(this,bm));s&&r.emit(E(this,bm),s)}}bm=new WeakMap;var zc,vm,Em,Du,no,jx,_V;class v3{constructor(e,n){H(this,jx);H(this,zc);H(this,vm);H(this,Em);H(this,Du);H(this,no);O(this,zc,e),O(this,vm,ik(n)),O(this,Em,ee(this,jx,_V).bind(this)),O(this,Du,!1),O(this,no,-2)}start(){E(this,Du)||(O(this,Du,!0),E(this,no)===-2&&E(this,zc).getBlockNumber().then(e=>{O(this,no,e)}),E(this,zc).on("block",E(this,Em)))}stop(){E(this,Du)&&(O(this,Du,!1),E(this,zc).off("block",E(this,Em)))}pause(e){this.stop(),e&&O(this,no,-2)}resume(){this.start()}}zc=new WeakMap,vm=new WeakMap,Em=new WeakMap,Du=new WeakMap,no=new WeakMap,jx=new WeakSet,_V=async function(e){if(E(this,no)===-2)return;const n=ik(E(this,vm));n.fromBlock=E(this,no)+1,n.toBlock=e;const r=await E(this,zc).getLogs(n);if(r.length===0){E(this,no)<e-60&&O(this,no,e-60);return}for(const s of r)E(this,zc).emit(E(this,vm),s),O(this,no,s.blockNumber)};const K8e=BigInt(2),Q8e=10;function wE(t){return t&&typeof t.then=="function"}function i_(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class xV{constructor(e){Q(this,"name");Qe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function J8e(t){return JSON.parse(JSON.stringify(t))}function ok(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function yI(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(hn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:i_("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:i_("orphan",n),filter:J8e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?ok(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{hn(a)?s.push(a):i.push((async()=>{s.push(await Cs(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=ok(s.map(a=>a.toLowerCase()))}return{filter:r,tag:i_("event",r),type:"event"}}W(!1,"unknown ProviderEvent","event",t)}function wI(){return new Date().getTime()}const Y8e={cacheTimeout:250,pollingInterval:4e3};var os,$u,as,_m,Si,Qh,Uu,Hc,dv,ro,xm,Cm,mt,vi,ak,ck,L0,lk,M0,o_;class Z8e{constructor(e,n){H(this,mt);H(this,os);H(this,$u);H(this,as);H(this,_m);H(this,Si);H(this,Qh);H(this,Uu);H(this,Hc);H(this,dv);H(this,ro);H(this,xm);H(this,Cm);if(O(this,Cm,Object.assign({},Y8e,n||{})),e==="any")O(this,Qh,!0),O(this,Si,null);else if(e){const r=Ka.from(e);O(this,Qh,!1),O(this,Si,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else O(this,Qh,!1),O(this,Si,null);O(this,Hc,-1),O(this,Uu,new Map),O(this,os,new Map),O(this,$u,new Map),O(this,as,null),O(this,_m,!1),O(this,dv,1),O(this,ro,new Map),O(this,xm,!1)}get pollingInterval(){return E(this,Cm).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,$u).values())}attachPlugin(e){if(E(this,$u).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,$u).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,$u).get(e)||null}get disableCcipRead(){return E(this,xm)}set disableCcipRead(e){O(this,xm,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Cd(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}le(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}le(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new y8e(U8e(e),this)}_wrapLog(e,n){return new Kv(D8e(e),this)}_wrapTransactionReceipt(e,n){return new cV(j8e(e),this)}_wrapTransactionResponse(e,n){return new Qb(EV(e),this)}_detectNetwork(){le(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){le(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=lt(await ee(this,mt,vi).call(this,{method:"getBlockNumber"}),"%response");return E(this,Hc)>=0&&O(this,Hc,e),e}_getAddress(e){return Cs(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(hn(e))return hn(e,32)?e:Jo(e);if(typeof e=="bigint"&&(e=lt(e,"blockTag")),typeof e=="number")return e>=0?Jo(e):E(this,Hc)>=0?Jo(E(this,Hc)+e):this.getBlockNumber().then(n=>Jo(n+e));W(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?ok(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=kx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Cs(n[s],this);wE(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);wE(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(E(this,Si)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw E(this,Si)===s&&O(this,Si,null),i}})();return O(this,Si,s),(await s).clone()}const e=E(this,Si),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(E(this,Qh)?(this.emit("network",r,n),E(this,Si)===e&&O(this,Si,Promise.resolve(r))):le(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await bs({_block:ee(this,mt,lk).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await ee(this,mt,vi).call(this,{method:"getGasPrice"});return Le(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await ee(this,mt,vi).call(this,{method:"getPriorityFee"});return Le(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*K8e+c),new dB(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Cd(r.url),i=await r.processFunc(n,this,s);return new dB(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return wE(n)&&(n=await n),Le(await ee(this,mt,vi).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await bs({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ee(this,mt,ck).call(this,ee(this,mt,ak).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Le(await ee(this,mt,L0).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return lt(await ee(this,mt,L0).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Ce(await ee(this,mt,L0).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Le(n,"position");return Ce(await ee(this,mt,L0).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await bs({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Cx.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await bs({network:this.getNetwork(),params:ee(this,mt,lk).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await bs({network:this.getNetwork(),params:ee(this,mt,vi).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await bs({network:this.getNetwork(),params:ee(this,mt,vi).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await ee(this,mt,vi).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await bs({network:this.getNetwork(),result:ee(this,mt,vi).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Ce(n)}async getLogs(e){let n=this._getFilter(e);wE(n)&&(n=await n);const{network:r,params:s}=await bs({network:this.getNetwork(),params:ee(this,mt,vi).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){le(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Rx.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Ht(e);const n=XP(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Rx.getEnsAddress(this),i=await new Ng(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===Fb)return null;const a=await new Ng(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if($r(r,"BAD_DATA")&&r.value==="0x"||$r(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(vn("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){le(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=E(this,ro).get(e);n&&(n.timer&&clearTimeout(n.timer),E(this,ro).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=El(this,dv)._++,s=()=>{E(this,ro).delete(r),e()};if(this.paused)E(this,ro).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);E(this,ro).set(r,{timer:i,func:s,time:wI()})}return r}_forEachSubscriber(e){for(const n of E(this,os).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new xV(e.type);case"block":{const n=new W8e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new q8e(this,e.type);case"event":return new v3(this,e.filter);case"transaction":return new V8e(this,e.hash);case"orphan":return new G8e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of E(this,os).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),E(this,as)!=null&&n.pause(E(this,as));break}}async on(e,n){const r=await ee(this,mt,o_).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,E(this,as)!=null&&r.subscriber.pause(E(this,as))),this}async once(e,n){const r=await ee(this,mt,o_).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,E(this,as)!=null&&r.subscriber.pause(E(this,as))),this}async emit(e,...n){const r=await ee(this,mt,M0).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Lq(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),E(this,os).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await ee(this,mt,M0).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of E(this,os).values())n+=r.length;return n}async listeners(e){if(e){const r=await ee(this,mt,M0).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of E(this,os).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await ee(this,mt,M0).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),E(this,os).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await ee(this,mt,o_).call(this,e);r&&s.stop(),E(this,os).delete(n)}else for(const[n,{started:r,subscriber:s}]of E(this,os))r&&s.stop(),E(this,os).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return E(this,_m)}destroy(){this.removeAllListeners();for(const e of E(this,ro).keys())this._clearTimeout(e);O(this,_m,!0)}get paused(){return E(this,as)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(O(this,Hc,-1),E(this,as)!=null){if(E(this,as)==!!e)return;le(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),O(this,as,!!e);for(const n of E(this,ro).values())n.timer&&clearTimeout(n.timer),n.time=wI()-n.time}resume(){if(E(this,as)!=null){this._forEachSubscriber(e=>e.resume()),O(this,as,null);for(const e of E(this,ro).values()){let n=e.time;n<0&&(n=0),e.time=wI(),setTimeout(e.func,n)}}}}os=new WeakMap,$u=new WeakMap,as=new WeakMap,_m=new WeakMap,Si=new WeakMap,Qh=new WeakMap,Uu=new WeakMap,Hc=new WeakMap,dv=new WeakMap,ro=new WeakMap,xm=new WeakMap,Cm=new WeakMap,mt=new WeakSet,vi=async function(e){const n=E(this,Cm).cacheTimeout;if(n<0)return await this._perform(e);const r=i_(e.method,e);let s=E(this,Uu).get(r);return s||(s=this._perform(e),E(this,Uu).set(r,s),setTimeout(()=>{E(this,Uu).get(r)===s&&E(this,Uu).delete(r)},n)),await s},ak=async function(e,n,r){le(r<Q8e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=kx(e);try{return Ce(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&n3(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Rn(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Cs(s.to,this);let c;try{c=r5e(Rn(i.data,4))}catch(d){le(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}le(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);le(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Un([c.selector,n5e([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await ee(this,mt,ak).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},ck=async function(e){const{value:n}=await bs({network:this.getNetwork(),value:e});return n},L0=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await ee(this,mt,ck).call(this,ee(this,mt,vi).call(this,Object.assign(e,{address:s,blockTag:i})))},lk=async function(e,n){if(hn(e,32))return await ee(this,mt,vi).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ee(this,mt,vi).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},M0=async function(e,n){let r=await yI(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await yI({orphan:"drop-log",log:n[0]},this)),E(this,os).get(r.tag)||null},o_=async function(e){const n=await yI(e,this),r=n.tag;let s=E(this,os).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,os).set(r,s)),s};function X8e(t,e){try{const n=uk(t,e);if(n)return Ex(n)}catch{}return null}function uk(t,e){if(t==="0x")return null;try{const n=lt(Rn(t,e,e+32)),r=lt(Rn(t,n,n+32));return Rn(t,n+32,n+32+r)}catch{}return null}function bB(t){const e=ar(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function e5e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const t5e=new Uint8Array([]);function n5e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(t5e),n+=32;for(let r=0;r<t.length;r++){const s=ht(t[r]);e[r]=bB(n),e.push(bB(s.length)),e.push(e5e(s)),n+=32+Math.ceil(s.length/32)*32}return Un(e)}const vB="0x0000000000000000000000000000000000000000000000000000000000000000";function r5e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};le(Ag(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Rn(t,0,32);le(Rn(n,0,12)===Rn(vB,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Rn(n,12);try{const r=[],s=lt(Rn(t,32,64)),i=lt(Rn(t,s,s+32)),o=Rn(t,s+32);for(let a=0;a<i;a++){const c=X8e(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{le(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=uk(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{le(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}le(Rn(t,100,128)===Rn(vB,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Rn(t,96,100);try{const r=uk(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{le(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function qd(t,e){if(t.provider)return t.provider;le(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function EB(t,e){let n=kx(e);if(n.to!=null&&(n.to=Cs(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Cs(r,t)]).then(([s,i])=>(W(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await bs(n)}class s5e{constructor(e){Q(this,"provider");Qe(this,{provider:e||null})}async getNonce(e){return qd(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await EB(this,e)}async populateTransaction(e){const n=qd(this,"populateTransaction"),r=await EB(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Le(r.chainId);W(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?W(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&W(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();le(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(le(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):le(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await bs(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await qd(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return qd(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return qd(this,"call").call(await this.populateCall(e))}async resolveName(e){return await qd(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=qd(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Cx.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){le(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function i5e(t){return JSON.parse(JSON.stringify(t))}var ys,Ma,Jh,Bu,Yh,Am,Sd,dk,hk;class CV{constructor(e){H(this,Sd);H(this,ys);H(this,Ma);H(this,Jh);H(this,Bu);H(this,Yh);H(this,Am);O(this,ys,e),O(this,Ma,null),O(this,Jh,ee(this,Sd,dk).bind(this)),O(this,Bu,!1),O(this,Yh,null),O(this,Am,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,Bu)||(O(this,Bu,!0),ee(this,Sd,dk).call(this,-2))}stop(){E(this,Bu)&&(O(this,Bu,!1),O(this,Am,!0),ee(this,Sd,hk).call(this),E(this,ys).off("block",E(this,Jh)))}pause(e){e&&ee(this,Sd,hk).call(this),E(this,ys).off("block",E(this,Jh))}resume(){this.start()}}ys=new WeakMap,Ma=new WeakMap,Jh=new WeakMap,Bu=new WeakMap,Yh=new WeakMap,Am=new WeakMap,Sd=new WeakSet,dk=async function(e){try{E(this,Ma)==null&&O(this,Ma,this._subscribe(E(this,ys)));let n=null;try{n=await E(this,Ma)}catch(i){if(!$r(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){O(this,Ma,null),E(this,ys)._recoverSubscriber(this,this._recover(E(this,ys)));return}const r=await E(this,ys).getNetwork();if(E(this,Yh)||O(this,Yh,r),E(this,Yh).chainId!==r.chainId)throw new Error("chaid changed");if(E(this,Am))return;const s=await E(this,ys).send("eth_getFilterChanges",[n]);await this._emitResults(E(this,ys),s)}catch(n){console.log("@TODO",n)}E(this,ys).once("block",E(this,Jh))},hk=function(){const e=E(this,Ma);e&&(O(this,Ma,null),e.then(n=>{E(this,ys).destroyed||E(this,ys).send("eth_uninstallFilter",[n])}))};var Zh;class o5e extends CV{constructor(n,r){super(n);H(this,Zh);O(this,Zh,i5e(r))}_recover(n){return new v3(n,E(this,Zh))}async _subscribe(n){return await n.send("eth_newFilter",[E(this,Zh)])}async _emitResults(n,r){for(const s of r)n.emit(E(this,Zh),n._wrapLog(s,n._network))}}Zh=new WeakMap;class a5e extends CV{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const c5e="bigint,boolean,function,number,string,symbol".split(/,/g);function a_(t){if(t==null||c5e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(a_);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function l5e(t){return new Promise(e=>{setTimeout(e,t)})}function Dp(t){return t&&t.toLowerCase()}function _B(t){return t&&typeof t.pollingInterval=="number"}const AV={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class bI extends s5e{constructor(n,r){super(n);Q(this,"address");r=Ht(r),Qe(this,{address:r})}connect(n){le(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=a_(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Cs(o,this.provider);W(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Cs(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if($r(u,"CANCELLED")||$r(u,"BAD_DATA")||$r(u,"NETWORK_ERROR")||$r(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if($r(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",vn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=a_(n);if(r.from){const i=await Cs(r.from,this.provider);W(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?rl(n):n;return await this.provider.send("personal_sign",[Ce(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=a_(s),o=await Px.resolveNames(n,r,i,async a=>{const c=await Cs(a);return W(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Px.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?rl(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ce(r)])}}var Xh,Sm,Wc,ja,Wo,so,Ks,hv,fk;class u5e extends Z8e{constructor(n,r){super(n,r);H(this,hv);H(this,Xh);H(this,Sm);H(this,Wc);H(this,ja);H(this,Wo);H(this,so);H(this,Ks);O(this,Sm,1),O(this,Xh,Object.assign({},AV,r||{})),O(this,Wc,[]),O(this,ja,null),O(this,so,null),O(this,Ks,null);{let i=null;const o=new Promise(a=>{i=a});O(this,Wo,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(W(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&O(this,so,Ka.from(n))):s&&(W(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),O(this,so,s))}_getOption(n){return E(this,Xh)[n]}get _network(){return le(E(this,so),"network is not available yet","NETWORK_ERROR"),E(this,so)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Le(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(E(this,so))return E(this,so)}else return n;return E(this,Ks)?await E(this,Ks):this.ready?(O(this,Ks,(async()=>{try{const r=Ka.from(Le(await this.send("eth_chainId",[])));return O(this,Ks,null),r}catch(r){throw O(this,Ks,null),r}})()),await E(this,Ks)):(O(this,Ks,(async()=>{const r={id:El(this,Sm)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],O(this,Ks,null)}catch(i){throw O(this,Ks,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ka.from(Le(s.result));throw this.getRpcError(r,s)})()),await E(this,Ks))}_start(){E(this,Wo)==null||E(this,Wo).resolve==null||(E(this,Wo).resolve(),O(this,Wo,null),(async()=>{for(;E(this,so)==null&&!this.destroyed;)try{O(this,so,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",vn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await l5e(1e3)}ee(this,hv,fk).call(this)})())}async _waitUntilReady(){if(E(this,Wo)!=null)return await E(this,Wo).promise}_getSubscriber(n){return n.type==="pending"?new a5e(this):n.type==="event"?this._getOption("polling")?new v3(this,n.filter):new o5e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new xV("orphan"):super._getSubscriber(n)}get ready(){return E(this,Wo)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Jo(Le(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Ce(n[s]))}),n.accessList&&(r.accessList=Xf(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=IG(s);return{address:i.address,nonce:Jo(i.nonce),chainId:Jo(i.chainId),yParity:Jo(i.signature.yParity),r:Jo(i.signature.r),s:Jo(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Dp(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Dp(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Dp(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Dp(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Dp):n.filter.address=Dp(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return vn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return vn("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=pk(i),l=Kb.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(h5e(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return vn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return vn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return vn("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return vn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return vn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?vn("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):vn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(vn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=El(this,Sm)._++,i=new Promise((o,a)=>{E(this,Wc).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return ee(this,hv,fk).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new bI(this,i[n])}const{accounts:s}=await bs({network:this.getNetwork(),accounts:r});n=Ht(n);for(const i of s)if(Ht(i)===n)return new bI(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new bI(this,r))}destroy(){E(this,ja)&&(clearTimeout(E(this,ja)),O(this,ja,null));for(const{payload:n,reject:r}of E(this,Wc))r(vn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));O(this,Wc,[]),super.destroy()}}Xh=new WeakMap,Sm=new WeakMap,Wc=new WeakMap,ja=new WeakMap,Wo=new WeakMap,so=new WeakMap,Ks=new WeakMap,hv=new WeakSet,fk=function(){if(E(this,ja))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");O(this,ja,setTimeout(()=>{O(this,ja,null);const r=E(this,Wc);for(O(this,Wc,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==E(this,Xh).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>E(this,Xh).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(vn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=vn("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Lu;class d5e extends u5e{constructor(n,r){super(n,r);H(this,Lu);let s=this._getOption("pollingInterval");s==null&&(s=AV.pollingInterval),O(this,Lu,s)}_getSubscriber(n){const r=super._getSubscriber(n);return _B(r)&&(r.pollingInterval=E(this,Lu)),r}get pollingInterval(){return E(this,Lu)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");O(this,Lu,n),this._forEachSubscriber(r=>{_B(r)&&(r.pollingInterval=E(this,Lu))})}}Lu=new WeakMap;function pk(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&hn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=pk(t[e]);if(n)return n}return null}if(typeof t=="string")try{return pk(JSON.parse(t))}catch{}return null}function gk(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)gk(t[n],e);if(typeof t=="string")try{return gk(JSON.parse(t),e)}catch{}}}function h5e(t){const e=[];return gk(t,e),e}var Im,Tm;const ch=class ch extends d5e{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});W(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);H(this,Im);H(this,Tm);O(this,Tm,null),s&&s.providerInfo&&O(this,Tm,s.providerInfo),O(this,Im,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return E(this,Tm)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){W(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await E(this,Im).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await E(this,Im).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new ch(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new ch(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof ch)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new ch(p,void 0,{providerInfo:g}))}else a(vn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new ch(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Im=new WeakMap,Tm=new WeakMap;let mk=ch;const xB="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",f5e="https://roxwocgknkiqnsgiojgz.supabase.co",p5e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",Tr=t3(f5e,p5e),CB={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},AB=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],SV=()=>{var _o;const{address:t}=Av(),[e,n]=D.useState(null),[r,s]=D.useState(null),[i,o]=D.useState(null),[a,c]=D.useState(!1),[l,u]=D.useState([]),[d,h]=D.useState("Loading..."),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState("0.1"),[b,x]=D.useState(""),[_,C]=D.useState(!0),[S,T]=D.useState(""),[A,P]=D.useState(!1),[R,j]=D.useState(!1),[z,V]=D.useState(!1),[I,N]=D.useState(AB),[L,U]=D.useState(null),[$,M]=D.useState([]),[q,Z]=D.useState(null),ie=D.useRef(null),re=D.useRef(0),ce=D.useRef(null),ge=D.useRef(null),J=D.useRef(null),te=D.useCallback(async()=>{try{if(!window.ethereum)return h("No wallet detected"),!1;const{chainId:ue}=await window.ethereum.request({method:"eth_chainId"});if(ue!=="0x7c8")try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7c8"}]})}catch(He){if(typeof He=="object"&&He&&"code"in He&&He.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7c8",chainName:"Sanko Testnet",rpcUrls:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"],nativeCurrency:{name:"tDMT",symbol:"tDMT",decimals:18},blockExplorerUrls:["https://explorer.testnet.sanko.xyz"]}]});else throw new Error("Please switch to Sanko Testnet")}return!0}catch(ue){return console.error("Network switch failed:",ue),h("Please switch to Sanko Testnet"),!1}},[]),oe=D.useCallback(async()=>{try{if(!window.ethereum)return null;const He=await new mk(window.ethereum).getSigner();return new Ng(xB,["function playerToGame(address) view returns (bytes6)","function createGame(bytes6) payable","function joinGame(bytes6) payable","function endGame(bytes6, address)","function cancelGame(bytes6)","function games(bytes6) view returns (address, address, bool, address, bytes6, uint256)","function MIN_WAGER() view returns (uint256)","function MAX_WAGER() view returns (uint256)"],He)}catch(ue){return console.error("Failed to connect to contract:",ue),null}},[]),se=D.useCallback(()=>{ge.current&&window.clearInterval(ge.current),ge.current=window.setInterval(async()=>{try{let ue=new Date(Date.now()-18e5).toISOString();new Date(ue).getTime()>Date.now()&&(console.warn("[Supabase] expiryThreshold was in the future, falling back to now:",ue),ue=new Date().toISOString());const{data:He,error:pt}=await Tr.from("chess_games").select("game_id, blue_player_id").eq("game_state","waiting").is("red_player_id",null).lte("created_at",ue).eq("chain","sanko");if(pt){console.error("Supabase expiry query error:",pt.message);return}for(const gt of He||[]){const rt=await oe();if(rt){const Je=ri(Ce("0x"+gt.game_id.toLowerCase()),6);await rt.cancelGame(Je),await Tr.from("chess_games").update({game_state:"cancelled",updated_at:new Date().toISOString()}).eq("game_id",gt.game_id)}}await Ge()}catch(ue){console.error("Error checking game expiry:",ue)}},60*1e3)},[oe]),me=D.useCallback(async()=>{V(!0);try{if(!t){h("Please connect your wallet to resync");return}console.log("Attempting to resync game state"),await je(),h("Game state resynced successfully")}catch(ue){console.error("forceMultiplayerSync failed:",ue),h("Resync failed: "+(ue instanceof Error?ue.message:"Unknown error"))}finally{V(!1)}},[t]),je=D.useCallback(async(ue=5,He=1e3)=>{if(!t)return h("Please connect your wallet"),!1;if(Date.now()-re.current<1e3)return!1;re.current=Date.now();let pt=1;for(;pt<=ue;){try{let gt=null;const rt=await oe();if(rt){if(await window.ethereum.request({method:"eth_chainId"})!=="0x7c8")return h("Please switch to Sanko Testnet"),!1;const Zn=await rt.playerToGame(t);Zn!=="0x000000000000"&&Zn!==""&&(gt=Ce(Zn).slice(2).toUpperCase())}if(!gt){const{data:Vr,error:Zn}=await Tr.from("chess_games").select("game_id").eq("chain","sanko").eq("game_state","active").or(`blue_player_id.eq.${t},red_player_id.eq.${t}`);if(Zn)throw new Error(`Supabase error: ${Zn.message}`);if(!(Vr!=null&&Vr.length))return Ct(),!1;gt=Vr[0].game_id}if(ce.current===gt)return!1;ce.current=gt;const{data:Je,error:Ln}=await Tr.from("chess_games").select("*").eq("game_id",gt).eq("chain","sanko").or(`blue_player_id.eq.${t},red_player_id.eq.${t}`).single();if(Ln)throw new Error(`Supabase query error: ${Ln.message}`);return Je&&(Je.game_state==="active"||Je.game_state==="waiting")?(o(Je),s(t===Je.blue_player_id?"blue":"red"),n(gt),c(Je.game_state==="waiting"),h(pn(Je)?"Your turn":"Opponent's turn"),gt&&await Bt(gt),!0):(Ct(),!1)}catch(gt){gt instanceof Error&&(console.error(`checkPlayerGameState attempt ${pt} failed:`,gt.message),pt<ue?await new Promise(rt=>window.setTimeout(rt,He*Math.pow(2,pt-1))):h("Failed to load game. Please reconnect wallet."))}pt++}return!1},[t,oe]),ve=D.useCallback(async()=>{const ue=(-99990013e3).toString().replace(/[018]/g,pt=>(parseInt(pt)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(pt)/4).toString(16)).slice(0,6).toUpperCase(),{data:He}=await Tr.from("chess_games").select("game_id").eq("game_id",ue).single();return He?ve():ue},[]),_e=D.useCallback(async()=>{if(!A){P(!0),p(!0),h("Creating game...");try{if(!t)throw new Error("Wallet not connected");if(!await te())return;const ue=await oe();if(!ue)throw new Error("Failed to connect to contract");const He=rI(await ue.MIN_WAGER()),pt=rI(await ue.MAX_WAGER());if(parseFloat(w)<parseFloat(He)||parseFloat(w)>parseFloat(pt))throw new Error(`Wager must be between ${He} and ${pt} tDMT`);let gt=await ue.playerToGame(t);if(gt!=="0x000000000000"&&gt!==""&&(await xn(),gt=await ue.playerToGame(t),gt!=="0x000000000000"&&gt!=="")){const Yv=Ce(gt).slice(2).toUpperCase(),TA=ri(Ce("0x"+Yv.toLowerCase()),6);await ue.cancelGame(TA),await qt(Yv)}const rt=await ve(),Je=ri(Ce("0x"+rt.toLowerCase()),6),Ln=v6(w),{data:Vr}=await Tr.from("chess_games").select("game_id").eq("game_id",rt).eq("game_state","waiting");if(Vr!=null&&Vr.length)throw new Error("Invite code already exists");const{data:Zn,error:tp}=await Tr.from("chess_games").insert({game_id:rt,blue_player_id:t,red_player_id:null,board:{positions:JSON.parse(JSON.stringify(AB)),piece_state:{}},current_player:"blue",game_state:"waiting",bet_amount:w,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_public:_,game_title:b||null,chain:"sanko",contract_address:xB}).select().single();if(tp)throw new Error(`Supabase insert failed: ${tp.message}`);return await ue.createGame(Je,{value:Ln}),n(rt),s("blue"),o(Zn),c(!0),T(rt),y(!1),h("Waiting for opponent..."),await Bt(rt),await Ge(),alert(`Game created with wager ${w} tDMT`),rt}catch(ue){return ue instanceof Error&&(console.error("Create game failed:",ue.message),P(!1),c(!1),h(`Failed to create game: ${ue.message}`),alert(`Failed to create game: ${ue.message}`)),!1}finally{p(!1)}}},[t,w,b,_,A,te,oe,ve]),Fe=D.useCallback(async(ue,He=3,pt=2e3)=>{p(!0),h("Joining game...");let gt=1;for(;gt<=He;){try{if(!t)throw new Error("Wallet not connected");if(!await te())return;const rt=await oe();if(!rt)throw new Error("Failed to connect to contract");const{data:Je,error:Ln}=await Tr.from("chess_games").select("bet_amount").eq("game_id",ue).single();if(Ln)throw new Error(`Failed to fetch game: ${Ln.message}`);const Vr=typeof Je.bet_amount=="string"?Je.bet_amount:String(Je.bet_amount),Zn=v6(Vr),tp=ri(Ce("0x"+ue.toLowerCase()),6);return await rt.joinGame(tp,{value:Zn}),await je(),h("Joined game successfully!"),!0}catch(rt){if(rt instanceof Error){if(console.error(`Join attempt ${gt} failed:`,rt.message),gt===He)return h(`Failed to join game: ${rt.message}`),!1;await new Promise(Je=>window.setTimeout(Je,pt))}}gt++}return!1},[t,te,oe,je]),Ge=D.useCallback(async()=>{try{const{data:ue,error:He}=await Tr.from("chess_games").select("*").eq("chain","sanko").eq("game_state","waiting").eq("is_public",!0).order("created_at",{ascending:!1});if(He){console.error("Error fetching games:",He);return}u(ue||[])}catch(ue){console.error("Error fetching games:",ue)}},[]),Bt=D.useCallback(async ue=>{ie.current&&Tr.removeChannel(ie.current),ie.current=Tr.channel(`chess_game_${ue}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chess_games",filter:`game_id=eq.${ue}`},He=>{const pt=He.new;pt&&(o(pt),c(pt.game_state==="waiting"),h(pn(pt)?"Your turn":"Opponent's turn"))}).subscribe()},[]),xn=D.useCallback(async()=>{try{if(e){const ue=await oe();if(ue){const He=ri(Ce("0x"+e.toLowerCase()),6);await ue.cancelGame(He)}await qt(e)}Ct()}catch(ue){console.error("Error leaving game:",ue)}},[e,oe]),qt=D.useCallback(async ue=>{try{await Tr.from("chess_games").delete().eq("game_id",ue).eq("game_state","waiting")}catch(He){console.error(`Failed to delete stale game ${ue}:`,He)}},[]),Ct=D.useCallback(()=>{n(null),s(null),o(null),c(!1),T(""),P(!1),y(!1),h("Ready to play"),ie.current&&(Tr.removeChannel(ie.current),ie.current=null)},[]),pn=D.useCallback(ue=>!t||!r?!1:ue.current_player.toLowerCase()===r,[t,r]),qr=D.useCallback(ue=>{try{return rI(ue)+" tDMT"}catch{return ue+" wei"}},[]),ga=ue=>ue?ue>="a"&&ue<="z"?"blue":"red":"blue",ma=(ue,He)=>{const pt=I[ue][He],gt=(L==null?void 0:L.row)===ue&&(L==null?void 0:L.col)===He,rt=$.some(Ln=>Ln.row===ue&&Ln.col===He),Je=q&&(q.from.row===ue&&q.from.col===He||q.to.row===ue&&q.to.col===He);return m.jsxs("div",{className:`square ${gt?"selected":""} ${rt?"legal-move":""} ${Je?"last-move":""}`,onClick:()=>Yn(ue,He),children:[pt&&m.jsx("div",{className:"piece",style:{backgroundImage:CB[pt]?`url(${CB[pt]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),rt&&m.jsx("div",{className:"legal-move-indicator"})]},`${ue}-${He}`)},Yn=(ue,He)=>{if(!i||a||R)return;const pt=I[ue][He];if(pn(i)){if(L)L.row===ue&&L.col===He?(U(null),M([])):(Gr(L.row,L.col,ue,He),U(null),M([]));else if(pt&&ga(pt)===r){U({row:ue,col:He});const rt=[];for(let Je=0;Je<8;Je++)for(let Ln=0;Ln<8;Ln++)(Je!==ue||Ln!==He)&&rt.push({row:Je,col:Ln});M(rt)}}},Gr=async(ue,He,pt,gt)=>{if(!(!i||!e||R)){j(!0);try{const rt=I.map(Vr=>[...Vr]),Je=rt[ue][He];rt[pt][gt]=Je,rt[ue][He]=null,N(rt),Z({from:{row:ue,col:He},to:{row:pt,col:gt}});const{error:Ln}=await Tr.from("chess_games").update({board:{positions:rt,piece_state:{}},current_player:i.current_player==="blue"?"red":"blue",last_move:{piece:Je,from_row:ue,from_col:He,end_row:pt,end_col:gt},updated_at:new Date().toISOString()}).eq("game_id",e);if(Ln)throw Ln}catch(rt){console.error("Move failed:",rt),N(I)}finally{j(!1)}}};return D.useEffect(()=>{t&&(je(),Ge())},[t,je,Ge]),D.useEffect(()=>{var ue;(ue=i==null?void 0:i.board)!=null&&ue.positions&&N(i.board.positions)},[(_o=i==null?void 0:i.board)==null?void 0:_o.positions]),D.useEffect(()=>{const ue=Tr.channel("chess_games_changes").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>{Ge()}).subscribe();return()=>{Tr.removeChannel(ue)}},[Ge]),D.useEffect(()=>(se(),()=>{ge.current&&window.clearInterval(ge.current)}),[se]),D.useEffect(()=>()=>{ie.current&&Tr.removeChannel(ie.current),ge.current&&window.clearInterval(ge.current),J.current&&window.clearTimeout(J.current)},[]),i&&!a?m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Multiplayer Game"}),m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:i.current_player==="blue"?"current-blue":"current-red",children:["Current: ",i.current_player==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:qr(i.bet_amount)}),m.jsx("span",{className:"mode-play",children:"Mode: PvP"}),m.jsxs("span",{children:["Game ID: ",e]})]})}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:Array.from({length:8},(ue,He)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(pt,gt)=>ma(He,gt))},He))})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:xn,children:"Leave Game"}),m.jsx("button",{onClick:me,disabled:z,children:z?"Syncing...":"Force Sync"})]})]})]}):a?m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Waiting for Opponent"}),m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:qr((i==null?void 0:i.bet_amount)||"0")}),m.jsxs("span",{children:["Status: ",d]})]})}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#666",fontSize:"16px",textAlign:"center",padding:"20px"},children:[m.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},children:["Game Code: ",S]}),m.jsx("div",{style:{marginBottom:"20px"},children:"Share this code with your opponent"}),m.jsx("div",{style:{fontSize:"14px"},children:"Waiting for opponent to join..."})]})})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:xn,children:"Cancel Game"}),m.jsx("button",{onClick:me,disabled:z,children:z?"Syncing...":"Force Sync"})]})]})]}):m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"🏁 Multiplayer Chess"}),m.jsx("div",{className:"game-info",children:m.jsx("div",{className:"game-info-bar",children:m.jsx("span",{children:d})})}),g?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px"},children:[m.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"18px",textAlign:"center"},children:"Create New Game"}),m.jsxs("div",{style:{width:"100%",maxWidth:"300px"},children:[m.jsxs("div",{style:{marginBottom:"15px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Wager Amount (tDMT):"}),m.jsx("input",{type:"number",min:"0.1",max:"1000",step:"0.1",value:w,onChange:ue=>v(ue.target.value),placeholder:"0.1",style:{width:"100%",padding:"8px",border:"1px solid rgba(0,0,0,0.2)",borderRadius:"4px",fontSize:"14px"}})]}),m.jsxs("div",{style:{marginBottom:"15px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Game Title (optional):"}),m.jsx("input",{type:"text",value:b,onChange:ue=>x(ue.target.value),placeholder:"Enter game title...",maxLength:50,style:{width:"100%",padding:"8px",border:"1px solid rgba(0,0,0,0.2)",borderRadius:"4px",fontSize:"14px"}})]}),m.jsx("div",{style:{marginBottom:"20px"},children:m.jsxs("label",{style:{fontSize:"14px"},children:[m.jsx("input",{type:"checkbox",checked:_,onChange:ue=>C(ue.target.checked),style:{marginRight:"8px"}}),"Public Game"]})})]})]})})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:_e,disabled:f||!t,className:"mode-btn",children:f?"Creating...":"Create Game"}),m.jsx("button",{onClick:()=>y(!1),disabled:f,className:"mode-btn",children:"Cancel"})]})]}):m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px"},children:[m.jsxs("h4",{style:{margin:"0 0 20px 0",fontSize:"18px",textAlign:"center"},children:["Open Games (",l.length,")"]}),l.length===0?m.jsx("p",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:"No open games available"}):m.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",width:"100%",maxWidth:"400px"},children:l.map(ue=>m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"rgba(0,0,0,0.05)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"4px",marginBottom:"8px"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{fontWeight:"bold",fontSize:"14px"},children:["#",ue.game_id]}),m.jsx("div",{style:{fontSize:"12px"},children:qr(ue.bet_amount)}),ue.game_title&&m.jsx("div",{style:{fontSize:"11px",fontStyle:"italic"},children:ue.game_title})]}),m.jsx("button",{onClick:()=>Fe(ue.game_id),disabled:f||!t,className:"mode-btn",style:{fontSize:"12px",padding:"6px 12px"},children:f?"Joining...":"Join"})]},ue.game_id))})]})})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>y(!0),disabled:f||!t,className:"mode-btn",children:"Create New Game"}),m.jsx("button",{onClick:me,disabled:z,children:z?"Syncing...":"Force Sync"})]})]}),!t&&m.jsx("div",{style:{textAlign:"center",padding:"20px",background:"rgba(255,255,0,0.1)",border:"1px solid rgba(255,255,0,0.3)",borderRadius:"4px",marginTop:"20px",fontSize:"14px"},children:"Please connect your wallet to play multiplayer chess"})]})},IV="https://roxwocgknkiqnsgiojgz.supabase.co",g5e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",m5e=t3(IV,g5e),vI=t3(IV,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMDc2MzExMiwiZXhwIjoyMDQ2MzM5MTEyfQ.US6YTQfWVWNAfmEopBpD580jsaevKv_Ev7dGFeqFptA"),y5e={AI:"ai"},bE={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},SB=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],w5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],b5e=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&window.Stockfish){const c=window.Stockfish;c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1})}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var f;console.log("[DEBUG] Stockfish message:",h),typeof h=="string"&&h.startsWith("bestmove ")&&(l=h.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(f=n.current)==null||f.removeMessageListener(d),c(l)))};try{n.current.addMessageListener(d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeMessageListener(d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},v5e=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},E5e=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=Av(),[s,i]=D.useState(y5e.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(SB))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[y,w]=D.useState("Connect wallet to play"),[v,b]=D.useState([]),[x,_]=D.useState([]),[C,S]=D.useState([]),[T,A]=D.useState(null),[P,R]=D.useState(!1),[j,z]=D.useState(!1),[V,I]=D.useState(null),[N,L]=D.useState(null),[U]=D.useState(""),[$]=D.useState(.1),[M,q]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Z=D.useRef(null),ie=D.useRef(!1),re=D.useRef(o),ce=D.useRef(null),ge=D.useRef(null),J=D.useRef(!1),te=D.useRef(!1),[oe,se]=D.useState(!1),[me,je]=D.useState(!1),[ve,_e]=D.useState(!1),[Fe,Ge]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Bt=()=>{Ge(F=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!F)),!F))},{stockfishReady:xn}=b5e(),{getOpeningData:qt}=v5e(),[Ct,pn]=D.useState("loading"),[qr,ga]=D.useState(!1),[ma,Yn]=D.useState([]),[Gr,_o]=D.useState(!1),[ue,He]=D.useState("/images/chessboard1.png"),pt=()=>{const F=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],G=Math.floor(Math.random()*F.length),K=F[G];return console.log("[DEBUG] Random chessboard selected:",K,"(index:",G,")"),K};D.useEffect(()=>{if(xn)pn("ready");else{const F=window.setTimeout(()=>{xn||(pn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(F)}},[xn]),D.useEffect(()=>{re.current=o},[o]),D.useEffect(()=>{r?w("Select game mode"):(w("Connect wallet to play"),R(!1))},[r]),D.useEffect(()=>(!Z.current&&typeof Worker<"u"&&(Z.current=new Worker("/aiWorker.js"),Z.current.onmessage=F=>{console.log("[DEBUG] AI worker response received:",F.data);const{move:G,nodes:K}=F.data;G&&ie.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",G),console.log("[DEBUG] AI searched",K,"nodes"),ie.current=!1,ge.current&&(window.clearTimeout(ge.current),ge.current=null),ce.current&&ce.current(G.from,G.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},Z.current.onerror=F=>{console.error("[DEBUG] AI worker error:",F),w("AI worker error - using fallback mode"),ie.current=!1}),()=>{Z.current&&(Z.current.terminate(),Z.current=null),ge.current&&(window.clearTimeout(ge.current),ge.current=null)}),[]),D.useEffect(()=>{gt()},[]);const gt=async()=>{try{const F=new Promise((X,Y)=>window.setTimeout(()=>Y(new Error("Database timeout")),1e4)),G=m5e.from("leaderboard").select("*").order("points",{ascending:!1}),K=await Promise.race([G,F]);if(K.error)throw K.error;K.data&&_(K.data),console.log("Leaderboard data loaded:",K.data)}catch(F){w("Failed to load leaderboard"),console.error("Leaderboard error:",F)}},rt=async F=>{if(console.log("[DEBUG] updateScore called with:",F),!r){console.log("[DEBUG] No wallet address, returning");return}try{const G=r.toLowerCase(),{data:K}=await vI.from("leaderboard").select("*").eq("username",G).maybeSingle();console.log("[DEBUG] Existing record:",K);const X=K!=null&&K.wins?Number(K.wins):0,Y=K!=null&&K.losses?Number(K.losses):0,Ae=K!=null&&K.draws?Number(K.draws):0,Ie=K!=null&&K.total_games?Number(K.total_games):0,ze=K!=null&&K.points?Number(K.points):0;console.log("[DEBUG] Score calculation:",{currentWins:X,currentLosses:Y,currentDraws:Ae,currentTotalGames:Ie,currentPoints:ze,gameResult:F});const At=X+(F==="win"?1:0),Mt=Y+(F==="loss"?1:0),qn=Ae+(F==="draw"?1:0),Gt=Ie+1;let Oy=0;if(F==="win")switch(p){case"easy":Oy=10;break;default:Oy=1}else F==="draw"&&(Oy=1);const OA=ze+Oy;if(console.log("[DEBUG] New values:",{newWins:At,newLosses:Mt,newDraws:qn,newTotalGames:Gt,newPoints:OA,pointsToAdd:Oy}),K){const{error:Ry}=await vI.from("leaderboard").update({wins:At,losses:Mt,draws:qn,total_games:Gt,points:OA,updated_at:new Date().toISOString()}).eq("username",G);if(Ry){console.error("[DEBUG] Error updating leaderboard:",Ry);return}}else{const{error:Ry}=await vI.from("leaderboard").insert({username:G,chain_type:"ethereum",wins:At,losses:Mt,draws:qn,total_games:Gt,points:OA,updated_at:new Date().toISOString()});if(Ry){console.error("[DEBUG] Error inserting leaderboard record:",Ry);return}}console.log("[DEBUG] Leaderboard updated successfully"),await gt()}catch(G){console.error("[DEBUG] Error in updateScore:",G)}},Je=F=>F&&F===F.toUpperCase()?"red":"blue",Ln=(F,G)=>F>=0&&F<8&&G>=0&&G<8,Vr=(F,G)=>`${String.fromCharCode(97+G)}${8-F}`,Zn=(F,G)=>{const K=G==="blue"?"k":"K";let X=null;for(let Ie=0;Ie<8;Ie++){for(let ze=0;ze<8;ze++)if(F[Ie][ze]===K){X={row:Ie,col:ze};break}if(X)break}if(!X)return console.log(`King not found for ${G}`),!1;const Y=G==="blue"?"red":"blue",Ae=tp(X.row,X.col,Y,F);return console.log(`${G} king at ${X.row},${X.col} under attack: ${Ae}`),Ae},tp=(F,G,K,X)=>{for(let Y=0;Y<8;Y++)for(let Ae=0;Ae<8;Ae++){const Ie=X[Y][Ae];if(Ie&&Je(Ie)===K&&$d(Ie,Y,Ae,F,G,!1,K,X,!0))return!0}return!1},Yv=(F,G,K,X,Y,Ae=o)=>{const Ie=Ae.map(At=>[...At]),ze=Ie[F][G];return Ie[K][X]=ze,Ie[F][G]=null,Zn(Ie,Y)},TA=(F,G,K,X,Y,Ae)=>{const Ie=F==="blue"?-1:1,ze=F==="blue"?6:1;if(!Ln(X,Y)||F==="blue"&&X>=G||F==="red"&&X<=G)return!1;const At=Math.abs(X-G),Mt=Math.abs(Y-K);if((At===1&&Mt===0||At===2&&Mt===0&&G===ze||At===1&&Mt===1)&&At<=2&&Mt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:F,from:`${G},${K}`,to:`${X},${Y}`}),K===Y&&X===G+Ie)return Ae[X][Y]===null;if(K===Y&&G===ze&&X===G+2*Ie)return Ae[G+Ie][K]===null&&Ae[X][Y]===null;if(Math.abs(K-Y)===1&&X===G+Ie){const Gt=Ae[X][Y];return Gt!==null&&Je(Gt)!==F}if(Math.abs(K-Y)===1&&X===G+Ie){const Gt=Ae[G][Y];if(Gt&&Je(Gt)!==F&&Gt.toLowerCase()==="p"&&M.lastPawnDoubleMove&&M.lastPawnDoubleMove.row===G&&M.lastPawnDoubleMove.col===Y)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},C3=(F,G,K,X,Y)=>F!==K&&G!==X?!1:S3(F,G,K,X,Y),TV=(F,G,K,X)=>{const Y=Math.abs(F-K),Ae=Math.abs(G-X);return Y===2&&Ae===1||Y===1&&Ae===2},A3=(F,G,K,X,Y)=>Math.abs(F-K)!==Math.abs(G-X)?!1:S3(F,G,K,X,Y),NV=(F,G,K,X,Y)=>C3(F,G,K,X,Y)||A3(F,G,K,X,Y),PV=(F,G,K,X,Y)=>{const Ae=Math.abs(G-X),Ie=Math.abs(K-Y);if(Ae<=1&&Ie<=1)return!0;if(Ae===0&&Ie===2){if(F==="blue"&&!M.blueKingMoved){if(Y===6&&!M.blueRooksMove.right||Y===2&&!M.blueRooksMove.left)return!0}else if(F==="red"&&!M.redKingMoved&&(Y===6&&!M.redRooksMove.right||Y===2&&!M.redRooksMove.left))return!0}return!1},S3=(F,G,K,X,Y)=>{const Ae=F===K?0:(K-F)/Math.abs(K-F),Ie=G===X?0:(X-G)/Math.abs(X-G);let ze=F+Ae,At=G+Ie;for(;ze!==K||At!==X;){if(Y[ze][At]!==null)return!1;ze+=Ae,At+=Ie}return!0},$d=(F,G,K,X,Y,Ae=!0,Ie=Je(F),ze=o,At=!1)=>{if(!Ln(X,Y))return At||console.log("[ILLEGAL MOVE] Out of board:",{piece:F,startRow:G,startCol:K,endRow:X,endCol:Y}),!1;const Mt=ze[X][Y];if(Mt&&Je(Mt)===Ie)return At||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:F,startRow:G,startCol:K,endRow:X,endCol:Y}),!1;const qn=F.toLowerCase();let Gt=!1;switch(qn){case"p":Gt=TA(Ie,G,K,X,Y,ze);break;case"r":Gt=C3(G,K,X,Y,ze);break;case"n":Gt=TV(G,K,X,Y);break;case"b":Gt=A3(G,K,X,Y,ze);break;case"q":Gt=NV(G,K,X,Y,ze);break;case"k":Gt=PV(Ie,G,K,X,Y);break}return Gt?Gt&&Ae&&Yv(G,K,X,Y,Ie,ze)?(At||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:F,startRow:G,startCol:K,endRow:X,endCol:Y}),!1):Gt:(At||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:F,startRow:G,startCol:K,endRow:X,endCol:Y,playerColor:Ie,pieceType:qn,targetPiece:ze[X][Y],targetPieceColor:ze[X][Y]?Je(ze[X][Y]):null}),!1)},Zv=(F,G=o,K=c)=>{const X=[],Y=G[F.row][F.col];if(!Y||Je(Y)!==K)return X;const Ae=Y.toLowerCase();if(Ae==="p"){const Ie=K==="blue"?-1:1,ze=K==="blue"?6:1,At=F.row+Ie;if(At>=0&&At<8&&$d(Y,F.row,F.col,At,F.col,!0,K,G,!0)&&X.push({row:At,col:F.col}),F.row===ze){const Mt=F.row+2*Ie;Mt>=0&&Mt<8&&$d(Y,F.row,F.col,Mt,F.col,!0,K,G,!0)&&X.push({row:Mt,col:F.col})}for(const Mt of[-1,1]){const qn=F.col+Mt,Gt=F.row+Ie;qn>=0&&qn<8&&Gt>=0&&Gt<8&&$d(Y,F.row,F.col,Gt,qn,!0,K,G,!0)&&X.push({row:Gt,col:qn})}}else if(Ae==="n"){const Ie=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[ze,At]of Ie){const Mt=F.row+ze,qn=F.col+At;Mt>=0&&Mt<8&&qn>=0&&qn<8&&$d(Y,F.row,F.col,Mt,qn,!0,K,G,!0)&&X.push({row:Mt,col:qn})}}else for(let Ie=0;Ie<8;Ie++)for(let ze=0;ze<8;ze++)$d(Y,F.row,F.col,Ie,ze,!0,K,G,!0)&&X.push({row:Ie,col:ze});return X},kV=(F,G=o)=>{if(!Zn(G,F))return!1;for(let K=0;K<8;K++)for(let X=0;X<8;X++){const Y=G[K][X];if(Y&&Je(Y)===F&&Zv({row:K,col:X},G,F).length>0)return!1}return!0},OV=(F,G=o)=>{if(Zn(G,F))return!1;for(let K=0;K<8;K++)for(let X=0;X<8;X++){const Y=G[K][X];if(Y&&Je(Y)===F&&Zv({row:K,col:X},G,F).length>0)return!1}return!0},RV=(F,G)=>{if(h!=="active"||ie.current)return;const K=o[F][G],X=K?Je(K):null;if(u&&C.some(Y=>Y.row===F&&Y.col===G)){Xv(u,{row:F,col:G});return}if(K&&X===c){const Y=Zv({row:F,col:G});d({row:F,col:G}),S(Y);return}d(null),S([])},Xv=(F,G,K=!1)=>{const X=o[F.row][F.col];if(console.log("[MOVE ATTEMPT]",{from:F,to:G,piece:X,isAIMove:K,board:JSON.parse(JSON.stringify(o)),moveHistory:v}),!!X){if(X.toLowerCase()==="p"&&(Je(X)==="blue"&&G.row===0||Je(X)==="red"&&G.row===7)){I({from:F,to:G}),z(!0);return}k3(F,G,"q",K)}};ce.current=Xv;const I3=D.useCallback((F,G,K=!1)=>{_o(!0);const X=o.map(Ie=>[...Ie]),Y=X[F.row][F.col];if(!Y)return;X[G.row][G.col]=Y,X[F.row][F.col]=null,zV(X,F,G,Y);const Ae=HV(F,G);if(b(Ie=>{const ze=[...Ie,Ae];return console.log("[MOVE HISTORY UPDATED]",ze),ze}),A({from:F,to:G}),d(null),S([]),v.length<10&&!K){const Ie=IB(X,c==="blue"?"red":"blue");qt(Ie).then(ze=>{ze&&ze.moves&&ze.moves.length>0&&(Yn(ze.moves.slice(0,3)),ga(!0),setTimeout(()=>ga(!1),5e3))})}WV(F,G,Y),l(Ie=>{const ze=Ie==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",ze),T3(X,ze),ze}),T3(X,c==="blue"?"red":"blue"),a(X),ie.current=!1,J.current=!1,te.current=!1,_o(!1)},[o,c,v,qt]);D.useEffect(()=>{if(!ie.current&&s==="ai"&&c==="red"&&!J.current&&!Gr)if(ie.current=!0,p==="easy")setTimeout(()=>{const F=DV(o);F?Xv(F.from,F.to,!0):ie.current=!1},600);else{w("AI is calculating...");const F=IB(o,c);if(te.current)return;te.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:F,difficulty:p,movetime:3e3})}).then(K=>{if(K.ok)return K.json();throw new Error("API call failed")}).then(K=>{const X=K.bestmove||K.move;if(X&&X!=="(none)"&&X.length===4){const Y=X.charCodeAt(0)-97,Ae=parseInt(X[1]),Ie=X.charCodeAt(2)-97,ze=parseInt(X[3]),At=8-Ae,Mt=8-ze;if(Y>=0&&Y<8&&At>=0&&At<8&&Ie>=0&&Ie<8&&Mt>=0&&Mt<8){const qn={from:{row:At,col:Y},to:{row:Mt,col:Ie}},Gt=o[At][Y];Gt&&Je(Gt)==="red"&&$d(Gt,At,Y,Mt,Ie,!0,"red",o)?Xv(qn.from,qn.to,!0):(ie.current=!1,te.current=!1)}else ie.current=!1,te.current=!1}else ie.current=!1,te.current=!1}).catch(()=>{w("AI error. Please try again."),ie.current=!1,te.current=!1})}},[c,s,p,o,M,xn]);const T3=(F,G)=>{console.log("Checking game end for player:",G);const K=F.some(Y=>Y.some(Ae=>Ae==="k")),X=F.some(Y=>Y.some(Ae=>Ae==="K"));if(!K)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),w("King captured! Red wins!"),rt("loss"),_e(!0),setTimeout(()=>_e(!1),3e3),"checkmate";if(!X)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),w("King captured! You win!"),rt("win"),_e(!0),setTimeout(()=>_e(!1),3e3),"checkmate";if(console.log("Is king in check:",Zn(F,G)),kV(G,F)){console.log("[GAME END] CHECKMATE",{winner:G==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("checkmate");const Y=G==="blue"?"red":"blue";return Y==="blue"?(w("Checkmate! You win!"),np("checkmate"),D3(!0),GV(),rt("win"),_e(!0),setTimeout(()=>_e(!1),3e3)):(w(`Checkmate! ${Y==="red"?"AI":"Opponent"} wins!`),np("checkmate"),$3(!0),rt("loss"),_e(!0),setTimeout(()=>_e(!1),3e3)),"checkmate"}return OV(G,F)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("stalemate"),w("Stalemate! Game is a draw."),rt("draw"),_e(!0),setTimeout(()=>_e(!1),3e3),"stalemate"):(Zn(F,G)?(console.log("CHECK detected!"),np("check"),w(`${G==="blue"?"Blue":"Red"} is in check!`)):w("Your turn"),null)},DV=F=>{const G=[];for(let Y=0;Y<8;Y++)for(let Ae=0;Ae<8;Ae++){const Ie=F[Y][Ae];Ie&&Je(Ie)==="red"&&G.push({row:Y,col:Ae})}for(let Y=G.length-1;Y>0;Y--){const Ae=Math.floor(Math.random()*(Y+1));[G[Y],G[Ae]]=[G[Ae],G[Y]]}const K=[],X=[];for(const Y of G){const Ae=Zv(Y,F,"red");for(const Ie of Ae){const ze=F[Ie.row][Ie.col];if(ze&&Je(ze)==="blue"){const Mt={p:100,n:320,b:330,r:500,q:900,k:2e4}[ze.toLowerCase()]||0;K.push({from:Y,to:Ie,value:Mt})}else X.push({from:Y,to:Ie})}}if(K.length>0&&Math.random()<.3){K.sort((Y,Ae)=>Y.value-Ae.value);for(const Y of K){const Ae=F.map(ze=>[...ze]),Ie=Ae[Y.from.row][Y.from.col];if(Ae[Y.to.row][Y.to.col]=Ie,Ae[Y.from.row][Y.from.col]=null,!Zn(Ae,"red"))return{from:Y.from,to:Y.to}}}for(const Y of X){const Ae=F.map(ze=>[...ze]),Ie=Ae[Y.from.row][Y.from.col];if(Ae[Y.to.row][Y.to.col]=Ie,Ae[Y.from.row][Y.from.col]=null,!Zn(Ae,"red"))return Y}K.sort((Y,Ae)=>Y.value-Ae.value);for(const Y of K){const Ae=F.map(ze=>[...ze]),Ie=Ae[Y.from.row][Y.from.col];if(Ae[Y.to.row][Y.to.col]=Ie,Ae[Y.from.row][Y.from.col]=null,!Zn(Ae,"red"))return{from:Y.from,to:Y.to}}return null},$V=()=>{a(JSON.parse(JSON.stringify(SB))),l("blue"),d(null),f("active"),b([]),S([]),A(null),R(!1),w("Select game mode"),q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),He(pt()),ie.current&&(ie.current=!1)},UV=()=>{if(QV(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){R(!1),se(!1);return}R(!0),se(!1),w("Game started! Your turn");const F=pt();He(F),console.log("[DEBUG] Game started with chessboard:",F)},N3=F=>`${F.slice(0,6)}...${F.slice(-4)}`,BV=(F,G)=>{const K=o[F][G],X=(u==null?void 0:u.row)===F&&(u==null?void 0:u.col)===G,Y=C.some(Ie=>Ie.row===F&&Ie.col===G),Ae=T&&(T.from.row===F&&T.from.col===G||T.to.row===F&&T.to.col===G);return m.jsxs("div",{className:`square ${X?"selected":""} ${Y?"legal-move":""} ${Ae?"last-move":""}`,onClick:()=>RV(F,G),children:[K&&m.jsx("div",{className:"piece",style:{backgroundImage:bE[K]?`url(${bE[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Y&&m.jsx("div",{className:"legal-move-indicator"})]},`${F}-${G}`)},LV=()=>{if(!j||!V)return null;const F=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:F.map(G=>m.jsx("div",{className:"promotion-piece",onClick:()=>{k3(V.from,V.to,G),z(!1),I(null)},style:{backgroundImage:bE[G]?`url(${bE[G]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},G))})]})})},[MV,jV]=D.useState(null),P3=(F=!1,G="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${F?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:w5e.map(K=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>jV(K.key),children:[m.jsx("img",{src:K.img,alt:K.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:K.name}),MV===K.key&&m.jsx("div",{className:"piece-gallery-desc",children:K.desc})]},K.key))}),m.jsx("div",{className:"piece-gallery-tip",children:G})]}),FV=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{UV()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),zV=(F,G,K,X)=>{if(X.toLowerCase()==="p"&&(Je(X)==="blue"&&K.row===0||Je(X)==="red"&&K.row===7)){const Y=Je(X)==="blue"?"q":"Q";F[K.row][K.col]=Y}X.toLowerCase()==="k"&&Math.abs(G.col-K.col)===2&&(K.col===6?(F[G.row][7]=null,F[G.row][5]=Je(X)==="blue"?"r":"R"):K.col===2&&(F[G.row][0]=null,F[G.row][3]=Je(X)==="blue"?"r":"R"))},HV=(F,G,K,X)=>{const Y=Vr(F.row,F.col),Ae=Vr(G.row,G.col);return`${Y}-${Ae}`},WV=(F,G,K)=>{const X={...M};K.toLowerCase()==="k"?Je(K)==="blue"?X.blueKingMoved=!0:X.redKingMoved=!0:K.toLowerCase()==="r"&&(Je(K)==="blue"?(F.col===0&&(X.blueRooksMove.left=!0),F.col===7&&(X.blueRooksMove.right=!0)):(F.col===0&&(X.redRooksMove.left=!0),F.col===7&&(X.redRooksMove.right=!0))),K.toLowerCase()==="p"&&Math.abs(F.row-G.row)===2?X.lastPawnDoubleMove={row:G.row,col:G.col}:X.lastPawnDoubleMove=null,q(X)},k3=(F,G,K="q",X=!1)=>{o[F.row][F.col];const Ae=o[G.row][G.col]!==null;if(np(Ae?"capture":"move"),Ae){L({row:G.row,col:G.col,show:!0}),setTimeout(()=>{I3(F,G,X),L(null)},500);return}I3(F,G,X)},[O3,qV]=D.useState(!0),[NA,R3]=D.useState(!1),np=F=>{if(!O3)return;let G="";switch(F){case"move":G="/images/move.mp3";break;case"capture":G="/images/capture.mp3";break;case"check":G="/images/play.mp3";break;case"checkmate":G="/images/victory.mp3";break;case"victory":G="/images/victory.mp3";break;default:G="/images/move.mp3"}new Audio(G).play().catch(()=>{})},GV=()=>{if(NA){np("victory");for(let F=0;F<50;F++)setTimeout(()=>{const G=document.createElement("div");G.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(G),setTimeout(()=>G.remove(),3e3)},F*100);setTimeout(()=>R3(!1),5e3)}},[VV,D3]=D.useState(!1),[KV,$3]=D.useState(!1),U3=()=>{D3(!1),$3(!1)},PA=()=>{U3(),$V()},kA=()=>{U3(),R(!1)},QV=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},JV=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Fe?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"}),m.jsx("button",{className:"dark-mode-toggle",onClick:Bt,title:Fe?"Switch to light mode":"Switch to dark mode","aria-label":Fe?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Fe?"☀️":"🌙"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[P&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:y}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:v.slice().reverse().map((F,G)=>m.jsx("li",{children:F},v.length-1-G))})]})]}),!P&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,10).map((F,G)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const K=F;return m.jsxs("tr",{children:[m.jsx("td",{children:G+1}),m.jsx("td",{children:N3(K.username)}),m.jsx("td",{children:K.wins}),m.jsx("td",{children:K.losses}),m.jsx("td",{children:K.draws}),m.jsx("td",{children:K.points})]},K.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s==="ai"?"NA":`${$} ETH`}),P&&!oe&&m.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&m.jsxs("span",{className:`stockfish-status ${Ct}`,children:["LawbBot: ",Ct==="loading"?"Loading...":Ct==="ready"?"Ready":"Failed"]}),p==="hard"&&m.jsxs("span",{className:`stockfish-status ${Ct}`,children:["LawbBot: ",Ct==="loading"?"Loading...":Ct==="ready"?"Ready":"Failed"]}),qr&&ma.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),ma.map((F,G)=>m.jsxs("span",{className:"opening-move",children:[F.san," (",Math.round(F.white+F.draws+F.black)," games)"]},G))]})]})}),P?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${ue})`},children:[Array.from({length:8},(F,G)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(K,X)=>BV(G,X))},G)),N&&N.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>je(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:PA,children:"New Game"}),m.jsx("button",{onClick:kA,children:"Back to Menu"})]}),m.jsxs("div",{className:"epic-controls",children:[m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:O3,onChange:F=>qV(F.target.checked)}),m.jsx("label",{htmlFor:"sound-toggle",children:"🎵 Sound Effects"})]}),m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:NA,onChange:F=>R3(F.target.checked)}),m.jsx("label",{htmlFor:"victory-toggle",children:"🎉 Victory Celebration"})]})]})]}):oe?FV():s==="online"?m.jsx(SV,{}):m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-section",children:[m.jsx("button",{className:`mode-btn ${JV?"selected":""}`,onClick:()=>i("online"),children:"PvP"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>se(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:P?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,10).map((F,G)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const K=F;return m.jsxs("tr",{children:[m.jsx("td",{children:G+1}),m.jsx("td",{children:N3(K.username)}),m.jsx("td",{children:K.wins}),m.jsx("td",{children:K.losses}),m.jsx("td",{children:K.draws}),m.jsx("td",{children:K.points})]},K.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:P3(!1)})})]}),me&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>je(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:F=>F.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>je(!1),children:"×"}),P3(!1)]})}),LV(),ve&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),VV&&NA&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:PA,children:"New Game"}),m.jsx("button",{onClick:kA,children:"Back to Menu"})]})]}),KV&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(F=>m.jsx("div",{className:"blood-drip",style:{left:`${10+F*14}%`,animationDelay:`${.5+F*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},F))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:PA,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:kA,children:"Back to Menu"})]})]})]})]})};function IB(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const TB=()=>{const[t,e]=D.useState("singleplayer");return m.jsxs("div",{className:"chess-page",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h1",{children:"♔ Chess"}),m.jsxs("div",{className:"mode-toggle",children:[m.jsx("button",{className:`mode-btn ${t==="singleplayer"?"active":""}`,onClick:()=>e("singleplayer"),children:"Single Player"}),m.jsx("button",{className:`mode-btn ${t==="multiplayer"?"active":""}`,onClick:()=>e("multiplayer"),children:"Multiplayer"})]})]}),m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(E5e,{onClose:()=>{}}):m.jsx(SV,{})})]})},_5e=new qne,x5e=typeof window<"u"&&window.location.hostname.startsWith("chess."),C5e=()=>lke("(max-width: 768px)")?m.jsx(cke,{}):m.jsx(eke,{});EI.createRoot(document.getElementById("root")).render(m.jsx(Ri.StrictMode,{children:m.jsx(ine,{config:lq.wagmiConfig,children:m.jsx(sre,{client:_5e,children:m.jsx(ZPe,{children:m.jsx(QPe,{children:x5e?m.jsx(YE,{path:"/*",element:m.jsx(TB,{})}):m.jsxs(m.Fragment,{children:[m.jsx(YE,{path:"/",element:m.jsx(C5e,{})}),m.jsx(YE,{path:"/chess",element:m.jsx(TB,{})})]})})})})})}));export{zUe as $,Ee as A,Ke as B,Se as C,Fr as D,X0 as E,jr as F,We as G,_N as H,I0 as I,Qo as J,_ue as K,tn as L,Ft as M,wue as N,fe as O,Ti as P,KE as Q,Ye as R,Zo as S,Js as T,db as U,Eb as V,Er as W,VUe as X,_P as Y,nde as Z,lw as _,JE as a,uy as a$,yr as a0,Lf as a1,$n as a2,WUe as a3,MW as a4,xP as a5,Km as a6,Mn as a7,W5e as a8,Fu as a9,yF as aA,mF as aB,gd as aC,Q0 as aD,ul as aE,$5e as aF,tY as aG,mf as aH,D5e as aI,U5e as aJ,R_ as aK,L5e as aL,CZ as aM,hj as aN,R5e as aO,uC as aP,Bw as aQ,D_ as aR,Fx as aS,M5e as aT,AZ as aU,V$ as aV,Vte as aW,Eoe as aX,bo as aY,zee as aZ,Fee as a_,rc as aa,rb as ab,et as ac,nr as ad,Zl as ae,EF as af,gC as ag,$_ as ah,IO as ai,pd as aj,k5e as ak,pC as al,TO as am,P5e as an,N5e as ao,Aj as ap,cC as aq,O_ as ar,FJ as as,GJ as at,F5e as au,jX as av,de as aw,vO as ax,Is as ay,zX as az,Kt as b,gf as b0,iC as b1,Ps as b2,Wn as b3,xv as b4,ae as c,Me as d,B as e,Qt as f,Jc as g,GUe as h,xg as i,Pi as j,Re as k,wn as l,mNe as m,Vn as n,yNe as o,xe as p,Cn as q,qUe as r,Lt as s,b7 as t,fn as u,Yue as v,Hi as w,FUe as x,oR as y,E7 as z};
