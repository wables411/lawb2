const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DTGknEYF.js","assets/if-defined-BsLTcNwF.js","assets/index-C3ekupej.js","assets/index-B-gMLhzC.js","assets/ref-B2kAqE6E.js","assets/index-B5f9RR5M.js","assets/index-Cw8cHD_J.js","assets/index-C-Eruvxx.js","assets/index-DN7nipUT.js","assets/index-CKF9ummg.js","assets/index-CqRD7xsG.js","assets/index-BKRMnSdw.js","assets/email-2oYqdqN-.js","assets/index-BtBEyH2w.js","assets/socials-CakMGhi6.js","assets/index-HsGGUGre.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BPVEVIlh.js","assets/index-DCtlCSTP.js","assets/index-b4UfJB1j.js","assets/index-DvpPpW79.js","assets/swaps-C4dcMk-_.js","assets/index-IA6D6mtB.js","assets/index-DiMi6RI2.js","assets/index-Dzx4vXLj.js","assets/send-BTyYAvkG.js","assets/index-B8SqTwvU.js","assets/index-DpLb2wqZ.js","assets/receive-Cxs8QjaJ.js","assets/index-BzXezayq.js","assets/onramp-DV4GleAQ.js","assets/index-DFTkGzUF.js","assets/index-b1621BeD.js","assets/index-Tz1NwGzY.js","assets/transactions-CuVj93Yl.js","assets/index-CvHv6Aoh.js","assets/index-Tep2vWB-.js","assets/index-S41rLeox.js","assets/index-BNWY2nxc.js","assets/index-CypaLHJn.js","assets/w3m-modal-DWTnoErB.js"])))=>i.map(i=>d[i]);
var G2=t=>{throw TypeError(t)};var TS=(t,e,n)=>e.has(t)||G2("Cannot "+n);var W=(t,e,n)=>(TS(t,e,"read from private field"),n?n.call(t):e.get(t)),Je=(t,e,n)=>e.has(t)?G2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ie=(t,e,n,r)=>(TS(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ct=(t,e,n)=>(TS(t,e,"access private method"),n);var Yv=(t,e,n,r)=>({set _(s){Ie(t,e,s,n)},get _(){return W(t,e,r)}});function TG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var v6={exports:{}},SC={},b6={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=Symbol.for("react.element"),NG=Symbol.for("react.portal"),RG=Symbol.for("react.fragment"),PG=Symbol.for("react.strict_mode"),kG=Symbol.for("react.profiler"),OG=Symbol.for("react.provider"),DG=Symbol.for("react.context"),$G=Symbol.for("react.forward_ref"),MG=Symbol.for("react.suspense"),LG=Symbol.for("react.memo"),UG=Symbol.for("react.lazy"),K2=Symbol.iterator;function jG(t){return t===null||typeof t!="object"?null:(t=K2&&t[K2]||t["@@iterator"],typeof t=="function"?t:null)}var _6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E6=Object.assign,C6={};function Fg(t,e,n){this.props=t,this.context=e,this.refs=C6,this.updater=n||_6}Fg.prototype.isReactComponent={};Fg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S6(){}S6.prototype=Fg.prototype;function mP(t,e,n){this.props=t,this.context=e,this.refs=C6,this.updater=n||_6}var yP=mP.prototype=new S6;yP.constructor=mP;E6(yP,Fg.prototype);yP.isPureReactComponent=!0;var Y2=Array.isArray,A6=Object.prototype.hasOwnProperty,wP={current:null},I6={key:!0,ref:!0,__self:!0,__source:!0};function x6(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)A6.call(e,r)&&!I6.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:V0,type:t,key:i,ref:o,props:s,_owner:wP.current}}function BG(t,e){return{$$typeof:V0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vP(t){return typeof t=="object"&&t!==null&&t.$$typeof===V0}function FG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q2=/\/+/g;function NS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FG(""+t.key):e.toString(36)}function d_(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case V0:case NG:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+NS(o,0):r,Y2(s)?(n="",t!=null&&(n=t.replace(Q2,"$&/")+"/"),d_(s,e,n,"",function(l){return l})):s!=null&&(vP(s)&&(s=BG(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Q2,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Y2(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+NS(i,a);o+=d_(i,e,n,c,s)}else if(c=jG(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+NS(i,a++),o+=d_(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qv(t,e,n){if(t==null)return t;var r=[],s=0;return d_(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bs={current:null},h_={transition:null},zG={ReactCurrentDispatcher:Bs,ReactCurrentBatchConfig:h_,ReactCurrentOwner:wP};function T6(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:Qv,forEach:function(t,e,n){Qv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qv(t,function(){e++}),e},toArray:function(t){return Qv(t,function(e){return e})||[]},only:function(t){if(!vP(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Fg;Pt.Fragment=RG;Pt.Profiler=kG;Pt.PureComponent=mP;Pt.StrictMode=PG;Pt.Suspense=MG;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zG;Pt.act=T6;Pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=E6({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=wP.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)A6.call(e,c)&&!I6.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:V0,type:t.type,key:s,ref:i,props:r,_owner:o}};Pt.createContext=function(t){return t={$$typeof:DG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OG,_context:t},t.Consumer=t};Pt.createElement=x6;Pt.createFactory=function(t){var e=x6.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:$G,render:t}};Pt.isValidElement=vP;Pt.lazy=function(t){return{$$typeof:UG,_payload:{_status:-1,_result:t},_init:WG}};Pt.memo=function(t,e){return{$$typeof:LG,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=h_.transition;h_.transition={};try{t()}finally{h_.transition=e}};Pt.unstable_act=T6;Pt.useCallback=function(t,e){return Bs.current.useCallback(t,e)};Pt.useContext=function(t){return Bs.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return Bs.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return Bs.current.useEffect(t,e)};Pt.useId=function(){return Bs.current.useId()};Pt.useImperativeHandle=function(t,e,n){return Bs.current.useImperativeHandle(t,e,n)};Pt.useInsertionEffect=function(t,e){return Bs.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return Bs.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return Bs.current.useMemo(t,e)};Pt.useReducer=function(t,e,n){return Bs.current.useReducer(t,e,n)};Pt.useRef=function(t){return Bs.current.useRef(t)};Pt.useState=function(t){return Bs.current.useState(t)};Pt.useSyncExternalStore=function(t,e,n){return Bs.current.useSyncExternalStore(t,e,n)};Pt.useTransition=function(){return Bs.current.useTransition()};Pt.version="18.3.1";b6.exports=Pt;var k=b6.exports;const zi=qh(k),qG=TG({__proto__:null,default:zi},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HG=k,VG=Symbol.for("react.element"),GG=Symbol.for("react.fragment"),KG=Object.prototype.hasOwnProperty,YG=HG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QG={key:!0,ref:!0,__self:!0,__source:!0};function N6(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KG.call(e,r)&&!QG.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:VG,type:t,key:i,ref:o,props:s,_owner:YG.current}}SC.Fragment=GG;SC.jsx=N6;SC.jsxs=N6;v6.exports=SC;var m=v6.exports,Cx={},R6={exports:{}},Qi={},P6={exports:{}},k6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,D){var U=R.length;R.push(D);e:for(;0<U;){var H=U-1>>>1,te=R[H];if(0<s(te,D))R[H]=D,R[U]=te,U=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var D=R[0],U=R.pop();if(U!==D){R[0]=U;e:for(var H=0,te=R.length,oe=te>>>1;H<oe;){var re=2*(H+1)-1,ie=R[re],ye=re+1,Z=R[ye];if(0>s(ie,U))ye<te&&0>s(Z,ie)?(R[H]=Z,R[ye]=U,H=ye):(R[H]=ie,R[re]=U,H=re);else if(ye<te&&0>s(Z,U))R[H]=Z,R[ye]=U,H=ye;else break e}}return D}function s(R,D){var U=R.sortIndex-D.sortIndex;return U!==0?U:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=R)r(l),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(l)}}function E(R){if(g=!1,b(R),!p)if(n(c)!==null)p=!0,T(C);else{var D=n(l);D!==null&&$(E,D.startTime-R)}}function C(R,D){p=!1,g&&(g=!1,y(x),x=-1),f=!0;var U=h;try{for(b(D),d=n(c);d!==null&&(!(d.expirationTime>D)||R&&!P());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var te=H(d.expirationTime<=D);D=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(c)&&r(c),b(D)}else r(c);d=n(c)}if(d!==null)var oe=!0;else{var re=n(l);re!==null&&$(E,re.startTime-D),oe=!1}return oe}finally{d=null,h=U,f=!1}}var A=!1,I=null,x=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function j(){if(I!==null){var R=t.unstable_now();O=R;var D=!0;try{D=I(!0,R)}finally{D?q():(A=!1,I=null)}}else A=!1}var q;if(typeof v=="function")q=function(){v(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,N=B.port2;B.port1.onmessage=j,q=function(){N.postMessage(null)}}else q=function(){w(j,0)};function T(R){I=R,A||(A=!0,q())}function $(R,D){x=w(function(){R(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,T(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var U=h;h=D;try{return R()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=h;h=R;try{return D()}finally{h=U}},t.unstable_scheduleCallback=function(R,D,U){var H=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,R){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=U+te,R={id:u++,callback:D,priorityLevel:R,startTime:U,expirationTime:te,sortIndex:-1},U>H?(R.sortIndex=U,e(l,R),n(c)===null&&R===n(l)&&(g?(y(x),x=-1):g=!0,$(E,U-H))):(R.sortIndex=te,e(c,R),p||f||(p=!0,T(C))),R},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(R){var D=h;return function(){var U=h;h=D;try{return R.apply(this,arguments)}finally{h=U}}}})(k6);P6.exports=k6;var JG=P6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZG=k,Gi=JG;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O6=new Set,dw={};function Hh(t,e){rg(t,e),rg(t+"Capture",e)}function rg(t,e){for(dw[t]=e,t=0;t<e.length;t++)O6.add(e[t])}var rl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sx=Object.prototype.hasOwnProperty,XG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J2={},Z2={};function eK(t){return Sx.call(Z2,t)?!0:Sx.call(J2,t)?!1:XG.test(t)?Z2[t]=!0:(J2[t]=!0,!1)}function tK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nK(t,e,n,r){if(e===null||typeof e>"u"||tK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fs(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var os={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){os[t]=new Fs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];os[e]=new Fs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){os[t]=new Fs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){os[t]=new Fs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){os[t]=new Fs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){os[t]=new Fs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){os[t]=new Fs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){os[t]=new Fs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){os[t]=new Fs(t,5,!1,t.toLowerCase(),null,!1,!1)});var bP=/[\-:]([a-z])/g;function _P(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bP,_P);os[e]=new Fs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bP,_P);os[e]=new Fs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bP,_P);os[e]=new Fs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){os[t]=new Fs(t,1,!1,t.toLowerCase(),null,!1,!1)});os.xlinkHref=new Fs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){os[t]=new Fs(t,1,!1,t.toLowerCase(),null,!0,!0)});function EP(t,e,n,r){var s=os.hasOwnProperty(e)?os[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nK(e,n,s,r)&&(n=null),r||s===null?eK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fl=ZG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jv=Symbol.for("react.element"),lp=Symbol.for("react.portal"),up=Symbol.for("react.fragment"),CP=Symbol.for("react.strict_mode"),Ax=Symbol.for("react.profiler"),D6=Symbol.for("react.provider"),$6=Symbol.for("react.context"),SP=Symbol.for("react.forward_ref"),Ix=Symbol.for("react.suspense"),xx=Symbol.for("react.suspense_list"),AP=Symbol.for("react.memo"),jl=Symbol.for("react.lazy"),M6=Symbol.for("react.offscreen"),X2=Symbol.iterator;function Tm(t){return t===null||typeof t!="object"?null:(t=X2&&t[X2]||t["@@iterator"],typeof t=="function"?t:null)}var Qn=Object.assign,RS;function hy(t){if(RS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);RS=e&&e[1]||""}return`
`+RS+t}var PS=!1;function kS(t,e){if(!t||PS)return"";PS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{PS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hy(t):""}function rK(t){switch(t.tag){case 5:return hy(t.type);case 16:return hy("Lazy");case 13:return hy("Suspense");case 19:return hy("SuspenseList");case 0:case 2:case 15:return t=kS(t.type,!1),t;case 11:return t=kS(t.type.render,!1),t;case 1:return t=kS(t.type,!0),t;default:return""}}function Tx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case up:return"Fragment";case lp:return"Portal";case Ax:return"Profiler";case CP:return"StrictMode";case Ix:return"Suspense";case xx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $6:return(t.displayName||"Context")+".Consumer";case D6:return(t._context.displayName||"Context")+".Provider";case SP:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case AP:return e=t.displayName||null,e!==null?e:Tx(t.type)||"Memo";case jl:e=t._payload,t=t._init;try{return Tx(t(e))}catch{}}return null}function sK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tx(e);case 8:return e===CP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iK(t){var e=L6(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zv(t){t._valueTracker||(t._valueTracker=iK(t))}function U6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L6(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Y_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nx(t,e){var n=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eD(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j6(t,e){e=e.checked,e!=null&&EP(t,"checked",e,!1)}function Rx(t,e){j6(t,e);var n=Bu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Px(t,e.type,n):e.hasOwnProperty("defaultValue")&&Px(t,e.type,Bu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Px(t,e,n){(e!=="number"||Y_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fy=Array.isArray;function Tp(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nD(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(fy(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bu(n)}}function B6(t,e){var n=Bu(e.value),r=Bu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function F6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ox(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?F6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xv,W6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xv=Xv||document.createElement("div"),Xv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hw(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ry={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oK=["Webkit","ms","Moz","O"];Object.keys(Ry).forEach(function(t){oK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ry[e]=Ry[t]})});function z6(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ry.hasOwnProperty(t)&&Ry[t]?(""+e).trim():e+"px"}function q6(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=z6(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var aK=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dx(t,e){if(e){if(aK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function $x(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mx=null;function IP(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lx=null,Np=null,Rp=null;function sD(t){if(t=Y0(t)){if(typeof Lx!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=NC(e),Lx(t.stateNode,t.type,e))}}function H6(t){Np?Rp?Rp.push(t):Rp=[t]:Np=t}function V6(){if(Np){var t=Np,e=Rp;if(Rp=Np=null,sD(t),e)for(t=0;t<e.length;t++)sD(e[t])}}function G6(t,e){return t(e)}function K6(){}var OS=!1;function Y6(t,e,n){if(OS)return t(e,n);OS=!0;try{return G6(t,e,n)}finally{OS=!1,(Np!==null||Rp!==null)&&(K6(),V6())}}function fw(t,e){var n=t.stateNode;if(n===null)return null;var r=NC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var Ux=!1;if(rl)try{var Nm={};Object.defineProperty(Nm,"passive",{get:function(){Ux=!0}}),window.addEventListener("test",Nm,Nm),window.removeEventListener("test",Nm,Nm)}catch{Ux=!1}function cK(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Py=!1,Q_=null,J_=!1,jx=null,lK={onError:function(t){Py=!0,Q_=t}};function uK(t,e,n,r,s,i,o,a,c){Py=!1,Q_=null,cK.apply(lK,arguments)}function dK(t,e,n,r,s,i,o,a,c){if(uK.apply(this,arguments),Py){if(Py){var l=Q_;Py=!1,Q_=null}else throw Error(ge(198));J_||(J_=!0,jx=l)}}function Vh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iD(t){if(Vh(t)!==t)throw Error(ge(188))}function hK(t){var e=t.alternate;if(!e){if(e=Vh(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return iD(s),t;if(i===r)return iD(s),e;i=i.sibling}throw Error(ge(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function J6(t){return t=hK(t),t!==null?Z6(t):null}function Z6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Z6(t);if(e!==null)return e;t=t.sibling}return null}var X6=Gi.unstable_scheduleCallback,oD=Gi.unstable_cancelCallback,fK=Gi.unstable_shouldYield,pK=Gi.unstable_requestPaint,cr=Gi.unstable_now,gK=Gi.unstable_getCurrentPriorityLevel,xP=Gi.unstable_ImmediatePriority,e8=Gi.unstable_UserBlockingPriority,Z_=Gi.unstable_NormalPriority,mK=Gi.unstable_LowPriority,t8=Gi.unstable_IdlePriority,AC=null,Ja=null;function yK(t){if(Ja&&typeof Ja.onCommitFiberRoot=="function")try{Ja.onCommitFiberRoot(AC,t,void 0,(t.current.flags&128)===128)}catch{}}var ua=Math.clz32?Math.clz32:bK,wK=Math.log,vK=Math.LN2;function bK(t){return t>>>=0,t===0?32:31-(wK(t)/vK|0)|0}var eb=64,tb=4194304;function py(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function X_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=py(a):(i&=o,i!==0&&(r=py(i)))}else o=n&~s,o!==0?r=py(o):i!==0&&(r=py(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ua(e),s=1<<n,r|=t[n],e&=~s;return r}function _K(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ua(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=_K(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Bx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n8(){var t=eb;return eb<<=1,!(eb&4194240)&&(eb=64),t}function DS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function G0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ua(e),t[e]=n}function CK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ua(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function TP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ua(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var on=0;function r8(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s8,NP,i8,o8,a8,Fx=!1,nb=[],yu=null,wu=null,vu=null,pw=new Map,gw=new Map,Vl=[],SK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aD(t,e){switch(t){case"focusin":case"focusout":yu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":vu=null;break;case"pointerover":case"pointerout":pw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gw.delete(e.pointerId)}}function Rm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Y0(e),e!==null&&NP(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function AK(t,e,n,r,s){switch(e){case"focusin":return yu=Rm(yu,t,e,n,r,s),!0;case"dragenter":return wu=Rm(wu,t,e,n,r,s),!0;case"mouseover":return vu=Rm(vu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pw.set(i,Rm(pw.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gw.set(i,Rm(gw.get(i)||null,t,e,n,r,s)),!0}return!1}function c8(t){var e=Md(t.target);if(e!==null){var n=Vh(e);if(n!==null){if(e=n.tag,e===13){if(e=Q6(n),e!==null){t.blockedOn=e,a8(t.priority,function(){i8(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function f_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mx=r,n.target.dispatchEvent(r),Mx=null}else return e=Y0(n),e!==null&&NP(e),t.blockedOn=n,!1;e.shift()}return!0}function cD(t,e,n){f_(t)&&n.delete(e)}function IK(){Fx=!1,yu!==null&&f_(yu)&&(yu=null),wu!==null&&f_(wu)&&(wu=null),vu!==null&&f_(vu)&&(vu=null),pw.forEach(cD),gw.forEach(cD)}function Pm(t,e){t.blockedOn===e&&(t.blockedOn=null,Fx||(Fx=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,IK)))}function mw(t){function e(s){return Pm(s,t)}if(0<nb.length){Pm(nb[0],t);for(var n=1;n<nb.length;n++){var r=nb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yu!==null&&Pm(yu,t),wu!==null&&Pm(wu,t),vu!==null&&Pm(vu,t),pw.forEach(e),gw.forEach(e),n=0;n<Vl.length;n++)r=Vl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vl.length&&(n=Vl[0],n.blockedOn===null);)c8(n),n.blockedOn===null&&Vl.shift()}var Pp=fl.ReactCurrentBatchConfig,eE=!0;function xK(t,e,n,r){var s=on,i=Pp.transition;Pp.transition=null;try{on=1,RP(t,e,n,r)}finally{on=s,Pp.transition=i}}function TK(t,e,n,r){var s=on,i=Pp.transition;Pp.transition=null;try{on=4,RP(t,e,n,r)}finally{on=s,Pp.transition=i}}function RP(t,e,n,r){if(eE){var s=Wx(t,e,n,r);if(s===null)qS(t,e,r,tE,n),aD(t,r);else if(AK(s,t,e,n,r))r.stopPropagation();else if(aD(t,r),e&4&&-1<SK.indexOf(t)){for(;s!==null;){var i=Y0(s);if(i!==null&&s8(i),i=Wx(t,e,n,r),i===null&&qS(t,e,r,tE,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qS(t,e,r,null,n)}}var tE=null;function Wx(t,e,n,r){if(tE=null,t=IP(r),t=Md(t),t!==null)if(e=Vh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q6(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tE=t,null}function l8(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gK()){case xP:return 1;case e8:return 4;case Z_:case mK:return 16;case t8:return 536870912;default:return 16}default:return 16}}var cu=null,PP=null,p_=null;function u8(){if(p_)return p_;var t,e=PP,n=e.length,r,s="value"in cu?cu.value:cu.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return p_=s.slice(t,1<r?1-r:void 0)}function g_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rb(){return!0}function lD(){return!1}function Ji(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rb:lD,this.isPropagationStopped=lD,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rb)},persist:function(){},isPersistent:rb}),e}var Wg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kP=Ji(Wg),K0=Qn({},Wg,{view:0,detail:0}),NK=Ji(K0),$S,MS,km,IC=Qn({},K0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==km&&(km&&t.type==="mousemove"?($S=t.screenX-km.screenX,MS=t.screenY-km.screenY):MS=$S=0,km=t),$S)},movementY:function(t){return"movementY"in t?t.movementY:MS}}),uD=Ji(IC),RK=Qn({},IC,{dataTransfer:0}),PK=Ji(RK),kK=Qn({},K0,{relatedTarget:0}),LS=Ji(kK),OK=Qn({},Wg,{animationName:0,elapsedTime:0,pseudoElement:0}),DK=Ji(OK),$K=Qn({},Wg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MK=Ji($K),LK=Qn({},Wg,{data:0}),dD=Ji(LK),UK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BK[t])?!!e[t]:!1}function OP(){return FK}var WK=Qn({},K0,{key:function(t){if(t.key){var e=UK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=g_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OP,charCode:function(t){return t.type==="keypress"?g_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?g_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zK=Ji(WK),qK=Qn({},IC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hD=Ji(qK),HK=Qn({},K0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OP}),VK=Ji(HK),GK=Qn({},Wg,{propertyName:0,elapsedTime:0,pseudoElement:0}),KK=Ji(GK),YK=Qn({},IC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QK=Ji(YK),JK=[9,13,27,32],DP=rl&&"CompositionEvent"in window,ky=null;rl&&"documentMode"in document&&(ky=document.documentMode);var ZK=rl&&"TextEvent"in window&&!ky,d8=rl&&(!DP||ky&&8<ky&&11>=ky),fD=" ",pD=!1;function h8(t,e){switch(t){case"keyup":return JK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f8(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dp=!1;function XK(t,e){switch(t){case"compositionend":return f8(e);case"keypress":return e.which!==32?null:(pD=!0,fD);case"textInput":return t=e.data,t===fD&&pD?null:t;default:return null}}function eY(t,e){if(dp)return t==="compositionend"||!DP&&h8(t,e)?(t=u8(),p_=PP=cu=null,dp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d8&&e.locale!=="ko"?null:e.data;default:return null}}var tY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tY[t.type]:e==="textarea"}function p8(t,e,n,r){H6(r),e=nE(e,"onChange"),0<e.length&&(n=new kP("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oy=null,yw=null;function nY(t){A8(t,0)}function xC(t){var e=pp(t);if(U6(e))return t}function rY(t,e){if(t==="change")return e}var g8=!1;if(rl){var US;if(rl){var jS="oninput"in document;if(!jS){var mD=document.createElement("div");mD.setAttribute("oninput","return;"),jS=typeof mD.oninput=="function"}US=jS}else US=!1;g8=US&&(!document.documentMode||9<document.documentMode)}function yD(){Oy&&(Oy.detachEvent("onpropertychange",m8),yw=Oy=null)}function m8(t){if(t.propertyName==="value"&&xC(yw)){var e=[];p8(e,yw,t,IP(t)),Y6(nY,e)}}function sY(t,e,n){t==="focusin"?(yD(),Oy=e,yw=n,Oy.attachEvent("onpropertychange",m8)):t==="focusout"&&yD()}function iY(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xC(yw)}function oY(t,e){if(t==="click")return xC(e)}function aY(t,e){if(t==="input"||t==="change")return xC(e)}function cY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ga=typeof Object.is=="function"?Object.is:cY;function ww(t,e){if(ga(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sx.call(e,s)||!ga(t[s],e[s]))return!1}return!0}function wD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vD(t,e){var n=wD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wD(n)}}function y8(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y8(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w8(){for(var t=window,e=Y_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Y_(t.document)}return e}function $P(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lY(t){var e=w8(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y8(n.ownerDocument.documentElement,n)){if(r!==null&&$P(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vD(n,i);var o=vD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uY=rl&&"documentMode"in document&&11>=document.documentMode,hp=null,zx=null,Dy=null,qx=!1;function bD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qx||hp==null||hp!==Y_(r)||(r=hp,"selectionStart"in r&&$P(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dy&&ww(Dy,r)||(Dy=r,r=nE(zx,"onSelect"),0<r.length&&(e=new kP("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hp)))}function sb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fp={animationend:sb("Animation","AnimationEnd"),animationiteration:sb("Animation","AnimationIteration"),animationstart:sb("Animation","AnimationStart"),transitionend:sb("Transition","TransitionEnd")},BS={},v8={};rl&&(v8=document.createElement("div").style,"AnimationEvent"in window||(delete fp.animationend.animation,delete fp.animationiteration.animation,delete fp.animationstart.animation),"TransitionEvent"in window||delete fp.transitionend.transition);function TC(t){if(BS[t])return BS[t];if(!fp[t])return t;var e=fp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v8)return BS[t]=e[n];return t}var b8=TC("animationend"),_8=TC("animationiteration"),E8=TC("animationstart"),C8=TC("transitionend"),S8=new Map,_D="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zu(t,e){S8.set(t,e),Hh(e,[t])}for(var FS=0;FS<_D.length;FS++){var WS=_D[FS],dY=WS.toLowerCase(),hY=WS[0].toUpperCase()+WS.slice(1);Zu(dY,"on"+hY)}Zu(b8,"onAnimationEnd");Zu(_8,"onAnimationIteration");Zu(E8,"onAnimationStart");Zu("dblclick","onDoubleClick");Zu("focusin","onFocus");Zu("focusout","onBlur");Zu(C8,"onTransitionEnd");rg("onMouseEnter",["mouseout","mouseover"]);rg("onMouseLeave",["mouseout","mouseover"]);rg("onPointerEnter",["pointerout","pointerover"]);rg("onPointerLeave",["pointerout","pointerover"]);Hh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fY=new Set("cancel close invalid load scroll toggle".split(" ").concat(gy));function ED(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dK(r,e,void 0,t),t.currentTarget=null}function A8(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;ED(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;ED(s,a,l),i=c}}}if(J_)throw t=jx,J_=!1,jx=null,t}function Dn(t,e){var n=e[Yx];n===void 0&&(n=e[Yx]=new Set);var r=t+"__bubble";n.has(r)||(I8(e,t,2,!1),n.add(r))}function zS(t,e,n){var r=0;e&&(r|=4),I8(n,t,r,e)}var ib="_reactListening"+Math.random().toString(36).slice(2);function vw(t){if(!t[ib]){t[ib]=!0,O6.forEach(function(n){n!=="selectionchange"&&(fY.has(n)||zS(n,!1,t),zS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ib]||(e[ib]=!0,zS("selectionchange",!1,e))}}function I8(t,e,n,r){switch(l8(e)){case 1:var s=xK;break;case 4:s=TK;break;default:s=RP}n=s.bind(null,e,n,t),s=void 0,!Ux||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qS(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Md(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Y6(function(){var l=i,u=IP(n),d=[];e:{var h=S8.get(t);if(h!==void 0){var f=kP,p=t;switch(t){case"keypress":if(g_(n)===0)break e;case"keydown":case"keyup":f=zK;break;case"focusin":p="focus",f=LS;break;case"focusout":p="blur",f=LS;break;case"beforeblur":case"afterblur":f=LS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=uD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=VK;break;case b8:case _8:case E8:f=DK;break;case C8:f=KK;break;case"scroll":f=NK;break;case"wheel":f=QK;break;case"copy":case"cut":case"paste":f=MK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=hD}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,b;v!==null;){b=v;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,y!==null&&(E=fw(v,y),E!=null&&g.push(bw(v,E,b)))),w)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Mx&&(p=n.relatedTarget||n.fromElement)&&(Md(p)||p[sl]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Md(p):null,p!==null&&(w=Vh(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=uD,E="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=hD,E="onPointerLeave",y="onPointerEnter",v="pointer"),w=f==null?h:pp(f),b=p==null?h:pp(p),h=new g(E,v+"leave",f,n,u),h.target=w,h.relatedTarget=b,E=null,Md(u)===l&&(g=new g(y,v+"enter",p,n,u),g.target=b,g.relatedTarget=w,E=g),w=E,f&&p)t:{for(g=f,y=p,v=0,b=g;b;b=bf(b))v++;for(b=0,E=y;E;E=bf(E))b++;for(;0<v-b;)g=bf(g),v--;for(;0<b-v;)y=bf(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=bf(g),y=bf(y)}g=null}else g=null;f!==null&&CD(d,h,f,g,!1),p!==null&&w!==null&&CD(d,w,p,g,!0)}}e:{if(h=l?pp(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=rY;else if(gD(h))if(g8)C=aY;else{C=iY;var A=sY}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=oY);if(C&&(C=C(t,l))){p8(d,C,n,u);break e}A&&A(t,h,l),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Px(h,"number",h.value)}switch(A=l?pp(l):window,t){case"focusin":(gD(A)||A.contentEditable==="true")&&(hp=A,zx=l,Dy=null);break;case"focusout":Dy=zx=hp=null;break;case"mousedown":qx=!0;break;case"contextmenu":case"mouseup":case"dragend":qx=!1,bD(d,n,u);break;case"selectionchange":if(uY)break;case"keydown":case"keyup":bD(d,n,u)}var I;if(DP)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else dp?h8(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(d8&&n.locale!=="ko"&&(dp||x!=="onCompositionStart"?x==="onCompositionEnd"&&dp&&(I=u8()):(cu=u,PP="value"in cu?cu.value:cu.textContent,dp=!0)),A=nE(l,x),0<A.length&&(x=new dD(x,t,null,n,u),d.push({event:x,listeners:A}),I?x.data=I:(I=f8(n),I!==null&&(x.data=I)))),(I=ZK?XK(t,n):eY(t,n))&&(l=nE(l,"onBeforeInput"),0<l.length&&(u=new dD("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=I))}A8(d,e)})}function bw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nE(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fw(t,n),i!=null&&r.unshift(bw(t,i,s)),i=fw(t,e),i!=null&&r.push(bw(t,i,s))),t=t.return}return r}function bf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CD(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=fw(n,i),c!=null&&o.unshift(bw(n,c,a))):s||(c=fw(n,i),c!=null&&o.push(bw(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pY=/\r\n?/g,gY=/\u0000|\uFFFD/g;function SD(t){return(typeof t=="string"?t:""+t).replace(pY,`
`).replace(gY,"")}function ob(t,e,n){if(e=SD(e),SD(t)!==e&&n)throw Error(ge(425))}function rE(){}var Hx=null,Vx=null;function Gx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kx=typeof setTimeout=="function"?setTimeout:void 0,mY=typeof clearTimeout=="function"?clearTimeout:void 0,AD=typeof Promise=="function"?Promise:void 0,yY=typeof queueMicrotask=="function"?queueMicrotask:typeof AD<"u"?function(t){return AD.resolve(null).then(t).catch(wY)}:Kx;function wY(t){setTimeout(function(){throw t})}function HS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mw(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mw(e)}function bu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ID(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zg=Math.random().toString(36).slice(2),Va="__reactFiber$"+zg,_w="__reactProps$"+zg,sl="__reactContainer$"+zg,Yx="__reactEvents$"+zg,vY="__reactListeners$"+zg,bY="__reactHandles$"+zg;function Md(t){var e=t[Va];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sl]||n[Va]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ID(t);t!==null;){if(n=t[Va])return n;t=ID(t)}return e}t=n,n=t.parentNode}return null}function Y0(t){return t=t[Va]||t[sl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function NC(t){return t[_w]||null}var Qx=[],gp=-1;function Xu(t){return{current:t}}function Ln(t){0>gp||(t.current=Qx[gp],Qx[gp]=null,gp--)}function On(t,e){gp++,Qx[gp]=t.current,t.current=e}var Fu={},bs=Xu(Fu),gi=Xu(!1),ph=Fu;function sg(t,e){var n=t.type.contextTypes;if(!n)return Fu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mi(t){return t=t.childContextTypes,t!=null}function sE(){Ln(gi),Ln(bs)}function xD(t,e,n){if(bs.current!==Fu)throw Error(ge(168));On(bs,e),On(gi,n)}function x8(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ge(108,sK(t)||"Unknown",s));return Qn({},n,r)}function iE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fu,ph=bs.current,On(bs,t),On(gi,gi.current),!0}function TD(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=x8(t,e,ph),r.__reactInternalMemoizedMergedChildContext=t,Ln(gi),Ln(bs),On(bs,t)):Ln(gi),On(gi,n)}var Lc=null,RC=!1,VS=!1;function T8(t){Lc===null?Lc=[t]:Lc.push(t)}function _Y(t){RC=!0,T8(t)}function ed(){if(!VS&&Lc!==null){VS=!0;var t=0,e=on;try{var n=Lc;for(on=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lc=null,RC=!1}catch(s){throw Lc!==null&&(Lc=Lc.slice(t+1)),X6(xP,ed),s}finally{on=e,VS=!1}}return null}var mp=[],yp=0,oE=null,aE=0,wo=[],vo=0,gh=null,qc=1,Hc="";function _d(t,e){mp[yp++]=aE,mp[yp++]=oE,oE=t,aE=e}function N8(t,e,n){wo[vo++]=qc,wo[vo++]=Hc,wo[vo++]=gh,gh=t;var r=qc;t=Hc;var s=32-ua(r)-1;r&=~(1<<s),n+=1;var i=32-ua(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qc=1<<32-ua(e)+s|n<<s|r,Hc=i+t}else qc=1<<i|n<<s|r,Hc=t}function MP(t){t.return!==null&&(_d(t,1),N8(t,1,0))}function LP(t){for(;t===oE;)oE=mp[--yp],mp[yp]=null,aE=mp[--yp],mp[yp]=null;for(;t===gh;)gh=wo[--vo],wo[vo]=null,Hc=wo[--vo],wo[vo]=null,qc=wo[--vo],wo[vo]=null}var qi=null,Fi=null,Wn=!1,ea=null;function R8(t,e){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ND(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qi=t,Fi=bu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qi=t,Fi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gh!==null?{id:qc,overflow:Hc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qi=t,Fi=null,!0):!1;default:return!1}}function Jx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zx(t){if(Wn){var e=Fi;if(e){var n=e;if(!ND(t,e)){if(Jx(t))throw Error(ge(418));e=bu(n.nextSibling);var r=qi;e&&ND(t,e)?R8(r,n):(t.flags=t.flags&-4097|2,Wn=!1,qi=t)}}else{if(Jx(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Wn=!1,qi=t}}}function RD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qi=t}function ab(t){if(t!==qi)return!1;if(!Wn)return RD(t),Wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gx(t.type,t.memoizedProps)),e&&(e=Fi)){if(Jx(t))throw P8(),Error(ge(418));for(;e;)R8(t,e),e=bu(e.nextSibling)}if(RD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fi=bu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fi=null}}else Fi=qi?bu(t.stateNode.nextSibling):null;return!0}function P8(){for(var t=Fi;t;)t=bu(t.nextSibling)}function ig(){Fi=qi=null,Wn=!1}function UP(t){ea===null?ea=[t]:ea.push(t)}var EY=fl.ReactCurrentBatchConfig;function Om(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function cb(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PD(t){var e=t._init;return e(t._payload)}function k8(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=Su(y,v),y.index=0,y.sibling=null,y}function i(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,E){return v===null||v.tag!==6?(v=XS(b,y.mode,E),v.return=y,v):(v=s(v,b),v.return=y,v)}function c(y,v,b,E){var C=b.type;return C===up?u(y,v,b.props.children,E,b.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jl&&PD(C)===v.type)?(E=s(v,b.props),E.ref=Om(y,v,b),E.return=y,E):(E=E_(b.type,b.key,b.props,null,y.mode,E),E.ref=Om(y,v,b),E.return=y,E)}function l(y,v,b,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=eA(b,y.mode,E),v.return=y,v):(v=s(v,b.children||[]),v.return=y,v)}function u(y,v,b,E,C){return v===null||v.tag!==7?(v=oh(b,y.mode,E,C),v.return=y,v):(v=s(v,b),v.return=y,v)}function d(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=XS(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jv:return b=E_(v.type,v.key,v.props,null,y.mode,b),b.ref=Om(y,null,v),b.return=y,b;case lp:return v=eA(v,y.mode,b),v.return=y,v;case jl:var E=v._init;return d(y,E(v._payload),b)}if(fy(v)||Tm(v))return v=oh(v,y.mode,b,null),v.return=y,v;cb(y,v)}return null}function h(y,v,b,E){var C=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(y,v,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jv:return b.key===C?c(y,v,b,E):null;case lp:return b.key===C?l(y,v,b,E):null;case jl:return C=b._init,h(y,v,C(b._payload),E)}if(fy(b)||Tm(b))return C!==null?null:u(y,v,b,E,null);cb(y,b)}return null}function f(y,v,b,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(b)||null,a(v,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jv:return y=y.get(E.key===null?b:E.key)||null,c(v,y,E,C);case lp:return y=y.get(E.key===null?b:E.key)||null,l(v,y,E,C);case jl:var A=E._init;return f(y,v,b,A(E._payload),C)}if(fy(E)||Tm(E))return y=y.get(b)||null,u(v,y,E,C,null);cb(v,E)}return null}function p(y,v,b,E){for(var C=null,A=null,I=v,x=v=0,S=null;I!==null&&x<b.length;x++){I.index>x?(S=I,I=null):S=I.sibling;var O=h(y,I,b[x],E);if(O===null){I===null&&(I=S);break}t&&I&&O.alternate===null&&e(y,I),v=i(O,v,x),A===null?C=O:A.sibling=O,A=O,I=S}if(x===b.length)return n(y,I),Wn&&_d(y,x),C;if(I===null){for(;x<b.length;x++)I=d(y,b[x],E),I!==null&&(v=i(I,v,x),A===null?C=I:A.sibling=I,A=I);return Wn&&_d(y,x),C}for(I=r(y,I);x<b.length;x++)S=f(I,y,x,b[x],E),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?x:S.key),v=i(S,v,x),A===null?C=S:A.sibling=S,A=S);return t&&I.forEach(function(P){return e(y,P)}),Wn&&_d(y,x),C}function g(y,v,b,E){var C=Tm(b);if(typeof C!="function")throw Error(ge(150));if(b=C.call(b),b==null)throw Error(ge(151));for(var A=C=null,I=v,x=v=0,S=null,O=b.next();I!==null&&!O.done;x++,O=b.next()){I.index>x?(S=I,I=null):S=I.sibling;var P=h(y,I,O.value,E);if(P===null){I===null&&(I=S);break}t&&I&&P.alternate===null&&e(y,I),v=i(P,v,x),A===null?C=P:A.sibling=P,A=P,I=S}if(O.done)return n(y,I),Wn&&_d(y,x),C;if(I===null){for(;!O.done;x++,O=b.next())O=d(y,O.value,E),O!==null&&(v=i(O,v,x),A===null?C=O:A.sibling=O,A=O);return Wn&&_d(y,x),C}for(I=r(y,I);!O.done;x++,O=b.next())O=f(I,y,x,O.value,E),O!==null&&(t&&O.alternate!==null&&I.delete(O.key===null?x:O.key),v=i(O,v,x),A===null?C=O:A.sibling=O,A=O);return t&&I.forEach(function(j){return e(y,j)}),Wn&&_d(y,x),C}function w(y,v,b,E){if(typeof b=="object"&&b!==null&&b.type===up&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jv:e:{for(var C=b.key,A=v;A!==null;){if(A.key===C){if(C=b.type,C===up){if(A.tag===7){n(y,A.sibling),v=s(A,b.props.children),v.return=y,y=v;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jl&&PD(C)===A.type){n(y,A.sibling),v=s(A,b.props),v.ref=Om(y,A,b),v.return=y,y=v;break e}n(y,A);break}else e(y,A);A=A.sibling}b.type===up?(v=oh(b.props.children,y.mode,E,b.key),v.return=y,y=v):(E=E_(b.type,b.key,b.props,null,y.mode,E),E.ref=Om(y,v,b),E.return=y,y=E)}return o(y);case lp:e:{for(A=b.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=s(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=eA(b,y.mode,E),v.return=y,y=v}return o(y);case jl:return A=b._init,w(y,v,A(b._payload),E)}if(fy(b))return p(y,v,b,E);if(Tm(b))return g(y,v,b,E);cb(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,b),v.return=y,y=v):(n(y,v),v=XS(b,y.mode,E),v.return=y,y=v),o(y)):n(y,v)}return w}var og=k8(!0),O8=k8(!1),cE=Xu(null),lE=null,wp=null,jP=null;function BP(){jP=wp=lE=null}function FP(t){var e=cE.current;Ln(cE),t._currentValue=e}function Xx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function kp(t,e){lE=t,jP=wp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hi=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if(jP!==t)if(t={context:t,memoizedValue:e,next:null},wp===null){if(lE===null)throw Error(ge(308));wp=t,lE.dependencies={lanes:0,firstContext:t}}else wp=wp.next=t;return e}var Ld=null;function WP(t){Ld===null?Ld=[t]:Ld.push(t)}function D8(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,WP(e)):(n.next=s.next,s.next=n),e.interleaved=n,il(t,r)}function il(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bl=!1;function zP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $8(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _u(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Bt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,il(t,n)}return s=r.interleaved,s===null?(e.next=e,WP(r)):(e.next=s.next,s.next=e),r.interleaved=e,il(t,n)}function m_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,TP(t,n)}}function kD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uE(t,e,n,r){var s=t.updateQueue;Bl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Qn({},d,h);break e;case 2:Bl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yh|=o,t.lanes=o,t.memoizedState=d}}function OD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ge(191,s));s.call(r)}}}var Q0={},Za=Xu(Q0),Ew=Xu(Q0),Cw=Xu(Q0);function Ud(t){if(t===Q0)throw Error(ge(174));return t}function qP(t,e){switch(On(Cw,e),On(Ew,t),On(Za,Q0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ox(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ox(e,t)}Ln(Za),On(Za,e)}function ag(){Ln(Za),Ln(Ew),Ln(Cw)}function M8(t){Ud(Cw.current);var e=Ud(Za.current),n=Ox(e,t.type);e!==n&&(On(Ew,t),On(Za,n))}function HP(t){Ew.current===t&&(Ln(Za),Ln(Ew))}var Vn=Xu(0);function dE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var GS=[];function VP(){for(var t=0;t<GS.length;t++)GS[t]._workInProgressVersionPrimary=null;GS.length=0}var y_=fl.ReactCurrentDispatcher,KS=fl.ReactCurrentBatchConfig,mh=0,Yn=null,br=null,Mr=null,hE=!1,$y=!1,Sw=0,CY=0;function hs(){throw Error(ge(321))}function GP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ga(t[n],e[n]))return!1;return!0}function KP(t,e,n,r,s,i){if(mh=i,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,y_.current=t===null||t.memoizedState===null?xY:TY,t=n(r,s),$y){i=0;do{if($y=!1,Sw=0,25<=i)throw Error(ge(301));i+=1,Mr=br=null,e.updateQueue=null,y_.current=NY,t=n(r,s)}while($y)}if(y_.current=fE,e=br!==null&&br.next!==null,mh=0,Mr=br=Yn=null,hE=!1,e)throw Error(ge(300));return t}function YP(){var t=Sw!==0;return Sw=0,t}function $a(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Yn.memoizedState=Mr=t:Mr=Mr.next=t,Mr}function So(){if(br===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=br.next;var e=Mr===null?Yn.memoizedState:Mr.next;if(e!==null)Mr=e,br=t;else{if(t===null)throw Error(ge(310));br=t,t={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Mr===null?Yn.memoizedState=Mr=t:Mr=Mr.next=t}return Mr}function Aw(t,e){return typeof e=="function"?e(t):e}function YS(t){var e=So(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=br,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((mh&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Yn.lanes|=u,yh|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,ga(r,e.memoizedState)||(hi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Yn.lanes|=i,yh|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function QS(t){var e=So(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ga(i,e.memoizedState)||(hi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function L8(){}function U8(t,e){var n=Yn,r=So(),s=e(),i=!ga(r.memoizedState,s);if(i&&(r.memoizedState=s,hi=!0),r=r.queue,QP(F8.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Mr!==null&&Mr.memoizedState.tag&1){if(n.flags|=2048,Iw(9,B8.bind(null,n,r,s,e),void 0,null),qr===null)throw Error(ge(349));mh&30||j8(n,e,s)}return s}function j8(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function B8(t,e,n,r){e.value=n,e.getSnapshot=r,W8(e)&&z8(t)}function F8(t,e,n){return n(function(){W8(e)&&z8(t)})}function W8(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ga(t,n)}catch{return!0}}function z8(t){var e=il(t,1);e!==null&&da(e,t,1,-1)}function DD(t){var e=$a();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aw,lastRenderedState:t},e.queue=t,t=t.dispatch=IY.bind(null,Yn,t),[e.memoizedState,t]}function Iw(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function q8(){return So().memoizedState}function w_(t,e,n,r){var s=$a();Yn.flags|=t,s.memoizedState=Iw(1|e,n,void 0,r===void 0?null:r)}function PC(t,e,n,r){var s=So();r=r===void 0?null:r;var i=void 0;if(br!==null){var o=br.memoizedState;if(i=o.destroy,r!==null&&GP(r,o.deps)){s.memoizedState=Iw(e,n,i,r);return}}Yn.flags|=t,s.memoizedState=Iw(1|e,n,i,r)}function $D(t,e){return w_(8390656,8,t,e)}function QP(t,e){return PC(2048,8,t,e)}function H8(t,e){return PC(4,2,t,e)}function V8(t,e){return PC(4,4,t,e)}function G8(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K8(t,e,n){return n=n!=null?n.concat([t]):null,PC(4,4,G8.bind(null,e,t),n)}function JP(){}function Y8(t,e){var n=So();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&GP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q8(t,e){var n=So();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&GP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function J8(t,e,n){return mh&21?(ga(n,e)||(n=n8(),Yn.lanes|=n,yh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hi=!0),t.memoizedState=n)}function SY(t,e){var n=on;on=n!==0&&4>n?n:4,t(!0);var r=KS.transition;KS.transition={};try{t(!1),e()}finally{on=n,KS.transition=r}}function Z8(){return So().memoizedState}function AY(t,e,n){var r=Cu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},X8(t))eB(e,n);else if(n=D8(t,e,n,r),n!==null){var s=Ms();da(n,t,r,s),tB(n,e,r)}}function IY(t,e,n){var r=Cu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(X8(t))eB(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ga(a,o)){var c=e.interleaved;c===null?(s.next=s,WP(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=D8(t,e,s,r),n!==null&&(s=Ms(),da(n,t,r,s),tB(n,e,r))}}function X8(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function eB(t,e){$y=hE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,TP(t,n)}}var fE={readContext:Co,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},xY={readContext:Co,useCallback:function(t,e){return $a().memoizedState=[t,e===void 0?null:e],t},useContext:Co,useEffect:$D,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,w_(4194308,4,G8.bind(null,e,t),n)},useLayoutEffect:function(t,e){return w_(4194308,4,t,e)},useInsertionEffect:function(t,e){return w_(4,2,t,e)},useMemo:function(t,e){var n=$a();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$a();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AY.bind(null,Yn,t),[r.memoizedState,t]},useRef:function(t){var e=$a();return t={current:t},e.memoizedState=t},useState:DD,useDebugValue:JP,useDeferredValue:function(t){return $a().memoizedState=t},useTransition:function(){var t=DD(!1),e=t[0];return t=SY.bind(null,t[1]),$a().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yn,s=$a();if(Wn){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),qr===null)throw Error(ge(349));mh&30||j8(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$D(F8.bind(null,r,i,t),[t]),r.flags|=2048,Iw(9,B8.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$a(),e=qr.identifierPrefix;if(Wn){var n=Hc,r=qc;n=(r&~(1<<32-ua(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CY++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TY={readContext:Co,useCallback:Y8,useContext:Co,useEffect:QP,useImperativeHandle:K8,useInsertionEffect:H8,useLayoutEffect:V8,useMemo:Q8,useReducer:YS,useRef:q8,useState:function(){return YS(Aw)},useDebugValue:JP,useDeferredValue:function(t){var e=So();return J8(e,br.memoizedState,t)},useTransition:function(){var t=YS(Aw)[0],e=So().memoizedState;return[t,e]},useMutableSource:L8,useSyncExternalStore:U8,useId:Z8,unstable_isNewReconciler:!1},NY={readContext:Co,useCallback:Y8,useContext:Co,useEffect:QP,useImperativeHandle:K8,useInsertionEffect:H8,useLayoutEffect:V8,useMemo:Q8,useReducer:QS,useRef:q8,useState:function(){return QS(Aw)},useDebugValue:JP,useDeferredValue:function(t){var e=So();return br===null?e.memoizedState=t:J8(e,br.memoizedState,t)},useTransition:function(){var t=QS(Aw)[0],e=So().memoizedState;return[t,e]},useMutableSource:L8,useSyncExternalStore:U8,useId:Z8,unstable_isNewReconciler:!1};function Ko(t,e){if(t&&t.defaultProps){e=Qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kC={isMounted:function(t){return(t=t._reactInternals)?Vh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ms(),s=Cu(t),i=Yc(r,s);i.payload=e,n!=null&&(i.callback=n),e=_u(t,i,s),e!==null&&(da(e,t,s,r),m_(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ms(),s=Cu(t),i=Yc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=_u(t,i,s),e!==null&&(da(e,t,s,r),m_(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ms(),r=Cu(t),s=Yc(n,r);s.tag=2,e!=null&&(s.callback=e),e=_u(t,s,r),e!==null&&(da(e,t,r,n),m_(e,t,r))}};function MD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ww(n,r)||!ww(s,i):!0}function nB(t,e,n){var r=!1,s=Fu,i=e.contextType;return typeof i=="object"&&i!==null?i=Co(i):(s=mi(e)?ph:bs.current,r=e.contextTypes,i=(r=r!=null)?sg(t,s):Fu),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function LD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kC.enqueueReplaceState(e,e.state,null)}function tT(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zP(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Co(i):(i=mi(e)?ph:bs.current,s.context=sg(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eT(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kC.enqueueReplaceState(s,s.state,null),uE(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function cg(t,e){try{var n="",r=e;do n+=rK(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function JS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RY=typeof WeakMap=="function"?WeakMap:Map;function rB(t,e,n){n=Yc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gE||(gE=!0,hT=r),nT(t,e)},n}function sB(t,e,n){n=Yc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nT(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nT(t,e),typeof r!="function"&&(Eu===null?Eu=new Set([this]):Eu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function UD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RY;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qY.bind(null,t,e,n),e.then(t,t))}function jD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function BD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yc(-1,1),e.tag=2,_u(n,e,1))),n.lanes|=1),t)}var PY=fl.ReactCurrentOwner,hi=!1;function Rs(t,e,n,r){e.child=t===null?O8(e,null,n,r):og(e,t.child,n,r)}function FD(t,e,n,r,s){n=n.render;var i=e.ref;return kp(e,s),r=KP(t,e,n,r,i,s),n=YP(),t!==null&&!hi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ol(t,e,s)):(Wn&&n&&MP(e),e.flags|=1,Rs(t,e,r,s),e.child)}function WD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ik(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iB(t,e,i,r,s)):(t=E_(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ww,n(o,r)&&t.ref===e.ref)return ol(t,e,s)}return e.flags|=1,t=Su(i,r),t.ref=e.ref,t.return=e,e.child=t}function iB(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ww(i,r)&&t.ref===e.ref)if(hi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hi=!0);else return e.lanes=t.lanes,ol(t,e,s)}return rT(t,e,n,r,s)}function oB(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(bp,Mi),Mi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,On(bp,Mi),Mi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,On(bp,Mi),Mi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,On(bp,Mi),Mi|=r;return Rs(t,e,s,n),e.child}function aB(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rT(t,e,n,r,s){var i=mi(n)?ph:bs.current;return i=sg(e,i),kp(e,s),n=KP(t,e,n,r,i,s),r=YP(),t!==null&&!hi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ol(t,e,s)):(Wn&&r&&MP(e),e.flags|=1,Rs(t,e,n,s),e.child)}function zD(t,e,n,r,s){if(mi(n)){var i=!0;iE(e)}else i=!1;if(kp(e,s),e.stateNode===null)v_(t,e),nB(e,n,r),tT(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Co(l):(l=mi(n)?ph:bs.current,l=sg(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&LD(e,o,r,l),Bl=!1;var h=e.memoizedState;o.state=h,uE(e,r,o,s),c=e.memoizedState,a!==r||h!==c||gi.current||Bl?(typeof u=="function"&&(eT(e,n,u,r),c=e.memoizedState),(a=Bl||MD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$8(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ko(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Co(c):(c=mi(n)?ph:bs.current,c=sg(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&LD(e,o,r,c),Bl=!1,h=e.memoizedState,o.state=h,uE(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||gi.current||Bl?(typeof f=="function"&&(eT(e,n,f,r),p=e.memoizedState),(l=Bl||MD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return sT(t,e,n,r,i,s)}function sT(t,e,n,r,s,i){aB(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&TD(e,n,!1),ol(t,e,i);r=e.stateNode,PY.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=og(e,t.child,null,i),e.child=og(e,null,a,i)):Rs(t,e,a,i),e.memoizedState=r.state,s&&TD(e,n,!0),e.child}function cB(t){var e=t.stateNode;e.pendingContext?xD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xD(t,e.context,!1),qP(t,e.containerInfo)}function qD(t,e,n,r,s){return ig(),UP(s),e.flags|=256,Rs(t,e,n,r),e.child}var iT={dehydrated:null,treeContext:null,retryLane:0};function oT(t){return{baseLanes:t,cachePool:null,transitions:null}}function lB(t,e,n){var r=e.pendingProps,s=Vn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),On(Vn,s&1),t===null)return Zx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=$C(o,r,0,null),t=oh(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=oT(n),e.memoizedState=iT,t):ZP(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return kY(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Su(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Su(a,i):(i=oh(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?oT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=iT,r}return i=t.child,t=i.sibling,r=Su(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ZP(t,e){return e=$C({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lb(t,e,n,r){return r!==null&&UP(r),og(e,t.child,null,n),t=ZP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kY(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=JS(Error(ge(422))),lb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=$C({mode:"visible",children:r.children},s,0,null),i=oh(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&og(e,t.child,null,o),e.child.memoizedState=oT(o),e.memoizedState=iT,i);if(!(e.mode&1))return lb(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ge(419)),r=JS(i,r,void 0),lb(t,e,o,r)}if(a=(o&t.childLanes)!==0,hi||a){if(r=qr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,il(t,s),da(r,t,s,-1))}return sk(),r=JS(Error(ge(421))),lb(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HY.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fi=bu(s.nextSibling),qi=e,Wn=!0,ea=null,t!==null&&(wo[vo++]=qc,wo[vo++]=Hc,wo[vo++]=gh,qc=t.id,Hc=t.overflow,gh=e),e=ZP(e,r.children),e.flags|=4096,e)}function HD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xx(t.return,e,n)}function ZS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uB(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rs(t,e,r.children,n),r=Vn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HD(t,n,e);else if(t.tag===19)HD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(On(Vn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&dE(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ZS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&dE(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ZS(e,!0,n,null,i);break;case"together":ZS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function v_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ol(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=Su(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Su(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OY(t,e,n){switch(e.tag){case 3:cB(e),ig();break;case 5:M8(e);break;case 1:mi(e.type)&&iE(e);break;case 4:qP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;On(cE,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(On(Vn,Vn.current&1),e.flags|=128,null):n&e.child.childLanes?lB(t,e,n):(On(Vn,Vn.current&1),t=ol(t,e,n),t!==null?t.sibling:null);On(Vn,Vn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uB(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),On(Vn,Vn.current),r)break;return null;case 22:case 23:return e.lanes=0,oB(t,e,n)}return ol(t,e,n)}var dB,aT,hB,fB;dB=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};aT=function(){};hB=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ud(Za.current);var i=null;switch(n){case"input":s=Nx(t,s),r=Nx(t,r),i=[];break;case"select":s=Qn({},s,{value:void 0}),r=Qn({},r,{value:void 0}),i=[];break;case"textarea":s=kx(t,s),r=kx(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rE)}Dx(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dw.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(dw.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Dn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};fB=function(t,e,n,r){n!==r&&(e.flags|=4)};function Dm(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DY(t,e,n){var r=e.pendingProps;switch(LP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(e),null;case 1:return mi(e.type)&&sE(),fs(e),null;case 3:return r=e.stateNode,ag(),Ln(gi),Ln(bs),VP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ab(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ea!==null&&(gT(ea),ea=null))),aT(t,e),fs(e),null;case 5:HP(e);var s=Ud(Cw.current);if(n=e.type,t!==null&&e.stateNode!=null)hB(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return fs(e),null}if(t=Ud(Za.current),ab(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Va]=e,r[_w]=i,t=(e.mode&1)!==0,n){case"dialog":Dn("cancel",r),Dn("close",r);break;case"iframe":case"object":case"embed":Dn("load",r);break;case"video":case"audio":for(s=0;s<gy.length;s++)Dn(gy[s],r);break;case"source":Dn("error",r);break;case"img":case"image":case"link":Dn("error",r),Dn("load",r);break;case"details":Dn("toggle",r);break;case"input":eD(r,i),Dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Dn("invalid",r);break;case"textarea":nD(r,i),Dn("invalid",r)}Dx(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ob(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ob(r.textContent,a,t),s=["children",""+a]):dw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dn("scroll",r)}switch(n){case"input":Zv(r),tD(r,i,!0);break;case"textarea":Zv(r),rD(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rE)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=F6(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Va]=e,t[_w]=r,dB(t,e,!1,!1),e.stateNode=t;e:{switch(o=$x(n,r),n){case"dialog":Dn("cancel",t),Dn("close",t),s=r;break;case"iframe":case"object":case"embed":Dn("load",t),s=r;break;case"video":case"audio":for(s=0;s<gy.length;s++)Dn(gy[s],t);s=r;break;case"source":Dn("error",t),s=r;break;case"img":case"image":case"link":Dn("error",t),Dn("load",t),s=r;break;case"details":Dn("toggle",t),s=r;break;case"input":eD(t,r),s=Nx(t,r),Dn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qn({},r,{value:void 0}),Dn("invalid",t);break;case"textarea":nD(t,r),s=kx(t,r),Dn("invalid",t);break;default:s=r}Dx(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?q6(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&W6(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&hw(t,c):typeof c=="number"&&hw(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dw.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Dn("scroll",t):c!=null&&EP(t,i,c,o))}switch(n){case"input":Zv(t),tD(t,r,!1);break;case"textarea":Zv(t),rD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tp(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fs(e),null;case 6:if(t&&e.stateNode!=null)fB(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=Ud(Cw.current),Ud(Za.current),ab(e)){if(r=e.stateNode,n=e.memoizedProps,r[Va]=e,(i=r.nodeValue!==n)&&(t=qi,t!==null))switch(t.tag){case 3:ob(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ob(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Va]=e,e.stateNode=r}return fs(e),null;case 13:if(Ln(Vn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wn&&Fi!==null&&e.mode&1&&!(e.flags&128))P8(),ig(),e.flags|=98560,i=!1;else if(i=ab(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ge(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[Va]=e}else ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fs(e),i=!1}else ea!==null&&(gT(ea),ea=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vn.current&1?Ar===0&&(Ar=3):sk())),e.updateQueue!==null&&(e.flags|=4),fs(e),null);case 4:return ag(),aT(t,e),t===null&&vw(e.stateNode.containerInfo),fs(e),null;case 10:return FP(e.type._context),fs(e),null;case 17:return mi(e.type)&&sE(),fs(e),null;case 19:if(Ln(Vn),i=e.memoizedState,i===null)return fs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Dm(i,!1);else{if(Ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dE(t),o!==null){for(e.flags|=128,Dm(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return On(Vn,Vn.current&1|2),e.child}t=t.sibling}i.tail!==null&&cr()>lg&&(e.flags|=128,r=!0,Dm(i,!1),e.lanes=4194304)}else{if(!r)if(t=dE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Wn)return fs(e),null}else 2*cr()-i.renderingStartTime>lg&&n!==1073741824&&(e.flags|=128,r=!0,Dm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=cr(),e.sibling=null,n=Vn.current,On(Vn,r?n&1|2:n&1),e):(fs(e),null);case 22:case 23:return rk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mi&1073741824&&(fs(e),e.subtreeFlags&6&&(e.flags|=8192)):fs(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function $Y(t,e){switch(LP(e),e.tag){case 1:return mi(e.type)&&sE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ag(),Ln(gi),Ln(bs),VP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return HP(e),null;case 13:if(Ln(Vn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));ig()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ln(Vn),null;case 4:return ag(),null;case 10:return FP(e.type._context),null;case 22:case 23:return rk(),null;case 24:return null;default:return null}}var ub=!1,ws=!1,MY=typeof WeakSet=="function"?WeakSet:Set,Le=null;function vp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tr(t,e,r)}else n.current=null}function cT(t,e,n){try{n()}catch(r){tr(t,e,r)}}var VD=!1;function LY(t,e){if(Hx=eE,t=w8(),$P(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vx={focusedElem:t,selectionRange:n},eE=!1,Le=e;Le!==null;)if(e=Le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Le=t;else for(;Le!==null;){e=Le;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ko(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(E){tr(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}return p=VD,VD=!1,p}function My(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cT(e,n,i)}s=s.next}while(s!==r)}}function OC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pB(t){var e=t.alternate;e!==null&&(t.alternate=null,pB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Va],delete e[_w],delete e[Yx],delete e[vY],delete e[bY])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gB(t){return t.tag===5||t.tag===3||t.tag===4}function GD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rE));else if(r!==4&&(t=t.child,t!==null))for(uT(t,e,n),t=t.sibling;t!==null;)uT(t,e,n),t=t.sibling}function dT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dT(t,e,n),t=t.sibling;t!==null;)dT(t,e,n),t=t.sibling}var es=null,Zo=!1;function wl(t,e,n){for(n=n.child;n!==null;)mB(t,e,n),n=n.sibling}function mB(t,e,n){if(Ja&&typeof Ja.onCommitFiberUnmount=="function")try{Ja.onCommitFiberUnmount(AC,n)}catch{}switch(n.tag){case 5:ws||vp(n,e);case 6:var r=es,s=Zo;es=null,wl(t,e,n),es=r,Zo=s,es!==null&&(Zo?(t=es,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):es.removeChild(n.stateNode));break;case 18:es!==null&&(Zo?(t=es,n=n.stateNode,t.nodeType===8?HS(t.parentNode,n):t.nodeType===1&&HS(t,n),mw(t)):HS(es,n.stateNode));break;case 4:r=es,s=Zo,es=n.stateNode.containerInfo,Zo=!0,wl(t,e,n),es=r,Zo=s;break;case 0:case 11:case 14:case 15:if(!ws&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cT(n,e,o),s=s.next}while(s!==r)}wl(t,e,n);break;case 1:if(!ws&&(vp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tr(n,e,a)}wl(t,e,n);break;case 21:wl(t,e,n);break;case 22:n.mode&1?(ws=(r=ws)||n.memoizedState!==null,wl(t,e,n),ws=r):wl(t,e,n);break;default:wl(t,e,n)}}function KD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MY),e.forEach(function(r){var s=VY.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Uo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:es=a.stateNode,Zo=!1;break e;case 3:es=a.stateNode.containerInfo,Zo=!0;break e;case 4:es=a.stateNode.containerInfo,Zo=!0;break e}a=a.return}if(es===null)throw Error(ge(160));mB(i,o,s),es=null,Zo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){tr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yB(e,t),e=e.sibling}function yB(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Uo(e,t),Ia(t),r&4){try{My(3,t,t.return),OC(3,t)}catch(g){tr(t,t.return,g)}try{My(5,t,t.return)}catch(g){tr(t,t.return,g)}}break;case 1:Uo(e,t),Ia(t),r&512&&n!==null&&vp(n,n.return);break;case 5:if(Uo(e,t),Ia(t),r&512&&n!==null&&vp(n,n.return),t.flags&32){var s=t.stateNode;try{hw(s,"")}catch(g){tr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&j6(s,i),$x(a,o);var l=$x(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?q6(s,d):u==="dangerouslySetInnerHTML"?W6(s,d):u==="children"?hw(s,d):EP(s,u,d,l)}switch(a){case"input":Rx(s,i);break;case"textarea":B6(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Tp(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Tp(s,!!i.multiple,i.defaultValue,!0):Tp(s,!!i.multiple,i.multiple?[]:"",!1))}s[_w]=i}catch(g){tr(t,t.return,g)}}break;case 6:if(Uo(e,t),Ia(t),r&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){tr(t,t.return,g)}}break;case 3:if(Uo(e,t),Ia(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mw(e.containerInfo)}catch(g){tr(t,t.return,g)}break;case 4:Uo(e,t),Ia(t);break;case 13:Uo(e,t),Ia(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tk=cr())),r&4&&KD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ws=(l=ws)||u,Uo(e,t),ws=l):Uo(e,t),Ia(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Le=t,u=t.child;u!==null;){for(d=Le=u;Le!==null;){switch(h=Le,f=h.child,h.tag){case 0:case 11:case 14:case 15:My(4,h,h.return);break;case 1:vp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){tr(r,n,g)}}break;case 5:vp(h,h.return);break;case 22:if(h.memoizedState!==null){QD(d);continue}}f!==null?(f.return=h,Le=f):QD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=z6("display",o))}catch(g){tr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){tr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Uo(e,t),Ia(t),r&4&&KD(t);break;case 21:break;default:Uo(e,t),Ia(t)}}function Ia(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gB(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hw(s,""),r.flags&=-33);var i=GD(t);dT(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=GD(t);uT(t,a,o);break;default:throw Error(ge(161))}}catch(c){tr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UY(t,e,n){Le=t,wB(t)}function wB(t,e,n){for(var r=(t.mode&1)!==0;Le!==null;){var s=Le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ub;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ws;a=ub;var l=ws;if(ub=o,(ws=c)&&!l)for(Le=s;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?JD(s):c!==null?(c.return=o,Le=c):JD(s);for(;i!==null;)Le=i,wB(i),i=i.sibling;Le=s,ub=a,ws=l}YD(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Le=i):YD(t)}}function YD(t){for(;Le!==null;){var e=Le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ws||OC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ws)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ko(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&OD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&mw(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}ws||e.flags&512&&lT(e)}catch(h){tr(e,e.return,h)}}if(e===t){Le=null;break}if(n=e.sibling,n!==null){n.return=e.return,Le=n;break}Le=e.return}}function QD(t){for(;Le!==null;){var e=Le;if(e===t){Le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Le=n;break}Le=e.return}}function JD(t){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{OC(4,e)}catch(c){tr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){tr(e,s,c)}}var i=e.return;try{lT(e)}catch(c){tr(e,i,c)}break;case 5:var o=e.return;try{lT(e)}catch(c){tr(e,o,c)}}}catch(c){tr(e,e.return,c)}if(e===t){Le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Le=a;break}Le=e.return}}var jY=Math.ceil,pE=fl.ReactCurrentDispatcher,XP=fl.ReactCurrentOwner,Eo=fl.ReactCurrentBatchConfig,Bt=0,qr=null,gr=null,rs=0,Mi=0,bp=Xu(0),Ar=0,xw=null,yh=0,DC=0,ek=0,Ly=null,li=null,tk=0,lg=1/0,$c=null,gE=!1,hT=null,Eu=null,db=!1,lu=null,mE=0,Uy=0,fT=null,b_=-1,__=0;function Ms(){return Bt&6?cr():b_!==-1?b_:b_=cr()}function Cu(t){return t.mode&1?Bt&2&&rs!==0?rs&-rs:EY.transition!==null?(__===0&&(__=n8()),__):(t=on,t!==0||(t=window.event,t=t===void 0?16:l8(t.type)),t):1}function da(t,e,n,r){if(50<Uy)throw Uy=0,fT=null,Error(ge(185));G0(t,n,r),(!(Bt&2)||t!==qr)&&(t===qr&&(!(Bt&2)&&(DC|=n),Ar===4&&Gl(t,rs)),yi(t,r),n===1&&Bt===0&&!(e.mode&1)&&(lg=cr()+500,RC&&ed()))}function yi(t,e){var n=t.callbackNode;EK(t,e);var r=X_(t,t===qr?rs:0);if(r===0)n!==null&&oD(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&oD(n),e===1)t.tag===0?_Y(ZD.bind(null,t)):T8(ZD.bind(null,t)),yY(function(){!(Bt&6)&&ed()}),n=null;else{switch(r8(r)){case 1:n=xP;break;case 4:n=e8;break;case 16:n=Z_;break;case 536870912:n=t8;break;default:n=Z_}n=IB(n,vB.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vB(t,e){if(b_=-1,__=0,Bt&6)throw Error(ge(327));var n=t.callbackNode;if(Op()&&t.callbackNode!==n)return null;var r=X_(t,t===qr?rs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yE(t,r);else{e=r;var s=Bt;Bt|=2;var i=_B();(qr!==t||rs!==e)&&($c=null,lg=cr()+500,ih(t,e));do try{WY();break}catch(a){bB(t,a)}while(!0);BP(),pE.current=i,Bt=s,gr!==null?e=0:(qr=null,rs=0,e=Ar)}if(e!==0){if(e===2&&(s=Bx(t),s!==0&&(r=s,e=pT(t,s))),e===1)throw n=xw,ih(t,0),Gl(t,r),yi(t,cr()),n;if(e===6)Gl(t,r);else{if(s=t.current.alternate,!(r&30)&&!BY(s)&&(e=yE(t,r),e===2&&(i=Bx(t),i!==0&&(r=i,e=pT(t,i))),e===1))throw n=xw,ih(t,0),Gl(t,r),yi(t,cr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:Ed(t,li,$c);break;case 3:if(Gl(t,r),(r&130023424)===r&&(e=tk+500-cr(),10<e)){if(X_(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ms(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kx(Ed.bind(null,t,li,$c),e);break}Ed(t,li,$c);break;case 4:if(Gl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ua(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=cr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jY(r/1960))-r,10<r){t.timeoutHandle=Kx(Ed.bind(null,t,li,$c),r);break}Ed(t,li,$c);break;case 5:Ed(t,li,$c);break;default:throw Error(ge(329))}}}return yi(t,cr()),t.callbackNode===n?vB.bind(null,t):null}function pT(t,e){var n=Ly;return t.current.memoizedState.isDehydrated&&(ih(t,e).flags|=256),t=yE(t,e),t!==2&&(e=li,li=n,e!==null&&gT(e)),t}function gT(t){li===null?li=t:li.push.apply(li,t)}function BY(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ga(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gl(t,e){for(e&=~ek,e&=~DC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ua(e),r=1<<n;t[n]=-1,e&=~r}}function ZD(t){if(Bt&6)throw Error(ge(327));Op();var e=X_(t,0);if(!(e&1))return yi(t,cr()),null;var n=yE(t,e);if(t.tag!==0&&n===2){var r=Bx(t);r!==0&&(e=r,n=pT(t,r))}if(n===1)throw n=xw,ih(t,0),Gl(t,e),yi(t,cr()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ed(t,li,$c),yi(t,cr()),null}function nk(t,e){var n=Bt;Bt|=1;try{return t(e)}finally{Bt=n,Bt===0&&(lg=cr()+500,RC&&ed())}}function wh(t){lu!==null&&lu.tag===0&&!(Bt&6)&&Op();var e=Bt;Bt|=1;var n=Eo.transition,r=on;try{if(Eo.transition=null,on=1,t)return t()}finally{on=r,Eo.transition=n,Bt=e,!(Bt&6)&&ed()}}function rk(){Mi=bp.current,Ln(bp)}function ih(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mY(n)),gr!==null)for(n=gr.return;n!==null;){var r=n;switch(LP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sE();break;case 3:ag(),Ln(gi),Ln(bs),VP();break;case 5:HP(r);break;case 4:ag();break;case 13:Ln(Vn);break;case 19:Ln(Vn);break;case 10:FP(r.type._context);break;case 22:case 23:rk()}n=n.return}if(qr=t,gr=t=Su(t.current,null),rs=Mi=e,Ar=0,xw=null,ek=DC=yh=0,li=Ly=null,Ld!==null){for(e=0;e<Ld.length;e++)if(n=Ld[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ld=null}return t}function bB(t,e){do{var n=gr;try{if(BP(),y_.current=fE,hE){for(var r=Yn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hE=!1}if(mh=0,Mr=br=Yn=null,$y=!1,Sw=0,XP.current=null,n===null||n.return===null){Ar=1,xw=e,gr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=rs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=jD(o);if(f!==null){f.flags&=-257,BD(f,o,a,i,e),f.mode&1&&UD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){UD(i,l,e),sk();break e}c=Error(ge(426))}}else if(Wn&&a.mode&1){var w=jD(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),BD(w,o,a,i,e),UP(cg(c,a));break e}}i=c=cg(c,a),Ar!==4&&(Ar=2),Ly===null?Ly=[i]:Ly.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=rB(i,c,e);kD(i,y);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Eu===null||!Eu.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=sB(i,a,e);kD(i,E);break e}}i=i.return}while(i!==null)}CB(n)}catch(C){e=C,gr===n&&n!==null&&(gr=n=n.return);continue}break}while(!0)}function _B(){var t=pE.current;return pE.current=fE,t===null?fE:t}function sk(){(Ar===0||Ar===3||Ar===2)&&(Ar=4),qr===null||!(yh&268435455)&&!(DC&268435455)||Gl(qr,rs)}function yE(t,e){var n=Bt;Bt|=2;var r=_B();(qr!==t||rs!==e)&&($c=null,ih(t,e));do try{FY();break}catch(s){bB(t,s)}while(!0);if(BP(),Bt=n,pE.current=r,gr!==null)throw Error(ge(261));return qr=null,rs=0,Ar}function FY(){for(;gr!==null;)EB(gr)}function WY(){for(;gr!==null&&!fK();)EB(gr)}function EB(t){var e=AB(t.alternate,t,Mi);t.memoizedProps=t.pendingProps,e===null?CB(t):gr=e,XP.current=null}function CB(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$Y(n,e),n!==null){n.flags&=32767,gr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ar=6,gr=null;return}}else if(n=DY(n,e,Mi),n!==null){gr=n;return}if(e=e.sibling,e!==null){gr=e;return}gr=e=t}while(e!==null);Ar===0&&(Ar=5)}function Ed(t,e,n){var r=on,s=Eo.transition;try{Eo.transition=null,on=1,zY(t,e,n,r)}finally{Eo.transition=s,on=r}return null}function zY(t,e,n,r){do Op();while(lu!==null);if(Bt&6)throw Error(ge(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CK(t,i),t===qr&&(gr=qr=null,rs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||db||(db=!0,IB(Z_,function(){return Op(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Eo.transition,Eo.transition=null;var o=on;on=1;var a=Bt;Bt|=4,XP.current=null,LY(t,n),yB(n,t),lY(Vx),eE=!!Hx,Vx=Hx=null,t.current=n,UY(n),pK(),Bt=a,on=o,Eo.transition=i}else t.current=n;if(db&&(db=!1,lu=t,mE=s),i=t.pendingLanes,i===0&&(Eu=null),yK(n.stateNode),yi(t,cr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gE)throw gE=!1,t=hT,hT=null,t;return mE&1&&t.tag!==0&&Op(),i=t.pendingLanes,i&1?t===fT?Uy++:(Uy=0,fT=t):Uy=0,ed(),null}function Op(){if(lu!==null){var t=r8(mE),e=Eo.transition,n=on;try{if(Eo.transition=null,on=16>t?16:t,lu===null)var r=!1;else{if(t=lu,lu=null,mE=0,Bt&6)throw Error(ge(331));var s=Bt;for(Bt|=4,Le=t.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Le=l;Le!==null;){var u=Le;switch(u.tag){case 0:case 11:case 15:My(8,u,i)}var d=u.child;if(d!==null)d.return=u,Le=d;else for(;Le!==null;){u=Le;var h=u.sibling,f=u.return;if(pB(u),u===l){Le=null;break}if(h!==null){h.return=f,Le=h;break}Le=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:My(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Le=y;break e}Le=i.return}}var v=t.current;for(Le=v;Le!==null;){o=Le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Le=b;else e:for(o=v;Le!==null;){if(a=Le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:OC(9,a)}}catch(C){tr(a,a.return,C)}if(a===o){Le=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Le=E;break e}Le=a.return}}if(Bt=s,ed(),Ja&&typeof Ja.onPostCommitFiberRoot=="function")try{Ja.onPostCommitFiberRoot(AC,t)}catch{}r=!0}return r}finally{on=n,Eo.transition=e}}return!1}function XD(t,e,n){e=cg(n,e),e=rB(t,e,1),t=_u(t,e,1),e=Ms(),t!==null&&(G0(t,1,e),yi(t,e))}function tr(t,e,n){if(t.tag===3)XD(t,t,n);else for(;e!==null;){if(e.tag===3){XD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eu===null||!Eu.has(r))){t=cg(n,t),t=sB(e,t,1),e=_u(e,t,1),t=Ms(),e!==null&&(G0(e,1,t),yi(e,t));break}}e=e.return}}function qY(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ms(),t.pingedLanes|=t.suspendedLanes&n,qr===t&&(rs&n)===n&&(Ar===4||Ar===3&&(rs&130023424)===rs&&500>cr()-tk?ih(t,0):ek|=n),yi(t,e)}function SB(t,e){e===0&&(t.mode&1?(e=tb,tb<<=1,!(tb&130023424)&&(tb=4194304)):e=1);var n=Ms();t=il(t,e),t!==null&&(G0(t,e,n),yi(t,n))}function HY(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SB(t,n)}function VY(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),SB(t,n)}var AB;AB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gi.current)hi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hi=!1,OY(t,e,n);hi=!!(t.flags&131072)}else hi=!1,Wn&&e.flags&1048576&&N8(e,aE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;v_(t,e),t=e.pendingProps;var s=sg(e,bs.current);kp(e,n),s=KP(null,e,r,t,s,n);var i=YP();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)?(i=!0,iE(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zP(e),s.updater=kC,e.stateNode=s,s._reactInternals=e,tT(e,r,t,n),e=sT(null,e,r,!0,i,n)):(e.tag=0,Wn&&i&&MP(e),Rs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(v_(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KY(r),t=Ko(r,t),s){case 0:e=rT(null,e,r,t,n);break e;case 1:e=zD(null,e,r,t,n);break e;case 11:e=FD(null,e,r,t,n);break e;case 14:e=WD(null,e,r,Ko(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ko(r,s),rT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ko(r,s),zD(t,e,r,s,n);case 3:e:{if(cB(e),t===null)throw Error(ge(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$8(t,e),uE(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=cg(Error(ge(423)),e),e=qD(t,e,r,n,s);break e}else if(r!==s){s=cg(Error(ge(424)),e),e=qD(t,e,r,n,s);break e}else for(Fi=bu(e.stateNode.containerInfo.firstChild),qi=e,Wn=!0,ea=null,n=O8(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ig(),r===s){e=ol(t,e,n);break e}Rs(t,e,r,n)}e=e.child}return e;case 5:return M8(e),t===null&&Zx(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gx(r,s)?o=null:i!==null&&Gx(r,i)&&(e.flags|=32),aB(t,e),Rs(t,e,o,n),e.child;case 6:return t===null&&Zx(e),null;case 13:return lB(t,e,n);case 4:return qP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=og(e,null,r,n):Rs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ko(r,s),FD(t,e,r,s,n);case 7:return Rs(t,e,e.pendingProps,n),e.child;case 8:return Rs(t,e,e.pendingProps.children,n),e.child;case 12:return Rs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,On(cE,r._currentValue),r._currentValue=o,i!==null)if(ga(i.value,o)){if(i.children===s.children&&!gi.current){e=ol(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Yc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Xx(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,kp(e,n),s=Co(s),r=r(s),e.flags|=1,Rs(t,e,r,n),e.child;case 14:return r=e.type,s=Ko(r,e.pendingProps),s=Ko(r.type,s),WD(t,e,r,s,n);case 15:return iB(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ko(r,s),v_(t,e),e.tag=1,mi(r)?(t=!0,iE(e)):t=!1,kp(e,n),nB(e,r,s),tT(e,r,s,n),sT(null,e,r,!0,t,n);case 19:return uB(t,e,n);case 22:return oB(t,e,n)}throw Error(ge(156,e.tag))};function IB(t,e){return X6(t,e)}function GY(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(t,e,n,r){return new GY(t,e,n,r)}function ik(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KY(t){if(typeof t=="function")return ik(t)?1:0;if(t!=null){if(t=t.$$typeof,t===SP)return 11;if(t===AP)return 14}return 2}function Su(t,e){var n=t.alternate;return n===null?(n=bo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function E_(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ik(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case up:return oh(n.children,s,i,e);case CP:o=8,s|=8;break;case Ax:return t=bo(12,n,e,s|2),t.elementType=Ax,t.lanes=i,t;case Ix:return t=bo(13,n,e,s),t.elementType=Ix,t.lanes=i,t;case xx:return t=bo(19,n,e,s),t.elementType=xx,t.lanes=i,t;case M6:return $C(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D6:o=10;break e;case $6:o=9;break e;case SP:o=11;break e;case AP:o=14;break e;case jl:o=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=bo(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function oh(t,e,n,r){return t=bo(7,t,r,e),t.lanes=n,t}function $C(t,e,n,r){return t=bo(22,t,r,e),t.elementType=M6,t.lanes=n,t.stateNode={isHidden:!1},t}function XS(t,e,n){return t=bo(6,t,null,e),t.lanes=n,t}function eA(t,e,n){return e=bo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YY(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DS(0),this.expirationTimes=DS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DS(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ok(t,e,n,r,s,i,o,a,c){return t=new YY(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bo(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zP(i),t}function QY(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xB(t){if(!t)return Fu;t=t._reactInternals;e:{if(Vh(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(mi(n))return x8(t,n,e)}return e}function TB(t,e,n,r,s,i,o,a,c){return t=ok(n,r,!0,t,s,i,o,a,c),t.context=xB(null),n=t.current,r=Ms(),s=Cu(n),i=Yc(r,s),i.callback=e??null,_u(n,i,s),t.current.lanes=s,G0(t,s,r),yi(t,r),t}function MC(t,e,n,r){var s=e.current,i=Ms(),o=Cu(s);return n=xB(n),e.context===null?e.context=n:e.pendingContext=n,e=Yc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_u(s,e,o),t!==null&&(da(t,s,o,i),m_(t,s,o)),o}function wE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e$(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ak(t,e){e$(t,e),(t=t.alternate)&&e$(t,e)}function JY(){return null}var NB=typeof reportError=="function"?reportError:function(t){console.error(t)};function ck(t){this._internalRoot=t}LC.prototype.render=ck.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));MC(t,e,null,null)};LC.prototype.unmount=ck.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wh(function(){MC(null,t,null,null)}),e[sl]=null}};function LC(t){this._internalRoot=t}LC.prototype.unstable_scheduleHydration=function(t){if(t){var e=o8();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vl.length&&e!==0&&e<Vl[n].priority;n++);Vl.splice(n,0,t),n===0&&c8(t)}};function lk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function UC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t$(){}function ZY(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=wE(o);i.call(l)}}var o=TB(e,r,t,0,null,!1,!1,"",t$);return t._reactRootContainer=o,t[sl]=o.current,vw(t.nodeType===8?t.parentNode:t),wh(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=wE(c);a.call(l)}}var c=ok(t,0,!1,null,null,!1,!1,"",t$);return t._reactRootContainer=c,t[sl]=c.current,vw(t.nodeType===8?t.parentNode:t),wh(function(){MC(e,c,n,r)}),c}function jC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=wE(o);a.call(c)}}MC(e,o,t,s)}else o=ZY(n,e,t,s,r);return wE(o)}s8=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=py(e.pendingLanes);n!==0&&(TP(e,n|1),yi(e,cr()),!(Bt&6)&&(lg=cr()+500,ed()))}break;case 13:wh(function(){var r=il(t,1);if(r!==null){var s=Ms();da(r,t,1,s)}}),ak(t,1)}};NP=function(t){if(t.tag===13){var e=il(t,134217728);if(e!==null){var n=Ms();da(e,t,134217728,n)}ak(t,134217728)}};i8=function(t){if(t.tag===13){var e=Cu(t),n=il(t,e);if(n!==null){var r=Ms();da(n,t,e,r)}ak(t,e)}};o8=function(){return on};a8=function(t,e){var n=on;try{return on=t,e()}finally{on=n}};Lx=function(t,e,n){switch(e){case"input":if(Rx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=NC(r);if(!s)throw Error(ge(90));U6(r),Rx(r,s)}}}break;case"textarea":B6(t,n);break;case"select":e=n.value,e!=null&&Tp(t,!!n.multiple,e,!1)}};G6=nk;K6=wh;var XY={usingClientEntryPoint:!1,Events:[Y0,pp,NC,H6,V6,nk]},$m={findFiberByHostInstance:Md,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eQ={bundleType:$m.bundleType,version:$m.version,rendererPackageName:$m.rendererPackageName,rendererConfig:$m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=J6(t),t===null?null:t.stateNode},findFiberByHostInstance:$m.findFiberByHostInstance||JY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hb.isDisabled&&hb.supportsFiber)try{AC=hb.inject(eQ),Ja=hb}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XY;Qi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lk(e))throw Error(ge(200));return QY(t,e,null,n)};Qi.createRoot=function(t,e){if(!lk(t))throw Error(ge(299));var n=!1,r="",s=NB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ok(t,1,!1,null,null,n,!1,r,s),t[sl]=e.current,vw(t.nodeType===8?t.parentNode:t),new ck(e)};Qi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=J6(e),t=t===null?null:t.stateNode,t};Qi.flushSync=function(t){return wh(t)};Qi.hydrate=function(t,e,n){if(!UC(e))throw Error(ge(200));return jC(null,t,e,!0,n)};Qi.hydrateRoot=function(t,e,n){if(!lk(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=NB;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TB(e,null,t,1,n??null,s,!1,i,o),t[sl]=e.current,vw(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new LC(e)};Qi.render=function(t,e,n){if(!UC(e))throw Error(ge(200));return jC(null,t,e,!1,n)};Qi.unmountComponentAtNode=function(t){if(!UC(t))throw Error(ge(40));return t._reactRootContainer?(wh(function(){jC(null,null,t,!1,function(){t._reactRootContainer=null,t[sl]=null})}),!0):!1};Qi.unstable_batchedUpdates=nk;Qi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!UC(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return jC(t,e,n,!1,r)};Qi.version="18.3.1-next-f1338f8080-20240426";function RB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RB)}catch(t){console.error(t)}}RB(),R6.exports=Qi;var uk=R6.exports,n$=uk;Cx.createRoot=n$.createRoot,Cx.hydrateRoot=n$.hydrateRoot;const PB="2.31.7";let Mm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${PB}`},he=class mT extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof mT?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof mT&&n.cause.docsPath||n.docsPath,i=(a=Mm.getDocsUrl)==null?void 0:a.call(Mm,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Mm.version?[`Version: ${Mm.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=PB}walk(e){return kB(this,e)}};function kB(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?kB(t.cause,e):e?null:t}let OB=class extends he{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class tQ extends he{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class nQ extends he{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let rQ=class extends he{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},DB=class extends he{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},$B=class extends he{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class r$ extends he{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function qg(t,{dir:e,size:n=32}={}){return typeof t=="string"?Au(t,{dir:e,size:n}):sQ(t,{dir:e,size:n})}function Au(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new $B({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function sQ(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new $B({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function sc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function rr(t){return sc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Xa(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const iQ=new TextEncoder;function Hg(t,e={}){return typeof t=="number"||typeof t=="bigint"?aQ(t,e):typeof t=="boolean"?oQ(t,e):sc(t)?Ao(t,e):ah(t,e)}function oQ(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ro(n,{size:e.size}),qg(n,{size:e.size})):n}const wc={zero:48,nine:57,A:65,F:70,a:97,f:102};function s$(t){if(t>=wc.zero&&t<=wc.nine)return t-wc.zero;if(t>=wc.A&&t<=wc.F)return t-(wc.A-10);if(t>=wc.a&&t<=wc.f)return t-(wc.a-10)}function Ao(t,e={}){let n=t;e.size&&(Ro(n,{size:e.size}),n=qg(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=s$(r.charCodeAt(a++)),l=s$(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new he(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function aQ(t,e){const n=ze(t,e);return Ao(n)}function ah(t,e={}){const n=iQ.encode(t);return typeof e.size=="number"?(Ro(n,{size:e.size}),qg(n,{dir:"right",size:e.size})):n}function Ro(t,{size:e}){if(rr(t)>e)throw new rQ({givenSize:rr(t),maxSize:e})}function Ki(t,e={}){const{signed:n}=e;e.size&&Ro(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function cQ(t,e={}){let n=t;if(e.size&&(Ro(n,{size:e.size}),n=Xa(n)),Xa(n)==="0x00")return!1;if(Xa(n)==="0x01")return!0;throw new nQ(n)}function ma(t,e={}){return Number(Ki(t,e))}function MB(t,e={}){let n=Ao(t);return e.size&&(Ro(n,{size:e.size}),n=Xa(n,{dir:"right"})),new TextDecoder().decode(n)}const lQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Io(t,e={}){return typeof t=="number"||typeof t=="bigint"?ze(t,e):typeof t=="string"?ug(t,e):typeof t=="boolean"?LB(t,e):Tr(t,e)}function LB(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ro(n,{size:e.size}),qg(n,{size:e.size})):n}function Tr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=lQ[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ro(r,{size:e.size}),qg(r,{dir:"right",size:e.size})):r}function ze(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new OB({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?qg(a,{size:r}):a}const uQ=new TextEncoder;function ug(t,e={}){const n=uQ.encode(t);return Tr(n,e)}async function dQ(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:ze(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function ya(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new SQ(t.type);return`${t.name}(${BC(t.inputs,{includeName:e})})`}function BC(t,{includeName:e=!1}={}){return t?t.map(n=>hQ(n,{includeName:e})).join(e?", ":","):""}function hQ(t,{includeName:e}){return t.type.startsWith("tuple")?`(${BC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class fQ extends he{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class i$ extends he{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class UB extends he{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${BC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class J0 extends he{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class pQ extends he{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class gQ extends he{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${rr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class mQ extends he{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class yQ extends he{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class o$ extends he{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class jB extends he{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class wQ extends he{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class BB extends he{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class a$ extends he{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class dg extends he{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class FB extends he{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class vQ extends he{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class bQ extends he{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ya(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ya(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let _Q=class extends he{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Tw extends he{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${BC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class FC extends he{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ya(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class EQ extends he{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class CQ extends he{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let WB=class extends he{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class SQ extends he{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function xo(t){return typeof t[0]=="string"?Vg(t):AQ(t)}function AQ(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Vg(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let Wu=class extends he{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},WC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const fb=BigInt(2**32-1),c$=BigInt(32);function IQ(t,e=!1){return e?{h:Number(t&fb),l:Number(t>>c$&fb)}:{h:Number(t>>c$&fb)|0,l:Number(t&fb)|0}}function xQ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=IQ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const TQ=(t,e,n)=>t<<n|e>>>32-n,NQ=(t,e,n)=>e<<n|t>>>32-n,RQ=(t,e,n)=>e<<n-32|t>>>64-n,PQ=(t,e,n)=>t<<n-32|e>>>64-n,_f=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dk(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Nw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function wa(t,...e){if(!dk(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function kQ(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Nw(t.outputLen),Nw(t.blockLen)}function hg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zB(t,e){wa(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function OQ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function fg(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function tA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xa(t,e){return t<<32-e|t>>>e}const DQ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $Q(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function MQ(t){for(let e=0;e<t.length;e++)t[e]=$Q(t[e]);return t}const l$=DQ?t=>t:MQ,qB=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",LQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Rw(t){if(wa(t),qB)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=LQ[t[n]];return e}const vc={_0:48,_9:57,A:65,F:70,a:97,f:102};function u$(t){if(t>=vc._0&&t<=vc._9)return t-vc._0;if(t>=vc.A&&t<=vc.F)return t-(vc.A-10);if(t>=vc.a&&t<=vc.f)return t-(vc.a-10)}function hk(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(qB)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=u$(t.charCodeAt(i)),a=u$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function UQ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Z0(t){return typeof t=="string"&&(t=UQ(t)),wa(t),t}function jd(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];wa(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let fk=class{};function HB(t){const e=r=>t().update(Z0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function jQ(t){const e=(r,s)=>t(s).update(Z0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function BQ(t=32){if(_f&&typeof _f.getRandomValues=="function")return _f.getRandomValues(new Uint8Array(t));if(_f&&typeof _f.randomBytes=="function")return Uint8Array.from(_f.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const FQ=BigInt(0),Lm=BigInt(1),WQ=BigInt(2),zQ=BigInt(7),qQ=BigInt(256),HQ=BigInt(113),VB=[],GB=[],KB=[];for(let t=0,e=Lm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],VB.push(2*(5*r+n)),GB.push((t+1)*(t+2)/2%64);let s=FQ;for(let i=0;i<7;i++)e=(e<<Lm^(e>>zQ)*HQ)%qQ,e&WQ&&(s^=Lm<<(Lm<<BigInt(i))-Lm);KB.push(s)}const YB=xQ(KB,!0),VQ=YB[0],GQ=YB[1],d$=(t,e,n)=>n>32?RQ(t,e,n):TQ(t,e,n),h$=(t,e,n)=>n>32?PQ(t,e,n):NQ(t,e,n);function QB(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=d$(l,u,1)^n[a],h=h$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=GB[o],c=d$(s,i,a),l=h$(s,i,a),u=VB[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=VQ[r],t[1]^=GQ[r]}fg(n)}let pk=class JB extends fk{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Nw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=OQ(this.state)}clone(){return this._cloneInto()}keccak(){l$(this.state32),QB(this.state32,this.rounds),l$(this.state32),this.posOut=0,this.pos=0}update(e){hg(this),e=Z0(e),wa(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){hg(this,!1),wa(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Nw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zB(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,fg(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new JB(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const td=(t,e,n)=>HB(()=>new pk(e,t,n)),KQ=td(6,144,224/8),YQ=td(6,136,256/8),QQ=td(6,104,384/8),JQ=td(6,72,512/8),ZQ=td(1,144,224/8),gk=td(1,136,256/8),XQ=td(1,104,384/8),eJ=td(1,72,512/8),ZB=(t,e,n)=>jQ((r={})=>new pk(e,t,r.dkLen===void 0?n:r.dkLen,!0)),tJ=ZB(31,168,128/8),nJ=ZB(31,136,256/8),Uje=Object.freeze(Object.defineProperty({__proto__:null,Keccak:pk,keccakP:QB,keccak_224:ZQ,keccak_256:gk,keccak_384:XQ,keccak_512:eJ,sha3_224:KQ,sha3_256:YQ,sha3_384:QQ,sha3_512:JQ,shake128:tJ,shake256:nJ},Symbol.toStringTag,{value:"Module"}));function ns(t,e){const n=e||"hex",r=gk(sc(t,{strict:!1})?Hg(t):t);return n==="bytes"?r:Io(r)}const nA=new WC(8192);function X0(t,e){if(nA.has(`${t}.${e}`))return nA.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ns(ah(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return nA.set(`${t}.${e}`,i),i}function Vc(t,e){if(!To(t,{strict:!1}))throw new Wu({address:t});return X0(t,e)}const rJ=/^0x[a-fA-F0-9]{40}$/,rA=new WC(8192);function To(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(rA.has(r))return rA.get(r);const s=rJ.test(t)?t.toLowerCase()===t?!0:n?X0(t)===t:!0:!1;return rA.set(r,s),s}function pg(t,e,n,{strict:r}={}){return sc(t,{strict:!1})?vE(t,e,n,{strict:r}):t4(t,e,n,{strict:r})}function XB(t,e){if(typeof e=="number"&&e>0&&e>rr(t)-1)throw new DB({offset:e,position:"start",size:rr(t)})}function e4(t,e,n){if(typeof e=="number"&&typeof n=="number"&&rr(t)!==n-e)throw new DB({offset:n,position:"end",size:rr(t)})}function t4(t,e,n,{strict:r}={}){XB(t,e);const s=t.slice(e,n);return r&&e4(s,e,n),s}function vE(t,e,n,{strict:r}={}){XB(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&e4(s,e,n),s}const sJ=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,n4=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function nd(t,e){if(t.length!==e.length)throw new mQ({expectedLength:t.length,givenLength:e.length});const n=iJ({params:t,values:e}),r=yk(n);return r.length===0?"0x":r}function iJ({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(mk({param:t[r],value:e[r]}));return n}function mk({param:t,value:e}){const n=wk(t.type);if(n){const[r,s]=n;return aJ(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return hJ(e,{param:t});if(t.type==="address")return oJ(e);if(t.type==="bool")return lJ(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=n4.exec(t.type)??[];return uJ(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return cJ(e,{param:t});if(t.type==="string")return dJ(e);throw new EQ(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function yk(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=rr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ze(e+s,{size:32})),r.push(a),s+=rr(a)):n.push(a)}return xo([...n,...r])}function oJ(t){if(!To(t))throw new Wu({address:t});return{dynamic:!1,encoded:Au(t.toLowerCase())}}function aJ(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new WB(t);if(!r&&t.length!==e)throw new pQ({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=mk({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=yk(i);if(r){const a=ze(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?xo([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:xo(i.map(({encoded:o})=>o))}}function cJ(t,{param:e}){const[,n]=e.type.split("bytes"),r=rr(t);if(!n){let s=t;return r%32!==0&&(s=Au(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:xo([Au(ze(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new gQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Au(t,{dir:"right"})}}function lJ(t){if(typeof t!="boolean")throw new he(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Au(LB(t))}}function uJ(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new OB({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ze(t,{size:32,signed:e})}}function dJ(t){const e=ug(t),n=Math.ceil(rr(e)/32),r=[];for(let s=0;s<n;s++)r.push(Au(pg(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:xo([Au(ze(rr(e),{size:32})),...r])}}function hJ(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=mk({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?yk(r):xo(r.map(({encoded:s})=>s))}}function wk(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const sA="/docs/contract/encodeDeployData";function zC(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new fQ({docsPath:sA});if(!("inputs"in s))throw new i$({docsPath:sA});if(!s.inputs||s.inputs.length===0)throw new i$({docsPath:sA});const i=nd(s.inputs,n);return Vg([r,i])}function ir(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Gh extends he{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class C_ extends he{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function fJ(t){const e=ns(`0x${t.substring(4)}`).substring(26);return X0(`0x${e}`)}const pJ="modulepreload",gJ=function(t){return"/"+t},f$={},ar=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=gJ(c),c in f$)return;f$[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":pJ,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function mJ({hash:t,signature:e}){const n=sc(t)?t:Io(t),{secp256k1:r}=await ar(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>One);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=p$(f);return new r.Signature(Ki(l),Ki(u)).addRecoveryBit(p)}const o=sc(e)?e:Io(e);if(rr(o)!==65)throw new Error("invalid signature length");const a=ma(`0x${o.slice(130)}`),c=p$(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function p$(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function r4({hash:t,signature:e}){return fJ(await mJ({hash:t,signature:e}))}class g$ extends he{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class s4 extends he{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class yJ extends he{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const wJ={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new yJ({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new s4({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new g$({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new g$({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function vk(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(wJ);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function vJ(t,e="hex"){const n=i4(t),r=vk(new Uint8Array(n.length));return n.encode(r),e==="hex"?Tr(r.bytes):r.bytes}function i4(t){return Array.isArray(t)?bJ(t.map(e=>i4(e))):_J(t)}function bJ(t){const e=t.reduce((s,i)=>s+i.length,0),n=o4(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function _J(t){const e=typeof t=="string"?Ao(t):t,n=o4(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function o4(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new he("Length is too large.")}function EJ(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ns(Vg(["0x05",vJ([e?ze(e):"0x",s,n?ze(n):"0x"])]));return r==="bytes"?Ao(i):i}async function a4(t){const{authorization:e,signature:n}=t;return r4({hash:EJ(e),signature:n??e})}class yT extends he{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class CJ extends he{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class SJ extends he{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class c4 extends he{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function l4({chain:t,currentChainId:e}){if(!t)throw new SJ;if(e!==t.id)throw new CJ({chain:t,currentChainId:e})}const AJ={gwei:9,wei:18},IJ={ether:-9,wei:9},xJ={ether:-18,gwei:-9};function Kh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function wi(t,e="wei"){return Kh(t,IJ[e])}class Bd extends he{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Bd,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class bE extends he{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${wi(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(bE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class wT extends he{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${wi(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(wT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class vT extends he{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(vT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class bT extends he{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(bT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class _T extends he{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(_T,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class ET extends he{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(ET,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class CT extends he{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(CT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ST extends he{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(ST,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class AT extends he{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(AT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class _E extends he{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${wi(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${wi(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(_E,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class ev extends he{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function bk(t,e="wei"){return Kh(t,AJ[e])}function tv(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class TJ extends he{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class NJ extends he{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",tv(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class RJ extends he{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=tv({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${bk(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${wi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${wi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${wi(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class u4 extends he{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class d4 extends he{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class PJ extends he{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Ir=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),kJ=t=>t,_k=t=>t;class jy extends he{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${_k(o)}`,e&&`Request body: ${Ir(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class Ek extends he{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${_k(r)}`,`Request body: ${Ir(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class m$ extends he{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${_k(n)}`,`Request body: ${Ir(e)}`],name:"TimeoutError"})}}const OJ=-1;class Ci extends he{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Ek?e.code:n??OJ}}class Zi extends Ci{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Pw extends Ci{constructor(e){super(e,{code:Pw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Pw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class kw extends Ci{constructor(e){super(e,{code:kw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ow extends Ci{constructor(e,{method:n}={}){super(e,{code:Ow.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Dw extends Ci{constructor(e){super(e,{code:Dw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class vh extends Ci{constructor(e){super(e,{code:vh.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class bh extends Ci{constructor(e){super(e,{code:bh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class $w extends Ci{constructor(e){super(e,{code:$w.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty($w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Iu extends Ci{constructor(e){super(e,{code:Iu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Iu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class gg extends Ci{constructor(e){super(e,{code:gg.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(gg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Fd extends Ci{constructor(e,{method:n}={}){super(e,{code:Fd.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Fd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class mg extends Ci{constructor(e){super(e,{code:mg.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(mg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Mw extends Ci{constructor(e){super(e,{code:Mw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vr extends Zi{constructor(e){super(e,{code:vr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Lw extends Zi{constructor(e){super(e,{code:Lw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Uw extends Zi{constructor(e,{method:n}={}){super(e,{code:Uw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Uw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class jw extends Zi{constructor(e){super(e,{code:jw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Bw extends Zi{constructor(e){super(e,{code:Bw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Bw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class ic extends Zi{constructor(e){super(e,{code:ic.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(ic,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class yg extends Zi{constructor(e){super(e,{code:yg.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Fw extends Zi{constructor(e){super(e,{code:Fw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Fw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Ww extends Zi{constructor(e){super(e,{code:Ww.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class zw extends Zi{constructor(e){super(e,{code:zw.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class qw extends Zi{constructor(e){super(e,{code:qw.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Hw extends Zi{constructor(e){super(e,{code:Hw.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class wg extends Zi{constructor(e){super(e,{code:wg.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class DJ extends Ci{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function qC(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof he?t.walk(s=>(s==null?void 0:s.code)===Bd.code):t;return r instanceof he?new Bd({cause:t,message:r.details}):Bd.nodeMessage.test(n)?new Bd({cause:t,message:t.details}):bE.nodeMessage.test(n)?new bE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):wT.nodeMessage.test(n)?new wT({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):vT.nodeMessage.test(n)?new vT({cause:t,nonce:e==null?void 0:e.nonce}):bT.nodeMessage.test(n)?new bT({cause:t,nonce:e==null?void 0:e.nonce}):_T.nodeMessage.test(n)?new _T({cause:t,nonce:e==null?void 0:e.nonce}):ET.nodeMessage.test(n)?new ET({cause:t}):CT.nodeMessage.test(n)?new CT({cause:t,gas:e==null?void 0:e.gas}):ST.nodeMessage.test(n)?new ST({cause:t,gas:e==null?void 0:e.gas}):AT.nodeMessage.test(n)?new AT({cause:t}):_E.nodeMessage.test(n)?new _E({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new ev({cause:t})}function h4(t,{docsPath:e,...n}){const r=(()=>{const s=qC(t,n);return s instanceof ev?t:s})();return new RJ(r,{docsPath:e,...n})}function HC(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const $J={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Gg(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=MJ(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Tr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=ze(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=ze(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=ze(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=ze(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=ze(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=ze(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=$J[t.type]),typeof t.value<"u"&&(e.value=ze(t.value)),e}function MJ(t){return t.map(e=>({address:e.address,r:e.r?ze(BigInt(e.r)):e.r,s:e.s?ze(BigInt(e.s)):e.s,chainId:ze(e.chainId),nonce:ze(e.nonce),...typeof e.yParity<"u"?{yParity:ze(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:ze(e.v)}:{}}))}function Xe(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const LJ=2n**256n-1n;function Yh(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?ir(e):void 0;if(o&&!To(o.address))throw new Wu({address:o.address});if(i&&!To(i))throw new Wu({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new TJ;if(r&&r>LJ)throw new bE({maxFeePerGas:r});if(s&&r&&s>r)throw new _E({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Kg(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return ma(e)}class UJ extends he{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Ck extends he{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class jJ extends he{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${wi(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class f4 extends he{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const p4={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function g4(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ma(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ma(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?p4[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=BJ(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function BJ(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function m4(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:g4(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Qa(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?ze(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new f4({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||m4)(c)}async function Sk(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function FJ(t,e){return y4(t,e)}async function y4(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Xe(t,Qa,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ki(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Xe(t,Qa,"getBlock")({}),Xe(t,Sk,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Ck;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function WJ(t,e){return IT(t,e)}async function IT(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new UJ;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Xe(t,Qa,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new Ck;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await y4(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Xe(t,Sk,"getGasPrice")({}))}}class zJ extends he{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=tv({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${bk(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${wi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${wi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${wi(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function qJ(t,{docsPath:e,...n}){const r=(()=>{const s=qC(t,n);return s instanceof ev?t:s})();return new zJ(r,{docsPath:e,...n})}class HJ extends he{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class VJ extends he{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function y$(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function GJ(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=y$(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=y$(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function w$(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new r$({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new r$({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function KJ(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=ze(e)),n!==void 0&&(o.nonce=ze(n)),r!==void 0&&(o.state=w$(r)),s!==void 0){if(o.state)throw new VJ;o.stateDiff=w$(s)}return o}function Ak(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!To(n,{strict:!1}))throw new Wu({address:n});if(e[n])throw new HJ({address:n});e[n]=KJ(r)}return e}async function Ik(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?ze(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function VC(t,e){var s,i,o;const{account:n=t.account}=e,r=n?ir(n):void 0;try{let B=function(T){const{block:$,request:R,rpcStateOverride:D}=T;return t.request({method:"eth_estimateGas",params:D?[R,$??"latest",D]:$?[R,$]:[R]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:b,value:E,stateOverride:C,...A}=await nv(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),x=(typeof d=="bigint"?ze(d):void 0)||h,S=Ak(C),O=await(async()=>{if(A.to)return A.to;if(c&&c.length>0)return await a4({authorization:c[0]}).catch(()=>{throw new he("`to` is required. Could not infer from `authorizationList`")})})();Yh(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,q=(P||Gg)({...HC(A,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:b,to:O,value:E});let N=BigInt(await B({block:x,request:q,rpcStateOverride:S}));if(c){const T=await Ik(t,{address:q.from}),$=await Promise.all(c.map(async R=>{const{address:D}=R,U=await B({block:x,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:D,value:ze(T)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(U)}));N+=$.reduce((R,D)=>R+D,0n)}return N}catch(a){throw qJ(a,{...e,account:r,chain:t.chain})}}async function xk(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?ze(r):n]},{dedupe:!!r});return ma(s)}function w4(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ao(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Tr(i))}function v4(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ao(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ao(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Tr(o))}function YJ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function QJ(t,e,n){return t&e^~t&n}function JJ(t,e,n){return t&e^t&n^e&n}class ZJ extends fk{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=tA(this.buffer)}update(e){hg(this),e=Z0(e),wa(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=tA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hg(this),zB(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,fg(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;YJ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=tA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const vl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),XJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bl=new Uint32Array(64);class eZ extends ZJ{constructor(e=32){super(64,e,8,!1),this.A=vl[0]|0,this.B=vl[1]|0,this.C=vl[2]|0,this.D=vl[3]|0,this.E=vl[4]|0,this.F=vl[5]|0,this.G=vl[6]|0,this.H=vl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)bl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=bl[d-15],f=bl[d-2],p=xa(h,7)^xa(h,18)^h>>>3,g=xa(f,17)^xa(f,19)^f>>>10;bl[d]=g+bl[d-7]+p+bl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=xa(a,6)^xa(a,11)^xa(a,25),f=u+h+QJ(a,c,l)+XJ[d]+bl[d]|0,g=(xa(r,2)^xa(r,13)^xa(r,22))+JJ(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){fg(bl)}destroy(){this.set(0,0,0,0,0,0,0,0),fg(this.buffer)}}const b4=HB(()=>new eZ),tZ=b4;function nZ(t,e){return tZ(sc(t,{strict:!1})?Hg(t):t)}function rZ(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=nZ(e);return s.set([n],0),r==="bytes"?s:Tr(s)}function sZ(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(rZ({commitment:i,to:r,version:n}));return s}const v$=6,_4=32,Tk=4096,E4=_4*Tk,b$=E4*v$-1-1*Tk*v$;class iZ extends he{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class oZ extends he{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function aZ(t){const e=typeof t.data=="string"?Ao(t.data):t.data,n=rr(e);if(!n)throw new oZ;if(n>b$)throw new iZ({maxSize:b$,size:n});const r=[];let s=!0,i=0;for(;s;){const o=vk(new Uint8Array(E4));let a=0;for(;a<Tk;){const c=e.slice(i,i+(_4-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Tr(o.bytes))}function cZ(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??aZ({data:e}),i=t.commitments??w4({blobs:s,kzg:n,to:r}),o=t.proofs??v4({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function lZ(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new NJ({transaction:t})}const C4=["blobVersionedHashes","chainId","fees","gas","nonce","type"],_$=new Map;async function nv(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=C4,type:u}=e,d=n&&ir(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await Xe(t,Qa,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await Xe(t,Kg,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await Xe(t,xk,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=w4({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const v=sZ({commitments:y,to:"hex"});h.blobVersionedHashes=v}if(l.includes("sidecars")){const v=v4({blobs:r,commitments:y,kzg:o}),b=cZ({blobs:r,commitments:y,proofs:v,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=lZ(h)}catch{let y=_$.get(t.uid);if(typeof y>"u"){const v=await p();y=typeof(v==null?void 0:v.baseFeePerGas)=="bigint",_$.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:v,maxPriorityFeePerGas:b}=await IT(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new jJ({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=v}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Ck;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:v}=await IT(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=v}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await Xe(t,VC,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Yh(h),delete h.parameters,h}async function Nk(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const iA=new WC(128);async function rv(t,e){var v,b,E,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new Gh({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?ir(n):null;try{Yh(e);const A=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await a4({authorization:i[0]}).catch(()=>{throw new he("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let I;r!==null&&(I=await Xe(t,Kg,"getChainId")({}),l4({currentChainId:I,chain:r}));const x=(E=(b=(v=t.chain)==null?void 0:v.formatters)==null?void 0:b.transactionRequest)==null?void 0:E.format,O=(x||Gg)({...HC(w,{format:x}),accessList:s,authorizationList:i,blobs:o,chainId:I,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:A,type:p,value:g}),P=iA.get(t.uid),j=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:j,params:[O]},{retryCount:0})}catch(q){if(P===!1)throw q;const B=q;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(N=>(iA.set(t.uid,!0),N)).catch(N=>{const T=N;throw T.name==="MethodNotFoundRpcError"||T.name==="MethodNotSupportedRpcError"?(iA.set(t.uid,!1),B):T});throw B}}if((y==null?void 0:y.type)==="local"){const I=await Xe(t,nv,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...C4,"sidecars"],type:p,value:g,...w,to:A}),x=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await y.signTransaction(I,{serializer:x});return await Xe(t,Nk,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new C_({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new C_({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(A){throw A instanceof C_?A:h4(A,{...e,account:y,chain:e.chain||void 0})}}function uZ(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=zC({abi:n,args:r,bytecode:s});return rv(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const xT=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],TT=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],S4=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],A4=[...S4,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],dZ=[...S4,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],E$=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],C$=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],S$=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function hZ(t,e={}){typeof e.size<"u"&&Ro(t,{size:e.size});const n=Tr(t,e);return Ki(n,e)}function fZ(t,e={}){let n=t;if(typeof e.size<"u"&&(Ro(n,{size:e.size}),n=Xa(n)),n.length>1||n[0]>1)throw new tQ(n);return!!n[0]}function Qc(t,e={}){typeof e.size<"u"&&Ro(t,{size:e.size});const n=Tr(t,e);return ma(n,e)}function pZ(t,e={}){let n=t;return typeof e.size<"u"&&(Ro(n,{size:e.size}),n=Xa(n,{dir:"right"})),new TextDecoder().decode(n)}function sv(t,e){const n=typeof e=="string"?Ao(e):e,r=vk(n);if(rr(n)===0&&t.length>0)throw new J0;if(rr(e)&&rr(e)<32)throw new UB({data:typeof e=="string"?e:Tr(e),params:t,size:rr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Dp(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Dp(t,e,{staticPosition:n}){const r=wk(e.type);if(r){const[s,i]=r;return mZ(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return bZ(t,e,{staticPosition:n});if(e.type==="address")return gZ(t);if(e.type==="bool")return yZ(t);if(e.type.startsWith("bytes"))return wZ(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return vZ(t,e);if(e.type==="string")return _Z(t,{staticPosition:n});throw new CQ(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const A$=32,NT=32;function gZ(t){const e=t.readBytes(32);return[X0(Tr(t4(e,-20))),32]}function mZ(t,e,{length:n,staticPosition:r}){if(!n){const o=Qc(t.readBytes(NT)),a=r+o,c=a+A$;t.setPosition(a);const l=Qc(t.readBytes(A$)),u=Vw(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Dp(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(Vw(e)){const o=Qc(t.readBytes(NT)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Dp(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Dp(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function yZ(t){return[fZ(t.readBytes(32),{size:32}),32]}function wZ(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Qc(t.readBytes(32));t.setPosition(n+o);const a=Qc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Tr(c),32]}return[Tr(t.readBytes(Number.parseInt(s),32)),32]}function vZ(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?hZ(s,{signed:n}):Qc(s,{signed:n}),32]}function bZ(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Vw(e)){const o=Qc(t.readBytes(NT)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Dp(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Dp(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function _Z(t,{staticPosition:e}){const n=Qc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Qc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=pZ(Xa(i));return t.setPosition(e+32),[o,32]}function Vw(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Vw);const n=wk(t.type);return!!(n&&Vw({...t,type:n[1]}))}const EZ=t=>ns(Hg(t));function CZ(t){return EZ(t)}const SZ="1.0.8";let Xi=class RT extends Error{constructor(e,n={}){var o;const r=n.cause instanceof RT?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof RT&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${SZ}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function pl(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const I4=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,x4=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,T4=/^\(.+?\).*?$/,I$=/^tuple(?<array>(\[(\d*)\])*)$/;function PT(t){let e=t.type;if(I$.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=PT(i),s<n-1&&(e+=", ")}const r=pl(I$,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,PT({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Um(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=PT(s),r!==n-1&&(e+=", ")}return e}function EE(t){var e;return t.type==="function"?`function ${t.name}(${Um(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Um(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Um(t.inputs)})`:t.type==="error"?`error ${t.name}(${Um(t.inputs)})`:t.type==="constructor"?`constructor(${Um(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const N4=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function AZ(t){return N4.test(t)}function IZ(t){return pl(N4,t)}const R4=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function xZ(t){return R4.test(t)}function TZ(t){return pl(R4,t)}const P4=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function NZ(t){return P4.test(t)}function RZ(t){return pl(P4,t)}const k4=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Rk(t){return k4.test(t)}function PZ(t){return pl(k4,t)}const O4=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function kZ(t){return O4.test(t)}function OZ(t){return pl(O4,t)}const D4=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function DZ(t){return D4.test(t)}function $Z(t){return pl(D4,t)}const MZ=/^receive\(\) external payable$/;function LZ(t){return MZ.test(t)}const UZ=new Set(["indexed"]),kT=new Set(["calldata","memory","storage"]);class jZ extends Xi{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class BZ extends Xi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class FZ extends Xi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class WZ extends Xi{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class zZ extends Xi{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class qZ extends Xi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class HZ extends Xi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class VZ extends Xi{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Yg extends Xi{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class GZ extends Xi{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class KZ extends Xi{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class YZ extends Xi{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class QZ extends Xi{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function JZ(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const oA=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function OT(t,e={}){if(NZ(t))return ZZ(t,e);if(xZ(t))return XZ(t,e);if(AZ(t))return eX(t,e);if(kZ(t))return tX(t,e);if(DZ(t))return nX(t);if(LZ(t))return{type:"receive",stateMutability:"payable"};throw new GZ({signature:t})}function ZZ(t,e={}){const n=RZ(t);if(!n)throw new Yg({signature:t,type:"function"});const r=ra(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(_h(r[a],{modifiers:kT,structs:e,type:"function"}));const o=[];if(n.returns){const a=ra(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(_h(a[l],{modifiers:kT,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function XZ(t,e={}){const n=TZ(t);if(!n)throw new Yg({signature:t,type:"event"});const r=ra(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(_h(r[o],{modifiers:UZ,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function eX(t,e={}){const n=IZ(t);if(!n)throw new Yg({signature:t,type:"error"});const r=ra(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(_h(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function tX(t,e={}){const n=OZ(t);if(!n)throw new Yg({signature:t,type:"constructor"});const r=ra(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(_h(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function nX(t){const e=$Z(t);if(!e)throw new Yg({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const rX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,sX=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,iX=/^u?int$/;function _h(t,e){var d,h;const n=JZ(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(oA.has(n))return oA.get(n);const r=T4.test(t),s=pl(r?sX:rX,t);if(!s)throw new WZ({param:t});if(s.name&&aX(s.name))throw new zZ({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=ra(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(_h(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(iX.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!$4(c))throw new FZ({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new qZ({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(kT.has(s.modifier)&&!cX(c,!!s.array))throw new HZ({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return oA.set(n,u),u}function ra(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?ra(a,[...e,n.trim()]):ra(a,e,`${n}${o}`,r);case"(":return ra(a,e,`${n}${o}`,r+1);case")":return ra(a,e,`${n}${o}`,r-1);default:return ra(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new QZ({current:n,depth:r});return e.push(n.trim()),e}function $4(t){return t==="address"||t==="bool"||t==="function"||t==="string"||I4.test(t)||x4.test(t)}const oX=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function aX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||I4.test(t)||x4.test(t)||oX.test(t)}function cX(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function M4(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!Rk(a))continue;const c=PZ(a);if(!c)throw new Yg({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=_h(p,{type:"struct"});u.push(g)}if(!u.length)throw new KZ({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=L4(c,e)}return r}const lX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function L4(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(T4.test(o.type))r.push(o);else{const c=pl(lX,o.type);if(!(c!=null&&c.type))throw new VZ({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new YZ({type:u});r.push({...o,type:`tuple${l??""}`,components:L4(e[u]??[],e,new Set([...n,u]))})}else if($4(u))r.push(o);else throw new BZ({type:u})}}return r}function U4(t){const e=M4(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];Rk(i)||n.push(OT(i,e))}return n}function x$(t){let e;if(typeof t=="string")e=OT(t);else{const n=M4(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!Rk(i)){e=OT(i,n);break}}}if(!e)throw new jZ({signature:t});return e}function uX(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new he("Unable to normalize signature.");return s}const dX=t=>{const e=typeof t=="string"?t:EE(t);return uX(e)};function j4(t){return CZ(dX(t))}const GC=j4,iv=t=>pg(j4(t),0,4);function Qh(t){const{abi:e,args:n=[],name:r}=t,s=sc(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?iv(a)===r:a.type==="event"?GC(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?DT(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=B4(a.inputs,o.inputs,n);if(l)throw new bQ({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function DT(t,e){const n=typeof t,r=e.type;switch(r){case"address":return To(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>DT(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>DT(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function B4(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return B4(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?To(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?To(n[r],{strict:!1}):!1)return o}}const aA="/docs/contract/decodeFunctionResult";function Jh(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Qh({abi:e,args:n,name:r});if(!a)throw new dg(r,{docsPath:aA});i=a}if(i.type!=="function")throw new dg(void 0,{docsPath:aA});if(!i.outputs)throw new FB(i.name,{docsPath:aA});const o=sv(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const T$="/docs/contract/encodeFunctionData";function hX(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Qh({abi:e,args:n,name:r});if(!i)throw new dg(r,{docsPath:T$});s=i}if(s.type!=="function")throw new dg(void 0,{docsPath:T$});return{abi:[s],functionName:iv(ya(s))}}function Po(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:hX(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?nd(s.inputs,e??[]):void 0;return Vg([i,o??"0x"])}function Qg({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new yT({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new yT({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const F4={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},W4={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},fX={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function pX(t){const{abi:e,data:n}=t,r=pg(n,0,4);if(r==="0x")throw new J0;const i=[...e||[],W4,fX].find(o=>o.type==="error"&&r===iv(ya(o)));if(!i)throw new jB(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?sv(i.inputs,pg(n,4)):void 0,errorName:i.name}}function z4({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Ir(e[i]):e[i]}`).join(", ")})`}class q4 extends he{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?ir(n):void 0;let g=tv({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${bk(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${wi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${wi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${wi(l)} gwei`,nonce:u});f&&(g+=`
${GJ(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class H4 extends he{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Qh({abi:n,args:r,name:o}),l=c?z4({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?ya(c,{includeName:!0}):void 0,d=tv({address:s&&kJ(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class $T extends he{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=pX({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=F4[f]}else{const f=u?ya(u,{includeName:!0}):void 0,p=u&&h?z4({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof jB&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class gX extends he{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class mX extends he{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class KC extends he{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function Pk(t,e){var r,s,i,o,a,c;if(!(t instanceof he))return!1;const n=t.walk(l=>l instanceof $T);return n instanceof $T?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===F4[50]):!1}function yX(t){const{abi:e,data:n}=t,r=pg(n,0,4),s=e.find(i=>i.type==="function"&&r===iv(ya(i)));if(!s)throw new vQ(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?sv(s.inputs,pg(n,4)):void 0}}const cA="/docs/contract/encodeErrorResult";function N$(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Qh({abi:e,args:r,name:n});if(!c)throw new o$(n,{docsPath:cA});s=c}if(s.type!=="error")throw new o$(void 0,{docsPath:cA});const i=ya(s),o=iv(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new yQ(s.name,{docsPath:cA});a=nd(s.inputs,r)}return Vg([o,a])}const lA="/docs/contract/encodeFunctionResult";function wX(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Qh({abi:e,name:n});if(!o)throw new dg(n,{docsPath:lA});s=o}if(s.type!=="function")throw new dg(void 0,{docsPath:lA});if(!s.outputs)throw new FB(s.name,{docsPath:lA});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new WB(r)})();return nd(s.outputs,i)}const kk="x-batch-gateway:true";async function vX(t){const{data:e,ccipRequest:n}=t,{args:[r]}=yX({abi:TT,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(kk)?await vX({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=bX(c)}})),wX({abi:TT,functionName:"query",result:[s,i]})}function bX(t){return t.name==="HttpRequestError"&&t.status?N$({abi:TT,errorName:"HttpError",args:[t.status,t.shortMessage]}):N$({abi:[W4],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function V4(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return sc(e)?e:null}function S_(t){let e=new Uint8Array(32).fill(0);if(!t)return Tr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=V4(n[r]),i=s?Hg(s):ns(ah(n[r]),"bytes");e=ns(xo([e,i]),"bytes")}return Tr(e)}function _X(t){return`[${t.slice(2)}]`}function EX(t){const e=new Uint8Array(32).fill(0);return t?V4(t)||ns(ah(t)):Tr(e)}function YC(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(ah(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=ah(s[i]);o.byteLength>255&&(o=ah(_X(EX(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const CX=3;function Eh(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof KC?t:t instanceof he?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof J0?new gX({functionName:i}):[CX,vh.code].includes(c)&&(l||u||d||h)?new $T({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof Ek?u:h??d}):t;return new H4(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ok=BigInt(0),MT=BigInt(1);function CE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function pb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function G4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ok:BigInt("0x"+t)}function QC(t){return G4(Rw(t))}function K4(t){return wa(t),G4(Rw(Uint8Array.from(t).reverse()))}function Dk(t,e){return hk(t.toString(16).padStart(e*2,"0"))}function Y4(t,e){return Dk(t,e).reverse()}function fo(t,e,n){let r;if(typeof e=="string")try{r=hk(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(dk(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const uA=t=>typeof t=="bigint"&&Ok<=t;function SX(t,e,n){return uA(t)&&uA(e)&&uA(n)&&e<=t&&t<n}function AX(t,e,n,r){if(!SX(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function IX(t){let e;for(e=0;t>Ok;t>>=MT,e+=1);return e}const JC=t=>(MT<<BigInt(t))-MT;function xX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return jd(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function $k(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function R$(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const TX="0.1.1";function NX(){return TX}let dr=class LT extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof LT){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof LT&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${NX()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return Q4(this,e)}};function Q4(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Q4(t.cause,e):e?null:t}const RX="#__bigint";function PX(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+RX:s,n)}function kX(t,e){if(k$(t)>e)throw new WX({givenSize:k$(t),maxSize:e})}const bc={zero:48,nine:57,A:65,F:70,a:97,f:102};function P$(t){if(t>=bc.zero&&t<=bc.nine)return t-bc.zero;if(t>=bc.A&&t<=bc.F)return t-(bc.A-10);if(t>=bc.a&&t<=bc.f)return t-(bc.a-10)}function OX(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new zX({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function Mk(t,e){if(No(t)>e)throw new KX({givenSize:No(t),maxSize:e})}function DX(t,e){if(typeof e=="number"&&e>0&&e>No(t)-1)throw new tF({offset:e,position:"start",size:No(t)})}function $X(t,e,n){if(typeof e=="number"&&typeof n=="number"&&No(t)!==n-e)throw new tF({offset:n,position:"end",size:No(t)})}function J4(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new YX({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const MX=new TextEncoder;function LX(t){return t instanceof Uint8Array?t:typeof t=="string"?jX(t):UX(t)}function UX(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function jX(t,e={}){const{size:n}=e;let r=t;n&&(Mk(t,n),r=Sh(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=P$(s.charCodeAt(c++)),u=P$(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new dr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function BX(t,e={}){const{size:n}=e,r=MX.encode(t);return typeof n=="number"?(kX(r,n),FX(r,n)):r}function FX(t,e){return OX(t,{dir:"right",size:e})}function k$(t){return t.length}let WX=class extends dr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},zX=class extends dr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const qX=new TextEncoder,HX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function VX(t,e={}){const{strict:n=!1}=e;if(!t)throw new O$(t);if(typeof t!="string")throw new O$(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new D$(t);if(!t.startsWith("0x"))throw new D$(t)}function oc(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Z4(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Mk(n,e.size),Ch(n,e.size)):n}function X4(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=HX[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Mk(r,e.size),Sh(r,e.size)):r}function ks(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new eF({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ch(c,r):c}function Lk(t,e={}){return X4(qX.encode(t),e)}function Ch(t,e){return J4(t,{dir:"left",size:e})}function Sh(t,e){return J4(t,{dir:"right",size:e})}function Uk(t,e,n,r={}){const{strict:s}=r;DX(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&$X(i,e,n),i}function No(t){return Math.ceil((t.length-2)/2)}function GX(t,e={}){const{strict:n=!1}=e;try{return VX(t,{strict:n}),!0}catch{return!1}}let eF=class extends dr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class O$ extends dr{constructor(e){super(`Value \`${typeof e=="object"?PX(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class D$ extends dr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let KX=class extends dr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class tF extends dr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let YX=class extends dr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function QX(t){return{address:t.address,amount:ks(t.amount),index:ks(t.index),validatorIndex:ks(t.validatorIndex)}}function nF(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:ks(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:ks(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:ks(t.gasLimit)},...typeof t.number=="bigint"&&{number:ks(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:ks(t.prevRandao)},...typeof t.time=="bigint"&&{time:ks(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(QX)}}}const JX="0x82ad56cb",rF="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",ZX="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",XX="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function sF(t,{docsPath:e,...n}){const r=(()=>{const s=qC(t,n);return s instanceof ev?t:s})();return new q4(r,{docsPath:e,...n})}function jk(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const dA=new Map;function iF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>dA.delete(e),a=()=>c().map(({args:u})=>u),c=()=>dA.get(e)||[],l=u=>dA.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=jk();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function ov(t,e){var q,B,N,T;const{account:n=t.account,authorizationList:r,batch:s=!!((q=t.batch)!=null&&q.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:b,to:E,value:C,stateOverride:A,...I}=e,x=n?ir(n):void 0;if(u&&(h||f))throw new he("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new he("Cannot provide both `code` & `to` as parameters.");const S=u&&d,O=h&&f&&E&&d,P=S||O,j=S?nee({code:u,data:d}):O?ree({data:d,factory:h,factoryData:f,to:E}):d;try{Yh(e);const R=(typeof i=="bigint"?ze(i):void 0)||o,D=l?nF(l):void 0,U=Ak(A),H=(T=(N=(B=t.chain)==null?void 0:B.formatters)==null?void 0:N.transactionRequest)==null?void 0:T.format,oe=(H||Gg)({...HC(I,{format:H}),from:x==null?void 0:x.address,accessList:a,authorizationList:r,blobs:c,data:j,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:b,to:P?void 0:E,value:C});if(s&&eee({request:oe})&&!U&&!D)try{return await tee(t,{...oe,blockNumber:i,blockTag:o})}catch(ye){if(!(ye instanceof c4)&&!(ye instanceof yT))throw ye}const re=(()=>{const ye=[oe,R];return U&&D?[...ye,U,D]:U?[...ye,U]:D?[...ye,{},D]:ye})(),ie=await t.request({method:"eth_call",params:re});return ie==="0x"?{data:void 0}:{data:ie}}catch($){const R=see($),{offchainLookup:D,offchainLookupSignature:U}=await ar(async()=>{const{offchainLookup:H,offchainLookupSignature:te}=await import("./ccip-CRxPhr7i.js");return{offchainLookup:H,offchainLookupSignature:te}},[]);if(t.ccipRead!==!1&&(R==null?void 0:R.slice(0,10))===U&&E)return{data:await D(t,{data:R,to:E})};throw P&&(R==null?void 0:R.slice(0,10))==="0x101bb98d"?new mX({factory:h}):sF($,{...e,account:x,chain:t.chain})}}function eee({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(JX)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function tee(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new c4;l=Qg({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?ze(s):void 0)||i,{schedule:h}=iF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((v,{data:b})=>v+(b.length-2),0)>n*2},fn:async w=>{const y=w.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),v=Po({abi:xT,args:[y],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{data:v,to:l},d]});return Jh({abi:xT,args:[y],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new KC({data:f});return f==="0x"?{data:void 0}:{data:f}}function nee(t){const{code:e,data:n}=t;return zC({abi:U4(["constructor(bytes, bytes)"]),bytecode:rF,args:[e,n]})}function ree(t){const{data:e,factory:n,factoryData:r,to:s}=t;return zC({abi:U4(["constructor(address, bytes, address, bytes)"]),bytecode:ZX,args:[s,e,n,r]})}function see(t){var n;if(!(t instanceof he))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function ac(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Po({abi:n,args:s,functionName:i});try{const{data:c}=await Xe(t,ov,"call")({...o,data:a,to:r});return Jh({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Eh(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function iee(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Qg({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Po({abi:C$,functionName:"addr",...s!=null?{args:[S_(i),BigInt(s)]}:{args:[S_(i)]}}),h={address:l,abi:A4,functionName:"resolve",args:[Io(YC(i)),d,o??[kk]],blockNumber:n,blockTag:r},p=await Xe(t,ac,"readContract")(h);if(p[0]==="0x")return null;const g=Jh({abi:C$,args:s!=null?[S_(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Xa(g)==="0x00"?null:g}catch(d){if(a)throw d;if(Pk(d,"resolve"))return null;throw d}}class oee extends he{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class jm extends he{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class Bk extends he{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class aee extends he{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const cee=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,lee=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,uee=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,dee=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function hee(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function $$(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function oF({uri:t,gatewayUrls:e}){const n=uee.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=$$(e==null?void 0:e.ipfs,"https://ipfs.io"),s=$$(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(cee),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||lee.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(dee,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new Bk({uri:t})}function aF(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new oee({data:t});return t.image||t.image_url||t.image_data}async function fee({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await Fk({gatewayUrls:t,uri:aF(n)})}catch{throw new Bk({uri:e})}}async function Fk({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=oF({uri:e,gatewayUrls:t});if(r||await hee(n))return n;throw new Bk({uri:e})}function pee(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new jm({reason:"Only EIP-155 supported"});if(!o)throw new jm({reason:"Chain ID not found"});if(!c)throw new jm({reason:"Contract address not found"});if(!s)throw new jm({reason:"Token ID not found"});if(!a)throw new jm({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function gee(t,{nft:e}){if(e.namespace==="erc721")return ac(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return ac(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new aee({namespace:e.namespace})}async function mee(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?yee(t,{gatewayUrls:e,record:n}):Fk({uri:n,gatewayUrls:e})}async function yee(t,{gatewayUrls:e,record:n}){const r=pee(n),s=await gee(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=oF({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return Fk({uri:aF(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),fee({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function cF(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Qg({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:A4,functionName:"resolve",args:[Io(YC(i)),Po({abi:E$,functionName:"text",args:[S_(i),s]}),o??[kk]],blockNumber:n,blockTag:r},f=await Xe(t,ac,"readContract")(d);if(f[0]==="0x")return null;const p=Jh({abi:E$,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(Pk(d,"resolve"))return null;throw d}}async function wee(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await Xe(t,cF,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await mee(t,{record:c,gatewayUrls:r})}catch{return null}}async function lF(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Qg({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:dZ,functionName:"reverse",args:[Io(YC(c))],blockNumber:n,blockTag:r},u=Xe(t,ac,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(Pk(l,"reverse"))return null;throw l}}async function vee(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Qg({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await Xe(t,ac,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Io(YC(s))],blockNumber:n,blockTag:r});return c}async function uF(t,e){var w,y,v;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?ir(n):void 0;try{Yh(e);const E=(typeof r=="bigint"?ze(r):void 0)||s,C=(v=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:v.format,I=(C||Gg)({...HC(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),x=await t.request({method:"eth_createAccessList",params:[I,E]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(b){throw sF(b,{...e,account:g,chain:t.chain})}}function ZC(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function bee(t){const e=ZC(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class _ee extends he{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const M$="/docs/contract/encodeEventTopics";function av(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Qh({abi:e,name:n});if(!l)throw new a$(n,{docsPath:M$});s=l}if(s.type!=="event")throw new a$(void 0,{docsPath:M$});const i=ya(s),o=GC(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>L$({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?L$({param:d,value:u[h]}):null))??[])}return[o,...a]}function L$({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ns(Hg(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new _ee(t.type);return nd([t],[e])}async function dF(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=ZC(t,{method:"eth_newFilter"}),u=i?av({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?ze(o):o,toBlock:typeof c=="bigint"?ze(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function hF(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=ZC(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>av({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?ze(i):i,toBlock:typeof a=="bigint"?ze(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function fF(t){const e=ZC(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Eee(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Po({abi:n,args:s,functionName:i});try{return await Xe(t,VC,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?ir(a.account):void 0;throw Eh(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Cee(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const See=new Map,Aee=new Map;function Iee(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,See),r=e(t,Aee);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function xee(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Iee(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Tee=t=>`blockNumber.${t}`;async function cv(t,{cacheTime:e=t.cacheTime}={}){const n=await xee(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Tee(t.uid),cacheTime:e});return BigInt(n)}async function Nee(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?ze(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),ma(i)}async function U$(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?ze(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function XC(t,e){if(!To(t,{strict:!1}))throw new Wu({address:t});if(!To(e,{strict:!1}))throw new Wu({address:e});return t.toLowerCase()===e.toLowerCase()}const j$="/docs/contract/decodeEventLog";function Wk(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new wQ({docsPath:j$});const c=e.find(g=>g.type==="event"&&o===GC(ya(g)));if(!(c&&"name"in c)||c.type!=="event")throw new BB(o,{docsPath:j$});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],v=a[g];if(!v)throw new FC({abiItem:c,param:w});h[d?y:w.name||y]=Ree({param:w,value:v})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=sv(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof UB||g instanceof s4?new Tw({abiItem:c,data:n,params:p,size:rr(n)}):g}else if(i)throw new Tw({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Ree({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(sv([t],e)||[])[0]}function zk(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===GC(u));if(!c)return null;const l=Wk({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Pee({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof BB)return null;if(c instanceof Tw||c instanceof FC){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Pee(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?XC(o,a):i.type==="string"||i.type==="bytes"?ns(Hg(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function al(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function qk(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>av({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?ze(r):r,toBlock:typeof s=="bigint"?ze(s):s}]});const f=h.map(p=>al(p));return u?zk({abi:u,args:a,logs:f,strict:l}):f}async function pF(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Qh({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return Xe(t,qk,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class kee extends he{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Oee(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await Xe(t,ac,"readContract")({abi:Dee,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new kee({address:n}):o}}const Dee=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function $ee(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Mee(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?ze(n):void 0,o=await t.request({method:"eth_feeHistory",params:[ze(e),i||r,s]},{dedupe:!!i});return $ee(o)}async function e1(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>al(i));return!("abi"in e)||!e.abi?s:zk({abi:e.abi,logs:s,strict:n})}async function Lee(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>al(i));return e.abi?zk({abi:e.abi,logs:s,strict:n}):s}async function Uee(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?ze(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function t1(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?ze(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,ze(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,ze(i)]},{dedupe:!!a}),!c)throw new u4({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||g4)(c)}async function jee(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([Xe(t,cv,"getBlockNumber")({}),e?Xe(t,t1,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const gF={"0x0":"reverted","0x1":"success"};function Bee(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>al(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ma(t.transactionIndex):null,status:t.status?gF[t.status]:null,type:t.type?p4[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function UT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new d4({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Bee)(n)}async function mF(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Qg({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let v=0;v<l.length;v++){const{abi:b,address:E,args:C,functionName:A}=l[v];try{const I=Po({abi:b,args:C,functionName:A});p+=(I.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(I.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:I,target:E}]}catch(I){const x=Eh(I,{abi:b,address:E,args:C,docsPath:"/docs/contract/multicall",functionName:A,sender:n});if(!r)throw x;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:E}]}}const g=await Promise.allSettled(h.map(v=>Xe(t,ac,"readContract")({abi:xT,account:n,address:d,args:[v],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let v=0;v<g.length;v++){const b=g[v];if(b.status==="rejected"){if(!r)throw b.reason;for(let C=0;C<h[v].length;C++)w.push({status:"failure",error:b.reason,result:void 0});continue}const E=b.value;for(let C=0;C<E.length;C++){const{returnData:A,success:I}=E[C],{callData:x}=h[v][C],{abi:S,address:O,functionName:P,args:j}=l[w.length];try{if(x==="0x")throw new J0;if(!I)throw new KC({data:A});const q=Jh({abi:S,args:j,data:A,functionName:P});w.push(r?{result:q,status:"success"}:q)}catch(q){const B=Eh(q,{abi:S,address:O,args:j,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw B;w.push({error:B,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new he("multicall results mismatch");return w}async function jT(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?nF(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,v=y.account?ir(y.account):void 0,b=y.abi?Po(y):y.data,E={...y,data:y.dataSuffix?xo([b||"0x",y.dataSuffix]):b,from:y.from??(v==null?void 0:v.address)};return Yh(E),Gg(E)}),g=h.stateOverrides?Ak(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?ze(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...m4(h),calls:h.calls.map((p,g)=>{var O,P;const{abi:w,args:y,functionName:v,to:b}=s[f].calls[g],E=((O=p.error)==null?void 0:O.data)??p.returnData,C=BigInt(p.gasUsed),A=(P=p.logs)==null?void 0:P.map(j=>al(j)),I=p.status==="0x1"?"success":"failure",x=w&&I==="success"&&E!=="0x"?Jh({abi:w,data:E,functionName:v}):null,S=(()=>{var q;if(I==="success")return;let j;if(((q=p.error)==null?void 0:q.data)==="0x"?j=new J0:p.error&&(j=new KC(p.error)),!!j)return Eh(j,{abi:w??[],address:b??"0x",args:y,functionName:v??"<unknown>"})})();return{data:E,gasUsed:C,logs:A,status:I,...I==="success"?{result:x}:{error:S}}})}))}catch(c){const l=c,u=qC(l,{});throw u instanceof ev?l:u}}function yF(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=gk(LX(t));return n==="Bytes"?r:X4(r)}let Fee=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Wee={checksum:new Fee(8192)},hA=Wee.checksum,zee=/^0x[a-fA-F0-9]{40}$/;function n1(t,e={}){const{strict:n=!0}=e;if(!zee.test(t))throw new B$({address:t,cause:new Hee});if(n){if(t.toLowerCase()===t)return;if(qee(t)!==t)throw new B$({address:t,cause:new Vee})}}function qee(t){if(hA.has(t))return hA.get(t);n1(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=yF(BX(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return hA.set(t,s),s}function BT(t,e={}){const{strict:n=!0}=e??{};try{return n1(t,{strict:n}),!0}catch{return!1}}class B$ extends dr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Hee extends dr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Vee extends dr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function FT(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new dr("Unable to normalize signature.");return s}function WT(t,e){const n=typeof t,r=e.type;switch(r){case"address":return BT(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>WT(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>WT(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function wF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return wF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?BT(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?BT(n[r],{strict:!1}):!1)return o}}function vF(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?x$(t):t;return{...r,...n?{hash:_p(r)}:{}}}function Gee(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=GX(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?bF(l)===Uk(e,0,4):l.type==="event"?_p(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new zT({name:e});if(o.length===1)return{...o[0],...s?{hash:_p(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:_p(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?WT(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=wF(l.inputs,a.inputs,r);if(d)throw new Yee({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new zT({name:e});return{...c,...s?{hash:_p(c)}:{}}}function bF(t){return Uk(_p(t),0,4)}function Kee(t){const e=typeof t=="string"?t:EE(t);return FT(e)}function _p(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:yF(Lk(Kee(t)))}class Yee extends dr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${FT(EE(e.abiItem))}\`, and`,`\`${n.type}\` in \`${FT(EE(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class zT extends dr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Qee=/^(.*)\[([0-9]*)\]$/,Jee=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_F=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Zee({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(Hk({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function Hk({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=ote(r.type);if(s){const[i,o]=s;return ete(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return ite(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Xee(n,{checksum:t});if(r.type==="bool")return nte(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=_F.exec(r.type)??[];return rte(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return tte(n,{type:r.type});if(r.type==="string")return ste(n);throw new AF(r.type)}function Vk(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=No(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ks(e+s,{size:32})),r.push(a),s+=No(a)):n.push(a)}return oc(...n,...r)}function Xee(t,e){const{checksum:n=!1}=e;return n1(t,{strict:n}),{dynamic:!1,encoded:Ch(t.toLowerCase())}}function ete(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new cte(t);if(!i&&t.length!==r)throw new ate({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=Hk({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=Vk(a);if(i){const l=ks(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?oc(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:oc(...a.map(({encoded:c})=>c))}}function tte(t,{type:e}){const[,n]=e.split("bytes"),r=No(t);if(!n){let s=t;return r%32!==0&&(s=Sh(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:oc(Ch(ks(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new CF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Sh(t)}}function nte(t){if(typeof t!="boolean")throw new dr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ch(Z4(t))}}function rte(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new eF({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ks(t,{size:32,signed:e})}}function ste(t){const e=Lk(t),n=Math.ceil(No(e)/32),r=[];for(let s=0;s<n;s++)r.push(Sh(Uk(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:oc(Sh(ks(No(e),{size:32})),...r)}}function ite(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=Hk({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Vk(i):oc(...i.map(({encoded:o})=>o))}}function ote(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function EF(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new SF({expectedLength:t.length,givenLength:e.length});const s=Zee({checksumAddress:r,parameters:t,values:e}),i=Vk(s);return i.length===0?"0x":i}function qT(t,e){if(t.length!==e.length)throw new SF({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(qT.encode(s,i))}return oc(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return n1(c),Ch(c.toLowerCase(),s?32:0)}if(n==="string")return Lk(r);if(n==="bytes")return r;if(n==="bool")return Ch(Z4(r),s?32:1);const i=n.match(_F);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return ks(r,{size:s?32:d,signed:l==="int"})}const o=n.match(Jee);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new CF({expectedSize:Number.parseInt(l),value:r});return Sh(r,s?32:0)}const a=n.match(Qee);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":oc(...u)}throw new AF(n)}t.encode=e})(qT||(qT={}));class ate extends dr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class CF extends dr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${No(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class SF extends dr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class cte extends dr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class AF extends dr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function lte(t,e){var s;const{bytecode:n,args:r}=e;return oc(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?EF(t.inputs,r):"0x")}function ute(t){return vF(t)}function dte(t,...e){const{overloads:n}=t,r=n?hte([t,...n],t.name,{args:e[0]}):t,s=fte(r),i=e.length>0?EF(r.inputs,e[0]):void 0;return i?oc(s,i):s}function Ef(t,e={}){return vF(t,e)}function hte(t,e,n){const r=Gee(t,e,n);if(r.type!=="function")throw new zT({name:e,type:"function"});return r}function fte(t){return bF(t)}const pte="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Ta="0x0000000000000000000000000000000000000000",gb=new WC(8192);function gte(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(gb.get(n))return gb.get(n);const r=t().finally(()=>gb.delete(n));return gb.set(n,r),r}async function SE(t){return new Promise(e=>setTimeout(e,t))}function AE(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await SE(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function mte(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Fd(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Fd(new Error("method not supported"),{method:l});const u=s?ug(`${c}.${Ir(n)}`):void 0;return gte(()=>AE(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Pw.code:throw new Pw(f);case kw.code:throw new kw(f);case Ow.code:throw new Ow(f,{method:n.method});case Dw.code:throw new Dw(f);case vh.code:throw new vh(f);case bh.code:throw new bh(f);case $w.code:throw new $w(f);case Iu.code:throw new Iu(f);case gg.code:throw new gg(f);case Fd.code:throw new Fd(f,{method:n.method});case mg.code:throw new mg(f);case Mw.code:throw new Mw(f);case vr.code:throw new vr(f);case Lw.code:throw new Lw(f);case Uw.code:throw new Uw(f);case jw.code:throw new jw(f);case Bw.code:throw new Bw(f);case ic.code:throw new ic(f);case yg.code:throw new yg(f);case Fw.code:throw new Fw(f);case Ww.code:throw new Ww(f);case zw.code:throw new zw(f);case qw.code:throw new qw(f);case Hw.code:throw new Hw(f);case wg.code:throw new wg(f);case 5e3:throw new vr(f);default:throw h instanceof he?h:new DJ(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof jy){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>yte(h)}),{enabled:s,id:u})}}function yte(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===mg.code||t.code===vh.code:t instanceof jy&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function wte(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function IF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function vte(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const F$=vte();function bte(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await IF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Ir(r.map(b=>({jsonrpc:"2.0",id:b.id??F$.take(),...b}))):Ir({jsonrpc:"2.0",id:r.id??F$.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new m$({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new jy({body:r,details:Ir(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof jy||h instanceof m$?h:new jy({body:r,cause:h,url:t})}}}}class _te extends he{constructor({domain:e}){super(`Invalid domain "${Ir(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ete extends he{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Cte extends he{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Ste(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:kF({domain:e}),...t.types};PF({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(Ate({domain:e,types:s})),r!=="EIP712Domain"&&i.push(xF({data:n,primaryType:r,types:s})),ns(xo(i))}function Ate({domain:t,types:e}){return xF({data:t,primaryType:"EIP712Domain",types:e})}function xF({data:t,primaryType:e,types:n}){const r=TF({data:t,primaryType:e,types:n});return ns(r)}function TF({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Ite({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=RF({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return nd(r,s)}function Ite({primaryType:t,types:e}){const n=Io(xte({primaryType:t,types:e}));return ns(n)}function xte({primaryType:t,types:e}){let n="";const r=NF({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function NF({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])NF({primaryType:i.type,types:e},n);return n}function RF({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ns(TF({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ns(r)];if(n==="string")return[{type:"bytes32"},ns(Io(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>RF({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},ns(nd(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function Tte(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Ir({domain:o,message:a,primaryType:r,types:s})}function PF(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(n4);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;ze(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!To(d))throw new Wu({address:d});const f=u.match(sJ);if(f){const[g,w]=f;if(w&&rr(d)!==Number.parseInt(w))throw new _Q({expectedSize:Number.parseInt(w),givenSize:rr(d)})}const p=s[u];p&&(Nte(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new _te({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Ete({primaryType:r,types:s})}function kF({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Nte(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Cte({type:t})}const Rte=`Ethereum Signed Message:
`;function Pte(t){const e=typeof t=="string"?ug(t):typeof t.raw=="string"?t.raw:Tr(t.raw),n=ug(`${Rte}${rr(e)}`);return xo([n,e])}function OF(t,e){return ns(Pte(t),e)}const DF="0x6492649264926492649264926492649264926492649264926492649264926492";function kte(t){return vE(t,-32)===DF}function Ote(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=Vg([nd([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),DF]);return s==="hex"?i:Ao(i)}class Dte extends he{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function $te(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Dte({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Mte="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Lte(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?ir(e.account):void 0;if(o&&!l)throw new he("`account` is required when `traceAssetChanges` is true");const u=l?lte(ute("constructor(bytes, bytes)"),{bytecode:rF,args:[Mte,dte(Ef("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async R=>{if(!R.data&&!R.abi)return;const{accessList:D}=await uF(t,{account:l.address,...R,data:R.abi?Po(R):R.data});return D.map(({address:U,storageKeys:H})=>H.length>0?U:null)})).then(R=>R.flat().filter(Boolean)):[],h=await jT(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((R,D)=>({abi:[Ef("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:Ta,nonce:D})),stateOverrides:[{address:Ta,nonce:0}]}]:[],{calls:[...s,{}].map(R=>({...R,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((R,D)=>({abi:[Ef("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:Ta,nonce:D})),stateOverrides:[{address:Ta,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[Ef("function decimals() returns (uint256)")],functionName:"decimals",from:Ta,nonce:D})),stateOverrides:[{address:Ta,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[Ef("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Ta,nonce:D})),stateOverrides:[{address:Ta,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[Ef("function symbol() returns (string)")],functionName:"symbol",from:Ta,nonce:D})),stateOverrides:[{address:Ta,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,v,b,E]=o?h:[],{calls:C,...A}=f,I=C.slice(0,-1)??[],x=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],O=[...x,...S].map(R=>R.status==="success"?Ki(R.data):null),P=(w==null?void 0:w.calls)??[],j=(y==null?void 0:y.calls)??[],q=[...P,...j].map(R=>R.status==="success"?Ki(R.data):null),B=((v==null?void 0:v.calls)??[]).map(R=>R.status==="success"?R.result:null),N=((E==null?void 0:E.calls)??[]).map(R=>R.status==="success"?R.result:null),T=((b==null?void 0:b.calls)??[]).map(R=>R.status==="success"?R.result:null),$=[];for(const[R,D]of q.entries()){const U=O[R];if(typeof D!="bigint"||typeof U!="bigint")continue;const H=B[R-1],te=N[R-1],oe=T[R-1],re=R===0?{address:pte,decimals:18,symbol:"ETH"}:{address:d[R-1],decimals:oe||H?Number(H??1):void 0,symbol:te??void 0};$.some(ie=>ie.token.address===re.address)||$.push({token:re,value:{pre:U,post:D,diff:D-U}})}return{assetChanges:$,block:A,results:I}}const fA=new Map,W$=new Map;let Ute=0;function cl(t,e,n){const r=++Ute,s=()=>fA.get(t)||[],i=()=>{const u=s();fA.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=W$.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(fA.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&W$.set(t,l),o}function Jg(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await SE(c);const l=async()=>{s&&(await t({unpoll:i}),await SE(r),l())};l()})(),i}function jte(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Ir(["watchBlocks",t.uid,e,n,r,u,c]);return cl(p,{onBlock:s,onError:i},g=>Jg(async()=>{var w;try{const y=await Xe(t,Qa,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let v=(d==null?void 0:d.number)+1n;v<y.number;v++){const b=await Xe(t,Qa,"getBlock")({blockNumber:v,includeTransactions:u});g.onBlock(b,d),d=b}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&Xe(t,Qa,"getBlock")({blockTag:e,includeTransactions:u}).then(b=>{p&&g&&(s(b,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const b=t.transport.transports.find(E=>E.config.type==="webSocket"||E.config.type==="ipc");return b?b.value:t.transport}return t.transport})(),{unsubscribe:v}=await y.subscribe({params:["newHeads"],async onData(b){var C;if(!p)return;const E=await Xe(t,Qa,"getBlock")({blockNumber:(C=b.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(E,d),g=!1,d=E)},onError(b){i==null||i(b)}});w=v,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function $F(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Ir(["watchBlockNumber",t.uid,e,n,o]);return cl(d,{onBlockNumber:r,onError:s},h=>Jg(async()=>{var f;try{const p=await Xe(t,cv,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Ir(["watchBlockNumber",t.uid,e,n]);return cl(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var b;if(!f)return;const v=Ki((b=y.result)==null?void 0:b.number);h.onBlockNumber(v,c),c=v},onError(y){var v;(v=h.onError)==null||v.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function r1(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Bte(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=Ir(["watchEvent",e,n,r,t.uid,s,u,o]);return cl(w,{onLogs:c,onError:a},y=>{let v;o!==void 0&&(v=o-1n);let b,E=!1;const C=Jg(async()=>{var A;if(!E){try{b=await Xe(t,hF,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}E=!0;return}try{let I;if(b)I=await Xe(t,e1,"getFilterChanges")({filter:b});else{const x=await Xe(t,cv,"getBlockNumber")({});v&&v!==x?I=await Xe(t,qk,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:v+1n,toBlock:x}):I=[],v=x}if(I.length===0)return;if(r)y.onLogs(I);else for(const x of I)y.onLogs([x])}catch(I){b&&I instanceof bh&&(E=!1),(A=y.onError)==null||A.call(y,I)}},{emitOnBegin:!0,interval:u});return async()=>{b&&await Xe(t,r1,"uninstallFilter")({filter:b}),C()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const v=(()=>{if(t.transport.type==="fallback"){const A=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return A?A.value:t.transport}return t.transport})(),b=i??(s?[s]:void 0);let E=[];b&&(E=[b.flatMap(I=>av({abi:[I],eventName:I.name,args:n}))],s&&(E=E[0]));const{unsubscribe:C}=await v.subscribe({params:["logs",{address:e,topics:E}],onData(A){var x;if(!w)return;const I=A.result;try{const{eventName:S,args:O}=Wk({abi:b??[],data:I.data,topics:I.topics,strict:f}),P=al(I,{args:O,eventName:S});c([P])}catch(S){let O,P;if(S instanceof Tw||S instanceof FC){if(d)return;O=S.abiItem.name,P=(x=S.abiItem.inputs)==null?void 0:x.some(q=>!("name"in q&&q.name))}const j=al(I,{args:P?[]:{},eventName:O});c([j])}},onError(A){a==null||a(A)}});y=C,w||y()}catch(v){a==null||a(v)}})(),()=>y()})()}function MF(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Ir(["watchPendingTransactions",t.uid,e,i]);return cl(l,{onTransactions:r,onError:n},u=>{let d;const h=Jg(async()=>{var f;try{if(!d)try{d=await Xe(t,fF,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await Xe(t,e1,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Xe(t,r1,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Fte(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>X0(r))}async function Wte(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function zte(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?ir(n):void 0,i=r?[s==null?void 0:s.address,[ze(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const LF="0x5792579257925792579257925792579257925792579257925792579257925792",UF=ze(0,{size:32});async function qte(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?ir(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Po({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?xo([p,f.dataSuffix]):p,to:f.to,value:f.value?ze(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:ze(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(v=>!v.optional)){const v="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new yg(new he(v,{details:v}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new wg(new he(y,{details:y}))}const p=[];for(const y of d){const v=rv(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Ki(y.value):void 0});p.push(v),o>0&&await new Promise(b=>setTimeout(b,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:UF);return{id:xo([...w,ze(s.id,{size:32}),LF])}}throw h4(h,{...e,account:u,chain:e.chain})}}async function jF(t,e){async function n(u){if(u.endsWith(LF.slice(2))){const h=Xa(vE(u,-64,-32)),f=vE(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>UF.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:ma(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?ma(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Ki(u.blockNumber),gasUsed:Ki(u.gasUsed),status:gF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Hte(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Vte(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Ir(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=jk();let u;const d=cl(o,{resolve:c,reject:l},h=>{const f=Jg(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await jF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Gte({id:n}))},i):void 0,await a}class Gte extends he{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Kte(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Yte(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?ma(t.nonce):void 0,storageProof:t.storageProof?Kte(t.storageProof):void 0}}async function Qte(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?ze(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return Yte(a)}async function BF(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Ir(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=jk(),v=a?setTimeout(()=>{p(),f(),y(new PJ({hash:n}))},a):void 0;return f=cl(c,{onReplaced:r,resolve:w,reject:y},b=>{p=Xe(t,$F,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const C=I=>{clearTimeout(v),p(),I(),f()};let A=E;if(!h)try{if(d){if(e>1&&(!d.blockNumber||A-d.blockNumber+1n<e))return;C(()=>b.resolve(d));return}if(l||(h=!0,await AE(async()=>{l=await Xe(t,t1,"getTransaction")({hash:n}),l.blockNumber&&(A=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Xe(t,UT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||A-d.blockNumber+1n<e))return;C(()=>b.resolve(d))}catch(I){if(I instanceof u4||I instanceof d4){if(!l){h=!1;return}try{u=l,h=!0;const x=await AE(()=>Xe(t,Qa,"getBlock")({blockNumber:A,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof f4});h=!1;const S=x.transactions.find(({from:P,nonce:j})=>P===u.from&&j===u.nonce);if(!S||(d=await Xe(t,UT,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||A-d.blockNumber+1n<e)))return;let O="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?O="repriced":S.from===S.to&&S.value===0n&&(O="cancelled"),C(()=>{var P;(P=b.onReplaced)==null||P.call(b,{reason:O,replacedTransaction:u,transaction:S,transactionReceipt:d}),b.resolve(d)})}catch(x){C(()=>b.reject(x))}}else C(()=>b.reject(I))}}})}),g}async function Jte(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Vc(n))}async function Zte(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function FF(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Gh({docsPath:"/docs/eip7702/prepareAuthorization"});const i=ir(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:ir(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Xe(t,Kg,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Xe(t,xk,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&XC(o.address,i.address))&&(a.nonce+=1)),a}async function Xte(t,e){const{account:n=t.account}=e;if(!n)throw new Gh({docsPath:"/docs/eip7702/signAuthorization"});const r=ir(n);if(!r.signAuthorization)throw new C_({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await FF(t,e);return r.signAuthorization(s)}async function ene(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Gh({docsPath:"/docs/actions/wallet/signTransaction"});const i=ir(n);Yh({account:i,...e});const o=await Xe(t,Kg,"getChainId")({});r!==null&&l4({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Gg;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:ze(o),from:i.address}]},{retryCount:0})}async function WF(t,{account:e=t.account,message:n}){if(!e)throw new Gh({docsPath:"/docs/actions/wallet/signMessage"});const r=ir(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?ug(n):n.raw instanceof Uint8Array?Io(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function tne(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Gh({docsPath:"/docs/actions/wallet/signTypedData"});const o=ir(n),a={EIP712Domain:kF({domain:r}),...e.types};if(PF({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=Tte({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function nne(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?ir(a.account):t.account,l=Po({abi:n,args:s,functionName:o});try{const{data:u}=await Xe(t,ov,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Jh({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Eh(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function rne(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:ze(e)}]},{retryCount:0})}class zF extends fk{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,kQ(e);const r=Z0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),fg(i)}update(e){return hg(this),this.iHash.update(e),this}digestInto(e){hg(this),wa(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qF=(t,e,n)=>new zF(t,e).update(n).digest();qF.create=(t,e)=>new zF(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fi=BigInt(0),Ls=BigInt(1),Wd=BigInt(2),sne=BigInt(3),HF=BigInt(4),VF=BigInt(5),GF=BigInt(8);function mo(t,e){const n=t%e;return n>=fi?n:e+n}function ro(t,e,n){let r=t;for(;e-- >fi;)r*=r,r%=n;return r}function z$(t,e){if(t===fi)throw new Error("invert: expected non-zero number");if(e<=fi)throw new Error("invert: expected positive modulus, got "+e);let n=mo(t,e),r=e,s=fi,i=Ls;for(;n!==fi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Ls)throw new Error("invert: does not exist");return mo(s,e)}function KF(t,e){const n=(t.ORDER+Ls)/HF,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function ine(t,e){const n=(t.ORDER-VF)/GF,r=t.mul(e,Wd),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Wd),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function one(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ls,n=0;for(;e%Wd===fi;)e/=Wd,n++;let r=Wd;const s=s1(t);for(;q$(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return KF;let i=s.pow(r,e);const o=(e+Ls)/Wd;return function(c,l){if(c.is0(l))return l;if(q$(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Ls<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function ane(t){return t%HF===sne?KF:t%GF===VF?ine:one(t)}const cne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lne(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=cne.reduce((r,s)=>(r[s]="function",r),e);return $k(t,n),t}function une(t,e,n){if(n<fi)throw new Error("invalid exponent, negatives unsupported");if(n===fi)return t.ONE;if(n===Ls)return e;let r=t.ONE,s=e;for(;n>fi;)n&Ls&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ls;return r}function YF(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function q$(t,e){const n=(t.ORDER-Ls)/Wd,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function dne(t,e){e!==void 0&&Nw(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function s1(t,e,n=!1,r={}){if(t<=fi)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=dne(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:JC(o),ZERO:fi,ONE:Ls,create:u=>mo(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return fi<=u&&u<t},is0:u=>u===fi,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ls)===Ls,neg:u=>mo(-u,t),eql:(u,d)=>u===d,sqr:u=>mo(u*u,t),add:(u,d)=>mo(u+d,t),sub:(u,d)=>mo(u-d,t),mul:(u,d)=>mo(u*d,t),pow:(u,d)=>une(l,u,d),div:(u,d)=>mo(u*z$(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>z$(u,t),sqrt:i||(u=>(c||(c=ane(t)),c(l,u))),toBytes:u=>n?Y4(u,a):Dk(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?K4(u):QC(u)},invertBatch:u=>YF(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function QF(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function JF(t){const e=QF(t);return e+Math.ceil(e/2)}function hne(t,e,n=!1){const r=t.length,s=QF(e),i=JF(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?K4(t):QC(t),a=mo(o,e-Ls)+Ls;return n?Y4(a,s):Dk(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vg=BigInt(0),zd=BigInt(1);function By(t,e){const n=e.negate();return t?n:e}function fne(t,e,n){const r=o=>o.pz,s=YF(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function ZF(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function pA(t,e){ZF(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=JC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function H$(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=zd);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function pne(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function gne(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const gA=new WeakMap,XF=new WeakMap;function mA(t){return XF.get(t)||1}function V$(t){if(t!==vg)throw new Error("invalid wNAF")}function mne(t,e){return{constTimeNegate:By,hasPrecomputes(n){return mA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>vg;)r&zd&&(s=s.add(i)),i=i.double(),r>>=zd;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=pA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=pA(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=H$(s,c,a);s=l,d?o=o.add(By(f,r[p])):i=i.add(By(h,r[u]))}return V$(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=pA(n,e);for(let a=0;a<o.windows&&s!==vg;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=H$(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return V$(s),i},getPrecomputes(n,r,s){let i=gA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),gA.set(r,i))),i},wNAFCached(n,r,s){const i=mA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=mA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){ZF(r,e),XF.set(n,r),gA.delete(n)}}}function yne(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>vg||r>vg;)n&zd&&(i=i.add(s)),r&zd&&(o=o.add(s)),s=s.double(),n>>=zd,r>>=zd;return{p1:i,p2:o}}function wne(t,e,n,r){pne(n,t),gne(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=IX(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=JC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function G$(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return lne(e),e}else return s1(t)}function vne(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>vg))throw new Error(`CURVE.${a} must be positive bigint`)}const r=G$(e.p,n.Fp),s=G$(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function K$(t){t.lowS!==void 0&&CE("lowS",t.lowS),t.prehash!==void 0&&CE("prehash",t.prehash)}class bne extends Error{constructor(e=""){super(e)}}const Uc={Err:bne,_tlv:{encode:(t,e)=>{const{Err:n}=Uc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=pb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?pb(s.length/2|128):"";return pb(t)+i+s+e},decode(t,e){const{Err:n}=Uc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Uc;if(t<Fy)throw new e("integer: negative integers are not allowed");let n=pb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Uc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return QC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Uc,s=fo("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Uc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Fy=BigInt(0),Wy=BigInt(1),_ne=BigInt(2),mb=BigInt(3),Ene=BigInt(4);function Cne(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function e9(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=fo("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Sne(t,e={}){const{Fp:n,Fn:r}=vne("weierstrass",t,e),{h:s,n:i}=t;$k(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(x,S,O){const{x:P,y:j}=S.toAffine(),q=n.toBytes(P);if(CE("isCompressed",O),O){a();const B=!n.isOdd(j);return jd(t9(B),q)}else return jd(Uint8Array.of(4),q,n.toBytes(j))}function l(x){wa(x);const S=n.BYTES,O=S+1,P=2*S+1,j=x.length,q=x[0],B=x.subarray(1);if(j===O&&(q===2||q===3)){const N=n.fromBytes(B);if(!n.isValid(N))throw new Error("bad point: is not on curve, wrong x");const T=h(N);let $;try{$=n.sqrt(T)}catch(U){const H=U instanceof Error?": "+U.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}a();const R=n.isOdd($);return(q&1)===1!==R&&($=n.neg($)),{x:N,y:$}}else if(j===P&&q===4){const N=n.fromBytes(B.subarray(S*0,S*1)),T=n.fromBytes(B.subarray(S*1,S*2));if(!f(N,T))throw new Error("bad point: is not on curve");return{x:N,y:T}}else throw new Error(`bad point: got length ${j}, expected compressed=${O} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Cne(n,t.a,t.b);function f(x,S){const O=n.sqr(S),P=h(x);return n.eql(O,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,mb),Ene),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(x,S,O=!1){if(!n.isValid(S)||O&&n.is0(S))throw new Error(`bad point coordinate ${x}`);return S}function y(x){if(!(x instanceof C))throw new Error("ProjectivePoint expected")}const v=R$((x,S)=>{const{px:O,py:P,pz:j}=x;if(n.eql(j,n.ONE))return{x:O,y:P};const q=x.is0();S==null&&(S=q?n.ONE:n.inv(j));const B=n.mul(O,S),N=n.mul(P,S),T=n.mul(j,S);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:B,y:N}}),b=R$(x=>{if(x.is0()){if(e.allowInfinityPoint&&!n.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=x.toAffine();if(!n.isValid(S)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(S,O))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(x,S,O,P,j){return O=new C(n.mul(O.px,x),O.py,O.pz),S=By(P,S),O=By(j,O),S.add(O)}class C{constructor(S,O,P){this.px=w("x",S),this.py=w("y",O,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:O,y:P}=S||{};if(!S||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(P)?C.ZERO:new C(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return fne(C,"pz",S)}static fromBytes(S){return wa(S),C.fromHex(S)}static fromHex(S){const O=C.fromAffine(d(fo("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){const O=e9(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(O(S))}static msm(S,O){return wne(C,r,S,O)}precompute(S=8,O=!0){return I.setWindowSize(this,S),O||this.multiply(mb),this}_setWindowSize(S){this.precompute(S)}assertValidity(){b(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:O,py:P,pz:j}=this,{px:q,py:B,pz:N}=S,T=n.eql(n.mul(O,N),n.mul(q,j)),$=n.eql(n.mul(P,N),n.mul(B,j));return T&&$}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:O}=t,P=n.mul(O,mb),{px:j,py:q,pz:B}=this;let N=n.ZERO,T=n.ZERO,$=n.ZERO,R=n.mul(j,j),D=n.mul(q,q),U=n.mul(B,B),H=n.mul(j,q);return H=n.add(H,H),$=n.mul(j,B),$=n.add($,$),N=n.mul(S,$),T=n.mul(P,U),T=n.add(N,T),N=n.sub(D,T),T=n.add(D,T),T=n.mul(N,T),N=n.mul(H,N),$=n.mul(P,$),U=n.mul(S,U),H=n.sub(R,U),H=n.mul(S,H),H=n.add(H,$),$=n.add(R,R),R=n.add($,R),R=n.add(R,U),R=n.mul(R,H),T=n.add(T,R),U=n.mul(q,B),U=n.add(U,U),R=n.mul(U,H),N=n.sub(N,R),$=n.mul(U,D),$=n.add($,$),$=n.add($,$),new C(N,T,$)}add(S){y(S);const{px:O,py:P,pz:j}=this,{px:q,py:B,pz:N}=S;let T=n.ZERO,$=n.ZERO,R=n.ZERO;const D=t.a,U=n.mul(t.b,mb);let H=n.mul(O,q),te=n.mul(P,B),oe=n.mul(j,N),re=n.add(O,P),ie=n.add(q,B);re=n.mul(re,ie),ie=n.add(H,te),re=n.sub(re,ie),ie=n.add(O,j);let ye=n.add(q,N);return ie=n.mul(ie,ye),ye=n.add(H,oe),ie=n.sub(ie,ye),ye=n.add(P,j),T=n.add(B,N),ye=n.mul(ye,T),T=n.add(te,oe),ye=n.sub(ye,T),R=n.mul(D,ie),T=n.mul(U,oe),R=n.add(T,R),T=n.sub(te,R),R=n.add(te,R),$=n.mul(T,R),te=n.add(H,H),te=n.add(te,H),oe=n.mul(D,oe),ie=n.mul(U,ie),te=n.add(te,oe),oe=n.sub(H,oe),oe=n.mul(D,oe),ie=n.add(ie,oe),H=n.mul(te,ie),$=n.add($,H),H=n.mul(ye,ie),T=n.mul(re,T),T=n.sub(T,H),H=n.mul(re,te),R=n.mul(ye,R),R=n.add(R,H),new C(T,$,R)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:O}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,j;const q=B=>I.wNAFCached(this,B,C.normalizeZ);if(O){const{k1neg:B,k1:N,k2neg:T,k2:$}=O.splitScalar(S),{p:R,f:D}=q(N),{p:U,f:H}=q($);j=D.add(H),P=E(O.beta,R,U,B,T)}else{const{p:B,f:N}=q(S);P=B,j=N}return C.normalizeZ([P,j])[0]}multiplyUnsafe(S){const{endo:O}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===Fy||P.is0())return C.ZERO;if(S===Wy)return P;if(I.hasPrecomputes(this))return this.multiply(S);if(O){const{k1neg:j,k1:q,k2neg:B,k2:N}=O.splitScalar(S),{p1:T,p2:$}=yne(C,P,q,N);return E(O.beta,T,$,j,B)}else return I.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,O,P){const j=this.multiplyUnsafe(O).add(S.multiplyUnsafe(P));return j.is0()?void 0:j}toAffine(S){return v(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===Wy?!0:S?S(C,this):I.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===Wy?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return CE("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return Rw(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const A=r.BITS,I=mne(C,e.endo?Math.ceil(A/2):A);return C}function t9(t){return Uint8Array.of(t?2:3)}function Ane(t,e,n={}){$k(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||BQ,s=e.hmac||((P,...j)=>qF(e.hash,P,jd(...j))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const j=a>>Wy;return P>j}function u(P){return l(P)?o.neg(P):P}function d(P,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(j,q,B){d("r",j),d("s",q),this.r=j,this.s=q,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(j){const q=o.BYTES,B=fo("compactSignature",j,q*2);return new h(o.fromBytes(B.subarray(0,q)),o.fromBytes(B.subarray(q,q*2)))}static fromDER(j){const{r:q,s:B}=Uc.toSig(fo("DER",j));return new h(q,B)}assertValidity(){}addRecoveryBit(j){return new h(this.r,this.s,j)}recoverPublicKey(j){const q=i.ORDER,{r:B,s:N,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(a*_ne<q&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=T===2||T===3?B+a:B;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(R),U=t.fromHex(jd(t9((T&1)===0),D)),H=o.inv(R),te=b(fo("msgHash",j)),oe=o.create(-te*H),re=o.create(N*H),ie=t.BASE.multiplyUnsafe(oe).add(U.multiplyUnsafe(re));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(j){if(j==="compact")return jd(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return hk(Uc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Rw(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Rw(this.toBytes("compact"))}}const f=e9(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return hne(r(JF(P)),P)},precompute(P=8,j=t.BASE){return j.precompute(P,!1)}};function g(P,j=!0){return t.fromPrivateKey(P).toBytes(j)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const q=fo("key",P).length,B=i.BYTES,N=B+1,T=2*B+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===N))return q===N||q===T}function y(P,j,q=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(j)===!1)throw new Error("second arg must be public key");return t.fromHex(j).multiply(f(P)).toBytes(q)}const v=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const j=QC(P),q=P.length*8-c;return q>0?j>>BigInt(q):j},b=e.bits2int_modN||function(P){return o.create(v(P))},E=JC(c);function C(P){return AX("num < 2^"+c,P,Fy,E),o.toBytes(P)}function A(P,j,q=I){if(["recovered","canonical"].some(re=>re in q))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:N,prehash:T,extraEntropy:$}=q;N==null&&(N=!0),P=fo("msgHash",P),K$(q),T&&(P=fo("prehashed msgHash",B(P)));const R=b(P),D=f(j),U=[C(D),C(R)];if($!=null&&$!==!1){const re=$===!0?r(i.BYTES):$;U.push(fo("extraEntropy",re))}const H=jd(...U),te=R;function oe(re){const ie=v(re);if(!o.isValidNot0(ie))return;const ye=o.inv(ie),Z=t.BASE.multiply(ie).toAffine(),Y=o.create(Z.x);if(Y===Fy)return;const ue=o.create(ye*o.create(te+Y*D));if(ue===Fy)return;let ne=(Z.x===Y?0:2)|Number(Z.y&Wy),ce=ue;return N&&l(ue)&&(ce=u(ue),ne^=1),new h(Y,ce,ne)}return{seed:H,k2sig:oe}}const I={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};function S(P,j,q=I){const{seed:B,k2sig:N}=A(P,j,q);return xX(e.hash.outputLen,o.BYTES,s)(B,N)}t.BASE.precompute(8);function O(P,j,q,B=x){const N=P;j=fo("msgHash",j),q=fo("publicKey",q),K$(B);const{lowS:T,prehash:$,format:R}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const D=typeof N=="string"||dk(N),U=!D&&!R&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!D&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,te;try{if(U)if(R===void 0||R==="js")H=new h(N.r,N.s);else throw new Error("invalid format");if(D){try{R!=="compact"&&(H=h.fromDER(N))}catch(ce){if(!(ce instanceof Uc.Err))throw ce}!H&&R!=="der"&&(H=h.fromCompact(N))}te=t.fromHex(q)}catch{return!1}if(!H||T&&H.hasHighS())return!1;$&&(j=e.hash(j));const{r:oe,s:re}=H,ie=b(j),ye=o.inv(re),Z=o.create(ie*ye),Y=o.create(oe*ye),ue=t.BASE.multiplyUnsafe(Z).add(te.multiplyUnsafe(Y));return ue.is0()?!1:o.create(ue.x)===oe}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:O,utils:p,Point:t,Signature:h})}function Ine(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=s1(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function xne(t){const{CURVE:e,curveOpts:n}=Ine(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Tne(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Nne(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=xne(t),s=Sne(e,n),i=Ane(s,r,n);return Tne(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rne(t,e){const n=r=>Nne({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Pne=BigInt(1),HT=BigInt(2),Y$=(t,e)=>(t+e/HT)/e;function kne(t){const e=IE.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ro(u,n,e)*u%e,h=ro(d,n,e)*u%e,f=ro(h,HT,e)*l%e,p=ro(f,s,e)*f%e,g=ro(p,i,e)*p%e,w=ro(g,a,e)*g%e,y=ro(w,c,e)*w%e,v=ro(y,a,e)*g%e,b=ro(v,n,e)*u%e,E=ro(b,o,e)*p%e,C=ro(E,r,e)*l%e,A=ro(C,HT,e);if(!VT.eql(VT.sqr(A),t))throw new Error("Cannot find square root");return A}const VT=s1(IE.p,void 0,void 0,{sqrt:kne}),n9=Rne({...IE,Fp:VT,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=IE.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Pne*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Y$(i*t,e),c=Y$(-r*t,e);let l=mo(t-a*n-c*s,e),u=mo(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},b4),One=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:n9},Symbol.toStringTag,{value:"Module"}));function Dne({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new n9.Signature(Ki(t),Ki(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ao(o)}async function Gk(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=sc(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Dne(o):Tr(o),u=await(async()=>!r&&!s||kte(l)?l:Ote({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Po({abi:S$,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:zC({abi:S$,args:[n,i,u],bytecode:XX}),...c},{data:g}=await Xe(t,ov,"call")(p);return cQ(g??"0x0")}catch(p){try{if(XC(Vc(n),await r4({hash:i,signature:o})))return!0}catch{}if(p instanceof q4)return!1;throw p}}async function $ne(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=OF(n);return Gk(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function Mne(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=Ste({message:o,primaryType:a,types:c,domain:l});return Gk(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function Lne(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function Une(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=Ir(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return cl(y,{onLogs:l,onError:c},v=>{let b;a!==void 0&&(b=a-1n);let E,C=!1;const A=Jg(async()=>{var I;if(!C){try{E=await Xe(t,dF,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let x;if(E)x=await Xe(t,e1,"getFilterChanges")({filter:E});else{const S=await Xe(t,cv,"getBlockNumber")({});b&&b<S?x=await Xe(t,pF,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:b+1n,toBlock:S,strict:w}):x=[],b=S}if(x.length===0)return;if(i)v.onLogs(x);else for(const S of x)v.onLogs([S])}catch(x){E&&x instanceof bh&&(C=!1),(I=v.onError)==null||I.call(v,x)}},{emitOnBegin:!0,interval:d});return async()=>{E&&await Xe(t,r1,"uninstallFilter")({filter:E}),A()}})})():(()=>{const w=h??!1,y=Ir(["watchContractEvent",r,s,i,t.uid,o,d,w]);let v=!0,b=()=>v=!1;return cl(y,{onLogs:l,onError:c},E=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const x=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return x?x.value:t.transport}return t.transport})(),A=o?av({abi:n,eventName:o,args:s}):[],{unsubscribe:I}=await C.subscribe({params:["logs",{address:r,topics:A}],onData(x){var O;if(!v)return;const S=x.result;try{const{eventName:P,args:j}=Wk({abi:n,data:S.data,topics:S.topics,strict:h}),q=al(S,{args:j,eventName:P});E.onLogs([q])}catch(P){let j,q;if(P instanceof Tw||P instanceof FC){if(h)return;j=P.abiItem.name,q=(O=P.abiItem.inputs)==null?void 0:O.some(N=>!("name"in N&&N.name))}const B=al(S,{args:q?[]:{},eventName:j});E.onLogs([B])}},onError(x){var S;(S=E.onError)==null||S.call(E,x)}});b=I,v||b()}catch(C){c==null||c(C)}})(),()=>b()))})()}async function r9(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Gh({docsPath:"/docs/contract/writeContract"});const l=r?ir(r):null,u=Po({abi:n,args:i,functionName:a});try{return await Xe(t,rv,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Eh(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Hi(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const A_="2.17.3",jne=()=>`@wagmi/core@${A_}`;var s9=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},xE,i9;let gl=class GT extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return jne()}constructor(e,n={}){var i;super(),xE.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof GT?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof GT&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return s9(this,xE,"m",i9).call(this,this,e)}};xE=new WeakSet,i9=function t(e,n){return n!=null&&n(e)?e:e.cause?s9(this,xE,"m",t).call(this,e.cause,n):e};class Gw extends gl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Bne extends gl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Fne extends gl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Wne extends gl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class zne extends gl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class qne extends gl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function I_(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Bne;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const KT=256;let yb=KT,wb;function o9(t=11){if(!wb||yb+t>KT*2){wb="",yb=0;for(let e=0;e<KT;e++)wb+=(256+Math.random()*256|0).toString(16).substring(1)}return wb.substring(yb,yb+++t)}function a9(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?ir(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:o9()};function y(v){return b=>{const E=b(v);for(const A in w)delete E[A];const C={...v,...E};return Object.assign(C,{extend:y(C)})}}return Object.assign(w,{extend:y(w)})}function Kk({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=o9();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:mte(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Hne(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>Kk({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function TE(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Vne,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=Kk({key:n,name:r,async request({method:g,params:w}){let y;const v=async(b=0)=>{const E=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const C=await E.request({method:g,params:w});return f({method:g,params:w,response:C,transport:E,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:E,status:"error"}),i(C)||b===h.length-1||(y??(y=h.slice(b+1).some(A=>{const{include:I,exclude:x}=A({chain:c}).config.methods||{};return I?I.includes(g):x?!x.includes(g):!0})),!y))throw C;return v(b+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Gne({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function Vne(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===gg.code||t.code===vr.code||Bd.nodeMessage.test(t.message)||t.code===5e3))}function Gne({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let v,b;try{await(r?r({transport:w}):w.request({method:"net_listening"})),b=1}catch{b=0}finally{v=Date.now()}return{latency:v-y,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(A=>A[w].latency),b=1-y.reduce((A,I)=>A+I,0)/y.length/f,E=u.map(A=>A[w].success),C=E.reduce((A,I)=>A+I,0)/E.length;return C===0?[0,w]:[l*b+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await SE(e),d()};d()}class Kne extends he{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function uu(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,v=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!v)throw new Kne;const b=bte(v,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return Kk({key:s,methods:i,name:o,async request({method:E,params:C}){const A={method:E,params:C},{schedule:I}=iF({id:v,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>b.request({body:P}),sort:(P,j)=>P.id-j.id}),x=async P=>n?I(P):[await b.request({body:P})],[{error:S,result:O}]=await x(A);if(u)return{error:S,result:O};if(S)throw new Ek({body:A,error:S,url:v});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:v})}}function Yne(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Qne))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Jne))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Qne=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Jne=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Zne(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!To(r.address,{strict:!1})||e&&!XC(r.address,e))return!1}catch{return!1}return!0}async function Xne(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Yne(s);if(!u.address||!Zne({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=OF(s);return Gk(t,{address:u.address,hash:h,signature:a,...l})}function ere(t){return{call:e=>ov(t,e),createAccessList:e=>uF(t,e),createBlockFilter:()=>bee(t),createContractEventFilter:e=>dF(t,e),createEventFilter:e=>hF(t,e),createPendingTransactionFilter:()=>fF(t),estimateContractGas:e=>Eee(t,e),estimateGas:e=>VC(t,e),getBalance:e=>Ik(t,e),getBlobBaseFee:()=>Cee(t),getBlock:e=>Qa(t,e),getBlockNumber:e=>cv(t,e),getBlockTransactionCount:e=>Nee(t,e),getBytecode:e=>U$(t,e),getChainId:()=>Kg(t),getCode:e=>U$(t,e),getContractEvents:e=>pF(t,e),getEip712Domain:e=>Oee(t,e),getEnsAddress:e=>iee(t,e),getEnsAvatar:e=>wee(t,e),getEnsName:e=>lF(t,e),getEnsResolver:e=>vee(t,e),getEnsText:e=>cF(t,e),getFeeHistory:e=>Mee(t,e),estimateFeesPerGas:e=>WJ(t,e),getFilterChanges:e=>e1(t,e),getFilterLogs:e=>Lee(t,e),getGasPrice:()=>Sk(t),getLogs:e=>qk(t,e),getProof:e=>Qte(t,e),estimateMaxPriorityFeePerGas:e=>FJ(t,e),getStorageAt:e=>Uee(t,e),getTransaction:e=>t1(t,e),getTransactionConfirmations:e=>jee(t,e),getTransactionCount:e=>xk(t,e),getTransactionReceipt:e=>UT(t,e),multicall:e=>mF(t,e),prepareTransactionRequest:e=>nv(t,e),readContract:e=>ac(t,e),sendRawTransaction:e=>Nk(t,e),simulate:e=>jT(t,e),simulateBlocks:e=>jT(t,e),simulateCalls:e=>Lte(t,e),simulateContract:e=>nne(t,e),verifyMessage:e=>$ne(t,e),verifySiweMessage:e=>Xne(t,e),verifyTypedData:e=>Mne(t,e),uninstallFilter:e=>r1(t,e),waitForTransactionReceipt:e=>BF(t,e),watchBlocks:e=>jte(t,e),watchBlockNumber:e=>$F(t,e),watchContractEvent:e=>Une(t,e),watchEvent:e=>Bte(t,e),watchPendingTransactions:e=>MF(t,e)}}function tre(t){return{addChain:e=>dQ(t,e),deployContract:e=>uZ(t,e),getAddresses:()=>Fte(t),getCallsStatus:e=>jF(t,e),getCapabilities:e=>zte(t,e),getChainId:()=>Kg(t),getPermissions:()=>Wte(t),prepareAuthorization:e=>FF(t,e),prepareTransactionRequest:e=>nv(t,e),requestAddresses:()=>Jte(t),requestPermissions:e=>Zte(t,e),sendCalls:e=>qte(t,e),sendRawTransaction:e=>Nk(t,e),sendTransaction:e=>rv(t,e),showCallsStatus:e=>Hte(t,e),signAuthorization:e=>Xte(t,e),signMessage:e=>WF(t,e),signTransaction:e=>ene(t,e),signTypedData:e=>tne(t,e),switchChain:e=>rne(t,e),waitForCallsStatus:e=>Vte(t,e),watchAsset:e=>Lne(t,e),writeContract:e=>r9(t,e)}}async function lv(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new qne({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new Fne;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new zne({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=ir(e.account??n.accounts[0]);if(o&&(o.address=Vc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Wne({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return a9({account:o,chain:a,name:"Connector Client",transport:l=>Hne(c)({...l,retryCount:0})})}async function YT(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function nre(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await lv(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Hi(o,VC,"estimateGas")({...s,account:i})}function c9(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(xJ[t])}function $p(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function rre(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Hi(o,mF,"multicall")({allowFailure:n,contracts:s,...i})}function l9(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Hi(s,ac,"readContract")(r)}async function sre(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>rre(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof H4)throw c;const l=()=>o.map(u=>l9(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function ire(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await Q$(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await Q$(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=MB(Xa(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Hi(c,Ik,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Kh(u,c9(a)),symbol:d.nativeCurrency.symbol,value:u}}async function Q$(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await sre(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Kh(c??"0",c9(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function J$(t){return t.state.chainId}function Ah(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ah(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Ah(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function ore(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let vb=[];function Yo(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Ah(vb,e)?vb:(vb=e,e)}let yA=[];function Z$(t){const e=t.connectors;return Ah(yA,e)?yA:(yA=e,e)}function are(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Hi(s,lF,"getEnsName")(r)}function QT(t,e={}){const n=ore(t,e);return n==null?void 0:n.extend(ere)}async function cre(t,e={}){return(await lv(t,e)).extend(tre)}async function lre(t,e){const{account:n,chainId:r,...s}=e,i=n??$p(t).address,o=t.getClient({chainId:r});return Hi(o,nv,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let wA=!1;async function JT(t,e={}){var l,u;if(wA)return[];wA=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),wA=!1,a}async function ure(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await lv(t,{account:n??void 0,chainId:r,connector:s}),await Hi(o,rv,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function dre(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await lv(t,{account:n,connector:r}),Hi(i,WF,"signMessage")({...s,...n?{account:n}:{}})}class Fl extends gl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class hre extends gl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function X$(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new hre({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Gw;return t.setState(a=>({...a,chainId:r})),i}function u9(t,e){const{onChange:n}=e;return t.subscribe(()=>$p(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Ah(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function fre(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function d9(t,e){const{onChange:n}=e;return t.subscribe(()=>Yo(t),n,{equalityFn:Ah})}function h9(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function pre(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Hi(l,MF,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function gre(t,e){const{onChange:n}=e;return t.subscribe(()=>QT(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function f9(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Hi(i,BF,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Hi(i,t1,"getTransaction")({hash:a.transactionHash}),d=await Hi(i,ov,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?MB(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function p9(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await lv(t,{account:n??void 0,chainId:r,connector:s}),await Hi(o,r9,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function Hje(t){return t}i1.type="injected";function i1(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...mre[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:i1.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,v;const d=await this.getProvider();if(!d)throw new Fl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(E=>Vc(E)),h.length>0&&(h=await this.getAccounts())}catch(b){const E=b;if(E.code===vr.code)throw new vr(E);if(E.code===Iu.code)throw E}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Vc(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let b=await this.getChainId();if(l&&b!==l){const E=await this.switchChain({chainId:l}).catch(C=>{if(C.code===vr.code)throw C;return{id:b}});b=(E==null?void 0:E.id)??b}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((v=c.storage)==null?void 0:v.setItem("injected.connected",!0)),{accounts:h,chainId:b}}catch(b){const E=b;throw E.code===vr.code?new vr(E):E.code===Iu.code?new Iu(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Fl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await IF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Fl;return(await l.request({method:"eth_accounts"})).map(d=>Vc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Fl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=x_(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Fl}return!!(await AE(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new Fl;const h=c.chains.find(v=>v.id===u);if(!h)throw new ic(new Gw);const f=new Promise(v=>{const b=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",b),v())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:ze(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(v){const b=v;if(b.code===4902||((g=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:E,...C}=h.blockExplorers??{};let A;l!=null&&l.blockExplorerUrls?A=l.blockExplorerUrls:E&&(A=[E.url,...Object.values(C).map(S=>S.url)]);let I;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?I=l.rpcUrls:I=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const x={blockExplorerUrls:A,chainId:ze(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:I};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[x]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new vr(new Error("User rejected switch after adding network."))}),f]),h}catch(E){throw new vr(E)}throw b.code===vr.code?new vr(b):new ic(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Vc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const mre={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:x_(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return x_(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:x_(t,"isPhantom")}}};function x_(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function yre(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function wre(){const t=new Set;let e=[];const n=()=>yre(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const vre=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},bre=vre;function _re(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const ZT=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return ZT(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ZT(r)(n)}}}},Ere=(t,e)=>(n,r,s)=>{let i={storage:_re(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return ZT(l.getItem.bind(l))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[E,C]=v;if(f=i.merge(C,(b=r())!=null?b:h),n(f,!0),E)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(v=>v(f))}).catch(v=>{y==null||y(void 0,v)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Cre=Ere,e3=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},vA=t=>t?e3(t):e3;var g9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,v,b;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];w.fn.apply(w.context,v)}else{var E=w.length,C;for(b=0;b<E;b++)switch(w[b].once&&this.removeListener(l,w[b].fn,void 0,!0),y){case 1:w[b].fn.call(w[b].context);break;case 2:w[b].fn.call(w[b].context,u);break;case 3:w[b].fn.call(w[b].context,u,d);break;case 4:w[b].fn.call(w[b].context,u,d,h);break;default:if(!v)for(C=1,v=new Array(y-1);C<y;C++)v[C-1]=arguments[C];w[b].fn.apply(w[b].context,v)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(g9);var Sre=g9.exports;const Are=qh(Sre);class Ire{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Are})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function xre(t){return new Ire(t)}function Tre(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function t3(t,e){return t.slice(0,e).join(".")||"."}function n3(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Nre(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=n3(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=n3(s,c);if(u!==0)return r?e.call(this,a,c,t3(i,u)):`[ref=${t3(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Rre(t,e,n,r){return JSON.stringify(t,Nre((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Pre(t){const{deserialize:e=Tre,key:n="wagmi",serialize:r=Rre,storage:s=m9}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const m9={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function kre(){const t=typeof window<"u"&&window.localStorage?window.localStorage:m9;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const XT=256;let bb=XT,_b;function Ore(t=11){if(!_b||bb+t>XT*2){_b="",bb=0;for(let e=0;e<XT;e++)_b+=(256+Math.random()*256|0).toString(16).substring(1)}return _b.substring(bb,bb+++t)}function Dre(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Pre({storage:kre()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?wre():void 0,a=vA(()=>i.chains),c=vA(()=>{const C=[],A=new Set;for(const I of i.connectors??[]){const x=l(I);if(C.push(x),!s&&x.rdns){const S=typeof x.rdns=="string"?[x.rdns]:x.rdns;for(const O of S)A.add(O)}}if(!s&&o){const I=o.getProviders();for(const x of I)A.has(x.info.rdns)||C.push(l(u(x)))}return C});function l(C){var x;const A=xre(Ore()),I={...C({emitter:A,chains:a.getState(),storage:n,transports:i.transports}),emitter:A,uid:A.uid};return A.on("connect",b),(x=I.setup)==null||x.call(I),I}function u(C){const{info:A}=C,I=C.provider;return i1({target:{...A,id:A.rdns,provider:I}})}const d=new Map;function h(C={}){const A=C.chainId??w.getState().chainId,I=a.getState().find(S=>S.id===A);if(C.chainId&&!I)throw new Gw;{const S=d.get(w.getState().chainId);if(S&&!I)return S;if(!I)throw new Gw}{const S=d.get(A);if(S)return S}let x;if(i.client)x=i.client({chain:I});else{const S=I.id,O=a.getState().map(q=>q.id),P={},j=Object.entries(i);for(const[q,B]of j)if(!(q==="chains"||q==="client"||q==="connectors"||q==="transports"))if(typeof B=="object")if(S in B)P[q]=B[S];else{if(O.some(T=>T in B))continue;P[q]=B}else P[q]=B;x=a9({...P,chain:I,batch:P.batch??{multicall:!0},transport:q=>i.transports[S]({...q,connectors:c})})}return d.set(A,x),x}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";A_.startsWith(g)?p=Number.parseInt(A_.replace(g,"")):p=Number.parseInt(A_.split(".")[0]??"0");const w=vA(bre(n?Cre(f,{migrate(C,A){if(A===p)return C;const I=f(),x=y(C,I.chainId);return{...I,chainId:x}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([A,I])=>{const{id:x,name:S,type:O,uid:P}=I.connector;return[A,{...I,connector:{id:x,name:S,type:O,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,A){typeof C=="object"&&C&&"status"in C&&delete C.status;const I=y(C,A.chainId);return{...A,...C,chainId:I}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(C,A){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(I=>I.id===C.chainId)?C.chainId:A}r&&w.subscribe(({connections:C,current:A})=>{var I;return A?(I=C.get(A))==null?void 0:I.chainId:void 0},C=>{if(a.getState().some(I=>I.id===C))return w.setState(I=>({...I,chainId:C??I.chainId}))}),o==null||o.subscribe(C=>{const A=new Set,I=new Set;for(const S of c.getState())if(A.add(S.id),S.rdns){const O=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of O)I.add(P)}const x=[];for(const S of C){if(I.has(S.info.rdns))continue;const O=l(u(S));A.has(O.id)||x.push(O)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...x],!0)});function v(C){w.setState(A=>{const I=A.connections.get(C.uid);return I?{...A,connections:new Map(A.connections).set(C.uid,{accounts:C.accounts??I.accounts,chainId:C.chainId??I.chainId,connector:I.connector})}:A})}function b(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(A=>{const I=c.getState().find(x=>x.uid===C.uid);return I?(I.emitter.listenerCount("connect")&&I.emitter.off("connect",v),I.emitter.listenerCount("change")||I.emitter.on("change",v),I.emitter.listenerCount("disconnect")||I.emitter.on("disconnect",E),{...A,connections:new Map(A.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:I}),current:C.uid,status:"connected"}):A})}function E(C){w.setState(A=>{const I=A.connections.get(C.uid);if(I){const S=I.connector;S.emitter.listenerCount("change")&&I.connector.emitter.off("change",v),S.emitter.listenerCount("disconnect")&&I.connector.emitter.off("disconnect",E),S.emitter.listenerCount("connect")||I.connector.emitter.on("connect",b)}if(A.connections.delete(C.uid),A.connections.size===0)return{...A,connections:new Map,current:null,status:"disconnected"};const x=A.connections.values().next().value;return{...A,connections:new Map(A.connections),current:x.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let A;typeof C=="function"?A=C(w.getState()):A=C;const I=f();typeof A!="object"&&(A=I),Object.keys(I).some(S=>!(S in A))&&(A=I),w.setState(A,!0)},subscribe(C,A,I){return w.subscribe(C,A,I?{...I,fireImmediately:I.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const A=typeof C=="function"?C(a.getState()):C;if(A.length!==0)return a.setState(A,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:v,connect:b,disconnect:E}}}}function $re(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?JT(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Mre(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=$re(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=k.useRef(!0);return k.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const y9=k.createContext(void 0);function Lre(t){const{children:e,config:n}=t,r={value:n};return k.createElement(Mre,t,k.createElement(y9.Provider,r,e))}const Ure="2.15.6",jre=()=>`wagmi@${Ure}`;let Bre=class extends gl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return jre()}};class Fre extends Bre{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function ko(t={}){const e=t.config??k.useContext(y9);if(!e)throw new Fre;return e}var w9={exports:{}},v9={},b9={exports:{}},_9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg=k;function Wre(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zre=typeof Object.is=="function"?Object.is:Wre,qre=bg.useState,Hre=bg.useEffect,Vre=bg.useLayoutEffect,Gre=bg.useDebugValue;function Kre(t,e){var n=e(),r=qre({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Vre(function(){s.value=n,s.getSnapshot=e,bA(s)&&i({inst:s})},[t,n,e]),Hre(function(){return bA(s)&&i({inst:s}),t(function(){bA(s)&&i({inst:s})})},[t]),Gre(n),n}function bA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zre(t,n)}catch{return!0}}function Yre(t,e){return e()}var Qre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Yre:Kre;_9.useSyncExternalStore=bg.useSyncExternalStore!==void 0?bg.useSyncExternalStore:Qre;b9.exports=_9;var E9=b9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=k,Jre=E9;function Zre(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xre=typeof Object.is=="function"?Object.is:Zre,ese=Jre.useSyncExternalStore,tse=o1.useRef,nse=o1.useEffect,rse=o1.useMemo,sse=o1.useDebugValue;v9.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=tse(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=rse(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Xre(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=ese(t,i[0],i[1]);return nse(function(){o.hasValue=!0,o.value=a},[a]),sse(a),a};w9.exports=v9;var C9=w9.exports;const _A=t=>typeof t=="object"&&!Array.isArray(t);function ise(t,e,n=e,r=Ah){const s=k.useRef([]),i=C9.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(_A(o)&&_A(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return k.useMemo(()=>{if(_A(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function uv(t={}){const e=ko(t);return ise(n=>u9(e,{onChange:n}),()=>$p(e))}var Zg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ih=typeof window>"u"||"Deno"in globalThis;function Ps(){}function ose(t,e){return typeof t=="function"?t(e):t}function eN(t){return typeof t=="number"&&t>=0&&t!==1/0}function S9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function xu(t,e){return typeof t=="function"?t(e):t}function yo(t,e){return typeof t=="function"?t(e):t}function r3(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Yk(o,e.options))return!1}else if(!Kw(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function s3(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(xh(e.options.mutationKey)!==xh(i))return!1}else if(!Kw(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Yk(t,e){return((e==null?void 0:e.queryKeyHashFn)||xh)(t)}function xh(t){return JSON.stringify(t,(e,n)=>tN(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Kw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Kw(t[n],e[n])):!1}function Qk(t,e){if(t===e)return t;const n=i3(t)&&i3(e);if(n||tN(t)&&tN(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=Qk(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function NE(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function i3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tN(t){if(!o3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!o3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function o3(t){return Object.prototype.toString.call(t)==="[object Object]"}function ase(t){return new Promise(e=>{setTimeout(e,t)})}function nN(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Qk(t,e):e}function cse(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function lse(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Jk=Symbol();function A9(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Jk?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function I9(t,e){return typeof t=="function"?t(...e):!!t}var Qd,Zl,Hp,c6,use=(c6=class extends Zg{constructor(){super();Je(this,Qd);Je(this,Zl);Je(this,Hp);Ie(this,Hp,e=>{if(!Ih&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,Zl)||this.setEventListener(W(this,Hp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Zl))==null||e.call(this),Ie(this,Zl,void 0))}setEventListener(e){var n;Ie(this,Hp,e),(n=W(this,Zl))==null||n.call(this),Ie(this,Zl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,Qd)!==e&&(Ie(this,Qd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof W(this,Qd)=="boolean"?W(this,Qd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qd=new WeakMap,Zl=new WeakMap,Hp=new WeakMap,c6),Zk=new use,Vp,Xl,Gp,l6,dse=(l6=class extends Zg{constructor(){super();Je(this,Vp,!0);Je(this,Xl);Je(this,Gp);Ie(this,Gp,e=>{if(!Ih&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,Xl)||this.setEventListener(W(this,Gp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Xl))==null||e.call(this),Ie(this,Xl,void 0))}setEventListener(e){var n;Ie(this,Gp,e),(n=W(this,Xl))==null||n.call(this),Ie(this,Xl,e(this.setOnline.bind(this)))}setOnline(e){W(this,Vp)!==e&&(Ie(this,Vp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,Vp)}},Vp=new WeakMap,Xl=new WeakMap,Gp=new WeakMap,l6),RE=new dse;function rN(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function hse(t){return Math.min(1e3*2**t,3e4)}function x9(t){return(t??"online")==="online"?RE.isOnline():!0}var T9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function EA(t){return t instanceof T9}function N9(t){let e=!1,n=0,r=!1,s;const i=rN(),o=g=>{var w;r||(h(new T9(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>Zk.isFocused()&&(t.networkMode==="always"||RE.isOnline())&&t.canRun(),u=()=>x9(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var A;if(r)return;const v=t.retry??(Ih?0:3),b=t.retryDelay??hse,E=typeof b=="function"?b(n,y):b,C=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(e||!C){h(y);return}n++,(A=t.onFail)==null||A.call(t,n,y),ase(E).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var fse=t=>setTimeout(t,0);function pse(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=fse;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Er=pse(),Jd,u6,R9=(u6=class{constructor(){Je(this,Jd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eN(this.gcTime)&&Ie(this,Jd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ih?1/0:5*60*1e3))}clearGcTimeout(){W(this,Jd)&&(clearTimeout(W(this,Jd)),Ie(this,Jd,void 0))}},Jd=new WeakMap,u6),Kp,Zd,po,Xd,ys,W0,eh,Qo,kc,d6,gse=(d6=class extends R9{constructor(e){super();Je(this,Qo);Je(this,Kp);Je(this,Zd);Je(this,po);Je(this,Xd);Je(this,ys);Je(this,W0);Je(this,eh);Ie(this,eh,!1),Ie(this,W0,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ie(this,Xd,e.client),Ie(this,po,W(this,Xd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ie(this,Kp,mse(this.options)),this.state=e.state??W(this,Kp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=W(this,ys))==null?void 0:e.promise}setOptions(e){this.options={...W(this,W0),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,po).remove(this)}setData(e,n){const r=nN(this.state.data,e,this.options);return Ct(this,Qo,kc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ct(this,Qo,kc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=W(this,ys))==null?void 0:r.promise;return(s=W(this,ys))==null||s.cancel(e),n?n.then(Ps).catch(Ps):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,Kp))}isActive(){return this.observers.some(e=>yo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Jk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>xu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!S9(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ys))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ys))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),W(this,po).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(W(this,ys)&&(W(this,eh)?W(this,ys).cancel({revert:!0}):W(this,ys).cancelRetry()),this.scheduleGc()),W(this,po).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ct(this,Qo,kc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(W(this,ys))return W(this,ys).continueRetry(),W(this,ys).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ie(this,eh,!0),r.signal)})},i=()=>{const h=A9(this.options,n),p=(()=>{const g={client:W(this,Xd),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return Ie(this,eh,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:W(this,Xd),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),Ie(this,Zd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ct(this,Qo,kc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;EA(h)&&h.silent||Ct(this,Qo,kc).call(this,{type:"error",error:h}),EA(h)||((p=(f=W(this,po).config).onError)==null||p.call(f,h,this),(w=(g=W(this,po).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return Ie(this,ys,N9({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=W(this,po).config).onSuccess)==null||p.call(f,h,this),(w=(g=W(this,po).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{Ct(this,Qo,kc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Ct(this,Qo,kc).call(this,{type:"pause"})},onContinue:()=>{Ct(this,Qo,kc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),W(this,ys).start()}},Kp=new WeakMap,Zd=new WeakMap,po=new WeakMap,Xd=new WeakMap,ys=new WeakMap,W0=new WeakMap,eh=new WeakMap,Qo=new WeakSet,kc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...P9(r.data,this.options),fetchMeta:e.meta??null};case"success":return Ie(this,Zd,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return EA(s)&&s.revert&&W(this,Zd)?{...W(this,Zd),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Er.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),W(this,po).notify({query:this,type:"updated",action:e})})},d6);function P9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:x9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function mse(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ua,h6,yse=(h6=class extends Zg{constructor(e={}){super();Je(this,Ua);this.config=e,Ie(this,Ua,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Yk(s,n);let o=this.get(i);return o||(o=new gse({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){W(this,Ua).has(e.queryHash)||(W(this,Ua).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,Ua).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,Ua).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,Ua).get(e)}getAll(){return[...W(this,Ua).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>r3(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>r3(e,r)):n}notify(e){Er.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ua=new WeakMap,h6),ja,Ts,th,Ba,$l,f6,wse=(f6=class extends R9{constructor(e){super();Je(this,Ba);Je(this,ja);Je(this,Ts);Je(this,th);this.mutationId=e.mutationId,Ie(this,Ts,e.mutationCache),Ie(this,ja,[]),this.state=e.state||k9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){W(this,ja).includes(e)||(W(this,ja).push(e),this.clearGcTimeout(),W(this,Ts).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ie(this,ja,W(this,ja).filter(n=>n!==e)),this.scheduleGc(),W(this,Ts).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){W(this,ja).length||(this.state.status==="pending"?this.scheduleGc():W(this,Ts).remove(this))}continue(){var e;return((e=W(this,th))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,v,b,E,C,A,I,x;const n=()=>{Ct(this,Ba,$l).call(this,{type:"continue"})};Ie(this,th,N9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,O)=>{Ct(this,Ba,$l).call(this,{type:"failed",failureCount:S,error:O})},onPause:()=>{Ct(this,Ba,$l).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,Ts).canRun(this)}));const r=this.state.status==="pending",s=!W(this,th).canStart();try{if(r)n();else{Ct(this,Ba,$l).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=W(this,Ts).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&Ct(this,Ba,$l).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const S=await W(this,th).start();return await((u=(l=W(this,Ts).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=W(this,Ts).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),Ct(this,Ba,$l).call(this,{type:"success",data:S}),S}catch(S){try{throw await((v=(y=W(this,Ts).config).onError)==null?void 0:v.call(y,S,e,this.state.context,this)),await((E=(b=this.options).onError)==null?void 0:E.call(b,S,e,this.state.context)),await((A=(C=W(this,Ts).config).onSettled)==null?void 0:A.call(C,void 0,S,this.state.variables,this.state.context,this)),await((x=(I=this.options).onSettled)==null?void 0:x.call(I,void 0,S,e,this.state.context)),S}finally{Ct(this,Ba,$l).call(this,{type:"error",error:S})}}finally{W(this,Ts).runNext(this)}}},ja=new WeakMap,Ts=new WeakMap,th=new WeakMap,Ba=new WeakSet,$l=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Er.batch(()=>{W(this,ja).forEach(r=>{r.onMutationUpdate(e)}),W(this,Ts).notify({mutation:this,type:"updated",action:e})})},f6);function k9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bc,Jo,z0,p6,vse=(p6=class extends Zg{constructor(e={}){super();Je(this,Bc);Je(this,Jo);Je(this,z0);this.config=e,Ie(this,Bc,new Set),Ie(this,Jo,new Map),Ie(this,z0,0)}build(e,n,r){const s=new wse({mutationCache:this,mutationId:++Yv(this,z0)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){W(this,Bc).add(e);const n=Eb(e);if(typeof n=="string"){const r=W(this,Jo).get(n);r?r.push(e):W(this,Jo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,Bc).delete(e)){const n=Eb(e);if(typeof n=="string"){const r=W(this,Jo).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&W(this,Jo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Eb(e);if(typeof n=="string"){const r=W(this,Jo).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Eb(e);if(typeof n=="string"){const s=(r=W(this,Jo).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Er.batch(()=>{W(this,Bc).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,Bc).clear(),W(this,Jo).clear()})}getAll(){return Array.from(W(this,Bc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>s3(n,r))}findAll(e={}){return this.getAll().filter(n=>s3(e,n))}notify(e){Er.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Er.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ps))))}},Bc=new WeakMap,Jo=new WeakMap,z0=new WeakMap,p6);function Eb(t){var e;return(e=t.options.scope)==null?void 0:e.id}function a3(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=A9(e.options,e.fetchOptions),v=async(b,E,C)=>{if(g)return Promise.reject();if(E==null&&b.pages.length)return Promise.resolve(b);const I=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:E,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),x=await y(I),{maxPages:S}=e.options,O=C?lse:cse;return{pages:O(b.pages,x,S),pageParams:O(b.pageParams,E,S)}};if(s&&i.length){const b=s==="backward",E=b?bse:c3,C={pages:i,pageParams:o},A=E(r,C);a=await v(C,A,b)}else{const b=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:c3(r,a);if(c>0&&E==null)break;a=await v(a,E),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function c3(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function bse(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var er,eu,tu,Yp,Qp,nu,Jp,Zp,g6,_se=(g6=class{constructor(t={}){Je(this,er);Je(this,eu);Je(this,tu);Je(this,Yp);Je(this,Qp);Je(this,nu);Je(this,Jp);Je(this,Zp);Ie(this,er,t.queryCache||new yse),Ie(this,eu,t.mutationCache||new vse),Ie(this,tu,t.defaultOptions||{}),Ie(this,Yp,new Map),Ie(this,Qp,new Map),Ie(this,nu,0)}mount(){Yv(this,nu)._++,W(this,nu)===1&&(Ie(this,Jp,Zk.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,er).onFocus())})),Ie(this,Zp,RE.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,er).onOnline())})))}unmount(){var t,e;Yv(this,nu)._--,W(this,nu)===0&&((t=W(this,Jp))==null||t.call(this),Ie(this,Jp,void 0),(e=W(this,Zp))==null||e.call(this),Ie(this,Zp,void 0))}isFetching(t){return W(this,er).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,eu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,er).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,er).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(xu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,er).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,er).get(r.queryHash),i=s==null?void 0:s.state.data,o=ose(e,i);if(o!==void 0)return W(this,er).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Er.batch(()=>W(this,er).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,er).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=W(this,er);Er.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,er);return Er.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Er.batch(()=>W(this,er).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ps).catch(Ps)}invalidateQueries(t,e={}){return Er.batch(()=>(W(this,er).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Er.batch(()=>W(this,er).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ps)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ps)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,er).build(this,e);return n.isStaleByTime(xu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ps).catch(Ps)}fetchInfiniteQuery(t){return t.behavior=a3(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ps).catch(Ps)}ensureInfiniteQueryData(t){return t.behavior=a3(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return RE.isOnline()?W(this,eu).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,er)}getMutationCache(){return W(this,eu)}getDefaultOptions(){return W(this,tu)}setDefaultOptions(t){Ie(this,tu,t)}setQueryDefaults(t,e){W(this,Yp).set(xh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,Yp).values()],n={};return e.forEach(r=>{Kw(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,Qp).set(xh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,Qp).values()],n={};return e.forEach(r=>{Kw(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,tu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Yk(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Jk&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...W(this,tu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,er).clear(),W(this,eu).clear()}},er=new WeakMap,eu=new WeakMap,tu=new WeakMap,Yp=new WeakMap,Qp=new WeakMap,nu=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,g6),ri,$t,q0,Ns,nh,Xp,ru,su,H0,eg,tg,rh,sh,iu,ng,tn,my,sN,iN,oN,aN,cN,lN,uN,O9,m6,Ese=(m6=class extends Zg{constructor(e,n){super();Je(this,tn);Je(this,ri);Je(this,$t);Je(this,q0);Je(this,Ns);Je(this,nh);Je(this,Xp);Je(this,ru);Je(this,su);Je(this,H0);Je(this,eg);Je(this,tg);Je(this,rh);Je(this,sh);Je(this,iu);Je(this,ng,new Set);this.options=n,Ie(this,ri,e),Ie(this,su,null),Ie(this,ru,rN()),this.options.experimental_prefetchInRender||W(this,ru).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(W(this,$t).addObserver(this),l3(W(this,$t),this.options)?Ct(this,tn,my).call(this):this.updateResult(),Ct(this,tn,aN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dN(W(this,$t),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dN(W(this,$t),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ct(this,tn,cN).call(this),Ct(this,tn,lN).call(this),W(this,$t).removeObserver(this)}setOptions(e){const n=this.options,r=W(this,$t);if(this.options=W(this,ri).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yo(this.options.enabled,W(this,$t))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ct(this,tn,uN).call(this),W(this,$t).setOptions(this.options),n._defaulted&&!NE(this.options,n)&&W(this,ri).getQueryCache().notify({type:"observerOptionsUpdated",query:W(this,$t),observer:this});const s=this.hasListeners();s&&u3(W(this,$t),r,this.options,n)&&Ct(this,tn,my).call(this),this.updateResult(),s&&(W(this,$t)!==r||yo(this.options.enabled,W(this,$t))!==yo(n.enabled,W(this,$t))||xu(this.options.staleTime,W(this,$t))!==xu(n.staleTime,W(this,$t)))&&Ct(this,tn,sN).call(this);const i=Ct(this,tn,iN).call(this);s&&(W(this,$t)!==r||yo(this.options.enabled,W(this,$t))!==yo(n.enabled,W(this,$t))||i!==W(this,iu))&&Ct(this,tn,oN).call(this,i)}getOptimisticResult(e){const n=W(this,ri).getQueryCache().build(W(this,ri),e),r=this.createResult(n,e);return Sse(this,r)&&(Ie(this,Ns,r),Ie(this,Xp,this.options),Ie(this,nh,W(this,$t).state)),r}getCurrentResult(){return W(this,Ns)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){W(this,ng).add(e)}getCurrentQuery(){return W(this,$t)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=W(this,ri).defaultQueryOptions(e),r=W(this,ri).getQueryCache().build(W(this,ri),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ct(this,tn,my).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),W(this,Ns)))}createResult(e,n){var S;const r=W(this,$t),s=this.options,i=W(this,Ns),o=W(this,nh),a=W(this,Xp),l=e!==r?e.state:W(this,q0),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),P=!O&&l3(e,n),j=O&&u3(e,r,n,s);(P||j)&&(d={...d,...P9(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((S=W(this,tg))==null?void 0:S.state.data,W(this,tg)):n.placeholderData,O!==void 0&&(w="success",f=nN(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===W(this,H0))f=W(this,eg);else try{Ie(this,H0,n.select),f=n.select(f),f=nN(i==null?void 0:i.data,f,n),Ie(this,eg,f),Ie(this,su,null)}catch(O){Ie(this,su,O)}W(this,su)&&(p=W(this,su),f=W(this,eg),g=Date.now(),w="error");const v=d.fetchStatus==="fetching",b=w==="pending",E=w==="error",C=b&&v,A=f!==void 0,x={status:w,fetchStatus:d.fetchStatus,isPending:b,isSuccess:w==="success",isError:E,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:E&&!A,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&A,isStale:Xk(e,n),refetch:this.refetch,promise:W(this,ru),isEnabled:yo(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=q=>{x.status==="error"?q.reject(x.error):x.data!==void 0&&q.resolve(x.data)},P=()=>{const q=Ie(this,ru,x.promise=rN());O(q)},j=W(this,ru);switch(j.status){case"pending":e.queryHash===r.queryHash&&O(j);break;case"fulfilled":(x.status==="error"||x.data!==j.value)&&P();break;case"rejected":(x.status!=="error"||x.error!==j.reason)&&P();break}}return x}updateResult(){const e=W(this,Ns),n=this.createResult(W(this,$t),this.options);if(Ie(this,nh,W(this,$t).state),Ie(this,Xp,this.options),W(this,nh).data!==void 0&&Ie(this,tg,W(this,$t)),NE(n,e))return;Ie(this,Ns,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!W(this,ng).size)return!0;const o=new Set(i??W(this,ng));return this.options.throwOnError&&o.add("error"),Object.keys(W(this,Ns)).some(a=>{const c=a;return W(this,Ns)[c]!==e[c]&&o.has(c)})};Ct(this,tn,O9).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ct(this,tn,aN).call(this)}},ri=new WeakMap,$t=new WeakMap,q0=new WeakMap,Ns=new WeakMap,nh=new WeakMap,Xp=new WeakMap,ru=new WeakMap,su=new WeakMap,H0=new WeakMap,eg=new WeakMap,tg=new WeakMap,rh=new WeakMap,sh=new WeakMap,iu=new WeakMap,ng=new WeakMap,tn=new WeakSet,my=function(e){Ct(this,tn,uN).call(this);let n=W(this,$t).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ps)),n},sN=function(){Ct(this,tn,cN).call(this);const e=xu(this.options.staleTime,W(this,$t));if(Ih||W(this,Ns).isStale||!eN(e))return;const r=S9(W(this,Ns).dataUpdatedAt,e)+1;Ie(this,rh,setTimeout(()=>{W(this,Ns).isStale||this.updateResult()},r))},iN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(W(this,$t)):this.options.refetchInterval)??!1},oN=function(e){Ct(this,tn,lN).call(this),Ie(this,iu,e),!(Ih||yo(this.options.enabled,W(this,$t))===!1||!eN(W(this,iu))||W(this,iu)===0)&&Ie(this,sh,setInterval(()=>{(this.options.refetchIntervalInBackground||Zk.isFocused())&&Ct(this,tn,my).call(this)},W(this,iu)))},aN=function(){Ct(this,tn,sN).call(this),Ct(this,tn,oN).call(this,Ct(this,tn,iN).call(this))},cN=function(){W(this,rh)&&(clearTimeout(W(this,rh)),Ie(this,rh,void 0))},lN=function(){W(this,sh)&&(clearInterval(W(this,sh)),Ie(this,sh,void 0))},uN=function(){const e=W(this,ri).getQueryCache().build(W(this,ri),this.options);if(e===W(this,$t))return;const n=W(this,$t);Ie(this,$t,e),Ie(this,q0,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},O9=function(e){Er.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(W(this,Ns))}),W(this,ri).getQueryCache().notify({query:W(this,$t),type:"observerResultsUpdated"})})},m6);function Cse(t,e){return yo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function l3(t,e){return Cse(t,e)||t.state.data!==void 0&&dN(t,e,e.refetchOnMount)}function dN(t,e,n){if(yo(e.enabled,t)!==!1&&xu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Xk(t,e)}return!1}function u3(t,e,n,r){return(t!==e||yo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Xk(t,n)}function Xk(t,e){return yo(e.enabled,t)!==!1&&t.isStaleByTime(xu(e.staleTime,t))}function Sse(t,e){return!NE(t.getCurrentResult(),e)}var ou,au,si,Fc,nl,T_,hN,y6,Ase=(y6=class extends Zg{constructor(n,r){super();Je(this,nl);Je(this,ou);Je(this,au);Je(this,si);Je(this,Fc);Ie(this,ou,n),this.setOptions(r),this.bindMethods(),Ct(this,nl,T_).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=W(this,ou).defaultMutationOptions(n),NE(this.options,r)||W(this,ou).getMutationCache().notify({type:"observerOptionsUpdated",mutation:W(this,si),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&xh(r.mutationKey)!==xh(this.options.mutationKey)?this.reset():((s=W(this,si))==null?void 0:s.state.status)==="pending"&&W(this,si).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=W(this,si))==null||n.removeObserver(this)}onMutationUpdate(n){Ct(this,nl,T_).call(this),Ct(this,nl,hN).call(this,n)}getCurrentResult(){return W(this,au)}reset(){var n;(n=W(this,si))==null||n.removeObserver(this),Ie(this,si,void 0),Ct(this,nl,T_).call(this),Ct(this,nl,hN).call(this)}mutate(n,r){var s;return Ie(this,Fc,r),(s=W(this,si))==null||s.removeObserver(this),Ie(this,si,W(this,ou).getMutationCache().build(W(this,ou),this.options)),W(this,si).addObserver(this),W(this,si).execute(n)}},ou=new WeakMap,au=new WeakMap,si=new WeakMap,Fc=new WeakMap,nl=new WeakSet,T_=function(){var r;const n=((r=W(this,si))==null?void 0:r.state)??k9();Ie(this,au,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},hN=function(n){Er.batch(()=>{var r,s,i,o,a,c,l,u;if(W(this,Fc)&&this.hasListeners()){const d=W(this,au).variables,h=W(this,au).context;(n==null?void 0:n.type)==="success"?((s=(r=W(this,Fc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=W(this,Fc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=W(this,Fc)).onError)==null||c.call(a,n.error,d,h),(u=(l=W(this,Fc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(W(this,au))})})},y6);function Ise(t,e){return Qk(t,e)}function xse(t){return JSON.stringify(t,(e,n)=>Tse(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Tse(t){if(!d3(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!d3(n)||!n.hasOwnProperty("isPrototypeOf"))}function d3(t){return Object.prototype.toString.call(t)==="[object Object]"}function a1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:v,_optimisticResults:b,enabled:E,notifyOnChangeProps:C,placeholderData:A,refetchInterval:I,refetchIntervalInBackground:x,refetchOnMount:S,refetchOnReconnect:O,refetchOnWindowFocus:P,retryOnMount:j,select:q,staleTime:B,suspense:N,throwOnError:T,config:$,connector:R,query:D,...U}=t;return U}function Nse(t){return{mutationFn(e){return I_(t,e)},mutationKey:["connect"]}}function Rse(t){return{mutationFn(e){return YT(t,e)},mutationKey:["disconnect"]}}function Pse(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return are(t,{...i,address:r})},queryKey:kse(e)}}function kse(t={}){return["ensName",a1(t)]}function Ose(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return cre(t,{...o,connector:r})},queryKey:Dse(e)}}function Dse(t={}){const{connector:e,...n}=t;return["walletClient",{...a1(n),connectorUid:e==null?void 0:e.uid}]}function $se(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return l9(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:Mse(e)}}function Mse(t={}){const{abi:e,...n}=t;return["readContract",a1(n)]}function Lse(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return f9(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:Use(e)}}function Use(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",a1(n)]}function jse(t){return{mutationFn(e){return p9(t,e)},mutationKey:["writeContract"]}}var D9=k.createContext(void 0),eO=t=>{const e=k.useContext(D9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Bse=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(D9.Provider,{value:t,children:e})),$9=k.createContext(!1),Fse=()=>k.useContext($9);$9.Provider;function Wse(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var zse=k.createContext(Wse()),qse=()=>k.useContext(zse),Hse=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Vse=t=>{k.useEffect(()=>{t.clearReset()},[t])},Gse=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||I9(n,[t.error,r])),Kse=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Yse=(t,e)=>t.isLoading&&t.isFetching&&!e,Qse=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,h3=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Jse(t,e,n){var d,h,f,p,g;const r=Fse(),s=qse(),i=eO(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Kse(o),Hse(o,s),Vse(s);const a=!i.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(w=>{const y=u?c.subscribe(Er.batchCalls(w)):Ps;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),Qse(o,l))throw h3(o,c,s);if(Gse({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Ih&&Yse(l,r)){const w=a?h3(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Ps).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Zse(t,e){return Jse(t,Ese)}function tO(t,e){const n=eO(),[r]=k.useState(()=>new Ase(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const s=k.useSyncExternalStore(k.useCallback(o=>r.subscribe(Er.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=k.useCallback((o,a)=>{r.mutate(o,a).catch(Ps)},[r]);if(s.error&&I9(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function c1(t){const e=Zse({...t,queryKeyHashFn:xse});return e.queryKey=t.queryKey,e}function l1(t={}){const e=ko(t);return k.useSyncExternalStore(n=>fre(e,{onChange:n}),()=>J$(e),()=>J$(e))}function Xse(t={}){const e=ko(t);return k.useSyncExternalStore(n=>h9(e,{onChange:n}),()=>Z$(e),()=>Z$(e))}function M9(t={}){const{mutation:e}=t,n=ko(t),r=Nse(n),{mutate:s,mutateAsync:i,...o}=tO({...e,...r});return k.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Xse({config:n})}}function eie(t={}){const e=ko(t);return k.useSyncExternalStore(n=>d9(e,{onChange:n}),()=>Yo(e),()=>Yo(e))}function L9(t={}){const{mutation:e}=t,n=ko(t),r=Rse(n),{mutate:s,mutateAsync:i,...o}=tO({...e,...r});return{...o,connectors:eie({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function U9(t={}){const{address:e,query:n={}}=t,r=ko(t),s=l1({config:r}),i=Pse(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return c1({...n,...i,enabled:o})}function tie(t={}){const e=ko(t);return C9.useSyncExternalStoreWithSelector(n=>gre(e,{onChange:n}),()=>QT(e,t),()=>QT(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function f3(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=ko(t),a=l1({config:o}),c=$se(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return c1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??Ise})}function j9(t={}){const{query:e={},...n}=t,r=ko(n),s=eO(),{address:i,connector:o,status:a}=uv({config:r}),c=l1({config:r}),l=t.connector??o,{queryKey:u,...d}=Ose(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=k.useRef(i);return k.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),c1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function CA(t={}){const{hash:e,query:n={}}=t,r=ko(t),s=l1({config:r}),i=Lse(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return c1({...n,...i,enabled:o})}function SA(t={}){const{mutation:e}=t,n=ko(t),r=jse(n),{mutate:s,mutateAsync:i,...o}=tO({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const nie="_verified_lvyh0_1",nO={verified:nie},rie=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:nO.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),sie=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:nO.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),iie=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:nO.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function B9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=B9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Tu(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=B9(t))&&(r&&(r+=" "),r+=e);return r}const oie="_root_98iqw_1",aie="_article_98iqw_21",p3={root:oie,article:aie},rO=({className:t,children:e})=>m.jsx("div",{className:Tu("react-tweet-theme",p3.root,t),children:m.jsx("article",{className:p3.article,children:e})}),F9=t=>m.jsx("img",{...t}),cie="_header_nqq4j_1",lie="_avatar_nqq4j_11",uie="_avatarOverflow_nqq4j_16",die="_avatarSquare_nqq4j_23",hie="_avatarShadow_nqq4j_26",fie="_author_nqq4j_37",pie="_authorLink_nqq4j_44",gie="_authorVerified_nqq4j_53",mie="_authorLinkText_nqq4j_56",yie="_authorMeta_nqq4j_63",wie="_authorFollow_nqq4j_66",vie="_username_nqq4j_69",bie="_follow_nqq4j_74",_ie="_separator_nqq4j_82",Eie="_brand_nqq4j_86",Cie="_twitterIcon_nqq4j_90",Gr={header:cie,avatar:lie,avatarOverflow:uie,avatarSquare:die,avatarShadow:hie,author:fie,authorLink:pie,authorVerified:gie,authorLinkText:mie,authorMeta:yie,authorFollow:wie,username:vie,follow:bie,separator:_ie,brand:Eie,twitterIcon:Cie},Sie="_verifiedOld_lcna5_1",Aie="_verifiedBlue_lcna5_4",Iie="_verifiedGovernment_lcna5_7",AA={verifiedOld:Sie,verifiedBlue:Aie,verifiedGovernment:Iie},W9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(rie,{}),s=AA.verifiedBlue;if(n)switch(t.is_blue_verified||(s=AA.verifiedOld),t.verified_type){case"Government":r=m.jsx(iie,{}),s=AA.verifiedGovernment;break;case"Business":r=m.jsx(sie,{}),s=null;break}return n?m.jsx("div",{className:Tu(e,s),children:r}):null},xie=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:F9,{user:s}=t;return m.jsxs("div",{className:Gr.header,children:[m.jsxs("a",{href:t.url,className:Gr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Tu(Gr.avatarOverflow,s.profile_image_shape==="Square"&&Gr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Gr.avatarOverflow,children:m.jsx("div",{className:Gr.avatarShadow})})]}),m.jsxs("div",{className:Gr.author,children:[m.jsxs("a",{href:t.url,className:Gr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Gr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(W9,{user:s,className:Gr.authorVerified})]}),m.jsxs("div",{className:Gr.authorMeta,children:[m.jsx("a",{href:t.url,className:Gr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Gr.authorFollow,children:[m.jsx("span",{className:Gr.separator,children:""}),m.jsx("a",{href:s.follow_url,className:Gr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Gr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Gr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},Tie="_root_1ec15_1",Nie={root:Tie},Rie=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:Nie.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Pie="_root_eihfa_1",kie={root:Pie},Oie=({href:t,children:e})=>m.jsx("a",{href:t,className:kie.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Die="_root_1xq52_1",$ie={root:Die},Mie=({tweet:t})=>m.jsx("p",{className:$ie.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Oie,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),g3=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,z9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Lie=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,Uie=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,jie=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Bie=t=>`https://x.com/hashtag/${t.text}`,Fie=t=>`https://x.com/search?q=%24${t.text}`,Wie=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,q9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},zie=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},qie=t=>{const e=zie(t);return e.length>1?e[1]:e[0]},fN=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function m3(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Bm(n,"hashtag",t.entities.hashtags),Bm(n,"mention",t.entities.user_mentions),Bm(n,"url",t.entities.urls),Bm(n,"symbol",t.entities.symbols),t.entities.media&&Bm(n,"media",t.entities.media),Hie(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Bie(r),text:s});case"mention":return Object.assign(r,{href:z9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:Fie(r),text:s});default:return Object.assign(r,{text:s})}})}function Bm(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Hie(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Vie=t=>({...t,url:g3(t),user:{...t.user,url:z9(t),follow_url:jie(t)},like_url:Lie(t),reply_url:Uie(t),in_reply_to_url:t.in_reply_to_screen_name?Wie(t):void 0,entities:m3(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:g3(t.quoted_tweet),entities:m3(t.quoted_tweet)}:void 0}),Gie="_root_g9tkv_1",Kie="_rounded_g9tkv_6",Yie="_mediaWrapper_g9tkv_10",Qie="_grid2Columns_g9tkv_17",Jie="_grid3_g9tkv_20",Zie="_grid2x2_g9tkv_23",Xie="_mediaContainer_g9tkv_26",eoe="_mediaLink_g9tkv_34",toe="_skeleton_g9tkv_38",noe="_image_g9tkv_43",Pi={root:Gie,rounded:Kie,mediaWrapper:Yie,grid2Columns:Qie,grid3:Jie,grid2x2:Zie,mediaContainer:Xie,mediaLink:eoe,skeleton:toe,image:noe},roe="_anchor_fp31d_1",soe="_videoButton_fp31d_17",ioe="_videoButtonIcon_fp31d_35",ooe="_watchOnTwitter_fp31d_44",aoe="_viewReplies_fp31d_60",Cf={anchor:roe,videoButton:soe,videoButtonIcon:ioe,watchOnTwitter:ooe,viewReplies:aoe},coe=({tweet:t,media:e})=>{const[n,r]=k.useState(!0),[s,i]=k.useState(!1),[o,a]=k.useState(!1),c=qie(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Pi.image,poster:q9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Cf.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Cf.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Cf.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Cf.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:Tu(Cf.anchor,Cf.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},loe=t=>m.jsx("img",{...t}),y3=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},H9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:loe;return m.jsx("div",{className:Tu(Pi.root,!n&&Pi.rounded),children:m.jsx("div",{className:Tu(Pi.mediaWrapper,o>1&&Pi.grid2Columns,o===3&&Pi.grid3,o>4&&Pi.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(k.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:Tu(Pi.mediaContainer,Pi.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Pi.skeleton,style:y3(l,o)}),m.jsx(c,{src:q9(l,"small"),alt:l.ext_alt_text||"Image",className:Pi.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Pi.mediaContainer,children:[m.jsx("div",{className:Pi.skeleton,style:y3(l,o)}),m.jsx(coe,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},uoe={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},doe=new Intl.DateTimeFormat("en-US",uoe),hoe=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},foe=t=>{const e=hoe(doe.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},poe="_root_i24yn_1",goe={root:poe},moe=({tweet:t})=>{const e=new Date(t.created_at),n=foe(e);return m.jsx("a",{className:goe.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},yoe="_info_19qcj_1",woe="_infoLink_19qcj_10",voe="_infoIcon_19qcj_30",IA={info:yoe,infoLink:woe,infoIcon:voe},boe=({tweet:t})=>m.jsxs("div",{className:IA.info,children:[m.jsx(moe,{tweet:t}),m.jsx("a",{className:IA.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:IA.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),_oe="_actions_n2anf_1",Eoe="_like_n2anf_13",Coe="_reply_n2anf_14",Soe="_copy_n2anf_15",Aoe="_likeIconWrapper_n2anf_27",Ioe="_likeCount_n2anf_30",xoe="_replyIconWrapper_n2anf_35",Toe="_copyIconWrapper_n2anf_36",Noe="_likeIcon_n2anf_27",Roe="_replyIcon_n2anf_35",Poe="_copyIcon_n2anf_36",koe="_replyText_n2anf_56",Ooe="_copyText_n2anf_57",ii={actions:_oe,like:Eoe,reply:Coe,copy:Soe,likeIconWrapper:Aoe,likeCount:Ioe,replyIconWrapper:xoe,copyIconWrapper:Toe,likeIcon:Noe,replyIcon:Roe,copyIcon:Poe,replyText:koe,copyText:Ooe},Doe=({tweet:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return k.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:ii.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:ii.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:ii.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:ii.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:ii.copyText,children:e?"Copied!":"Copy link"})]})},$oe=({tweet:t})=>{const e=fN(t.favorite_count);return m.jsxs("div",{className:ii.actions,children:[m.jsxs("a",{className:ii.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:ii.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:ii.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:ii.likeCount,children:e})]}),m.jsxs("a",{className:ii.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:ii.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:ii.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:ii.replyText,children:"Reply"})]}),m.jsx(Doe,{tweet:t})]})},Moe="_replies_1cutb_1",Loe="_link_1cutb_4",Uoe="_text_1cutb_23",xA={replies:Moe,link:Loe,text:Uoe},joe=({tweet:t})=>m.jsx("div",{className:xA.replies,children:m.jsx("a",{className:xA.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:xA.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${fN(t.conversation_count)} reply`:`Read ${fN(t.conversation_count)} replies`})})}),Boe="_root_q5799_1",Foe="_article_q5799_16",w3={root:Boe,article:Foe},Woe=({tweet:t,children:e})=>m.jsx("div",{className:w3.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:w3.article,children:e})}),zoe="_header_r31i5_1",qoe="_avatar_r31i5_11",Hoe="_avatarSquare_r31i5_17",Voe="_author_r31i5_21",Goe="_authorText_r31i5_26",Koe="_username_r31i5_33",dd={header:zoe,avatar:qoe,avatarSquare:Hoe,author:Voe,authorText:Goe,username:Koe},Yoe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:dd.header,children:[m.jsx("a",{href:t.url,className:dd.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:Tu(dd.avatarOverflow,e.profile_image_shape==="Square"&&dd.avatarSquare),children:m.jsx(F9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:dd.author,children:[m.jsx("div",{className:dd.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(W9,{user:e}),m.jsx("div",{className:dd.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Qoe="_root_175ot_1",Joe={root:Qoe},Zoe=({tweet:t})=>m.jsx("p",{className:Joe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Xoe=({tweet:t})=>{var e;return m.jsxs(Woe,{tweet:t,children:[m.jsx(Yoe,{tweet:t}),m.jsx(Zoe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(H9,{quoted:!0,tweet:t}):null]})},eae=({tweet:t,components:e})=>{var n;const r=k.useMemo(()=>Vie(t),[t]);return m.jsxs(rO,{children:[m.jsx(xie,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Rie,{tweet:r}),m.jsx(Mie,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(H9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Xoe,{tweet:r.quoted_tweet}),m.jsx(boe,{tweet:r}),m.jsx($oe,{tweet:r}),m.jsx(joe,{tweet:r})]})},tae="_root_16yxa_1",nae={root:tae},rae=t=>m.jsx(rO,{children:m.jsxs("div",{className:nae.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),sae="_skeleton_oi7hr_1",iae={skeleton:sae},Cb=({style:t})=>m.jsx("span",{className:iae.skeleton,style:t}),oae="_root_17qqv_1",aae={root:oae},cae=()=>m.jsxs(rO,{className:aae.root,children:[m.jsx(Cb,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(Cb,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(Cb,{style:{height:"2rem"}}),m.jsx(Cb,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),V9=0,G9=1,K9=2,v3=3;var b3=Object.prototype.hasOwnProperty;function pN(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&pN(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(b3.call(t,n)&&++r&&!b3.call(e,n)||!(n in e)||!pN(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Wc=new WeakMap,du=()=>{},Os=du(),gN=Object,jt=t=>t===Os,Ga=t=>typeof t=="function",zu=(t,e)=>({...t,...e}),Y9=t=>Ga(t.then),TA={},Sb={},sO="undefined",dv=typeof window!=sO,mN=typeof document!=sO,lae=dv&&"Deno"in window,uae=()=>dv&&typeof window.requestAnimationFrame!=sO,Q9=(t,e)=>{const n=Wc.get(t);return[()=>!jt(e)&&t.get(e)||TA,r=>{if(!jt(e)){const s=t.get(e);e in Sb||(Sb[e]=s),n[5](e,zu(s,r),s||TA)}},n[6],()=>!jt(e)&&e in Sb?Sb[e]:!jt(e)&&t.get(e)||TA]};let yN=!0;const dae=()=>yN,[wN,vN]=dv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[du,du],hae=()=>{const t=mN&&document.visibilityState;return jt(t)||t!=="hidden"},fae=t=>(mN&&document.addEventListener("visibilitychange",t),wN("focus",t),()=>{mN&&document.removeEventListener("visibilitychange",t),vN("focus",t)}),pae=t=>{const e=()=>{yN=!0,t()},n=()=>{yN=!1};return wN("online",e),wN("offline",n),()=>{vN("online",e),vN("offline",n)}},gae={isOnline:dae,isVisible:hae},mae={initFocus:fae,initReconnect:pae},_3=!zi.useId,Yw=!dv||lae,yae=t=>uae()?window.requestAnimationFrame(t):setTimeout(t,1),NA=Yw?k.useEffect:k.useLayoutEffect,RA=typeof navigator<"u"&&navigator.connection,E3=!Yw&&RA&&(["slow-2g","2g"].includes(RA.effectiveType)||RA.saveData),Ab=new WeakMap,wae=t=>gN.prototype.toString.call(t),PA=(t,e)=>t===`[object ${e}]`;let vae=0;const bN=t=>{const e=typeof t,n=wae(t),r=PA(n,"Date"),s=PA(n,"RegExp"),i=PA(n,"Object");let o,a;if(gN(t)===t&&!r&&!s){if(o=Ab.get(t),o)return o;if(o=++vae+"~",Ab.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=bN(t[a])+",";Ab.set(t,o)}if(i){o="#";const c=gN.keys(t).sort();for(;!jt(a=c.pop());)jt(t[a])||(o+=a+":"+bN(t[a])+",");Ab.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},iO=t=>{if(Ga(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?bN(t):"",[t,e]};let bae=0;const _N=()=>++bae;async function J9(...t){const[e,n,r,s]=t,i=zu({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ga(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=iO(h);if(!f)return;const[p,g]=Q9(e,f),[w,y,v,b]=Wc.get(e),E=()=>{const B=w[f];return(Ga(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete v[f],delete b[f],B&&B[0])?B[0](K9).then(()=>p().data):p().data};if(t.length<3)return E();let C=r,A,I=!1;const x=_N();y[f]=[x,0];const S=!jt(c),O=p(),P=O.data,j=O._c,q=jt(j)?P:j;if(S&&(c=Ga(c)?c(q,P):c,g({data:c,_c:q})),Ga(C))try{C=C(q)}catch(B){A=B,I=!0}if(C&&Y9(C))if(C=await C.catch(B=>{A=B,I=!0}),x!==y[f][0]){if(I)throw A;return C}else I&&S&&l(A)&&(o=!0,g({data:q,_c:Os}));if(o&&!I)if(Ga(o)){const B=o(C,q);g({data:B,error:Os,_c:Os})}else g({data:C,error:Os,_c:Os});if(y[f][1]=_N(),Promise.resolve(E()).then(()=>{g({_c:Os})}),I){if(u)throw A;return}return C}}const C3=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},_ae=(t,e)=>{if(!Wc.has(t)){const n=zu(mae,e),r=Object.create(null),s=J9.bind(Os,t);let i=du;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Wc.has(t)&&(Wc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Yw)){const u=n.initFocus(setTimeout.bind(Os,C3.bind(Os,r,V9))),d=n.initReconnect(setTimeout.bind(Os,C3.bind(Os,r,G9)));i=()=>{u&&u(),d&&d(),Wc.delete(t)}}};return l(),[t,s,l,i]}return[t,Wc.get(t)[4]]},Eae=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!jt(i)&&o>i||setTimeout(r,a,s)},Cae=pN,[Z9,Sae]=_ae(new Map),Aae=zu({onLoadingSlow:du,onSuccess:du,onError:du,onErrorRetry:Eae,onDiscarded:du,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:E3?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:E3?5e3:3e3,compare:Cae,isPaused:()=>!1,cache:Z9,mutate:Sae,fallback:{}},gae),Iae=(t,e)=>{const n=zu(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=zu(s,o))}return n},xae=k.createContext({}),Tae="$inf$",X9=dv&&window.__SWR_DEVTOOLS_USE__,Nae=X9?window.__SWR_DEVTOOLS_USE__:[],Rae=()=>{X9&&(window.__SWR_DEVTOOLS_REACT__=zi)},Pae=t=>Ga(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],kae=()=>zu(Aae,k.useContext(xae)),Oae=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=iO(e),[,,,a]=Wc.get(Z9);if(o.startsWith(Tae))return n(...i);const c=a[o];return jt(c)?n(...i):(delete a[o],c)}),r),Dae=Nae.concat(Oae),$ae=t=>function(...n){const r=kae(),[s,i,o]=Pae(n),a=Iae(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Dae);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Mae=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Rae();const kA=zi.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),OA={dedupe:!0},Lae=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Wc.get(r),[y,v]=iO(t),b=k.useRef(!1),E=k.useRef(!1),C=k.useRef(y),A=k.useRef(e),I=k.useRef(n),x=()=>I.current,S=()=>x().isVisible()&&x().isOnline(),[O,P,j,q]=Q9(r,y),B=k.useRef({}).current,N=jt(o)?jt(n.fallback)?Os:n.fallback[y]:o,T=(de,we)=>{for(const We in B){const rt=We;if(rt==="data"){if(!s(de[rt],we[rt])&&(!jt(de[rt])||!s(ie,we[rt])))return!1}else if(we[rt]!==de[rt])return!1}return!0},$=k.useMemo(()=>{const de=!y||!e?!1:jt(a)?x().isPaused()||i?!1:c!==!1:a,we=Ft=>{const Bn=zu(Ft);return delete Bn._k,de?{isValidating:!0,isLoading:!0,...Bn}:Bn},We=O(),rt=q(),Yt=we(We),ln=We===rt?Yt:we(rt);let nn=Yt;return[()=>{const Ft=we(O());return T(Ft,nn)?(nn.data=Ft.data,nn.isLoading=Ft.isLoading,nn.isValidating=Ft.isValidating,nn.error=Ft.error,nn):(nn=Ft,Ft)},()=>ln]},[r,y]),R=E9.useSyncExternalStore(k.useCallback(de=>j(y,(we,We)=>{T(We,we)||de()}),[r,y]),$[0],$[1]),D=!b.current,U=f[y]&&f[y].length>0,H=R.data,te=jt(H)?N&&Y9(N)?kA(N):N:H,oe=R.error,re=k.useRef(te),ie=h?jt(H)?jt(re.current)?te:re.current:H:te,ye=U&&!jt(oe)?!1:D&&!jt(a)?a:x().isPaused()?!1:i?jt(te)?!1:c:jt(te)||c,Z=!!(y&&e&&D&&ye),Y=jt(R.isValidating)?Z:R.isValidating,ue=jt(R.isLoading)?Z:R.isLoading,ne=k.useCallback(async de=>{const we=A.current;if(!y||!we||E.current||x().isPaused())return!1;let We,rt,Yt=!0;const ln=de||{},nn=!g[y]||!ln.dedupe,Ft=()=>_3?!E.current&&y===C.current&&b.current:y===C.current,Bn={isValidating:!1,isLoading:!1},Jn=()=>{P(Bn)},ds=()=>{const Nr=g[y];Nr&&Nr[1]===rt&&delete g[y]},Ai={isValidating:!0};jt(O().data)&&(Ai.isLoading=!0);try{if(nn&&(P(Ai),n.loadingTimeout&&jt(O().data)&&setTimeout(()=>{Yt&&Ft()&&x().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[we(v),_N()]),[We,rt]=g[y],We=await We,nn&&setTimeout(ds,n.dedupingInterval),!g[y]||g[y][1]!==rt)return nn&&Ft()&&x().onDiscarded(y),!1;Bn.error=Os;const Nr=p[y];if(!jt(Nr)&&(rt<=Nr[0]||rt<=Nr[1]||Nr[1]===0))return Jn(),nn&&Ft()&&x().onDiscarded(y),!1;const Ss=O().data;Bn.data=s(Ss,We)?Ss:We,nn&&Ft()&&x().onSuccess(We,y,n)}catch(Nr){ds();const Ss=x(),{shouldRetryOnError:Vr}=Ss;Ss.isPaused()||(Bn.error=Nr,nn&&Ft()&&(Ss.onError(Nr,y,Ss),(Vr===!0||Ga(Vr)&&Vr(Nr))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||S())&&Ss.onErrorRetry(Nr,y,Ss,id=>{const Lo=f[y];Lo&&Lo[0]&&Lo[0](v3,id)},{retryCount:(ln.retryCount||0)+1,dedupe:!0})))}return Yt=!1,Jn(),!0},[y,r]),ce=k.useCallback((...de)=>J9(r,C.current,...de),[]);if(NA(()=>{A.current=e,I.current=n,jt(H)||(re.current=H)}),NA(()=>{if(!y)return;const de=ne.bind(Os,OA);let we=0;x().revalidateOnFocus&&(we=Date.now()+x().focusThrottleInterval);const rt=Mae(y,f,(Yt,ln={})=>{if(Yt==V9){const nn=Date.now();x().revalidateOnFocus&&nn>we&&S()&&(we=nn+x().focusThrottleInterval,de())}else if(Yt==G9)x().revalidateOnReconnect&&S()&&de();else{if(Yt==K9)return ne();if(Yt==v3)return ne(ln)}});return E.current=!1,C.current=y,b.current=!0,P({_k:v}),ye&&(g[y]||(jt(te)||Yw?de():yae(de))),()=>{E.current=!0,rt()}},[y]),NA(()=>{let de;function we(){const rt=Ga(l)?l(O().data):l;rt&&de!==-1&&(de=setTimeout(We,rt))}function We(){!O().error&&(u||x().isVisible())&&(d||x().isOnline())?ne(OA).then(we):we()}return we(),()=>{de&&(clearTimeout(de),de=-1)}},[l,u,d,y]),k.useDebugValue(ie),i&&jt(te)&&y){if(!_3&&Yw)throw new Error("Fallback data is required when using Suspense in SSR.");A.current=e,I.current=n,E.current=!1;const de=w[y];if(!jt(de)){const we=ce(de);kA(we)}if(jt(oe)){const we=ne(OA);jt(ie)||(we.status="fulfilled",we.value=!0),kA(we)}else throw oe}return{mutate:ce,get data(){return B.data=!0,ie},get error(){return B.error=!0,oe},get isValidating(){return B.isValidating=!0,Y},get isLoading(){return B.isLoading=!0,ue}}},S3=$ae(Lae);class Uae extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const jae=S3.default||S3,Bae="https://react-tweet.vercel.app";async function Fae([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Uae({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Wae=(t,e,n)=>{const{isLoading:r,data:s,error:i}=jae(()=>e||t?[e||t&&`${Bae}/api/tweet/${t}`,n]:null,Fae,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},zae=({id:t,apiUrl:e,fallback:n=m.jsx(cae,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Wae(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||rae;return m.jsx(l,{error:i?i(a):a})}return m.jsx(eae,{tweet:o,components:r})};var u1={exports:{}},eW={},tW={exports:{}},qae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Hae=qae,Vae=Hae;function nW(){}function rW(){}rW.resetWarningCache=nW;var Gae=function(){function t(r,s,i,o,a,c){if(c!==Vae){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:rW,resetWarningCache:nW};return n.PropTypes=n,n};tW.exports=Gae();var sW=tW.exports,EN={exports:{}};function iW(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=iW(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function A3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=iW(t))&&(r&&(r+=" "),r+=e);return r}EN.exports=A3,EN.exports.clsx=A3;var Kae=EN.exports,or={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.dontSetMe=Xae;fc.findInArray=Yae;fc.int=Zae;fc.isFunction=Qae;fc.isNum=Jae;function Yae(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Qae(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Jae(t){return typeof t=="number"&&!isNaN(t)}function Zae(t){return parseInt(t,10)}function Xae(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});Zh.browserPrefixToKey=aW;Zh.browserPrefixToStyle=ece;Zh.default=void 0;Zh.getPrefix=oW;const DA=["Moz","Webkit","O","ms"];function oW(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<DA.length;s++)if(aW(t,DA[s])in e)return DA[s];return""}function aW(t,e){return e?`${e}${tce(t)}`:t}function ece(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function tce(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Zh.default=oW();Object.defineProperty(or,"__esModule",{value:!0});or.addClassName=uW;or.addEvent=rce;or.addUserSelectStyles=pce;or.createCSSTransform=uce;or.createSVGTransform=dce;or.getTouch=hce;or.getTouchIdentifier=fce;or.getTranslation=oO;or.innerHeight=ace;or.innerWidth=cce;or.matchesSelector=lW;or.matchesSelectorAndParentsTo=nce;or.offsetXYFromParent=lce;or.outerHeight=ice;or.outerWidth=oce;or.removeClassName=dW;or.removeEvent=sce;or.scheduleRemoveUserSelectStyles=gce;var Vi=fc,I3=cW(Zh);function cW(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(cW=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let Ib="";function lW(t,e){return Ib||(Ib=(0,Vi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Vi.isFunction)(t[n])})),(0,Vi.isFunction)(t[Ib])?t[Ib](e):!1}function nce(t,e,n){let r=t;do{if(lW(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function rce(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function sce(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function ice(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Vi.int)(n.borderTopWidth),e+=(0,Vi.int)(n.borderBottomWidth),e}function oce(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Vi.int)(n.borderLeftWidth),e+=(0,Vi.int)(n.borderRightWidth),e}function ace(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Vi.int)(n.paddingTop),e-=(0,Vi.int)(n.paddingBottom),e}function cce(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Vi.int)(n.paddingLeft),e-=(0,Vi.int)(n.paddingRight),e}function lce(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function uce(t,e){const n=oO(t,e,"px");return{[(0,I3.browserPrefixToKey)("transform",I3.default)]:n}}function dce(t,e){return oO(t,e,"")}function oO(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function hce(t,e){return t.targetTouches&&(0,Vi.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Vi.findInArray)(t.changedTouches,n=>e===n.identifier)}function fce(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function pce(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&uW(t.body,"react-draggable-transparent-selection")}function gce(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{x3(t)}):x3(t)}function x3(t){if(t)try{if(t.body&&dW(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function uW(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function dW(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.canDragX=wce;pc.canDragY=vce;pc.createCoreData=_ce;pc.createDraggableData=Ece;pc.getBoundPosition=mce;pc.getControlPosition=bce;pc.snapToGrid=yce;var ki=fc,Ep=or;function mce(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Cce(r);const s=aO(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,ki.int)(u.paddingLeft)+(0,ki.int)(l.marginLeft),top:-s.offsetTop+(0,ki.int)(u.paddingTop)+(0,ki.int)(l.marginTop),right:(0,Ep.innerWidth)(c)-(0,Ep.outerWidth)(s)-s.offsetLeft+(0,ki.int)(u.paddingRight)-(0,ki.int)(l.marginRight),bottom:(0,Ep.innerHeight)(c)-(0,Ep.outerHeight)(s)-s.offsetTop+(0,ki.int)(u.paddingBottom)-(0,ki.int)(l.marginBottom)}}return(0,ki.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ki.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ki.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ki.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function yce(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function wce(t){return t.props.axis==="both"||t.props.axis==="x"}function vce(t){return t.props.axis==="both"||t.props.axis==="y"}function bce(t,e,n){const r=typeof e=="number"?(0,Ep.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=aO(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Ep.offsetXYFromParent)(r||t,i,n.props.scale)}function _ce(t,e,n){const r=!(0,ki.isNum)(t.lastX),s=aO(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Ece(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Cce(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function aO(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var d1={},h1={};Object.defineProperty(h1,"__esModule",{value:!0});h1.default=Sce;function Sce(){}Object.defineProperty(d1,"__esModule",{value:!0});d1.default=void 0;var $A=hW(k),As=cO(sW),Ace=cO(uk),ps=or,_l=pc,MA=fc,Fm=cO(h1);function cO(t){return t&&t.__esModule?t:{default:t}}function hW(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(hW=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function xs(t,e,n){return(e=Ice(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ice(t){var e=xce(t,"string");return typeof e=="symbol"?e:e+""}function xce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const qo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let El=qo.mouse,f1=class extends $A.Component{constructor(){super(...arguments),xs(this,"dragging",!1),xs(this,"lastX",NaN),xs(this,"lastY",NaN),xs(this,"touchIdentifier",null),xs(this,"mounted",!1),xs(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ps.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ps.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ps.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,_l.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,_l.createCoreData)(this,o,a);(0,Fm.default)("DraggableCore: handleDragStart: %j",c),(0,Fm.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ps.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ps.addEvent)(r,El.move,this.handleDrag),(0,ps.addEvent)(r,El.stop,this.handleDragStop))}),xs(this,"handleDrag",e=>{const n=(0,_l.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,_l.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,_l.createCoreData)(this,r,s);if((0,Fm.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),xs(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,_l.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,_l.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,_l.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ps.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Fm.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Fm.default)("DraggableCore: Removing handlers"),(0,ps.removeEvent)(a.ownerDocument,El.move,this.handleDrag),(0,ps.removeEvent)(a.ownerDocument,El.stop,this.handleDragStop))}),xs(this,"onMouseDown",e=>(El=qo.mouse,this.handleDragStart(e))),xs(this,"onMouseUp",e=>(El=qo.mouse,this.handleDragStop(e))),xs(this,"onTouchStart",e=>(El=qo.touch,this.handleDragStart(e))),xs(this,"onTouchEnd",e=>(El=qo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ps.addEvent)(e,qo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ps.removeEvent)(n,qo.mouse.move,this.handleDrag),(0,ps.removeEvent)(n,qo.touch.move,this.handleDrag),(0,ps.removeEvent)(n,qo.mouse.stop,this.handleDragStop),(0,ps.removeEvent)(n,qo.touch.stop,this.handleDragStop),(0,ps.removeEvent)(e,qo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ps.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Ace.default.findDOMNode(this)}render(){return $A.cloneElement($A.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};d1.default=f1;xs(f1,"displayName","DraggableCore");xs(f1,"propTypes",{allowAnyClick:As.default.bool,allowMobileScroll:As.default.bool,children:As.default.node.isRequired,disabled:As.default.bool,enableUserSelectHack:As.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:As.default.arrayOf(As.default.number),handle:As.default.string,cancel:As.default.string,nodeRef:As.default.object,onStart:As.default.func,onDrag:As.default.func,onStop:As.default.func,onMouseDown:As.default.func,scale:As.default.number,className:MA.dontSetMe,style:MA.dontSetMe,transform:MA.dontSetMe});xs(f1,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(k),n=u(sW),r=u(uk),s=Kae,i=or,o=pc,a=fc,c=u(d1),l=u(h1);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,v){if(typeof WeakMap=="function")var b=new WeakMap,E=new WeakMap;return(d=function(C,A){if(!A&&C&&C.__esModule)return C;var I,x,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(I=A?E:b){if(I.has(C))return I.get(C);I.set(C,S)}for(const O in C)O!=="default"&&{}.hasOwnProperty.call(C,O)&&((x=(I=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,O))&&(x.get||x.set)?I(S,O,x):S[O]=C[O]);return S})(y,v)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var E in b)({}).hasOwnProperty.call(b,E)&&(y[E]=b[E])}return y},h.apply(null,arguments)}function f(y,v,b){return(v=p(v))in y?Object.defineProperty(y,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[v]=b,y}function p(y){var v=g(y,"string");return typeof v=="symbol"?v:v+""}function g(y,v){if(typeof y!="object"||!y)return y;var b=y[Symbol.toPrimitive];if(b!==void 0){var E=b.call(y,v);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(v,b){let{position:E}=v,{prevPropsPosition:C}=b;return E&&(!C||E.x!==C.x||E.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:C}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(v){super(v),f(this,"onDragStart",(b,E)=>{if((0,l.default)("Draggable: onDragStart: %j",E),this.props.onStart(b,(0,o.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(b,E)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",E);const C=(0,o.createDraggableData)(this,E),A={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x,y:S}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[O,P]=(0,o.getBoundPosition)(this,A.x,A.y);A.x=O,A.y=P,A.slackX=this.state.slackX+(x-A.x),A.slackY=this.state.slackY+(S-A.y),C.x=A.x,C.y=A.y,C.deltaX=A.x-this.state.x,C.deltaY=A.y-this.state.y}if(this.props.onDrag(b,C)===!1)return!1;this.setState(A)}),f(this,"onDragStop",(b,E)=>{if(!this.state.dragging||this.props.onStop(b,(0,o.createDraggableData)(this,E))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",E);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x,y:S}=this.props.position;A.x=x,A.y=S}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var v,b;return((b=(v=this.props)==null?void 0:v.nodeRef)==null?void 0:b.current)??r.default.findDOMNode(this)}render(){const{axis:v,bounds:b,children:E,defaultPosition:C,defaultClassName:A,defaultClassNameDragging:I,defaultClassNameDragged:x,position:S,positionOffset:O,scale:P,...j}=this.props;let q={},B=null;const T=!!!S||this.state.dragging,$=S||C,R={x:(0,o.canDragX)(this)&&T?this.state.x:$.x,y:(0,o.canDragY)(this)&&T?this.state.y:$.y};this.state.isElementSVG?B=(0,i.createSVGTransform)(R,O):q=(0,i.createCSSTransform)(R,O);const D=(0,s.clsx)(E.props.className||"",A,{[I]:this.state.dragging,[x]:this.state.dragged});return e.createElement(c.default,h({},j,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:D,style:{...E.props.style,...q},transform:B}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(eW);const{default:fW,DraggableCore:Tce}=eW;u1.exports=fW;u1.exports.default=fW;u1.exports.DraggableCore=Tce;var Nce=u1.exports;const hv=qh(Nce);function Kn(){return Kn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kn.apply(null,arguments)}function pW(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gW={exports:{}},cn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr=typeof Symbol=="function"&&Symbol.for,lO=Hr?Symbol.for("react.element"):60103,uO=Hr?Symbol.for("react.portal"):60106,p1=Hr?Symbol.for("react.fragment"):60107,g1=Hr?Symbol.for("react.strict_mode"):60108,m1=Hr?Symbol.for("react.profiler"):60114,y1=Hr?Symbol.for("react.provider"):60109,w1=Hr?Symbol.for("react.context"):60110,dO=Hr?Symbol.for("react.async_mode"):60111,v1=Hr?Symbol.for("react.concurrent_mode"):60111,b1=Hr?Symbol.for("react.forward_ref"):60112,_1=Hr?Symbol.for("react.suspense"):60113,Rce=Hr?Symbol.for("react.suspense_list"):60120,E1=Hr?Symbol.for("react.memo"):60115,C1=Hr?Symbol.for("react.lazy"):60116,Pce=Hr?Symbol.for("react.block"):60121,kce=Hr?Symbol.for("react.fundamental"):60117,Oce=Hr?Symbol.for("react.responder"):60118,Dce=Hr?Symbol.for("react.scope"):60119;function eo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case lO:switch(t=t.type,t){case dO:case v1:case p1:case m1:case g1:case _1:return t;default:switch(t=t&&t.$$typeof,t){case w1:case b1:case C1:case E1:case y1:return t;default:return e}}case uO:return e}}}function mW(t){return eo(t)===v1}cn.AsyncMode=dO;cn.ConcurrentMode=v1;cn.ContextConsumer=w1;cn.ContextProvider=y1;cn.Element=lO;cn.ForwardRef=b1;cn.Fragment=p1;cn.Lazy=C1;cn.Memo=E1;cn.Portal=uO;cn.Profiler=m1;cn.StrictMode=g1;cn.Suspense=_1;cn.isAsyncMode=function(t){return mW(t)||eo(t)===dO};cn.isConcurrentMode=mW;cn.isContextConsumer=function(t){return eo(t)===w1};cn.isContextProvider=function(t){return eo(t)===y1};cn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===lO};cn.isForwardRef=function(t){return eo(t)===b1};cn.isFragment=function(t){return eo(t)===p1};cn.isLazy=function(t){return eo(t)===C1};cn.isMemo=function(t){return eo(t)===E1};cn.isPortal=function(t){return eo(t)===uO};cn.isProfiler=function(t){return eo(t)===m1};cn.isStrictMode=function(t){return eo(t)===g1};cn.isSuspense=function(t){return eo(t)===_1};cn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===p1||t===v1||t===m1||t===g1||t===_1||t===Rce||typeof t=="object"&&t!==null&&(t.$$typeof===C1||t.$$typeof===E1||t.$$typeof===y1||t.$$typeof===w1||t.$$typeof===b1||t.$$typeof===kce||t.$$typeof===Oce||t.$$typeof===Dce||t.$$typeof===Pce)};cn.typeOf=eo;gW.exports=cn;var $ce=gW.exports,hO=$ce,Mce={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Lce={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Uce={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yW={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fO={};fO[hO.ForwardRef]=Uce;fO[hO.Memo]=yW;function T3(t){return hO.isMemo(t)?yW:fO[t.$$typeof]||Mce}var jce=Object.defineProperty,Bce=Object.getOwnPropertyNames,N3=Object.getOwnPropertySymbols,Fce=Object.getOwnPropertyDescriptor,Wce=Object.getPrototypeOf,R3=Object.prototype;function wW(t,e,n){if(typeof e!="string"){if(R3){var r=Wce(e);r&&r!==R3&&wW(t,r,n)}var s=Bce(e);N3&&(s=s.concat(N3(e)));for(var i=T3(t),o=T3(e),a=0;a<s.length;++a){var c=s[a];if(!Lce[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Fce(e,c);try{jce(t,c,l)}catch{}}}}return t}var zce=wW;const qce=qh(zce);var vW={};Object.defineProperty(vW,"__esModule",{value:!0});vW.default=Hce;function Hce(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function xb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PE(){return PE=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PE.apply(this,arguments)}function Vce(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Cl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gce(t){var e=function(n){Vce(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,xb(Cl(Cl(i)),"cachedTheme",void 0),xb(Cl(Cl(i)),"lastOuterTheme",void 0),xb(Cl(Cl(i)),"lastTheme",void 0),xb(Cl(Cl(i)),"renderProvider",function(l){var u=i.props.children;return zi.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?PE({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?zi.createElement(t.Consumer,null,this.renderProvider):null},r}(zi.Component);return e}function Kce(t){return function(n){var r=zi.forwardRef(function(s,i){return zi.createElement(t.Consumer,null,function(o){return zi.createElement(n,PE({theme:o,ref:i},s))})});return qce(r,n),r}}function Yce(t){var e=function(){var r=zi.useContext(t);return r};return e}function Qce(t){return{context:t,withTheme:Kce(t),useTheme:Yce(t),ThemeProvider:Gce(t)}}var bW=k.createContext();Qce(bW);var P3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg=(typeof window>"u"?"undefined":P3(window))==="object"&&(typeof document>"u"?"undefined":P3(document))==="object"&&document.nodeType===9;function Qw(t){"@babel/helpers - typeof";return Qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qw(t)}function Jce(t,e){if(Qw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Zce(t){var e=Jce(t,"string");return Qw(e)=="symbol"?e:e+""}function Xce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zce(r.key),r)}}function pO(t,e,n){return e&&Xce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CN(t,e){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CN(t,e)}function _W(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,CN(t,e)}function k3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ele={}.constructor;function SN(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(SN);if(t.constructor!==ele)return t;var e={};for(var n in t)e[n]=SN(t[n]);return e}function S1(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=SN(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var O3=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},ch=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=O3(e[r]," ");else n=O3(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function em(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Wm(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Jw(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=em(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Wm(f+":"+u+ch(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=Wm(g+":"+u+ch(w)+";",o))}for(var y in e){var v=e[y];v!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=Wm(y+":"+u+ch(v)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Wm(""+t+u+"{"+r,o)+Wm("}",o))}var tle=/([[\].#*$><+~=|^:(),"'`\s])/g,D3=typeof CSS<"u"&&CSS.escape,gO=function(t){return D3?D3(t):t.replace(tle,"\\$1")},EW=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),AN=function(t){_W(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(k3(k3(o)),l),o.selectorText="."+gO(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=ch(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Kn({},s,{allowEmpty:!0}):s;return Jw(this.selectorText,this.style,a)},pO(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(EW),nle={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new AN(e,n,r)}},LA={indent:1,children:!0},rle=/@([\w-]+)/,sle=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(rle);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new A1(Kn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=LA);var s=em(r),i=s.linebreak;if(r.indent==null&&(r.indent=LA.indent),r.children==null&&(r.children=LA.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),ile=/@container|@media|@supports\s+/,ole={onCreateRule:function(e,n,r){return ile.test(e)?new sle(e,n,r):null}},UA={indent:1,children:!0},ale=/@keyframes\s+([\w-]+)/,IN=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(ale);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:gO(c(this,a)),this.rules=new A1(Kn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Kn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=UA);var s=em(r),i=s.linebreak;if(r.indent==null&&(r.indent=UA.indent),r.children==null&&(r.children=UA.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),cle=/@keyframes\s+/,lle=/\$([\w-]+)/g,xN=function(e,n){return typeof e=="string"?e.replace(lle,function(r,s){return s in n?n[s]:r}):e},$3=function(e,n,r){var s=e[n],i=xN(s,r);i!==s&&(e[n]=i)},ule={onCreateRule:function(e,n,r){return typeof e=="string"&&cle.test(e)?new IN(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&$3(e,"animation-name",r.keyframes),"animation"in e&&$3(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return xN(e,s.keyframes);case"animation-name":return xN(e,s.keyframes);default:return e}}},dle=function(t){_W(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Kn({},s,{allowEmpty:!0}):s;return Jw(this.key,this.style,a)},e}(EW),hle={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new dle(e,n,r):null}},fle=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=em(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Jw(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return Jw(this.at,this.style,r)},t}(),ple=/@font-face/,gle={onCreateRule:function(e,n,r){return ple.test(e)?new fle(e,n,r):null}},mle=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return Jw(this.key,this.style,r)},t}(),yle={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new mle(e,n,r):null}},wle=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),vle={"@charset":!0,"@import":!0,"@namespace":!0},ble={onCreateRule:function(e,n,r){return e in vle?new wle(e,n,r):null}},M3=[nle,ole,ule,hle,gle,yle,ble],_le={process:!0},L3={force:!0,process:!0},A1=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Kn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+gO(this.classes[p]));var g=S1(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Kn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof AN?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof IN&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof AN?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof IN&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=_le);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,L3)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,L3)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=em(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),CW=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Kn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new A1(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Ele=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Cle=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=pW(s,["attached"]),a=em(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},pO(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),zy=new Cle,TN=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),NN="2f1acc6c3a606b082e5eef5e54414ffb";TN[NN]==null&&(TN[NN]=0);var U3=TN[NN]++,j3=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+U3+a+n:c+i.key+"-"+U3+(a?"-"+a:"")+"-"+n};return r},SW=function(e){var n;return function(){return n||(n=e()),n}},Sle=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},Ale=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=ch(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},Ile=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},xle=function(e,n){return e.selectorText=n,e.selectorText===n},AW=SW(function(){return document.querySelector("head")});function Tle(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Nle(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Rle(t){for(var e=AW(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Ple(t){var e=zy.registry;if(e.length>0){var n=Tle(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=Nle(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Rle(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function kle(t,e){var n=e.insertionPoint,r=Ple(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}AW().appendChild(t)}var Ole=SW(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),B3=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},F3=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Dle=function(){var e=document.createElement("style");return e.textContent=`
`,e},$le=function(){function t(n){this.getPropertyValue=Sle,this.setProperty=Ale,this.removeProperty=Ile,this.setSelector=xle,this.hasInsertedRules=!1,this.cssRules=[],n&&zy.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Dle(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=Ole();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){kle(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=F3(i,s);if(a=B3(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=F3(i,s),d=B3(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof CW&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Mle=0,Lle=function(){function t(n){this.id=Mle++,this.version="10.10.0",this.plugins=new Ele,this.options={id:{minify:!1},createGenerateId:j3,Renderer:Xg?$le:null,plugins:[]},this.generateId=j3({minify:!1});for(var r=0;r<M3.length;r++)this.plugins.use(M3[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Kn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=zy.index===0?0:zy.index+1);var a=new CW(r,Kn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),zy.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Kn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=S1(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),IW=function(e){return new Lle(e)},W3=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},pO(t,[{key:"size",get:function(){return this.length}}]),t}(),mO=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function xW(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=xW(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */IW();var TW=Date.now(),jA="fnValues"+TW,BA="fnStyle"+ ++TW,Ule=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=S1(n,{},s);return i[BA]=r,i},onProcessStyle:function(n,r){if(jA in r||BA in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[jA]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[BA];a&&(o.style=a(n)||{});var c=o[jA];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function jle(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var tp;typeof self<"u"?tp=self:typeof window<"u"?tp=window:typeof global<"u"?tp=global:typeof module<"u"?tp=module:tp=Function("return this")();var z3=jle(tp),q3=function(e){return e&&e[z3]&&e===e[z3]()},Ble=function(e){return{onCreateRule:function(r,s,i){if(!q3(s))return null;var o=s,a=S1(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!q3(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Fle=/;\n/,Wle=function(e){for(var n={},r=e.split(Fle),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},zle=function(e){typeof e.style=="string"&&(e.style=Wle(e.style))};function qle(){return{onProcessRule:zle}}var Nu="@global",RN="@global ",Hle=function(){function t(n,r,s){this.type="global",this.at=Nu,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new A1(Kn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Vle=function(){function t(n,r,s){this.type="global",this.at=Nu,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(RN.length);this.rule=s.jss.createRule(i,r,Kn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Gle=/\s*,\s*/g;function NW(t,e){for(var n=t.split(Gle),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Kle(t,e){var n=t.options,r=t.style,s=r?r[Nu]:null;if(s){for(var i in s)e.addRule(i,s[i],Kn({},n,{selector:NW(i,t.selector)}));delete r[Nu]}}function Yle(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Nu.length)!==Nu)){var i=NW(s.substr(Nu.length),t.selector);e.addRule(i,r[s],Kn({},n,{selector:i})),delete r[s]}}function Qle(){function t(n,r,s){if(!n)return null;if(n===Nu)return new Hle(n,r,s);if(n[0]==="@"&&n.substr(0,RN.length)===RN)return new Vle(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Kle(n,r),Yle(n,r))}return{onCreateRule:t,onProcessRule:e}}var N_=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},FA="extendCurrValue"+Date.now();function Jle(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];qd(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Kn({},t,{extend:l}):t.extend[c];qd(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){qd(t.extend.extend,e,n,r);continue}if(N_(t.extend[d])){d in r||(r[d]={}),qd(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Zle(t,e,n,r){for(var s in t)if(s!=="extend"){if(N_(r[s])&&N_(t[s])){qd(t[s],e,n,r[s]);continue}if(N_(t[s])){r[s]=qd(t[s],e,n);continue}r[s]=t[s]}}function qd(t,e,n,r){return r===void 0&&(r={}),Jle(t,e,n,r),Zle(t,e,n,r),r}function Xle(){function t(n,r,s){return"extend"in n?qd(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[FA])s.prop(i,null);return s[FA]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[FA]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var H3=/\s*,\s*/g,eue=/&/g,tue=/\$([\w-]+)/g;function nue(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(H3),a=s.split(H3),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(eue,u):u+" "+h}return c}function n(s,i,o){if(o)return Kn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Kn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(tue,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Kn({},l,{selector:p})):c.addRule(g,s[d],Kn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function PN(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=PN(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return PN(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function rue(){function t(e,n){return"composes"in e&&(PN(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var sue=/[A-Z]/g,iue=/^ms-/,WA={};function oue(t){return"-"+t.toLowerCase()}function RW(t){if(WA.hasOwnProperty(t))return WA[t];var e=t.replace(sue,oue);return WA[t]=iue.test(e)?"-"+e:e}function kE(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:RW(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(kE):e.fallbacks=kE(t.fallbacks)),e}function aue(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=kE(n[r]);return n}return kE(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=RW(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var se=mO&&CSS?CSS.px:"px",Tb=mO&&CSS?CSS.ms:"ms",Sf=mO&&CSS?CSS.percent:"%",cue={"animation-delay":Tb,"animation-duration":Tb,"background-position":se,"background-position-x":se,"background-position-y":se,"background-size":se,border:se,"border-bottom":se,"border-bottom-left-radius":se,"border-bottom-right-radius":se,"border-bottom-width":se,"border-left":se,"border-left-width":se,"border-radius":se,"border-right":se,"border-right-width":se,"border-top":se,"border-top-left-radius":se,"border-top-right-radius":se,"border-top-width":se,"border-width":se,"border-block":se,"border-block-end":se,"border-block-end-width":se,"border-block-start":se,"border-block-start-width":se,"border-block-width":se,"border-inline":se,"border-inline-end":se,"border-inline-end-width":se,"border-inline-start":se,"border-inline-start-width":se,"border-inline-width":se,"border-start-start-radius":se,"border-start-end-radius":se,"border-end-start-radius":se,"border-end-end-radius":se,margin:se,"margin-bottom":se,"margin-left":se,"margin-right":se,"margin-top":se,"margin-block":se,"margin-block-end":se,"margin-block-start":se,"margin-inline":se,"margin-inline-end":se,"margin-inline-start":se,padding:se,"padding-bottom":se,"padding-left":se,"padding-right":se,"padding-top":se,"padding-block":se,"padding-block-end":se,"padding-block-start":se,"padding-inline":se,"padding-inline-end":se,"padding-inline-start":se,"mask-position-x":se,"mask-position-y":se,"mask-size":se,height:se,width:se,"min-height":se,"max-height":se,"min-width":se,"max-width":se,bottom:se,left:se,top:se,right:se,inset:se,"inset-block":se,"inset-block-end":se,"inset-block-start":se,"inset-inline":se,"inset-inline-end":se,"inset-inline-start":se,"box-shadow":se,"text-shadow":se,"column-gap":se,"column-rule":se,"column-rule-width":se,"column-width":se,"font-size":se,"font-size-delta":se,"letter-spacing":se,"text-decoration-thickness":se,"text-indent":se,"text-stroke":se,"text-stroke-width":se,"word-spacing":se,motion:se,"motion-offset":se,outline:se,"outline-offset":se,"outline-width":se,perspective:se,"perspective-origin-x":Sf,"perspective-origin-y":Sf,"transform-origin":Sf,"transform-origin-x":Sf,"transform-origin-y":Sf,"transform-origin-z":Sf,"transition-delay":Tb,"transition-duration":Tb,"vertical-align":se,"flex-basis":se,"shape-margin":se,size:se,gap:se,grid:se,"grid-gap":se,"row-gap":se,"grid-row-gap":se,"grid-column-gap":se,"grid-template-rows":se,"grid-template-columns":se,"grid-auto-rows":se,"grid-auto-columns":se,"box-shadow-x":se,"box-shadow-y":se,"box-shadow-blur":se,"box-shadow-spread":se,"font-line-height":se,"text-shadow-x":se,"text-shadow-y":se,"text-shadow-blur":se};function PW(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var lue=PW(cue);function qy(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=qy(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=qy(s,e[s],n);else for(var i in e)e[i]=qy(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||lue[t];return o&&!(e===0&&o===se)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function uue(t){t===void 0&&(t={});var e=PW(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=qy(o,s[o],e);return s}function r(s,i){return qy(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var due={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},hue={position:!0,size:!0},Nb={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},zA={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function fue(t,e,n){return t.map(function(r){return OW(r,e,n,!1,!0)})}function kW(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?kW(t[0],e,n,r):typeof t[0]=="object"?fue(t,e,r):[t]}function OW(t,e,n,r,s){if(!(Nb[e]||zA[e]))return[];var i=[];if(zA[e]&&(t=pue(t,n,zA[e],r)),Object.keys(t).length)for(var o in Nb[e]){if(t[o]){Array.isArray(t[o])?i.push(hue[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}Nb[e][o]!=null&&i.push(Nb[e][o])}return!i.length||s?i:[i]}function pue(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=Zw((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function Zw(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=Zw(t.fallbacks[i],e,!0);continue}t[r]=kW(s,r,due,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=Zw(t.fallbacks,e,!0);continue}t[r]=OW(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function gue(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=Zw(e[r],n);return e}return Zw(e,n)}return{onProcessStyle:t}}function kN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function mue(t){if(Array.isArray(t))return kN(t)}function yue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wue(t,e){if(t){if(typeof t=="string")return kN(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kN(t,e):void 0}}function vue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bue(t){return mue(t)||yue(t)||wue(t)||vue()}var yy="",ON="",DW="",$W="",_ue=Xg&&"ontouchstart"in document.documentElement;if(Xg){var qA={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Eue=document.createElement("p"),HA=Eue.style,Cue="Transform";for(var VA in qA)if(VA+Cue in HA){yy=VA,ON=qA[VA];break}yy==="Webkit"&&"msHyphens"in HA&&(yy="ms",ON=qA.ms,$W="edge"),yy==="Webkit"&&"-apple-trailing-word"in HA&&(DW="apple")}var _t={js:yy,css:ON,vendor:DW,browser:$W,isTouch:_ue};function Sue(t){return t[1]==="-"||_t.js==="ms"?t:"@"+_t.css+"keyframes"+t.substr(10)}var Aue={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:_t.js==="ms"?"-webkit-"+e:_t.css+e}},Iue={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:_t.js==="Webkit"?_t.css+"print-"+e:e}},xue=/[-\s]+(.)?/g;function Tue(t,e){return e?e.toUpperCase():""}function yO(t){return t.replace(xue,Tue)}function qu(t){return yO("-"+t)}var Nue={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(_t.js==="Webkit"){var r="mask-image";if(yO(r)in n)return e;if(_t.js+qu(r)in n)return _t.css+e}return e}},Rue={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:_t.vendor==="apple"&&!_t.isTouch?_t.css+e:e}},Pue={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:_t.css+e}},kue={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:_t.css+e}},Oue={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:_t.js==="Webkit"||_t.js==="ms"&&_t.browser!=="edge"?_t.css+e:e}},Due={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:_t.js==="Moz"||_t.js==="ms"||_t.vendor==="apple"?_t.css+e:e}},$ue={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(_t.js==="Webkit"){var r="WebkitColumn"+qu(e);return r in n?_t.css+"column-"+e:!1}if(_t.js==="Moz"){var s="page"+qu(e);return s in n?"page-"+e:!1}return!1}},Mue={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(_t.js==="Moz")return e;var r=e.replace("-inline","");return _t.js+qu(r)in n?_t.css+r:!1}},Lue={supportedProperty:function(e,n){return yO(e)in n?e:!1}},Uue={supportedProperty:function(e,n){var r=qu(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:_t.js+r in n?_t.css+e:_t.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},jue={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:_t.js==="ms"?""+_t.css+e:e}},Bue={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:_t.js==="ms"?_t.css+"scroll-chaining":e}},Fue={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Wue={supportedProperty:function(e,n){var r=Fue[e];return r&&_t.js+qu(r)in n?_t.css+r:!1}},MW={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},zue=Object.keys(MW),que=function(e){return _t.css+e},Hue={supportedProperty:function(e,n,r){var s=r.multiple;if(zue.indexOf(e)>-1){var i=MW[e];if(!Array.isArray(i))return _t.js+qu(i)in n?_t.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(_t.js+qu(i[0])in n))return!1;return i.map(que)}return!1}},LW=[Aue,Iue,Nue,Rue,Pue,kue,Oue,Due,$ue,Mue,Lue,Uue,jue,Bue,Wue,Hue],V3=LW.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Vue=LW.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,bue(e.noPrefill)),t},[]),wy,Rd={};if(Xg){wy=document.createElement("p");var GA=window.getComputedStyle(document.documentElement,"");for(var KA in GA)isNaN(KA)||(Rd[GA[KA]]=GA[KA]);Vue.forEach(function(t){return delete Rd[t]})}function DN(t,e){if(e===void 0&&(e={}),!wy)return t;if(Rd[t]!=null)return Rd[t];(t==="transition"||t==="transform")&&(e[t]=t in wy.style);for(var n=0;n<V3.length&&(Rd[t]=V3[n](t,wy.style,e),!Rd[t]);n++);try{wy.style[t]=""}catch{return!1}return Rd[t]}var Af={},Gue={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Kue=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ml;function Yue(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?DN(e):", "+DN(n);return r||e||n}Xg&&(Ml=document.createElement("p"));function G3(t,e){var n=e;if(!Ml||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Af[r]!=null)return Af[r];try{Ml.style[t]=n}catch{return Af[r]=!1,!1}if(Gue[t])n=n.replace(Kue,Yue);else if(Ml.style[t]===""&&(n=_t.css+n,n==="-ms-flex"&&(Ml.style[t]="-ms-flexbox"),Ml.style[t]=n,Ml.style[t]===""))return Af[r]=!1,!1;return Ml.style[t]="",Af[r]=n,Af[r]}function Que(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Sue(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=DN(i);c&&c!==i&&(a=!0);var l=!1,u=G3(c,ch(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return G3(i,ch(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Jue(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Zue=function(e){return e===void 0&&(e={}),{plugins:[Ule(),Ble(e.observable),qle(),Qle(),Xle(),nue(),rue(),aue(),uue(e.defaultUnit),gue(),Que(),Jue()]}},Xue=Number.MIN_SAFE_INTEGER||-1e9,ede=function(){return Xue++},tde=k.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Xg}),K3=new Map,wO=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new W3),r[n];var s=K3.get(n);return s||(s=new W3,K3.set(n,s)),s},Y3=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=wO(r,s);o.manage(i),r.registry&&r.registry.add(n)}},nde=function(e){if(e.sheet){var n=wO(e.context,e.index);n.unmanage(e.theme)}},rde=IW(Zue()),UW=new WeakMap,jW=function(e){return UW.get(e)},sde=function(e,n){UW.set(e,n)},ide=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function ode(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Kn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var ade=function(e){if(!e.context.disableStylesGeneration){var n=wO(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||rde,i=ide(e),o=xW(i),a=s.createStyleSheet(i,ode(e,o!==null));return sde(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},cde=function(e,n){for(var r in n)e.deleteRule(n[r])},lde=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},ude=function(e,n){var r=jW(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},dde=function(e,n){if(!n)return e.classes;var r=jW(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function Q3(t){return t?k.useEffect:zi.useInsertionEffect||k.useLayoutEffect}var YA={},ba=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?ede():s,o=r.theming,a=r.name,c=pW(r,["index","theming","name"]),l=o&&o.context||bW,u=function(f){return typeof e=="function"&&(f||k.useContext(l))||YA},d={};return function(f){var p=k.useRef(!0),g=k.useContext(tde),w=u(f&&f.theme),y=k.useMemo(function(){var C=ade({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&Y3({index:i,context:g,sheet:C,theme:w}),[C,C?ude(C,f):null]},[g,w]),v=y[0],b=y[1];Q3(g.isSSR)(function(){v&&b&&!p.current&&lde(f,v,b)},[f]),Q3(g.isSSR)(function(){return v&&Y3({index:i,context:g,sheet:v,theme:w}),function(){v&&(nde({index:i,context:g,sheet:v,theme:w}),b&&cde(v,b))}},[v]);var E=k.useMemo(function(){return v&&b?dde(v,b):d},[v,b]);return k.useDebugValue(E),k.useDebugValue(w===YA?"No theme":w),k.useEffect(function(){p.current=!1}),E}};const hde=ba({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function QA({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=hde(),d=k.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(hv,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const fde=ba({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function uo({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=fde({isOpen:e}),u=k.useRef(null),d=()=>{r&&r(t)};return m.jsx(hv,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const JA=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],pde=80,gde=80,mde=10,yde=10,wde=10,vde=10,bde=({onIconClick:t})=>{const e=JA.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:wde+d*(pde+mde),y:vde+u*(gde+yde)},u++,u>=4&&(u=0,d++)}),l},[r,s]=k.useState(n()),[i,o]=k.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(QA,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(uo,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:JA.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(QA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(uo,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:JA.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(QA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},_de=ba({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Ede=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(new Date),c=_de({isOpen:s});k.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function BW(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function vO(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function FW(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function bO(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function WW(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function zW(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function Cde(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const Sde=ba({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),Ade=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Sde({isOpen:t}),i=k.useRef(null),[o,a]=k.useState([]),[c,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState({}),[p,g]=k.useState(null),{data:w}=j9();k.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const A=await BW(r);a(A);const I={};A.forEach(x=>{I[x.id]=0}),f(I)}catch(A){g(A.message)}finally{l(!1)}},v=(A,I)=>{f(x=>({...x,[A]:Math.max(0,I)}))},b=async()=>{const A=Object.entries(h).filter(([,I])=>I>0).map(([I,x])=>({id:I,quantity:x}));if(A.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const I=await FW(r,A);if(console.log("Mint API result:",I),I.success&&I.mintTransaction){console.log("Got mint transaction:",I.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const x=await w.sendTransaction({to:I.mintTransaction.to,value:BigInt(I.mintTransaction.value),data:I.mintTransaction.data});console.log("Transaction sent successfully:",x),alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){console.error("Transaction sending failed:",x),g("Transaction failed: "+x.message)}}else throw new Error(I.message||"Could not retrieve minting transaction.")}catch(I){console.error("Minting failed:",I),g("Minting failed: "+I.message)}finally{d(!1)}},E=(A,I)=>`${parseFloat(A)} ${I}`,C=()=>{n&&n()};return t?m.jsx(hv,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(A=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",E(A.token_price,A.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:A.wallet_limit===4294967295?999:A.wallet_limit,value:h[A.id]||0,onChange:I=>v(A.id,parseInt(I.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},A.id))]}),m.jsx("button",{onClick:()=>void b(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},Ide=ba({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),xde=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},Tde=({nft:t,onClose:e})=>{const n=Ide(),r=k.useRef(null),s=xde(t.attributes);return m.jsx(hv,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},Nde=Symbol(),J3=Object.getPrototypeOf,$N=new WeakMap,Rde=t=>t&&($N.has(t)?$N.get(t):J3(t)===Object.prototype||J3(t)===Array.prototype),Pde=t=>Rde(t)&&t[Nde]||null,Z3=(t,e=!0)=>{$N.set(t,e)},OE={},ZA=t=>typeof t=="object"&&t!==null,Wl=new WeakMap,vy=new WeakSet,kde=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>ZA(l)&&!vy.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Z3(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(vy.has(g))Z3(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Wl.has(g)){const[v,b]=Wl.get(g);y.value=i(v,b(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!ZA(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(S,O)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([O])=>{const P=O[1](S);P>d&&(d=P)})),d),w=S=>(O,P)=>{const j=[...O];j[1]=[S,...j[1]],f(j,P)},y=new Map,v=(S,O)=>{if((OE?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=O[3](w(S));y.set(S,[O,P])}else y.set(S,[O])},b=S=>{var O;const P=y.get(S);P&&(y.delete(S),(O=P[1])==null||O.call(P))},E=S=>(h.add(S),h.size===1&&y.forEach(([P,j],q)=>{if((OE?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const B=P[3](w(q));y.set(q,[P,B])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,j],q)=>{j&&(j(),y.set(q,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),I=e(C,{deleteProperty(S,O){const P=Reflect.get(S,O);b(O);const j=Reflect.deleteProperty(S,O);return j&&f(["delete",[O],P]),j},set(S,O,P,j){const q=Reflect.has(S,O),B=Reflect.get(S,O,j);if(q&&(t(B,P)||o.has(P)&&t(B,o.get(P))))return!0;b(O),ZA(P)&&(P=Pde(P)||P);let N=P;if(P instanceof Promise)P.then(T=>{P.status="fulfilled",P.value=T,f(["resolve",[O],T])}).catch(T=>{P.status="rejected",P.reason=T,f(["reject",[O],T])});else{!Wl.has(P)&&n(P)&&(N=c(P));const T=!vy.has(N)&&Wl.get(N);T&&v(O,T)}return Reflect.set(S,O,N,j),f(["set",[O],P,B]),!0}});o.set(l,I);const x=[C,g,i,E];return Wl.set(I,x),Reflect.ownKeys(l).forEach(S=>{const O=Object.getOwnPropertyDescriptor(l,S);"value"in O&&(I[S]=l[S],delete O.value,delete O.writable),Object.defineProperty(C,S,O)}),I})=>[c,Wl,vy,t,e,n,r,s,i,o,a],[Ode]=kde();function Un(t={}){return Ode(t)}function _s(t,e,n){const r=Wl.get(t);(OE?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Xw(t,e){const n=Wl.get(t);(OE?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Th(t){return vy.add(t),t}function Cs(t,e,n,r){let s=t[e];return _s(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Dde(t){const e=Un({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var X3={};const Pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof X3<"u"?X3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},qW={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Pe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var $de=20,Mde=1,Nh=1e6,e5=1e6,Lde=-7,Ude=21,jde=!1,fv="[big.js] ",Xh=fv+"Invalid ",I1=Xh+"decimal places",Bde=Xh+"rounding mode",HW=fv+"Division by zero",an={},ec=void 0,Fde=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function VW(){function t(e){var n=this;if(!(n instanceof t))return e===ec?VW():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Xh+"value");e=e===0&&1/e<0?"-0":String(e)}Wde(n,e)}n.constructor=t}return t.prototype=an,t.DP=$de,t.RM=Mde,t.NE=Lde,t.PE=Ude,t.strict=jde,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Wde(t,e){var n,r,s;if(!Fde.test(e))throw Error(Xh+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function ef(t,e,n,r){var s=t.c;if(n===ec&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Bde);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==ec))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==ec||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function tf(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}an.abs=function(){var t=new this.constructor(this);return t.s=1,t};an.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};an.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Nh)throw Error(I1);if(!s[0])throw Error(HW);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,v=y.c=[],b=0,E=o+(y.e=e.e-t.e)+1;for(y.s=i,i=E<0?0:E,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}v[b++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==ec)&&i--);return!v[0]&&b!=1&&(v.shift(),y.e--,E--),b>E&&ef(y,E,n.RM,g[0]!==ec),y};an.eq=function(t){return this.cmp(t)===0};an.gt=function(t){return this.cmp(t)>0};an.gte=function(t){return this.cmp(t)>-1};an.lt=function(t){return this.cmp(t)<0};an.lte=function(t){return this.cmp(t)<1};an.minus=an.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};an.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(HW);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};an.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};an.plus=an.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};an.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-e5||t>e5)throw Error(Xh+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};an.prec=function(t,e){if(t!==~~t||t<1||t>Nh)throw Error(Xh+"precision");return ef(new this.constructor(this),t,e)};an.round=function(t,e){if(t===ec)t=0;else if(t!==~~t||t<-Nh||t>Nh)throw Error(I1);return ef(new this.constructor(this),t+this.e+1,e)};an.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(fv+"No square root");i=Math.sqrt(+tf(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ef(t,(s.DP-=4)+t.e+1,s.RM)};an.times=an.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};an.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==ec){if(t!==~~t||t<0||t>Nh)throw Error(I1);for(n=ef(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return tf(n,!0,!!r)};an.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==ec){if(t!==~~t||t<0||t>Nh)throw Error(I1);for(n=ef(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return tf(n,!1,!!r)};an[Symbol.for("nodejs.util.inspect.custom")]=an.toJSON=an.toString=function(){var t=this,e=t.constructor;return tf(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};an.toNumber=function(){var t=+tf(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(fv+"Imprecise conversion");return t};an.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==ec){if(t!==~~t||t<1||t>Nh)throw Error(Xh+"precision");for(n=ef(new r(n),t,e);n.c.length<t;)n.c.push(0)}return tf(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};an.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(fv+"valueOf disallowed");return tf(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ka=VW();const zde={bigNumber(t){return t?new Ka(t):new Ka(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ka(0);const n=new Ka(t),r=new Ka(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},qde=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Hde=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Vde=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Gde={getERC20Abi:t=>Pe.USDT_CONTRACT_ADDRESSES.includes(t)?Vde:qde,getSwapAbi:()=>Hde},Sl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},yt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function XA(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ft={setItem(t,e){by()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(by())return localStorage.getItem(t)||void 0},removeItem(t){by()&&localStorage.removeItem(t)},clear(){by()&&localStorage.clear()}};function by(){return typeof window<"u"&&typeof localStorage<"u"}function Gc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var t5={};const eI=(typeof process<"u"&&typeof t5<"u"?t5.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",GW=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Kde="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",gn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:eI,SECURE_SITE_DASHBOARD:`${eI}/dashboard`,SECURE_SITE_FAVICON:`${eI}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=je.getActiveNamespace(),e=je.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ft.setItem(yt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ft.getItem(yt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ft.removeItem(yt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ft.setItem(yt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ft.setItem(yt.ACTIVE_CAIP_NETWORK_ID,t),je.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ft.removeItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=XA(t);ft.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=je.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ft.setItem(yt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ft.getItem(yt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=XA(t);ft.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ft.getItem(yt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=XA(t);return ft.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ft.setItem(yt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ft.getItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ft.removeItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ft.getItem(yt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ft.setItem(yt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ft.getItem(yt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ft.getItem(yt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ft.setItem(yt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=je.getConnectedNamespaces();e.includes(t)||(e.push(t),je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=je.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ft.getItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ft.setItem(yt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ft.removeItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ft.getItem(yt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=je.getBalanceCache();ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=je.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=je.getBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ft.getItem(yt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=je.getBalanceCache();ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=je.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=je.getNativeBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ft.getItem(yt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=je.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;je.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=je.getEnsCache();e[t.address]=t,ft.setItem(yt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=je.getEnsCache();ft.setItem(yt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ft.getItem(yt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=je.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;je.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=je.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ft.setItem(yt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=je.getIdentityCache();ft.setItem(yt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ft.removeItem(yt.PORTFOLIO_CACHE),ft.removeItem(yt.NATIVE_BALANCE_CACHE),ft.removeItem(yt.ENS_CACHE),ft.removeItem(yt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ft.setItem(yt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ft.getItem(yt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...je.getConnections(),[e]:t};ft.setItem(yt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ft.getItem(yt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},Ye={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ye.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=gn.TEN_SEC_MS:!0},isAllowedRetry(t,e=gn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ye.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+gn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ye.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ye.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?je.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ye.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Pe.W3M_API_URL},getBlockchainApiUrl(){return Pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Pe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?gn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Pe.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function zm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let pv=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await zm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await zm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await zm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await zm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await zm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Yde={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?gn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ye.isTelegram()){if(Ye.isIos())return t.filter(e=>e!=="google");if(Ye.isMac())return t.filter(e=>e!=="x");if(Ye.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},tt=Un({features:gn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:gn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pe={state:tt,subscribeKey(t,e){return Cs(tt,t,e)},setOptions(t){Object.assign(tt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...tt.remoteFeatures,...t};tt.remoteFeatures=e,(n=tt.remoteFeatures)!=null&&n.socials&&(tt.remoteFeatures.socials=Yde.filterSocialsByPlatform(tt.remoteFeatures.socials))},setFeatures(t){if(!t)return;tt.features||(tt.features=gn.DEFAULT_FEATURES);const e={...tt.features,...t};tt.features=e},setProjectId(t){tt.projectId=t},setCustomRpcUrls(t){tt.customRpcUrls=t},setAllWallets(t){tt.allWallets=t},setIncludeWalletIds(t){tt.includeWalletIds=t},setExcludeWalletIds(t){tt.excludeWalletIds=t},setFeaturedWalletIds(t){tt.featuredWalletIds=t},setTokens(t){tt.tokens=t},setTermsConditionsUrl(t){tt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){tt.privacyPolicyUrl=t},setCustomWallets(t){tt.customWallets=t},setIsSiweEnabled(t){tt.isSiweEnabled=t},setIsUniversalProvider(t){tt.isUniversalProvider=t},setSdkVersion(t){tt.sdkVersion=t},setMetadata(t){tt.metadata=t},setDisableAppend(t){tt.disableAppend=t},setEIP6963Enabled(t){tt.enableEIP6963=t},setDebug(t){tt.debug=t},setEnableWalletConnect(t){tt.enableWalletConnect=t},setEnableWalletGuide(t){tt.enableWalletGuide=t},setEnableAuthLogger(t){tt.enableAuthLogger=t},setEnableWallets(t){tt.enableWallets=t},setPreferUniversalLinks(t){tt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){tt.hasMultipleAddresses=t},setSIWX(t){tt.siwx=t},setConnectMethodsOrder(t){tt.features={...tt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){tt.features={...tt.features,walletFeaturesOrder:t}},setSocialsOrder(t){tt.remoteFeatures={...tt.remoteFeatures,socials:t}},setCollapseWallets(t){tt.features={...tt.features,collapseWallets:t}},setEnableEmbedded(t){tt.enableEmbedded=t},setAllowUnsupportedChain(t){tt.allowUnsupportedChain=t},setManualWCControl(t){tt.manualWCControl=t},setEnableNetworkSwitch(t){tt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(tt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){tt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return tt.universalProviderConfigOverride},getSnapshot(){return Xw(tt)}},Qde=Object.freeze({enabled:!0,events:[]}),Jde=new pv({baseUrl:Ye.getAnalyticsUrl(),clientId:null}),Zde=5,Xde=60*1e3,Al=Un({...Qde}),ehe={state:Al,subscribeKey(t,e){return Cs(Al,t,e)},async sendError(t,e){if(!Al.enabled)return;const n=Date.now();if(Al.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Xde}).length>=Zde)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Al.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=pe.state;await Jde.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ye.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Al.enabled=!0},disable(){Al.enabled=!1},clearEvents(){Al.events=[]}};let MN=class LN extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,LN.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,LN):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function n5(t,e){const n=t instanceof MN?t:new MN(t instanceof Error?t.message:String(t),e,t);throw ehe.sendError(n,n.category),n}function to(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return n5(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return n5(a,e)}},n[r]=i}else n[r]=s}),n}const Fa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},the={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Fa.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Fa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Fa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Fa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Pe.CHAIN.SOLANA&&t===Fa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Fa.COINBASE.url}/dapp?cb_url=${r}`)}},Ii=Un({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),nhe={state:Ii,subscribeNetworkImages(t){return _s(Ii.networkImages,()=>t(Ii.networkImages))},subscribeKey(t,e){return Cs(Ii,t,e)},subscribe(t){return _s(Ii,()=>t(Ii))},setWalletImage(t,e){Ii.walletImages[t]=e},setNetworkImage(t,e){Ii.networkImages[t]=e},setChainImage(t,e){Ii.chainImages[t]=e},setConnectorImage(t,e){Ii.connectorImages={...Ii.connectorImages,[t]:e}},setTokenImage(t,e){Ii.tokenImages[t]=e},setCurrencyImage(t,e){Ii.currencyImages[t]=e}},ta=to(nhe),rhe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},tI=Un({networkImagePromises:{}}),KW={async fetchWalletImage(t){if(t)return await Qe._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(tI.networkImagePromises[t]||(tI.networkImagePromises[t]=Qe._fetchNetworkImage(t)),await tI.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return ta.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return ta.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return ta.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return ta.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return ta.state.connectorImages[t.imageId]},getChainImage(t){return ta.state.networkImages[rhe[t]]}},Il=Un({message:"",variant:"info",open:!1}),she={state:Il,subscribeKey(t,e){return Cs(Il,t,e)},open(t,e){const{debug:n}=pe.state,{shortMessage:r,longMessage:s}=t;n&&(Il.message=r,Il.variant=e,Il.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Il.open=!1,Il.message="",Il.variant="info"}},Ya=to(she),ihe=Ye.getAnalyticsUrl(),ohe=new pv({baseUrl:ihe,clientId:null}),ahe=["MODAL_CREATED"],_c=Un({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),zn={state:_c,subscribe(t){return _s(_c,()=>t(_c))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ue.state.address;if(ahe.includes(t.data.event)||typeof window>"u")return;await ohe.post({path:"/e",params:zn.getSdkProperties(),body:{eventId:Ye.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),_c.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Pe.HTTP_STATUS_CODES.FORBIDDEN&&!_c.reportedErrors.FORBIDDEN&&(Ya.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${by()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),_c.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;_c.timestamp=Date.now(),_c.data=t,(e=pe.state.features)!=null&&e.analytics&&zn._sendAnalyticsEvent(_c)}},che=Ye.getApiUrl(),Hs=new pv({baseUrl:che,clientId:null}),lhe=40,r5=4,uhe=20,wt=Un({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Qe={state:wt,subscribeKey(t,e){return Cs(wt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return pe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Hs.baseUrl}/getWalletImage/${t}`,n=await Hs.getBlob({path:e,params:Qe._getSdkProperties()});ta.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Hs.baseUrl}/public/getAssetImage/${t}`,n=await Hs.getBlob({path:e,params:Qe._getSdkProperties()});ta.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Hs.baseUrl}/public/getAssetImage/${t}`,n=await Hs.getBlob({path:e,params:Qe._getSdkProperties()});ta.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Hs.baseUrl}/public/getCurrencyImage/${t}`,n=await Hs.getBlob({path:e,params:Qe._getSdkProperties()});ta.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Hs.baseUrl}/public/getTokenImage/${t}`,n=await Hs.getBlob({path:e,params:Qe._getSdkProperties()});ta.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ye.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Fa.COINBASE.id?!0:L.state.activeChain==="solana"&&(n.id===Fa.SOLFLARE.id||n.id===Fa.PHANTOM.id)):t},async fetchProjectConfig(){return(await Hs.get({path:"/appkit/v1/config",params:Qe._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Hs.get({path:"/projects/v1/origins",params:Qe._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=L.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!KW.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Qe._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Re.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Qe._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Qe._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Qe._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Qe._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Fa).map(o=>o.id));const r=await Hs.get({path:"/getWallets",params:{...Qe._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Qe._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=pe.state;if(t!=null&&t.length){const e={...Qe._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??r5,include:t},{data:n}=await Qe.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Qe._fetchWalletImage(i))),wt.featured=r,wt.allFeatured=r}},async fetchRecommendedWallets(){try{wt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=pe.state,r=[...e??[],...n??[]].filter(Boolean),s=L.getRequestedCaipNetworkIds().join(","),i={page:1,entries:r5,include:t,exclude:r,chains:s},{data:o,count:a}=await Qe.fetchWallets(i),c=je.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Qe._fetchWalletImage(d))),wt.recommended=o,wt.allRecommended=o,wt.count=a??0}catch{}finally{wt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=pe.state,s=L.getRequestedCaipNetworkIds().join(","),i=[...wt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:lhe,include:e,exclude:i,chains:s},{data:a,count:c}=await Qe.fetchWallets(o),l=a.slice(0,uhe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Qe._fetchWalletImage(u))),wt.wallets=Ye.uniqueBy([...wt.wallets,...Qe._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),wt.count=c>wt.count?c:wt.count,wt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Qe.fetchWallets(e);n&&n.forEach(r=>{wt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=pe.state,s=L.getRequestedCaipNetworkIds().join(",");wt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Qe.fetchWallets(i);zn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Qe._fetchWalletImage(c)),Ye.wait(300)]),wt.search=Qe._filterOutExtensions(o)},initPromise(t,e){const n=wt.promises[t];return n||(wt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Qe.initPromise("connectorImages",Qe.fetchConnectorImages),e&&Qe.initPromise("featuredWallets",Qe.fetchFeaturedWallets),n&&Qe.initPromise("recommendedWallets",Qe.fetchRecommendedWallets),r&&Qe.initPromise("networkImages",Qe.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=pe.state.features)!=null&&t.analytics&&Qe.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Hs.get({path:"/getAnalyticsConfig",params:Qe._getSdkProperties()});pe.setFeatures({analytics:t})}catch{pe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){wt.filteredWallets=[]},setFilterByNamespace(t){if(!t){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},dn=Un({view:"Connect",history:["Connect"],transactionStack:[]}),dhe={state:dn,subscribeKey(t,e){return Cs(dn,t,e)},pushTransactionStack(t){dn.transactionStack.push(t)},popTransactionStack(t){const e=dn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),At.goBack();break;case"cancel":s==null||s(),At.goBack();break}},push(t,e){t!==dn.view&&(dn.view=t,dn.history.push(t),dn.data=e)},reset(t,e){dn.view=t,dn.history=[t],dn.data=e},replace(t,e){dn.history.at(-1)===t||(dn.view=t,dn.history[dn.history.length-1]=t,dn.data=e)},goBack(){var r;const t=L.state.activeCaipAddress,e=At.state.view==="ConnectingFarcaster",n=!t&&e;if(dn.history.length>1){dn.history.pop();const[s]=dn.history.slice(-1);s&&(t&&s==="Connect"?dn.view="Account":dn.view=s)}else Fr.close();(r=dn.data)!=null&&r.wallet&&(dn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ue.setFarcasterUrl(void 0,L.state.activeChain);const a=Re.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Xw(pe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(dn.history.length>1){dn.history=dn.history.slice(0,t+1);const[e]=dn.history.slice(-1);e&&(dn.view=e)}},goBackOrCloseModal(){At.state.history.length>1?At.goBack():Fr.close()}},At=to(dhe),Ec=Un({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),UN={state:Ec,subscribe(t){return _s(Ec,()=>t(Ec))},setThemeMode(t){Ec.themeMode=t;try{const e=Re.getAuthConnector();if(e){const n=UN.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Gc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ec.themeVariables={...Ec.themeVariables,...t};try{const e=Re.getAuthConnector();if(e){const n=UN.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Gc(Ec.themeVariables,Ec.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Xw(Ec)}},oi=to(UN),YW={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Wt=Un({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...YW},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),hhe={state:Wt,subscribe(t){return _s(Wt,()=>{t(Wt)})},subscribeKey(t,e){return Cs(Wt,t,e)},initialize(t){t.forEach(e=>{const n=je.getConnectedConnectorId(e);n&&Re.setConnectorId(n,e)})},setActiveConnector(t){t&&(Wt.activeConnector=Th(t))},setConnectors(t){t.filter(s=>!Wt.allConnectors.some(i=>i.id===s.id&&Re.getConnectorName(i.name)===Re.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Wt.allConnectors.push(Th(s))});const n=Re.getEnabledNamespaces(),r=Re.getEnabledConnectors(n);Wt.connectors=Re.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Wt.filterByNamespaceMap).forEach(e=>{Wt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Wt.filterByNamespaceMap[e]=!0}),Re.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Wt.filterByNamespaceMap[t]=e,Re.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Re.getEnabledNamespaces(),e=Re.getEnabledConnectors(t),n=Re.areAllNamespacesEnabled();Wt.connectors=Re.mergeMultiChainConnectors(e),n?Qe.clearFilterByNamespaces():Qe.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Wt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Wt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Wt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Re.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Pe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Re.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Pe.CONNECTOR_ID.AUTH){const s=t,i=Xw(pe.state),o=oi.getSnapshot().themeMode,a=oi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Gc(a,o)}),Re.setConnectors([t])}else Re.setConnectors([t])},getAuthConnector(t){var r;const e=t||L.state.activeChain,n=Wt.connectors.find(s=>s.id===Pe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Wt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Wt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Wt.allConnectors.filter(r=>r.chain===L.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Xw(pe.state),r=oi.getSnapshot().themeMode,s=oi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Gc(s,r)})},getConnectorsByNamespace(t){const e=Wt.allConnectors.filter(n=>n.chain===t);return Re.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Re.getConnector(t.id,t.rdns),n=L.state.activeChain;the.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?At.push("ConnectingExternal",{connector:e}):At.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Re.getConnectorsByNamespace(t):Re.mergeMultiChainConnectors(Wt.allConnectors)},setFilterByNamespace(t){Wt.filterByNamespace=t,Wt.connectors=Re.getConnectors(t),Qe.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Wt.activeConnectorIds={...Wt.activeConnectorIds,[e]:t},je.setConnectedConnectorId(e,t))},removeConnectorId(t){Wt.activeConnectorIds={...Wt.activeConnectorIds,[t]:void 0},je.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Wt.activeConnectorIds[t]},isConnected(t){return t?!!Wt.activeConnectorIds[t]:Object.values(Wt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Wt.activeConnectorIds={...YW}}},Re=to(hhe);var _g={};const fhe="https://secure.walletconnect.org/sdk",phe=(typeof process<"u"&&typeof _g<"u"?_g.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||fhe,ghe=(typeof process<"u"&&typeof _g<"u"?_g.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",mhe=(typeof process<"u"&&typeof _g<"u"?_g.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Me={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},ss={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Cd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),mr=Un({...Cd}),yhe={state:mr,subscribeKey(t,e){return Cs(mr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ye.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){mr.message=Cd.message,mr.variant=Cd.variant,mr.svg=Cd.svg,mr.open=Cd.open,mr.autoClose=Cd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Cd.autoClose}){mr.open?(mr.open=!1,setTimeout(()=>{mr.message=t,mr.variant=n,mr.svg=e,mr.open=!0,mr.autoClose=r},150)):(mr.message=t,mr.variant=n,mr.svg=e,mr.open=!0,mr.autoClose=r)}},sa=yhe,Sn=Un({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),whe={state:Sn,subscribe(t){return _s(Sn,()=>t(Sn))},setLastNetworkInView(t){Sn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Sn.loading=!0;try{const s=await st.fetchTransactions({account:t,cursor:Sn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=_y.filterSpamTransactions(s.data),o=_y.filterByConnectedChain(i),a=[...Sn.transactions,...o];Sn.loading=!1,e==="coinbase"?Sn.coinbaseTransactions=_y.groupTransactionsByYearAndMonth(Sn.coinbaseTransactions,s.data):(Sn.transactions=a,Sn.transactionsByYear=_y.groupTransactionsByYearAndMonth(Sn.transactionsByYear,o)),Sn.empty=a.length===0,Sn.next=s.next?s.next:void 0}catch{const i=L.state.activeChain;zn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:pe.state.projectId,cursor:Sn.next,isSmartAccount:((r=Ue.state.preferredAccountTypes)==null?void 0:r[i])===ss.ACCOUNT_TYPES.SMART_ACCOUNT}}),sa.showError("Failed to fetch transactions"),Sn.loading=!1,Sn.empty=!0,Sn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Sn.next=void 0},resetTransactions(){Sn.transactions=[],Sn.transactionsByYear={},Sn.lastNetworkInView=void 0,Sn.loading=!1,Sn.empty=!1,Sn.next=void 0}},_y=to(whe,"API_ERROR"),wn=Un({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let hd;const vhe={state:wn,subscribeKey(t,e){return Cs(wn,t,e)},_getClient(){return wn._client},setClient(t){wn._client=Th(t)},async connectWalletConnect(){var t,e,n,r;if(Ye.isTelegram()||Ye.isSafari()&&Ye.isIos()){if(hd){await hd,hd=void 0;return}if(!Ye.isPairingExpired(wn==null?void 0:wn.wcPairingExpiry)){const s=wn.wcUri;wn.wcUri=s;return}hd=(e=(t=it._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),it.state.status="connecting",await hd,hd=void 0,wn.wcPairingExpiry=void 0,it.state.status="connected"}else await((r=(n=it._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=it._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&L.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=it._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||L.state.activeChain;e&&Re.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Fr.setLoading(!0,L.state.activeChain);const n=Re.getAuthConnector();n&&(Ue.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),je.setPreferredAccountTypes(Ue.state.preferredAccountTypes??{[e]:t}),await it.reconnectExternal(n),Fr.setLoading(!1,L.state.activeChain),zn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=it._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=it._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=it._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=it._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=it._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=it._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=it._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=it._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=it._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=it._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=it._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=it._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){wn.wcUri=void 0,wn.wcPairingExpiry=void 0,wn.wcLinking=void 0,wn.recentWallet=void 0,wn.status="disconnected",_y.resetTransactions(),je.deleteWalletConnectDeepLink()},resetUri(){wn.wcUri=void 0,wn.wcPairingExpiry=void 0,hd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=it.state;t&&je.setWalletConnectDeepLink(t),e&&je.setAppKitRecent(e),zn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=At.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){wn.wcBasic=t},setUri(t){wn.wcUri=t,wn.wcPairingExpiry=Ye.getPairingExpiry()},setWcLinking(t){wn.wcLinking=t},setWcError(t){wn.wcError=t,wn.buffering=!1},setRecentWallet(t){wn.recentWallet=t},setBuffering(t){wn.buffering=t},setStatus(t){wn.status=t},async disconnect(t){var e;try{await((e=it._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new MN("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){wn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Re.state.activeConnectorIds[n]===t.connectorId){const i=L.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ue.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Re.getConnector(t.connectorId);i?it.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},it=to(vhe),If=Un({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),tc={state:If,subscribe(t){return _s(If,()=>t(If))},subscribeOpen(t){return Cs(If,"open",t)},set(t){Object.assign(If,{...If,...t})}},nI={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Kh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},s5={async getMyTokensWithBalance(t){const e=Ue.state.address,n=L.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await st.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=nI.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await it.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await it.walletGetAssets({account:t,chainFilter:[s]});return nI.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>nI.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:L.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},rn=Un({tokenBalances:[],loading:!1}),bhe={state:rn,subscribe(t){return _s(rn,()=>t(rn))},subscribeKey(t,e){return Cs(rn,t,e)},setToken(t){t&&(rn.token=Th(t))},setTokenAmount(t){rn.sendTokenAmount=t},setReceiverAddress(t){rn.receiverAddress=t},setReceiverProfileImageUrl(t){rn.receiverProfileImageUrl=t},setReceiverProfileName(t){rn.receiverProfileName=t},setNetworkBalanceInUsd(t){rn.networkBalanceInUSD=t},setLoading(t){rn.loading=t},async sendToken(){var t;try{switch(Qt.setLoading(!0),(t=L.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Qt.sendEvmToken();return;case"solana":await Qt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Qt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=L.state.activeChain,e=(n=Ue.state.preferredAccountTypes)==null?void 0:n[t];if(!Qt.state.sendTokenAmount||!Qt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Qt.state.token)throw new Error("A token is required");(r=Qt.state.token)!=null&&r.address?(zn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:Qt.state.token.address,amount:Qt.state.sendTokenAmount,network:((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Qt.sendERC20Token({receiverAddress:Qt.state.receiverAddress,tokenAddress:Qt.state.token.address,sendTokenAmount:Qt.state.sendTokenAmount,decimals:Qt.state.token.quantity.decimals})):(zn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:Qt.state.token.symbol||"",amount:Qt.state.sendTokenAmount,network:((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Qt.sendNativeToken({receiverAddress:Qt.state.receiverAddress,sendTokenAmount:Qt.state.sendTokenAmount,decimals:Qt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;rn.loading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Ye.getPlainAddress(r):void 0;if(rn.lastRetry&&!Ye.isAllowedRetry(rn.lastRetry,30*gn.ONE_SEC_MS))return rn.loading=!1,[];try{if(s&&e&&n){const a=await s5.getMyTokensWithBalance();return rn.tokenBalances=a,rn.lastRetry=void 0,a}}catch(a){rn.lastRetry=Date.now(),t==null||t(a),sa.showError("Token Balance Unavailable")}finally{rn.loading=!1}return[]},fetchNetworkBalance(){if(rn.tokenBalances.length===0)return;const t=s5.mapBalancesToSwapTokens(rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===L.getActiveNetworkTokenAddress());e&&(rn.networkBalanceInUSD=e?zde.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;At.pushTransactionStack({});const e=t.receiverAddress,n=Ue.state.address,r=it.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await it.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),zn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ue.state.preferredAccountTypes)==null?void 0:i.eip155)===ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Qt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=it._getClient())==null||c.updateBalance("eip155"),Qt.resetSend()},async sendERC20Token(t){At.pushTransactionStack({onSuccess(){At.replace("Account")}});const e=it.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ue.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ye.getPlainAddress(t.tokenAddress);await it.writeContract({fromAddress:Ue.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Gde.getERC20Abi(n),chainNamespace:"eip155"}),Qt.resetSend()}},async sendSolanaToken(){var t;if(!Qt.state.sendTokenAmount||!Qt.state.receiverAddress)throw new Error("An amount and receiver address are required");At.pushTransactionStack({onSuccess(){At.replace("Account")}}),await it.sendTransaction({chainNamespace:"solana",to:Qt.state.receiverAddress,value:Qt.state.sendTokenAmount}),(t=it._getClient())==null||t.updateBalance("solana"),Qt.resetSend()},resetSend(){rn.token=void 0,rn.sendTokenAmount=void 0,rn.receiverAddress=void 0,rn.receiverProfileImageUrl=void 0,rn.receiverProfileName=void 0,rn.loading=!1,rn.tokenBalances=[]}},Qt=to(bhe),rI={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Rb={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ae=Un({chains:Dde(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),_he={state:Ae,subscribe(t){return _s(Ae,()=>{t(Ae)})},subscribeKey(t,e){return Cs(Ae,t,e)},subscribeChainProp(t,e,n){let r;return _s(Ae.chains,()=>{var i;const s=n||Ae.activeChain;if(s){const o=(i=Ae.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=je.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=pe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ae.noAdapters=!0),Ae.noAdapters||(Ae.activeChain=a==null?void 0:a.namespace,Ae.activeCaipNetwork=i,L.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ae.activeChain&&tc.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);L.state.chains.set(u,{namespace:u,networkState:Un({...Rb,caipNetwork:d==null?void 0:d[0]}),accountState:Un(rI),caipNetworks:d??[],...n}),L.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ae.activeChain===t){const r=Array.from(Ae.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&L.setActiveCaipNetwork(s)}}Ae.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Ae.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Rb,caipNetwork:r[0]},accountState:rI,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),L.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ae.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ae.chains.set(t.chainNamespace,{...e,caipNetworks:r}),L.setRequestedCaipNetworks(r,t.chainNamespace),Re.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ae.chains.get(t);if(n){const o=((r=Ae.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&L.setActiveCaipNetwork(n.caipNetworks[0]),Ae.chains.set(t,{...n,caipNetworks:a}),L.setRequestedCaipNetworks(a||[],t),a.length===0&&Re.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ae.chains.get(t);n&&(n.networkState={...n.networkState||Rb,...e},Ae.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ae.chains.get(t);if(r){const s={...r.accountState||rI,...e};Ae.chains.set(t,{...r,accountState:s}),(Ae.chains.size===1||Ae.activeChain===t)&&(e.caipAddress&&(Ae.activeCaipAddress=e.caipAddress),Ue.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ae.chains.get(t);if(n){const r={...n.networkState||Rb,...e};Ae.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){L.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Re.removeConnectorId(n)},setActiveNamespace(t){var r,s;Ae.activeChain=t;const e=t?Ae.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ae.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ae.activeCaipNetwork=n,L.setChainNetworkData(t,{caipNetwork:n}),je.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),tc.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ae.activeChain!==t.chainNamespace&&L.setIsSwitchingNamespace(!0);const e=Ae.chains.get(t.chainNamespace);Ae.activeChain=t.chainNamespace,Ae.activeCaipNetwork=t,L.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ae.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ae.activeCaipAddress=void 0,L.setAccountProp("caipAddress",Ae.activeCaipAddress,t.chainNamespace),e&&Ue.replaceState(e.accountState),Qt.resetSend(),tc.set({activeChain:Ae.activeChain,selectedNetworkId:(i=Ae.activeCaipNetwork)==null?void 0:i.caipNetworkId}),je.setActiveCaipNetworkId(t.caipNetworkId),!L.checkIfSupportedNetwork(t.chainNamespace)&&pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&!it.state.wcBasic&&L.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ae.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==L.state.activeChain,n=(s=L.getNetworkData(t))==null?void 0:s.caipNetwork,r=L.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await L.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=L.state.chains.get(L.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Ae.activeCaipNetwork)==null?void 0:o.id)})),r=L.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Fr.close()}catch{At.goBack()}zn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ae.activeChain,n=Ae.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ae.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ae.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ae.activeChain;if(e&&(n=e),!n)return;const r=(s=Ae.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ae.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ae.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ye.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ae.chains.forEach(e=>{const n=L.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){L.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=L.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Re.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ae.chains.forEach(e=>{const n=L.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Ae.activeCaipNetwork},getActiveCaipAddress(){return Ae.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ae.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=L.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());L.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ae.activeCaipNetwork,r=L.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ae.activeChain)return!0;const e=L.getRequestedCaipNetworks(Ae.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){L.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=qW.caipNetworkIdToNumber((r=Ae.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ae.activeChain;if(!e||!t)return!1;const n=L.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Ae.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Ae.activeCaipNetwork)==null?void 0:s.id)||1,n=gn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Fr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ae.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&gn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){L.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Ae.activeCaipAddress=void 0,L.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Re.removeConnectorId(e)},setIsSwitchingNamespace(t){Ae.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ae.chains.forEach(s=>{Pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ae.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=L.state.chains.get(t))==null?void 0:e.accountState:Ue.state},getNetworkData(t){var n;const e=t||Ae.activeChain;if(e)return(n=L.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=L.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Re.state.filterByNamespace;return(t?[Ae.chains.get(t)]:Array.from(Ae.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?L.getRequestedCaipNetworks(t):L.getAllRequestedCaipNetworks()}},L=to(_he),Ehe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},QW=Ye.getBlockchainApiUrl(),Vs=Un({clientId:null,api:new pv({baseUrl:QW,clientId:null}),supportedChains:{http:[],ws:[]}}),st={state:Vs,async get(t){const{st:e,sv:n}=st.getSdkProperties(),r=pe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Vs.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=pe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Vs.supportedChains.http.length||await st.getSupportedNetworks()}catch{return!1}return Vs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await st.get({path:"v1/supported-chains"});return Vs.supportedChains=t,t}catch{return Vs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await st.isNetworkSupported(e))return{avatar:"",name:""};const r=je.getIdentityFromCacheForAddress(t);if(r)return r;const s=await st.get({path:`/v1/identity/${t}`,params:{sender:L.state.activeCaipAddress?Ye.getPlainAddress(L.state.activeCaipAddress):void 0}});return je.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await st.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?st.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await st.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?st.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await st.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await st.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Vs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await st.isNetworkSupported((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?st.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=st.getSdkProperties();if(!await st.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return st.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await st.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Vs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:gn.CONVERT_SLIPPAGE_TOLERANCE},projectId:pe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=st.getSdkProperties();if(!await st.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return st.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=st.getSdkProperties();if(!await st.isNetworkSupported((l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return sa.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await st.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await st.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await st.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ue.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await st.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await st.isNetworkSupported((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Vs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await st.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Vs.api.post({path:"/v1/generators/onrampurl",params:{projectId:pe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await st.isNetworkSupported((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await st.get({path:"/v1/onramp/options"})}catch{return Ehe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await st.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Vs.api.post({path:"/v1/onramp/quote",params:{projectId:pe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await st.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await st.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Vs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:pe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Vs.clientId=t,Vs.api=new pv({baseUrl:QW,clientId:t})}},so=Un({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Che={state:so,replaceState(t){t&&Object.assign(so,Th(t))},subscribe(t){return L.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return L.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){L.setAccountProp("status",t,e)},getCaipAddress(t){return L.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ye.getPlainAddress(t):void 0;e===L.state.activeChain&&(L.state.activeCaipAddress=t),L.setAccountProp("caipAddress",t,e),L.setAccountProp("address",n,e)},setBalance(t,e,n){L.setAccountProp("balance",t,n),L.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){L.setAccountProp("profileName",t,e)},setProfileImage(t,e){L.setAccountProp("profileImage",t,e)},setUser(t,e){L.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){L.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){L.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){L.setAccountProp("currentTab",t,L.state.activeChain)},setTokenBalance(t,e){t&&L.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){L.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){L.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=L.getAccountProp("addressLabels",n)||new Map;r.set(t,e),L.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=L.getAccountProp("addressLabels",e)||new Map;n.delete(t),L.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){L.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){L.setAccountProp("preferredAccountTypes",{...so.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){so.preferredAccountTypes=t},setSocialProvider(t,e){t&&L.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){L.setAccountProp("socialWindow",t?Th(t):void 0,e)},setFarcasterUrl(t,e){L.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;so.balanceLoading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Ye.getPlainAddress(r):void 0;if(so.lastRetry&&!Ye.isAllowedRetry(so.lastRetry,30*gn.ONE_SEC_MS))return so.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await st.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ue.setTokenBalance(c,n),so.lastRetry=void 0,so.balanceLoading=!1,c}}catch(a){so.lastRetry=Date.now(),t==null||t(a),sa.showError("Token Balance Unavailable")}finally{so.balanceLoading=!1}return[]},resetAccount(t){L.resetAccount(t)}},Ue=to(Che),She={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=L.state.activeCaipNetwork,r=At.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ue.getCaipAddress(L.state.activeChain),o=t.chainNamespace!==L.state.activeChain,a=Ue.getCaipAddress(t.chainNamespace),l=Re.getConnectorId(L.state.activeChain)===Pe.CONNECTOR_ID.AUTH,u=Pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?At.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?At.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):At.push("SwitchNetwork",{...r,network:t})}},Gs=Un({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Ahe={state:Gs,subscribe(t){return _s(Gs,()=>t(Gs))},subscribeKey(t,e){return Cs(Gs,t,e)},async open(t){var o,a;const e=Ue.state.status==="connected",n=t==null?void 0:t.namespace,r=L.state.activeChain,s=n&&n!==r,i=(o=L.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(it.state.wcBasic?Qe.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Qe.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Re.setFilterByNamespace(t==null?void 0:t.namespace),Fr.setLoading(!0,n),n&&s){const c=((a=L.getNetworkData(n))==null?void 0:a.caipNetwork)||L.getRequestedCaipNetworks(n)[0];c&&She.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=L.state.noAdapters;pe.state.manualWCControl||c&&!i?Ye.isMobile()?At.reset("AllWallets"):At.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?At.reset(t.view,t.data):i?At.reset("Account"):At.reset("Connect")}Gs.open=!0,tc.set({open:!0}),zn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=pe.state.enableEmbedded,e=!!L.state.activeCaipAddress;Gs.open&&zn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Gs.open=!1,At.reset("Connect"),Fr.clearLoading(),t?e?At.replace("Account"):At.push("Connect"):tc.set({open:!1}),it.resetUri()},setLoading(t,e){e&&Gs.loadingNamespaceMap.set(e,t),Gs.loading=t,tc.set({loading:t})},clearLoading(){Gs.loadingNamespaceMap.clear(),Gs.loading=!1},shake(){Gs.shake||(Gs.shake=!0,setTimeout(()=>{Gs.shake=!1},500))}},Fr=to(Ahe),Hy={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},jN={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Ihe={providers:GW,selectedProvider:null,error:null,purchaseCurrency:Hy,paymentCurrency:jN,purchaseCurrencies:[Hy],paymentCurrencies:[],quotesLoading:!1},Ut=Un(Ihe),xhe={state:Ut,subscribe(t){return _s(Ut,()=>t(Ut))},subscribeKey(t,e){return Cs(Ut,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=L.state.activeChain===Pe.CHAIN.SOLANA?"SOL":"USDC",n=Ue.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",Kde),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",pe.state.projectId),Ut.selectedProvider={...t,url:r.toString()}}else Ut.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=GW.filter(r=>e.includes(r.name));Ut.providers=n}else Ut.providers=[]},setPurchaseCurrency(t){Ut.purchaseCurrency=t},setPaymentCurrency(t){Ut.paymentCurrency=t},setPurchaseAmount(t){BN.state.purchaseAmount=t},setPaymentAmount(t){BN.state.paymentAmount=t},async getAvailableCurrencies(){const t=await st.getOnrampOptions();Ut.purchaseCurrencies=t.purchaseCurrencies,Ut.paymentCurrencies=t.paymentCurrencies,Ut.paymentCurrency=t.paymentCurrencies[0]||jN,Ut.purchaseCurrency=t.purchaseCurrencies[0]||Hy,await Qe.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Qe.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Ut.quotesLoading=!0;try{const n=await st.getOnrampQuote({purchaseCurrency:Ut.purchaseCurrency,paymentCurrency:Ut.paymentCurrency,amount:((t=Ut.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Ut.purchaseCurrency)==null?void 0:e.symbol});return Ut.quotesLoading=!1,Ut.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Ut.error=n.message,Ut.quotesLoading=!1,null}finally{Ut.quotesLoading=!1}},resetState(){Ut.selectedProvider=null,Ut.error=null,Ut.purchaseCurrency=Hy,Ut.paymentCurrency=jN,Ut.purchaseCurrencies=[Hy],Ut.paymentCurrencies=[],Ut.paymentAmount=void 0,Ut.purchaseAmount=void 0,Ut.quotesLoading=!1}},BN=to(xhe),i5=2147483648,The={convertEVMChainIdToCoinType(t){if(t>=i5)throw new Error("Invalid chainId");return(i5|t)>>>0}},io=Un({suggestions:[],loading:!1}),Nhe={state:io,subscribe(t){return _s(io,()=>t(io))},subscribeKey(t,e){return Cs(io,t,e)},async resolveName(t){var e,n;try{return await st.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await st.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{io.loading=!0,io.suggestions=[];const e=await st.getEnsNameSuggestions(t);return io.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],io.suggestions}catch(e){const n=Vy.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{io.loading=!1}},async getNamesForAddress(t){try{if(!L.state.activeCaipNetwork)return[];const n=je.getEnsFromCacheForAddress(t);if(n)return n;const r=await st.reverseLookupEnsName({address:t});return je.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Vy.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=L.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ue.state.address,r=Re.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");io.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});At.pushTransactionStack({onCancel(){At.replace("RegisterAccountName")}});const i=await it.signMessage(s);io.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=The.convertEVMChainIdToCoinType(Number(o));await st.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ue.setProfileName(t,e.chainNamespace),At.replace("RegisterAccountNameSuccess")}catch(s){const i=Vy.parseEnsApiError(s,`Error registering name ${t}`);throw At.replace("RegisterAccountName"),new Error(i)}finally{io.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Vy=to(Nhe);var _O={exports:{}},Mp=typeof Reflect=="object"?Reflect:null,o5=Mp&&typeof Mp.apply=="function"?Mp.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},R_;Mp&&typeof Mp.ownKeys=="function"?R_=Mp.ownKeys:Object.getOwnPropertySymbols?R_=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:R_=function(e){return Object.getOwnPropertyNames(e)};function Rhe(t){console&&console.warn&&console.warn(t)}var JW=Number.isNaN||function(e){return e!==e};function mn(){mn.init.call(this)}_O.exports=mn;_O.exports.once=Dhe;mn.EventEmitter=mn;mn.prototype._events=void 0;mn.prototype._eventsCount=0;mn.prototype._maxListeners=void 0;var a5=10;function x1(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(mn,"defaultMaxListeners",{enumerable:!0,get:function(){return a5},set:function(t){if(typeof t!="number"||t<0||JW(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a5=t}});mn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};mn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||JW(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ZW(t){return t._maxListeners===void 0?mn.defaultMaxListeners:t._maxListeners}mn.prototype.getMaxListeners=function(){return ZW(this)};mn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")o5(c,this,n);else for(var l=c.length,u=r7(c,l),r=0;r<l;++r)o5(u[r],this,n);return!0};function XW(t,e,n,r){var s,i,o;if(x1(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=ZW(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Rhe(a)}return t}mn.prototype.addListener=function(e,n){return XW(this,e,n,!1)};mn.prototype.on=mn.prototype.addListener;mn.prototype.prependListener=function(e,n){return XW(this,e,n,!0)};function Phe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=Phe.bind(r);return s.listener=n,r.wrapFn=s,s}mn.prototype.once=function(e,n){return x1(n),this.on(e,e7(this,e,n)),this};mn.prototype.prependOnceListener=function(e,n){return x1(n),this.prependListener(e,e7(this,e,n)),this};mn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(x1(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():khe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};mn.prototype.off=mn.prototype.removeListener;mn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function t7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?Ohe(s):r7(s,s.length)}mn.prototype.listeners=function(e){return t7(this,e,!0)};mn.prototype.rawListeners=function(e){return t7(this,e,!1)};mn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):n7.call(t,e)};mn.prototype.listenerCount=n7;function n7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}mn.prototype.eventNames=function(){return this._eventsCount>0?R_(this._events):[]};function r7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function khe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ohe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Dhe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}s7(t,e,i,{once:!0}),e!=="error"&&$he(t,s,{once:!0})})}function $he(t,e,n){typeof t.on=="function"&&s7(t,"error",e,n)}function s7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Oo=_O.exports;const EO=qh(Oo);var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var FN=function(t,e){return FN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},FN(t,e)};function Mhe(t,e){FN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var WN=function(){return WN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},WN.apply(this,arguments)};function Lhe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Uhe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function jhe(t,e){return function(n,r){e(n,r,t)}}function Bhe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Fhe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Whe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zhe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function qhe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function zN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Hhe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i7(arguments[e]));return t}function Vhe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function e0(t){return this instanceof e0?(this.v=t,this):new e0(t)}function Ghe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof e0?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Khe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:e0(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Yhe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zN=="function"?zN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Qhe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Jhe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Zhe(t){return t&&t.__esModule?t:{default:t}}function Xhe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function efe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const tfe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return WN},__asyncDelegator:Khe,__asyncGenerator:Ghe,__asyncValues:Yhe,__await:e0,__awaiter:Fhe,__classPrivateFieldGet:Xhe,__classPrivateFieldSet:efe,__createBinding:zhe,__decorate:Uhe,__exportStar:qhe,__extends:Mhe,__generator:Whe,__importDefault:Zhe,__importStar:Jhe,__makeTemplateObject:Qhe,__metadata:Bhe,__param:jhe,__read:i7,__rest:Lhe,__spread:Hhe,__spreadArrays:Vhe,__values:zN},Symbol.toStringTag,{value:"Module"})),T1=gP(tfe);var sI={},qm={},c5;function nfe(){if(c5)return qm;c5=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return qm.delay=t,qm}var fd={},iI={},pd={},l5;function rfe(){return l5||(l5=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.ONE_THOUSAND=pd.ONE_HUNDRED=void 0,pd.ONE_HUNDRED=100,pd.ONE_THOUSAND=1e3),pd}var oI={},u5;function sfe(){return u5||(u5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(oI)),oI}var d5;function o7(){return d5||(d5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=T1;e.__exportStar(rfe(),t),e.__exportStar(sfe(),t)}(iI)),iI}var h5;function ife(){if(h5)return fd;h5=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.fromMiliseconds=fd.toMiliseconds=void 0;const t=o7();function e(r){return r*t.ONE_THOUSAND}fd.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return fd.fromMiliseconds=n,fd}var f5;function ofe(){return f5||(f5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=T1;e.__exportStar(nfe(),t),e.__exportStar(ife(),t)}(sI)),sI}var xf={},p5;function afe(){if(p5)return xf;p5=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return xf.Watch=t,xf.default=t,xf}var aI={},Hm={},g5;function cfe(){if(g5)return Hm;g5=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.IWatch=void 0;class t{}return Hm.IWatch=t,Hm}var m5;function lfe(){return m5||(m5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),T1.__exportStar(cfe(),t)}(aI)),aI}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=T1;e.__exportStar(ofe(),t),e.__exportStar(afe(),t),e.__exportStar(lfe(),t),e.__exportStar(o7(),t)})(ve);class nf{}let ufe=class extends nf{constructor(e){super()}};const y5=ve.FIVE_SECONDS,rf={pulse:"heartbeat_pulse"};let dfe=class a7 extends ufe{constructor(e){super(e),this.events=new Oo.EventEmitter,this.interval=y5,this.interval=(e==null?void 0:e.interval)||y5}static async init(e){const n=new a7(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ve.toMiliseconds(this.interval))}pulse(){this.events.emit(rf.pulse)}};const hfe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ffe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,pfe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function gfe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){mfe(t);return}return e}function mfe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Pb(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!pfe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(hfe.test(t)||ffe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,gfe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function sf(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function c7(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=sf(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let cI;function gv(){return cI||(cI=c7("keyval-store","keyval")),cI}function w5(t,e=gv()){return e("readonly",n=>sf(n.get(t)))}function yfe(t,e,n=gv()){return n("readwrite",r=>(r.put(e,t),sf(r.transaction)))}function wfe(t,e=gv()){return e("readwrite",n=>(n.delete(t),sf(n.transaction)))}function vfe(t=gv()){return t("readwrite",e=>(e.clear(),sf(e.transaction)))}function bfe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},sf(t.transaction)}function _fe(t=gv()){return t("readonly",e=>{if(e.getAllKeys)return sf(e.getAllKeys());const n=[];return bfe(e,r=>n.push(r.key)).then(()=>n)})}const Efe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Cfe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Rh(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Cfe(t)}catch{return t}}function ll(t){return typeof t=="string"?t:Efe(t)||""}function Sfe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Afe=Ife;function Ife(t,e,n){var r=n&&n.stringify||Sfe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const v5=Afe;var np=nc;const t0=Mfe().console||{},xfe={mapHttpRequest:kb,mapHttpResponse:kb,wrapRequestSerializer:lI,wrapResponseSerializer:lI,wrapErrorSerializer:lI,req:kb,res:kb,err:kfe};function Tfe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function nc(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||t0;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Tfe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=n0),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Ofe(t)};c.levels=nc.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=n0,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=qN());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Tf(l,c,"error","log"),Tf(l,c,"fatal","error"),Tf(l,c,"warn","error"),Tf(l,c,"info","log"),Tf(l,c,"debug","log"),Tf(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),v=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,N1([p],v,y,this._stdErrSerialize)}function b(E){this._childLevel=(E._childLevel|0)+1,this.error=Nf(E,p,"error"),this.fatal=Nf(E,p,"fatal"),this.warn=Nf(E,p,"warn"),this.info=Nf(E,p,"info"),this.debug=Nf(E,p,"debug"),this.trace=Nf(E,p,"trace"),y&&(this.serializers=y,this._serialize=v),e&&(this._logEvent=qN([].concat(E._logEvent.bindings,p)))}return b.prototype=this,new b(this)}return c}nc.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};nc.stdSerializers=xfe;nc.stdTimeFunctions=Object.assign({},{nullTime:l7,epochTime:u7,unixTime:Dfe,isoTime:$fe});function Tf(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?n0:s[n]?s[n]:t0[n]||t0[r]||n0,Nfe(t,e,n)}function Nfe(t,e,n){!t.transmit&&e[n]===n0||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t0?t0:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&N1(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Rfe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=nc.levels.values[l],d=nc.levels.values[n];if(d<u)return;Pfe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:nc.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Rfe(t,e,n,r){t._serialize&&N1(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=nc.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?v5(s.shift(),s):void 0}else typeof i=="string"&&(i=v5(s.shift(),s));return i!==void 0&&(o.msg=i),o}function N1(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=nc.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Nf(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Pfe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;N1(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=qN(c)}function qN(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function kfe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Ofe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?l7:u7}function kb(){return{}}function lI(t){return t}function n0(){}function l7(){return!1}function u7(){return Date.now()}function Dfe(){return Math.round(Date.now()/1e3)}function $fe(){return new Date(Date.now()).toISOString()}function Mfe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const mv=qh(np),Lfe={level:"info"},yv="custom_context",CO=1e3*1024;let Ufe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},b5=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Ufe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},d7=class{constructor(e,n=CO){this.level=e??"error",this.levelValue=np.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new b5(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===np.levels.values.error?console.error(e):n===np.levels.values.warn?console.warn(e):n===np.levels.values.debug?console.debug(e):n===np.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ll({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new b5(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ll({extraMetadata:e})),new Blob(n,{type:"application/json"})}},jfe=class{constructor(e,n=CO){this.baseChunkLogger=new d7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Bfe=class{constructor(e,n=CO){this.baseChunkLogger=new d7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Ffe=Object.defineProperty,Wfe=Object.defineProperties,zfe=Object.getOwnPropertyDescriptors,_5=Object.getOwnPropertySymbols,qfe=Object.prototype.hasOwnProperty,Hfe=Object.prototype.propertyIsEnumerable,E5=(t,e,n)=>e in t?Ffe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DE=(t,e)=>{for(var n in e||(e={}))qfe.call(e,n)&&E5(t,n,e[n]);if(_5)for(var n of _5(e))Hfe.call(e,n)&&E5(t,n,e[n]);return t},$E=(t,e)=>Wfe(t,zfe(e));function of(t){return $E(DE({},t),{level:(t==null?void 0:t.level)||Lfe.level})}function Vfe(t,e=yv){return t[e]||""}function Gfe(t,e,n=yv){return t[n]=e,t}function Si(t,e=yv){let n="";return typeof t.bindings>"u"?n=Vfe(t,e):n=t.bindings().context||"",n}function Kfe(t,e,n=yv){const r=Si(t,n);return r.trim()?`${r}/${e}`:e}function as(t,e,n=yv){const r=Kfe(t,e,n),s=t.child({context:r});return Gfe(s,r,n)}function Yfe(t){var e,n;const r=new jfe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:mv($E(DE({},t.opts),{level:"trace",browser:$E(DE({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Qfe(t){var e;const n=new Bfe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:mv($E(DE({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function R1(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Yfe(t):Qfe(t)}function Jfe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function h7(t,...e){if(!Jfe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function C5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zfe(t,e){h7(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Rf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uI=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Xfe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function f7(t){return typeof t=="string"&&(t=Xfe(t)),h7(t),t}let epe=class{clone(){return this._cloneInto()}};function tpe(t){const e=r=>t().update(f7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function p7(t=32){if(Rf&&typeof Rf.getRandomValues=="function")return Rf.getRandomValues(new Uint8Array(t));if(Rf&&typeof Rf.randomBytes=="function")return Rf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function npe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let rpe=class extends epe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=uI(this.buffer)}update(e){C5(this);const{view:n,buffer:r,blockLen:s}=this;e=f7(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=uI(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){C5(this),Zfe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;npe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=uI(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Ob=BigInt(2**32-1),HN=BigInt(32);function g7(t,e=!1){return e?{h:Number(t&Ob),l:Number(t>>HN&Ob)}:{h:Number(t>>HN&Ob)|0,l:Number(t&Ob)|0}}function spe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=g7(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const ipe=(t,e)=>BigInt(t>>>0)<<HN|BigInt(e>>>0),ope=(t,e,n)=>t>>>n,ape=(t,e,n)=>t<<32-n|e>>>n,cpe=(t,e,n)=>t>>>n|e<<32-n,lpe=(t,e,n)=>t<<32-n|e>>>n,upe=(t,e,n)=>t<<64-n|e>>>n-32,dpe=(t,e,n)=>t>>>n-32|e<<64-n,hpe=(t,e)=>e,fpe=(t,e)=>t,ppe=(t,e,n)=>t<<n|e>>>32-n,gpe=(t,e,n)=>e<<n|t>>>32-n,mpe=(t,e,n)=>e<<n-32|t>>>64-n,ype=(t,e,n)=>t<<n-32|e>>>64-n;function wpe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const vpe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),bpe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,_pe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Epe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Cpe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Spe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,St={fromBig:g7,split:spe,toBig:ipe,shrSH:ope,shrSL:ape,rotrSH:cpe,rotrSL:lpe,rotrBH:upe,rotrBL:dpe,rotr32H:hpe,rotr32L:fpe,rotlSH:ppe,rotlSL:gpe,rotlBH:mpe,rotlBL:ype,add:wpe,add3L:vpe,add3H:bpe,add4L:_pe,add4H:Epe,add5H:Spe,add5L:Cpe},[Ape,Ipe]=St.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),xl=new Uint32Array(80),Tl=new Uint32Array(80);let xpe=class extends rpe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let b=0;b<16;b++,n+=4)xl[b]=e.getUint32(n),Tl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const E=xl[b-15]|0,C=Tl[b-15]|0,A=St.rotrSH(E,C,1)^St.rotrSH(E,C,8)^St.shrSH(E,C,7),I=St.rotrSL(E,C,1)^St.rotrSL(E,C,8)^St.shrSL(E,C,7),x=xl[b-2]|0,S=Tl[b-2]|0,O=St.rotrSH(x,S,19)^St.rotrBH(x,S,61)^St.shrSH(x,S,6),P=St.rotrSL(x,S,19)^St.rotrBL(x,S,61)^St.shrSL(x,S,6),j=St.add4L(I,P,Tl[b-7],Tl[b-16]),q=St.add4H(j,A,O,xl[b-7],xl[b-16]);xl[b]=q|0,Tl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:v}=this;for(let b=0;b<80;b++){const E=St.rotrSH(d,h,14)^St.rotrSH(d,h,18)^St.rotrBH(d,h,41),C=St.rotrSL(d,h,14)^St.rotrSL(d,h,18)^St.rotrBL(d,h,41),A=d&f^~d&g,I=h&p^~h&w,x=St.add5L(v,C,I,Ipe[b],Tl[b]),S=St.add5H(x,y,E,A,Ape[b],xl[b]),O=x|0,P=St.rotrSH(r,s,28)^St.rotrBH(r,s,34)^St.rotrBH(r,s,39),j=St.rotrSL(r,s,28)^St.rotrBL(r,s,34)^St.rotrBL(r,s,39),q=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,v=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=St.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const N=St.add3L(O,j,B);r=St.add3H(N,S,P,q),s=N|0}({h:r,l:s}=St.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=St.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=St.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=St.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=St.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=St.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=St.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:v}=St.add(this.Hh|0,this.Hl|0,y|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,v)}roundClean(){xl.fill(0),Tl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Tpe=tpe(()=>new xpe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SO=BigInt(0),m7=BigInt(1),Npe=BigInt(2);function AO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function IO(t){if(!AO(t))throw new Error("Uint8Array expected")}function dI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Rpe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function xO(t){IO(t);let e="";for(let n=0;n<t.length;n++)e+=Rpe[t[n]];return e}function y7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?SO:BigInt("0x"+t)}const Cc={_0:48,_9:57,A:65,F:70,a:97,f:102};function S5(t){if(t>=Cc._0&&t<=Cc._9)return t-Cc._0;if(t>=Cc.A&&t<=Cc.F)return t-(Cc.A-10);if(t>=Cc.a&&t<=Cc.f)return t-(Cc.a-10)}function w7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=S5(t.charCodeAt(i)),a=S5(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Ppe(t){return y7(xO(t))}function P_(t){return IO(t),y7(xO(Uint8Array.from(t).reverse()))}function v7(t,e){return w7(t.toString(16).padStart(e*2,"0"))}function VN(t,e){return v7(t,e).reverse()}function Sc(t,e,n){let r;if(typeof e=="string")try{r=w7(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(AO(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function A5(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];IO(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const hI=t=>typeof t=="bigint"&&SO<=t;function kpe(t,e,n){return hI(t)&&hI(e)&&hI(n)&&e<=t&&t<n}function Vm(t,e,n,r){if(!kpe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Ope(t){let e;for(e=0;t>SO;t>>=m7,e+=1);return e}const Dpe=t=>(Npe<<BigInt(t-1))-m7,$pe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||AO(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function TO(t,e,n={}){const r=(s,i,o)=>{const a=$pe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function I5(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Wr=BigInt(0),lr=BigInt(1),Pd=BigInt(2),Mpe=BigInt(3),GN=BigInt(4),x5=BigInt(5),T5=BigInt(8);function _r(t,e){const n=t%e;return n>=Wr?n:e+n}function Lpe(t,e,n){if(e<Wr)throw new Error("invalid exponent, negatives unsupported");if(n<=Wr)throw new Error("invalid modulus");if(n===lr)return Wr;let r=lr;for(;e>Wr;)e&lr&&(r=r*t%n),t=t*t%n,e>>=lr;return r}function Na(t,e,n){let r=t;for(;e-- >Wr;)r*=r,r%=n;return r}function N5(t,e){if(t===Wr)throw new Error("invert: expected non-zero number");if(e<=Wr)throw new Error("invert: expected positive modulus, got "+e);let n=_r(t,e),r=e,s=Wr,i=lr;for(;n!==Wr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==lr)throw new Error("invert: does not exist");return _r(s,e)}function Upe(t){const e=(t-lr)/Pd;let n,r,s;for(n=t-lr,r=0;n%Pd===Wr;n/=Pd,r++);for(s=Pd;s<t&&Lpe(s,e,t)!==t-lr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+lr)/GN;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+lr)/Pd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,lr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function jpe(t){if(t%GN===Mpe){const e=(t+lr)/GN;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%T5===x5){const e=(t-x5)/T5;return function(n,r){const s=n.mul(r,Pd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Pd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Upe(t)}const Bpe=(t,e)=>(_r(t,e)&lr)===lr,Fpe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wpe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Fpe.reduce((r,s)=>(r[s]="function",r),e);return TO(t,n)}function zpe(t,e,n){if(n<Wr)throw new Error("invalid exponent, negatives unsupported");if(n===Wr)return t.ONE;if(n===lr)return e;let r=t.ONE,s=e;for(;n>Wr;)n&lr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=lr;return r}function qpe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function b7(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _7(t,e,n=!1,r={}){if(t<=Wr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=b7(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Dpe(s),ZERO:Wr,ONE:lr,create:c=>_r(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Wr<=c&&c<t},is0:c=>c===Wr,isOdd:c=>(c&lr)===lr,neg:c=>_r(-c,t),eql:(c,l)=>c===l,sqr:c=>_r(c*c,t),add:(c,l)=>_r(c+l,t),sub:(c,l)=>_r(c-l,t),mul:(c,l)=>_r(c*l,t),pow:(c,l)=>zpe(a,c,l),div:(c,l)=>_r(c*N5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>N5(c,t),sqrt:r.sqrt||(c=>(o||(o=jpe(t)),o(a,c))),invertBatch:c=>qpe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?VN(c,i):v7(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?P_(c):Ppe(c)}});return Object.freeze(a)}const R5=BigInt(0),Db=BigInt(1);function fI(t,e){const n=e.negate();return t?n:e}function E7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function pI(t,e){E7(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Hpe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Vpe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const gI=new WeakMap,C7=new WeakMap;function mI(t){return C7.get(t)||1}function Gpe(t,e){return{constTimeNegate:fI,hasPrecomputes(n){return mI(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>R5;)r&Db&&(s=s.add(i)),i=i.double(),r>>=Db;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=pI(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=pI(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=Db);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,v=p<0;p===0?c=c.add(fI(y,r[g])):a=a.add(fI(v,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=pI(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===R5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=Db),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=gI.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&gI.set(r,s(i))),i},wNAFCached(n,r,s){const i=mI(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=mI(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){E7(r,e),C7.set(n,r),gI.delete(n)}}}function Kpe(t,e,n,r){if(Hpe(n,t),Vpe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Ope(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Ype(t){return Wpe(t.Fp),TO(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...b7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const jo=BigInt(0),Ks=BigInt(1),$b=BigInt(2),Qpe=BigInt(8),Jpe={zip215:!0};function Zpe(t){const e=Ype(t);return TO(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Xpe(t){const e=Zpe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=$b<<BigInt(a*8)-Ks,u=n.create,d=_7(e.n,e.nBitLength),h=e.uvRatio||((N,T)=>{try{return{isValid:!0,value:n.sqrt(N*n.inv(T))}}catch{return{isValid:!1,value:jo}}}),f=e.adjustScalarBytes||(N=>N),p=e.domain||((N,T,$)=>{if(dI("phflag",$),T.length||$)throw new Error("Contexts/pre-hash are not supported");return N});function g(N,T){Vm("coordinate "+N,T,jo,l)}function w(N){if(!(N instanceof b))throw new Error("ExtendedPoint expected")}const y=I5((N,T)=>{const{ex:$,ey:R,ez:D}=N,U=N.is0();T==null&&(T=U?Qpe:n.inv(D));const H=u($*T),te=u(R*T),oe=u(D*T);if(U)return{x:jo,y:Ks};if(oe!==Ks)throw new Error("invZ was invalid");return{x:H,y:te}}),v=I5(N=>{const{a:T,d:$}=e;if(N.is0())throw new Error("bad point: ZERO");const{ex:R,ey:D,ez:U,et:H}=N,te=u(R*R),oe=u(D*D),re=u(U*U),ie=u(re*re),ye=u(te*T),Z=u(re*u(ye+oe)),Y=u(ie+u($*u(te*oe)));if(Z!==Y)throw new Error("bad point: equation left != right (1)");const ue=u(R*D),ne=u(U*H);if(ue!==ne)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(T,$,R,D){this.ex=T,this.ey=$,this.ez=R,this.et=D,g("x",T),g("y",$),g("z",R),g("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof b)throw new Error("extended point not allowed");const{x:$,y:R}=T||{};return g("x",$),g("y",R),new b($,R,Ks,u($*R))}static normalizeZ(T){const $=n.invertBatch(T.map(R=>R.ez));return T.map((R,D)=>R.toAffine($[D])).map(b.fromAffine)}static msm(T,$){return Kpe(b,d,T,$)}_setWindowSize(T){A.setWindowSize(this,T)}assertValidity(){v(this)}equals(T){w(T);const{ex:$,ey:R,ez:D}=this,{ex:U,ey:H,ez:te}=T,oe=u($*te),re=u(U*D),ie=u(R*te),ye=u(H*D);return oe===re&&ie===ye}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:T}=e,{ex:$,ey:R,ez:D}=this,U=u($*$),H=u(R*R),te=u($b*u(D*D)),oe=u(T*U),re=$+R,ie=u(u(re*re)-U-H),ye=oe+H,Z=ye-te,Y=oe-H,ue=u(ie*Z),ne=u(ye*Y),ce=u(ie*Y),$e=u(Z*ye);return new b(ue,ne,$e,ce)}add(T){w(T);const{a:$,d:R}=e,{ex:D,ey:U,ez:H,et:te}=this,{ex:oe,ey:re,ez:ie,et:ye}=T;if($===BigInt(-1)){const nn=u((U-D)*(re+oe)),Ft=u((U+D)*(re-oe)),Bn=u(Ft-nn);if(Bn===jo)return this.double();const Jn=u(H*$b*ye),ds=u(te*$b*ie),Ai=ds+Jn,Nr=Ft+nn,Ss=ds-Jn,Vr=u(Ai*Bn),id=u(Nr*Ss),Lo=u(Ai*Ss),hf=u(Bn*Nr);return new b(Vr,id,hf,Lo)}const Z=u(D*oe),Y=u(U*re),ue=u(te*R*ye),ne=u(H*ie),ce=u((D+U)*(oe+re)-Z-Y),$e=ne-ue,de=ne+ue,we=u(Y-$*Z),We=u(ce*$e),rt=u(de*we),Yt=u(ce*we),ln=u($e*de);return new b(We,rt,ln,Yt)}subtract(T){return this.add(T.negate())}wNAF(T){return A.wNAFCached(this,T,b.normalizeZ)}multiply(T){const $=T;Vm("scalar",$,Ks,r);const{p:R,f:D}=this.wNAF($);return b.normalizeZ([R,D])[0]}multiplyUnsafe(T,$=b.ZERO){const R=T;return Vm("scalar",R,jo,r),R===jo?C:this.is0()||R===Ks?this:A.wNAFCachedUnsafe(this,R,b.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(T){return y(this,T)}clearCofactor(){const{h:T}=e;return T===Ks?this:this.multiplyUnsafe(T)}static fromHex(T,$=!1){const{d:R,a:D}=e,U=n.BYTES;T=Sc("pointHex",T,U),dI("zip215",$);const H=T.slice(),te=T[U-1];H[U-1]=te&-129;const oe=P_(H),re=$?l:n.ORDER;Vm("pointHex.y",oe,jo,re);const ie=u(oe*oe),ye=u(ie-Ks),Z=u(R*ie-D);let{isValid:Y,value:ue}=h(ye,Z);if(!Y)throw new Error("Point.fromHex: invalid y coordinate");const ne=(ue&Ks)===Ks,ce=(te&128)!==0;if(!$&&ue===jo&&ce)throw new Error("Point.fromHex: x=0 and x_0=1");return ce!==ne&&(ue=u(-ue)),b.fromAffine({x:ue,y:oe})}static fromPrivateKey(T){return S(T).point}toRawBytes(){const{x:T,y:$}=this.toAffine(),R=VN($,n.BYTES);return R[R.length-1]|=T&Ks?128:0,R}toHex(){return xO(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Ks,u(e.Gx*e.Gy)),b.ZERO=new b(jo,Ks,Ks,jo);const{BASE:E,ZERO:C}=b,A=Gpe(b,a*8);function I(N){return _r(N,r)}function x(N){return I(P_(N))}function S(N){const T=n.BYTES;N=Sc("private key",N,T);const $=Sc("hashed private key",i(N),2*T),R=f($.slice(0,T)),D=$.slice(T,2*T),U=x(R),H=E.multiply(U),te=H.toRawBytes();return{head:R,prefix:D,scalar:U,point:H,pointBytes:te}}function O(N){return S(N).pointBytes}function P(N=new Uint8Array,...T){const $=A5(...T);return x(i(p($,Sc("context",N),!!s)))}function j(N,T,$={}){N=Sc("message",N),s&&(N=s(N));const{prefix:R,scalar:D,pointBytes:U}=S(T),H=P($.context,R,N),te=E.multiply(H).toRawBytes(),oe=P($.context,te,U,N),re=I(H+oe*D);Vm("signature.s",re,jo,r);const ie=A5(te,VN(re,n.BYTES));return Sc("result",ie,n.BYTES*2)}const q=Jpe;function B(N,T,$,R=q){const{context:D,zip215:U}=R,H=n.BYTES;N=Sc("signature",N,2*H),T=Sc("message",T),$=Sc("publicKey",$,H),U!==void 0&&dI("zip215",U),s&&(T=s(T));const te=P_(N.slice(H,2*H));let oe,re,ie;try{oe=b.fromHex($,U),re=b.fromHex(N.slice(0,H),U),ie=E.multiplyUnsafe(te)}catch{return!1}if(!U&&oe.isSmallOrder())return!1;const ye=P(D,re.toRawBytes(),oe.toRawBytes(),T);return re.add(oe.multiplyUnsafe(ye)).subtract(ie).clearCofactor().equals(b.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:j,verify:B,ExtendedPoint:b,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(N=8,T=b.BASE){return T._setWindowSize(N),T.multiply(BigInt(3)),T}}}}BigInt(0),BigInt(1);const NO=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),P5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ege=BigInt(1),k5=BigInt(2);BigInt(3);const tge=BigInt(5),nge=BigInt(8);function rge(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=NO,o=t*t%i*t%i,a=Na(o,k5,i)*o%i,c=Na(a,ege,i)*t%i,l=Na(c,tge,i)*c%i,u=Na(l,e,i)*l%i,d=Na(u,n,i)*u%i,h=Na(d,r,i)*d%i,f=Na(h,s,i)*h%i,p=Na(f,s,i)*h%i,g=Na(p,e,i)*l%i;return{pow_p_5_8:Na(g,k5,i)*t%i,b2:o}}function sge(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ige(t,e){const n=NO,r=_r(e*e*e,n),s=_r(r*r*e,n),i=rge(t*s).pow_p_5_8;let o=_r(t*r*i,n);const a=_r(e*o*o,n),c=o,l=_r(o*P5,n),u=a===t,d=a===_r(-t,n),h=a===_r(-t*P5,n);return u&&(o=c),(d||h)&&(o=l),Bpe(o,n)&&(o=_r(-o,n)),{isValid:u||d,value:o}}const oge=_7(NO,void 0,!0),age={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:oge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:nge,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Tpe,randomBytes:p7,adjustScalarBytes:sge,uvRatio:ige},S7=Xpe(age),cge="EdDSA",lge="JWT",ME=".",P1="base64url",A7="utf8",I7="utf8",uge=":",dge="did",hge="key",O5="base58btc",fge="z",pge="K36",gge=32;function RO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function x7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?RO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function T7(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=x7(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return RO(n)}function mge(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,g++;for(var b=(v-y)*u+1>>>0,E=new Uint8Array(b);y!==v;){for(var C=p[y],A=0,I=b-1;(C!==0||A<w)&&I!==-1;I--,A++)C+=256*E[I]>>>0,E[I]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=A,y++}for(var x=b-w;x!==b&&E[x]===0;)x++;for(var S=c.repeat(g);x<b;++x)S+=t.charAt(E[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var C=0,A=v-1;(E!==0||C<y)&&A!==-1;A--,C++)E+=a*b[A]>>>0,b[A]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var I=v-y;I!==v&&b[I]===0;)I++;for(var x=new Uint8Array(w+(v-I)),S=w;I!==v;)x[S++]=b[I++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var yge=mge,wge=yge;const N7=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},vge=t=>new TextEncoder().encode(t),bge=t=>new TextDecoder().decode(t);let _ge=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ege=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return R7(this,e)}},Cge=class{constructor(e){this.decoders=e}or(e){return R7(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const R7=(t,e)=>new Cge({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Sge=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new _ge(e,n,r),this.decoder=new Ege(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const k1=({name:t,prefix:e,encode:n,decode:r})=>new Sge(t,e,n,r),wv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=wge(n,e);return k1({prefix:t,name:e,encode:r,decode:i=>N7(s(i))})},Age=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ige=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},cs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>k1({prefix:e,name:t,encode(s){return Ige(s,r,n)},decode(s){return Age(s,r,n,t)}}),xge=k1({prefix:"\0",name:"identity",encode:t=>bge(t),decode:t=>vge(t)});var Tge=Object.freeze({__proto__:null,identity:xge});const Nge=cs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rge=Object.freeze({__proto__:null,base2:Nge});const Pge=cs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var kge=Object.freeze({__proto__:null,base8:Pge});const Oge=wv({prefix:"9",name:"base10",alphabet:"0123456789"});var Dge=Object.freeze({__proto__:null,base10:Oge});const $ge=cs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Mge=cs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lge=Object.freeze({__proto__:null,base16:$ge,base16upper:Mge});const Uge=cs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jge=cs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Bge=cs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Fge=cs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wge=cs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zge=cs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qge=cs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hge=cs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Vge=cs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Gge=Object.freeze({__proto__:null,base32:Uge,base32upper:jge,base32pad:Bge,base32padupper:Fge,base32hex:Wge,base32hexupper:zge,base32hexpad:qge,base32hexpadupper:Hge,base32z:Vge});const Kge=wv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Yge=wv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Qge=Object.freeze({__proto__:null,base36:Kge,base36upper:Yge});const Jge=wv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zge=wv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Xge=Object.freeze({__proto__:null,base58btc:Jge,base58flickr:Zge});const eme=cs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tme=cs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nme=cs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rme=cs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sme=Object.freeze({__proto__:null,base64:eme,base64pad:tme,base64url:nme,base64urlpad:rme});const P7=Array.from(""),ime=P7.reduce((t,e,n)=>(t[n]=e,t),[]),ome=P7.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ame(t){return t.reduce((e,n)=>(e+=ime[n],e),"")}function cme(t){const e=[];for(const n of t){const r=ome[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const lme=k1({prefix:"",name:"base256emoji",encode:ame,decode:cme});var ume=Object.freeze({__proto__:null,base256emoji:lme}),dme=k7,D5=128,hme=-128,fme=Math.pow(2,31);function k7(t,e,n){e=e||[],n=n||0;for(var r=n;t>=fme;)e[n++]=t&255|D5,t/=128;for(;t&hme;)e[n++]=t&255|D5,t>>>=7;return e[n]=t|0,k7.bytes=n-r+1,e}var pme=KN,gme=128,$5=127;function KN(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw KN.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&$5)<<s:(o&$5)*Math.pow(2,s),s+=7}while(o>=gme);return KN.bytes=i-r,n}var mme=Math.pow(2,7),yme=Math.pow(2,14),wme=Math.pow(2,21),vme=Math.pow(2,28),bme=Math.pow(2,35),_me=Math.pow(2,42),Eme=Math.pow(2,49),Cme=Math.pow(2,56),Sme=Math.pow(2,63),Ame=function(t){return t<mme?1:t<yme?2:t<wme?3:t<vme?4:t<bme?5:t<_me?6:t<Eme?7:t<Cme?8:t<Sme?9:10},Ime={encode:dme,decode:pme,encodingLength:Ame},O7=Ime;const M5=(t,e,n=0)=>(O7.encode(t,e,n),e),L5=t=>O7.encodingLength(t),YN=(t,e)=>{const n=e.byteLength,r=L5(t),s=r+L5(n),i=new Uint8Array(s+n);return M5(t,i,0),M5(n,i,r),i.set(e,s),new xme(t,n,e,i)};let xme=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const D7=({name:t,code:e,encode:n})=>new Tme(t,e,n);let Tme=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?YN(this.code,n):n.then(r=>YN(this.code,r))}else throw Error("Unknown type, must be binary type")}};const $7=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Nme=D7({name:"sha2-256",code:18,encode:$7("SHA-256")}),Rme=D7({name:"sha2-512",code:19,encode:$7("SHA-512")});var Pme=Object.freeze({__proto__:null,sha256:Nme,sha512:Rme});const M7=0,kme="identity",L7=N7,Ome=t=>YN(M7,L7(t)),Dme={code:M7,name:kme,encode:L7,digest:Ome};var $me=Object.freeze({__proto__:null,identity:Dme});new TextEncoder,new TextDecoder;const U5={...Tge,...Rge,...kge,...Dge,...Lge,...Gge,...Qge,...Xge,...sme,...ume};({...Pme,...$me});function U7(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const j5=U7("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),yI=U7("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=x7(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),j7={utf8:j5,"utf-8":j5,hex:U5.base16,latin1:yI,ascii:yI,binary:yI,...U5};function O1(t,e="utf8"){const n=j7[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function tm(t,e="utf8"){const n=j7[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?RO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function B5(t){return Rh(O1(tm(t,P1),A7))}function LE(t){return O1(tm(ll(t),A7),P1)}function B7(t){const e=tm(pge,O5),n=fge+O1(T7([e,t]),O5);return[dge,hge,n].join(uge)}function Mme(t){return O1(t,P1)}function Lme(t){return tm(t,P1)}function Ume(t){return tm([LE(t.header),LE(t.payload)].join(ME),I7)}function jme(t){return[LE(t.header),LE(t.payload),Mme(t.signature)].join(ME)}function QN(t){const e=t.split(ME),n=B5(e[0]),r=B5(e[1]),s=Lme(e[2]),i=tm(e.slice(0,2).join(ME),I7);return{header:n,payload:r,signature:s,data:i}}function F5(t=p7(gge)){const e=S7.getPublicKey(t);return{secretKey:T7([t,e]),publicKey:e}}async function Bme(t,e,n,r,s=ve.fromMiliseconds(Date.now())){const i={alg:cge,typ:lge},o=B7(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Ume({header:i,payload:c}),u=S7.sign(l,r.secretKey.slice(0,32));return jme({header:i,payload:c,signature:u})}var W5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Fme=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Wme=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),zme=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),qme=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Hme=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Vme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Gme=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,z5=3,Kme=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Vme]],q5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Yme(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Hme:typeof navigator<"u"?Jme(navigator.userAgent):Xme()}function Qme(t){return t!==""&&Kme.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Jme(t){var e=Qme(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new qme;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<z5&&(s=W5(W5([],s,!0),eye(z5-s.length),!0)):s=[];var i=s.join("."),o=Zme(t),a=Gme.exec(t);return a&&a[1]?new zme(n,i,o,a[1]):new Fme(n,i,o)}function Zme(t){for(var e=0,n=q5.length;e<n;e++){var r=q5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Xme(){var t=typeof process<"u"&&process.version;return t?new Wme(process.version.slice(1)):null}function eye(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.getLocalStorage=Nn.getLocalStorageOrThrow=Nn.getCrypto=Nn.getCryptoOrThrow=F7=Nn.getLocation=Nn.getLocationOrThrow=PO=Nn.getNavigator=Nn.getNavigatorOrThrow=Ph=Nn.getDocument=Nn.getDocumentOrThrow=Nn.getFromWindowOrThrow=Nn.getFromWindow=void 0;function af(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Nn.getFromWindow=af;function nm(t){const e=af(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Nn.getFromWindowOrThrow=nm;function tye(){return nm("document")}Nn.getDocumentOrThrow=tye;function nye(){return af("document")}var Ph=Nn.getDocument=nye;function rye(){return nm("navigator")}Nn.getNavigatorOrThrow=rye;function sye(){return af("navigator")}var PO=Nn.getNavigator=sye;function iye(){return nm("location")}Nn.getLocationOrThrow=iye;function oye(){return af("location")}var F7=Nn.getLocation=oye;function aye(){return nm("crypto")}Nn.getCryptoOrThrow=aye;function cye(){return af("crypto")}Nn.getCrypto=cye;function lye(){return nm("localStorage")}Nn.getLocalStorageOrThrow=lye;function uye(){return af("localStorage")}Nn.getLocalStorage=uye;var kO={};Object.defineProperty(kO,"__esModule",{value:!0});var W7=kO.getWindowMetadata=void 0;const H5=Nn;function dye(){let t,e;try{t=H5.getDocumentOrThrow(),e=H5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const v=e.pathname.split("/");v.pop();const b=v.join("/");y+=b+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}W7=kO.getWindowMetadata=dye;function hye(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let v=l[h],b=0;for(let E=p-1;(v!==0||b<d)&&E!==-1;E--,b++)v+=256*g[E]>>>0,g[E]=v%n>>>0,v=v/n>>>0;if(v!==0)throw new Error("Non-zero carry");d=b,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let b=e[v];if(b===255)return;let E=0;for(let C=f-1;(b!==0||E<h)&&C!==-1;C--,E++)b+=n*p[C]>>>0,p[C]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=E,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var fye="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const z7=hye(fye);function q7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Gy(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=q7(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function pye(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,g++;for(var b=(v-y)*u+1>>>0,E=new Uint8Array(b);y!==v;){for(var C=p[y],A=0,I=b-1;(C!==0||A<w)&&I!==-1;I--,A++)C+=256*E[I]>>>0,E[I]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=A,y++}for(var x=b-w;x!==b&&E[x]===0;)x++;for(var S=c.repeat(g);x<b;++x)S+=t.charAt(E[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var C=0,A=v-1;(E!==0||C<y)&&A!==-1;A--,C++)E+=a*b[A]>>>0,b[A]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var I=v-y;I!==v&&b[I]===0;)I++;for(var x=new Uint8Array(w+(v-I)),S=w;I!==v;)x[S++]=b[I++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var gye=pye,mye=gye;const yye=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},wye=t=>new TextEncoder().encode(t),vye=t=>new TextDecoder().decode(t);class bye{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _ye{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return H7(this,e)}}class Eye{constructor(e){this.decoders=e}or(e){return H7(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const H7=(t,e)=>new Eye({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Cye{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new bye(e,n,r),this.decoder=new _ye(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const D1=({name:t,prefix:e,encode:n,decode:r})=>new Cye(t,e,n,r),vv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=mye(n,e);return D1({prefix:t,name:e,encode:r,decode:i=>yye(s(i))})},Sye=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Aye=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ls=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>D1({prefix:e,name:t,encode(s){return Aye(s,r,n)},decode(s){return Sye(s,r,n,t)}}),Iye=D1({prefix:"\0",name:"identity",encode:t=>vye(t),decode:t=>wye(t)}),xye=Object.freeze(Object.defineProperty({__proto__:null,identity:Iye},Symbol.toStringTag,{value:"Module"})),Tye=ls({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Nye=Object.freeze(Object.defineProperty({__proto__:null,base2:Tye},Symbol.toStringTag,{value:"Module"})),Rye=ls({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Pye=Object.freeze(Object.defineProperty({__proto__:null,base8:Rye},Symbol.toStringTag,{value:"Module"})),kye=vv({prefix:"9",name:"base10",alphabet:"0123456789"}),Oye=Object.freeze(Object.defineProperty({__proto__:null,base10:kye},Symbol.toStringTag,{value:"Module"})),Dye=ls({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$ye=ls({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Mye=Object.freeze(Object.defineProperty({__proto__:null,base16:Dye,base16upper:$ye},Symbol.toStringTag,{value:"Module"})),Lye=ls({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Uye=ls({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jye=ls({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bye=ls({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fye=ls({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wye=ls({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zye=ls({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qye=ls({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hye=ls({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Vye=Object.freeze(Object.defineProperty({__proto__:null,base32:Lye,base32hex:Fye,base32hexpad:zye,base32hexpadupper:qye,base32hexupper:Wye,base32pad:jye,base32padupper:Bye,base32upper:Uye,base32z:Hye},Symbol.toStringTag,{value:"Module"})),Gye=vv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Kye=vv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Yye=Object.freeze(Object.defineProperty({__proto__:null,base36:Gye,base36upper:Kye},Symbol.toStringTag,{value:"Module"})),Qye=vv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Jye=vv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Zye=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Qye,base58flickr:Jye},Symbol.toStringTag,{value:"Module"})),Xye=ls({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ewe=ls({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),twe=ls({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nwe=ls({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rwe=Object.freeze(Object.defineProperty({__proto__:null,base64:Xye,base64pad:ewe,base64url:twe,base64urlpad:nwe},Symbol.toStringTag,{value:"Module"})),V7=Array.from(""),swe=V7.reduce((t,e,n)=>(t[n]=e,t),[]),iwe=V7.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function owe(t){return t.reduce((e,n)=>(e+=swe[n],e),"")}function awe(t){const e=[];for(const n of t){const r=iwe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const cwe=D1({prefix:"",name:"base256emoji",encode:owe,decode:awe}),lwe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:cwe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const V5={...xye,...Nye,...Pye,...Oye,...Mye,...Vye,...Yye,...Zye,...rwe,...lwe};function G7(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const G5=G7("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),wI=G7("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=q7(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),K7={utf8:G5,"utf-8":G5,hex:V5.base16,latin1:wI,ascii:wI,binary:wI,...V5};function _o(t,e="utf8"){const n=K7[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function vi(t,e="utf8"){const n=K7[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const uwe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},dwe="PARSE_ERROR",hwe="INVALID_REQUEST",fwe="METHOD_NOT_FOUND",pwe="INVALID_PARAMS",Y7="INTERNAL_ERROR",OO="SERVER_ERROR",gwe=[-32700,-32600,-32601,-32602,-32603],Ky={[dwe]:{code:-32700,message:"Parse error"},[hwe]:{code:-32600,message:"Invalid Request"},[fwe]:{code:-32601,message:"Method not found"},[pwe]:{code:-32602,message:"Invalid params"},[Y7]:{code:-32603,message:"Internal error"},[OO]:{code:-32e3,message:"Server error"}},Q7=OO;function mwe(t){return gwe.includes(t)}function K5(t){return Object.keys(Ky).includes(t)?Ky[t]:Ky[Q7]}function ywe(t){const e=Object.values(Ky).find(n=>n.code===t);return e||Ky[Q7]}function J7(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Z7={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var JN=function(t,e){return JN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},JN(t,e)};function wwe(t,e){JN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ZN=function(){return ZN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ZN.apply(this,arguments)};function vwe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bwe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function _we(t,e){return function(n,r){e(n,r,t)}}function Ewe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Cwe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Swe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Awe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Iwe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function XN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function X7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function xwe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(X7(arguments[e]));return t}function Twe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function r0(t){return this instanceof r0?(this.v=t,this):new r0(t)}function Nwe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof r0?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Rwe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:r0(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Pwe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof XN=="function"?XN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function kwe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Owe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Dwe(t){return t&&t.__esModule?t:{default:t}}function $we(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Mwe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Lwe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ZN},__asyncDelegator:Rwe,__asyncGenerator:Nwe,__asyncValues:Pwe,__await:r0,__awaiter:Cwe,__classPrivateFieldGet:$we,__classPrivateFieldSet:Mwe,__createBinding:Awe,__decorate:bwe,__exportStar:Iwe,__extends:wwe,__generator:Swe,__importDefault:Dwe,__importStar:Owe,__makeTemplateObject:kwe,__metadata:Ewe,__param:_we,__read:X7,__rest:vwe,__spread:xwe,__spreadArrays:Twe,__values:XN},Symbol.toStringTag,{value:"Module"})),Uwe=gP(Lwe);var Ac={},Y5;function jwe(){if(Y5)return Ac;Y5=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.isBrowserCryptoAvailable=Ac.getSubtleCrypto=Ac.getBrowerCrypto=void 0;function t(){return(nr==null?void 0:nr.crypto)||(nr==null?void 0:nr.msCrypto)||{}}Ac.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Ac.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Ac.isBrowserCryptoAvailable=n,Ac}var Ic={},Q5;function Bwe(){if(Q5)return Ic;Q5=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.isBrowser=Ic.isNode=Ic.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ic.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Ic.isNode=e;function n(){return!t()&&!e()}return Ic.isBrowser=n,Ic}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Uwe;e.__exportStar(jwe(),t),e.__exportStar(Bwe(),t)})(Z7);function Ma(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Hd(t=6){return BigInt(Ma(t))}function hu(t,e,n){return{id:n||Ma(),jsonrpc:"2.0",method:t,params:e}}function $1(t,e){return{id:t,jsonrpc:"2.0",result:e}}function M1(t,e,n){return{id:t,jsonrpc:"2.0",error:Fwe(e)}}function Fwe(t,e){return typeof t>"u"?K5(Y7):(typeof t=="string"&&(t=Object.assign(Object.assign({},K5(OO)),{message:t})),mwe(t.code)&&(t=ywe(t.code)),t)}let Wwe=class{},zwe=class extends Wwe{constructor(){super()}},qwe=class extends zwe{constructor(e){super()}};const Hwe="^https?:",Vwe="^wss?:";function Gwe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function ez(t,e){const n=Gwe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function J5(t){return ez(t,Hwe)}function Z5(t){return ez(t,Vwe)}function Kwe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function tz(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function DO(t){return tz(t)&&"method"in t}function L1(t){return tz(t)&&(La(t)||go(t))}function La(t){return"result"in t}function go(t){return"error"in t}let Do=class extends qwe{constructor(e){super(e),this.events=new Oo.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(hu(e.method,e.params||[],e.id||Hd().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{go(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),L1(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Ywe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Qwe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",X5=t=>t.split("?")[0],eM=10,Jwe=Ywe();let Zwe=class{constructor(e){if(this.url=e,this.events=new Oo.EventEmitter,this.registering=!1,!Z5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ll(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Z5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=Z7.isReactNative()?void 0:{rejectUnauthorized:!Kwe(e)},i=new Jwe(e,[],s);Qwe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Rh(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=M1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return J7(e,X5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>eM&&this.events.setMaxListeners(eM)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${X5(this.url)}`));return this.events.emit("register_error",n),n}};var eR={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof nr<"u"&&nr,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof nr<"u"&&nr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(N){return N&&DataView.prototype.isPrototypeOf(N)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(N){return N&&u.indexOf(Object.prototype.toString.call(N))>-1};function h(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function f(N){return typeof N!="string"&&(N=String(N)),N}function p(N){var T={next:function(){var $=N.shift();return{done:$===void 0,value:$}}};return c.iterable&&(T[Symbol.iterator]=function(){return T}),T}function g(N){this.map={},N instanceof g?N.forEach(function(T,$){this.append($,T)},this):Array.isArray(N)?N.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(T){this.append(T,N[T])},this)}g.prototype.append=function(N,T){N=h(N),T=f(T);var $=this.map[N];this.map[N]=$?$+", "+T:T},g.prototype.delete=function(N){delete this.map[h(N)]},g.prototype.get=function(N){return N=h(N),this.has(N)?this.map[N]:null},g.prototype.has=function(N){return this.map.hasOwnProperty(h(N))},g.prototype.set=function(N,T){this.map[h(N)]=f(T)},g.prototype.forEach=function(N,T){for(var $ in this.map)this.map.hasOwnProperty($)&&N.call(T,this.map[$],$,this)},g.prototype.keys=function(){var N=[];return this.forEach(function(T,$){N.push($)}),p(N)},g.prototype.values=function(){var N=[];return this.forEach(function(T){N.push(T)}),p(N)},g.prototype.entries=function(){var N=[];return this.forEach(function(T,$){N.push([$,T])}),p(N)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function y(N){return new Promise(function(T,$){N.onload=function(){T(N.result)},N.onerror=function(){$(N.error)}})}function v(N){var T=new FileReader,$=y(T);return T.readAsArrayBuffer(N),$}function b(N){var T=new FileReader,$=y(T),R=/charset=([A-Za-z0-9_-]+)/.exec(N.type),D=R?R[1]:"utf-8";return T.readAsText(N,D),$}function E(N){for(var T=new Uint8Array(N),$=new Array(T.length),R=0;R<T.length;R++)$[R]=String.fromCharCode(T[R]);return $.join("")}function C(N){if(N.slice)return N.slice(0);var T=new Uint8Array(N.byteLength);return T.set(new Uint8Array(N)),T.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:c.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:c.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():c.arrayBuffer&&c.blob&&l(N)?(this._bodyArrayBuffer=C(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||d(N))?this._bodyArrayBuffer=C(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=w(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function x(N){var T=N.toUpperCase();return I.indexOf(T)>-1?T:N}function S(N,T){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var $=T.body;if(N instanceof S){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,T.headers||(this.headers=new g(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!$&&N._bodyInit!=null&&($=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new g(T.headers)),this.method=x(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function O(N){var T=new FormData;return N.trim().split("&").forEach(function($){if($){var R=$.split("="),D=R.shift().replace(/\+/g," "),U=R.join("=").replace(/\+/g," ");T.append(decodeURIComponent(D),decodeURIComponent(U))}}),T}function P(N){var T=new g,$=N.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var D=R.split(":"),U=D.shift().trim();if(U){var H=D.join(":").trim();try{T.append(U,H)}catch(te){console.warn("Response "+te.message)}}}),T}A.call(S.prototype);function j(N,T){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new g(T.headers),this.url=T.url||"",this._initBody(N)}A.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var N=new j(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var q=[301,302,303,307,308];j.redirect=function(N,T){if(q.indexOf(T)===-1)throw new RangeError("Invalid status code");return new j(null,{status:T,headers:{location:N}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,$){this.message=T,this.name=$;var R=Error(T);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(N,T){return new Promise(function($,R){var D=new S(N,T);if(D.signal&&D.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function H(){U.abort()}U.onload=function(){var re={statusText:U.statusText,headers:P(U.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(U.status<200||U.status>599)?re.status=200:re.status=U.status,re.url="responseURL"in U?U.responseURL:re.headers.get("X-Request-URL");var ie="response"in U?U.response:U.responseText;setTimeout(function(){$(new j(ie,re))},0)},U.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function te(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(U.open(D.method,te(D.url),!0),D.credentials==="include"?U.withCredentials=!0:D.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof g||a.Headers&&T.headers instanceof a.Headers)){var oe=[];Object.getOwnPropertyNames(T.headers).forEach(function(re){oe.push(h(re)),U.setRequestHeader(re,f(T.headers[re]))}),D.headers.forEach(function(re,ie){oe.indexOf(ie)===-1&&U.setRequestHeader(ie,re)})}else D.headers.forEach(function(re,ie){U.setRequestHeader(ie,re)});D.signal&&(D.signal.addEventListener("abort",H),U.onreadystatechange=function(){U.readyState===4&&D.signal.removeEventListener("abort",H)}),U.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=S,a.Response=j),o.Headers=g,o.Request=S,o.Response=j,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(eR,eR.exports);var Xwe=eR.exports;const tM=qh(Xwe);var e0e=Object.defineProperty,t0e=Object.defineProperties,n0e=Object.getOwnPropertyDescriptors,nM=Object.getOwnPropertySymbols,r0e=Object.prototype.hasOwnProperty,s0e=Object.prototype.propertyIsEnumerable,rM=(t,e,n)=>e in t?e0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sM=(t,e)=>{for(var n in e||(e={}))r0e.call(e,n)&&rM(t,n,e[n]);if(nM)for(var n of nM(e))s0e.call(e,n)&&rM(t,n,e[n]);return t},iM=(t,e)=>t0e(t,n0e(e));const i0e={Accept:"application/json","Content-Type":"application/json"},o0e="POST",oM={headers:i0e,method:o0e},aM=10;let _a=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Oo.EventEmitter,this.isAvailable=!1,this.registering=!1,!J5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ll(e),r=await(await tM(this.url,iM(sM({},oM),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!J5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ll({id:1,jsonrpc:"2.0",method:"test",params:[]});await tM(e,iM(sM({},oM),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Rh(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=M1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return J7(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>aM&&this.events.setMaxListeners(aM)}};const Yy={getSIWX(){return pe.state.siwx},async initializeIfEnabled(){var i;const t=pe.state.siwx,e=L.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(L.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Fr.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=it._getClient())==null?void 0:i.disconnect().catch(console.error)),At.reset("Connect"),sa.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=pe.state.siwx,e=Ye.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork(),r=it._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Re.getConnectorId(n.chainNamespace)===Pe.CONNECTOR_ID.AUTH&&At.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Fr.close(),zn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Fr.state.open||At.state.view==="ApproveTransaction")&&await Fr.open({view:"SIWXSignMessage"}),i.isSmartAccount?sa.showError("This application might not support Smart Accounts"):sa.showError("Signature declined"),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await it.disconnect():Fr.close(),At.reset("Connect"),zn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=pe.state.siwx,e=Ye.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=At.state.view==="ApproveTransaction",r=At.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Yy.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=L.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(sa.showLoading("Authenticating...",{autoClose:!1}),Ue.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),zn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Yy.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Yy.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{sa.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=L.state.activeChain;return{network:((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ue.state.preferredAccountTypes)==null?void 0:n[t])===ss.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function Mb(t,e){return Re.getConnectorId(t)===e}function a0e(t){const e=Array.from(L.state.chains.keys());let n=[];return t?(n.push([t,L.state.chains.get(t)]),Mb(t,Pe.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Mb(r,Pe.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,L.state.chains.get(r)])}):Mb(t,Pe.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Mb(r,Pe.CONNECTOR_ID.AUTH)&&n.push([r,L.state.chains.get(r)])})):n=Array.from(L.state.chains.entries()),n}const ai={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},UE={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Pe.CONNECTOR_ID.COINBASE]:"Coinbase",[Pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Pe.CONNECTOR_ID.LEDGER]:"Ledger",[Pe.CONNECTOR_ID.SAFE]:"Safe"}},U1={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${ai.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},c0e=new AbortController,Wa={EmbeddedWalletAbortController:c0e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${l0e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function l0e(){return typeof window<"u"}const u0e={createLogger(t,e="error"){const n=of({level:e}),{logger:r}=R1({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},d0e="rpc.walletconnect.org";function cM(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const vI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],rp={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===d0e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return vI.includes(e)?cM(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:UE.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>rp.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(uu(a.url,a.config))}),vI.includes(t.caipNetworkId)&&r.push(uu(cM(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(uu(a))}),TE(r)},extendWagmiTransports(t,e,n){if(vI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return TE([n,uu(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=je.getActiveCaipNetworkId(),n=L.getAllRequestedCaipNetworks(),r=Array.from(((c=L.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},jE={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ys=Un({providers:{...jE},providerIds:{...jE}}),fn={state:Ys,subscribeKey(t,e){return Cs(Ys,t,e)},subscribe(t){return _s(Ys,()=>{t(Ys)})},subscribeProviders(t){return _s(Ys.providers,()=>t(Ys.providers))},setProvider(t,e){e&&(Ys.providers[t]=Th(e))},getProvider(t){return Ys.providers[t]},setProviderId(t,e){e&&(Ys.providerIds[t]=e)},getProviderId(t){if(t)return Ys.providerIds[t]},reset(){Ys.providers={...jE},Ys.providerIds={...jE}},resetChain(t){Ys.providers[t]=void 0,Ys.providerIds[t]=void 0}},lM={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Zr={set(t,e){Bi.isClient&&localStorage.setItem(`${Me.STORAGE_KEY}${t}`,e)},get(t){return Bi.isClient?localStorage.getItem(`${Me.STORAGE_KEY}${t}`):null},delete(t,e){Bi.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Me.STORAGE_KEY}${t}`))}},Lb=30*1e3,Bi={checkIfAllowedToTriggerEmail(){const t=Zr.get(Me.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Lb){const n=Math.ceil((Lb-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Zr.get(Me.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Lb)return Math.ceil((Lb-e)/1e3)}return 0},checkIfRequestExists(t){return ss.NOT_SAFE_RPC_METHODS.includes(t.method)||ss.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(lM.transactionHash))||(t==null?void 0:t.match(lM.signedMessage)))?Me.RPC_RESPONSE_TYPE_TX:Me.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return ss.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Vt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Vt||(Vt={}));var tR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(tR||(tR={}));const xe=Vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Kl=t=>{switch(typeof t){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return isNaN(t)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(t)?xe.array:t===null?xe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xe.promise:typeof Map<"u"&&t instanceof Map?xe.map:typeof Set<"u"&&t instanceof Set?xe.set:typeof Date<"u"&&t instanceof Date?xe.date:xe.object;default:return xe.unknown}},me=Vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),h0e=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ha extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ha.create=t=>new ha(t);const s0=(t,e)=>{let n;switch(t.code){case me.invalid_type:t.received===xe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Vt.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:n=`Unrecognized key(s) in object: ${Vt.joinValues(t.keys,", ")}`;break;case me.invalid_union:n="Invalid input";break;case me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Vt.joinValues(t.options)}`;break;case me.invalid_enum_value:n=`Invalid enum value. Expected ${Vt.joinValues(t.options)}, received '${t.received}'`;break;case me.invalid_arguments:n="Invalid function arguments";break;case me.invalid_return_type:n="Invalid function return type";break;case me.invalid_date:n="Invalid date";break;case me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Vt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case me.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case me.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case me.custom:n="Invalid input";break;case me.invalid_intersection_types:n="Intersection results could not be merged";break;case me.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case me.not_finite:n="Number must be finite";break;default:n=e.defaultError,Vt.assertNever(t)}return{message:n}};let nz=s0;function f0e(t){nz=t}function BE(){return nz}const FE=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},p0e=[];function De(t,e){const n=FE({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,BE(),s0].filter(r=>!!r)});t.common.issues.push(n)}class Es{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return mt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Es.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return mt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const mt=Object.freeze({status:"aborted"}),rz=t=>({status:"dirty",value:t}),js=t=>({status:"valid",value:t}),nR=t=>t.status==="aborted",rR=t=>t.status==="dirty",i0=t=>t.status==="valid",WE=t=>typeof Promise<"u"&&t instanceof Promise;var Ze;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ze||(Ze={}));class cc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uM=(t,e)=>{if(i0(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ha(t.common.issues);return this._error=n,this._error}}};function Et(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class It{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Kl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Kl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Es,ctx:{common:e.parent.common,data:e.data,parsedType:Kl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(WE(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kl(e)},i=this._parseSync({data:e,path:s.path,parent:s});return uM(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kl(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(WE(s)?s:Promise.resolve(s));return uM(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:me.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new va({schema:this,typeName:lt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Jc.create(this,this._def)}nullable(){return Dh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fa.create(this,this._def)}promise(){return Cg.create(this,this._def)}or(e){return l0.create([this,e],this._def)}and(e){return u0.create(this,e,this._def)}transform(e){return new va({...Et(this._def),schema:this,typeName:lt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new g0({...Et(this._def),innerType:this,defaultValue:n,typeName:lt.ZodDefault})}brand(){return new iz({typeName:lt.ZodBranded,type:this,...Et(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new VE({...Et(this._def),innerType:this,catchValue:n,typeName:lt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return bv.create(this,e)}readonly(){return KE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const g0e=/^c[^\s-]{8,}$/i,m0e=/^[a-z][a-z0-9]*$/,y0e=/^[0-9A-HJKMNP-TV-Z]{26}$/,w0e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v0e=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,b0e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let bI;const _0e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,E0e=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,C0e=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function S0e(t,e){return!!((e==="v4"||!e)&&_0e.test(t)||(e==="v6"||!e)&&E0e.test(t))}class oa extends It{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){const i=this._getOrReturnCtx(e);return De(i,{code:me.invalid_type,expected:xe.string,received:i.parsedType}),mt}const r=new Es;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?De(s,{code:me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&De(s,{code:me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")v0e.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"email",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")bI||(bI=new RegExp(b0e,"u")),bI.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"emoji",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")w0e.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"uuid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")g0e.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"cuid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")m0e.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"cuid2",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")y0e.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"ulid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),De(s,{validation:"url",code:me.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"regex",code:me.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),De(s,{code:me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),De(s,{code:me.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),De(s,{code:me.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?C0e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{code:me.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?S0e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"ip",code:me.invalid_string,message:i.message}),r.dirty()):Vt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:me.invalid_string,...Ze.errToObj(r)})}_addCheck(e){return new oa({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ze.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ze.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ze.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ze.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ze.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ze.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ze.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ze.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ze.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ze.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ze.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ze.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ze.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ze.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ze.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ze.errToObj(n)})}nonempty(e){return this.min(1,Ze.errToObj(e))}trim(){return new oa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new oa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new oa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}oa.create=t=>{var e;return new oa({checks:[],typeName:lt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};function A0e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Hu extends It{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){const i=this._getOrReturnCtx(e);return De(i,{code:me.invalid_type,expected:xe.number,received:i.parsedType}),mt}let r;const s=new Es;for(const i of this._def.checks)i.kind==="int"?Vt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:me.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?A0e(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),De(r,{code:me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:me.not_finite,message:i.message}),s.dirty()):Vt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ze.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ze.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ze.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ze.toString(n))}setLimit(e,n,r,s){return new Hu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ze.toString(s)}]})}_addCheck(e){return new Hu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ze.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ze.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ze.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ze.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ze.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ze.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Vt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Hu.create=t=>new Hu({checks:[],typeName:lt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class Vu extends It{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==xe.bigint){const i=this._getOrReturnCtx(e);return De(i,{code:me.invalid_type,expected:xe.bigint,received:i.parsedType}),mt}let r;const s=new Es;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),De(r,{code:me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Vt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ze.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ze.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ze.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ze.toString(n))}setLimit(e,n,r,s){return new Vu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ze.toString(s)}]})}_addCheck(e){return new Vu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ze.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ze.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Vu.create=t=>{var e;return new Vu({checks:[],typeName:lt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};class o0 extends It{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){const r=this._getOrReturnCtx(e);return De(r,{code:me.invalid_type,expected:xe.boolean,received:r.parsedType}),mt}return js(e.data)}}o0.create=t=>new o0({typeName:lt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class kh extends It{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){const i=this._getOrReturnCtx(e);return De(i,{code:me.invalid_type,expected:xe.date,received:i.parsedType}),mt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return De(i,{code:me.invalid_date}),mt}const r=new Es;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Vt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new kh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ze.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ze.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}kh.create=t=>new kh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:lt.ZodDate,...Et(t)});class zE extends It{_parse(e){if(this._getType(e)!==xe.symbol){const r=this._getOrReturnCtx(e);return De(r,{code:me.invalid_type,expected:xe.symbol,received:r.parsedType}),mt}return js(e.data)}}zE.create=t=>new zE({typeName:lt.ZodSymbol,...Et(t)});class a0 extends It{_parse(e){if(this._getType(e)!==xe.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:me.invalid_type,expected:xe.undefined,received:r.parsedType}),mt}return js(e.data)}}a0.create=t=>new a0({typeName:lt.ZodUndefined,...Et(t)});class c0 extends It{_parse(e){if(this._getType(e)!==xe.null){const r=this._getOrReturnCtx(e);return De(r,{code:me.invalid_type,expected:xe.null,received:r.parsedType}),mt}return js(e.data)}}c0.create=t=>new c0({typeName:lt.ZodNull,...Et(t)});class Eg extends It{constructor(){super(...arguments),this._any=!0}_parse(e){return js(e.data)}}Eg.create=t=>new Eg({typeName:lt.ZodAny,...Et(t)});class lh extends It{constructor(){super(...arguments),this._unknown=!0}_parse(e){return js(e.data)}}lh.create=t=>new lh({typeName:lt.ZodUnknown,...Et(t)});class ul extends It{_parse(e){const n=this._getOrReturnCtx(e);return De(n,{code:me.invalid_type,expected:xe.never,received:n.parsedType}),mt}}ul.create=t=>new ul({typeName:lt.ZodNever,...Et(t)});class qE extends It{_parse(e){if(this._getType(e)!==xe.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:me.invalid_type,expected:xe.void,received:r.parsedType}),mt}return js(e.data)}}qE.create=t=>new qE({typeName:lt.ZodVoid,...Et(t)});class fa extends It{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==xe.array)return De(n,{code:me.invalid_type,expected:xe.array,received:n.parsedType}),mt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(De(n,{code:o?me.too_big:me.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(De(n,{code:me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(De(n,{code:me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new cc(n,o,n.path,a)))).then(o=>Es.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new cc(n,o,n.path,a)));return Es.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new fa({...this._def,minLength:{value:e,message:Ze.toString(n)}})}max(e,n){return new fa({...this._def,maxLength:{value:e,message:Ze.toString(n)}})}length(e,n){return new fa({...this._def,exactLength:{value:e,message:Ze.toString(n)}})}nonempty(e){return this.min(1,e)}}fa.create=(t,e)=>new fa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:lt.ZodArray,...Et(e)});function sp(t){if(t instanceof Hn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Jc.create(sp(r))}return new Hn({...t._def,shape:()=>e})}else return t instanceof fa?new fa({...t._def,type:sp(t.element)}):t instanceof Jc?Jc.create(sp(t.unwrap())):t instanceof Dh?Dh.create(sp(t.unwrap())):t instanceof lc?lc.create(t.items.map(e=>sp(e))):t}class Hn extends It{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Vt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==xe.object){const l=this._getOrReturnCtx(e);return De(l,{code:me.invalid_type,expected:xe.object,received:l.parsedType}),mt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ul&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new cc(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ul){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(De(s,{code:me.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new cc(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Es.mergeObjectSync(r,l)):Es.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ze.errToObj,new Hn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ze.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Hn({...this._def,unknownKeys:"strip"})}passthrough(){return new Hn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Hn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Hn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:lt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Hn({...this._def,catchall:e})}pick(e){const n={};return Vt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Hn({...this._def,shape:()=>n})}omit(e){const n={};return Vt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Hn({...this._def,shape:()=>n})}deepPartial(){return sp(this)}partial(e){const n={};return Vt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Hn({...this._def,shape:()=>n})}required(e){const n={};return Vt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Jc;)i=i._def.innerType;n[r]=i}}),new Hn({...this._def,shape:()=>n})}keyof(){return sz(Vt.objectKeys(this.shape))}}Hn.create=(t,e)=>new Hn({shape:()=>t,unknownKeys:"strip",catchall:ul.create(),typeName:lt.ZodObject,...Et(e)});Hn.strictCreate=(t,e)=>new Hn({shape:()=>t,unknownKeys:"strict",catchall:ul.create(),typeName:lt.ZodObject,...Et(e)});Hn.lazycreate=(t,e)=>new Hn({shape:t,unknownKeys:"strip",catchall:ul.create(),typeName:lt.ZodObject,...Et(e)});class l0 extends It{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ha(a.ctx.common.issues));return De(n,{code:me.invalid_union,unionErrors:o}),mt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ha(c));return De(n,{code:me.invalid_union,unionErrors:a}),mt}}get options(){return this._def.options}}l0.create=(t,e)=>new l0({options:t,typeName:lt.ZodUnion,...Et(e)});const k_=t=>t instanceof h0?k_(t.schema):t instanceof va?k_(t.innerType()):t instanceof f0?[t.value]:t instanceof Gu?t.options:t instanceof p0?Object.keys(t.enum):t instanceof g0?k_(t._def.innerType):t instanceof a0?[void 0]:t instanceof c0?[null]:null;class j1 extends It{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.object)return De(n,{code:me.invalid_type,expected:xe.object,received:n.parsedType}),mt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(De(n,{code:me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=k_(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new j1({typeName:lt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Et(r)})}}function sR(t,e){const n=Kl(t),r=Kl(e);if(t===e)return{valid:!0,data:t};if(n===xe.object&&r===xe.object){const s=Vt.objectKeys(e),i=Vt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=sR(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===xe.array&&r===xe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=sR(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===xe.date&&r===xe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class u0 extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(nR(i)||nR(o))return mt;const a=sR(i.value,o.value);return a.valid?((rR(i)||rR(o))&&n.dirty(),{status:n.value,value:a.data}):(De(r,{code:me.invalid_intersection_types}),mt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}u0.create=(t,e,n)=>new u0({left:t,right:e,typeName:lt.ZodIntersection,...Et(n)});class lc extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.array)return De(r,{code:me.invalid_type,expected:xe.array,received:r.parsedType}),mt;if(r.data.length<this._def.items.length)return De(r,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&r.data.length>this._def.items.length&&(De(r,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new cc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Es.mergeArray(n,o)):Es.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new lc({...this._def,rest:e})}}lc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lc({items:t,typeName:lt.ZodTuple,rest:null,...Et(e)})};class d0 extends It{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.object)return De(r,{code:me.invalid_type,expected:xe.object,received:r.parsedType}),mt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new cc(r,a,r.path,a)),value:o._parse(new cc(r,r.data[a],r.path,a))});return r.common.async?Es.mergeObjectAsync(n,s):Es.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof It?new d0({keyType:e,valueType:n,typeName:lt.ZodRecord,...Et(r)}):new d0({keyType:oa.create(),valueType:e,typeName:lt.ZodRecord,...Et(n)})}}class HE extends It{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.map)return De(r,{code:me.invalid_type,expected:xe.map,received:r.parsedType}),mt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new cc(r,a,r.path,[l,"key"])),value:i._parse(new cc(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}HE.create=(t,e,n)=>new HE({valueType:e,keyType:t,typeName:lt.ZodMap,...Et(n)});class Oh extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.set)return De(r,{code:me.invalid_type,expected:xe.set,received:r.parsedType}),mt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(De(r,{code:me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(De(r,{code:me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return mt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new cc(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Oh({...this._def,minSize:{value:e,message:Ze.toString(n)}})}max(e,n){return new Oh({...this._def,maxSize:{value:e,message:Ze.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Oh.create=(t,e)=>new Oh({valueType:t,minSize:null,maxSize:null,typeName:lt.ZodSet,...Et(e)});class Lp extends It{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.function)return De(n,{code:me.invalid_type,expected:xe.function,received:n.parsedType}),mt;function r(a,c){return FE({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,BE(),s0].filter(l=>!!l),issueData:{code:me.invalid_arguments,argumentsError:c}})}function s(a,c){return FE({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,BE(),s0].filter(l=>!!l),issueData:{code:me.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Cg){const a=this;return js(async function(...c){const l=new ha([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return js(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new ha([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new ha([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Lp({...this._def,args:lc.create(e).rest(lh.create())})}returns(e){return new Lp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Lp({args:e||lc.create([]).rest(lh.create()),returns:n||lh.create(),typeName:lt.ZodFunction,...Et(r)})}}class h0 extends It{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}h0.create=(t,e)=>new h0({getter:t,typeName:lt.ZodLazy,...Et(e)});class f0 extends It{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return De(n,{received:n.data,code:me.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:e.data}}get value(){return this._def.value}}f0.create=(t,e)=>new f0({value:t,typeName:lt.ZodLiteral,...Et(e)});function sz(t,e){return new Gu({values:t,typeName:lt.ZodEnum,...Et(e)})}class Gu extends It{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{expected:Vt.joinValues(r),received:n.parsedType,code:me.invalid_type}),mt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{received:n.data,code:me.invalid_enum_value,options:r}),mt}return js(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Gu.create(e)}exclude(e){return Gu.create(this.options.filter(n=>!e.includes(n)))}}Gu.create=sz;class p0 extends It{_parse(e){const n=Vt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==xe.string&&r.parsedType!==xe.number){const s=Vt.objectValues(n);return De(r,{expected:Vt.joinValues(s),received:r.parsedType,code:me.invalid_type}),mt}if(n.indexOf(e.data)===-1){const s=Vt.objectValues(n);return De(r,{received:r.data,code:me.invalid_enum_value,options:s}),mt}return js(e.data)}get enum(){return this._def.values}}p0.create=(t,e)=>new p0({values:t,typeName:lt.ZodNativeEnum,...Et(e)});class Cg extends It{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.promise&&n.common.async===!1)return De(n,{code:me.invalid_type,expected:xe.promise,received:n.parsedType}),mt;const r=n.parsedType===xe.promise?n.data:Promise.resolve(n.data);return js(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Cg.create=(t,e)=>new Cg({type:t,typeName:lt.ZodPromise,...Et(e)});class va extends It{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{De(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!i0(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>i0(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Vt.assertNever(s)}}va.create=(t,e,n)=>new va({schema:t,typeName:lt.ZodEffects,effect:e,...Et(n)});va.createWithPreprocess=(t,e,n)=>new va({schema:e,effect:{type:"preprocess",transform:t},typeName:lt.ZodEffects,...Et(n)});class Jc extends It{_parse(e){return this._getType(e)===xe.undefined?js(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Jc.create=(t,e)=>new Jc({innerType:t,typeName:lt.ZodOptional,...Et(e)});class Dh extends It{_parse(e){return this._getType(e)===xe.null?js(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Dh.create=(t,e)=>new Dh({innerType:t,typeName:lt.ZodNullable,...Et(e)});class g0 extends It{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===xe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}g0.create=(t,e)=>new g0({innerType:t,typeName:lt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Et(e)});class VE extends It{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return WE(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ha(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ha(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}VE.create=(t,e)=>new VE({innerType:t,typeName:lt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Et(e)});class GE extends It{_parse(e){if(this._getType(e)!==xe.nan){const r=this._getOrReturnCtx(e);return De(r,{code:me.invalid_type,expected:xe.nan,received:r.parsedType}),mt}return{status:"valid",value:e.data}}}GE.create=t=>new GE({typeName:lt.ZodNaN,...Et(t)});const I0e=Symbol("zod_brand");class iz extends It{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class bv extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?mt:i.status==="dirty"?(n.dirty(),rz(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?mt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new bv({in:e,out:n,typeName:lt.ZodPipeline})}}class KE extends It{_parse(e){const n=this._def.innerType._parse(e);return i0(n)&&(n.value=Object.freeze(n.value)),n}}KE.create=(t,e)=>new KE({innerType:t,typeName:lt.ZodReadonly,...Et(e)});const oz=(t,e={},n)=>t?Eg.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Eg.create(),x0e={object:Hn.lazycreate};var lt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(lt||(lt={}));const T0e=(t,e={message:`Input not instance of ${t.name}`})=>oz(n=>n instanceof t,e),az=oa.create,cz=Hu.create,N0e=GE.create,R0e=Vu.create,lz=o0.create,P0e=kh.create,k0e=zE.create,O0e=a0.create,D0e=c0.create,$0e=Eg.create,M0e=lh.create,L0e=ul.create,U0e=qE.create,j0e=fa.create,B0e=Hn.create,F0e=Hn.strictCreate,W0e=l0.create,z0e=j1.create,q0e=u0.create,H0e=lc.create,V0e=d0.create,G0e=HE.create,K0e=Oh.create,Y0e=Lp.create,Q0e=h0.create,J0e=f0.create,Z0e=Gu.create,X0e=p0.create,eve=Cg.create,dM=va.create,tve=Jc.create,nve=Dh.create,rve=va.createWithPreprocess,sve=bv.create,ive=()=>az().optional(),ove=()=>cz().optional(),ave=()=>lz().optional(),cve={string:t=>oa.create({...t,coerce:!0}),number:t=>Hu.create({...t,coerce:!0}),boolean:t=>o0.create({...t,coerce:!0}),bigint:t=>Vu.create({...t,coerce:!0}),date:t=>kh.create({...t,coerce:!0})},lve=mt;var _=Object.freeze({__proto__:null,defaultErrorMap:s0,setErrorMap:f0e,getErrorMap:BE,makeIssue:FE,EMPTY_PATH:p0e,addIssueToContext:De,ParseStatus:Es,INVALID:mt,DIRTY:rz,OK:js,isAborted:nR,isDirty:rR,isValid:i0,isAsync:WE,get util(){return Vt},get objectUtil(){return tR},ZodParsedType:xe,getParsedType:Kl,ZodType:It,ZodString:oa,ZodNumber:Hu,ZodBigInt:Vu,ZodBoolean:o0,ZodDate:kh,ZodSymbol:zE,ZodUndefined:a0,ZodNull:c0,ZodAny:Eg,ZodUnknown:lh,ZodNever:ul,ZodVoid:qE,ZodArray:fa,ZodObject:Hn,ZodUnion:l0,ZodDiscriminatedUnion:j1,ZodIntersection:u0,ZodTuple:lc,ZodRecord:d0,ZodMap:HE,ZodSet:Oh,ZodFunction:Lp,ZodLazy:h0,ZodLiteral:f0,ZodEnum:Gu,ZodNativeEnum:p0,ZodPromise:Cg,ZodEffects:va,ZodTransformer:va,ZodOptional:Jc,ZodNullable:Dh,ZodDefault:g0,ZodCatch:VE,ZodNaN:GE,BRAND:I0e,ZodBranded:iz,ZodPipeline:bv,ZodReadonly:KE,custom:oz,Schema:It,ZodSchema:It,late:x0e,get ZodFirstPartyTypeKind(){return lt},coerce:cve,any:$0e,array:j0e,bigint:R0e,boolean:lz,date:P0e,discriminatedUnion:z0e,effect:dM,enum:Z0e,function:Y0e,instanceof:T0e,intersection:q0e,lazy:Q0e,literal:J0e,map:G0e,nan:N0e,nativeEnum:X0e,never:L0e,null:D0e,nullable:nve,number:cz,object:B0e,oboolean:ave,onumber:ove,optional:tve,ostring:ive,pipeline:sve,preprocess:rve,promise:eve,record:V0e,set:K0e,strictObject:F0e,string:az,symbol:k0e,transformer:dM,tuple:H0e,undefined:O0e,union:W0e,unknown:M0e,void:U0e,NEVER:lve,ZodIssueCode:me,quotelessJson:h0e,ZodError:ha});const Zn=_.object({message:_.string()});function ke(t){return _.literal(Me[t])}_.object({accessList:_.array(_.string()),blockHash:_.string().nullable(),blockNumber:_.string().nullable(),chainId:_.string().or(_.number()),from:_.string(),gas:_.string(),hash:_.string(),input:_.string().nullable(),maxFeePerGas:_.string(),maxPriorityFeePerGas:_.string(),nonce:_.string(),r:_.string(),s:_.string(),to:_.string(),transactionIndex:_.string().nullable(),type:_.string(),v:_.string(),value:_.string()});const uve=_.object({chainId:_.string().or(_.number())}),dve=_.object({email:_.string().email()}),hve=_.object({otp:_.string()}),fve=_.object({uri:_.string(),preferredAccountType:_.optional(_.string()),chainId:_.optional(_.string().or(_.number()))}),pve=_.object({chainId:_.optional(_.string().or(_.number())),preferredAccountType:_.optional(_.string()),socialUri:_.optional(_.string())}),gve=_.object({provider:_.enum(["google","github","apple","facebook","x","discord"])}),mve=_.object({email:_.string().email()}),yve=_.object({otp:_.string()}),wve=_.object({otp:_.string()}),vve=_.object({themeMode:_.optional(_.enum(["light","dark"])),themeVariables:_.optional(_.record(_.string(),_.string().or(_.number()))),w3mThemeVariables:_.optional(_.record(_.string(),_.string()))}),bve=_.object({metadata:_.object({name:_.string(),description:_.string(),url:_.string(),icons:_.array(_.string())}).optional(),sdkVersion:_.string().optional(),sdkType:_.string().optional(),projectId:_.string()}),_ve=_.object({type:_.string()}),Eve=_.object({action:_.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Cve=_.object({url:_.string()}),Sve=_.object({userName:_.string()}),Ave=_.object({email:_.string().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),accounts:_.array(_.object({address:_.string(),type:_.enum([ss.ACCOUNT_TYPES.EOA,ss.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:_.string().optional().nullable(),preferredAccountType:_.optional(_.string())}),Ive=_.object({action:_.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),xve=_.object({email:_.string().email().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),smartAccountDeployed:_.optional(_.boolean()),accounts:_.array(_.object({address:_.string(),type:_.enum([ss.ACCOUNT_TYPES.EOA,ss.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:_.optional(_.string())}),Tve=_.object({uri:_.string()}),Nve=_.object({isConnected:_.boolean()}),Rve=_.object({chainId:_.string().or(_.number())}),Pve=_.object({chainId:_.string().or(_.number())}),kve=_.object({newEmail:_.string().email()}),Ove=_.object({smartAccountEnabledNetworks:_.array(_.number())});_.object({address:_.string(),isDeployed:_.boolean()});const Dve=_.object({version:_.string().optional()}),$ve=_.object({type:_.string(),address:_.string()}),Mve=_.any(),Lve=_.object({method:_.literal("eth_accounts")}),Uve=_.object({method:_.literal("eth_blockNumber")}),jve=_.object({method:_.literal("eth_call"),params:_.array(_.any())}),Bve=_.object({method:_.literal("eth_chainId")}),Fve=_.object({method:_.literal("eth_estimateGas"),params:_.array(_.any())}),Wve=_.object({method:_.literal("eth_feeHistory"),params:_.array(_.any())}),zve=_.object({method:_.literal("eth_gasPrice")}),qve=_.object({method:_.literal("eth_getAccount"),params:_.array(_.any())}),Hve=_.object({method:_.literal("eth_getBalance"),params:_.array(_.any())}),Vve=_.object({method:_.literal("eth_getBlockByHash"),params:_.array(_.any())}),Gve=_.object({method:_.literal("eth_getBlockByNumber"),params:_.array(_.any())}),Kve=_.object({method:_.literal("eth_getBlockReceipts"),params:_.array(_.any())}),Yve=_.object({method:_.literal("eth_getBlockTransactionCountByHash"),params:_.array(_.any())}),Qve=_.object({method:_.literal("eth_getBlockTransactionCountByNumber"),params:_.array(_.any())}),Jve=_.object({method:_.literal("eth_getCode"),params:_.array(_.any())}),Zve=_.object({method:_.literal("eth_getFilterChanges"),params:_.array(_.any())}),Xve=_.object({method:_.literal("eth_getFilterLogs"),params:_.array(_.any())}),ebe=_.object({method:_.literal("eth_getLogs"),params:_.array(_.any())}),tbe=_.object({method:_.literal("eth_getProof"),params:_.array(_.any())}),nbe=_.object({method:_.literal("eth_getStorageAt"),params:_.array(_.any())}),rbe=_.object({method:_.literal("eth_getTransactionByBlockHashAndIndex"),params:_.array(_.any())}),sbe=_.object({method:_.literal("eth_getTransactionByBlockNumberAndIndex"),params:_.array(_.any())}),ibe=_.object({method:_.literal("eth_getTransactionByHash"),params:_.array(_.any())}),obe=_.object({method:_.literal("eth_getTransactionCount"),params:_.array(_.any())}),abe=_.object({method:_.literal("eth_getTransactionReceipt"),params:_.array(_.any())}),cbe=_.object({method:_.literal("eth_getUncleCountByBlockHash"),params:_.array(_.any())}),lbe=_.object({method:_.literal("eth_getUncleCountByBlockNumber"),params:_.array(_.any())}),ube=_.object({method:_.literal("eth_maxPriorityFeePerGas")}),dbe=_.object({method:_.literal("eth_newBlockFilter")}),hbe=_.object({method:_.literal("eth_newFilter"),params:_.array(_.any())}),fbe=_.object({method:_.literal("eth_newPendingTransactionFilter")}),pbe=_.object({method:_.literal("eth_sendRawTransaction"),params:_.array(_.any())}),gbe=_.object({method:_.literal("eth_syncing"),params:_.array(_.any())}),mbe=_.object({method:_.literal("eth_uninstallFilter"),params:_.array(_.any())}),hM=_.object({method:_.literal("personal_sign"),params:_.array(_.any())}),ybe=_.object({method:_.literal("eth_signTypedData_v4"),params:_.array(_.any())}),wbe=_.object({method:_.literal("eth_sendTransaction"),params:_.array(_.any())}),vbe=_.object({method:_.literal("solana_signMessage"),params:_.object({message:_.string(),pubkey:_.string()})}),bbe=_.object({method:_.literal("solana_signTransaction"),params:_.object({transaction:_.string()})}),_be=_.object({method:_.literal("solana_signAllTransactions"),params:_.object({transactions:_.array(_.string())})}),Ebe=_.object({method:_.literal("solana_signAndSendTransaction"),params:_.object({transaction:_.string(),options:_.object({skipPreflight:_.boolean().optional(),preflightCommitment:_.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:_.number().optional(),minContextSlot:_.number().optional()}).optional()})}),Cbe=_.object({method:_.literal("wallet_sendCalls"),params:_.array(_.object({chainId:_.string().or(_.number()).optional(),from:_.string().optional(),version:_.string().optional(),capabilities:_.any().optional(),calls:_.array(_.object({to:_.string().startsWith("0x"),data:_.string().startsWith("0x").optional(),value:_.string().optional()}))}))}),Sbe=_.object({method:_.literal("wallet_getCallsStatus"),params:_.array(_.string())}),Abe=_.object({method:_.literal("wallet_getCapabilities")}),Ibe=_.object({method:_.literal("wallet_grantPermissions"),params:_.array(_.any())}),xbe=_.object({method:_.literal("wallet_revokePermissions"),params:_.any()}),Tbe=_.object({method:_.literal("wallet_getAssets"),params:_.any()}),fM=_.object({token:_.string()}),Oe=_.object({id:_.string().optional()}),Gm={appEvent:Oe.extend({type:ke("APP_SWITCH_NETWORK"),payload:uve}).or(Oe.extend({type:ke("APP_CONNECT_EMAIL"),payload:dve})).or(Oe.extend({type:ke("APP_CONNECT_DEVICE")})).or(Oe.extend({type:ke("APP_CONNECT_OTP"),payload:hve})).or(Oe.extend({type:ke("APP_CONNECT_SOCIAL"),payload:fve})).or(Oe.extend({type:ke("APP_GET_FARCASTER_URI")})).or(Oe.extend({type:ke("APP_CONNECT_FARCASTER")})).or(Oe.extend({type:ke("APP_GET_USER"),payload:_.optional(pve)})).or(Oe.extend({type:ke("APP_GET_SOCIAL_REDIRECT_URI"),payload:gve})).or(Oe.extend({type:ke("APP_SIGN_OUT")})).or(Oe.extend({type:ke("APP_IS_CONNECTED"),payload:_.optional(fM)})).or(Oe.extend({type:ke("APP_GET_CHAIN_ID")})).or(Oe.extend({type:ke("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Oe.extend({type:ke("APP_INIT_SMART_ACCOUNT")})).or(Oe.extend({type:ke("APP_SET_PREFERRED_ACCOUNT"),payload:_ve})).or(Oe.extend({type:ke("APP_RPC_REQUEST"),payload:hM.or(Tbe).or(Lve).or(Uve).or(jve).or(Bve).or(Fve).or(Wve).or(zve).or(qve).or(Hve).or(Vve).or(Gve).or(Kve).or(Yve).or(Qve).or(Jve).or(Zve).or(Xve).or(ebe).or(tbe).or(nbe).or(rbe).or(sbe).or(ibe).or(obe).or(abe).or(cbe).or(lbe).or(ube).or(dbe).or(hbe).or(fbe).or(pbe).or(gbe).or(mbe).or(hM).or(ybe).or(wbe).or(vbe).or(bbe).or(_be).or(Ebe).or(Sbe).or(Cbe).or(Abe).or(Ibe).or(xbe)})).or(Oe.extend({type:ke("APP_UPDATE_EMAIL"),payload:mve})).or(Oe.extend({type:ke("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:yve})).or(Oe.extend({type:ke("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:wve})).or(Oe.extend({type:ke("APP_SYNC_THEME"),payload:vve})).or(Oe.extend({type:ke("APP_SYNC_DAPP_DATA"),payload:bve})).or(Oe.extend({type:ke("APP_RELOAD")})),frameEvent:Oe.extend({type:ke("FRAME_SWITCH_NETWORK_ERROR"),payload:Zn}).or(Oe.extend({type:ke("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Pve})).or(Oe.extend({type:ke("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Eve})).or(Oe.extend({type:ke("FRAME_CONNECT_EMAIL_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Cve})).or(Oe.extend({type:ke("FRAME_GET_FARCASTER_URI_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Sve})).or(Oe.extend({type:ke("FRAME_CONNECT_FARCASTER_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_CONNECT_OTP_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_CONNECT_OTP_SUCCESS")})).or(Oe.extend({type:ke("FRAME_CONNECT_DEVICE_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Oe.extend({type:ke("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Ave})).or(Oe.extend({type:ke("FRAME_CONNECT_SOCIAL_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_GET_USER_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_GET_USER_SUCCESS"),payload:xve})).or(Oe.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Tve})).or(Oe.extend({type:ke("FRAME_SIGN_OUT_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_SIGN_OUT_SUCCESS")})).or(Oe.extend({type:ke("FRAME_IS_CONNECTED_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_IS_CONNECTED_SUCCESS"),payload:Nve})).or(Oe.extend({type:ke("FRAME_GET_CHAIN_ID_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Rve})).or(Oe.extend({type:ke("FRAME_RPC_REQUEST_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_RPC_REQUEST_SUCCESS"),payload:Mve})).or(Oe.extend({type:ke("FRAME_SESSION_UPDATE"),payload:fM})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Ive})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:kve})).or(Oe.extend({type:ke("FRAME_SYNC_THEME_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_SYNC_THEME_SUCCESS")})).or(Oe.extend({type:ke("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Oe.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Ove})).or(Oe.extend({type:ke("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:$ve})).or(Oe.extend({type:ke("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_READY"),payload:Dve})).or(Oe.extend({type:ke("FRAME_RELOAD_ERROR"),payload:Zn})).or(Oe.extend({type:ke("FRAME_RELOAD_SUCCESS")}))};function _I(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let Nbe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Pe.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!_I(Me.FRAME_EVENT_KEY,l))return;const u=Gm.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Bi.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Bi.isClient&&window.addEventListener("message",({data:o})=>{if(!_I(Me.FRAME_EVENT_KEY,o))return;const a=Gm.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Bi.isClient&&window.addEventListener("message",({data:o})=>{if(!_I(Me.APP_EVENT_KEY,o))return;const a=Gm.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Bi.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Gm.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Bi.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Gm.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Bi.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${phe}?projectId=${e}&chainId=${r}&version=${mhe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},Rbe=class{constructor(e){var i;const n=of({level:ghe}),{logger:r,chunkLoggerController:s}=R1({opts:n});this.logger=as(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},Pbe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Rbe(e)),this.abortController=i,this.w3mFrame=new Nbe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Zr.get(Me.EMAIL_LOGIN_USED_KEY)}getEmail(){return Zr.get(Me.EMAIL)}getUsername(){return Zr.get(Me.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Me.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Bi.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Me.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Me.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Me.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Me.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Me.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Me.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Me.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Me.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Me.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Me.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Me.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Me.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Me.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Me.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Me.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Me.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Me.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Me.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Me.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Me.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(ss.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Me.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Me.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Me.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:ss.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Me.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Me.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{ss.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Me.APP_SYNC_DAPP_DATA,Me.APP_SYNC_THEME,Me.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Me.APP_CONNECT_EMAIL,Me.APP_CONNECT_DEVICE,Me.APP_CONNECT_OTP,Me.APP_CONNECT_SOCIAL,Me.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var v,b,E;w.id===u&&((b=y==null?void 0:(v=y.logger).info)==null||b.call(v,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((E=w.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Zr.set(Me.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Zr.set(Me.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Zr.set(Me.EMAIL,e),Zr.set(Me.EMAIL_LOGIN_USED_KEY,"true"),Zr.delete(Me.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Zr.delete(Me.EMAIL_LOGIN_USED_KEY),Zr.delete(Me.EMAIL),Zr.delete(Me.LAST_USED_CHAIN_KEY),Zr.delete(Me.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Zr.set(Me.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Zr.get(Me.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Zr.set(Me.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},kbe=class O_{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return O_.instance||(O_.instance=new Pbe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),O_.instance}};function Obe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function kr(t,...e){try{return Obe(t(...e))}catch(n){return Promise.reject(n)}}function Dbe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function $be(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function D_(t){if(Dbe(t))return String(t);if($be(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return D_(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const iR="base64:";function Mbe(t){return typeof t=="string"?t:iR+jbe(t)}function Lbe(t){return typeof t!="string"||!t.startsWith(iR)?t:Ube(t.slice(iR.length))}function Ube(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function jbe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ti(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Bbe(...t){return ti(t.join(":"))}function Ub(t){return t=ti(t),t?t+":":""}function Fbe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Wbe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const zbe="memory",qbe=()=>{const t=new Map;return{name:zbe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Hbe(t={}){const e={mounts:{"":t.driver||qbe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=ti(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await pM(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=ti(g?p:p.key),y=g?void 0:p.value,v=g||!p.options?u:{...u,...p.options},b=n(w);f(b).items.push({key:w,value:y,relativeKey:b.relativeKey,options:v})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=ti(l);const{relativeKey:d,driver:h}=n(l);return kr(h.hasItem,d,u)},getItem(l,u={}){l=ti(l);const{relativeKey:d,driver:h}=n(l);return kr(h.getItem,d,u).then(f=>Pb(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?kr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Bbe(d.base,f.key),value:Pb(f.value)}))):Promise.all(d.items.map(h=>kr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Pb(f)})))))},getItemRaw(l,u={}){l=ti(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?kr(h.getItemRaw,d,u):kr(h.getItem,d,u).then(f=>Lbe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=ti(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await kr(f.setItem,h,D_(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return kr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:D_(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>kr(d.driver.setItem,h.relativeKey,D_(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=ti(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await kr(f.setItemRaw,h,u,d);else if(f.setItem)await kr(f.setItem,h,Mbe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ti(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await kr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await kr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ti(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await kr(h.getMeta,d,u)),!u.nativeOnly){const p=await kr(h.getItem,d+"$",u).then(g=>Pb(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=Ub(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const v=await kr(y.driver.getKeys,y.relativeBase,u);for(const b of v){const E=y.mountpoint+ti(b);h.some(C=>E.startsWith(C))||f.push(E)}h=[y.mountpoint,...h.filter(b=>!b.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Fbe(y,u.maxDepth))&&Wbe(y,l))},async clear(l,u={}){l=Ub(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return kr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>gM(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Ub(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(pM(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=Ub(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await gM(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=ti(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ti(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function pM(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function gM(t){typeof t.dispose=="function"&&await kr(t.dispose)}const Vbe="idb-keyval";var Gbe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=c7(t.dbName,t.storeName)),{name:Vbe,options:t,async hasItem(s){return!(typeof await w5(n(s),r)>"u")},async getItem(s){return await w5(n(s),r)??null},setItem(s,i){return yfe(n(s),i,r)},removeItem(s){return wfe(n(s),r)},getKeys(){return _fe(r)},clear(){return vfe(r)}}};const Kbe="WALLET_CONNECT_V2_INDEXED_DB",Ybe="keyvaluestorage";let Qbe=class{constructor(){this.indexedDb=Hbe({driver:Gbe({dbName:Kbe,storeName:Ybe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ll(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var EI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$_={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof EI<"u"&&EI.localStorage?$_.exports=EI.localStorage:typeof window<"u"&&window.localStorage?$_.exports=window.localStorage:$_.exports=new e})();function Jbe(t){var e;return[t[0],Rh((e=t[1])!=null?e:"")]}let Zbe=class{constructor(){this.localStorage=$_.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Jbe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Rh(n)}async setItem(e,n){this.localStorage.setItem(e,ll(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Xbe="wc_storage_version",mM=1,e_e=async(t,e,n)=>{const r=Xbe,s=await e.getItem(r);if(s&&s>=mM){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,mM),n(e),t_e(t,o)},t_e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let n_e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Zbe;this.storage=e;try{const n=new Qbe;e_e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var r_e=Object.defineProperty,s_e=(t,e,n)=>e in t?r_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yM=(t,e,n)=>s_e(t,typeof e!="symbol"?e+"":e,n);let i_e=class extends nf{constructor(e){super(),this.opts=e,yM(this,"protocol","wc"),yM(this,"version",2)}};var o_e=Object.defineProperty,a_e=(t,e,n)=>e in t?o_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c_e=(t,e,n)=>a_e(t,e+"",n);let l_e=class extends nf{constructor(e,n){super(),this.core=e,this.logger=n,c_e(this,"records",new Map)}},u_e=class{constructor(e,n){this.logger=e,this.core=n}},d_e=class extends nf{constructor(e,n){super(),this.relayer=e,this.logger=n}},h_e=class extends nf{constructor(e){super()}},f_e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},p_e=class extends nf{constructor(e,n){super(),this.relayer=e,this.logger=n}},g_e=class extends nf{constructor(e,n){super(),this.core=e,this.logger=n}},m_e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},y_e=class{constructor(e,n){this.projectId=e,this.logger=n}},w_e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var v_e=Object.defineProperty,b_e=(t,e,n)=>e in t?v_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wM=(t,e,n)=>b_e(t,typeof e!="symbol"?e+"":e,n);let __e=class{constructor(e){this.opts=e,wM(this,"protocol","wc"),wM(this,"version",2)}},E_e=class{constructor(e){this.client=e}};function m0(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function vM(t){return m0(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const uz="2.23.2";let Km={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${uz}`};class $h extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof $h?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof $h&&n.cause.docsPath||n.docsPath,i=(a=Km.getDocsUrl)==null?void 0:a.call(Km,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Km.version?[`Version: ${Km.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=uz}walk(e){return dz(this,e)}}function dz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?dz(t.cause,e):e?null:t}class hz extends $h{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function rm(t,{dir:e,size:n=32}={}){return typeof t=="string"?C_e(t,{dir:e,size:n}):S_e(t,{dir:e,size:n})}function C_e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new hz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function S_e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new hz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class A_e extends $h{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class I_e extends $h{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function sm(t,{size:e}){if(vM(t)>e)throw new I_e({givenSize:vM(t),maxSize:e})}function oR(t,e={}){const{signed:n}=e;e.size&&sm(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function x_e(t,e={}){return Number(oR(t,e))}const T_e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aR(t,e={}){return typeof t=="number"||typeof t=="bigint"?pz(t,e):typeof t=="string"?P_e(t,e):typeof t=="boolean"?N_e(t,e):fz(t,e)}function N_e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(sm(n,{size:e.size}),rm(n,{size:e.size})):n}function fz(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=T_e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(sm(r,{size:e.size}),rm(r,{dir:"right",size:e.size})):r}function pz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new A_e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?rm(a,{size:r}):a}const R_e=new TextEncoder;function P_e(t,e={}){const n=R_e.encode(t);return fz(n,e)}const k_e=new TextEncoder;function O_e(t,e={}){return typeof t=="number"||typeof t=="bigint"?$_e(t,e):typeof t=="boolean"?D_e(t,e):m0(t)?gz(t,e):mz(t,e)}function D_e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(sm(n,{size:e.size}),rm(n,{size:e.size})):n}const xc={zero:48,nine:57,A:65,F:70,a:97,f:102};function bM(t){if(t>=xc.zero&&t<=xc.nine)return t-xc.zero;if(t>=xc.A&&t<=xc.F)return t-(xc.A-10);if(t>=xc.a&&t<=xc.f)return t-(xc.a-10)}function gz(t,e={}){let n=t;e.size&&(sm(n,{size:e.size}),n=rm(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=bM(r.charCodeAt(a++)),l=bM(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new $h(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function $_e(t,e){const n=pz(t,e);return gz(n)}function mz(t,e={}){const n=k_e.encode(t);return typeof e.size=="number"?(sm(n,{size:e.size}),rm(n,{dir:"right",size:e.size})):n}function YE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function M_e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function B1(t,...e){if(!M_e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function M6e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");YE(t.outputLen),YE(t.blockLen)}function _M(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function L_e(t,e){B1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const jb=BigInt(2**32-1),EM=BigInt(32);function U_e(t,e=!1){return e?{h:Number(t&jb),l:Number(t>>EM&jb)}:{h:Number(t>>EM&jb)|0,l:Number(t&jb)|0}}function j_e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=U_e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const B_e=(t,e,n)=>t<<n|e>>>32-n,F_e=(t,e,n)=>e<<n|t>>>32-n,W_e=(t,e,n)=>e<<n-32|t>>>64-n,z_e=(t,e,n)=>t<<n-32|e>>>64-n,Pf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function q_e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function L6e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function U6e(t,e){return t<<32-e|t>>>e}const CM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function H_e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function SM(t){for(let e=0;e<t.length;e++)t[e]=H_e(t[e])}function V_e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function yz(t){return typeof t=="string"&&(t=V_e(t)),B1(t),t}function j6e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];B1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class G_e{clone(){return this._cloneInto()}}function K_e(t){const e=r=>t().update(yz(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function B6e(t=32){if(Pf&&typeof Pf.getRandomValues=="function")return Pf.getRandomValues(new Uint8Array(t));if(Pf&&typeof Pf.randomBytes=="function")return Pf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const wz=[],vz=[],bz=[],Y_e=BigInt(0),Ym=BigInt(1),Q_e=BigInt(2),J_e=BigInt(7),Z_e=BigInt(256),X_e=BigInt(113);for(let t=0,e=Ym,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],wz.push(2*(5*r+n)),vz.push((t+1)*(t+2)/2%64);let s=Y_e;for(let i=0;i<7;i++)e=(e<<Ym^(e>>J_e)*X_e)%Z_e,e&Q_e&&(s^=Ym<<(Ym<<BigInt(i))-Ym);bz.push(s)}const[eEe,tEe]=j_e(bz,!0),AM=(t,e,n)=>n>32?W_e(t,e,n):B_e(t,e,n),IM=(t,e,n)=>n>32?z_e(t,e,n):F_e(t,e,n);function nEe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=AM(l,u,1)^n[a],h=IM(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=vz[o],c=AM(s,i,a),l=IM(s,i,a),u=wz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=eEe[r],t[1]^=tEe[r]}n.fill(0)}class $O extends G_e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,YE(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=q_e(this.state)}keccak(){CM||SM(this.state32),nEe(this.state32,this.rounds),CM||SM(this.state32),this.posOut=0,this.pos=0}update(e){_M(this);const{blockLen:n,state:r}=this;e=yz(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){_M(this,!1),B1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return YE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(L_e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new $O(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const rEe=(t,e,n)=>K_e(()=>new $O(e,t,n)),sEe=rEe(1,136,256/8);function _z(t,e){const n=e||"hex",r=sEe(m0(t,{strict:!1})?O_e(t):t);return n==="bytes"?r:aR(r)}class iEe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const CI=new iEe(8192);function oEe(t,e){if(CI.has(`${t}.${e}`))return CI.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=_z(mz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return CI.set(`${t}.${e}`,i),i}function aEe(t){const e=_z(`0x${t.substring(4)}`).substring(26);return oEe(`0x${e}`)}async function cEe({hash:t,signature:e}){const n=m0(t)?t:aR(t),{secp256k1:r}=await ar(async()=>{const{secp256k1:o}=await import("./secp256k1-B_a-AHxk.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=xM(f);return new r.Signature(oR(l),oR(u)).addRecoveryBit(p)}const o=m0(e)?e:aR(e),a=x_e(`0x${o.slice(130)}`),c=xM(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function xM(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function lEe({hash:t,signature:e}){return aEe(await cEe({hash:t,signature:e}))}var uEe={};const dEe=":";function Up(t){const[e,n]=t.split(dEe);return{namespace:e,reference:n}}function Ez(t,e){return t.includes(":")?[t]:e.chains||[]}var hEe=Object.defineProperty,fEe=Object.defineProperties,pEe=Object.getOwnPropertyDescriptors,TM=Object.getOwnPropertySymbols,gEe=Object.prototype.hasOwnProperty,mEe=Object.prototype.propertyIsEnumerable,NM=(t,e,n)=>e in t?hEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RM=(t,e)=>{for(var n in e||(e={}))gEe.call(e,n)&&NM(t,n,e[n]);if(TM)for(var n of TM(e))mEe.call(e,n)&&NM(t,n,e[n]);return t},yEe=(t,e)=>fEe(t,pEe(e));const wEe="ReactNative",Wi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},vEe="js";function QE(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function rd(){return!Ph()&&!!PO()&&navigator.product===wEe}function bEe(){return rd()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function _Ee(){return rd()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function im(){return!QE()&&!!PO()&&!!Ph()}function _v(){return rd()?Wi.reactNative:QE()?Wi.node:im()?Wi.browser:Wi.unknown}function PM(){var t;try{return rd()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function EEe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function CEe(t){var e,n;const r=Cz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),yEe(RM(RM({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Cz(){return W7()||{name:"",description:"",url:"",icons:[""]}}function SEe(){if(_v()===Wi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Yme();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function AEe(){var t;const e=_v();return e===Wi.browser?[e,((t=F7())==null?void 0:t.host)||"unknown"].join(":"):e}function Sz(t,e,n){const r=SEe(),s=AEe();return[[t,e].join("-"),[vEe,n].join("-"),r,s].join("/")}function IEe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=Sz(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=EEe(l[1]||"",d);return l[0]+"?"+h}function Vd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function cR(t){return Object.fromEntries(t.entries())}function lR(t){return new Map(Object.entries(t))}function Sd(t=ve.FIVE_MINUTES,e){const n=ve.toMiliseconds(t||ve.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function fu(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Az(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function xEe(t){return Az("topic",t)}function TEe(t){return Az("id",t)}function Iz(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function wr(t,e){return ve.fromMiliseconds(Date.now()+ve.toMiliseconds(t))}function zl(t){return Date.now()>=ve.toMiliseconds(t)}function en(t,e){return`${t}${e?`:${e}`:""}`}function rc(t=[],e=[]){return[...new Set([...t,...e])]}async function NEe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=REe(i,t,e),a=_v();if(a===Wi.browser){if(!((r=Ph())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}PEe(o)}else a===Wi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function REe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${$Ee(r,!0)}`}else s=`${s}/wc?${r}`;return s}function PEe(t){let e="_self";DEe()?e="_top":(OEe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function kEe(t,e){let n="";try{if(im()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function kM(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function OM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function MO(){return typeof process<"u"&&uEe.IS_VITEST==="true"}function OEe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function DEe(){try{return window.self!==window.top}catch{return!1}}function $Ee(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function xz(t){return Buffer.from(t,"base64").toString("utf-8")}function MEe(t){return new Promise(e=>setTimeout(e,t))}function y0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function LEe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ev(t,...e){if(!LEe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function LO(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");y0(t.outputLen),y0(t.blockLen)}function Sg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Tz(t,e){Ev(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Bb=BigInt(2**32-1),DM=BigInt(32);function UEe(t,e=!1){return e?{h:Number(t&Bb),l:Number(t>>DM&Bb)}:{h:Number(t>>DM&Bb)|0,l:Number(t&Bb)|0}}function jEe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=UEe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const BEe=(t,e,n)=>t<<n|e>>>32-n,FEe=(t,e,n)=>e<<n|t>>>32-n,WEe=(t,e,n)=>e<<n-32|t>>>64-n,zEe=(t,e,n)=>t<<n-32|e>>>64-n,kf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function qEe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function SI(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ra(t,e){return t<<32-e|t>>>e}const $M=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function HEe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function MM(t){for(let e=0;e<t.length;e++)t[e]=HEe(t[e])}function VEe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ag(t){return typeof t=="string"&&(t=VEe(t)),Ev(t),t}function GEe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ev(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let UO=class{clone(){return this._cloneInto()}};function Nz(t){const e=r=>t().update(Ag(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function om(t=32){if(kf&&typeof kf.getRandomValues=="function")return kf.getRandomValues(new Uint8Array(t));if(kf&&typeof kf.randomBytes=="function")return kf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Rz=[],Pz=[],kz=[],KEe=BigInt(0),Qm=BigInt(1),YEe=BigInt(2),QEe=BigInt(7),JEe=BigInt(256),ZEe=BigInt(113);for(let t=0,e=Qm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Rz.push(2*(5*r+n)),Pz.push((t+1)*(t+2)/2%64);let s=KEe;for(let i=0;i<7;i++)e=(e<<Qm^(e>>QEe)*ZEe)%JEe,e&YEe&&(s^=Qm<<(Qm<<BigInt(i))-Qm);kz.push(s)}const[XEe,eCe]=jEe(kz,!0),LM=(t,e,n)=>n>32?WEe(t,e,n):BEe(t,e,n),UM=(t,e,n)=>n>32?zEe(t,e,n):FEe(t,e,n);function tCe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=LM(l,u,1)^n[a],h=UM(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Pz[o],c=LM(s,i,a),l=UM(s,i,a),u=Rz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=XEe[r],t[1]^=eCe[r]}n.fill(0)}let nCe=class Oz extends UO{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,y0(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=qEe(this.state)}keccak(){$M||MM(this.state32),tCe(this.state32,this.rounds),$M||MM(this.state32),this.posOut=0,this.pos=0}update(e){Sg(this);const{blockLen:n,state:r}=this;e=Ag(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Sg(this,!1),Ev(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return y0(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Tz(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Oz(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const rCe=(t,e,n)=>Nz(()=>new nCe(e,t,n)),sCe=rCe(1,136,256/8),iCe="https://rpc.walletconnect.org/v1";function Dz(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(sCe(n)).toString("hex")}async function oCe(t,e,n,r,s,i){switch(n.t){case"eip191":return await aCe(t,e,n.s);case"eip1271":return await cCe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function aCe(t,e,n){return(await lEe({hash:Dz(e),signature:n})).toLowerCase()===t.toLowerCase()}async function cCe(t,e,n,r,s,i){const o=Up(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=Dz(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||iCe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:lCe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function lCe(){return Date.now()+Math.floor(Math.random()*1e3)}function uCe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return z7.encode(i)}var dCe=Object.defineProperty,hCe=Object.defineProperties,fCe=Object.getOwnPropertyDescriptors,jM=Object.getOwnPropertySymbols,pCe=Object.prototype.hasOwnProperty,gCe=Object.prototype.propertyIsEnumerable,BM=(t,e,n)=>e in t?dCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mCe=(t,e)=>{for(var n in e||(e={}))pCe.call(e,n)&&BM(t,n,e[n]);if(jM)for(var n of jM(e))gCe.call(e,n)&&BM(t,n,e[n]);return t},yCe=(t,e)=>hCe(t,fCe(e));const wCe="did:pkh:",jO=t=>t==null?void 0:t.split(":"),vCe=t=>{const e=t&&jO(t);if(e)return t.includes(wCe)?e[3]:e[1]},uR=t=>{const e=t&&jO(t);if(e)return e[2]+":"+e[3]},JE=t=>{const e=t&&jO(t);if(e)return e.pop()};async function FM(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=$z(s,s.iss),o=JE(s.iss);return await oCe(o,i,r,uR(s.iss),n)}const $z=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=JE(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${vCe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=M_(t.resources);if(p){const g=w0(p);s=TCe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function bCe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function _Ce(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Mh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function ECe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:CCe(e,n,r)}}}function CCe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Mz(t){return Mh(t),`urn:recap:${bCe(t).replace(/=/g,"")}`}function w0(t){const e=_Ce(t.replace("urn:recap:",""));return Mh(e),e}function SCe(t,e,n){const r=ECe(t,e,n);return Mz(r)}function ACe(t){return t&&t.includes("urn:recap:")}function ICe(t,e){const n=w0(t),r=w0(e),s=xCe(n,r);return Mz(s)}function xCe(t,e){Mh(t),Mh(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=yCe(mCe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function TCe(t="",e){Mh(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function WM(t){var e;const n=w0(t);Mh(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function zM(t){const e=w0(t);Mh(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function M_(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return ACe(e)?e:void 0}function AI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Lz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ji(t,...e){if(!Lz(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NCe(t,e){ji(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function HM(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Ru=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),RCe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),PCe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!PCe)throw new Error("Non little-endian hardware is not supported");function kCe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function dR(t){if(typeof t=="string")t=kCe(t);else if(Lz(t))t=hR(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function OCe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function DCe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const $Ce=(t,e)=>{function n(r,...s){if(ji(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ji(l):ji(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ji(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ji(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ji(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ji(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function VM(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!MCe(e))throw new Error("invalid output, must be aligned");return e}function GM(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function MCe(t){return t.byteOffset%4===0}function hR(t){return Uint8Array.from(t)}function Ig(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Uz=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),LCe=Uz("expand 16-byte k"),UCe=Uz("expand 32-byte k"),jCe=Ru(LCe),BCe=Ru(UCe);function zt(t,e){return t<<e|t>>>32-e}function fR(t){return t.byteOffset%4===0}const Fb=64,FCe=16,jz=2**32-1,KM=new Uint32Array;function WCe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Fb),u=Ru(l),d=fR(s)&&fR(i),h=d?Ru(s):KM,f=d?Ru(i):KM;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=jz)throw new Error("arx: counter overflow");const g=Math.min(Fb,c-p);if(d&&g===Fb){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,v;y<FCe;y++)v=w+y,f[v]=h[v]^u[y];p+=Fb;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function zCe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=OCe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return AI(s),AI(o),HM(i),HM(n),(a,c,l,u,d=0)=>{ji(a),ji(c),ji(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ji(u),AI(d),d<0||d>=jz)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=hR(a)),w=BCe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=jCe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);fR(c)||f.push(c=hR(c));const y=Ru(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,Ru(c.subarray(0,16)),y),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,f.push(c)}const b=Ru(c);return WCe(t,w,y,b,l,u,d,o),Ig(...f),u}}const Kr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class qCe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=dR(e),ji(e,32);const n=Kr(e,0),r=Kr(e,2),s=Kr(e,4),i=Kr(e,6),o=Kr(e,8),a=Kr(e,10),c=Kr(e,12),l=Kr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Kr(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Kr(e,n+0),v=Kr(e,n+2),b=Kr(e,n+4),E=Kr(e,n+6),C=Kr(e,n+8),A=Kr(e,n+10),I=Kr(e,n+12),x=Kr(e,n+14);let S=i[0]+(y&8191),O=i[1]+((y>>>13|v<<3)&8191),P=i[2]+((v>>>10|b<<6)&8191),j=i[3]+((b>>>7|E<<9)&8191),q=i[4]+((E>>>4|C<<12)&8191),B=i[5]+(C>>>1&8191),N=i[6]+((C>>>14|A<<2)&8191),T=i[7]+((A>>>11|I<<5)&8191),$=i[8]+((I>>>8|x<<8)&8191),R=i[9]+(x>>>5|s),D=0,U=D+S*a+O*(5*w)+P*(5*g)+j*(5*p)+q*(5*f);D=U>>>13,U&=8191,U+=B*(5*h)+N*(5*d)+T*(5*u)+$*(5*l)+R*(5*c),D+=U>>>13,U&=8191;let H=D+S*c+O*a+P*(5*w)+j*(5*g)+q*(5*p);D=H>>>13,H&=8191,H+=B*(5*f)+N*(5*h)+T*(5*d)+$*(5*u)+R*(5*l),D+=H>>>13,H&=8191;let te=D+S*l+O*c+P*a+j*(5*w)+q*(5*g);D=te>>>13,te&=8191,te+=B*(5*p)+N*(5*f)+T*(5*h)+$*(5*d)+R*(5*u),D+=te>>>13,te&=8191;let oe=D+S*u+O*l+P*c+j*a+q*(5*w);D=oe>>>13,oe&=8191,oe+=B*(5*g)+N*(5*p)+T*(5*f)+$*(5*h)+R*(5*d),D+=oe>>>13,oe&=8191;let re=D+S*d+O*u+P*l+j*c+q*a;D=re>>>13,re&=8191,re+=B*(5*w)+N*(5*g)+T*(5*p)+$*(5*f)+R*(5*h),D+=re>>>13,re&=8191;let ie=D+S*h+O*d+P*u+j*l+q*c;D=ie>>>13,ie&=8191,ie+=B*a+N*(5*w)+T*(5*g)+$*(5*p)+R*(5*f),D+=ie>>>13,ie&=8191;let ye=D+S*f+O*h+P*d+j*u+q*l;D=ye>>>13,ye&=8191,ye+=B*c+N*a+T*(5*w)+$*(5*g)+R*(5*p),D+=ye>>>13,ye&=8191;let Z=D+S*p+O*f+P*h+j*d+q*u;D=Z>>>13,Z&=8191,Z+=B*l+N*c+T*a+$*(5*w)+R*(5*g),D+=Z>>>13,Z&=8191;let Y=D+S*g+O*p+P*f+j*h+q*d;D=Y>>>13,Y&=8191,Y+=B*u+N*l+T*c+$*a+R*(5*w),D+=Y>>>13,Y&=8191;let ue=D+S*w+O*g+P*p+j*f+q*h;D=ue>>>13,ue&=8191,ue+=B*d+N*u+T*l+$*c+R*a,D+=ue>>>13,ue&=8191,D=(D<<2)+D|0,D=D+U|0,U=D&8191,D=D>>>13,H+=D,i[0]=U,i[1]=H,i[2]=te,i[3]=oe,i[4]=re,i[5]=ie,i[6]=ye,i[7]=Z,i[8]=Y,i[9]=ue}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Ig(r)}update(e){qM(this);const{buffer:n,blockLen:r}=this;e=dR(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ig(this.h,this.r,this.buffer,this.pad)}digestInto(e){qM(this),NCe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function HCe(t){const e=(r,s)=>t(s).update(dR(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const VCe=HCe(t=>new qCe(t));function GCe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],v=s,b=n[0],E=n[1],C=n[2],A=o,I=a,x=c,S=l,O=u,P=d,j=h,q=f,B=p,N=g,T=w,$=y,R=v,D=b,U=E,H=C;for(let oe=0;oe<i;oe+=2)A=A+O|0,R=zt(R^A,16),B=B+R|0,O=zt(O^B,12),A=A+O|0,R=zt(R^A,8),B=B+R|0,O=zt(O^B,7),I=I+P|0,D=zt(D^I,16),N=N+D|0,P=zt(P^N,12),I=I+P|0,D=zt(D^I,8),N=N+D|0,P=zt(P^N,7),x=x+j|0,U=zt(U^x,16),T=T+U|0,j=zt(j^T,12),x=x+j|0,U=zt(U^x,8),T=T+U|0,j=zt(j^T,7),S=S+q|0,H=zt(H^S,16),$=$+H|0,q=zt(q^$,12),S=S+q|0,H=zt(H^S,8),$=$+H|0,q=zt(q^$,7),A=A+P|0,H=zt(H^A,16),T=T+H|0,P=zt(P^T,12),A=A+P|0,H=zt(H^A,8),T=T+H|0,P=zt(P^T,7),I=I+j|0,R=zt(R^I,16),$=$+R|0,j=zt(j^$,12),I=I+j|0,R=zt(R^I,8),$=$+R|0,j=zt(j^$,7),x=x+q|0,D=zt(D^x,16),B=B+D|0,q=zt(q^B,12),x=x+q|0,D=zt(D^x,8),B=B+D|0,q=zt(q^B,7),S=S+O|0,U=zt(U^S,16),N=N+U|0,O=zt(O^N,12),S=S+O|0,U=zt(U^S,8),N=N+U|0,O=zt(O^N,7);let te=0;r[te++]=o+A|0,r[te++]=a+I|0,r[te++]=c+x|0,r[te++]=l+S|0,r[te++]=u+O|0,r[te++]=d+P|0,r[te++]=h+j|0,r[te++]=f+q|0,r[te++]=p+B|0,r[te++]=g+N|0,r[te++]=w+T|0,r[te++]=y+$|0,r[te++]=v+R|0,r[te++]=b+D|0,r[te++]=E+U|0,r[te++]=C+H|0}const KCe=zCe(GCe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),YCe=new Uint8Array(16),YM=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(YCe.subarray(n))},QCe=new Uint8Array(32);function QM(t,e,n,r,s){const i=t(e,n,QCe),o=VCe.create(i);s&&YM(o,s),YM(o,r);const a=new Uint8Array(16),c=RCe(a);GM(c,0,BigInt(s?s.length:0),!0),GM(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Ig(i,a),l}const JCe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=VM(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=QM(t,e,n,a,r);return i.set(c,o),Ig(c),i},decrypt(s,i){i=VM(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=QM(t,e,n,o,r);if(!DCe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Ig(c),i}}),Bz=$Ce({blockSize:64,nonceLength:12,tagLength:16},JCe(KCe));let Fz=class extends UO{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,LO(e);const r=Ag(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Sg(this),this.iHash.update(e),this}digestInto(e){Sg(this),Ev(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const F1=(t,e,n)=>new Fz(t,e).update(n).digest();F1.create=(t,e)=>new Fz(t,e);function ZCe(t,e,n){return LO(t),n===void 0&&(n=new Uint8Array(t.outputLen)),F1(t,Ag(n),Ag(e))}const II=new Uint8Array([0]),JM=new Uint8Array;function XCe(t,e,n,r=32){if(LO(t),y0(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=JM);const i=new Uint8Array(s*t.outputLen),o=F1.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)II[0]=l+1,a.update(l===0?JM:c).update(n).update(II).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),II.fill(0),i.slice(0,r)}const e1e=(t,e,n,r,s)=>XCe(t,ZCe(t,e,n),r,s);function t1e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function n1e(t,e,n){return t&e^~t&n}function r1e(t,e,n){return t&e^t&n^e&n}let s1e=class extends UO{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=SI(this.buffer)}update(e){Sg(this);const{view:n,buffer:r,blockLen:s}=this;e=Ag(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=SI(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sg(this),Tz(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;t1e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=SI(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const i1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rl=new Uint32Array(64);class o1e extends s1e{constructor(){super(64,32,8,!1),this.A=Nl[0]|0,this.B=Nl[1]|0,this.C=Nl[2]|0,this.D=Nl[3]|0,this.E=Nl[4]|0,this.F=Nl[5]|0,this.G=Nl[6]|0,this.H=Nl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Rl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Rl[d-15],f=Rl[d-2],p=Ra(h,7)^Ra(h,18)^h>>>3,g=Ra(f,17)^Ra(f,19)^f>>>10;Rl[d]=g+Rl[d-7]+p+Rl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ra(a,6)^Ra(a,11)^Ra(a,25),f=u+h+n1e(a,c,l)+i1e[d]+Rl[d]|0,p=(Ra(r,2)^Ra(r,13)^Ra(r,22))+r1e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Rl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Cv=Nz(()=>new o1e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const W1=BigInt(0),z1=BigInt(1),a1e=BigInt(2);function Lh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Sv(t){if(!Lh(t))throw new Error("Uint8Array expected")}function xg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const c1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tg(t){Sv(t);let e="";for(let n=0;n<t.length;n++)e+=c1e[t[n]];return e}function Cp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function BO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?W1:BigInt("0x"+t)}const Tc={_0:48,_9:57,A:65,F:70,a:97,f:102};function ZM(t){if(t>=Tc._0&&t<=Tc._9)return t-Tc._0;if(t>=Tc.A&&t<=Tc.F)return t-(Tc.A-10);if(t>=Tc.a&&t<=Tc.f)return t-(Tc.a-10)}function Ng(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=ZM(t.charCodeAt(i)),a=ZM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function uh(t){return BO(Tg(t))}function v0(t){return Sv(t),BO(Tg(Uint8Array.from(t).reverse()))}function Rg(t,e){return Ng(t.toString(16).padStart(e*2,"0"))}function q1(t,e){return Rg(t,e).reverse()}function l1e(t){return Ng(Cp(t))}function Li(t,e,n){let r;if(typeof e=="string")try{r=Ng(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Lh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function b0(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Sv(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function u1e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function d1e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const xI=t=>typeof t=="bigint"&&W1<=t;function H1(t,e,n){return xI(t)&&xI(e)&&xI(n)&&e<=t&&t<n}function Zc(t,e,n,r){if(!H1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Wz(t){let e;for(e=0;t>W1;t>>=z1,e+=1);return e}function h1e(t,e){return t>>BigInt(e)&z1}function f1e(t,e,n){return t|(n?z1:W1)<<BigInt(e)}const FO=t=>(a1e<<BigInt(t-1))-z1,TI=t=>new Uint8Array(t),XM=t=>Uint8Array.from(t);function zz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=TI(t),s=TI(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=TI())=>{s=a(XM([0]),u),r=a(),u.length!==0&&(s=a(XM([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return b0(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const p1e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Lh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function am(t,e,n={}){const r=(s,i,o)=>{const a=p1e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const g1e=()=>{throw new Error("not implemented")};function pR(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var m1e=Object.freeze({__proto__:null,isBytes:Lh,abytes:Sv,abool:xg,bytesToHex:Tg,numberToHexUnpadded:Cp,hexToNumber:BO,hexToBytes:Ng,bytesToNumberBE:uh,bytesToNumberLE:v0,numberToBytesBE:Rg,numberToBytesLE:q1,numberToVarBytesBE:l1e,ensureBytes:Li,concatBytes:b0,equalBytes:u1e,utf8ToBytes:d1e,inRange:H1,aInRange:Zc,bitLen:Wz,bitGet:h1e,bitSet:f1e,bitMask:FO,createHmacDrbg:zz,validateObject:am,notImplemented:g1e,memoized:pR});const zr=BigInt(0),ur=BigInt(1),kd=BigInt(2),y1e=BigInt(3),gR=BigInt(4),eL=BigInt(5),tL=BigInt(8);function ci(t,e){const n=t%e;return n>=zr?n:e+n}function qz(t,e,n){if(e<zr)throw new Error("invalid exponent, negatives unsupported");if(n<=zr)throw new Error("invalid modulus");if(n===ur)return zr;let r=ur;for(;e>zr;)e&ur&&(r=r*t%n),t=t*t%n,e>>=ur;return r}function Ho(t,e,n){let r=t;for(;e-- >zr;)r*=r,r%=n;return r}function mR(t,e){if(t===zr)throw new Error("invert: expected non-zero number");if(e<=zr)throw new Error("invert: expected positive modulus, got "+e);let n=ci(t,e),r=e,s=zr,i=ur;for(;n!==zr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ur)throw new Error("invert: does not exist");return ci(s,e)}function w1e(t){const e=(t-ur)/kd;let n,r,s;for(n=t-ur,r=0;n%kd===zr;n/=kd,r++);for(s=kd;s<t&&qz(s,e,t)!==t-ur;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ur)/gR;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ur)/kd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ur<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function v1e(t){if(t%gR===y1e){const e=(t+ur)/gR;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%tL===eL){const e=(t-eL)/tL;return function(n,r){const s=n.mul(r,kd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,kd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return w1e(t)}const b1e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _1e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=b1e.reduce((r,s)=>(r[s]="function",r),e);return am(t,n)}function E1e(t,e,n){if(n<zr)throw new Error("invalid exponent, negatives unsupported");if(n===zr)return t.ONE;if(n===ur)return e;let r=t.ONE,s=e;for(;n>zr;)n&ur&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ur;return r}function C1e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Hz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Vz(t,e,n=!1,r={}){if(t<=zr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Hz(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:FO(s),ZERO:zr,ONE:ur,create:c=>ci(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return zr<=c&&c<t},is0:c=>c===zr,isOdd:c=>(c&ur)===ur,neg:c=>ci(-c,t),eql:(c,l)=>c===l,sqr:c=>ci(c*c,t),add:(c,l)=>ci(c+l,t),sub:(c,l)=>ci(c-l,t),mul:(c,l)=>ci(c*l,t),pow:(c,l)=>E1e(a,c,l),div:(c,l)=>ci(c*mR(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>mR(c,t),sqrt:r.sqrt||(c=>(o||(o=v1e(t)),o(a,c))),invertBatch:c=>C1e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?q1(c,i):Rg(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?v0(c):uh(c)}});return Object.freeze(a)}function Gz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Kz(t){const e=Gz(t);return e+Math.ceil(e/2)}function S1e(t,e,n=!1){const r=t.length,s=Gz(e),i=Kz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?v0(t):uh(t),a=ci(o,e-ur)+ur;return n?q1(a,s):Rg(a,s)}const nL=BigInt(0),Wb=BigInt(1);function NI(t,e){const n=e.negate();return t?n:e}function Yz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function RI(t,e){Yz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function A1e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function I1e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const PI=new WeakMap,Qz=new WeakMap;function kI(t){return Qz.get(t)||1}function x1e(t,e){return{constTimeNegate:NI,hasPrecomputes(n){return kI(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>nL;)r&Wb&&(s=s.add(i)),i=i.double(),r>>=Wb;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=RI(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=RI(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=Wb);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,v=p<0;p===0?c=c.add(NI(y,r[g])):a=a.add(NI(v,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=RI(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===nL)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=Wb),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=PI.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&PI.set(r,s(i))),i},wNAFCached(n,r,s){const i=kI(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=kI(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Yz(r,e),Qz.set(n,r),PI.delete(n)}}}function T1e(t,e,n,r){if(A1e(n,t),I1e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Wz(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Jz(t){return _1e(t.Fp),am(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Hz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Of=BigInt(0),OI=BigInt(1);function N1e(t){return am(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function R1e(t){const e=N1e(t),{P:n}=e,r=v=>ci(v,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),c=e.powPminus2||(v=>qz(v,n-BigInt(2),n));function l(v,b,E){const C=r(v*(b-E));return b=r(b-C),E=r(E+C),[b,E]}const u=(e.a-BigInt(2))/BigInt(4);function d(v,b){Zc("u",v,Of,n),Zc("scalar",b,Of,n);const E=b,C=v;let A=OI,I=Of,x=v,S=OI,O=Of,P;for(let q=BigInt(s-1);q>=Of;q--){const B=E>>q&OI;O^=B,P=l(O,A,x),A=P[0],x=P[1],P=l(O,I,S),I=P[0],S=P[1],O=B;const N=A+I,T=r(N*N),$=A-I,R=r($*$),D=T-R,U=x+S,H=x-S,te=r(H*N),oe=r(U*$),re=te+oe,ie=te-oe;x=r(re*re),S=r(C*r(ie*ie)),A=r(T*R),I=r(D*(T+r(u*D)))}P=l(O,A,x),A=P[0],x=P[1],P=l(O,I,S),I=P[0],S=P[1];const j=c(I);return r(A*j)}function h(v){return q1(r(v),i)}function f(v){const b=Li("u coordinate",v,i);return o===32&&(b[31]&=127),v0(b)}function p(v){const b=Li("scalar",v),E=b.length;if(E!==i&&E!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+E)}return v0(a(b))}function g(v,b){const E=f(b),C=p(v),A=d(E,C);if(A===Of)throw new Error("invalid private or public key received");return h(A)}const w=h(e.Gu);function y(v){return g(v,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(v,b)=>g(v,b),getPublicKey:v=>y(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const yR=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const P1e=BigInt(1),rL=BigInt(2),k1e=BigInt(3),O1e=BigInt(5);BigInt(8);function D1e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=yR,o=t*t%i*t%i,a=Ho(o,rL,i)*o%i,c=Ho(a,P1e,i)*t%i,l=Ho(c,O1e,i)*c%i,u=Ho(l,e,i)*l%i,d=Ho(u,n,i)*u%i,h=Ho(d,r,i)*d%i,f=Ho(h,s,i)*h%i,p=Ho(f,s,i)*h%i,g=Ho(p,e,i)*l%i;return{pow_p_5_8:Ho(g,rL,i)*t%i,b2:o}}function $1e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const wR=R1e({P:yR,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=yR,{pow_p_5_8:n,b2:r}=D1e(t);return ci(Ho(n,k1e,e)*r,e)},adjustScalarBytes:$1e,randomBytes:om});function sL(t){t.lowS!==void 0&&xg("lowS",t.lowS),t.prehash!==void 0&&xg("prehash",t.prehash)}function M1e(t){const e=Jz(t);am(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:L1e,hexToBytes:U1e}=m1e;class j1e extends Error{constructor(e=""){super(e)}}const jc={Err:j1e,_tlv:{encode:(t,e)=>{const{Err:n}=jc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Cp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Cp(s.length/2|128):"";return Cp(t)+i+s+e},decode(t,e){const{Err:n}=jc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=jc;if(t<zc)throw new e("integer: negative integers are not allowed");let n=Cp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=jc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return L1e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=jc,s=typeof t=="string"?U1e(t):t;Sv(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=jc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},zc=BigInt(0),Dr=BigInt(1);BigInt(2);const iL=BigInt(3);BigInt(4);function B1e(t){const e=M1e(t),{Fp:n}=e,r=Vz(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const v=w.toAffine();return b0(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),v=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:v}});function o(g){const{a:w,b:y}=e,v=n.sqr(g),b=n.mul(v,g);return n.add(n.add(b,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return H1(g,Dr,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:v,n:b}=e;if(w&&typeof g!="bigint"){if(Lh(g)&&(g=Tg(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let E;try{E=typeof g=="bigint"?g:uh(Li("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return v&&(E=ci(E,b)),Zc("private key",E,Dr,b),E}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=pR((g,w)=>{const{px:y,py:v,pz:b}=g;if(n.eql(b,n.ONE))return{x:y,y:v};const E=g.is0();w==null&&(w=E?n.ONE:n.inv(b));const C=n.mul(y,w),A=n.mul(v,w),I=n.mul(b,w);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:C,y:A}}),d=pR(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const v=n.sqr(y),b=o(w);if(!n.eql(v,b))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,v){if(this.px=w,this.py=y,this.pz=v,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:v}=w||{};if(!w||!n.isValid(y)||!n.isValid(v))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const b=E=>n.eql(E,n.ZERO);return b(y)&&b(v)?h.ZERO:new h(y,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(v=>v.pz));return w.map((v,b)=>v.toAffine(y[b])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Li("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return T1e(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:v,pz:b}=this,{px:E,py:C,pz:A}=w,I=n.eql(n.mul(y,A),n.mul(E,b)),x=n.eql(n.mul(v,A),n.mul(C,b));return I&&x}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,v=n.mul(y,iL),{px:b,py:E,pz:C}=this;let A=n.ZERO,I=n.ZERO,x=n.ZERO,S=n.mul(b,b),O=n.mul(E,E),P=n.mul(C,C),j=n.mul(b,E);return j=n.add(j,j),x=n.mul(b,C),x=n.add(x,x),A=n.mul(w,x),I=n.mul(v,P),I=n.add(A,I),A=n.sub(O,I),I=n.add(O,I),I=n.mul(A,I),A=n.mul(j,A),x=n.mul(v,x),P=n.mul(w,P),j=n.sub(S,P),j=n.mul(w,j),j=n.add(j,x),x=n.add(S,S),S=n.add(x,S),S=n.add(S,P),S=n.mul(S,j),I=n.add(I,S),P=n.mul(E,C),P=n.add(P,P),S=n.mul(P,j),A=n.sub(A,S),x=n.mul(P,O),x=n.add(x,x),x=n.add(x,x),new h(A,I,x)}add(w){l(w);const{px:y,py:v,pz:b}=this,{px:E,py:C,pz:A}=w;let I=n.ZERO,x=n.ZERO,S=n.ZERO;const O=e.a,P=n.mul(e.b,iL);let j=n.mul(y,E),q=n.mul(v,C),B=n.mul(b,A),N=n.add(y,v),T=n.add(E,C);N=n.mul(N,T),T=n.add(j,q),N=n.sub(N,T),T=n.add(y,b);let $=n.add(E,A);return T=n.mul(T,$),$=n.add(j,B),T=n.sub(T,$),$=n.add(v,b),I=n.add(C,A),$=n.mul($,I),I=n.add(q,B),$=n.sub($,I),S=n.mul(O,T),I=n.mul(P,B),S=n.add(I,S),I=n.sub(q,S),S=n.add(q,S),x=n.mul(I,S),q=n.add(j,j),q=n.add(q,j),B=n.mul(O,B),T=n.mul(P,T),q=n.add(q,B),B=n.sub(j,B),B=n.mul(O,B),T=n.add(T,B),j=n.mul(q,T),x=n.add(x,j),j=n.mul($,T),I=n.mul(N,I),I=n.sub(I,j),j=n.mul(N,q),S=n.mul($,S),S=n.add(S,j),new h(I,x,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:v}=e;Zc("scalar",w,zc,v);const b=h.ZERO;if(w===zc)return b;if(this.is0()||w===Dr)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:E,k1:C,k2neg:A,k2:I}=y.splitScalar(w),x=b,S=b,O=this;for(;C>zc||I>zc;)C&Dr&&(x=x.add(O)),I&Dr&&(S=S.add(O)),O=O.double(),C>>=Dr,I>>=Dr;return E&&(x=x.negate()),A&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),x.add(S)}multiply(w){const{endo:y,n:v}=e;Zc("scalar",w,Dr,v);let b,E;if(y){const{k1neg:C,k1:A,k2neg:I,k2:x}=y.splitScalar(w);let{p:S,f:O}=this.wNAF(A),{p:P,f:j}=this.wNAF(x);S=p.constTimeNegate(C,S),P=p.constTimeNegate(I,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),b=S.add(P),E=O.add(j)}else{const{p:C,f:A}=this.wNAF(w);b=C,E=A}return h.normalizeZ([b,E])[0]}multiplyAndAddUnsafe(w,y,v){const b=h.BASE,E=(A,I)=>I===zc||I===Dr||!A.equals(b)?A.multiplyUnsafe(I):A.multiply(I),C=E(this,y).add(E(w,v));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===Dr)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===Dr?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return xg("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return xg("isCompressed",w),Tg(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=x1e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function F1e(t){const e=Jz(t);return am(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function W1e(t){const e=F1e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(B){return ci(B,r)}function a(B){return mR(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=B1e({...e,toBytes(B,N,T){const $=N.toAffine(),R=n.toBytes($.x),D=b0;return xg("isCompressed",T),T?D(Uint8Array.from([N.hasEvenY()?2:3]),R):D(Uint8Array.from([4]),R,n.toBytes($.y))},fromBytes(B){const N=B.length,T=B[0],$=B.subarray(1);if(N===s&&(T===2||T===3)){const R=uh($);if(!H1(R,Dr,n.ORDER))throw new Error("Point is not on curve");const D=u(R);let U;try{U=n.sqrt(D)}catch(te){const oe=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+oe)}const H=(U&Dr)===Dr;return(T&1)===1!==H&&(U=n.neg(U)),{x:R,y:U}}else if(N===i&&T===4){const R=n.fromBytes($.subarray(0,n.BYTES)),D=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:R,y:D}}else{const R=s,D=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+D+", got "+N)}}}),h=B=>Tg(Rg(B,e.nByteLength));function f(B){const N=r>>Dr;return B>N}function p(B){return f(B)?o(-B):B}const g=(B,N,T)=>uh(B.slice(N,T));class w{constructor(N,T,$){this.r=N,this.s=T,this.recovery=$,this.assertValidity()}static fromCompact(N){const T=e.nByteLength;return N=Li("compactSignature",N,T*2),new w(g(N,0,T),g(N,T,2*T))}static fromDER(N){const{r:T,s:$}=jc.toSig(Li("DER",N));return new w(T,$)}assertValidity(){Zc("r",this.r,Dr,r),Zc("s",this.s,Dr,r)}addRecoveryBit(N){return new w(this.r,this.s,N)}recoverPublicKey(N){const{r:T,s:$,recovery:R}=this,D=A(Li("msgHash",N));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const U=R===2||R===3?T+e.n:T;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=R&1?"03":"02",te=c.fromHex(H+h(U)),oe=a(U),re=o(-D*oe),ie=o($*oe),ye=c.BASE.multiplyAndAddUnsafe(te,re,ie);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ng(this.toDERHex())}toDERHex(){return jc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ng(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(B){try{return l(B),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const B=Kz(e.n);return S1e(e.randomBytes(B),e.n)},precompute(B=8,N=c.BASE){return N._setWindowSize(B),N.multiply(BigInt(3)),N}};function v(B,N=!0){return c.fromPrivateKey(B).toRawBytes(N)}function b(B){const N=Lh(B),T=typeof B=="string",$=(N||T)&&B.length;return N?$===s||$===i:T?$===2*s||$===2*i:B instanceof c}function E(B,N,T=!0){if(b(B))throw new Error("first arg must be private key");if(!b(N))throw new Error("second arg must be public key");return c.fromHex(N).multiply(l(B)).toRawBytes(T)}const C=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const N=uh(B),T=B.length*8-e.nBitLength;return T>0?N>>BigInt(T):N},A=e.bits2int_modN||function(B){return o(C(B))},I=FO(e.nBitLength);function x(B){return Zc("num < 2^"+e.nBitLength,B,zc,I),Rg(B,e.nByteLength)}function S(B,N,T=O){if(["recovered","canonical"].some(Y=>Y in T))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:R}=e;let{lowS:D,prehash:U,extraEntropy:H}=T;D==null&&(D=!0),B=Li("msgHash",B),sL(T),U&&(B=Li("prehashed msgHash",$(B)));const te=A(B),oe=l(N),re=[x(oe),x(te)];if(H!=null&&H!==!1){const Y=H===!0?R(n.BYTES):H;re.push(Li("extraEntropy",Y))}const ie=b0(...re),ye=te;function Z(Y){const ue=C(Y);if(!d(ue))return;const ne=a(ue),ce=c.BASE.multiply(ue).toAffine(),$e=o(ce.x);if($e===zc)return;const de=o(ne*o(ye+$e*oe));if(de===zc)return;let we=(ce.x===$e?0:2)|Number(ce.y&Dr),We=de;return D&&f(de)&&(We=p(de),we^=1),new w($e,We,we)}return{seed:ie,k2sig:Z}}const O={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function j(B,N,T=O){const{seed:$,k2sig:R}=S(B,N,T),D=e;return zz(D.hash.outputLen,D.nByteLength,D.hmac)($,R)}c.BASE._setWindowSize(8);function q(B,N,T,$=P){var de;const R=B;N=Li("msgHash",N),T=Li("publicKey",T);const{lowS:D,prehash:U,format:H}=$;if(sL($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const te=typeof R=="string"||Lh(R),oe=!te&&!H&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!te&&!oe)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let re,ie;try{if(oe&&(re=new w(R.r,R.s)),te){try{H!=="compact"&&(re=w.fromDER(R))}catch(we){if(!(we instanceof jc.Err))throw we}!re&&H!=="der"&&(re=w.fromCompact(R))}ie=c.fromHex(T)}catch{return!1}if(!re||D&&re.hasHighS())return!1;U&&(N=e.hash(N));const{r:ye,s:Z}=re,Y=A(N),ue=a(Z),ne=o(Y*ue),ce=o(ye*ue),$e=(de=c.BASE.multiplyAndAddUnsafe(ie,ne,ce))==null?void 0:de.toAffine();return $e?o($e.x)===ye:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:E,sign:j,verify:q,ProjectivePoint:c,Signature:w,utils:y}}function z1e(t){return{hash:t,hmac:(e,...n)=>F1(t,e,GEe(...n)),randomBytes:om}}function q1e(t,e){const n=r=>W1e({...t,...z1e(r)});return{...n(e),create:n}}const Zz=Vz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),H1e=Zz.create(BigInt("-3")),V1e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),G1e=q1e({a:H1e,b:V1e,Fp:Zz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Cv),Xz="base10",Us="base16",aa="base64pad",Yl="base64url",Av="utf8",eq=0,Xc=1,Iv=2,K1e=0,oL=1,Qy=12,WO=32;function Y1e(){const t=wR.utils.randomPrivateKey(),e=wR.getPublicKey(t);return{privateKey:vi(t,Us),publicKey:vi(e,Us)}}function vR(){const t=om(WO);return vi(t,Us)}function Q1e(t,e){const n=wR.getSharedSecret(_o(t,Us),_o(e,Us)),r=e1e(Cv,n,void 0,void 0,WO);return vi(r,Us)}function L_(t){const e=Cv(_o(t,Us));return vi(e,Us)}function za(t){const e=Cv(_o(t,Av));return vi(e,Us)}function tq(t){return _o(`${t}`,Xz)}function Uh(t){return Number(vi(t,Xz))}function nq(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function rq(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function J1e(t){const e=tq(typeof t.type<"u"?t.type:eq);if(Uh(e)===Xc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?_o(t.senderPublicKey,Us):void 0,r=typeof t.iv<"u"?_o(t.iv,Us):om(Qy),s=_o(t.symKey,Us),i=Bz(s,r).encrypt(_o(t.message,Av)),o=sq({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Yl?nq(o):o}function Z1e(t){const e=_o(t.symKey,Us),{sealed:n,iv:r}=_0({encoded:t.encoded,encoding:t.encoding}),s=Bz(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return vi(s,Av)}function X1e(t,e){const n=tq(Iv),r=om(Qy),s=_o(t,Av),i=sq({type:n,sealed:s,iv:r});return e===Yl?nq(i):i}function eSe(t,e){const{sealed:n}=_0({encoded:t,encoding:e});return vi(n,Av)}function sq(t){if(Uh(t.type)===Iv)return vi(Gy([t.type,t.sealed]),aa);if(Uh(t.type)===Xc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return vi(Gy([t.type,t.senderPublicKey,t.iv,t.sealed]),aa)}return vi(Gy([t.type,t.iv,t.sealed]),aa)}function _0(t){const e=(t.encoding||aa)===Yl?rq(t.encoded):t.encoded,n=_o(e,aa),r=n.slice(K1e,oL),s=oL;if(Uh(r)===Xc){const c=s+WO,l=c+Qy,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Uh(r)===Iv){const c=n.slice(s),l=om(Qy);return{type:r,sealed:c,iv:l}}const i=s+Qy,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function tSe(t,e){const n=_0({encoded:t,encoding:e==null?void 0:e.encoding});return iq({type:Uh(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?vi(n.senderPublicKey,Us):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function iq(t){const e=(t==null?void 0:t.type)||eq;if(e===Xc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function aL(t){return t.type===Xc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function cL(t){return t.type===Iv}function nSe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Gy([new Uint8Array([4]),e,n])}function rSe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(rq(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Cv(c),u=nSe(e);if(!G1e.verify(Gy([o,a]),l,u))throw new Error("Invalid signature");return QN(t).payload}const sSe="irn";function ZE(t){return(t==null?void 0:t.relay)||{protocol:sSe}}function Ey(t){const e=uwe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function iSe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function lL(t){if(!t.includes("wc:")){const l=xz(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:oSe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:iSe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function oSe(t){return t.startsWith("//")?t.substring(2):t}function aSe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function uL(t){const e=new URLSearchParams,n=aSe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function zb(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var cSe=Object.defineProperty,lSe=Object.defineProperties,uSe=Object.getOwnPropertyDescriptors,dL=Object.getOwnPropertySymbols,dSe=Object.prototype.hasOwnProperty,hSe=Object.prototype.propertyIsEnumerable,hL=(t,e,n)=>e in t?cSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fSe=(t,e)=>{for(var n in e||(e={}))dSe.call(e,n)&&hL(t,n,e[n]);if(dL)for(var n of dL(e))hSe.call(e,n)&&hL(t,n,e[n]);return t},pSe=(t,e)=>lSe(t,uSe(e));function cm(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function gSe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...cm(n.accounts))}),e}function mSe(t,e){const n=[];return Object.values(t).forEach(r=>{cm(r.accounts).includes(e)&&n.push(...r.methods)}),n}function ySe(t,e){const n=[];return Object.values(t).forEach(r=>{cm(r.accounts).includes(e)&&n.push(...r.events)}),n}function V1(t){return t.includes(":")}function Sp(t){return V1(t)?t.split(":")[0]:t}function fL(t){var e,n,r;const s={};if(!ku(t))return s;for(const[i,o]of Object.entries(t)){const a=V1(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Sp(i);s[u]=pSe(fSe({},s[u]),{chains:rc(a,(e=s[u])==null?void 0:e.chains),methods:rc(c,(n=s[u])==null?void 0:n.methods),events:rc(l,(r=s[u])==null?void 0:r.events)})}return s}function wSe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function pL(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=wSe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=rc(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function vSe(t,e){var n,r,s,i,o,a;const c=fL(t),l=fL(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:rc((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:rc((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:rc((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const bSe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},_Se={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function _e(t,e){const{message:n,code:r}=_Se[t];return{message:e?`${n} ${e}`:n,code:r}}function pn(t,e){const{message:n,code:r}=bSe[t];return{message:e?`${n} ${e}`:n,code:r}}function Pu(t,e){return!!Array.isArray(t)}function ku(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ts(t){return typeof t>"u"}function pr(t,e){return e&&ts(t)?!0:typeof t=="string"&&!!t.trim().length}function zO(t,e){return e&&ts(t)?!0:typeof t=="number"&&!isNaN(t)}function ESe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Vd(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=cm(a),d=n[o];(!Vd(Ez(o,d),u)||!Vd(d.methods,c)||!Vd(d.events,l))&&(i=!1)}),i):!1}function XE(t){return pr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function CSe(t){if(pr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&XE(n)}}return!1}function SSe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(pr(t,!1)){if(e(t))return!0;const n=xz(t);return e(n)}}catch{}return!1}function ASe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function ISe(t){return t==null?void 0:t.topic}function xSe(t,e){let n=null;return pr(t==null?void 0:t.publicKey,!1)||(n=_e("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function gL(t){let e=!0;return Pu(t)?t.length&&(e=t.every(n=>pr(n,!1))):e=!1,e}function TSe(t,e,n){let r=null;return Pu(e)&&e.length?e.forEach(s=>{r||XE(s)||(r=pn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):XE(t)||(r=pn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function NSe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=TSe(s,Ez(s,i),`${e} ${n}`);o&&(r=o)}),r}function RSe(t,e){let n=null;return Pu(t)?t.forEach(r=>{n||CSe(r)||(n=pn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=pn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function PSe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=RSe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function kSe(t,e){let n=null;return gL(t==null?void 0:t.methods)?gL(t==null?void 0:t.events)||(n=pn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=pn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function oq(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=kSe(r,`${e}, namespace`);s&&(n=s)}),n}function OSe(t,e,n){let r=null;if(t&&ku(t)){const s=oq(t,e);s&&(r=s);const i=NSe(t,e,n);i&&(r=i)}else r=_e("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function DI(t,e){let n=null;if(t&&ku(t)){const r=oq(t,e);r&&(n=r);const s=PSe(t,e);s&&(n=s)}else n=_e("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function aq(t){return pr(t.protocol,!0)}function DSe(t,e){let n=!1;return t?t&&Pu(t)&&t.length&&t.forEach(r=>{n=aq(r)}):n=!0,n}function $Se(t){return typeof t=="number"}function ni(t){return typeof t<"u"&&typeof t!==null}function MSe(t){return!(!t||typeof t!="object"||!t.code||!zO(t.code,!1)||!t.message||!pr(t.message,!1))}function LSe(t){return!(ts(t)||!pr(t.method,!1))}function USe(t){return!(ts(t)||ts(t.result)&&ts(t.error)||!zO(t.id,!1)||!pr(t.jsonrpc,!1))}function jSe(t){return!(ts(t)||!pr(t.name,!1))}function mL(t,e){return!(!XE(e)||!gSe(t).includes(e))}function BSe(t,e,n){return pr(n,!1)?mSe(t,e).includes(n):!1}function FSe(t,e,n){return pr(n,!1)?ySe(t,e).includes(n):!1}function yL(t,e,n){let r=null;const s=WSe(t),i=zSe(e),o=Object.keys(s),a=Object.keys(i),c=wL(Object.keys(t)),l=wL(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Vd(o,a)||(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=cm(e[d].accounts);h.includes(d)||(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Vd(s[d].methods,i[d].methods)?Vd(s[d].events,i[d].events)||(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function WSe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function wL(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function zSe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=cm(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function qSe(t,e){return zO(t,!1)&&t<=e.max&&t>=e.min}function vL(){const t=_v();return new Promise(e=>{switch(t){case Wi.browser:e(HSe());break;case Wi.reactNative:e(VSe());break;case Wi.node:e(GSe());break;default:e(!0)}})}function HSe(){return im()&&(navigator==null?void 0:navigator.onLine)}async function VSe(){if(rd()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function GSe(){return!0}function KSe(t){switch(_v()){case Wi.browser:YSe(t);break;case Wi.reactNative:QSe(t);break}}function YSe(t){!rd()&&im()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function QSe(t){rd()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function JSe(){var t;return im()&&Ph()?((t=Ph())==null?void 0:t.visibilityState)==="visible":!0}const $I={};class Jm{static get(e){return $I[e]}static set(e,n){$I[e]=n}static delete(e){delete $I[e]}}var ZSe={};const cq="wc",lq=2,bR="core",uc=`${cq}@2:${bR}:`,XSe={logger:"error"},eAe={database:":memory:"},tAe="crypto",bL="client_ed25519_seed",nAe=ve.ONE_DAY,rAe="keychain",sAe="0.3",iAe="messages",oAe="0.3",_L=ve.SIX_HOURS,aAe="publisher",uq="irn",cAe="error",dq="wss://relay.walletconnect.org",lAe="relayer",Ur={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},uAe="_subscription",oo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dAe=.1,_R="2.21.0",$n={link_mode:"link_mode",relay:"relay"},U_={inbound:"inbound",outbound:"outbound"},hAe="0.3",fAe="WALLETCONNECT_CLIENT_ID",EL="WALLETCONNECT_LINK_MODE_APPS",Di={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},pAe="subscription",gAe="0.3",mAe="pairing",yAe="0.3",Zm={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},Od={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Bo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},wAe="history",vAe="0.3",bAe="expirer",ho={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},_Ae="0.3",EAe="verify-api",CAe="https://verify.walletconnect.com",hq="https://verify.walletconnect.org",Jy=hq,SAe=`${Jy}/v3`,AAe=[CAe,hq],IAe="echo",xAe="https://echo.walletconnect.com",Da={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Oc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Fo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},gd={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},md={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Xm={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},TAe=.1,NAe="event-client",RAe=86400,PAe="https://pulse.walletconnect.org/batch";function kAe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,g++;for(var b=(v-y)*u+1>>>0,E=new Uint8Array(b);y!==v;){for(var C=p[y],A=0,I=b-1;(C!==0||A<w)&&I!==-1;I--,A++)C+=256*E[I]>>>0,E[I]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=A,y++}for(var x=b-w;x!==b&&E[x]===0;)x++;for(var S=c.repeat(g);x<b;++x)S+=t.charAt(E[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var C=0,A=v-1;(E!==0||C<y)&&A!==-1;A--,C++)E+=a*b[A]>>>0,b[A]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var I=v-y;I!==v&&b[I]===0;)I++;for(var x=new Uint8Array(w+(v-I)),S=w;I!==v;)x[S++]=b[I++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var OAe=kAe,DAe=OAe;const fq=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},$Ae=t=>new TextEncoder().encode(t),MAe=t=>new TextDecoder().decode(t);class LAe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class UAe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pq(this,e)}}class jAe{constructor(e){this.decoders=e}or(e){return pq(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pq=(t,e)=>new jAe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class BAe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new LAe(e,n,r),this.decoder=new UAe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const G1=({name:t,prefix:e,encode:n,decode:r})=>new BAe(t,e,n,r),xv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=DAe(n,e);return G1({prefix:t,name:e,encode:r,decode:i=>fq(s(i))})},FAe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},WAe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},us=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>G1({prefix:e,name:t,encode(s){return WAe(s,r,n)},decode(s){return FAe(s,r,n,t)}}),zAe=G1({prefix:"\0",name:"identity",encode:t=>MAe(t),decode:t=>$Ae(t)});var qAe=Object.freeze({__proto__:null,identity:zAe});const HAe=us({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var VAe=Object.freeze({__proto__:null,base2:HAe});const GAe=us({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var KAe=Object.freeze({__proto__:null,base8:GAe});const YAe=xv({prefix:"9",name:"base10",alphabet:"0123456789"});var QAe=Object.freeze({__proto__:null,base10:YAe});const JAe=us({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ZAe=us({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var XAe=Object.freeze({__proto__:null,base16:JAe,base16upper:ZAe});const eIe=us({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tIe=us({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nIe=us({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rIe=us({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sIe=us({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),iIe=us({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oIe=us({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),aIe=us({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cIe=us({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lIe=Object.freeze({__proto__:null,base32:eIe,base32upper:tIe,base32pad:nIe,base32padupper:rIe,base32hex:sIe,base32hexupper:iIe,base32hexpad:oIe,base32hexpadupper:aIe,base32z:cIe});const uIe=xv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dIe=xv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var hIe=Object.freeze({__proto__:null,base36:uIe,base36upper:dIe});const fIe=xv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pIe=xv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var gIe=Object.freeze({__proto__:null,base58btc:fIe,base58flickr:pIe});const mIe=us({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yIe=us({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wIe=us({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vIe=us({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var bIe=Object.freeze({__proto__:null,base64:mIe,base64pad:yIe,base64url:wIe,base64urlpad:vIe});const gq=Array.from(""),_Ie=gq.reduce((t,e,n)=>(t[n]=e,t),[]),EIe=gq.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function CIe(t){return t.reduce((e,n)=>(e+=_Ie[n],e),"")}function SIe(t){const e=[];for(const n of t){const r=EIe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const AIe=G1({prefix:"",name:"base256emoji",encode:CIe,decode:SIe});var IIe=Object.freeze({__proto__:null,base256emoji:AIe}),xIe=mq,CL=128,TIe=-128,NIe=Math.pow(2,31);function mq(t,e,n){e=e||[],n=n||0;for(var r=n;t>=NIe;)e[n++]=t&255|CL,t/=128;for(;t&TIe;)e[n++]=t&255|CL,t>>>=7;return e[n]=t|0,mq.bytes=n-r+1,e}var RIe=ER,PIe=128,SL=127;function ER(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw ER.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&SL)<<s:(o&SL)*Math.pow(2,s),s+=7}while(o>=PIe);return ER.bytes=i-r,n}var kIe=Math.pow(2,7),OIe=Math.pow(2,14),DIe=Math.pow(2,21),$Ie=Math.pow(2,28),MIe=Math.pow(2,35),LIe=Math.pow(2,42),UIe=Math.pow(2,49),jIe=Math.pow(2,56),BIe=Math.pow(2,63),FIe=function(t){return t<kIe?1:t<OIe?2:t<DIe?3:t<$Ie?4:t<MIe?5:t<LIe?6:t<UIe?7:t<jIe?8:t<BIe?9:10},WIe={encode:xIe,decode:RIe,encodingLength:FIe},yq=WIe;const AL=(t,e,n=0)=>(yq.encode(t,e,n),e),IL=t=>yq.encodingLength(t),CR=(t,e)=>{const n=e.byteLength,r=IL(t),s=r+IL(n),i=new Uint8Array(s+n);return AL(t,i,0),AL(n,i,r),i.set(e,s),new zIe(t,n,e,i)};class zIe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const wq=({name:t,code:e,encode:n})=>new qIe(t,e,n);class qIe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?CR(this.code,n):n.then(r=>CR(this.code,r))}else throw Error("Unknown type, must be binary type")}}const vq=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),HIe=wq({name:"sha2-256",code:18,encode:vq("SHA-256")}),VIe=wq({name:"sha2-512",code:19,encode:vq("SHA-512")});var GIe=Object.freeze({__proto__:null,sha256:HIe,sha512:VIe});const bq=0,KIe="identity",_q=fq,YIe=t=>CR(bq,_q(t)),QIe={code:bq,name:KIe,encode:_q,digest:YIe};var JIe=Object.freeze({__proto__:null,identity:QIe});new TextEncoder,new TextDecoder;const xL={...qAe,...VAe,...KAe,...QAe,...XAe,...lIe,...hIe,...gIe,...bIe,...IIe};({...GIe,...JIe});function ZIe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Eq(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const TL=Eq("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),MI=Eq("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ZIe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),XIe={utf8:TL,"utf-8":TL,hex:xL.base16,latin1:MI,ascii:MI,binary:MI,...xL};function exe(t,e="utf8"){const n=XIe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var txe=Object.defineProperty,nxe=(t,e,n)=>e in t?txe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pa=(t,e,n)=>nxe(t,typeof e!="symbol"?e+"":e,n);class rxe{constructor(e,n){this.core=e,this.logger=n,Pa(this,"keychain",new Map),Pa(this,"name",rAe),Pa(this,"version",sAe),Pa(this,"initialized",!1),Pa(this,"storagePrefix",uc),Pa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Pa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Pa(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Pa(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=_e("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Pa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=as(n,this.name)}get context(){return Si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,cR(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?lR(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sxe=Object.defineProperty,ixe=(t,e,n)=>e in t?sxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yr=(t,e,n)=>ixe(t,typeof e!="symbol"?e+"":e,n);class oxe{constructor(e,n,r){this.core=e,this.logger=n,Yr(this,"name",tAe),Yr(this,"keychain"),Yr(this,"randomSessionIdentifier",vR()),Yr(this,"initialized",!1),Yr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Yr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Yr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=F5(s);return B7(i.publicKey)}),Yr(this,"generateKeyPair",()=>{this.isInitialized();const s=Y1e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Yr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=F5(i),a=this.randomSessionIdentifier;return await Bme(a,s,nAe,o)}),Yr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Q1e(a,i);return this.setSymKey(c,o)}),Yr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||L_(s);return await this.keychain.set(o,s),o}),Yr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Yr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Yr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=iq(o),c=ll(i);if(cL(a))return X1e(c,o==null?void 0:o.encoding);if(aL(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return J1e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Yr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=tSe(i,o);if(cL(a)){const c=eSe(i,o==null?void 0:o.encoding);return Rh(c)}if(aL(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Z1e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Rh(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Yr(this,"getPayloadType",(s,i=aa)=>{const o=_0({encoded:s,encoding:i});return Uh(o.type)}),Yr(this,"getPayloadSenderPublicKey",(s,i=aa)=>{const o=_0({encoded:s,encoding:i});return o.senderPublicKey?vi(o.senderPublicKey,Us):void 0}),this.core=e,this.logger=as(n,this.name),this.keychain=r||new rxe(this.core,this.logger)}get context(){return Si(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(bL)}catch{e=vR(),await this.keychain.set(bL,e)}return exe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var axe=Object.defineProperty,cxe=Object.defineProperties,lxe=Object.getOwnPropertyDescriptors,NL=Object.getOwnPropertySymbols,uxe=Object.prototype.hasOwnProperty,dxe=Object.prototype.propertyIsEnumerable,SR=(t,e,n)=>e in t?axe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hxe=(t,e)=>{for(var n in e||(e={}))uxe.call(e,n)&&SR(t,n,e[n]);if(NL)for(var n of NL(e))dxe.call(e,n)&&SR(t,n,e[n]);return t},fxe=(t,e)=>cxe(t,lxe(e)),xi=(t,e,n)=>SR(t,typeof e!="symbol"?e+"":e,n);class pxe extends u_e{constructor(e,n){super(e,n),this.logger=e,this.core=n,xi(this,"messages",new Map),xi(this,"messagesWithoutClientAck",new Map),xi(this,"name",iAe),xi(this,"version",oAe),xi(this,"initialized",!1),xi(this,"storagePrefix",uc),xi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),xi(this,"set",async(r,s,i)=>{this.isInitialized();const o=za(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===U_.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,fxe(hxe({},c),{[o]:s}))}return await this.persist(),o}),xi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),xi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),xi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=za(s);return typeof i[o]<"u"}),xi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=za(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),xi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=as(e,this.name),this.core=n}get context(){return Si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,cR(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,cR(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?lR(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?lR(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gxe=Object.defineProperty,mxe=Object.defineProperties,yxe=Object.getOwnPropertyDescriptors,RL=Object.getOwnPropertySymbols,wxe=Object.prototype.hasOwnProperty,vxe=Object.prototype.propertyIsEnumerable,AR=(t,e,n)=>e in t?gxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qb=(t,e)=>{for(var n in e||(e={}))wxe.call(e,n)&&AR(t,n,e[n]);if(RL)for(var n of RL(e))vxe.call(e,n)&&AR(t,n,e[n]);return t},LI=(t,e)=>mxe(t,yxe(e)),Wo=(t,e,n)=>AR(t,typeof e!="symbol"?e+"":e,n);class bxe extends d_e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Wo(this,"events",new Oo.EventEmitter),Wo(this,"name",aAe),Wo(this,"queue",new Map),Wo(this,"publishTimeout",ve.toMiliseconds(ve.ONE_MINUTE)),Wo(this,"initialPublishTimeout",ve.toMiliseconds(ve.ONE_SECOND*15)),Wo(this,"needsTransportRestart",!1),Wo(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||_L,c=ZE(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Hd().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:v})=>{h.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(Ur.publish,w),g(h))};this.relayer.events.on(Ur.publish,w);const y=fu(new Promise((v,b)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),b(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Ur.publish,w)}catch(v){this.queue.set(d,LI(qb({},h),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await fu(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Wo(this,"on",(r,s)=>{this.events.on(r,s)}),Wo(this,"once",(r,s)=>{this.events.once(r,s)}),Wo(this,"off",(r,s)=>{this.events.off(r,s)}),Wo(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=as(n,this.name),this.registerEventListeners()}get context(){return Si(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=_L,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Ey(ZE().protocol).publish,params:qb({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};ts((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),ts((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Ur.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,LI(qb({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(LI(qb({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(rf.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ur.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ur.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var _xe=Object.defineProperty,Exe=(t,e,n)=>e in t?_xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Df=(t,e,n)=>Exe(t,typeof e!="symbol"?e+"":e,n);class Cxe{constructor(){Df(this,"map",new Map),Df(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Df(this,"get",e=>this.map.get(e)||[]),Df(this,"exists",(e,n)=>this.get(e).includes(n)),Df(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Df(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Sxe=Object.defineProperty,Axe=Object.defineProperties,Ixe=Object.getOwnPropertyDescriptors,PL=Object.getOwnPropertySymbols,xxe=Object.prototype.hasOwnProperty,Txe=Object.prototype.propertyIsEnumerable,IR=(t,e,n)=>e in t?Sxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ey=(t,e)=>{for(var n in e||(e={}))xxe.call(e,n)&&IR(t,n,e[n]);if(PL)for(var n of PL(e))Txe.call(e,n)&&IR(t,n,e[n]);return t},UI=(t,e)=>Axe(t,Ixe(e)),vn=(t,e,n)=>IR(t,typeof e!="symbol"?e+"":e,n);class Nxe extends p_e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,vn(this,"subscriptions",new Map),vn(this,"topicMap",new Cxe),vn(this,"events",new Oo.EventEmitter),vn(this,"name",pAe),vn(this,"version",gAe),vn(this,"pending",new Map),vn(this,"cached",[]),vn(this,"initialized",!1),vn(this,"storagePrefix",uc),vn(this,"subscribeTimeout",ve.toMiliseconds(ve.ONE_MINUTE)),vn(this,"initialSubscribeTimeout",ve.toMiliseconds(ve.ONE_SECOND*15)),vn(this,"clientId"),vn(this,"batchSubscribeTopicsLimit",500),vn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),vn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=ZE(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),vn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),vn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),vn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),vn(this,"on",(r,s)=>{this.events.on(r,s)}),vn(this,"once",(r,s)=>{this.events.once(r,s)}),vn(this,"off",(r,s)=>{this.events.off(r,s)}),vn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),vn(this,"start",async()=>{await this.onConnect()}),vn(this,"stop",async()=>{await this.onDisconnect()}),vn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),vn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),vn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(rf.pulse,async()=>{await this.checkPending()}),this.events.on(Di.created,async r=>{const s=Di.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Di.deleted,async r=>{const s=Di.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=as(n,this.name),this.clientId=""}get context(){return Si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=ZE(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=pn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===$n.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Ey(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===$n.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},ve.toMiliseconds(ve.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Di.created,d),u(h.id))};this.events.on(Di.created,d);try{const h=await fu(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Di.created,d),u(h)}catch{}}),l=await fu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ur.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Ey(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await fu(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ur.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Ey(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await fu(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ur.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Ey(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,UI(ey({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,ey({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,ey({},n)),this.topicMap.set(n.topic,e),this.events.emit(Di.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Di.deleted,UI(ey({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Di.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Di.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>UI(ey({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await MEe(ve.toMiliseconds(ve.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return za(e+await this.getClientId())}}var Rxe=Object.defineProperty,kL=Object.getOwnPropertySymbols,Pxe=Object.prototype.hasOwnProperty,kxe=Object.prototype.propertyIsEnumerable,xR=(t,e,n)=>e in t?Rxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OL=(t,e)=>{for(var n in e||(e={}))Pxe.call(e,n)&&xR(t,n,e[n]);if(kL)for(var n of kL(e))kxe.call(e,n)&&xR(t,n,e[n]);return t},qt=(t,e,n)=>xR(t,typeof e!="symbol"?e+"":e,n);class Oxe extends h_e{constructor(e){super(e),qt(this,"protocol","wc"),qt(this,"version",2),qt(this,"core"),qt(this,"logger"),qt(this,"events",new Oo.EventEmitter),qt(this,"provider"),qt(this,"messages"),qt(this,"subscriber"),qt(this,"publisher"),qt(this,"name",lAe),qt(this,"transportExplicitlyClosed",!1),qt(this,"initialized",!1),qt(this,"connectionAttemptInProgress",!1),qt(this,"relayUrl"),qt(this,"projectId"),qt(this,"packageName"),qt(this,"bundleId"),qt(this,"hasExperiencedNetworkDisruption",!1),qt(this,"pingTimeout"),qt(this,"heartBeatTimeout",ve.toMiliseconds(ve.THIRTY_SECONDS+ve.FIVE_SECONDS)),qt(this,"reconnectTimeout"),qt(this,"connectPromise"),qt(this,"reconnectInProgress",!1),qt(this,"requestsInFlight",[]),qt(this,"connectTimeout",ve.toMiliseconds(ve.ONE_SECOND*15)),qt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Hd().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),qt(this,"resetPingTimeout",()=>{QE()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),qt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),qt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Ur.connect)}),qt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),qt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Ur.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),qt(this,"registerProviderListeners",()=>{this.provider.on(oo.payload,this.onPayloadHandler),this.provider.on(oo.connect,this.onConnectHandler),this.provider.on(oo.disconnect,this.onDisconnectHandler),this.provider.on(oo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?as(e.logger,this.name):mv(of({level:e.logger||cAe})),this.messages=new pxe(this.logger,e.core),this.subscriber=new Nxe(this,this.logger),this.publisher=new bxe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||dq,this.projectId=e.projectId,bEe()?this.packageName=PM():_Ee()&&(this.bundleId=PM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Si(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:$n.relay},U_.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Di.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Di.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,OL({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await fu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await vL())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=wr(ve.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Ur.message,e),await this.recordMessageEvent(e,U_.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oo.disconnect,i),await fu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(oo.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(oo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ve.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(QE())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Do(new Zwe(IEe({sdkVersion:_R,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),DO(e)){if(!e.method.endsWith(uAe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:$n.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(OL({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else L1(e)&&this.events.emit(Ur.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,U_.inbound),this.events.emit(Ur.message,e))}async acknowledgePayload(e){const n=$1(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(oo.payload,this.onPayloadHandler),this.provider.off(oo.connect,this.onConnectHandler),this.provider.off(oo.disconnect,this.onDisconnectHandler),this.provider.off(oo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await vL();KSe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(rf.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&JSe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Ur.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ve.toMiliseconds(dAe)))))}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Dxe(){}function DL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function $L(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function ML(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const $xe="[object RegExp]",Mxe="[object String]",Lxe="[object Number]",Uxe="[object Boolean]",LL="[object Arguments]",jxe="[object Symbol]",Bxe="[object Date]",Fxe="[object Map]",Wxe="[object Set]",zxe="[object Array]",qxe="[object Function]",Hxe="[object ArrayBuffer]",jI="[object Object]",Vxe="[object Error]",Gxe="[object DataView]",Kxe="[object Uint8Array]",Yxe="[object Uint8ClampedArray]",Qxe="[object Uint16Array]",Jxe="[object Uint32Array]",Zxe="[object BigUint64Array]",Xxe="[object Int8Array]",eTe="[object Int16Array]",tTe="[object Int32Array]",nTe="[object BigInt64Array]",rTe="[object Float32Array]",sTe="[object Float64Array]";function iTe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function oTe(t,e,n){return Cy(t,e,void 0,void 0,void 0,void 0,n)}function Cy(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Zy(t,e,i,o)}return Zy(t,e,i,o)}function Zy(t,e,n,r){if(Object.is(t,e))return!0;let s=ML(t),i=ML(e);if(s===LL&&(s=jI),i===LL&&(i=jI),s!==i)return!1;switch(s){case Mxe:return t.toString()===e.toString();case Lxe:{const c=t.valueOf(),l=e.valueOf();return iTe(c,l)}case Uxe:case Bxe:case jxe:return Object.is(t.valueOf(),e.valueOf());case $xe:return t.source===e.source&&t.flags===e.flags;case qxe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Fxe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Cy(l,e.get(c),c,t,e,n,r))return!1;return!0}case Wxe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Cy(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case zxe:case Kxe:case Yxe:case Qxe:case Jxe:case Zxe:case Xxe:case eTe:case tTe:case nTe:case rTe:case sTe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Cy(t[c],e[c],c,t,e,n,r))return!1;return!0}case Hxe:return t.byteLength!==e.byteLength?!1:Zy(new Uint8Array(t),new Uint8Array(e),n,r);case Gxe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Zy(new Uint8Array(t),new Uint8Array(e),n,r);case Vxe:return t.name===e.name&&t.message===e.message;case jI:{if(!(Zy(t.constructor,e.constructor,n,r)||DL(t)&&DL(e)))return!1;const c=[...Object.keys(t),...$L(t)],l=[...Object.keys(e),...$L(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Cy(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function aTe(t,e){return oTe(t,e,Dxe)}var cTe=Object.defineProperty,UL=Object.getOwnPropertySymbols,lTe=Object.prototype.hasOwnProperty,uTe=Object.prototype.propertyIsEnumerable,TR=(t,e,n)=>e in t?cTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jL=(t,e)=>{for(var n in e||(e={}))lTe.call(e,n)&&TR(t,n,e[n]);if(UL)for(var n of UL(e))uTe.call(e,n)&&TR(t,n,e[n]);return t},Qs=(t,e,n)=>TR(t,typeof e!="symbol"?e+"":e,n);class cf extends f_e{constructor(e,n,r,s=uc,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Qs(this,"map",new Map),Qs(this,"version",hAe),Qs(this,"cached",[]),Qs(this,"initialized",!1),Qs(this,"getKey"),Qs(this,"storagePrefix",uc),Qs(this,"recentlyDeleted",[]),Qs(this,"recentlyDeletedLimit",200),Qs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ts(o)?this.map.set(this.getKey(o),o):ASe(o)?this.map.set(o.id,o):ISe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Qs(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Qs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Qs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>aTe(a[c],o[c]))):this.values)),Qs(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=jL(jL({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Qs(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=as(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=_e("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dTe=Object.defineProperty,hTe=(t,e,n)=>e in t?dTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ot=(t,e,n)=>hTe(t,typeof e!="symbol"?e+"":e,n);class fTe{constructor(e,n){this.core=e,this.logger=n,Ot(this,"name",mAe),Ot(this,"version",yAe),Ot(this,"events",new EO),Ot(this,"pairings"),Ot(this,"initialized",!1),Ot(this,"storagePrefix",uc),Ot(this,"ignoredPayloadTypes",[Xc]),Ot(this,"registeredMethods",[]),Ot(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ot(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ot(this,"create",async r=>{this.isInitialized();const s=vR(),i=await this.core.crypto.setSymKey(s),o=wr(ve.FIVE_MINUTES),a={protocol:uq},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=uL({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Od.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Ot(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Da.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=lL(r.uri);s.props.properties.topic=i,s.addTrace(Da.pairing_uri_validation_success),s.addTrace(Da.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Da.existing_pairing),u.active)throw s.setError(Oc.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Da.pairing_not_expired)}const d=c||wr(ve.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Da.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Od.create,h),s.addTrace(Da.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Da.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Oc.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Oc.subscribe_pairing_topic_failure),f}return s.addTrace(Da.subscribe_pairing_topic_success),h}),Ot(this,"activate",async({topic:r})=>{this.isInitialized();const s=wr(ve.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ot(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Sd();this.events.once(en("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Ot(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ot(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ot(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ot(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",pn("USER_DISCONNECTED")),await this.deletePairing(s))}),Ot(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return uL({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ot(this,"sendRequest",async(r,s,i)=>{const o=hu(s,i),a=await this.core.crypto.encode(r,o),c=Zm[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Ot(this,"sendResult",async(r,s,i)=>{const o=$1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Zm[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ot(this,"sendError",async(r,s,i)=>{const o=M1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Zm[c]?Zm[c].res:Zm.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ot(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,pn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ot(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>zl(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ot(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ot(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ot(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Od.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ot(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{La(s)?this.events.emit(en("pairing_ping",i),{}):go(s)&&this.events.emit(en("pairing_ping",i),{error:s.error})},500)}),Ot(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Od.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ot(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=pn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ot(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(pn("WC_METHOD_UNSUPPORTED",r))}),Ot(this,"isValidPair",(r,s)=>{var i;if(!ni(r)){const{message:a}=_e("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Oc.malformed_pairing_uri),new Error(a)}if(!SSe(r.uri)){const{message:a}=_e("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Oc.malformed_pairing_uri),new Error(a)}const o=lL(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=_e("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Oc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=_e("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Oc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&ve.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Oc.pairing_expired);const{message:a}=_e("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ot(this,"isValidPing",async r=>{if(!ni(r)){const{message:i}=_e("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ot(this,"isValidDisconnect",async r=>{if(!ni(r)){const{message:i}=_e("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ot(this,"isValidPairingTopic",async r=>{if(!pr(r,!1)){const{message:s}=_e("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=_e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(zl(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=_e("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=as(n,this.name),this.pairings=new cf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Si(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ur.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==$n.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);DO(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):L1(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ho.expired,async e=>{const{topic:n}=Iz(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Od.expire,{topic:n}))})}}var pTe=Object.defineProperty,gTe=(t,e,n)=>e in t?pTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qr=(t,e,n)=>gTe(t,typeof e!="symbol"?e+"":e,n);class mTe extends l_e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Qr(this,"records",new Map),Qr(this,"events",new Oo.EventEmitter),Qr(this,"name",wAe),Qr(this,"version",vAe),Qr(this,"cached",[]),Qr(this,"initialized",!1),Qr(this,"storagePrefix",uc),Qr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Qr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:wr(ve.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Bo.created,o)}),Qr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=go(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Bo.updated,s))}),Qr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Qr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Bo.deleted,i)}}),this.persist()}),Qr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Qr(this,"on",(r,s)=>{this.events.on(r,s)}),Qr(this,"once",(r,s)=>{this.events.once(r,s)}),Qr(this,"off",(r,s)=>{this.events.off(r,s)}),Qr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=as(n,this.name)}get context(){return Si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:hu(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Bo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Bo.created,e=>{const n=Bo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Bo.updated,e=>{const n=Bo.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Bo.deleted,e=>{const n=Bo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(rf.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{ve.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Bo.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yTe=Object.defineProperty,wTe=(t,e,n)=>e in t?yTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gs=(t,e,n)=>wTe(t,typeof e!="symbol"?e+"":e,n);class vTe extends g_e{constructor(e,n){super(e,n),this.core=e,this.logger=n,gs(this,"expirations",new Map),gs(this,"events",new Oo.EventEmitter),gs(this,"name",bAe),gs(this,"version",_Ae),gs(this,"cached",[]),gs(this,"initialized",!1),gs(this,"storagePrefix",uc),gs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),gs(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),gs(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ho.created,{target:i,expiration:o})}),gs(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),gs(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ho.deleted,{target:s,expiration:i})}}),gs(this,"on",(r,s)=>{this.events.on(r,s)}),gs(this,"once",(r,s)=>{this.events.once(r,s)}),gs(this,"off",(r,s)=>{this.events.off(r,s)}),gs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=as(n,this.name)}get context(){return Si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return xEe(e);if(typeof e=="number")return TEe(e);const{message:n}=_e("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ho.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;ve.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ho.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(rf.pulse,()=>this.checkExpirations()),this.events.on(ho.created,e=>{const n=ho.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ho.expired,e=>{const n=ho.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ho.deleted,e=>{const n=ho.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bTe=Object.defineProperty,_Te=(t,e,n)=>e in t?bTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fr=(t,e,n)=>_Te(t,typeof e!="symbol"?e+"":e,n);class ETe extends m_e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,fr(this,"name",EAe),fr(this,"abortController"),fr(this,"isDevEnv"),fr(this,"verifyUrlV3",SAe),fr(this,"storagePrefix",uc),fr(this,"version",lq),fr(this,"publicKey"),fr(this,"fetchPromise"),fr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ve.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),fr(this,"register",async s=>{if(!im()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Ph(),u=this.startAbortTimer(ve.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const v=JSON.parse(y.data);if(v.type==="verify_attestation"){if(QN(v.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),fr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(QN(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),fr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(ve.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),fr(this,"getVerifyUrl",s=>{let i=s||Jy;return AAe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Jy}`),i=Jy),i}),fr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ve.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),fr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),fr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),fr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),fr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),fr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),fr(this,"validateAttestation",(s,i)=>{const o=rSe(s,i.publicKey),a={hasExpired:ve.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=as(n,this.name),this.abortController=new AbortController,this.isDevEnv=MO(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Si(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var CTe=Object.defineProperty,STe=(t,e,n)=>e in t?CTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BL=(t,e,n)=>STe(t,typeof e!="symbol"?e+"":e,n);class ATe extends y_e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,BL(this,"context",IAe),BL(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${xAe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=as(n,this.context)}}var ITe=Object.defineProperty,FL=Object.getOwnPropertySymbols,xTe=Object.prototype.hasOwnProperty,TTe=Object.prototype.propertyIsEnumerable,NR=(t,e,n)=>e in t?ITe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e)=>{for(var n in e||(e={}))xTe.call(e,n)&&NR(t,n,e[n]);if(FL)for(var n of FL(e))TTe.call(e,n)&&NR(t,n,e[n]);return t},Rr=(t,e,n)=>NR(t,typeof e!="symbol"?e+"":e,n);class NTe extends w_e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Rr(this,"context",NAe),Rr(this,"storagePrefix",uc),Rr(this,"storageVersion",TAe),Rr(this,"events",new Map),Rr(this,"shouldPersist",!1),Rr(this,"init",async()=>{if(!MO())try{const s={eventId:OM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Sz(this.core.relayer.protocol,this.core.relayer.version,_R)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Rr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=OM(),u=this.core.projectId||"",d=Date.now(),h=ty({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Rr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return ty(ty({},a),this.setMethods(a.eventId))}),Rr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Rr(this,"setEventListeners",()=>{this.core.heartbeat.on(rf.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ve.fromMiliseconds(Date.now())-ve.fromMiliseconds(s.timestamp)>RAe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Rr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Rr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Rr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Rr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Rr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,ty(ty({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Rr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Rr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${PAe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${_R}${i}`,{method:"POST",body:JSON.stringify(s)})}),Rr(this,"getAppDomain",()=>Cz().url),this.logger=as(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var RTe=Object.defineProperty,WL=Object.getOwnPropertySymbols,PTe=Object.prototype.hasOwnProperty,kTe=Object.prototype.propertyIsEnumerable,RR=(t,e,n)=>e in t?RTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zL=(t,e)=>{for(var n in e||(e={}))PTe.call(e,n)&&RR(t,n,e[n]);if(WL)for(var n of WL(e))kTe.call(e,n)&&RR(t,n,e[n]);return t},An=(t,e,n)=>RR(t,typeof e!="symbol"?e+"":e,n);let OTe=class Cq extends i_e{constructor(e){var n;super(e),An(this,"protocol",cq),An(this,"version",lq),An(this,"name",bR),An(this,"relayUrl"),An(this,"projectId"),An(this,"customStoragePrefix"),An(this,"events",new Oo.EventEmitter),An(this,"logger"),An(this,"heartbeat"),An(this,"relayer"),An(this,"crypto"),An(this,"storage"),An(this,"history"),An(this,"expirer"),An(this,"pairing"),An(this,"verify"),An(this,"echoClient"),An(this,"linkModeSupportedApps"),An(this,"eventClient"),An(this,"initialized",!1),An(this,"logChunkController"),An(this,"on",(a,c)=>this.events.on(a,c)),An(this,"once",(a,c)=>this.events.once(a,c)),An(this,"off",(a,c)=>this.events.off(a,c)),An(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),An(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:$n.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||dq,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=of({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:XSe.logger,name:bR}),{logger:i,chunkLoggerController:o}=R1({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=as(i,this.name),this.heartbeat=new dfe,this.crypto=new oxe(this,this.logger,e==null?void 0:e.keychain),this.history=new mTe(this,this.logger),this.expirer=new vTe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new n_e(zL(zL({},eAe),e==null?void 0:e.storageOptions)),this.relayer=new Oxe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fTe(this,this.logger),this.verify=new ETe(this,this.logger,this.storage),this.echoClient=new ATe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new NTe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Cq(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(fAe,r),n}get context(){return Si(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(EL,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(EL)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&ZSe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const DTe=OTe,Sq="wc",Aq=2,Iq="client",qO=`${Sq}@${Aq}:${Iq}:`,BI={name:Iq,logger:"error"},qL="WALLETCONNECT_DEEPLINK_CHOICE",$Te="proposal",HL="Proposal expired",MTe="session",$f=ve.SEVEN_DAYS,LTe="engine",Pr={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ve.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ve.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1119}}},FI={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},ka={idle:"IDLE",active:"ACTIVE"},VL={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},UTe="request",jTe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],BTe="wc",FTe="auth",WTe="authKeys",zTe="pairingTopics",qTe="requests",K1=`${BTe}@${1.5}:${FTe}:`,j_=`${K1}:PUB_KEY`;var HTe=Object.defineProperty,VTe=Object.defineProperties,GTe=Object.getOwnPropertyDescriptors,GL=Object.getOwnPropertySymbols,KTe=Object.prototype.hasOwnProperty,YTe=Object.prototype.propertyIsEnumerable,PR=(t,e,n)=>e in t?HTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bn=(t,e)=>{for(var n in e||(e={}))KTe.call(e,n)&&PR(t,n,e[n]);if(GL)for(var n of GL(e))YTe.call(e,n)&&PR(t,n,e[n]);return t},Is=(t,e)=>VTe(t,GTe(e)),fe=(t,e,n)=>PR(t,typeof e!="symbol"?e+"":e,n);class QTe extends E_e{constructor(e){super(e),fe(this,"name",LTe),fe(this,"events",new EO),fe(this,"initialized",!1),fe(this,"requestQueue",{state:ka.idle,queue:[]}),fe(this,"sessionRequestQueue",{state:ka.idle,queue:[]}),fe(this,"requestQueueDelay",ve.ONE_SECOND),fe(this,"expectedPairingMethodMap",new Map),fe(this,"recentlyDeletedMap",new Map),fe(this,"recentlyDeletedLimit",200),fe(this,"relayMessageCache",[]),fe(this,"pendingSessions",new Map),fe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Pr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay)))}),fe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Is(bn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=vSe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const A=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),A}if(!u||!h){const{topic:A,uri:I}=await this.client.core.pairing.create();u=A,d=I}if(!u){const{message:A}=_e("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(A)}const f=await this.client.core.crypto.generateKeyPair(),p=Pr.wc_sessionPropose.req.ttl||ve.FIVE_MINUTES,g=wr(p),w=Is(bn(bn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:uq}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Ma()}),y=en("session_connect",w.id),{reject:v,resolve:b,done:E}=Sd(p,HL),C=({id:A})=>{A===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:HL,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:A,session:I})=>{this.client.events.off("proposal_expire",C),A?v(A):I&&b(I)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:E}}),fe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),fe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Fo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(gd.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(gd.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(gd.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Fo.session_approve_started,properties:{topic:p,trace:[Fo.session_approve_started,Fo.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),E=g.publicKey,C=await this.client.core.crypto.generateSharedKey(b,E),A=bn(bn(bn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:wr($f)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),I=$n.relay;v.addTrace(Fo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:I})}catch(S){throw v.setError(gd.subscribe_session_topic_failure),S}v.addTrace(Fo.subscribe_session_topic_success);const x=Is(bn({},A),{topic:C,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:A.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:$n.relay});await this.client.session.set(C,x),v.addTrace(Fo.store_session);try{v.addTrace(Fo.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(S=>{throw v==null||v.setError(gd.session_settle_publish_failure),S}),v.addTrace(Fo.session_settle_publish_success),v.addTrace(Fo.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(S=>{throw v==null||v.setError(gd.session_approve_publish_failure),S}),v.addTrace(Fo.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,pn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,pn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,wr($f)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),fe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Pr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,pn("USER_DISCONNECTED")))}),fe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Sd(),c=Ma(),l=Hd().toString(),u=this.client.session.get(r).namespaces;return this.events.once(en("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),fe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Ma(),{done:i,resolve:o,reject:a}=Sd();return this.events.once(en("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,wr($f)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),fe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Pr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===$n.relay&&await this.confirmOnlineStateOrThrow();const c=Ma(),l=Hd().toString(),{done:u,resolve:d,reject:h}=Sd(o,"Request expired. Please try again.");this.events.once(en("session_request",c),({error:y,result:v})=>{y?h(y):d(v)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Is(bn({},s),{expiryTimestamp:wr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Is(bn({},s),{expiryTimestamp:wr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(bn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(v=>h(v)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var v;if(!((v=a.sessionConfig)!=null&&v.disableDeepLink)){const b=await kEe(this.client.core.storage,qL);await NEe({id:c,topic:i,wcDeepLink:b})}y()}),u()]).then(y=>y[2])}),fe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===$n.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);La(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):go(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),fe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Ma(),i=Hd().toString(),{done:o,resolve:a,reject:c}=Sd();this.events.once(en("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),fe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Hd().toString(),a=Ma();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),fe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:pn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=_e("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),fe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>ESe(r,n)))),fe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),fe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?$n.link_mode:$n.relay;o===$n.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:v,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:b}});const E=await this.client.core.crypto.generateKeyPair(),C=L_(E);if(await Promise.all([this.client.auth.authKeys.set(j_,{responseTopic:C,publicKey:E}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:v})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:D}=Up(a[0]);let U=SCe(D,"request",g);M_(y)&&(U=ICe(U,y.pop())),y.push(U)}const A=w&&w>Pr.wc_sessionAuthenticate.req.ttl?w:Pr.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:wr(A)},x={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:x,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:wr(Pr.wc_sessionPropose.req.ttl),id:Ma()},{done:O,resolve:P,reject:j}=Sd(A,"Request expired"),q=Ma(),B=en("session_connect",S.id),N=en("session_request",q),T=async({error:D,session:U})=>{this.events.off(N,$),D?j(D):U&&P({session:U})},$=async D=>{var U,H,te;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),D.error){const ue=pn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===ue.code?void 0:(this.events.off(B,T),j(D.error.message))}await this.deleteProposal(S.id),this.events.off(B,T);const{cacaos:oe,responder:re}=D.result,ie=[],ye=[];for(const ue of oe){await FM({cacao:ue,projectId:this.client.core.projectId})||(this.client.logger.error(ue,"Signature verification failed"),j(pn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ne}=ue,ce=M_(ne.resources),$e=[uR(ne.iss)],de=JE(ne.iss);if(ce){const we=WM(ce),We=zM(ce);ie.push(...we),$e.push(...We)}for(const we of $e)ye.push(`${we}:${de}`)}const Z=await this.client.core.crypto.generateSharedKey(E,re.publicKey);let Y;ie.length>0&&(Y={topic:Z,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:wr($f),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:pL([...new Set(ie)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,Y),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:re.metadata}),Y=this.client.session.get(Z)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(H=re.metadata.redirect)!=null&&H.linkMode&&(te=re.metadata.redirect)!=null&&te.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(Z,{transportType:$n.link_mode})),P({auths:oe,session:Y})};this.events.once(B,T),this.events.once(N,$);let R;try{if(i){const D=hu("wc_sessionAuthenticate",I,q);this.client.core.history.set(v,D);const U=await this.client.core.crypto.encode("",D,{type:Iv,encoding:Yl});R=zb(r,v,U)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:I,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:S,expiry:Pr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(D){throw this.events.off(B,T),this.events.off(N,$),D}return await this.setProposal(S.id,S),await this.setAuthRequest(q,{request:Is(bn({},I),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:R??b,response:O}}),fe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[md.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Xm.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Xm.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||$n.relay;a===$n.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=L_(c),d={type:Xc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await FM({cacao:w,projectId:this.client.core.projectId})){i.setError(Xm.invalid_cacao);const C=pn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(md.cacaos_verified);const{p:y}=w,v=M_(y.resources),b=[uR(y.iss)],E=JE(y.iss);if(v){const C=WM(v),A=zM(v);h.push(...C),b.push(...A)}for(const C of b)f.push(`${C}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(md.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:wr($f),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:pL([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(md.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Xm.subscribe_authenticated_session_topic_failure),w}i.addTrace(md.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(md.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(md.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Xm.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),fe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===$n.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=L_(o),l={type:Xc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Pr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,pn("USER_DISCONNECTED"))}),fe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return $z(r,s)}),fe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),fe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),fe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,pn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(qL).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,pn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ka.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),fe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(gd.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,pn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),fe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ka.idle,this.client.events.emit("session_request_expire",{id:n}))}),fe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),fe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),fe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,wr(Pr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),fe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=$n.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),fe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||wr(Pr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),fe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=hu(s,i,c);let f;const p=!!u;try{const y=p?Yl:aa;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(jTe.includes(s)){const y=za(JSON.stringify(h)),v=za(f);g=await this.client.core.verify.register({id:v,decryptedId:y})}const w=Pr[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=zb(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Pr[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Is(bn({},d),{correlationId:h.id}),l?(y.internal=Is(bn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(v=>this.client.logger.error(v))}return h.id}),fe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=$1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Yl:aa;u=await this.client.core.crypto.encode(s,l,Is(bn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=zb(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Pr[p].res;g.tvf=Is(bn({},f),{correlationId:r}),o?(g.internal=Is(bn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),fe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=M1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Yl:aa;u=await this.client.core.crypto.encode(s,l,Is(bn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=zb(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Pr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),fe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;zl(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{zl(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),fe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),fe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),fe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ka.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ka.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ka.idle}),fe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),fe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),fe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=_e("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),fe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),fe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Oc.proposal_listener_not_found)),this.isValidConnect(bn({},s.params));const u=a.expiryTimestamp||wr(Pr.wc_sessionPropose.req.ttl),d=bn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:za(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Da.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Pr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),fe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(La(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(go(r)){await this.client.proposal.delete(i,pn("USER_DISCONNECTED"));const o=en("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),fe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Is(bn(bn(bn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:$n.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(en("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;La(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(en("session_approve",s),{})):go(r)&&(await this.client.session.delete(n,pn("USER_DISCONNECTED")),this.events.emit(en("session_approve",s),{error:r.error}))}),fe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Jm.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:pn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(bn({topic:n},s));try{Jm.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Jm.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),fe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=en("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);La(r)?this.events.emit(en("session_update",s),{}):go(r)&&this.events.emit(en("session_update",s),{error:r.error})}),fe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,wr($f)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=en("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);La(r)?this.events.emit(en("session_extend",s),{}):go(r)&&this.events.emit(en("session_extend",s),{error:r.error})}),fe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=en("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);La(r)?this.events.emit(en("session_ping",s),{}):go(r)&&this.events.emit(en("session_ping",s),{error:r.error})},500)}),fe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Ur.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:pn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),fe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(bn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:za(JSON.stringify(hu("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===$n.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),fe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=en("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);La(r)?this.events.emit(en("session_request",s),{result:r.result}):go(r)&&this.events.emit(en("session_request",s),{error:r.error})}),fe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Jm.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(bn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Jm.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),La(r)?this.events.emit(en("session_request",s),{result:r.result}):go(r)&&this.events.emit(en("session_request",s),{error:r.error})}),fe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:za(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===$n.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Xc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Pr.wc_sessionAuthenticate.autoReject,appLink:h})}}),fe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),fe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ka.idle,this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay))}),fe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=en("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(en("session_request",i.request.id),{error:r})})}),fe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ka.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ka.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),fe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),fe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:hu("wc_sessionPropose",Is(bn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),fe(this,"isValidConnect",async n=>{if(!ni(n)){const{message:l}=_e("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(ts(r)||await this.isValidPairingTopic(r),!DSe(c)){const{message:l}=_e("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!ts(s)&&ku(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!ts(i)&&ku(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),ts(o)||this.validateSessionProps(o,"sessionProperties"),!ts(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),fe(this,"validateNamespaces",(n,r)=>{const s=OSe(n,"connect()",r);if(s)throw new Error(s.message)}),fe(this,"isValidApprove",async n=>{if(!ni(n))throw new Error(_e("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=DI(s,"approve()");if(l)throw new Error(l.message);const u=yL(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!pr(i,!0)){const{message:d}=_e("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(ts(o)||this.validateSessionProps(o,"sessionProperties"),!ts(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),fe(this,"isValidReject",async n=>{if(!ni(n)){const{message:i}=_e("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!MSe(s)){const{message:i}=_e("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),fe(this,"isValidSessionSettleRequest",n=>{if(!ni(n)){const{message:l}=_e("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!aq(r)){const{message:l}=_e("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=xSe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=DI(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(zl(o)){const{message:l}=_e("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),fe(this,"isValidUpdate",async n=>{if(!ni(n)){const{message:c}=_e("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=DI(s,"update()");if(o)throw new Error(o.message);const a=yL(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),fe(this,"isValidExtend",async n=>{if(!ni(n)){const{message:s}=_e("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),fe(this,"isValidRequest",async n=>{if(!ni(n)){const{message:c}=_e("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!mL(a,i)){const{message:c}=_e("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!LSe(s)){const{message:c}=_e("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!BSe(a,i,s.method)){const{message:c}=_e("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!qSe(o,FI)){const{message:c}=_e("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${FI.min} and ${FI.max}`);throw new Error(c)}}),fe(this,"isValidRespond",async n=>{var r;if(!ni(n)){const{message:o}=_e("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!USe(i)){const{message:o}=_e("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),fe(this,"isValidPing",async n=>{if(!ni(n)){const{message:s}=_e("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidEmit",async n=>{if(!ni(n)){const{message:a}=_e("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!mL(o,i)){const{message:a}=_e("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!jSe(s)){const{message:a}=_e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!FSe(o,i,s.name)){const{message:a}=_e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),fe(this,"isValidDisconnect",async n=>{if(!ni(n)){const{message:s}=_e("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!pr(s,!1))throw new Error("uri is required parameter");if(!pr(i,!1))throw new Error("domain is required parameter");if(!pr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Up(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Up(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),fe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Jy,validation:"UNKNOWN",origin:o.url||""}};try{if(a===$n.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),fe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=_e("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),fe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),fe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),fe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=_e("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),fe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==$n.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),fe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),fe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=kM(n,"topic")||"",s=decodeURIComponent(kM(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:$n.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),fe(this,"registerLinkModeListeners",async()=>{var n;if(MO()||rd()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),fe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(VL).includes(s.method)}),fe(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return Is(bn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),fe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),fe(this,"extractTxHashesFromResult",(n,r)=>{try{const s=VL[n];if(typeof r=="string")return[r];const i=r[s.key];if(Pu(i))return n==="solana_signAllTransactions"?i.map(o=>uCe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ur.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(j_)?this.client.auth.authKeys.get(j_):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===$n.link_mode?Yl:aa});DO(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:za(r)})):L1(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ho.expired,async e=>{const{topic:n,id:r}=Iz(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,_e("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,_e("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Od.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Od.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!pr(e,!1)){const{message:n}=_e("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=_e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(zl(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=_e("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!pr(e,!1)){const{message:n}=_e("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=_e("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(zl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=_e("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=_e("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(pr(e,!1)){const{message:n}=_e("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=_e("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!$Se(e)){const{message:n}=_e("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=_e("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(zl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=_e("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class JTe extends cf{constructor(e,n){super(e,n,$Te,qO),this.core=e,this.logger=n}}let ZTe=class extends cf{constructor(e,n){super(e,n,MTe,qO),this.core=e,this.logger=n}};class XTe extends cf{constructor(e,n){super(e,n,UTe,qO,r=>r.id),this.core=e,this.logger=n}}class eNe extends cf{constructor(e,n){super(e,n,WTe,K1,()=>j_),this.core=e,this.logger=n}}class tNe extends cf{constructor(e,n){super(e,n,zTe,K1),this.core=e,this.logger=n}}class nNe extends cf{constructor(e,n){super(e,n,qTe,K1,r=>r.id),this.core=e,this.logger=n}}var rNe=Object.defineProperty,sNe=(t,e,n)=>e in t?rNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WI=(t,e,n)=>sNe(t,typeof e!="symbol"?e+"":e,n);class iNe{constructor(e,n){this.core=e,this.logger=n,WI(this,"authKeys"),WI(this,"pairingTopics"),WI(this,"requests"),this.authKeys=new eNe(this.core,this.logger),this.pairingTopics=new tNe(this.core,this.logger),this.requests=new nNe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var oNe=Object.defineProperty,aNe=(t,e,n)=>e in t?oNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dt=(t,e,n)=>aNe(t,typeof e!="symbol"?e+"":e,n);let cNe=class xq extends __e{constructor(e){super(e),Dt(this,"protocol",Sq),Dt(this,"version",Aq),Dt(this,"name",BI.name),Dt(this,"metadata"),Dt(this,"core"),Dt(this,"logger"),Dt(this,"events",new Oo.EventEmitter),Dt(this,"engine"),Dt(this,"session"),Dt(this,"proposal"),Dt(this,"pendingRequest"),Dt(this,"auth"),Dt(this,"signConfig"),Dt(this,"on",(r,s)=>this.events.on(r,s)),Dt(this,"once",(r,s)=>this.events.once(r,s)),Dt(this,"off",(r,s)=>this.events.off(r,s)),Dt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Dt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Dt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Dt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Dt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Dt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||BI.name,this.metadata=CEe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:mv(of({level:(e==null?void 0:e.logger)||BI.logger}));this.core=(e==null?void 0:e.core)||new DTe(e),this.logger=as(n,this.name),this.session=new ZTe(this.core,this.logger),this.proposal=new JTe(this.core,this.logger),this.pendingRequest=new XTe(this.core,this.logger),this.engine=new QTe(this),this.auth=new iNe(this.core,this.logger)}static async init(e){const n=new xq(e);return await n.initialize(),n}get context(){return Si(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ve.toMiliseconds(ve.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const KL="error",lNe="wss://relay.walletconnect.org",uNe="wc",dNe="universal_provider",Hb=`${uNe}@2:${dNe}:`,Tq="https://rpc.walletconnect.org/v1/",ip="generic",hNe=`${Tq}bundler`,$o={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function fNe(){}function HO(t){return t==null||typeof t!="object"&&typeof t!="function"}function VO(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pNe(t){if(HO(t))return t;if(Array.isArray(t)||VO(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function YL(t){return typeof t=="object"&&t!==null}function Nq(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Rq(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const gNe="[object RegExp]",Pq="[object String]",kq="[object Number]",Oq="[object Boolean]",Dq="[object Arguments]",mNe="[object Symbol]",yNe="[object Date]",wNe="[object Map]",vNe="[object Set]",bNe="[object Array]",_Ne="[object ArrayBuffer]",ENe="[object Object]",CNe="[object DataView]",SNe="[object Uint8Array]",ANe="[object Uint8ClampedArray]",INe="[object Uint16Array]",xNe="[object Uint32Array]",TNe="[object Int8Array]",NNe="[object Int16Array]",RNe="[object Int32Array]",PNe="[object Float32Array]",kNe="[object Float64Array]";function ONe(t,e){return Ap(t,void 0,t,new Map,e)}function Ap(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(HO(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ap(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ap(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ap(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(VO(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ap(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Dd(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Dd(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Dd(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Dd(o,t,n,r,s),o}if(typeof t=="object"&&DNe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Dd(o,t,n,r,s),o}return t}function Dd(t,e,n=t,r,s){const i=[...Object.keys(e),...Nq(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ap(e[a],a,n,r,s))}}function DNe(t){switch(Rq(t)){case Dq:case bNe:case _Ne:case CNe:case Oq:case yNe:case PNe:case kNe:case TNe:case NNe:case RNe:case wNe:case kq:case ENe:case gNe:case vNe:case Pq:case mNe:case SNe:case ANe:case INe:case xNe:return!0;default:return!1}}function $Ne(t,e){return ONe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case kq:case Pq:case Oq:{const o=new t.constructor(t==null?void 0:t.valueOf());return Dd(o,t),o}case Dq:{const o={};return Dd(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function QL(t){return $Ne(t)}function JL(t){return t!==null&&typeof t=="object"&&Rq(t)==="[object Arguments]"}function MNe(t){return VO(t)}function LNe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function UNe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=kR(s,o,r,new Map)}return s}function kR(t,e,n,r){if(HO(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return pNe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Nq(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(JL(a)&&(a={...a}),JL(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=QL(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||YL(c)&&YL(a)?t[o]=kR(c,a,n,r):c==null&&LNe(a)?t[o]=kR({},a,n,r):c==null&&MNe(a)?t[o]=QL(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function jNe(t,...e){return UNe(t,...e,fNe)}var BNe=Object.defineProperty,FNe=Object.defineProperties,WNe=Object.getOwnPropertyDescriptors,ZL=Object.getOwnPropertySymbols,zNe=Object.prototype.hasOwnProperty,qNe=Object.prototype.propertyIsEnumerable,XL=(t,e,n)=>e in t?BNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vb=(t,e)=>{for(var n in e||(e={}))zNe.call(e,n)&&XL(t,n,e[n]);if(ZL)for(var n of ZL(e))qNe.call(e,n)&&XL(t,n,e[n]);return t},HNe=(t,e)=>FNe(t,WNe(e));function Yi(t,e,n){var r;const s=Up(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${Tq}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function lf(t){return t.includes(":")?t.split(":")[1]:t}function $q(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function VNe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Gb(t={},e={}){const n=eU(t),r=eU(e);return jNe(n,r)}function eU(t){var e,n,r,s,i;const o={};if(!ku(t))return o;for(const[a,c]of Object.entries(t)){const l=V1(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Sp(a);o[f]=HNe(Vb(Vb({},o[f]),c),{chains:rc(l,(e=o[f])==null?void 0:e.chains),methods:rc(u,(n=o[f])==null?void 0:n.methods),events:rc(d,(r=o[f])==null?void 0:r.events)}),(ku(h)||ku(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Vb(Vb({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function tU(t){return t.includes(":")?t.split(":")[2]:t}function nU(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=V1(n)?[n]:r.chains?r.chains:$q(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function zI(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Mq={},Kt=t=>Mq[t],qI=(t,e)=>{Mq[t]=e};var GNe=Object.defineProperty,KNe=(t,e,n)=>e in t?GNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mf=(t,e,n)=>KNe(t,typeof e!="symbol"?e+"":e,n);class YNe{constructor(e){Mf(this,"name","polkadot"),Mf(this,"client"),Mf(this,"httpProviders"),Mf(this,"events"),Mf(this,"namespace"),Mf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var QNe=Object.defineProperty,JNe=Object.defineProperties,ZNe=Object.getOwnPropertyDescriptors,rU=Object.getOwnPropertySymbols,XNe=Object.prototype.hasOwnProperty,eRe=Object.prototype.propertyIsEnumerable,OR=(t,e,n)=>e in t?QNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sU=(t,e)=>{for(var n in e||(e={}))XNe.call(e,n)&&OR(t,n,e[n]);if(rU)for(var n of rU(e))eRe.call(e,n)&&OR(t,n,e[n]);return t},iU=(t,e)=>JNe(t,ZNe(e)),Lf=(t,e,n)=>OR(t,typeof e!="symbol"?e+"":e,n);class tRe{constructor(e){Lf(this,"name","eip155"),Lf(this,"client"),Lf(this,"chainId"),Lf(this,"namespace"),Lf(this,"httpProviders"),Lf(this,"events"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Yi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(lf(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:iU(sU({},u.sessionProperties||{}),{capabilities:iU(sU({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(hu("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${hNe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var nRe=Object.defineProperty,rRe=(t,e,n)=>e in t?nRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uf=(t,e,n)=>rRe(t,typeof e!="symbol"?e+"":e,n);class sRe{constructor(e){Uf(this,"name","solana"),Uf(this,"client"),Uf(this,"httpProviders"),Uf(this,"events"),Uf(this,"namespace"),Uf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var iRe=Object.defineProperty,oRe=(t,e,n)=>e in t?iRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jf=(t,e,n)=>oRe(t,typeof e!="symbol"?e+"":e,n);class aRe{constructor(e){jf(this,"name","cosmos"),jf(this,"client"),jf(this,"httpProviders"),jf(this,"events"),jf(this,"namespace"),jf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var cRe=Object.defineProperty,lRe=(t,e,n)=>e in t?cRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bf=(t,e,n)=>lRe(t,typeof e!="symbol"?e+"":e,n);class uRe{constructor(e){Bf(this,"name","algorand"),Bf(this,"client"),Bf(this,"httpProviders"),Bf(this,"events"),Bf(this,"namespace"),Bf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Yi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Do(new _a(r,Kt("disableProviderPing")))}}var dRe=Object.defineProperty,hRe=(t,e,n)=>e in t?dRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ff=(t,e,n)=>hRe(t,typeof e!="symbol"?e+"":e,n);class fRe{constructor(e){Ff(this,"name","cip34"),Ff(this,"client"),Ff(this,"httpProviders"),Ff(this,"events"),Ff(this,"namespace"),Ff(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=lf(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var pRe=Object.defineProperty,gRe=(t,e,n)=>e in t?pRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wf=(t,e,n)=>gRe(t,typeof e!="symbol"?e+"":e,n);class mRe{constructor(e){Wf(this,"name","elrond"),Wf(this,"client"),Wf(this,"httpProviders"),Wf(this,"events"),Wf(this,"namespace"),Wf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var yRe=Object.defineProperty,wRe=(t,e,n)=>e in t?yRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zf=(t,e,n)=>wRe(t,typeof e!="symbol"?e+"":e,n);class vRe{constructor(e){zf(this,"name","multiversx"),zf(this,"client"),zf(this,"httpProviders"),zf(this,"events"),zf(this,"namespace"),zf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var bRe=Object.defineProperty,_Re=(t,e,n)=>e in t?bRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qf=(t,e,n)=>_Re(t,typeof e!="symbol"?e+"":e,n);class ERe{constructor(e){qf(this,"name","near"),qf(this,"client"),qf(this,"httpProviders"),qf(this,"events"),qf(this,"namespace"),qf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace);return typeof r>"u"?void 0:new Do(new _a(r,Kt("disableProviderPing")))}}var CRe=Object.defineProperty,SRe=(t,e,n)=>e in t?CRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hf=(t,e,n)=>SRe(t,typeof e!="symbol"?e+"":e,n);class ARe{constructor(e){Hf(this,"name","tezos"),Hf(this,"client"),Hf(this,"httpProviders"),Hf(this,"events"),Hf(this,"namespace"),Hf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace);return typeof r>"u"?void 0:new Do(new _a(r))}}var IRe=Object.defineProperty,xRe=(t,e,n)=>e in t?IRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vf=(t,e,n)=>xRe(t,typeof e!="symbol"?e+"":e,n);class TRe{constructor(e){Vf(this,"name",ip),Vf(this,"client"),Vf(this,"httpProviders"),Vf(this,"events"),Vf(this,"namespace"),Vf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit($o.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Up(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Do(new _a(r,Kt("disableProviderPing")))}}var NRe=Object.defineProperty,RRe=Object.defineProperties,PRe=Object.getOwnPropertyDescriptors,oU=Object.getOwnPropertySymbols,kRe=Object.prototype.hasOwnProperty,ORe=Object.prototype.propertyIsEnumerable,DR=(t,e,n)=>e in t?NRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kb=(t,e)=>{for(var n in e||(e={}))kRe.call(e,n)&&DR(t,n,e[n]);if(oU)for(var n of oU(e))ORe.call(e,n)&&DR(t,n,e[n]);return t},HI=(t,e)=>RRe(t,PRe(e)),ao=(t,e,n)=>DR(t,typeof e!="symbol"?e+"":e,n);let DRe=class Lq{constructor(e){ao(this,"client"),ao(this,"namespaces"),ao(this,"optionalNamespaces"),ao(this,"sessionProperties"),ao(this,"scopedProperties"),ao(this,"events",new EO),ao(this,"rpcProviders",{}),ao(this,"session"),ao(this,"providerOpts"),ao(this,"logger"),ao(this,"uri"),ao(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:mv(of({level:(e==null?void 0:e.logger)||KL})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new Lq(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Kb({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,$1(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:pn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=nU(this.session.namespaces);this.namespaces=Gb(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=nU(s.namespaces);return this.namespaces=Gb(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ip?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Pu(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await cNe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||KL,relayUrl:this.providerOpts.relayUrl||lNe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Sp(n)))];qI("client",this.client),qI("events",this.events),qI("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=VNe(n,this.session),s=$q(r),i=Gb(this.namespaces,this.optionalNamespaces),o=HI(Kb({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new tRe({namespace:o});break;case"algorand":this.rpcProviders[n]=new uRe({namespace:o});break;case"solana":this.rpcProviders[n]=new sRe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new aRe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new YNe({namespace:o});break;case"cip34":this.rpcProviders[n]=new fRe({namespace:o});break;case"elrond":this.rpcProviders[n]=new mRe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new vRe({namespace:o});break;case"near":this.rpcProviders[n]=new ERe({namespace:o});break;case"tezos":this.rpcProviders[n]=new ARe({namespace:o});break;default:this.rpcProviders[ip]?this.rpcProviders[ip].updateNamespace(o):this.rpcProviders[ip]=new TRe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Pu(o)&&this.events.emit("accountsChanged",o.map(tU))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Sp(o),l=zI(o)!==zI(a)?`${c}:${zI(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=HI(Kb({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",HI(Kb({},pn("USER_DISCONNECTED")),{data:e.topic})))}),this.on($o.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ip]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Gb(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Sp(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Sp(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(tU);if(!Pu(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Hb}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Hb}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Hb}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Hb)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var aU={};const $Re={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof aU<"u"?aU.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},$R={filterOutDuplicatesByRDNS(t){const e=pe.state.enableEIP6963?Re.state.connectors:[],n=je.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ye.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Re.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=je.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Re.state,{featuredWalletIds:n}=pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=pe.state.features)==null?void 0:c.connectMethodsOrder),r=e||Re.state.connectors;if(n)return n;const{injected:s,announced:i}=B_.getConnectorsByType(r,Qe.state.recommended,Qe.state.featured),o=s.filter(B_.showConnector),a=i.filter(B_.showConnector);return o.length||a.length?["wallet","email","social"]:$Re.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Qe.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Qe.state.excludedWallets.some(r=>U1.isLowerCaseMatch(r.name,t.name));return e||n}},B_={getConnectorsByType(t,e,n){const{customWallets:r}=pe.state,s=je.getRecentWallets(),i=$R.filterOutDuplicateWallets(e),o=$R.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Qe.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Qe.state.excludedWallets.some(i=>U1.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ye.isMobile()||Ye.isMobile()&&!e&&!it.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(L.state.chains.values()).some(n=>Re.getConnectorId(n.namespace)===Pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=pe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=B_.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:pe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:b})=>b===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const F_=globalThis,GO=F_.ShadowRoot&&(F_.ShadyCSS===void 0||F_.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,KO=Symbol(),cU=new WeakMap;let Uq=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==KO)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(GO&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=cU.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&cU.set(n,e))}return e}toString(){return this.cssText}};const lo=t=>new Uq(typeof t=="string"?t:t+"",void 0,KO),el=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new Uq(n,t,KO)},MRe=(t,e)=>{if(GO)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=F_.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},lU=GO?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return lo(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:LRe,defineProperty:URe,getOwnPropertyDescriptor:jRe,getOwnPropertyNames:BRe,getOwnPropertySymbols:FRe,getPrototypeOf:WRe}=Object,Ou=globalThis,uU=Ou.trustedTypes,zRe=uU?uU.emptyScript:"",VI=Ou.reactiveElementPolyfillSupport,Xy=(t,e)=>t,MR={toAttribute(t,e){switch(e){case Boolean:t=t?zRe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},jq=(t,e)=>!LRe(t,e),dU={attribute:!0,type:String,converter:MR,reflect:!1,useDefault:!1,hasChanged:jq};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Ou.litPropertyMetadata??(Ou.litPropertyMetadata=new WeakMap);let op=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=dU){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&URe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=jRe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??dU}static _$Ei(){if(this.hasOwnProperty(Xy("elementProperties")))return;const e=WRe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Xy("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Xy("properties"))){const n=this.properties,r=[...BRe(n),...FRe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(lU(s))}else e!==void 0&&n.push(lU(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return MRe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:MR).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:MR;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??jq)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};op.elementStyles=[],op.shadowRootOptions={mode:"open"},op[Xy("elementProperties")]=new Map,op[Xy("finalized")]=new Map,VI==null||VI({ReactiveElement:op}),(Ou.reactiveElementVersions??(Ou.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ew=globalThis,eC=ew.trustedTypes,hU=eC?eC.createPolicy("lit-html",{createHTML:t=>t}):void 0,Bq="$lit$",Ql=`lit$${Math.random().toFixed(9).slice(2)}$`,Fq="?"+Ql,qRe=`<${Fq}>`,jh=document,E0=()=>jh.createComment(""),C0=t=>t===null||typeof t!="object"&&typeof t!="function",YO=Array.isArray,HRe=t=>YO(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",GI=`[ 	
\f\r]`,ny=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,fU=/-->/g,pU=/>/g,yd=RegExp(`>|${GI}(?:([^\\s"'>=/]+)(${GI}*=${GI}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),gU=/'/g,mU=/"/g,Wq=/^(?:script|style|textarea|title)$/i,zq=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),G6e=zq(1),K6e=zq(2),Pg=Symbol.for("lit-noChange"),jr=Symbol.for("lit-nothing"),yU=new WeakMap,Gd=jh.createTreeWalker(jh,129);function qq(t,e){if(!YO(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return hU!==void 0?hU.createHTML(e):e}const VRe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ny;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===ny?u[1]==="!--"?o=fU:u[1]!==void 0?o=pU:u[2]!==void 0?(Wq.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=yd):u[3]!==void 0&&(o=yd):o===yd?u[0]===">"?(o=s??ny,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?yd:u[3]==='"'?mU:gU):o===mU||o===gU?o=yd:o===fU||o===pU?o=ny:(o=yd,s=void 0);const f=o===yd&&t[a+1].startsWith("/>")?" ":"";i+=o===ny?c+qRe:d>=0?(r.push(l),c.slice(0,d)+Bq+c.slice(d)+Ql+f):c+Ql+(d===-2?a:f)}return[qq(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class S0{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=VRe(e,n);if(this.el=S0.createElement(l,r),Gd.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Gd.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Bq)){const h=u[o++],f=s.getAttribute(d).split(Ql),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?KRe:p[1]==="?"?YRe:p[1]==="@"?QRe:Y1}),s.removeAttribute(d)}else d.startsWith(Ql)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(Wq.test(s.tagName)){const d=s.textContent.split(Ql),h=d.length-1;if(h>0){s.textContent=eC?eC.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],E0()),Gd.nextNode(),c.push({type:2,index:++i});s.append(d[h],E0())}}}else if(s.nodeType===8)if(s.data===Fq)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ql,d+1))!==-1;)c.push({type:7,index:i}),d+=Ql.length-1}i++}}static createElement(e,n){const r=jh.createElement("template");return r.innerHTML=e,r}}function kg(t,e,n=t,r){var o,a;if(e===Pg)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=C0(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=kg(t,s._$AS(t,e.values),s,r)),e}class GRe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??jh).importNode(n,!0);Gd.currentNode=s;let i=Gd.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Tv(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new JRe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Gd.nextNode(),o++)}return Gd.currentNode=jh,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Tv{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=jr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=kg(this,e,n),C0(e)?e===jr||e==null||e===""?(this._$AH!==jr&&this._$AR(),this._$AH=jr):e!==this._$AH&&e!==Pg&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):HRe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==jr&&C0(this._$AH)?this._$AA.nextSibling.data=e:this.T(jh.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=S0.createElement(qq(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new GRe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=yU.get(e.strings);return n===void 0&&yU.set(e.strings,n=new S0(e)),n}k(e){YO(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Tv(this.O(E0()),this.O(E0()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Y1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=jr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=jr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=kg(this,e,n,0),o=!C0(e)||e!==this._$AH&&e!==Pg,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=kg(this,a[r+c],n,c),l===Pg&&(l=this._$AH[c]),o||(o=!C0(l)||l!==this._$AH[c]),l===jr?e=jr:e!==jr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===jr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class KRe extends Y1{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===jr?void 0:e}}class YRe extends Y1{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==jr)}}class QRe extends Y1{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=kg(this,e,n,0)??jr)===Pg)return;const r=this._$AH,s=e===jr&&r!==jr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==jr&&(r===jr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class JRe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){kg(this,e)}}const KI=ew.litHtmlPolyfillSupport;KI==null||KI(S0,Tv),(ew.litHtmlVersions??(ew.litHtmlVersions=[])).push("3.3.1");const ZRe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Tv(e.insertBefore(E0(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dh=globalThis;let W_=class extends op{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ZRe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Pg}};var w6;W_._$litElement$=!0,W_.finalized=!0,(w6=dh.litElementHydrateSupport)==null||w6.call(dh,{LitElement:W_});const YI=dh.litElementPolyfillSupport;YI==null||YI({LitElement:W_});(dh.litElementVersions??(dh.litElementVersions=[])).push("4.2.1");let tw,Du,$u;function Q6e(t,e){tw=document.createElement("style"),Du=document.createElement("style"),$u=document.createElement("style"),tw.textContent=jp(t).core.cssText,Du.textContent=jp(t).dark.cssText,$u.textContent=jp(t).light.cssText,document.head.appendChild(tw),document.head.appendChild(Du),document.head.appendChild($u),Hq(e)}function Hq(t){Du&&$u&&(t==="light"?(Du.removeAttribute("media"),$u.media="enabled"):($u.removeAttribute("media"),Du.media="enabled"))}function XRe(t){tw&&Du&&$u&&(tw.textContent=jp(t).core.cssText,Du.textContent=jp(t).dark.cssText,$u.textContent=jp(t).light.cssText)}function jp(t){return{core:el`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${lo(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${lo((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${lo((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${lo((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${lo((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:el`
      :root {
        --w3m-color-mix: ${lo((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${lo(Gc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${lo(Gc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:el`
      :root {
        --w3m-color-mix: ${lo((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${lo(Gc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${lo(Gc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const J6e=el`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Z6e=el`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,X6e=el`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Sy={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},Vq=wte({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Nv(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const wU=Nv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),vU=Nv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Nv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Nv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Nv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const ePe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},z_={getMethodsByChainNamespace(t){return ePe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case wU.caipNetworkId:u.chains.push(wU.deprecatedCaipNetworkId);break;case vU.caipNetworkId:u.chains.push(vU.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Vy.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let Gq=class{constructor({provider:e,namespace:n}){this.id=Pe.CONNECTOR_ID.WALLET_CONNECT,this.name=UE.ConnectorNamesMap[Pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=UE.ConnectorImageIds[Pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=L.getCaipNetworks.bind(L),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=pe.state.universalProviderConfigOverride,s=z_.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Yy.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:tPe})}};const tPe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let nPe=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>L.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Pe.CONNECTOR_ID.AUTH,type:"AUTH",name:Pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:UE.ConnectorImageIds[Pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ue.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ue.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Gq);if(!e)throw new Error("WalletConnectConnector not found");return e}};class rPe extends nPe{setUniversalProvider(e){this.addConnector(new Gq({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ye.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&gn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ue.state.balanceLoading&&e.chainId===((c=L.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ue.state.balance||"0.00",symbol:Ue.state.balanceSymbol||""};const s=(await Ue.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Pe.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:z7.encode(new TextEncoder().encode(r)),pubkey:s}},(a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=L.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Pe.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Io(n.id)}]}))}catch(u){if(u.code===Sy.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Sy.ERROR_INVALID_CHAIN_ID||u.code===Sy.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Sy.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Io(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const sPe=["email","socials","swaps","onramp","activity","reownBranding"],Yb={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?gn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?gn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?gn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?gn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?gn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?gn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?gn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?gn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?gn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},iPe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Yb[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Yb[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Yb[t].processApi(e)},processFallbackFeature(t,e){return Yb[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Qe.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?gn.DEFAULT_REMOTE_FEATURES:gn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of sPe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),gn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ya.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class oPe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=L.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=L.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=L.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return L.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>L.getCaipNetworks(n),this.getActiveChainNamespace=()=>L.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{L.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>L.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>L.state.activeChain===n||!n?L.state.activeCaipAddress:L.getAccountProp("caipAddress",n),this.setClientId=n=>{st.setClientId(n)},this.getProvider=n=>fn.getProvider(n),this.getProviderType=n=>fn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ue.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ue.setCaipAddress(n,r),n&&pe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ue.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ue.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ue.setProfileImage(n,r)},this.setUser=(n,r)=>{Ue.setUser(n,r)},this.resetAccount=n=>{Ue.resetAccount(n)},this.setCaipNetwork=n=>{L.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{L.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ue.setAllAccounts(n,r),pe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ue.setStatus(n,r),Re.isConnected()?je.setConnectionStatus("connected"):je.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>L.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Re.state.allConnectors,...n];Re.setConnectors(r)},this.setConnections=(n,r)=>{it.setConnections(n,r)},this.fetchIdentity=n=>st.fetchIdentity(n),this.getReownName=n=>Vy.getNamesForAddress(n),this.getConnectors=()=>Re.getConnectors(),this.getConnectorImage=n=>KW.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=fn.getProviderId(r),i=n?{...n,type:s}:void 0;Ue.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!L.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ue.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ue.removeAddressLabel(n,r)},this.getAddress=n=>L.state.activeChain===n||!n?Ue.state.address:L.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>L.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{L.resetNetwork(n)},this.addConnector=n=>{Re.addConnector(n)},this.resetWcConnection=()=>{it.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ue.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ue.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{L.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ue.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{pe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await iPe.fetchRemoteFeatures(e),pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&BN.setOnrampProviders(this.remoteFeatures.onramp),((n=pe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=pe.state.remoteFeatures)==null?void 0:r.socials)&&((s=pe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Qe.fetchAllowedOrigins();if(e&&Ye.isClient()){const n=window.location.origin;z_.isOriginAllowed(n,e,Sy.DEFAULT_ALLOWED_ANCESTORS)||Ya.open(Wa.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ya.open(Wa.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,zn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&oi.setThemeMode(e.themeMode),e.themeVariables&&oi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");L.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&L.setActiveCaipNetwork(n)}initializeConnectionController(e){it.setWcBasic(e.basic??!1)}initializeConnectorController(){Re.initialize(this.chainNamespaces)}initializeProjectSettings(e){pe.setProjectId(e.projectId),pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;pe.setDebug(e.debug!==!1),pe.setEnableWalletConnect(e.enableWalletConnect!==!1),pe.setEnableWalletGuide(e.enableWalletGuide!==!1),pe.setEnableWallets(e.enableWallets!==!1),pe.setEIP6963Enabled(e.enableEIP6963!==!1),pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),pe.setEnableAuthLogger(e.enableAuthLogger!==!1),pe.setCustomRpcUrls(e.customRpcUrls),pe.setEnableEmbedded(e.enableEmbedded),pe.setAllWallets(e.allWallets),pe.setIncludeWalletIds(e.includeWalletIds),pe.setExcludeWalletIds(e.excludeWalletIds),pe.setFeaturedWalletIds(e.featuredWalletIds),pe.setTokens(e.tokens),pe.setTermsConditionsUrl(e.termsConditionsUrl),pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),pe.setCustomWallets(e.customWallets),pe.setFeatures(e.features),pe.setAllowUnsupportedChain(e.allowUnsupportedChain),pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),pe.setDefaultAccountTypes(e.defaultAccountTypes);const n=je.getPreferredAccountTypes()||{},r={...pe.state.defaultAccountTypes,...n};Ue.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),pe.setMetadata(e.metadata),pe.setDisableAppend(e.disableAppend),pe.setEnableEmbedded(e.enableEmbedded),pe.setSIWX(e.siwx),!e.projectId){Ya.open(Wa.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Pe.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ye.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=rp.getUnsupportedNetwork(`${n}:${e}`);L.setActiveCaipNetwork(r)}}getDefaultNetwork(){return rp.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return rp.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return rp.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?rp.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=fn.getProvider(e),s=fn.getProviderId(e),{caipAddress:i}=L.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),je.removeConnectedNamespace(e),fn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Re.removeConnectorId(e),L.resetAccount(e),L.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=L.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),je.setConnectedNamespaces([...L.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Re.setConnectorId(ai.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,v,b,E;const c=L.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(A=>A.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((E=(b=(v=d==null?void 0:d.rpcUrls)==null?void 0:v.default)==null?void 0:b.http)==null?void 0:E[0])});if(!h)return;je.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ue.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=L.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),je.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=a0e(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Qt.resetSend(),it.resetWcConnection(),await Yy.clearSessions(),Re.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));je.deleteConnectedSocialProvider(),zn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(L.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ue.state.address,provider:fn.getProvider(L.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(gn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(L.state.activeChain),s=fn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Pe.CHAIN.EVM){const n=this.getAdapter(L.state.activeChain),r=fn.getProvider(L.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ue.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:L.state.activeChain}),Ue.state.profileImage||!1},getEnsAddress:async e=>await z_.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(L.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=fn.getProvider(L.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ue.state.address||this.updateNativeBalance(Ue.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},it.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(fn.getProviderId(L.state.activeChain)===ai.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=fn.getProvider(n),i=fn.getProviderId(n);if(e.chainNamespace===L.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===ai.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Sl.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new rPe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=je.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(je.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=L.state.activeChain===e,c=L.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ue.state.address,i=L.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=L.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=L.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=L.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Pe.CHAIN.EVM&&Ye.isSafeApp()&&Re.setConnectorId(Pe.CONNECTOR_ID.SAFE,e);const n=Re.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Pe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Pe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Re.getConnectorId(e),s=this.getCaipNetwork(e),o=Re.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ye.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=L.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Sl.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Sl.validateCaipAddress(o),{chainId:f,address:p}=Sl.parseCaipAddress(h);if(fn.setProviderId(n,ai.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&L.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Pe.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:L.state.activeCaipNetwork});fn.setProvider(n,g)}else fn.setProvider(n,this.universalProvider);Re.setConnectorId(Pe.CONNECTOR_ID.WALLET_CONNECT,n),je.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await L.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Sl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ye.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){fn.setProviderId(s,e),fn.setProvider(s,n),Re.setConnectorId(r,s)}async syncAllAccounts(e){const n=Re.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===L.state.activeChain,r=L.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=je.getActiveNetworkProps(),c=i||a,l=((d=L.state.activeCaipNetwork)==null?void 0:d.name)===Pe.UNSUPPORTED_NETWORK_NAME,u=L.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(b=>{var E;return((E=Sl.parseCaipNetworkId(b))==null?void 0:E.chainId)===c.toString()}),v=w.find(b=>{var E;return((E=Sl.parseCaipNetworkId(b))==null?void 0:E.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===y),p=this.getCaipNetworks().find(b=>b.caipNetworkId===v||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===L.state.activeChain?pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&((h=L.state.activeCaipNetwork)==null?void 0:h.name)===Pe.UNSUPPORTED_NETWORK_NAME?L.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),U1.isLowerCaseMatch(s,Ue.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Re.getConnectorId(e),r=fn.getProviderId(e);if(r===ai.CONNECTOR_TYPE_ANNOUNCED||r===ai.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===ai.CONNECTOR_TYPE_WALLET_CONNECT){const i=fn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Pe.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Pe.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!qW.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=L.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=u0e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};pe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await DRe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{it.setUri(e)}),this.universalProvider.on("connect",it.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),it.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(z_.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ye.isCaipAddress(r[0])&&this.syncAccount(Sl.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ye.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){zn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Wa.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Wa.ALERT_ERRORS[o];a&&(Ya.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&it.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Fr.open({...e,data:{swap:e.arguments}})}return Fr.open(e)}async close(){await this.injectModalUi(),Fr.close()}setLoading(e,n){Fr.setLoading(e,n)}async disconnect(e){await it.disconnect(e)}getSIWX(){return pe.state.siwx}getError(){return""}getChainId(){var e;return(e=L.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ya.open(Wa.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await L.switchActiveNetwork(n)}getWalletProvider(){return L.state.activeChain?fn.state.providers[L.state.activeChain]:null}getWalletProviderType(){return fn.getProviderId(L.state.activeChain)}subscribeProviders(e){return fn.subscribeProviders(e)}getThemeMode(){return oi.state.themeMode}getThemeVariables(){return oi.state.themeVariables}setThemeMode(e){oi.setThemeMode(e),Hq(oi.state.themeMode)}setTermsConditionsUrl(e){pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){oi.setThemeVariables(e),XRe(oi.state.themeVariables)}subscribeTheme(e){return oi.subscribe(e)}getWalletInfo(){return Ue.state.connectedWalletInfo}getAccount(e){var o;const n=Re.getAuthConnector(e),r=L.getAccountData(e),s=L.state.activeChain,i=je.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ye.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Pe.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:je.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?L.subscribeChainProp("accountState",r,n):L.subscribe(r),Re.subscribe(r)}subscribeNetwork(e){return L.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ue.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ue.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){L.subscribeKey("activeCaipNetwork",e)}getState(){return tc.state}subscribeState(e){return tc.subscribe(e)}showErrorMessage(e){sa.showError(e)}showSuccessMessage(e){sa.showSuccess(e)}getEvent(){return{...zn.state}}subscribeEvents(e){return zn.subscribe(e)}replace(e){At.replace(e)}redirect(e){At.push(e)}popTransactionStack(e){At.popTransactionStack(e)}isOpen(){return Fr.state.open}isTransactionStackEmpty(){return At.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){pe.setFeatures(e)}updateRemoteFeatures(e){pe.setRemoteFeatures(e)}updateOptions(e){const r={...pe.state||{},...e};pe.setOptions(r)}setConnectMethodsOrder(e){pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){pe.setCollapseWallets(e)}setSocialsOrder(e){pe.setSocialsOrder(e)}getConnectMethodsOrder(){return $R.getConnectOrderMethod(pe.state.features,Re.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||L.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&L.removeNetwork(e,n)}}let bU=!1;class aPe extends oPe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Bi.checkIfRequestExists(n)?Bi.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(ss.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(ss.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Bi.checkIfRequestIsSafe(r),i=Ue.state.address,o=L.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=L.state.activeChain;Re.getConnectorId(n)===Pe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=L.state.activeChain,s=r===Pe.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=pe.state.defaultAccountTypes[r],o=(l=Ue.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;U1.isLowerCaseMatch(n.address,Ue.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ue.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ye.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ye.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ue.state.user||{},username:n},L.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,L.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,L.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ue.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=oi.getSnapshot(),l=pe.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Gc(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Pe.CONNECTOR_ID.AUTH,info:{name:Pe.CONNECTOR_ID.AUTH},type:ai.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=L.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Re.getConnectorId(n)===Pe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),je.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ye.isTelegram())return;const r=je.getTelegramSocialProvider();if(!r||!Ye.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ue.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Re.getAuthConnector();r&&o&&(this.setLoading(!0,e),await it.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),je.setConnectedSocialProvider(r),je.removeTelegramSocialProvider(),zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=kbe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Wa.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ya.open(Wa.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ya.open(Wa.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ya.open(Wa.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),tc.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Qe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=L.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=fn.getProvider(r),u=fn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=fn.getProviderId(n)===ai.CONNECTOR_TYPE_AUTH,u=fn.getProviderId(r),d=u===ai.CONNECTOR_TYPE_AUTH,h=Pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(L.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Pe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:ai.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===ai.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),tc.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Pe.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=fn.getProviderId(e);if(n===ai.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=je.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ye.isClient()&&!bU)try{const e={...gn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ye.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!pe.state.disableAppend&&!pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}bU=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ye.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ar(()=>import("./embedded-wallet-DTGknEYF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(ar(()=>import("./email-2oYqdqN-.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(ar(()=>import("./socials-CakMGhi6.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(ar(()=>import("./swaps-C4dcMk-_.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(ar(()=>import("./send-BTyYAvkG.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(ar(()=>import("./receive-Cxs8QjaJ.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(ar(()=>import("./onramp-DV4GleAQ.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(ar(()=>import("./transactions-CuVj93Yl.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(ar(()=>import("./index-Tep2vWB-.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,ar(()=>import("./index-BNWY2nxc.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),ar(()=>import("./w3m-modal-DWTnoErB.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Ll;function cPe(t){t&&(Ll=t)}function Q1(){if(!Ll)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Ll==null?void 0:Ll.open(n))}async function e(){await(Ll==null?void 0:Ll.close())}return{open:t,close:e}}const lPe="1.7.8";let Qb;function uPe(t){return Qb||(Qb=new aPe({...t,sdkVersion:Ye.generateSdkVersion(t.adapters??[],"react",lPe)}),cPe(Qb)),Qb}const dPe=ba({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),_U=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],hPe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=dPe({isOpen:t}),{open:i}=Q1(),o=k.useRef(null),[a,c]=k.useState([]),[l,u]=k.useState(!0),[d,h]=k.useState(null),[f,p]=k.useState("all"),[g,w]=k.useState(1),[y,v]=k.useState(1),[b,E]=k.useState(0),[C,A]=k.useState(null),[I,x]=k.useState(_U[0]),[S,O]=k.useState(!1),[P,j]=k.useState(null),q=k.useCallback(async()=>{var D,U;try{if((D=window.solana)!=null&&D.isPhantom){const H=await window.solana.connect();j(H.publicKey.toString());return}if((U=window.solflare)!=null&&U.isSolflare){const H=await window.solflare.connect();j(H.publicKey.toString());return}i()}catch(H){console.error("Failed to connect Solana wallet:",H),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);k.useEffect(()=>{var D,U;(D=window.solana)!=null&&D.publicKey?j(window.solana.publicKey.toString()):(U=window.solflare)!=null&&U.publicKey&&j(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{t&&(async()=>{var U;u(!0),h(null);try{let H,te=f==="owned"&&r||void 0;if(I.api==="opensea-solana"){if(f==="owned"&&!P){O(!0),u(!1);return}te=P||void 0,H=await zW(I.slug,50),console.log("Fetched Solana NFTs from collection:",H.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(U=H.data[0])==null?void 0:U.owners),console.log("All NFTs owner data:",H.data.map(re=>({name:re.name,owners:re.owners,owner_of:re.owner_of}))),H.data.some(re=>re.owners&&re.owners.length>0)?(H.data=H.data.filter(re=>{const ie=re.owners.some(ye=>ye.owner_of&&ye.owner_of.toLowerCase()===P.toLowerCase());return ie&&console.log("Found owned NFT:",re.name),ie}),console.log("NFTs after filtering:",H.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else I.api==="opensea"?H=await bO(I.slug,50,te):H=await vO(I.slug,g,50,te);c(H.data),v(H.totalPages),E(H.totalCount)}catch(H){H instanceof Error?h(H.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,I,P]),k.useEffect(()=>{S&&q()},[S,q]);const B=D=>new Date(D).toLocaleDateString(),N=D=>I.api==="opensea-solana"&&(!D.owners||D.owners.length===0)?"Owner data unavailable":D.owners.length>0?`${D.owners[0].owner_of.substring(0,6)}...`:"N/A",T=()=>{n&&n()},$=async D=>{if(I.api==="opensea"&&I.chain)try{const U=await WW(I.chain,D.address,D.token_id.toString()),H={...D,attributes:JSON.stringify(U.traits||[])};A(H)}catch(U){console.error("Failed to fetch full NFT details",U),A(D)}else A(D)},R=D=>{x(D),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(hv,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:T,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:_U.map(D=>m.jsx("button",{className:`${s.collectionButton} ${I.slug===D.slug?"active":""}`,onClick:()=>R(D),children:D.name},D.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),I.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{q()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),I.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${b} total)`,f==="recent"&&`Recently minted NFTs by ${I.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${I.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(D=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(D)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${D.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",D.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",N(D)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",B(D.created_at)]})]},D.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(D=>Math.max(1,D-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(D=>Math.min(y,D+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&m.jsx(Tde,{nft:C,onClose:()=>A(null)})]}):null};var Jb,fPe=new Uint8Array(16);function pPe(){if(!Jb&&(Jb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Jb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jb(fPe)}const gPe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mPe(t){return typeof t=="string"&&gPe.test(t)}var Jr=[];for(var QI=0;QI<256;++QI)Jr.push((QI+256).toString(16).substr(1));function yPe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Jr[t[e+0]]+Jr[t[e+1]]+Jr[t[e+2]]+Jr[t[e+3]]+"-"+Jr[t[e+4]]+Jr[t[e+5]]+"-"+Jr[t[e+6]]+Jr[t[e+7]]+"-"+Jr[t[e+8]]+Jr[t[e+9]]+"-"+Jr[t[e+10]]+Jr[t[e+11]]+Jr[t[e+12]]+Jr[t[e+13]]+Jr[t[e+14]]+Jr[t[e+15]]).toLowerCase();if(!mPe(n))throw TypeError("Stringified UUID is invalid");return n}function wPe(t,e,n){t=t||{};var r=t.random||(t.rng||pPe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,yPe(r)}const vPe=ba({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),bPe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],_Pe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Ti=500;function Kq(){const t=vPe(),e=k.useRef(null),[n,r]=k.useState(null),[s,i]=k.useState(""),[o,a]=k.useState(""),[c,l]=k.useState(36),[u,d]=k.useState(36),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,y]=k.useState(!1),[v,b]=k.useState(!1),[E,C]=k.useState(!1),[A,I]=k.useState([]),[x,S]=k.useState(null),O=k.useRef(null),[P,j]=k.useState(null),q=async Z=>{const Y=Z.getContext("2d");if(!Y)return;Y.clearRect(0,0,Z.width,Z.height),n?await new Promise(ne=>{const ce=new window.Image;ce.crossOrigin="anonymous",ce.onload=()=>{const $e=Math.min(Z.width/ce.width,Z.height/ce.height),de=(Z.width-ce.width*$e)/2,we=(Z.height-ce.height*$e)/2;Y.drawImage(ce,de,we,ce.width*$e,ce.height*$e),ne()},ce.onerror=()=>ne(),ce.src=n}):(Y.fillStyle="#333",Y.fillRect(0,0,Z.width,Z.height)),(ne=>{ne.textAlign="center",ne.strokeStyle="black",ne.lineWidth=3,ne.fillStyle="white";const ce=($e,de)=>{const we=$e.toUpperCase().split(" "),We=[];let rt=we[0];for(let Yt=1;Yt<we.length;Yt++){const ln=we[Yt];ne.measureText(rt+" "+ln).width<de?rt+=" "+ln:(We.push(rt),rt=ln)}return We.push(rt),We};s&&(ne.font=`${c}px Impact`,ce(s,Ti-20).forEach((de,we)=>{const We=c+we*c*1.2;ne.strokeText(de,Ti/2,We),ne.fillText(de,Ti/2,We)})),o&&(ne.font=`${u}px Impact`,ce(o,Ti-20).reverse().forEach((de,we)=>{const We=Ti-u*1.2*(we+1);ne.strokeText(de,Ti/2,We),ne.fillText(de,Ti/2,We)}))})(Y),await Promise.all(A.map(ne=>new Promise(ce=>{const $e=new window.Image;$e.src=ne.src,$e.onload=()=>{Y.save(),Y.translate(ne.x,ne.y),Y.rotate(ne.rotation*Math.PI/180),Y.scale(ne.scale,ne.scale),Y.drawImage($e,-40,-40,80,80),Y.restore(),ce()},$e.onerror=()=>ce()})));try{h&&B(Z),p&&N(Z),w&&T(Z)}catch(ne){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ne),f(!1),g(!1),y(!1)}},B=Z=>{const Y=Z.getContext("2d");if(!Y)return;const ue=Y.getImageData(0,0,Z.width,Z.height),ne=ue.data;for(let ce=0;ce<ne.length;ce+=4){const $e=ne[ce],de=ne[ce+1],we=ne[ce+2],We=($e+de+we)/3,rt=1.8;ne[ce]=Math.min(255,We+($e-We)*rt),ne[ce+1]=Math.min(255,We+(de-We)*rt*.7),ne[ce+2]=Math.min(255,We+(we-We)*rt*.4);const Yt=1.3;ne[ce]=Math.min(255,Math.max(0,ne[ce]*Yt)),ne[ce+1]=Math.min(255,Math.max(0,ne[ce+1]*Yt)),ne[ce+2]=Math.min(255,Math.max(0,ne[ce+2]*Yt))}Y.putImageData(ue,0,0)},N=Z=>{const Y=Z.getContext("2d");if(!Y)return;const ue=4,ce=Y.getImageData(0,0,Z.width,Z.height).data,$e=new Uint8ClampedArray(ce);for(let de=0;de<Z.height;de+=ue)for(let we=0;we<Z.width;we+=ue){const We=(de*Z.width+we)*4,rt=ce[We],Yt=ce[We+1],ln=ce[We+2],nn=ce[We+3];for(let Ft=0;Ft<ue&&de+Ft<Z.height;Ft++)for(let Bn=0;Bn<ue&&we+Bn<Z.width;Bn++){const Jn=((de+Ft)*Z.width+(we+Bn))*4;$e[Jn]=rt,$e[Jn+1]=Yt,$e[Jn+2]=ln,$e[Jn+3]=nn}}Y.putImageData(new ImageData($e,Z.width,Z.height),0,0)},T=Z=>{const Y=Z.getContext("2d");if(!Y)return;const ue=Y.getImageData(0,0,Z.width,Z.height),ne=ue.data;for(let ce=0;ce<ne.length;ce+=4){const $e=(Math.random()-.5)*50;ne[ce]=Math.max(0,Math.min(255,ne[ce]+$e)),ne[ce+1]=Math.max(0,Math.min(255,ne[ce+1]+$e)),ne[ce+2]=Math.max(0,Math.min(255,ne[ce+2]+$e))}Y.putImageData(ue,0,0)};k.useEffect(()=>{e.current&&q(e.current)},[q]);const $=Z=>{var ue;const Y=(ue=Z.target.files)==null?void 0:ue[0];Y&&r(URL.createObjectURL(Y))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},D=async()=>{const Z=e.current;if(!Z)return;await q(Z);const Y=document.createElement("a");Y.download="meme.png",Y.href=Z.toDataURL("image/png"),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},U=async Z=>{C(!0),b(!1);try{console.log("Fetching NFTs for collection:",Z);let Y;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const ue=await bO(Z.slug,50);Y=ue.data,console.log("OpenSea response:",ue)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const ue=await zW(Z.slug,50);Y=ue.data,console.log("OpenSea Solana response:",ue)}else{console.log("Using Scatter API for:",Z.slug);const ue=await vO(Z.slug,1,50);Y=ue.data,console.log("Scatter response:",ue)}if(Y&&Y.length>0){const ue=Y[Math.floor(Math.random()*Y.length)],ne=ue.image||ue.image_url||ue.image_url_shrunk;console.log("Selected NFT:",ue),console.log("Image URL:",ne),r(ne)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(Y){console.error("Error fetching NFTs:",Y),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},H=Z=>{const Y={id:wPe(),src:Z,x:80,y:80,scale:1,rotation:0};I(ue=>ue.length>=2||ue.some(ne=>ne.src===Z&&!ne.id.startsWith("upload-"))?ue:[...ue,Y]),j(Y.id)},te=Z=>{var ue;const Y=(ue=Z.target.files)==null?void 0:ue[0];if(Y){const ne=URL.createObjectURL(Y);H(ne)}},oe=(Z,Y,ue)=>{I(ne=>ne.map(ce=>{if(ce.id!==Z)return ce;let $e=ce.x+Y/1.2,de=ce.y+ue/1.2;const we=40*ce.scale,We=40*ce.scale;return $e=Math.max(we,Math.min(Ti-we,$e)),de=Math.max(We,Math.min(Ti-We,de)),{...ce,x:$e,y:de}}))},re=(Z,Y,ue,ne,ce)=>{I($e=>$e.map(de=>{if(de.id!==Z)return de;const we=de.x,We=de.y,rt=Math.atan2(ce-We,ne-we)*180/Math.PI;return{...de,rotation:ue+(rt-Y)*.5}}))},ie=Z=>{I(Y=>Y.filter(ue=>ue.id!==Z))},ye=(Z,Y)=>{I(ue=>ue.map(ne=>ne.id===Z?{...ne,scale:Math.max(.2,ne.scale*(1+(Y-1)*.2))}:ne))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>b(Z=>!Z),children:"Collections"}),v&&m.jsx("div",{className:t.dropdownContent,children:bPe.map(Z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{U(Z)},children:Z.name},Z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:$})]}),E&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(Z=>!Z),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[_Pe.map((Z,Y)=>m.jsx("img",{src:Z,alt:`sticker${Y+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>H(Z)},Z)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:O,onChange:te})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:D,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:Ti,height:Ti,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:Ti,height:Ti,pointerEvents:"none"},children:A.map(Z=>P===Z.id?m.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:Y=>{S(Z.id),Y.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:Y=>{x===Z.id&&Y.buttons===1&&oe(Z.id,Y.movementX,Y.movementY)},children:[m.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:Y=>{var rt;Y.stopPropagation();const ue=(rt=Y.currentTarget.parentElement)==null?void 0:rt.getBoundingClientRect(),ne=ue?ue.left+ue.width/2:0,ce=ue?ue.top+ue.height/2:0,$e=Math.atan2(Y.clientY-ce,Y.clientX-ne)*180/Math.PI,de=Z.rotation,we=Yt=>{re(Z.id,$e,de,Yt.clientX,Yt.clientY)},We=()=>{window.removeEventListener("mousemove",we),window.removeEventListener("mouseup",We)};window.addEventListener("mousemove",we),window.addEventListener("mouseup",We)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:Y=>{Y.stopPropagation();const ue=Y.clientX,ne=$e=>{const de=($e.clientX-ue)/80;ye(Z.id,1+de)},ce=()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",ce)};window.addEventListener("mousemove",ne),window.addEventListener("mouseup",ce)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ie(Z.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>j(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A0(){return A0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(this,arguments)}var pu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pu||(pu={}));const EU="popstate";function EPe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return LR("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Qq(s)}return SPe(e,n,null,t)}function xr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yq(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CPe(){return Math.random().toString(36).substr(2,8)}function CU(t,e){return{usr:t.state,key:t.key,idx:e}}function LR(t,e,n,r){return n===void 0&&(n=null),A0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lm(e):e,{state:n,key:e&&e.key||r||CPe()})}function Qq(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function SPe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=pu.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(A0({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=pu.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=pu.Push;let v=LR(g.location,w,y);l=u()+1;let b=CU(v,l),E=g.createHref(v);try{o.pushState(b,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(E)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=pu.Replace;let v=LR(g.location,w,y);l=u();let b=CU(v,l),E=g.createHref(v);o.replaceState(b,"",E),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof w=="string"?w:Qq(w);return v=v.replace(/ $/,"%20"),xr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(EU,d),c=w,()=>{s.removeEventListener(EU,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var SU;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(SU||(SU={}));function APe(t,e,n){return n===void 0&&(n="/"),IPe(t,e,n)}function IPe(t,e,n,r){let s=typeof e=="string"?lm(e):e,i=Xq(s.pathname||"/",n);if(i==null)return null;let o=Jq(t);xPe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=jPe(i);a=MPe(o[c],l)}return a}function Jq(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(xr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=hh([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(xr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Jq(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:DPe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Zq(i.path))s(i,o,c)}),e}function Zq(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Zq(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function xPe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$Pe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TPe=/^:[\w-]+$/,NPe=3,RPe=2,PPe=1,kPe=10,OPe=-2,AU=t=>t==="*";function DPe(t,e){let n=t.split("/"),r=n.length;return n.some(AU)&&(r+=OPe),e&&(r+=RPe),n.filter(s=>!AU(s)).reduce((s,i)=>s+(TPe.test(i)?NPe:i===""?PPe:kPe),r)}function $Pe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function MPe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=LPe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:hh([i,d.pathname]),pathnameBase:HPe(hh([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=hh([i,d.pathnameBase]))}return o}function LPe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=UPe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function UPe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yq(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jPe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yq(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xq(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function BPe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?lm(t):t;return{pathname:n?n.startsWith("/")?n:FPe(n,e):e,search:VPe(r),hash:GPe(s)}}function FPe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function JI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WPe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zPe(t,e){let n=WPe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qPe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=lm(t):(s=A0({},t),xr(!s.pathname||!s.pathname.includes("?"),JI("?","pathname","search",s)),xr(!s.pathname||!s.pathname.includes("#"),JI("#","pathname","hash",s)),xr(!s.search||!s.search.includes("#"),JI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=BPe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const hh=t=>t.join("/").replace(/\/\/+/g,"/"),HPe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VPe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GPe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KPe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eH=["post","put","patch","delete"];new Set(eH);const YPe=["get",...eH];new Set(YPe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I0.apply(this,arguments)}const QO=k.createContext(null),QPe=k.createContext(null),J1=k.createContext(null),Z1=k.createContext(null),um=k.createContext({outlet:null,matches:[],isDataRoute:!1}),tH=k.createContext(null);function X1(){return k.useContext(Z1)!=null}function nH(){return X1()||xr(!1),k.useContext(Z1).location}function rH(t){k.useContext(J1).static||k.useLayoutEffect(t)}function JPe(){let{isDataRoute:t}=k.useContext(um);return t?uke():ZPe()}function ZPe(){X1()||xr(!1);let t=k.useContext(QO),{basename:e,future:n,navigator:r}=k.useContext(J1),{matches:s}=k.useContext(um),{pathname:i}=nH(),o=JSON.stringify(zPe(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return rH(()=>{a.current=!0}),k.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=qPe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:hh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function XPe(t,e){return eke(t,e)}function eke(t,e,n,r){X1()||xr(!1);let{navigator:s}=k.useContext(J1),{matches:i}=k.useContext(um),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=nH(),u;if(e){var d;let w=typeof e=="string"?lm(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||xr(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=APe(t,{pathname:f}),g=ike(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:hh([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:hh([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?k.createElement(Z1.Provider,{value:{location:I0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:pu.Pop}},g):g}function tke(){let t=lke(),e=KPe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const nke=k.createElement(tke,null);class rke extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(um.Provider,{value:this.props.routeContext},k.createElement(tH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ske(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(QO);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(um.Provider,{value:e},r)}function ike(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||xr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||nke,c&&(l<0&&h===0?(dke("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=w:d.route.Component?b=k.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,k.createElement(ske,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?k.createElement(rke,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var sH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sH||{}),iH=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iH||{});function oke(t){let e=k.useContext(QO);return e||xr(!1),e}function ake(t){let e=k.useContext(QPe);return e||xr(!1),e}function cke(t){let e=k.useContext(um);return e||xr(!1),e}function oH(t){let e=cke(),n=e.matches[e.matches.length-1];return n.route.id||xr(!1),n.route.id}function lke(){var t;let e=k.useContext(tH),n=ake(),r=oH();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uke(){let{router:t}=oke(sH.UseNavigateStable),e=oH(iH.UseNavigateStable),n=k.useRef(!1);return rH(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,I0({fromRouteId:e},i)))},[t,e])}const IU={};function dke(t,e,n){IU[t]||(IU[t]=!0)}function hke(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function q_(t){xr(!1)}function fke(t){let{basename:e="/",children:n=null,location:r,navigationType:s=pu.Pop,navigator:i,static:o=!1,future:a}=t;X1()&&xr(!1);let c=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:c,navigator:i,static:o,future:I0({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=lm(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=k.useMemo(()=>{let w=Xq(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:k.createElement(J1.Provider,{value:l},k.createElement(Z1.Provider,{children:n,value:g}))}function pke(t){let{children:e,location:n}=t;return XPe(UR(e),n)}new Promise(()=>{});function UR(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,UR(r.props.children,i));return}r.type!==q_&&xr(!1),!r.props.index||!r.props.children||xr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=UR(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gke="6";try{window.__reactRouterVersion=gke}catch{}const mke="startTransition",xU=qG[mke];function yke(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=EPe({window:s,v5Compat:!0}));let o=i.current,[a,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=k.useCallback(d=>{l&&xU?xU(()=>c(d)):c(d)},[c,l]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>hke(r),[r]),k.createElement(fke,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var TU;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(TU||(TU={}));var NU;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(NU||(NU={}));const wke=ba({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function vke(){const t=wke(),{open:e}=Q1(),{address:n,isConnected:r}=uv(),{isPending:s}=M9(),{disconnect:i}=L9(),{data:o}=U9({address:n}),[a,c]=k.useState("pixelawbs-popup"),[l,u]=k.useState(new Set),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[y,v]=k.useState(!1),b=JPe(),E=k.useRef(null);k.useEffect(()=>{if(a==="halloween-popup"&&E.current){const T=E.current.querySelector("script[data-tiktok-embed]");T&&T.remove();const $=document.createElement("script");$.src="https://www.tiktok.com/embed.js",$.async=!0,$.setAttribute("data-tiktok-embed","true"),E.current.appendChild($)}},[a]);const C=(T,$,R)=>{if(T==="url"&&R)window.open(R,"_blank");else if(T==="popup"&&$)c($),u(D=>{const U=new Set(D);return U.delete($),U}),document.body.offsetWidth;else if(T==="wallet")r?i():e();else if(T==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else T==="nft-gallery"?p(!0):T==="meme-generator"?w(!0):T==="chess"&&(r?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):e().then(()=>{const D=()=>{window.ethereum&&window.ethereum.selectedAddress?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):setTimeout(D,200)};D()}))},A=()=>c(null),I=T=>{u($=>new Set($).add(T)),c(null)},x=T=>{T==="mint-popup"?h(!0):T==="nft-gallery-popup"?p(!0):T==="meme-generator-popup"?w(!0):c(T),u($=>{const R=new Set($);return R.delete(T),R})},S=()=>h(!1),O=()=>p(!1),P=()=>w(!1),j=()=>{h(!1),u(T=>new Set(T).add("mint-popup"))},q=()=>{p(!1),u(T=>new Set(T).add("nft-gallery-popup"))},B=()=>{w(!1),u(T=>new Set(T).add("meme-generator-popup"))},N=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(bde,{onIconClick:C}),m.jsx(Ede,{minimizedWindows:Array.from(l),onRestoreWindow:x,walletButton:N,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(uo,{id:"chat-popup",isOpen:a==="chat-popup",onClose:A,onMinimize:I,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(uo,{id:"purity-popup",isOpen:a==="purity-popup",onClose:A,onMinimize:I,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(uo,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:A,onMinimize:I,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(uo,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:A,onMinimize:I,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(uo,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:A,onMinimize:I,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(uo,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:A,onMinimize:I,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(zae,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(uo,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:A,onMinimize:I,children:(()=>{const T=$=>{$.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:T,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(uo,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:A,onMinimize:I,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:E,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(uo,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:A,onMinimize:I,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(Ade,{isOpen:d,onClose:S,onMinimize:j,walletAddress:n||""}),m.jsx(hPe,{isOpen:f,onClose:O,onMinimize:q,walletAddress:n}),m.jsx(uo,{id:"meme-generator-popup",isOpen:g,onClose:P,onMinimize:B,children:m.jsx(Kq,{})})]})}const bke=ba({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),RU=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],_ke=({onBack:t,walletAddress:e})=>{const n=bke(),{open:r}=Q1(),[s,i]=k.useState([]),[o,a]=k.useState(!0),[c,l]=k.useState(null),[u,d]=k.useState(RU[0]),[h,f]=k.useState(!1),[p,g]=k.useState(null),[w,y]=k.useState("all"),[v,b]=k.useState(null),E=k.useCallback(async()=>{var x,S;try{if((x=window.solana)!=null&&x.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);k.useEffect(()=>{var x,S;(x=window.solana)!=null&&x.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{(async()=>{a(!0);try{let S,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,S=await Cde(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await bO(u.slug,100,O):S=await vO(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(j=>j.owners&&j.owners.length>0)?S.data=S.data.filter(j=>j.owners.some(B=>B.owner_of&&B.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),b("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),k.useEffect(()=>{h&&E()},[h,E]);const C=async x=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await WW(u.chain,x.address,x.token_id.toString()),O={...x,attributes:JSON.stringify(S.traits||[])};l(O)}catch(S){console.error("Failed to fetch full NFT details",S),l(x)}else l(x);a(!1)},A=()=>{if(!c)return null;let x=[];try{x=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:x.map((S,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},O))})]})},I=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:RU.map(x=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===x.slug?"active":""}`,onClick:()=>d(x),children:x.name},x.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{E()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),v&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:v}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(x=>{let S=x.image||x.image_url||x.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void C(x),children:[m.jsx("img",{src:S,alt:x.name,onError:O=>{O.currentTarget.src!==x.image_url&&x.image_url?O.currentTarget.src=x.image_url:O.currentTarget.src!==x.image_url_shrunk&&x.image_url_shrunk?O.currentTarget.src=x.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:x.name})]},x.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?A():I()})]})},Eke=ba({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Vo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=Eke();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},Cke=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=k.useState([]),[i,o]=k.useState(!1),[a,c]=k.useState(!1),[l,u]=k.useState({}),[d,h]=k.useState(null),{data:f}=j9();k.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const E=await BW(n);s(E);const C={};E.forEach(A=>{C[A.id]=0}),u(C)}catch(E){h(E.message)}finally{o(!1)}},g=(E,C)=>{u(A=>({...A,[E]:Math.max(0,C)}))},w=async()=>{const E=Object.entries(l).filter(([,C])=>C>0).map(([C,A])=>({id:C,quantity:A}));if(E.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await FW(n,E);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const A=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${A}`),e()}catch(A){h("Transaction failed: "+A.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},y=(E,C)=>`${parseFloat(E)} ${C}`,v={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},b={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Vo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:b,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(E=>m.jsxs("div",{style:v,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:E.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(E.token_price,E.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",E.wallet_limit===4294967295?"Unlimited":E.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:E.wallet_limit===4294967295?void 0:E.wallet_limit,value:l[E.id]||"",onChange:C=>g(E.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},E.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},Ske=ba({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),Ake=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],Ike=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],xke=()=>{const t=Ske(),{open:e}=Q1(),{address:n,isConnected:r}=uv(),{isPending:s}=M9(),{disconnect:i}=L9(),{data:o}=U9({address:n}),[a,c]=k.useState("main"),[l,u]=k.useState(!1),[d,h]=k.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[y,v]=k.useState(!1),[b,E]=k.useState(!1),[C,A]=k.useState(!1),[I,x]=k.useState(!1),[S,O]=k.useState(!1),[P,j]=k.useState(!1),[q,B]=k.useState(!1),[N,T]=k.useState(!1),[$,R]=k.useState(!1),[D,U]=k.useState(!1),H=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>v(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>E(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>A(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],te=ie=>{ie.disabled||ie.action()};if(k.useEffect(()=>{const ie=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ie)},[]),k.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(_ke,{onBack:()=>c("main"),walletAddress:n||void 0});function oe({open:ie,onClose:ye,title:Z,nfts:Y}){const ue=ne=>{switch(ne){case"lawbsters":x(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":j(!0);break;case"halloween":B(!0);break;case"lawbstation":T(!0);break;case"nexus":R(!0);break}};return m.jsx(Vo,{isOpen:ie,onClose:ye,title:Z,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Y.map(ne=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>ue(ne.id),children:[m.jsx("img",{src:ne.image,alt:ne.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:ne.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:ne.description})]},ne.id))})})}function re({open:ie,onClose:ye}){return ie?m.jsxs(Vo,{isOpen:ie,onClose:ye,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:H.map(ie=>m.jsxs("div",{className:t.icon,onClick:()=>te(ie),children:[m.jsx("img",{src:ie.icon,alt:ie.label}),m.jsx("span",{children:ie.label})]},ie.label))}),l&&m.jsxs(Vo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ie=>ie.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),U(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(Cke,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(oe,{open:y,onClose:()=>v(!1),title:"EVM NFT'S FOLDER",nfts:Ake}),m.jsx(oe,{open:b,onClose:()=>E(!1),title:"SOL NFTS FOLDER",nfts:Ike}),m.jsx(re,{open:C,onClose:()=>A(!1)}),m.jsxs(Vo,{isOpen:I,onClose:()=>x(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Vo,{isOpen:S,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Vo,{isOpen:P,onClose:()=>j(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{j(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Vo,{isOpen:q,onClose:()=>B(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Vo,{isOpen:N,onClose:()=>T(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Vo,{isOpen:$,onClose:()=>R(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Vo,{isOpen:D,onClose:()=>U(!1),title:"Meme Generator",children:m.jsx(Kq,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function Tke(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=k.useState(e(t));function s(){r(e(t))}return k.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const Nke=Symbol(),PU=Object.getPrototypeOf,jR=new WeakMap,Rke=t=>t&&(jR.has(t)?jR.get(t):PU(t)===Object.prototype||PU(t)===Array.prototype),Pke=t=>Rke(t)&&t[Nke]||null,kU=(t,e=!0)=>{jR.set(t,e)},tC={},JO=t=>typeof t=="object"&&t!==null,kke=t=>JO(t)&&!Rv.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),aH=(t,e)=>{const n=BR.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return kU(r,!0),BR.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Rv.has(i))kU(i,!1);else if(Ku.has(i)){const[c,l]=Ku.get(i);a.value=aH(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},Oke=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(OU(l,o)||x0.has(o)&&OU(l,x0.get(o))))return!0;n(i),JO(o)&&(o=Pke(o)||o);const u=!Ku.has(o)&&$ke(o)?jn(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Ku=new WeakMap,Rv=new WeakSet,BR=new WeakMap,Ay=[1,1],x0=new WeakMap;let OU=Object.is,Dke=(t,e)=>new Proxy(t,e),$ke=kke,Mke=aH,Lke=Oke;function jn(t={}){if(!JO(t))throw new Error("object required");const e=x0.get(t);if(e)return e;let n=Ay[0];const r=new Set,s=(w,y=++Ay[0])=>{n!==y&&(n=y,r.forEach(v=>v(w,y)))};let i=Ay[1];const o=(w=++Ay[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const v=y[1](w);v>n&&(n=v)})),n),a=w=>(y,v)=>{const b=[...y];b[1]=[w,...b[1]],s(b,v)},c=new Map,l=(w,y)=>{const v=!Rv.has(y)&&Ku.get(y);if(v){if((tC?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const b=v[2](a(w));c.set(w,[v,b])}else c.set(w,[v])}},u=w=>{var y;const v=c.get(w);v&&(c.delete(w),(y=v[1])==null||y.call(v))},d=w=>(r.add(w),r.size===1&&c.forEach(([v,b],E)=>{if((tC?"production":void 0)!=="production"&&b)throw new Error("remove already exists");const C=v[2](a(E));c.set(E,[v,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([v,b],E)=>{b&&(b(),c.set(E,[v]))})});let h=!0;const f=Lke(()=>h,l,u,s),p=Dke(t,f);x0.set(t,p);const g=[t,o,d];return Ku.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function _i(t,e,n){const r=Ku.get(t);(tC?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function T0(t){const e=Ku.get(t);(tC?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return Mke(n,r())}function Og(t){return Rv.add(t),t}function Uke(){return{proxyStateMap:Ku,refSet:Rv,snapCache:BR,versionHolder:Ay,proxyCache:x0}}function Ws(t,e,n,r){let s=t[e];return _i(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:jke,snapCache:Bke}=Uke(),Zb=t=>jke.has(t);function Fke(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=Bke.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return Zb(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Zb(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!Zb(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!Zb(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=jn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var DU={};const le={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof DU<"u"?DU.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},nC={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=le.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},Wke={bigNumber(t){return t?new Ka(t):new Ka(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ka(0);const n=new Ka(t),r=new Ka(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},zke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],qke=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Hke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Vke={getERC20Abi:t=>le.USDT_CONTRACT_ADDRESSES.includes(t)?Hke:zke,getSwapAbi:()=>qke},gu={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},dt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function ZI(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ot={setItem(t,e){Iy()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Iy())return localStorage.getItem(t)||void 0},removeItem(t){Iy()&&localStorage.removeItem(t)},clear(){Iy()&&localStorage.clear()}};function Iy(){return typeof window<"u"&&typeof localStorage<"u"}function rC(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Ds={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[le.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Fe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Fe.getActiveNamespace(),e=Fe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ot.setItem(dt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ot.getItem(dt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ot.removeItem(dt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ot.setItem(dt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ot.setItem(dt.ACTIVE_CAIP_NETWORK_ID,t),Fe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ot.getItem(dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ot.removeItem(dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=ZI(t);ot.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Fe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ot.setItem(dt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ot.getItem(dt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=ZI(t);ot.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ot.getItem(dt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=ZI(t);return ot.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ot.setItem(dt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ot.getItem(dt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ot.removeItem(dt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ot.getItem(dt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ot.getItem(dt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ot.setItem(dt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ot.getItem(dt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ot.getItem(dt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ot.setItem(dt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Fe.getConnectedNamespaces();e.includes(t)||(e.push(t),Fe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Fe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Fe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ot.getItem(dt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ot.setItem(dt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ot.removeItem(dt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ot.getItem(dt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Fe.getBalanceCache();ot.setItem(dt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Fe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Fe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Fe.getBalanceCache();e[t.caipAddress]=t,ot.setItem(dt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ot.getItem(dt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Fe.getBalanceCache();ot.setItem(dt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Fe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Fe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Fe.getNativeBalanceCache();e[t.caipAddress]=t,ot.setItem(dt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ot.getItem(dt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Fe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Fe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Fe.getEnsCache();e[t.address]=t,ot.setItem(dt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Fe.getEnsCache();ot.setItem(dt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ot.getItem(dt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Fe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Fe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Fe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ot.setItem(dt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Fe.getIdentityCache();ot.setItem(dt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ot.removeItem(dt.PORTFOLIO_CACHE),ot.removeItem(dt.NATIVE_BALANCE_CACHE),ot.removeItem(dt.ENS_CACHE),ot.removeItem(dt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ot.setItem(dt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ot.getItem(dt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Fe.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===le.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};ot.setItem(dt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ot.getItem(dt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Fe.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ot.setItem(dt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=ot.getItem(dt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Fe.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),ot.setItem(dt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Fe.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),ot.setItem(dt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Fe.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},et={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return et.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ds.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ds.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(et.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ds.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(et.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!et.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Fe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,et.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return le.W3M_API_URL},getBlockchainApiUrl(){return le.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return le.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Ds.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in le.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function ry(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Pv{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await ry(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await ry(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ry(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ry(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ry(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Gke={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Ds.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(et.isTelegram()){if(et.isIos())return t.filter(e=>e!=="google");if(et.isMac())return t.filter(e=>e!=="x");if(et.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},nt=jn({features:Ds.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ds.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),gt={state:nt,subscribeKey(t,e){return Ws(nt,t,e)},setOptions(t){Object.assign(nt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...nt.remoteFeatures,...t};nt.remoteFeatures=e,(n=nt.remoteFeatures)!=null&&n.socials&&(nt.remoteFeatures.socials=Gke.filterSocialsByPlatform(nt.remoteFeatures.socials))},setFeatures(t){if(!t)return;nt.features||(nt.features=Ds.DEFAULT_FEATURES);const e={...nt.features,...t};nt.features=e},setProjectId(t){nt.projectId=t},setCustomRpcUrls(t){nt.customRpcUrls=t},setAllWallets(t){nt.allWallets=t},setIncludeWalletIds(t){nt.includeWalletIds=t},setExcludeWalletIds(t){nt.excludeWalletIds=t},setFeaturedWalletIds(t){nt.featuredWalletIds=t},setTokens(t){nt.tokens=t},setTermsConditionsUrl(t){nt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){nt.privacyPolicyUrl=t},setCustomWallets(t){nt.customWallets=t},setIsSiweEnabled(t){nt.isSiweEnabled=t},setIsUniversalProvider(t){nt.isUniversalProvider=t},setSdkVersion(t){nt.sdkVersion=t},setMetadata(t){nt.metadata=t},setDisableAppend(t){nt.disableAppend=t},setEIP6963Enabled(t){nt.enableEIP6963=t},setDebug(t){nt.debug=t},setEnableWalletConnect(t){nt.enableWalletConnect=t},setEnableWalletGuide(t){nt.enableWalletGuide=t},setEnableAuthLogger(t){nt.enableAuthLogger=t},setEnableWallets(t){nt.enableWallets=t},setPreferUniversalLinks(t){nt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Ds.SIWX_DEFAULTS))t[e]??(t[e]=n);nt.siwx=t},setConnectMethodsOrder(t){nt.features={...nt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){nt.features={...nt.features,walletFeaturesOrder:t}},setSocialsOrder(t){nt.remoteFeatures={...nt.remoteFeatures,socials:t}},setCollapseWallets(t){nt.features={...nt.features,collapseWallets:t}},setEnableEmbedded(t){nt.enableEmbedded=t},setAllowUnsupportedChain(t){nt.allowUnsupportedChain=t},setManualWCControl(t){nt.manualWCControl=t},setEnableNetworkSwitch(t){nt.enableNetworkSwitch=t},setEnableReconnect(t){nt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(nt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){nt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return nt.universalProviderConfigOverride},getSnapshot(){return T0(nt)}},Kke=Object.freeze({enabled:!0,events:[]}),Yke=new Pv({baseUrl:et.getAnalyticsUrl(),clientId:null}),Qke=5,Jke=60*1e3,Pl=jn({...Kke}),Zke={state:Pl,subscribeKey(t,e){return Ws(Pl,t,e)},async sendError(t,e){if(!Pl.enabled)return;const n=Date.now();if(Pl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Jke}).length>=Qke)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Pl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=gt.state;await Yke.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:et.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Pl.enabled=!0},disable(){Pl.enabled=!1},clearEvents(){Pl.events=[]}};class Dg extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Dg.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Dg):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function $U(t,e){const n=t instanceof Dg?t:new Dg(t instanceof Error?t.message:String(t),e,t);throw Zke.sendError(n,n.category),n}function Mo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return $U(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return $U(a,e)}},n[r]=i}else n[r]=s}),n}var $g={};const Xke="https://secure.walletconnect.org/sdk",eOe=(typeof process<"u"&&typeof $g<"u"?$g.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Xke,tOe=(typeof process<"u"&&typeof $g<"u"?$g.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",nOe=(typeof process<"u"&&typeof $g<"u"?$g.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Be={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},is={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},qa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},rOe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===qa.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${qa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===qa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${qa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===le.CHAIN.SOLANA&&t===qa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${qa.COINBASE.url}/dapp?cb_url=${r}`)}},Ni=jn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),sOe={state:Ni,subscribeNetworkImages(t){return _i(Ni.networkImages,()=>t(Ni.networkImages))},subscribeKey(t,e){return Ws(Ni,t,e)},subscribe(t){return _i(Ni,()=>t(Ni))},setWalletImage(t,e){Ni.walletImages[t]=e},setNetworkImage(t,e){Ni.networkImages[t]=e},setChainImage(t,e){Ni.chainImages[t]=e},setConnectorImage(t,e){Ni.connectorImages={...Ni.connectorImages,[t]:e}},setTokenImage(t,e){Ni.tokenImages[t]=e},setCurrencyImage(t,e){Ni.currencyImages[t]=e}},na=Mo(sOe),iOe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},XI=jn({networkImagePromises:{}}),oOe={async fetchWalletImage(t){if(t)return await at._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(XI.networkImagePromises[t]||(XI.networkImagePromises[t]=at._fetchNetworkImage(t)),await XI.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return na.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return na.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return na.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return na.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return na.state.connectorImages[t.imageId]},getChainImage(t){return na.state.networkImages[iOe[t]]}},kl=jn({message:"",variant:"info",open:!1}),aOe={state:kl,subscribeKey(t,e){return Ws(kl,t,e)},open(t,e){const{debug:n}=gt.state,{shortMessage:r,longMessage:s}=t;n&&(kl.message=r,kl.variant=e,kl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){kl.open=!1,kl.message="",kl.variant="info"}},Ad=Mo(aOe),cOe=et.getAnalyticsUrl(),lOe=new Pv({baseUrl:cOe,clientId:null}),uOe=["MODAL_CREATED"],Nc=jn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Gn={state:Nc,subscribe(t){return _i(Nc,()=>t(Nc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Jt.state.address;if(uOe.includes(t.data.event)||typeof window>"u")return;await lOe.post({path:"/e",params:Gn.getSdkProperties(),body:{eventId:et.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Nc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===le.HTTP_STATUS_CODES.FORBIDDEN&&!Nc.reportedErrors.FORBIDDEN&&(Ad.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Iy()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Nc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Nc.timestamp=Date.now(),Nc.data=t,(e=gt.state.features)!=null&&e.analytics&&Gn._sendAnalyticsEvent(Nc)}},dOe=et.getApiUrl(),Js=new Pv({baseUrl:dOe,clientId:null}),hOe=40,MU=4,fOe=20,vt=jn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),at={state:vt,subscribeKey(t,e){return Ws(vt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return gt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Js.baseUrl}/getWalletImage/${t}`,n=await Js.getBlob({path:e,params:at._getSdkProperties()});na.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Js.baseUrl}/public/getAssetImage/${t}`,n=await Js.getBlob({path:e,params:at._getSdkProperties()});na.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Js.baseUrl}/public/getAssetImage/${t}`,n=await Js.getBlob({path:e,params:at._getSdkProperties()});na.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Js.baseUrl}/public/getCurrencyImage/${t}`,n=await Js.getBlob({path:e,params:at._getSdkProperties()});na.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Js.baseUrl}/public/getTokenImage/${t}`,n=await Js.getBlob({path:e,params:at._getSdkProperties()});na.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return et.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===qa.COINBASE.id?!0:G.state.activeChain==="solana"&&(n.id===qa.SOLFLARE.id||n.id===qa.PHANTOM.id)):t},async fetchProjectConfig(){return(await Js.get({path:"/appkit/v1/config",params:at._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Js.get({path:"/projects/v1/origins",params:at._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===le.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=le.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=G.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!oOe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>at._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ke.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>at._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];at._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(qa).map(o=>o.id));const r=await Js.get({path:"/getWallets",params:{...at._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:at._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=gt.state;if(t!=null&&t.length){const e={...at._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??MU,include:t},{data:n}=await at.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>at._fetchWalletImage(i))),vt.featured=r,vt.allFeatured=r}},async fetchRecommendedWallets(){try{vt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=gt.state,r=[...e??[],...n??[]].filter(Boolean),s=G.getRequestedCaipNetworkIds().join(","),i={page:1,entries:MU,include:t,exclude:r,chains:s},{data:o,count:a}=await at.fetchWallets(i),c=Fe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>at._fetchWalletImage(d))),vt.recommended=o,vt.allRecommended=o,vt.count=a??0}catch{}finally{vt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=gt.state,s=G.getRequestedCaipNetworkIds().join(","),i=[...vt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:hOe,include:e,exclude:i,chains:s},{data:a,count:c}=await at.fetchWallets(o),l=a.slice(0,fOe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>at._fetchWalletImage(u))),vt.wallets=et.uniqueBy([...vt.wallets,...at._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),vt.count=c>vt.count?c:vt.count,vt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await at.fetchWallets(e);n&&n.forEach(r=>{vt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=gt.state,s=G.getRequestedCaipNetworkIds().join(",");vt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await at.fetchWallets(i);Gn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>at._fetchWalletImage(c)),et.wait(300)]),vt.search=at._filterOutExtensions(o)},initPromise(t,e){const n=vt.promises[t];return n||(vt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&at.initPromise("connectorImages",at.fetchConnectorImages),e&&at.initPromise("featuredWallets",at.fetchFeaturedWallets),n&&at.initPromise("recommendedWallets",at.fetchRecommendedWallets),r&&at.initPromise("networkImages",at.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=gt.state.features)!=null&&t.analytics&&at.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Js.get({path:"/getAnalyticsConfig",params:at._getSdkProperties()});gt.setFeatures({analytics:t})}catch{gt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){vt.featured=vt.allFeatured,vt.recommended=vt.allRecommended;return}const e=G.getRequestedCaipNetworkIds().join(",");vt.featured=vt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vt.recommended=vt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vt.filteredWallets=vt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){vt.filteredWallets=[]},setFilterByNamespace(t){if(!t){vt.featured=vt.allFeatured,vt.recommended=vt.allRecommended;return}const e=G.getRequestedCaipNetworkIds().join(",");vt.featured=vt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vt.recommended=vt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vt.filteredWallets=vt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},hn=jn({view:"Connect",history:["Connect"],transactionStack:[]}),pOe={state:hn,subscribeKey(t,e){return Ws(hn,t,e)},pushTransactionStack(t){hn.transactionStack.push(t)},popTransactionStack(t){const e=hn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),pt.goBack();break;case"cancel":s==null||s(),pt.goBack();break}},push(t,e){t!==hn.view&&(hn.view=t,hn.history.push(t),hn.data=e)},reset(t,e){hn.view=t,hn.history=[t],hn.data=e},replace(t,e){hn.history.at(-1)===t||(hn.view=t,hn.history[hn.history.length-1]=t,hn.data=e)},goBack(){var r;const t=G.state.activeCaipAddress,e=pt.state.view==="ConnectingFarcaster",n=!t&&e;if(hn.history.length>1){hn.history.pop();const[s]=hn.history.slice(-1);s&&(t&&s==="Connect"?hn.view="Account":hn.view=s)}else Pn.close();(r=hn.data)!=null&&r.wallet&&(hn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Jt.setFarcasterUrl(void 0,G.state.activeChain);const a=Ke.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=T0(gt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(hn.history.length>1){hn.history=hn.history.slice(0,t+1);const[e]=hn.history.slice(-1);e&&(hn.view=e)}},goBackOrCloseModal(){pt.state.history.length>1?pt.goBack():Pn.close()}},pt=Mo(pOe),Rc=jn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),FR={state:Rc,subscribe(t){return _i(Rc,()=>t(Rc))},setThemeMode(t){Rc.themeMode=t;try{const e=Ke.getAuthConnector();if(e){const n=FR.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:rC(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Rc.themeVariables={...Rc.themeVariables,...t};try{const e=Ke.getAuthConnector();if(e){const n=FR.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:rC(Rc.themeVariables,Rc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return T0(Rc)}},Xb=Mo(FR),cH={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ht=jn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...cH},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),gOe={state:Ht,subscribe(t){return _i(Ht,()=>{t(Ht)})},subscribeKey(t,e){return Ws(Ht,t,e)},initialize(t){t.forEach(e=>{const n=Fe.getConnectedConnectorId(e);n&&Ke.setConnectorId(n,e)})},setActiveConnector(t){t&&(Ht.activeConnector=Og(t))},setConnectors(t){t.filter(s=>!Ht.allConnectors.some(i=>i.id===s.id&&Ke.getConnectorName(i.name)===Ke.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Ht.allConnectors.push(Og(s))});const n=Ke.getEnabledNamespaces(),r=Ke.getEnabledConnectors(n);Ht.connectors=Ke.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Ht.filterByNamespaceMap).forEach(e=>{Ht.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Ht.filterByNamespaceMap[e]=!0}),Ke.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Ht.filterByNamespaceMap[t]=e,Ke.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ke.getEnabledNamespaces(),e=Ke.getEnabledConnectors(t),n=Ke.areAllNamespacesEnabled();Ht.connectors=Ke.mergeMultiChainConnectors(e),n?at.clearFilterByNamespaces():at.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Ht.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Ht.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Ht.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ke.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===le.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ke.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===le.CONNECTOR_ID.AUTH){const s=t,i=T0(gt.state),o=Xb.getSnapshot().themeMode,a=Xb.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:rC(a,o)}),Ke.setConnectors([t])}else Ke.setConnectors([t])},getAuthConnector(t){var r;const e=t||G.state.activeChain,n=Ht.connectors.find(s=>s.id===le.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Ht.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Ht.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Ht.allConnectors.filter(r=>r.chain===G.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=T0(gt.state),r=Xb.getSnapshot().themeMode,s=Xb.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:rC(s,r)})},getConnectorsByNamespace(t){const e=Ht.allConnectors.filter(n=>n.chain===t);return Ke.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return G.checkIfSmartAccountEnabled()&&dc(t)===is.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ke.getConnector(t.id,t.rdns);rOe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,G.state.activeChain),e?pt.push("ConnectingExternal",{connector:e}):pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ke.getConnectorsByNamespace(t):Ke.mergeMultiChainConnectors(Ht.allConnectors)},setFilterByNamespace(t){Ht.filterByNamespace=t,Ht.connectors=Ke.getConnectors(t),at.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Ht.activeConnectorIds={...Ht.activeConnectorIds,[e]:t},Fe.setConnectedConnectorId(e,t))},removeConnectorId(t){Ht.activeConnectorIds={...Ht.activeConnectorIds,[t]:void 0},Fe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Ht.activeConnectorIds[t]},isConnected(t){return t?!!Ht.activeConnectorIds[t]:Object.values(Ht.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Ht.activeConnectorIds={...cH}}},Ke=Mo(gOe),mOe=1e3,sy={checkNamespaceConnectorId(t,e){return Ke.getConnectorId(t)===e},isSocialProvider(t){return Ds.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ke.setActiveConnector(e),s==null||s(et.isMobile()&&t),r){const l=Pn.subscribeKey("open",u=>{u||(pt.state.view!==r&&pt.replace(r),l(),a(new Error("Modal closed")))})}const c=G.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Pn.close(),c(),o(gu.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=G.subscribeKey("activeCaipAddress",s=>{s&&(Pn.close(),r(),e(gu.parseCaipAddress(s)))});Ve.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Jt.state.socialWindow,i=Jt.state.socialProvider,o=!1,a=null;const c=G.subscribeKey("activeCaipAddress",l=>{l&&(e&&Pn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===le.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Ke.getAuthConnector();if(g&&!o){s&&(s.close(),Jt.setSocialWindow(void 0,G.state.activeChain),s=Jt.state.socialWindow),o=!0;const w=f.data.resultUri;i&&Gn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=G.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){Fe.setConnectedSocialProvider(i),await Ve.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const v=G.state.activeCaipAddress;if(!v){u(new Error("Failed to connect"));return}l(gu.parseCaipAddress(v)),Gn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Gn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Gn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Jt.setSocialProvider(t,G.state.activeChain),i=Jt.state.socialProvider,Gn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Pn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ke.getAuthConnector();if(p&&!Jt.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Jt.setFarcasterUrl(g,G.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ke.getAuthConnector();a=et.returnOpenHref(`${le.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Jt.setSocialWindow(a,G.state.activeChain),s=Jt.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Pn.subscribeKey("open",c=>{c||(pt.state.view!==e&&pt.replace(e),a(),i(new Error("Modal closed")))})}const o=G.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Pn.close(),o(),s(gu.parseCaipAddress(a)))})})},async updateEmail(){const t=Fe.getConnectedConnectorId(G.state.activeChain),e=Ke.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==le.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Pn.close(),clearInterval(i),o(),r({email:a}))},mOe),o=Pn.subscribeKey("open",a=>{a||(pt.state.view!=="Connect"&&pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return G.checkIfSmartAccountEnabled()&&dc(t)===is.ACCOUNT_TYPES.EOA}};function lH(){var r,s;const t=((r=G.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=G.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Ds.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function dc(t){var n;return(n=G.getAccountData(t))==null?void 0:n.preferredAccountType}const uH={getConnectionStatus(t,e){const n=Ke.state.activeConnectorIds[e],r=Ve.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=gt.state.remoteFeatures)!=null&&a.multiWallet),n=Ke.state.activeConnectorIds[t],r=Ve.getConnections(t),i=(Ve.state.recentConnections.get(t)??[]).filter(c=>Ke.getConnectorById(c.connectorId)),o=uH.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Id=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),yr=jn({...Id}),yOe={state:yr,subscribeKey(t,e){return Ws(yr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=et.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){yr.message=Id.message,yr.variant=Id.variant,yr.svg=Id.svg,yr.open=Id.open,yr.autoClose=Id.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Id.autoClose}){yr.open?(yr.open=!1,setTimeout(()=>{yr.message=t,yr.variant=n,yr.svg=e,yr.open=!0,yr.autoClose=r},150)):(yr.message=t,yr.variant=n,yr.svg=e,yr.open=!0,yr.autoClose=r)}},mu=yOe,In=jn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),wOe={state:In,subscribe(t){return _i(In,()=>t(In))},setLastNetworkInView(t){In.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");In.loading=!0;try{const r=await ut.fetchTransactions({account:t,cursor:In.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=xy.filterSpamTransactions(r.data),i=xy.filterByConnectedChain(s),o=[...In.transactions,...i];In.loading=!1,e==="coinbase"?In.coinbaseTransactions=xy.groupTransactionsByYearAndMonth(In.coinbaseTransactions,r.data):(In.transactions=o,In.transactionsByYear=xy.groupTransactionsByYearAndMonth(In.transactionsByYear,i)),In.empty=o.length===0,In.next=r.next?r.next:void 0}catch{const s=G.state.activeChain;Gn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:gt.state.projectId,cursor:In.next,isSmartAccount:dc(s)===is.ACCOUNT_TYPES.SMART_ACCOUNT}}),mu.showError("Failed to fetch transactions"),In.loading=!1,In.empty=!0,In.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){In.next=void 0},resetTransactions(){In.transactions=[],In.transactionsByYear={},In.lastNetworkInView=void 0,In.loading=!1,In.empty=!1,In.next=void 0}},xy=Mo(wOe,"API_ERROR"),Lt=jn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let wd;const vOe={state:Lt,subscribe(t){return _i(Lt,()=>t(Lt))},subscribeKey(t,e){return Ws(Lt,t,e)},_getClient(){return Lt._client},setClient(t){Lt._client=Og(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ve.syncStorageConnections(e)},syncStorageConnections(t){const e=Fe.getConnections(),n=t??Array.from(G.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Lt.recentConnections);i.set(r,s),Lt.recentConnections=i}},getConnections(t){return t?Lt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ve.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(et.isTelegram()||et.isSafari()&&et.isIos()){if(wd){await wd,wd=void 0;return}if(!et.isPairingExpired(Lt==null?void 0:Lt.wcPairingExpiry)){const s=Lt.wcUri;Lt.wcUri=s;return}wd=(e=(t=Ve._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Ve.state.status="connecting",await wd,wd=void 0,Lt.wcPairingExpiry=void 0,Ve.state.status="connected"}else await((r=(n=Ve._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Ve._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&G.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Ve._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||G.state.activeChain;e&&Ke.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Pn.setLoading(!0,G.state.activeChain);const n=Ke.getAuthConnector();n&&(Jt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Fe.setPreferredAccountTypes(Object.entries(G.state.chains).reduce((s,[i,o])=>{const a=i,c=dc(a);return c!==void 0&&(s[a]=c),s},{})),await Ve.reconnectExternal(n),Pn.setLoading(!1,G.state.activeChain),Gn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Ve._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Ve._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Ve._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Ve._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Ve._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Ve._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Ve._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Ve._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Ve._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Ve._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Ve._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Ve._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Lt.wcUri=void 0,Lt.wcPairingExpiry=void 0,Lt.wcLinking=void 0,Lt.recentWallet=void 0,Lt.status="disconnected",xy.resetTransactions(),Fe.deleteWalletConnectDeepLink()},resetUri(){Lt.wcUri=void 0,Lt.wcPairingExpiry=void 0,wd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Ve.state;t&&Fe.setWalletConnectDeepLink(t),e&&Fe.setAppKitRecent(e),Gn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Lt.wcBasic=t},setUri(t){Lt.wcUri=t,Lt.wcPairingExpiry=et.getPairingExpiry()},setWcLinking(t){Lt.wcLinking=t},setWcError(t){Lt.wcError=t,Lt.buffering=!1},setRecentWallet(t){Lt.recentWallet=t},setBuffering(t){Lt.buffering=t},setStatus(t){Lt.status=t},setIsSwitchingConnection(t){Lt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Ve._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Dg("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Lt.connections);n.set(e,t),Lt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Jt.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&sy.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ve.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ke.getConnectorById(t.connectorId),s=t.connectorId===le.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Ve.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Ve.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ke.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===le.CONNECTOR_ID.AUTH,a=t.connectorId===le.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&sy.isSocialProvider(i)){const{address:d}=await sy.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Pn.open({view:"ConnectingFarcaster"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await sy.connectEmail({closeModalOnConnect:r,onOpen(){Pn.open({view:"EmailLogin"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await sy.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Pn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const d=await Ve.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Ve.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Jt.getCaipAddress(n);if(o){const{address:c}=gu.parseCaipAddress(o);i=c}const a=uH.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Ve.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ve.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ve=Mo(vOe),Gf=jn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Bp={state:Gf,subscribe(t){return _i(Gf,()=>t(Gf))},subscribeOpen(t){return Ws(Gf,"open",t)},set(t){Object.assign(Gf,{...Gf,...t})}},bOe={async getTokenList(){var r;const t=G.state.activeCaipNetwork,e=await ut.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=G.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Ve==null?void 0:Ve.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await ut.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await ut.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Ve.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await ZO.getMyTokensWithBalance(t);return Jt.setTokenBalance(e,G.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:lH(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},sn=jn({tokenBalances:[],loading:!1}),_Oe={state:sn,subscribe(t){return _i(sn,()=>t(sn))},subscribeKey(t,e){return Ws(sn,t,e)},setToken(t){t&&(sn.token=Og(t))},setTokenAmount(t){sn.sendTokenAmount=t},setReceiverAddress(t){sn.receiverAddress=t},setReceiverProfileImageUrl(t){sn.receiverProfileImageUrl=t},setReceiverProfileName(t){sn.receiverProfileName=t},setNetworkBalanceInUsd(t){sn.networkBalanceInUSD=t},setLoading(t){sn.loading=t},async sendToken(){var t;try{switch(Xt.setLoading(!0),(t=G.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Xt.sendEvmToken();return;case"solana":await Xt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Xt.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=G.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=dc(t);if(!Xt.state.sendTokenAmount||!Xt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Xt.state.token)throw new Error("A token is required");(n=Xt.state.token)!=null&&n.address?(Gn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===is.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xt.state.token.address,amount:Xt.state.sendTokenAmount,network:((r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Xt.sendERC20Token({receiverAddress:Xt.state.receiverAddress,tokenAddress:Xt.state.token.address,sendTokenAmount:Xt.state.sendTokenAmount,decimals:Xt.state.token.quantity.decimals})):(Gn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===is.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xt.state.token.symbol||"",amount:Xt.state.sendTokenAmount,network:((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Xt.sendNativeToken({receiverAddress:Xt.state.receiverAddress,sendTokenAmount:Xt.state.sendTokenAmount,decimals:Xt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;sn.loading=!0;const e=(i=G.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=G.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=G.state.activeCaipAddress,s=r?et.getPlainAddress(r):void 0;if(sn.lastRetry&&!et.isAllowedRetry(sn.lastRetry,30*Ds.ONE_SEC_MS))return sn.loading=!1,[];try{if(s&&e&&n){const a=await ZO.getMyTokensWithBalance();return sn.tokenBalances=a,sn.lastRetry=void 0,a}}catch(a){sn.lastRetry=Date.now(),t==null||t(a),mu.showError("Token Balance Unavailable")}finally{sn.loading=!1}return[]},fetchNetworkBalance(){if(sn.tokenBalances.length===0)return;const t=bOe.mapBalancesToSwapTokens(sn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===lH());e&&(sn.networkBalanceInUSD=e?Wke.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;pt.pushTransactionStack({});const e=t.receiverAddress,n=Jt.state.address,r=Ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ve.sendTransaction({chainNamespace:le.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Gn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:dc("eip155")===is.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Xt.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Ve._getClient())==null||a.updateBalance("eip155"),Xt.resetSend()},async sendERC20Token(t){pt.pushTransactionStack({onSuccess(){pt.replace("Account")}});const e=Ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Jt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=et.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ve.writeContract({fromAddress:Jt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Vke.getERC20Abi(n),chainNamespace:le.CHAIN.EVM}),Xt.resetSend()}},async sendSolanaToken(){var t;if(!Xt.state.sendTokenAmount||!Xt.state.receiverAddress)throw new Error("An amount and receiver address are required");pt.pushTransactionStack({onSuccess(){pt.replace("Account")}}),await Ve.sendTransaction({chainNamespace:"solana",to:Xt.state.receiverAddress,value:Xt.state.sendTokenAmount}),(t=Ve._getClient())==null||t.updateBalance("solana"),Xt.resetSend()},resetSend(){sn.token=void 0,sn.sendTokenAmount=void 0,sn.receiverAddress=void 0,sn.receiverProfileImageUrl=void 0,sn.receiverProfileName=void 0,sn.loading=!1,sn.tokenBalances=[]}},Xt=Mo(_Oe),ex={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},e_={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Se=jn({chains:Fke(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),EOe={state:Se,subscribe(t){return _i(Se,()=>{t(Se)})},subscribeKey(t,e){return Ws(Se,t,e)},subscribeChainProp(t,e,n){let r;return _i(Se.chains,()=>{var i;const s=n||Se.activeChain;if(s){const o=(i=Se.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Fe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=gt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Se.noAdapters=!0),Se.noAdapters||(Se.activeChain=a==null?void 0:a.namespace,Se.activeCaipNetwork=i,G.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Se.activeChain&&Bp.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=Fe.getPreferredAccountTypes()||{},f={...gt.state.defaultAccountTypes,...h};G.state.chains.set(u,{namespace:u,networkState:jn({...e_,caipNetwork:d==null?void 0:d[0]}),accountState:jn({...ex,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),G.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Se.activeChain===t){const r=Array.from(Se.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&G.setActiveCaipNetwork(s)}}Se.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Se.chains.set(t.namespace,{namespace:t.namespace,networkState:{...e_,caipNetwork:r[0]},accountState:ex,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),G.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Se.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Se.chains.set(t.chainNamespace,{...e,caipNetworks:r}),G.setRequestedCaipNetworks(r,t.chainNamespace),Ke.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Se.chains.get(t);if(n){const o=((r=Se.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&G.setActiveCaipNetwork(n.caipNetworks[0]),Se.chains.set(t,{...n,caipNetworks:a}),G.setRequestedCaipNetworks(a||[],t),a.length===0&&Ke.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Se.chains.get(t);n&&(n.networkState={...n.networkState||e_,...e},Se.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Se.chains.get(t);if(r){const s={...r.accountState||ex,...e};Se.chains.set(t,{...r,accountState:s}),(Se.chains.size===1||Se.activeChain===t)&&(e.caipAddress&&(Se.activeCaipAddress=e.caipAddress),Jt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Se.chains.get(t);if(n){const r={...n.networkState||e_,...e};Se.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){G.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Se.activeChain=t;const e=t?Se.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Se.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Se.activeCaipNetwork=n,G.setChainNetworkData(t,{caipNetwork:n}),Fe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Bp.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Se.activeChain!==t.chainNamespace&&G.setIsSwitchingNamespace(!0);const e=Se.chains.get(t.chainNamespace);Se.activeChain=t.chainNamespace,Se.activeCaipNetwork=t,G.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Se.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Se.activeCaipAddress=void 0,G.setAccountProp("caipAddress",Se.activeCaipAddress,t.chainNamespace),e&&Jt.replaceState(e.accountState),Xt.resetSend(),Bp.set({activeChain:Se.activeChain,selectedNetworkId:(i=Se.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Fe.setActiveCaipNetworkId(t.caipNetworkId),!G.checkIfSupportedNetwork(t.chainNamespace)&&gt.state.enableNetworkSwitch&&!gt.state.allowUnsupportedChain&&!Ve.state.wcBasic&&G.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Se.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==G.state.activeChain,n=(s=G.getNetworkData(t))==null?void 0:s.caipNetwork,r=G.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await G.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=G.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=G.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Se.activeCaipNetwork)==null?void 0:a.id)})),s=G.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Pn.close()}catch{pt.goBack()}Gn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Se.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Se.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Se.activeChain;if(e&&(n=e),!n)return;const r=(s=Se.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Se.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Se.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return et.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=G.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){G.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=G.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ke.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=G.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Se.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Se.activeCaipNetwork},getActiveCaipAddress(){return Se.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Se.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=G.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());G.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Se.activeCaipNetwork,r=G.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Se.activeChain)return!0;const e=G.getRequestedCaipNetworks(Se.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){G.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=nC.caipNetworkIdToNumber((r=Se.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Se.activeChain;if(!e||!t)return!1;const n=G.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Pn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Se.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Ds.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){G.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=G.getAccountProp("preferredAccountType",e);Se.activeCaipAddress=void 0,G.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ke.removeConnectorId(e)},setIsSwitchingNamespace(t){Se.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Se.chains.forEach(s=>{le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Se.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=G.state.chains.get(t))==null?void 0:e.accountState:Jt.state},getNetworkData(t){var n;const e=t||Se.activeChain;if(e)return(n=G.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=G.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ke.state.filterByNamespace;return(t?[Se.chains.get(t)]:Array.from(Se.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?G.getRequestedCaipNetworks(t):G.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Se.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Se.lastConnectedSIWECaipNetwork}},G=Mo(EOe),COe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},dH=et.getBlockchainApiUrl(),Zs=jn({clientId:null,api:new Pv({baseUrl:dH,clientId:null}),supportedChains:{http:[],ws:[]}}),ut={state:Zs,async get(t){const{st:e,sv:n}=ut.getSdkProperties(),r=gt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Zs.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=gt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Zs.supportedChains.http.length||await ut.getSupportedNetworks()}catch{return!1}return Zs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await ut.get({path:"v1/supported-chains"});return Zs.supportedChains=t,t}catch{return Zs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ut.isNetworkSupported(e))return{avatar:"",name:""};const r=Fe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await ut.get({path:`/v1/identity/${t}`,params:{sender:G.state.activeCaipAddress?et.getPlainAddress(G.state.activeCaipAddress):void 0}});return Fe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await ut.isNetworkSupported((a=G.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?ut.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await ut.isNetworkSupported((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?ut.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await ut.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ut.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await ut.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Zs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:gt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await ut.isNetworkSupported((r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ut.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=ut.getSdkProperties();if(!await ut.isNetworkSupported((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return ut.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await ut.isNetworkSupported((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Zs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ds.CONVERT_SLIPPAGE_TOLERANCE},projectId:gt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=ut.getSdkProperties();if(!await ut.isNetworkSupported((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ut.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=ut.getSdkProperties();if(!await ut.isNetworkSupported((l=G.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return mu.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Fe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await ut.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Fe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await ut.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ut.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await ut.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ut.get({path:`/v1/profile/reverse/${t}`,params:{sender:Jt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await ut.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ut.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await ut.isNetworkSupported((i=G.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Zs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await ut.isNetworkSupported((a=G.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Zs.api.post({path:"/v1/generators/onrampurl",params:{projectId:gt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await ut.isNetworkSupported((e=G.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ut.get({path:"/v1/onramp/options"})}catch{return COe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await ut.isNetworkSupported((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Zs.api.post({path:"/v1/onramp/quote",params:{projectId:gt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await ut.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ut.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await ut.isNetworkSupported((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Zs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:gt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Zs.clientId=t,Zs.api=new Pv({baseUrl:dH,clientId:t})}},tx={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Kh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},ZO={async getMyTokensWithBalance(t){const e=Jt.state.address,n=G.state.activeCaipNetwork,r=Ke.getConnectorId("eip155")===le.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Fe.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===le.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await ut.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=tx.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Ve.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Ve.walletGetAssets({account:t,chainFilter:[s]});if(!tx.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>tx.createBalance(l,e.caipNetworkId));return Fe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Oa=jn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),SOe={state:Oa,replaceState(t){t&&Object.assign(Oa,Og(t))},subscribe(t){return G.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return G.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){G.setAccountProp("status",t,e)},getCaipAddress(t){return G.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?et.getPlainAddress(t):void 0;e===G.state.activeChain&&(G.state.activeCaipAddress=t),G.setAccountProp("caipAddress",t,e),G.setAccountProp("address",n,e)},setBalance(t,e,n){G.setAccountProp("balance",t,n),G.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){G.setAccountProp("profileName",t,e)},setProfileImage(t,e){G.setAccountProp("profileImage",t,e)},setUser(t,e){G.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){G.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){G.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){G.setAccountProp("currentTab",t,G.state.activeChain)},setTokenBalance(t,e){t&&G.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){G.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=G.getAccountProp("addressLabels",n)||new Map;r.set(t,e),G.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=G.getAccountProp("addressLabels",e)||new Map;n.delete(t),G.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){G.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){G.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&G.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){G.setAccountProp("socialWindow",t?Og(t):void 0,e)},setFarcasterUrl(t,e){G.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Oa.balanceLoading=!0;const e=(i=G.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=G.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=G.state.activeCaipAddress,s=r?et.getPlainAddress(r):void 0;if(Oa.lastRetry&&!et.isAllowedRetry(Oa.lastRetry,30*Ds.ONE_SEC_MS))return Oa.balanceLoading=!1,[];try{if(s&&e&&n){const a=await ZO.getMyTokensWithBalance();return Jt.setTokenBalance(a,n),Oa.lastRetry=void 0,Oa.balanceLoading=!1,a}}catch(a){Oa.lastRetry=Date.now(),t==null||t(a),mu.showError("Token Balance Unavailable")}finally{Oa.balanceLoading=!1}return[]},resetAccount(t){G.resetAccount(t)}},Jt=Mo(SOe),AOe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=G.state.activeCaipNetwork,r=pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Jt.getCaipAddress(G.state.activeChain),o=t.chainNamespace!==G.state.activeChain,a=Jt.getCaipAddress(t.chainNamespace),l=Ke.getConnectorId(G.state.activeChain)===le.CONNECTOR_ID.AUTH,u=le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):pt.push("SwitchNetwork",{...r,network:t})}},Xs=jn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),IOe={state:Xs,subscribe(t){return _i(Xs,()=>t(Xs))},subscribeKey(t,e){return Ws(Xs,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=G.state.activeChain,r=e&&e!==n,s=(i=G.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Ve.state.wcBasic?at.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await at.prefetch(),Ke.setFilterByNamespace(t==null?void 0:t.namespace),Pn.setLoading(!0,e),e&&r){const a=((o=G.getNetworkData(e))==null?void 0:o.caipNetwork)||G.getRequestedCaipNetworks(e)[0];a&&AOe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=G.state.noAdapters;gt.state.manualWCControl||a&&!s?et.isMobile()?pt.reset("AllWallets"):pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?pt.reset(t.view,t.data):s?pt.reset("Account"):pt.reset("Connect")}Xs.open=!0,Bp.set({open:!0}),Gn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=gt.state.enableEmbedded,e=!!G.state.activeCaipAddress;Xs.open&&Gn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Xs.open=!1,pt.reset("Connect"),Pn.clearLoading(),t?e?pt.replace("Account"):pt.push("Connect"):Bp.set({open:!1}),Ve.resetUri()},setLoading(t,e){e&&Xs.loadingNamespaceMap.set(e,t),Xs.loading=t,Bp.set({loading:t})},clearLoading(){Xs.loadingNamespaceMap.clear(),Xs.loading=!1},shake(){Xs.shake||(Xs.shake=!0,setTimeout(()=>{Xs.shake=!1},500))}},Pn=Mo(IOe),LU=2147483648,xOe={convertEVMChainIdToCoinType(t){if(t>=LU)throw new Error("Invalid chainId");return(LU|t)>>>0}},co=jn({suggestions:[],loading:!1}),TOe={state:co,subscribe(t){return _i(co,()=>t(co))},subscribeKey(t,e){return Ws(co,t,e)},async resolveName(t){var e,n;try{return await ut.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await ut.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{co.loading=!0,co.suggestions=[];const e=await ut.getEnsNameSuggestions(t);return co.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],co.suggestions}catch(e){const n=H_.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{co.loading=!1}},async getNamesForAddress(t){try{if(!G.state.activeCaipNetwork)return[];const n=Fe.getEnsFromCacheForAddress(t);if(n)return n;const r=await ut.reverseLookupEnsName({address:t});return Fe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=H_.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=G.state.activeCaipNetwork,n=Jt.state.address,r=Ke.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");co.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});pt.pushTransactionStack({onCancel(){pt.replace("RegisterAccountName")}});const i=await Ve.signMessage(s);co.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=xOe.convertEVMChainIdToCoinType(Number(o));await ut.registerEnsName({coinType:a,address:n,signature:i,message:s}),Jt.setProfileName(t,e.chainNamespace),pt.replace("RegisterAccountNameSuccess")}catch(s){const i=H_.parseEnsApiError(s,`Error registering name ${t}`);throw pt.replace("RegisterAccountName"),new Error(i)}finally{co.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},H_=Mo(TOe);let vd=null;const ql={getSIWX(){return gt.state.siwx},async initializeIfEnabled(){var i;const t=gt.state.siwx,e=G.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(G.checkIfSupportedNetwork(n))try{if(vd&&await vd,(await t.getSessions(`${n}:${r}`,s)).length)return;await Pn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Gn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Ve._getClient())==null?void 0:i.disconnect().catch(console.error)),pt.reset("Connect"),mu.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=gt.state.siwx,e=et.getPlainAddress(G.getActiveCaipAddress()),n=G.getActiveCaipNetwork(),r=Ve._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ke.getConnectorId(n.chainNamespace)===le.CONNECTOR_ID.AUTH&&pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),G.setLastConnectedSIWECaipNetwork(n),Pn.close(),Gn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Pn.state.open||pt.state.view==="ApproveTransaction")&&await Pn.open({view:"SIWXSignMessage"}),mu.showError("Error signing message"),Gn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=G.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,et.getPlainAddress(G.getActiveCaipAddress())||""));s&&s.length>0?await G.switchActiveNetwork(r):await Ve.disconnect()}else await Ve.disconnect()}else Pn.close();Pn.close(),Gn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=G.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,et.getPlainAddress(G.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=gt.state.siwx,e=et.getPlainAddress(G.getActiveCaipAddress()),n=G.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=pt.state.view==="ApproveTransaction",r=pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=ql.getSIWX();if(!i||!s.includes(le.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=G.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await ql.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(vd)return vd;const r=ql.getSIWX();return r?(vd=r.addSession({data:t,message:e,signature:n}).finally(()=>{vd=null}),vd):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=ql.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=G.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(mu.showLoading("Authenticating...",{autoClose:!1}),Jt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Gn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:ql.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Gn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:ql.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{mu.hide()}}return!0},getSIWXEventProperties(){var e;const t=G.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=G.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:dc(t)===is.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Oi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:le.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Ui={ConnectorExplorerIds:{[le.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[le.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[le.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[le.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[le.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Oi.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Oi.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Oi.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Oi.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Oi.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Oi.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Oi.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Oi.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Oi.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Oi.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Oi.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[le.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[le.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[le.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[le.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[le.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[le.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[le.CONNECTOR_ID.INJECTED]:"Browser Wallet",[le.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[le.CONNECTOR_ID.COINBASE]:"Coinbase",[le.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[le.CONNECTOR_ID.LEDGER]:"Ledger",[le.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[le.CONNECTOR_ID.INJECTED]:"INJECTED",[le.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[le.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[le.CONNECTOR_ID.AUTH]:"AUTH",[Oi.CONNECTOR_TYPE_AUTH]:"AUTH"}},di={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Oi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=G.state.activeChain;return le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ke.getConnectorId(e)===le.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},NOe=new AbortController,Ol={EmbeddedWalletAbortController:NOe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},ROe="rpc.walletconnect.org";function UU(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const nx=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ty={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===ROe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:le.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${le.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return nx.includes(e)?UU(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ui.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ty.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(uu(a.url,a.config))}),nx.includes(t.caipNetworkId)&&r.push(uu(UU(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(uu(a))}),TE(r)},extendWagmiTransports(t,e,n){if(nx.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return TE([n,uu(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:le.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Fe.getActiveCaipNetworkId(),n=G.getAllRequestedCaipNetworks(),r=Array.from(((c=G.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},jU={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Xr={set(t,e){Ha.isClient&&localStorage.setItem(`${Be.STORAGE_KEY}${t}`,e)},get(t){return Ha.isClient?localStorage.getItem(`${Be.STORAGE_KEY}${t}`):null},delete(t,e){Ha.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Be.STORAGE_KEY}${t}`))}},t_=30*1e3,Ha={checkIfAllowedToTriggerEmail(){const t=Xr.get(Be.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<t_){const n=Math.ceil((t_-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Xr.get(Be.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<t_)return Math.ceil((t_-e)/1e3)}return 0},checkIfRequestExists(t){return is.NOT_SAFE_RPC_METHODS.includes(t.method)||is.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(jU.transactionHash))||(t==null?void 0:t.match(jU.signedMessage)))?Be.RPC_RESPONSE_TYPE_TX:Be.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return is.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Xn=_.object({message:_.string()});function Te(t){return _.literal(Be[t])}const eS=_.object({serializedMessage:_.string().optional(),accountAddress:_.string(),chainId:_.string(),notBefore:_.string().optional(),domain:_.string(),uri:_.string(),version:_.string(),nonce:_.string(),statement:_.string().optional(),resources:_.array(_.string()).optional(),requestId:_.string().optional(),issuedAt:_.string().optional(),expirationTime:_.string().optional()});_.object({accessList:_.array(_.string()),blockHash:_.string().nullable(),blockNumber:_.string().nullable(),chainId:_.string().or(_.number()),from:_.string(),gas:_.string(),hash:_.string(),input:_.string().nullable(),maxFeePerGas:_.string(),maxPriorityFeePerGas:_.string(),nonce:_.string(),r:_.string(),s:_.string(),to:_.string(),transactionIndex:_.string().nullable(),type:_.string(),v:_.string(),value:_.string()});const POe=_.object({chainId:_.string().or(_.number()),rpcUrl:_.optional(_.string())}),kOe=_.object({email:_.string().email()}),OOe=_.object({otp:_.string()}),DOe=_.object({uri:_.string(),preferredAccountType:_.optional(_.string()),chainId:_.optional(_.string().or(_.number())),siwxMessage:_.optional(eS),rpcUrl:_.optional(_.string())}),$Oe=_.object({chainId:_.optional(_.string().or(_.number())),preferredAccountType:_.optional(_.string()),socialUri:_.optional(_.string()),siwxMessage:_.optional(eS),rpcUrl:_.optional(_.string())}),MOe=_.object({provider:_.enum(["google","github","apple","facebook","x","discord"])}),LOe=_.object({email:_.string().email()}),UOe=_.object({otp:_.string()}),jOe=_.object({otp:_.string()}),BOe=_.object({themeMode:_.optional(_.enum(["light","dark"])),themeVariables:_.optional(_.record(_.string(),_.string().or(_.number()))),w3mThemeVariables:_.optional(_.record(_.string(),_.string()))}),FOe=_.object({metadata:_.object({name:_.string(),description:_.string(),url:_.string(),icons:_.array(_.string())}).optional(),sdkVersion:_.string().optional(),sdkType:_.string().optional(),projectId:_.string()}),WOe=_.object({type:_.string()}),zOe=_.object({action:_.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),qOe=_.object({url:_.string()}),HOe=_.object({userName:_.string()}),VOe=_.object({email:_.string().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),accounts:_.array(_.object({address:_.string(),type:_.enum([is.ACCOUNT_TYPES.EOA,is.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:_.string().optional().nullable(),preferredAccountType:_.optional(_.string()),signature:_.string().optional(),message:_.string().optional(),siwxMessage:_.optional(eS)}),GOe=_.object({action:_.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),KOe=_.object({email:_.string().email().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),smartAccountDeployed:_.optional(_.boolean()),accounts:_.array(_.object({address:_.string(),type:_.enum([is.ACCOUNT_TYPES.EOA,is.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:_.optional(_.string()),signature:_.string().optional(),message:_.string().optional(),siwxMessage:_.optional(eS)}),YOe=_.object({uri:_.string()}),QOe=_.object({isConnected:_.boolean()}),JOe=_.object({chainId:_.string().or(_.number())}),ZOe=_.object({chainId:_.string().or(_.number())}),XOe=_.object({newEmail:_.string().email()}),e2e=_.object({smartAccountEnabledNetworks:_.array(_.number())});_.object({address:_.string(),isDeployed:_.boolean()});const t2e=_.object({version:_.string().optional()}),n2e=_.object({type:_.string(),address:_.string()}),r2e=_.any(),s2e=_.object({method:_.literal("eth_accounts")}),i2e=_.object({method:_.literal("eth_blockNumber")}),o2e=_.object({method:_.literal("eth_call"),params:_.array(_.any())}),a2e=_.object({method:_.literal("eth_chainId")}),c2e=_.object({method:_.literal("eth_estimateGas"),params:_.array(_.any())}),l2e=_.object({method:_.literal("eth_feeHistory"),params:_.array(_.any())}),u2e=_.object({method:_.literal("eth_gasPrice")}),d2e=_.object({method:_.literal("eth_getAccount"),params:_.array(_.any())}),h2e=_.object({method:_.literal("eth_getBalance"),params:_.array(_.any())}),f2e=_.object({method:_.literal("eth_getBlockByHash"),params:_.array(_.any())}),p2e=_.object({method:_.literal("eth_getBlockByNumber"),params:_.array(_.any())}),g2e=_.object({method:_.literal("eth_getBlockReceipts"),params:_.array(_.any())}),m2e=_.object({method:_.literal("eth_getBlockTransactionCountByHash"),params:_.array(_.any())}),y2e=_.object({method:_.literal("eth_getBlockTransactionCountByNumber"),params:_.array(_.any())}),w2e=_.object({method:_.literal("eth_getCode"),params:_.array(_.any())}),v2e=_.object({method:_.literal("eth_getFilterChanges"),params:_.array(_.any())}),b2e=_.object({method:_.literal("eth_getFilterLogs"),params:_.array(_.any())}),_2e=_.object({method:_.literal("eth_getLogs"),params:_.array(_.any())}),E2e=_.object({method:_.literal("eth_getProof"),params:_.array(_.any())}),C2e=_.object({method:_.literal("eth_getStorageAt"),params:_.array(_.any())}),S2e=_.object({method:_.literal("eth_getTransactionByBlockHashAndIndex"),params:_.array(_.any())}),A2e=_.object({method:_.literal("eth_getTransactionByBlockNumberAndIndex"),params:_.array(_.any())}),I2e=_.object({method:_.literal("eth_getTransactionByHash"),params:_.array(_.any())}),x2e=_.object({method:_.literal("eth_getTransactionCount"),params:_.array(_.any())}),T2e=_.object({method:_.literal("eth_getTransactionReceipt"),params:_.array(_.any())}),N2e=_.object({method:_.literal("eth_getUncleCountByBlockHash"),params:_.array(_.any())}),R2e=_.object({method:_.literal("eth_getUncleCountByBlockNumber"),params:_.array(_.any())}),P2e=_.object({method:_.literal("eth_maxPriorityFeePerGas")}),k2e=_.object({method:_.literal("eth_newBlockFilter")}),O2e=_.object({method:_.literal("eth_newFilter"),params:_.array(_.any())}),D2e=_.object({method:_.literal("eth_newPendingTransactionFilter")}),$2e=_.object({method:_.literal("eth_sendRawTransaction"),params:_.array(_.any())}),M2e=_.object({method:_.literal("eth_syncing"),params:_.array(_.any())}),L2e=_.object({method:_.literal("eth_uninstallFilter"),params:_.array(_.any())}),BU=_.object({method:_.literal("personal_sign"),params:_.array(_.any())}),U2e=_.object({method:_.literal("eth_signTypedData_v4"),params:_.array(_.any())}),j2e=_.object({method:_.literal("eth_sendTransaction"),params:_.array(_.any())}),B2e=_.object({method:_.literal("solana_signMessage"),params:_.object({message:_.string(),pubkey:_.string()})}),F2e=_.object({method:_.literal("solana_signTransaction"),params:_.object({transaction:_.string()})}),W2e=_.object({method:_.literal("solana_signAllTransactions"),params:_.object({transactions:_.array(_.string())})}),z2e=_.object({method:_.literal("solana_signAndSendTransaction"),params:_.object({transaction:_.string(),options:_.object({skipPreflight:_.boolean().optional(),preflightCommitment:_.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:_.number().optional(),minContextSlot:_.number().optional()}).optional()})}),q2e=_.object({method:_.literal("wallet_sendCalls"),params:_.array(_.object({chainId:_.string().or(_.number()).optional(),from:_.string().optional(),version:_.string().optional(),capabilities:_.any().optional(),calls:_.array(_.object({to:_.string().startsWith("0x"),data:_.string().startsWith("0x").optional(),value:_.string().optional()}))}))}),H2e=_.object({method:_.literal("wallet_getCallsStatus"),params:_.array(_.string())}),V2e=_.object({method:_.literal("wallet_getCapabilities"),params:_.array(_.string().or(_.number()).optional()).optional()}),G2e=_.object({method:_.literal("wallet_grantPermissions"),params:_.array(_.any())}),K2e=_.object({method:_.literal("wallet_revokePermissions"),params:_.any()}),Y2e=_.object({method:_.literal("wallet_getAssets"),params:_.any()}),FU=_.object({token:_.string()}),Ne=_.object({id:_.string().optional()}),iy={appEvent:Ne.extend({type:Te("APP_SWITCH_NETWORK"),payload:POe}).or(Ne.extend({type:Te("APP_CONNECT_EMAIL"),payload:kOe})).or(Ne.extend({type:Te("APP_CONNECT_DEVICE")})).or(Ne.extend({type:Te("APP_CONNECT_OTP"),payload:OOe})).or(Ne.extend({type:Te("APP_CONNECT_SOCIAL"),payload:DOe})).or(Ne.extend({type:Te("APP_GET_FARCASTER_URI")})).or(Ne.extend({type:Te("APP_CONNECT_FARCASTER")})).or(Ne.extend({type:Te("APP_GET_USER"),payload:_.optional($Oe)})).or(Ne.extend({type:Te("APP_GET_SOCIAL_REDIRECT_URI"),payload:MOe})).or(Ne.extend({type:Te("APP_SIGN_OUT")})).or(Ne.extend({type:Te("APP_IS_CONNECTED"),payload:_.optional(FU)})).or(Ne.extend({type:Te("APP_GET_CHAIN_ID")})).or(Ne.extend({type:Te("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ne.extend({type:Te("APP_INIT_SMART_ACCOUNT")})).or(Ne.extend({type:Te("APP_SET_PREFERRED_ACCOUNT"),payload:WOe})).or(Ne.extend({type:Te("APP_RPC_REQUEST"),payload:BU.or(Y2e).or(s2e).or(i2e).or(o2e).or(a2e).or(c2e).or(l2e).or(u2e).or(d2e).or(h2e).or(f2e).or(p2e).or(g2e).or(m2e).or(y2e).or(w2e).or(v2e).or(b2e).or(_2e).or(E2e).or(C2e).or(S2e).or(A2e).or(I2e).or(x2e).or(T2e).or(N2e).or(R2e).or(P2e).or(k2e).or(O2e).or(D2e).or($2e).or(M2e).or(L2e).or(BU).or(U2e).or(j2e).or(B2e).or(F2e).or(W2e).or(z2e).or(H2e).or(q2e).or(V2e).or(G2e).or(K2e).and(_.object({chainId:_.string().or(_.number()).optional(),chainNamespace:_.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:_.string().optional()}))})).or(Ne.extend({type:Te("APP_UPDATE_EMAIL"),payload:LOe})).or(Ne.extend({type:Te("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:UOe})).or(Ne.extend({type:Te("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:jOe})).or(Ne.extend({type:Te("APP_SYNC_THEME"),payload:BOe})).or(Ne.extend({type:Te("APP_SYNC_DAPP_DATA"),payload:FOe})).or(Ne.extend({type:Te("APP_RELOAD")})).or(Ne.extend({type:Te("APP_RPC_ABORT")})),frameEvent:Ne.extend({type:Te("FRAME_SWITCH_NETWORK_ERROR"),payload:Xn}).or(Ne.extend({type:Te("FRAME_SWITCH_NETWORK_SUCCESS"),payload:ZOe})).or(Ne.extend({type:Te("FRAME_CONNECT_EMAIL_SUCCESS"),payload:zOe})).or(Ne.extend({type:Te("FRAME_CONNECT_EMAIL_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:qOe})).or(Ne.extend({type:Te("FRAME_GET_FARCASTER_URI_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:HOe})).or(Ne.extend({type:Te("FRAME_CONNECT_FARCASTER_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_CONNECT_OTP_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_CONNECT_OTP_SUCCESS")})).or(Ne.extend({type:Te("FRAME_CONNECT_DEVICE_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ne.extend({type:Te("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:VOe})).or(Ne.extend({type:Te("FRAME_CONNECT_SOCIAL_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_GET_USER_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_GET_USER_SUCCESS"),payload:KOe})).or(Ne.extend({type:Te("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:YOe})).or(Ne.extend({type:Te("FRAME_SIGN_OUT_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_SIGN_OUT_SUCCESS")})).or(Ne.extend({type:Te("FRAME_IS_CONNECTED_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_IS_CONNECTED_SUCCESS"),payload:QOe})).or(Ne.extend({type:Te("FRAME_GET_CHAIN_ID_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_GET_CHAIN_ID_SUCCESS"),payload:JOe})).or(Ne.extend({type:Te("FRAME_RPC_REQUEST_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_RPC_REQUEST_SUCCESS"),payload:r2e})).or(Ne.extend({type:Te("FRAME_SESSION_UPDATE"),payload:FU})).or(Ne.extend({type:Te("FRAME_UPDATE_EMAIL_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_UPDATE_EMAIL_SUCCESS"),payload:GOe})).or(Ne.extend({type:Te("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ne.extend({type:Te("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:XOe})).or(Ne.extend({type:Te("FRAME_SYNC_THEME_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_SYNC_THEME_SUCCESS")})).or(Ne.extend({type:Te("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ne.extend({type:Te("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:e2e})).or(Ne.extend({type:Te("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:n2e})).or(Ne.extend({type:Te("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_READY"),payload:t2e})).or(Ne.extend({type:Te("FRAME_RELOAD_ERROR"),payload:Xn})).or(Ne.extend({type:Te("FRAME_RELOAD_SUCCESS")}))};function rx(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Q2e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=le.BLOCKCHAIN_API_RPC_URL}){const i=new URL(eOe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class J2e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=le.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!rx(Be.FRAME_EVENT_KEY,u))return;const d=iy.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Ha.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Ha.isClient&&window.addEventListener("message",({data:a})=>{if(!rx(Be.FRAME_EVENT_KEY,a))return;const c=iy.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Ha.isClient&&window.addEventListener("message",({data:a})=>{if(!rx(Be.APP_EVENT_KEY,a))return;const c=iy.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Ha.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");iy.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Ha.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");iy.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Ha.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Q2e({projectId:e,chainId:r,version:nOe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Z2e{constructor(e){var i;const n=of({level:tOe}),{logger:r,chunkLoggerController:s}=R1({opts:n});this.logger=as(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class X2e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Z2e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new J2e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Xr.get(Be.EMAIL_LOGIN_USED_KEY)}getEmail(){return Xr.get(Be.EMAIL)}getUsername(){return Xr.get(Be.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Be.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ha.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Be.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Be.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Be.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Be.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Be.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Be.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Be.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Be.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Be.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Be.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Be.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Be.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Be.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Be.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Be.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Be.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(is.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Be.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Be.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Be.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:is.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{is.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Be.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Be.APP_SYNC_DAPP_DATA,Be.APP_SYNC_THEME,Be.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Be.APP_CONNECT_EMAIL,Be.APP_CONNECT_DEVICE,Be.APP_CONNECT_OTP,Be.APP_CONNECT_SOCIAL,Be.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var v,b,E;w.id===u&&((b=y==null?void 0:(v=y.logger).info)==null||b.call(v,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((E=w.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Xr.set(Be.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Xr.set(Be.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Xr.set(Be.EMAIL,e),Xr.set(Be.EMAIL_LOGIN_USED_KEY,"true"),Xr.delete(Be.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Xr.delete(Be.EMAIL_LOGIN_USED_KEY),Xr.delete(Be.EMAIL),Xr.delete(Be.LAST_USED_CHAIN_KEY),Xr.delete(Be.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Xr.set(Be.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Xr.get(Be.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Xr.set(Be.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=gu.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Fp{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Fp.instance||(Fp.instance=new X2e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Fp.instance}}const eDe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},WU={filterOutDuplicatesByRDNS(t){const e=gt.state.enableEIP6963?Ke.state.connectors:[],n=Fe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&et.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ke.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Fe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ke.state,{featuredWalletIds:n}=gt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=gt.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ke.state.connectors;if(n)return n;const{injected:s,announced:i}=V_.getConnectorsByType(r,at.state.recommended,at.state.featured),o=s.filter(V_.showConnector),a=i.filter(V_.showConnector);return o.length||a.length?["wallet","email","social"]:eDe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&at.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&at.state.excludedWallets.some(r=>di.isLowerCaseMatch(r.name,t.name));return e||n}},V_={getConnectorsByType(t,e,n){const{customWallets:r}=gt.state,s=Fe.getRecentWallets(),i=WU.filterOutDuplicateWallets(e),o=WU.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&at.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&at.state.excludedWallets.some(i=>di.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!et.isMobile()||et.isMobile()&&!e&&!Ve.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(G.state.chains.values()).some(n=>Ke.getConnectorId(n.namespace)===le.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=gt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:gt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:v})=>v===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!et.isMobile())return{accounts:[],chainId:void 0};if(t.id===le.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};el`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;el`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;el`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const G_={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([G_.getAddresses(t),G_.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:G_.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ui.NetworkImageIds[e.id]]}]})}},Kf={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function kv(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const zU=kv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),qU=kv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});kv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});kv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});kv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const tDe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},fh={getMethodsByChainNamespace(t){return tDe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case zU.caipNetworkId:u.chains.push(zU.deprecatedCaipNetworkId);break;case qU.caipNetworkId:u.chains.push(qU.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await H_.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=fh.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(fh.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>et.isCaipAddress(d)).map(d=>gu.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>gu.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class nDe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case le.CHAIN.EVM:await this.syncEVMConnections(e);break;case le.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case le.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===le.CONNECTOR_ID.WALLET_CONNECT){const c=fh.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await V_.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==le.CONNECTOR_ID.AUTH&&a.id!==le.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===le.CONNECTOR_ID.WALLET_CONNECT){const c=fh.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===le.CONNECTOR_ID.WALLET_CONNECT){const v=fh.getWalletConnectAccounts(r,this.namespace);v.length>0&&i({connectorId:a.id,accounts:v.map(b=>({address:b.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(v=>et.createAccount(le.CHAIN.BITCOIN,v.address,v.purpose||"payment",v.publicKey,v.path));if(u&&u.length>1&&(u=[{namespace:le.CHAIN.BITCOIN,publicKey:((h=u[Kf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Kf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Kf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:le.CHAIN.BITCOIN,publicKey:((g=u[Kf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[Kf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[Kf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(v=>v.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(v=>({address:v.address,type:v.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>di.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>di.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>di.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>di.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>di.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class hH{constructor({provider:e,namespace:n}){this.id=le.CONNECTOR_ID.WALLET_CONNECT,this.name=Ui.ConnectorNamesMap[le.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ui.ConnectorImageIds[le.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=G.getCaipNetworks.bind(G),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=gt.state.universalProviderConfigOverride,s=fh.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return ql.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:rDe})}}const rDe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],sDe=[le.CONNECTOR_ID.AUTH,le.CONNECTOR_ID.WALLET_CONNECT];class iDe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>G.getCaipNetworks(n),this.getConnectorId=n=>Ke.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new nDe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:le.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:le.CONNECTOR_ID.AUTH,type:"AUTH",name:le.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ui.ConnectorImageIds[le.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!di.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Jt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=dc(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof hH);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=et.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=et.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=et.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&di.isLowerCaseMatch(this.getConnectorId(le.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=et.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),di.isLowerCaseMatch(this.getConnectorId(le.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?G_.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),di.isLowerCaseMatch(this.getConnectorId(le.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(sDe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function oDe(t){let e=[],n,r;function s(a){return nC.parseEvmChainId(a)||1}function i(){var a;return n||(n=Fp.getInstance({projectId:t.options.projectId,chainId:(a=G.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Ad.open(Ol.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Ad.open(Ol.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Ad.open(Ol.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Ol.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>G.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=nC.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=dc("eip155"),{address:d,chainId:h,accounts:f}=await ql.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:le.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:le.CONNECTOR_ID.AUTH,name:le.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:le.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Fp.getInstance({projectId:t.options.projectId,chainId:(c=G.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Ol.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Ad.open(Ol.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Ad.open(Ol.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Ad.open(Ol.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>G.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=G.state.activeChain===le.CHAIN.EVM;if(le.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ke.getConnectorId(h)===le.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new ic(new Error("chain not found on connector."));const d=await this.getProvider(),h=dc("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new ic(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Vc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}XO.type="walletConnect";function XO(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:XO.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=G.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Fl;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const v=gt.state.universalProviderConfigOverride;if(!w.session||y){const S=fh.createNamespaces(g,v);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const b=await this.getAccounts(),E=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,A=C==null?void 0:C.some(S=>Number(S.split(":")[1])===E);let I=1;A?I=E:C!=null&&C[0]&&(I=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const x=v==null?void 0:v.defaultChain;return w.setDefaultChain(x??`eip155:${I}`),{accounts:b,chainId:I}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new vr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,v;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(v=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[le.CHAIN.EVM])==null?void 0:v.accounts,f=(h==null?void 0:h.map(b=>b.split(":")[2]))??[],p=new Set;return f.filter(b=>{const E=b==null?void 0:b.toLowerCase();return p.has(E)?!1:(p.add(E),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Fe.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=Fe.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],v=y==null?void 0:y.find(b=>b.id===w);v&&v.chainNamespace===le.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(v.id)}))}return r},async getChainId(){var g,w,y,v;const d=(g=e.getCaipNetwork(le.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(v=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[le.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:v[0],p=G.getCaipNetworks().find(b=>b.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,v;const f=await this.getProvider();if(!f)throw new Fl;const p=G.getCaipNetworks().find(b=>b.id===h);if(!p)throw new ic(new Gw);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:ze(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,h]),{...p,id:p.id}}catch(b){const E=b;if(/(?:user rejected)/iu.test(E.message))throw new vr(E);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const A=((v=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:v.http)||[],I={blockExplorerUrls:C,chainId:ze(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:A};await f.request({method:"wallet_addEthereumChain",params:[I]});const x=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...x,h]),{...p,id:p.id}}catch(C){throw new vr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Vc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(G.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[le.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const oy=jn({pendingTransactions:0}),HU={state:oy,subscribeKey(t,e){return Ws(oy,t,e)},increase(t){oy[t]+=1},decrease(t){oy[t]-=1},reset(t){oy[t]=0}};function aDe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function cDe(t){if(et.isSafeApp()){const{safe:e}=await ar(async()=>{const{safe:n}=await import("./index-CBX6YDKl.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function lDe(t){try{const{coinbaseWallet:e}=await ar(async()=>{const{coinbaseWallet:n}=await import("./index-CBX6YDKl.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const uDe={enable:!1,pollingInterval:3e4};class dDe extends iDe{constructor(e){const n=Ty.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=le.CHAIN.EVM,this.adapterType=le.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...uDe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===le.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>et.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=$p(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>et.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=$p(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===le.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ty.getCaipNetworkId(s);i?n[s.id]=Ty.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ty.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Dre({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=pre(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),HU.increase("pendingTransactions")}});const e=HU.subscribeKey("pendingTransactions",n=>{var r;n>=le.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){u9(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),d9(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===le.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:Fe.getConnectedSocialProvider(),username:Fe.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await lDe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await cDe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(XO(e,n)),e.enableEIP6963!==!1&&r.push(i1({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(oDe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Ui.ConnectorNamesMap[r.id]??r.name,imageId:Ui.ConnectorImageIds[r.id],type:Ui.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===le.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await dre(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=$p(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await lre(this.wagmiConfig,s);const i=await ure(this.wagmiConfig,s);return await f9(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(nC.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await p9(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await nre(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return $te(e.value,e.decimals)}formatUnits(e){return Kh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===le.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===le.CONNECTOR_ID.AUTH||e.id===le.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Ui.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Ui.ConnectorNamesMap[e.id]??e.name,imageId:Ui.ConnectorImageIds[e.id],type:Ui.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===le.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){h9(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Yo(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(et.isSafeApp()&&n===le.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await I_(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await I_(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await X$(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===le.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((v,b)=>di.isLowerCaseMatch(v,r)?-1:di.isLowerCaseMatch(b,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(v=>({...v,connections:new Map(v.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await I_(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await JT(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Fe.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await ire(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Fe.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Yo(this.wagmiConfig).find(i=>di.isLowerCaseMatch(i.connector.id,e.id));return await YT(this.wagmiConfig,{connector:n}),gt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Yo(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await YT(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await X$(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Yo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=aDe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Yo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Yo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Yo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:le.CONNECTOR_ID.AUTH,type:"AUTH",name:le.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ui.ConnectorImageIds[le.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Yo(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(G.state.activeChain==="eip155")return;JT(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new hH({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const fH={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},pH="7c65f27254d6ddd24cf7eedf2685c4fb",hDe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},gH=new dDe({networks:[Vq,fH],projectId:pH,ssr:!1});uPe({adapters:[gH],networks:[Vq,fH],projectId:pH,metadata:hDe,features:{analytics:!1}});var VU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be=function(t,e){if(!t)throw dm(e)},dm=function(t){return new Error("Firebase Database ("+mH.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fDe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},e2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yH(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fDe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new pDe;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pDe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wH=function(t){const e=yH(t);return e2.encodeByteArray(e,!0)},sC=function(t){return wH(t).replace(/\./g,"")},WR=function(t){try{return e2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gDe(t){return vH(void 0,t)}function vH(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!mDe(n)||(t[n]=vH(t[n],e[n]));return t}function mDe(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yDe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wDe=()=>yDe().__FIREBASE_DEFAULTS__,vDe=()=>{if(typeof process>"u"||typeof VU>"u")return;const t=VU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bDe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WR(t[1]);return e&&JSON.parse(e)},bH=()=>{try{return wDe()||vDe()||bDe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_De=t=>{var e,n;return(n=(e=bH())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EDe=t=>{const e=_De(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_H=()=>{var t;return(t=bH())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tS=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CDe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sC(JSON.stringify(n)),sC(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SDe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(SDe())}function ADe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IDe(){return mH.NODE_ADMIN===!0}function xDe(){try{return typeof indexedDB=="object"}catch{return!1}}function TDe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NDe="FirebaseError";class Ov extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NDe,Object.setPrototypeOf(this,Ov.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CH.prototype.create)}}class CH{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?RDe(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ov(s,a,r)}}function RDe(t,e){return t.replace(PDe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PDe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){return JSON.parse(t)}function Cr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=N0(WR(i[0])||""),n=N0(WR(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},kDe=function(t){const e=SH(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ODe=function(t){const e=SH(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mg(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function GU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iC(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function zR(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(KU(i)&&KU(o)){if(!zR(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function KU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DDe(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $De{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function t2(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MDe=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,be(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nS=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t){return t&&t._delegate?t._delegate:t}class R0{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LDe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jDe(e))try{this.getOrInitializeService({instanceIdentifier:xd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xd){return this.instances.has(e)}getOptions(e=xd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UDe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xd){return this.component?this.component.multipleInstances?e:xd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UDe(t){return t===xd?void 0:t}function jDe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BDe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LDe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rn||(Rn={}));const FDe={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},WDe=Rn.INFO,zDe={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},qDe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zDe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AH{constructor(e){this.name=e,this._logLevel=WDe,this._logHandler=qDe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FDe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}}const HDe=(t,e)=>e.some(n=>t instanceof n);let YU,QU;function VDe(){return YU||(YU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GDe(){return QU||(QU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IH=new WeakMap,qR=new WeakMap,xH=new WeakMap,sx=new WeakMap,n2=new WeakMap;function KDe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mu(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IH.set(n,t)}).catch(()=>{}),n2.set(e,t),e}function YDe(t){if(qR.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});qR.set(t,e)}let HR={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qR.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xH.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QDe(t){HR=t(HR)}function JDe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ix(this),e,...n);return xH.set(r,e.sort?e.sort():[e]),Mu(r)}:GDe().includes(t)?function(...e){return t.apply(ix(this),e),Mu(IH.get(this))}:function(...e){return Mu(t.apply(ix(this),e))}}function ZDe(t){return typeof t=="function"?JDe(t):(t instanceof IDBTransaction&&YDe(t),HDe(t,VDe())?new Proxy(t,HR):t)}function Mu(t){if(t instanceof IDBRequest)return KDe(t);if(sx.has(t))return sx.get(t);const e=ZDe(t);return e!==t&&(sx.set(t,e),n2.set(e,t)),e}const ix=t=>n2.get(t);function XDe(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Mu(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Mu(o.result),c.oldVersion,c.newVersion,Mu(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const e$e=["get","getKey","getAll","getAllKeys","count"],t$e=["put","add","delete","clear"],ox=new Map;function JU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ox.get(e))return ox.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=t$e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||e$e.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return ox.set(e,i),i}QDe(t=>({...t,get:(e,n,r)=>JU(e,n)||t.get(e,n,r),has:(e,n)=>!!JU(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n$e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r$e(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r$e(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const VR="@firebase/app",ZU="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new AH("@firebase/app"),s$e="@firebase/app-compat",i$e="@firebase/analytics-compat",o$e="@firebase/analytics",a$e="@firebase/app-check-compat",c$e="@firebase/app-check",l$e="@firebase/auth",u$e="@firebase/auth-compat",d$e="@firebase/database",h$e="@firebase/data-connect",f$e="@firebase/database-compat",p$e="@firebase/functions",g$e="@firebase/functions-compat",m$e="@firebase/installations",y$e="@firebase/installations-compat",w$e="@firebase/messaging",v$e="@firebase/messaging-compat",b$e="@firebase/performance",_$e="@firebase/performance-compat",E$e="@firebase/remote-config",C$e="@firebase/remote-config-compat",S$e="@firebase/storage",A$e="@firebase/storage-compat",I$e="@firebase/firestore",x$e="@firebase/vertexai-preview",T$e="@firebase/firestore-compat",N$e="firebase",R$e="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="[DEFAULT]",P$e={[VR]:"fire-core",[s$e]:"fire-core-compat",[o$e]:"fire-analytics",[i$e]:"fire-analytics-compat",[c$e]:"fire-app-check",[a$e]:"fire-app-check-compat",[l$e]:"fire-auth",[u$e]:"fire-auth-compat",[d$e]:"fire-rtdb",[h$e]:"fire-data-connect",[f$e]:"fire-rtdb-compat",[p$e]:"fire-fn",[g$e]:"fire-fn-compat",[m$e]:"fire-iid",[y$e]:"fire-iid-compat",[w$e]:"fire-fcm",[v$e]:"fire-fcm-compat",[b$e]:"fire-perf",[_$e]:"fire-perf-compat",[E$e]:"fire-rc",[C$e]:"fire-rc-compat",[S$e]:"fire-gcs",[A$e]:"fire-gcs-compat",[I$e]:"fire-fst",[T$e]:"fire-fst-compat",[x$e]:"fire-vertex","fire-js":"fire-js",[N$e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map,k$e=new Map,KR=new Map;function XU(t,e){try{t.container.addComponent(e)}catch(n){dl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oC(t){const e=t.name;if(KR.has(e))return dl.debug(`There were multiple attempts to register component ${e}.`),!1;KR.set(e,t);for(const n of P0.values())XU(n,t);for(const n of k$e.values())XU(n,t);return!0}function O$e(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lu=new CH("app","Firebase",D$e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $$e{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new R0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$e=R$e;function TH(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:GR,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lu.create("bad-app-name",{appName:String(s)});if(n||(n=_H()),!n)throw Lu.create("no-options");const i=P0.get(s);if(i){if(zR(n,i.options)&&zR(r,i.config))return i;throw Lu.create("duplicate-app",{appName:s})}const o=new BDe(s);for(const c of KR.values())o.addComponent(c);const a=new $$e(n,r,o);return P0.set(s,a),a}function r2(t=GR){const e=P0.get(t);if(!e&&t===GR&&_H())return TH();if(!e)throw Lu.create("no-app",{appName:t});return e}function aC(){return Array.from(P0.values())}function Wp(t,e,n){var r;let s=(r=P$e[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dl.warn(a.join(" "));return}oC(new R0(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$e="firebase-heartbeat-database",U$e=1,k0="firebase-heartbeat-store";let ax=null;function NH(){return ax||(ax=XDe(L$e,U$e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(k0)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lu.create("idb-open",{originalErrorMessage:t.message})})),ax}async function j$e(t){try{const n=(await NH()).transaction(k0),r=await n.objectStore(k0).get(RH(t));return await n.done,r}catch(e){if(e instanceof Ov)dl.warn(e.message);else{const n=Lu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dl.warn(n.message)}}}async function ej(t,e){try{const r=(await NH()).transaction(k0,"readwrite");await r.objectStore(k0).put(e,RH(t)),await r.done}catch(n){if(n instanceof Ov)dl.warn(n.message);else{const r=Lu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dl.warn(r.message)}}}function RH(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$e=1024,F$e=30*24*60*60*1e3;class W$e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q$e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tj();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=F$e}),this._storage.overwrite(this._heartbeatsCache))}catch(r){dl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tj(),{heartbeatsToSend:r,unsentEntries:s}=z$e(this._heartbeatsCache.heartbeats),i=sC(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return dl.warn(n),""}}}function tj(){return new Date().toISOString().substring(0,10)}function z$e(t,e=B$e){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),nj(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),nj(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q$e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xDe()?TDe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await j$e(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ej(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ej(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nj(t){return sC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$e(t){oC(new R0("platform-logger",e=>new n$e(e),"PRIVATE")),oC(new R0("heartbeat",e=>new W$e(e),"PRIVATE")),Wp(VR,ZU,t),Wp(VR,ZU,"esm2017"),Wp("fire-js","")}H$e("");var V$e="firebase",G$e="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wp(V$e,G$e,"app");var rj={};const sj="@firebase/database",ij="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PH="";function K$e(t){PH=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y$e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Cr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:N0(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ml(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y$e(e)}}catch{}return new Q$e},Kd=kH("localStorage"),J$e=kH("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=new AH("@firebase/database"),Z$e=function(){let t=1;return function(){return t++}}(),OH=function(t){const e=MDe(t),n=new $De;n.update(e);const r=n.digest();return e2.encodeByteArray(r)},Dv=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Dv.apply(null,r):typeof r=="object"?e+=Cr(r):e+=r,e+=" "}return e};let nw=null,oj=!0;const X$e=function(t,e){be(!0,"Can't turn on custom loggers persistently."),zp.logLevel=Rn.VERBOSE,nw=zp.log.bind(zp)},vs=function(...t){if(oj===!0&&(oj=!1,nw===null&&J$e.get("logging_enabled")===!0&&X$e()),nw){const e=Dv.apply(null,t);nw(e)}},$v=function(t){return function(...e){vs(t,...e)}},YR=function(...t){const e="FIREBASE INTERNAL ERROR: "+Dv(...t);zp.error(e)},hl=function(...t){const e=`FIREBASE FATAL ERROR: ${Dv(...t)}`;throw zp.error(e),new Error(e)},bi=function(...t){const e="FIREBASE WARNING: "+Dv(...t);zp.warn(e)},e3e=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},DH=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},t3e=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Lg="[MIN_NAME]",Bh="[MAX_NAME]",fm=function(t,e){if(t===e)return 0;if(t===Lg||e===Bh)return-1;if(e===Lg||t===Bh)return 1;{const n=aj(t),r=aj(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},n3e=function(t,e){return t===e?0:t<e?-1:1},ay=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Cr(e))},s2=function(t){if(typeof t!="object"||t===null)return Cr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Cr(e[r]),n+=":",n+=s2(t[e[r]]);return n+="}",n},$H=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Ei(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const MH=function(t){be(!DH(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},r3e=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},s3e=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function i3e(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const o3e=new RegExp("^-?(0*)\\d{1,10}$"),a3e=-2147483648,c3e=2147483647,aj=function(t){if(o3e.test(t)){const e=Number(t);if(e>=a3e&&e<=c3e)return e}return null},pm=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bi("Exception was thrown by user callback.",n),e},Math.floor(0))}},l3e=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},rw=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3e{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3e{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(vs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(e)}}class K_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}K_.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="5",LH="v",UH="s",jH="r",BH="f",FH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WH="ls",zH="p",QR="ac",qH="websocket",HH="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kd.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function h3e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function GH(t,e,n){be(typeof e=="string","typeof type must == string"),be(typeof n=="object","typeof params must == object");let r;if(e===qH)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===HH)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);h3e(t)&&(n.ns=t.namespace);const s=[];return Ei(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3e{constructor(){this.counters_={}}incrementCounter(e,n=1){ml(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return gDe(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={},lx={};function o2(t){const e=t.toString();return cx[e]||(cx[e]=new f3e),cx[e]}function p3e(t,e){const n=t.toString();return lx[n]||(lx[n]=e()),lx[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&pm(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="start",m3e="close",y3e="pLPCommand",w3e="pRTLPCB",KH="id",YH="pw",QH="ser",v3e="cb",b3e="seg",_3e="ts",E3e="d",C3e="dframe",JH=1870,ZH=30,S3e=JH-ZH,A3e=25e3,I3e=3e4;class Ip{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$v(e),this.stats_=o2(n),this.urlFn=c=>(this.appCheckToken&&(c[QR]=this.appCheckToken),GH(n,HH,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new g3e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(I3e)),t3e(()=>{if(this.isClosed_)return;this.scriptTagHolder=new a2((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cj)this.id=a,this.password=c;else if(o===m3e)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[cj]="t",r[QH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[v3e]=this.scriptTagHolder.uniqueCallbackIdentifier),r[LH]=i2,this.transportSessionId&&(r[UH]=this.transportSessionId),this.lastSessionId&&(r[WH]=this.lastSessionId),this.applicationId&&(r[zH]=this.applicationId),this.appCheckToken&&(r[QR]=this.appCheckToken),typeof location<"u"&&location.hostname&&FH.test(location.hostname)&&(r[jH]=BH);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ip.forceAllow_=!0}static forceDisallow(){Ip.forceDisallow_=!0}static isAvailable(){return Ip.forceAllow_?!0:!Ip.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!r3e()&&!s3e()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Cr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=wH(n),s=$H(r,S3e);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[C3e]="t",r[KH]=e,r[YH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Cr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class a2{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Z$e(),window[y3e+this.uniqueCallbackIdentifier]=e,window[w3e+this.uniqueCallbackIdentifier]=n,this.myIFrame=a2.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vs("frame writing exception"),a.stack&&vs(a.stack),vs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[KH]=this.myID,e[YH]=this.myPW,e[QH]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ZH+r.length<=JH;){const o=this.pendingSegs.shift();r=r+"&"+b3e+s+"="+o.seg+"&"+_3e+s+"="+o.ts+"&"+E3e+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(A3e)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3e=16384,T3e=45e3;let cC=null;typeof MozWebSocket<"u"?cC=MozWebSocket:typeof WebSocket<"u"&&(cC=WebSocket);class ia{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$v(this.connId),this.stats_=o2(n),this.connURL=ia.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[LH]=i2,typeof location<"u"&&location.hostname&&FH.test(location.hostname)&&(o[jH]=BH),n&&(o[UH]=n),r&&(o[WH]=r),s&&(o[QR]=s),i&&(o[zH]=i),GH(e,qH,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kd.set("previous_websocket_failure",!0);try{let r;IDe(),this.mySock=new cC(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ia.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&cC!==null&&!ia.forceDisallow_}static previouslyFailed(){return Kd.isInMemoryStorage||Kd.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kd.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=N0(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(be(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Cr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$H(n,x3e);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(T3e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ia.responsesRequiredToBeHealthy=2;ia.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ip,ia]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ia&&ia.isAvailable();let r=n&&!ia.previouslyFailed();if(e.webSocketOnly&&(n||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ia];else{const s=this.transports_=[];for(const i of O0.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);O0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}O0.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3e=6e4,R3e=5e3,P3e=10*1024,k3e=100*1024,ux="t",lj="d",O3e="s",uj="r",D3e="e",dj="o",hj="a",fj="n",pj="p",$3e="h";class M3e{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$v("c:"+this.id+":"),this.transportManager_=new O0(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=rw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k3e?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>P3e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ux in e){const n=e[ux];n===hj?this.upgradeIfSecondaryHealthy_():n===uj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===dj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ay("t",e),r=ay("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ay("t",e),r=ay("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ay(ux,e);if(lj in e){const r=e[lj];if(n===$3e){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===fj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===O3e?this.onConnectionShutdown_(r):n===uj?this.onReset_(r):n===D3e?YR("Server Error: "+r):n===dj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):YR("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),i2!==r&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),rw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(N3e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(R3e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pj,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.allowedEvents_=e,this.listeners_={},be(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){be(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC extends eV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!EH()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lC}getInitialEvent(e){return be(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=32,mj=768;class _n{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Gt(){return new _n("")}function xt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Yu(t){return t.pieces_.length-t.pieceNum_}function kn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new _n(t.pieces_,e)}function tV(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function L3e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function nV(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rV(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new _n(e,0)}function Sr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new _n(n,0)}function Rt(t){return t.pieceNum_>=t.pieces_.length}function $s(t,e){const n=xt(t),r=xt(e);if(n===null)return e;if(n===r)return $s(kn(t),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function c2(t,e){if(Yu(t)!==Yu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ca(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Yu(t)>Yu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class U3e{constructor(e,n){this.errorPrefix_=n,this.parts_=nV(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=nS(this.parts_[r]);sV(this)}}function j3e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=nS(e),sV(t)}function B3e(t){const e=t.parts_.pop();t.byteLength_-=nS(e),t.parts_.length>0&&(t.byteLength_-=1)}function sV(t){if(t.byteLength_>mj)throw new Error(t.errorPrefix_+"has a key path longer than "+mj+" bytes ("+t.byteLength_+").");if(t.parts_.length>gj)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gj+") or object contains a cycle "+Td(t))}function Td(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2 extends eV{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new l2}getInitialEvent(e){return be(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=1e3,F3e=60*5*1e3,yj=30*1e3,W3e=1.3,z3e=3e4,q3e="server_kill",wj=3;class tl extends XH{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=tl.nextPersistentConnectionId_++,this.log_=$v("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cy,this.maxReconnectDelay_=F3e,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");l2.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&lC.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Cr(i)),be(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new tS,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),be(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;tl.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ml(e,"w")){const r=Mg(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ODe(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=yj)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=kDe(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Cr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):YR("Unrecognized action received from server: "+Cr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){be(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cy,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>z3e&&(this.reconnectDelay_=cy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*W3e)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+tl.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){be(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?vs("getToken() completed but was canceled"):(vs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new M3e(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{bi(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(q3e)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&bi(d),c())}}}interrupt(e){vs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){vs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],GU(this.interruptReasons_)&&(this.reconnectDelay_=cy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>s2(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new _n(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){vs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wj&&(this.reconnectDelay_=yj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){vs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+PH.replace(/\./g,"-")]=1,EH()?e["framework.cordova"]=1:ADe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=lC.getInstance().currentlyOnline();return GU(this.interruptReasons_)&&e}}tl.nextPersistentConnectionId_=0;tl.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Tt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Tt(Lg,e),s=new Tt(Lg,n);return this.compare(r,s)!==0}minPost(){return Tt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;class iV extends rS{static get __EMPTY_NODE(){return n_}static set __EMPTY_NODE(e){n_=e}compare(e,n){return fm(e.name,n.name)}isDefinedOn(e){throw dm("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Tt.MIN}maxPost(){return new Tt(Bh,n_)}makePost(e,n){return be(typeof e=="string","KeyIndex indexValue must always be a string."),new Tt(e,n_)}toString(){return".key"}}const qp=new iV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Lr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Lr.RED,this.left=s??pi.EMPTY_NODE,this.right=i??pi.EMPTY_NODE}copy(e,n,r,s,i){return new Lr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return pi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Lr.RED=!0;Lr.BLACK=!1;class H3e{copy(e,n,r,s,i){return this}insert(e,n,r){return new Lr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class pi{constructor(e,n=pi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new pi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lr.BLACK,null,null))}remove(e){return new pi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new r_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new r_(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new r_(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new r_(this.root_,null,this.comparator_,!0,e)}}pi.EMPTY_NODE=new H3e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3e(t,e){return fm(t.name,e.name)}function u2(t,e){return fm(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JR;function G3e(t){JR=t}const oV=function(t){return typeof t=="number"?"number:"+MH(t):"string:"+t},aV=function(t){if(t.isLeafNode()){const e=t.val();be(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ml(e,".sv"),"Priority must be a string or number.")}else be(t===JR||t.isEmpty(),"priority of unexpected type.");be(t===JR||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vj;class $r{constructor(e,n=$r.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,be(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aV(this.priorityNode_)}static set __childrenNodeConstructor(e){vj=e}static get __childrenNodeConstructor(){return vj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $r(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$r.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Rt(e)?this:xt(e)===".priority"?this.priorityNode_:$r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=xt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(be(r!==".priority"||Yu(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,$r.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oV(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=MH(this.value_):e+=this.value_,this.lazyHash_=OH(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$r.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $r.__childrenNodeConstructor?-1:(be(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=$r.VALUE_TYPE_ORDER.indexOf(n),i=$r.VALUE_TYPE_ORDER.indexOf(r);return be(s>=0,"Unknown leaf type: "+n),be(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$r.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cV,lV;function K3e(t){cV=t}function Y3e(t){lV=t}class Q3e extends rS{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?fm(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Tt.MIN}maxPost(){return new Tt(Bh,new $r("[PRIORITY-POST]",lV))}makePost(e,n){const r=cV(e);return new Tt(n,new $r("[PRIORITY-POST]",r))}toString(){return".priority"}}const sr=new Q3e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3e=Math.log(2);class Z3e{constructor(e){const n=i=>parseInt(Math.log(i)/J3e,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uC=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Lr(h,d.node,Lr.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Lr(h,d.node,Lr.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const v=s(w+1,y),b=t[w],E=n?n(b):b;f(new Lr(E,b.node,g,null,v))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,Lr.BLACK):(h(w,Lr.BLACK),h(w,Lr.RED))}return u},o=new Z3e(t.length),a=i(o);return new pi(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dx;const Yf={};class Kc{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return be(Yf&&sr,"ChildrenNode.ts has not been loaded"),dx=dx||new Kc({".priority":Yf},{".priority":sr}),dx}get(e){const n=Mg(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof pi?n:null}hasIndex(e){return ml(this.indexSet_,e.toString())}addIndex(e,n){be(e!==qp,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Tt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=uC(r,e.getCompare()):a=Yf;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Kc(u,l)}addToIndexes(e,n){const r=iC(this.indexes_,(s,i)=>{const o=Mg(this.indexSet_,i);if(be(o,"Missing index implementation for "+i),s===Yf)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Tt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),uC(a,o.getCompare())}else return Yf;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Tt(e.name,a))),c.insert(e,e.node)}});return new Kc(r,this.indexSet_)}removeFromIndexes(e,n){const r=iC(this.indexes_,s=>{if(s===Yf)return s;{const i=n.get(e.name);return i?s.remove(new Tt(e.name,i)):s}});return new Kc(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly;class ct{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aV(this.priorityNode_),this.children_.isEmpty()&&be(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ly||(ly=new ct(new pi(u2),null,Kc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ly}updatePriority(e){return this.children_.isEmpty()?this:new ct(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ly:n}}getChild(e){const n=xt(e);return n===null?this:this.getImmediateChild(n).getChild(kn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(be(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Tt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ly:this.priorityNode_;return new ct(s,o,i)}}updateChild(e,n){const r=xt(e);if(r===null)return n;{be(xt(e)!==".priority"||Yu(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(kn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(sr,(o,a)=>{n[o]=a.val(e),r++,i&&ct.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oV(this.getPriority().val())+":"),this.forEachChild(sr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":OH(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Tt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Tt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Tt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Tt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Tt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Mv?-1:0}withIndex(e){if(e===qp||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ct(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===qp||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(sr),s=n.getIterator(sr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===qp?null:this.indexMap_.get(e.toString())}}ct.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class X3e extends ct{constructor(){super(new pi(u2),ct.EMPTY_NODE,Kc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ct.EMPTY_NODE}isEmpty(){return!1}}const Mv=new X3e;Object.defineProperties(Tt,{MIN:{value:new Tt(Lg,ct.EMPTY_NODE)},MAX:{value:new Tt(Bh,Mv)}});iV.__EMPTY_NODE=ct.EMPTY_NODE;$r.__childrenNodeConstructor=ct;G3e(Mv);Y3e(Mv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5e=!0;function Br(t,e=null){if(t===null)return ct.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),be(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $r(n,Br(e))}if(!(t instanceof Array)&&e5e){const n=[];let r=!1;if(Ei(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Br(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Tt(o,c)))}}),n.length===0)return ct.EMPTY_NODE;const i=uC(n,V3e,o=>o.name,u2);if(r){const o=uC(n,sr.getCompare());return new ct(i,Br(e),new Kc({".priority":o},{".priority":sr}))}else return new ct(i,Br(e),Kc.Default)}else{let n=ct.EMPTY_NODE;return Ei(t,(r,s)=>{if(ml(t,r)&&r.substring(0,1)!=="."){const i=Br(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Br(e))}}K3e(Br);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5e extends rS{constructor(e){super(),this.indexPath_=e,be(!Rt(e)&&xt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?fm(e.name,n.name):i}makePost(e,n){const r=Br(e),s=ct.EMPTY_NODE.updateChild(this.indexPath_,r);return new Tt(n,s)}maxPost(){const e=ct.EMPTY_NODE.updateChild(this.indexPath_,Mv);return new Tt(Bh,e)}toString(){return nV(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5e extends rS{compare(e,n){const r=e.node.compareTo(n.node);return r===0?fm(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Tt.MIN}maxPost(){return Tt.MAX}makePost(e,n){const r=Br(e);return new Tt(n,r)}toString(){return".value"}}const r5e=new n5e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){return{type:"value",snapshotNode:t}}function Ug(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function D0(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function s5e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){be(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(D0(n,a)):be(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ug(n,r)):o.trackChildChange($0(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(sr,(s,i)=>{n.hasChild(s)||r.trackChildChange(D0(s,i))}),n.isLeafNode()||n.forEachChild(sr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange($0(s,i,o))}else r.trackChildChange(Ug(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ct.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.indexedFilter_=new d2(e.getIndex()),this.index_=e.getIndex(),this.startPost_=M0.getStartPost_(e),this.endPost_=M0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Tt(n,r))||(r=ct.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ct.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ct.EMPTY_NODE);const i=this;return n.forEachChild(sr,(o,a)=>{i.matches(new Tt(o,a))||(s=s.updateImmediateChild(o,ct.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new M0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Tt(n,r))||(r=ct.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=ct.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ct.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ct.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,ct.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;be(a.numChildren()===this.limit_,"");const c=new Tt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange($0(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(D0(n,d));const g=a.updateImmediateChild(n,ct.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Ug(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(D0(l.name,l.node)),i.trackChildChange(Ug(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,ct.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return be(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return be(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lg}hasEnd(){return this.endSet_}getIndexEndValue(){return be(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return be(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return be(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){const e=new h2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function o5e(t){return t.loadsAllData()?new d2(t.getIndex()):t.hasLimit()?new i5e(t):new M0(t)}function bj(t){const e={};if(t.isDefault())return e;let n;if(t.index_===sr?n="$priority":t.index_===r5e?n="$value":t.index_===qp?n="$key":(be(t.index_ instanceof t5e,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Cr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Cr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Cr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Cr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Cr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _j(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==sr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC extends XH{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=$v("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(be(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=dC.getListenId_(e,r),a={};this.listens_[o]=a;const c=bj(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Mg(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=dC.getListenId_(e,n);delete this.listens_[r]}get(e){const n=bj(e._queryParams),r=e._path.toString(),s=new tS;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+DDe(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=N0(a.responseText)}catch{bi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&bi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5e{constructor(){this.rootNode_=ct.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return{value:null,children:new Map}}function dV(t,e,n){if(Rt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=xt(e);t.children.has(r)||t.children.set(r,hC());const s=t.children.get(r);e=kn(e),dV(s,e,n)}}function ZR(t,e,n){t.value!==null?n(e,t.value):c5e(t,(r,s)=>{const i=new _n(e.toString()+"/"+r);ZR(s,i,n)})}function c5e(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ei(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=10*1e3,u5e=30*1e3,d5e=5*60*1e3;class h5e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new l5e(e);const r=Ej+(u5e-Ej)*Math.random();rw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ei(e,(s,i)=>{i>0&&ml(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),rw(this.reportStats_.bind(this),Math.floor(Math.random()*2*d5e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(la||(la={}));function hV(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function f2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function p2(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=la.ACK_USER_WRITE,this.source=hV()}operationForChild(e){if(Rt(this.path)){if(this.affectedTree.value!=null)return be(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new _n(e));return new fC(Gt(),n,this.revert)}}else return be(xt(this.path)===e,"operationForChild called for unrelated child."),new fC(kn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.source=e,this.path=n,this.type=la.LISTEN_COMPLETE}operationForChild(e){return Rt(this.path)?new L0(this.source,Gt()):new L0(this.source,kn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=la.OVERWRITE}operationForChild(e){return Rt(this.path)?new Fh(this.source,Gt(),this.snap.getImmediateChild(e)):new Fh(this.source,kn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=la.MERGE}operationForChild(e){if(Rt(this.path)){const n=this.children.subtree(new _n(e));return n.isEmpty()?null:n.value?new Fh(this.source,Gt(),n.value):new U0(this.source,Gt(),n)}else return be(xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new U0(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rt(e))return this.isFullyInitialized()&&!this.filtered_;const n=xt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function p5e(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(s5e(o.childName,o.snapshotNode))}),uy(t,s,"child_removed",e,r,n),uy(t,s,"child_added",e,r,n),uy(t,s,"child_moved",i,r,n),uy(t,s,"child_changed",e,r,n),uy(t,s,"value",e,r,n),s}function uy(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>m5e(t,a,c)),o.forEach(a=>{const c=g5e(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function g5e(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function m5e(t,e,n){if(e.childName==null||n.childName==null)throw dm("Should only compare child_ events.");const r=new Tt(e.childName,e.snapshotNode),s=new Tt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e){return{eventCache:t,serverCache:e}}function sw(t,e,n,r){return sS(new Qu(e,n,r),t.serverCache)}function fV(t,e,n,r){return sS(t.eventCache,new Qu(e,n,r))}function pC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Wh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hx;const y5e=()=>(hx||(hx=new pi(n3e)),hx);class Mn{constructor(e,n=y5e()){this.value=e,this.children=n}static fromObject(e){let n=new Mn(null);return Ei(e,(r,s)=>{n=n.set(new _n(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Gt(),value:this.value};if(Rt(e))return null;{const r=xt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(kn(e),n);return i!=null?{path:Sr(new _n(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Rt(e))return this;{const n=xt(e),r=this.children.get(n);return r!==null?r.subtree(kn(e)):new Mn(null)}}set(e,n){if(Rt(e))return new Mn(n,this.children);{const r=xt(e),i=(this.children.get(r)||new Mn(null)).set(kn(e),n),o=this.children.insert(r,i);return new Mn(this.value,o)}}remove(e){if(Rt(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const n=xt(e),r=this.children.get(n);if(r){const s=r.remove(kn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Mn(null):new Mn(this.value,i)}else return this}}get(e){if(Rt(e))return this.value;{const n=xt(e),r=this.children.get(n);return r?r.get(kn(e)):null}}setTree(e,n){if(Rt(e))return n;{const r=xt(e),i=(this.children.get(r)||new Mn(null)).setTree(kn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Mn(this.value,o)}}fold(e){return this.fold_(Gt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Sr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Gt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Rt(e))return null;{const i=xt(e),o=this.children.get(i);return o?o.findOnPath_(kn(e),Sr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Gt(),n)}foreachOnPath_(e,n,r){if(Rt(e))return this;{this.value&&r(n,this.value);const s=xt(e),i=this.children.get(s);return i?i.foreachOnPath_(kn(e),Sr(n,s),r):new Mn(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Sr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.writeTree_=e}static empty(){return new pa(new Mn(null))}}function iw(t,e,n){if(Rt(e))return new pa(new Mn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=$s(s,e);return i=i.updateChild(o,n),new pa(t.writeTree_.set(s,i))}else{const s=new Mn(n),i=t.writeTree_.setTree(e,s);return new pa(i)}}}function Cj(t,e,n){let r=t;return Ei(n,(s,i)=>{r=iw(r,Sr(e,s),i)}),r}function Sj(t,e){if(Rt(e))return pa.empty();{const n=t.writeTree_.setTree(e,new Mn(null));return new pa(n)}}function XR(t,e){return uf(t,e)!=null}function uf(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild($s(n.path,e)):null}function Aj(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(sr,(r,s)=>{e.push(new Tt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Tt(r,s.value))}),e}function Uu(t,e){if(Rt(e))return t;{const n=uf(t,e);return n!=null?new pa(new Mn(n)):new pa(t.writeTree_.subtree(e))}}function eP(t){return t.writeTree_.isEmpty()}function jg(t,e){return pV(Gt(),t.writeTree_,e)}function pV(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(be(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=pV(Sr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Sr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t,e){return wV(e,t)}function w5e(t,e,n,r,s){be(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=iw(t.visibleWrites,e,n)),t.lastWriteId=r}function v5e(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function b5e(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);be(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&_5e(a,r.path)?s=!1:ca(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return E5e(t),!0;if(r.snap)t.visibleWrites=Sj(t.visibleWrites,r.path);else{const a=r.children;Ei(a,c=>{t.visibleWrites=Sj(t.visibleWrites,Sr(r.path,c))})}return!0}else return!1}function _5e(t,e){if(t.snap)return ca(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ca(Sr(t.path,n),e))return!0;return!1}function E5e(t){t.visibleWrites=gV(t.allWrites,C5e,Gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function C5e(t){return t.visible}function gV(t,e,n){let r=pa.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ca(n,o)?(a=$s(n,o),r=iw(r,a,i.snap)):ca(o,n)&&(a=$s(o,n),r=iw(r,Gt(),i.snap.getChild(a)));else if(i.children){if(ca(n,o))a=$s(n,o),r=Cj(r,a,i.children);else if(ca(o,n))if(a=$s(o,n),Rt(a))r=Cj(r,Gt(),i.children);else{const c=Mg(i.children,xt(a));if(c){const l=c.getChild(kn(a));r=iw(r,Gt(),l)}}}else throw dm("WriteRecord should have .snap or .children")}}return r}function mV(t,e,n,r,s){if(!r&&!s){const i=uf(t.visibleWrites,e);if(i!=null)return i;{const o=Uu(t.visibleWrites,e);if(eP(o))return n;if(n==null&&!XR(o,Gt()))return null;{const a=n||ct.EMPTY_NODE;return jg(o,a)}}}else{const i=Uu(t.visibleWrites,e);if(!s&&eP(i))return n;if(!s&&n==null&&!XR(i,Gt()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(ca(l.path,e)||ca(e,l.path))},a=gV(t.allWrites,o,e),c=n||ct.EMPTY_NODE;return jg(a,c)}}}function S5e(t,e,n){let r=ct.EMPTY_NODE;const s=uf(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(sr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Uu(t.visibleWrites,e);return n.forEachChild(sr,(o,a)=>{const c=jg(Uu(i,new _n(o)),a);r=r.updateImmediateChild(o,c)}),Aj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Uu(t.visibleWrites,e);return Aj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function A5e(t,e,n,r,s){be(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Sr(e,n);if(XR(t.visibleWrites,i))return null;{const o=Uu(t.visibleWrites,i);return eP(o)?s.getChild(n):jg(o,s.getChild(n))}}function I5e(t,e,n,r){const s=Sr(e,n),i=uf(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Uu(t.visibleWrites,s);return jg(o,r.getNode().getImmediateChild(n))}else return null}function x5e(t,e){return uf(t.visibleWrites,e)}function T5e(t,e,n,r,s,i,o){let a;const c=Uu(t.visibleWrites,e),l=uf(c,Gt());if(l!=null)a=l;else if(n!=null)a=jg(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function N5e(){return{visibleWrites:pa.empty(),allWrites:[],lastWriteId:-1}}function gC(t,e,n,r){return mV(t.writeTree,t.treePath,e,n,r)}function g2(t,e){return S5e(t.writeTree,t.treePath,e)}function Ij(t,e,n,r){return A5e(t.writeTree,t.treePath,e,n,r)}function mC(t,e){return x5e(t.writeTree,Sr(t.treePath,e))}function R5e(t,e,n,r,s,i){return T5e(t.writeTree,t.treePath,e,n,r,s,i)}function m2(t,e,n){return I5e(t.writeTree,t.treePath,e,n)}function yV(t,e){return wV(Sr(t.treePath,e),t.writeTree)}function wV(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5e{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;be(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),be(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,$0(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,D0(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Ug(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,$0(r,e.snapshotNode,s.oldSnap));else throw dm("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5e{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const vV=new k5e;class y2{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Qu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return m2(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Wh(this.viewCache_),i=R5e(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5e(t){return{filter:t}}function D5e(t,e){be(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),be(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $5e(t,e,n,r,s){const i=new P5e;let o,a;if(n.type===la.OVERWRITE){const l=n;l.source.fromUser?o=tP(t,e,l.path,l.snap,r,s,i):(be(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Rt(l.path),o=yC(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===la.MERGE){const l=n;l.source.fromUser?o=L5e(t,e,l.path,l.children,r,s,i):(be(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=nP(t,e,l.path,l.children,r,s,a,i))}else if(n.type===la.ACK_USER_WRITE){const l=n;l.revert?o=B5e(t,e,l.path,r,s,i):o=U5e(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===la.LISTEN_COMPLETE)o=j5e(t,e,n.path,r,i);else throw dm("Unknown operation type: "+n.type);const c=i.getChanges();return M5e(e,o,c),{viewCache:o,changes:c}}function M5e(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=pC(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(uV(pC(e)))}}function bV(t,e,n,r,s,i){const o=e.eventCache;if(mC(r,n)!=null)return e;{let a,c;if(Rt(n))if(be(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Wh(e),u=l instanceof ct?l:ct.EMPTY_NODE,d=g2(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=gC(r,Wh(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=xt(n);if(l===".priority"){be(Yu(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=Ij(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=kn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=Ij(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=m2(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return sw(e,a,o.isFullyInitialized()||Rt(n),t.filter.filtersNodes())}}function yC(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Rt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=xt(n);if(!c.isCompleteForPath(n)&&Yu(n)>1)return e;const p=kn(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,vV,null)}const d=fV(e,l,c.isFullyInitialized()||Rt(n),u.filtersNodes()),h=new y2(s,d,i);return bV(t,d,n,s,h,a)}function tP(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new y2(s,e,i);if(Rt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=sw(e,l,!0,t.filter.filtersNodes());else{const d=xt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=sw(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=kn(n),f=a.getNode().getImmediateChild(d);let p;if(Rt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?tV(h)===".priority"&&g.getChild(rV(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=ct.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=sw(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function xj(t,e){return t.eventCache.isCompleteForChild(e)}function L5e(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Sr(n,c);xj(e,xt(u))&&(a=tP(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Sr(n,c);xj(e,xt(u))||(a=tP(t,a,u,l,s,i,o))}),a}function Tj(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function nP(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Rt(n)?l=r:l=new Mn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=Tj(t,f,h);c=yC(t,c,new _n(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=Tj(t,p,h);c=yC(t,c,new _n(d),g,s,i,o,a)}}),c}function U5e(t,e,n,r,s,i,o){if(mC(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Rt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return yC(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Rt(n)){let l=new Mn(null);return c.getNode().forEachChild(qp,(u,d)=>{l=l.set(new _n(u),d)}),nP(t,e,n,l,s,i,a,o)}else return e}else{let l=new Mn(null);return r.foreach((u,d)=>{const h=Sr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),nP(t,e,n,l,s,i,a,o)}}function j5e(t,e,n,r,s){const i=e.serverCache,o=fV(e,i.getNode(),i.isFullyInitialized()||Rt(n),i.isFiltered());return bV(t,o,n,r,vV,s)}function B5e(t,e,n,r,s,i){let o;if(mC(r,n)!=null)return e;{const a=new y2(r,e,s),c=e.eventCache.getNode();let l;if(Rt(n)||xt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=gC(r,Wh(e));else{const d=e.serverCache.getNode();be(d instanceof ct,"serverChildren would be complete if leaf node"),u=g2(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=xt(n);let d=m2(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,kn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,ct.EMPTY_NODE,kn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=gC(r,Wh(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||mC(r,Gt())!=null,sw(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5e{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new d2(r.getIndex()),i=o5e(r);this.processor_=O5e(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(ct.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(ct.EMPTY_NODE,a.getNode(),null),u=new Qu(c,o.isFullyInitialized(),s.filtersNodes()),d=new Qu(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=sS(d,u),this.eventGenerator_=new f5e(this.query_)}get query(){return this.query_}}function W5e(t){return t.viewCache_.serverCache.getNode()}function z5e(t){return pC(t.viewCache_)}function q5e(t,e){const n=Wh(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Rt(e)&&!n.getImmediateChild(xt(e)).isEmpty())?n.getChild(e):null}function Nj(t){return t.eventRegistrations_.length===0}function H5e(t,e){t.eventRegistrations_.push(e)}function Rj(t,e,n){const r=[];if(n){be(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Pj(t,e,n,r){e.type===la.MERGE&&e.source.queryId!==null&&(be(Wh(t.viewCache_),"We should always have a full cache before handling merges"),be(pC(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=$5e(t.processor_,s,e,n,r);return D5e(t.processor_,i.viewCache),be(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,_V(t,i.changes,i.viewCache.eventCache.getNode(),null)}function V5e(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(sr,(i,o)=>{r.push(Ug(i,o))}),n.isFullyInitialized()&&r.push(uV(n.getNode())),_V(t,r,n.getNode(),e)}function _V(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return p5e(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wC;class EV{constructor(){this.views=new Map}}function G5e(t){be(!wC,"__referenceConstructor has already been defined"),wC=t}function K5e(){return be(wC,"Reference.ts has not been loaded"),wC}function Y5e(t){return t.views.size===0}function w2(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return be(i!=null,"SyncTree gave us an op for an invalid query."),Pj(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Pj(o,e,n,r));return i}}function CV(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=gC(n,s?r:null),c=!1;a?c=!0:r instanceof ct?(a=g2(n,r),c=!1):(a=ct.EMPTY_NODE,c=!1);const l=sS(new Qu(a,c,!1),new Qu(r,s,!1));return new F5e(e,l)}return o}function Q5e(t,e,n,r,s,i){const o=CV(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),H5e(o,n),V5e(o,n)}function J5e(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Ju(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(Rj(l,n,r)),Nj(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(Rj(c,n,r)),Nj(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Ju(t)&&i.push(new(K5e())(e._repo,e._path)),{removed:i,events:o}}function SV(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ju(t,e){let n=null;for(const r of t.views.values())n=n||q5e(r,e);return n}function AV(t,e){if(e._queryParams.loadsAllData())return oS(t);{const r=e._queryIdentifier;return t.views.get(r)}}function IV(t,e){return AV(t,e)!=null}function Ju(t){return oS(t)!=null}function oS(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vC;function Z5e(t){be(!vC,"__referenceConstructor has already been defined"),vC=t}function X5e(){return be(vC,"Reference.ts has not been loaded"),vC}let eMe=1;class kj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=N5e(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xV(t,e,n,r,s){return w5e(t.pendingWriteTree_,e,n,r,s),s?Uv(t,new Fh(hV(),e,n)):[]}function Yd(t,e,n=!1){const r=v5e(t.pendingWriteTree_,e);if(b5e(t.pendingWriteTree_,e)){let i=new Mn(null);return r.snap!=null?i=i.set(Gt(),!0):Ei(r.children,o=>{i=i.set(new _n(o),!0)}),Uv(t,new fC(r.path,i,n))}else return[]}function Lv(t,e,n){return Uv(t,new Fh(f2(),e,n))}function tMe(t,e,n){const r=Mn.fromObject(n);return Uv(t,new U0(f2(),e,r))}function nMe(t,e){return Uv(t,new L0(f2(),e))}function rMe(t,e,n){const r=b2(t,n);if(r){const s=_2(r),i=s.path,o=s.queryId,a=$s(i,e),c=new L0(p2(o),a);return E2(t,i,c)}else return[]}function bC(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||IV(o,e))){const c=J5e(o,e,n,r);Y5e(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Ju(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=oMe(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=PV(t,g);t.listenProvider_.startListening(ow(w),j0(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(ow(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(aS(h));t.listenProvider_.stopListening(ow(h),f)}))}aMe(t,l)}return a}function TV(t,e,n,r){const s=b2(t,r);if(s!=null){const i=_2(s),o=i.path,a=i.queryId,c=$s(o,e),l=new Fh(p2(a),c,n);return E2(t,o,l)}else return[]}function sMe(t,e,n,r){const s=b2(t,r);if(s){const i=_2(s),o=i.path,a=i.queryId,c=$s(o,e),l=Mn.fromObject(n),u=new U0(p2(a),c,l);return E2(t,o,u)}else return[]}function rP(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=$s(h,s);i=i||ju(f,p),o=o||Ju(f)});let a=t.syncPointTree_.get(s);a?(o=o||Ju(a),i=i||ju(a,Gt())):(a=new EV,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=ct.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=ju(p,Gt());g&&(i=i.updateImmediateChild(f,g))}));const l=IV(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=aS(e);be(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=cMe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=iS(t.pendingWriteTree_,s);let d=Q5e(a,e,n,u,i,c);if(!l&&!o&&!r){const h=AV(a,e);d=d.concat(lMe(t,e,h))}return d}function v2(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=$s(o,e),l=ju(a,c);if(l)return l});return mV(s,e,i,n,!0)}function iMe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=$s(l,n);r=r||ju(u,d)});let s=t.syncPointTree_.get(n);s?r=r||ju(s,Gt()):(s=new EV,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Qu(r,!0,!1):null,a=iS(t.pendingWriteTree_,e._path),c=CV(s,e,a,i?o.getNode():ct.EMPTY_NODE,i);return z5e(c)}function Uv(t,e){return NV(e,t.syncPointTree_,null,iS(t.pendingWriteTree_,Gt()))}function NV(t,e,n,r){if(Rt(t.path))return RV(t,e,n,r);{const s=e.get(Gt());n==null&&s!=null&&(n=ju(s,Gt()));let i=[];const o=xt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=yV(r,o);i=i.concat(NV(a,c,l,u))}return s&&(i=i.concat(w2(s,t,r,n))),i}}function RV(t,e,n,r){const s=e.get(Gt());n==null&&s!=null&&(n=ju(s,Gt()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=yV(r,o),u=t.operationForChild(o);u&&(i=i.concat(RV(u,a,c,l)))}),s&&(i=i.concat(w2(s,t,r,n))),i}function PV(t,e){const n=e.query,r=j0(t,n);return{hashFn:()=>(W5e(e)||ct.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?rMe(t,n._path,r):nMe(t,n._path);{const i=i3e(s,n);return bC(t,n,null,i)}}}}function j0(t,e){const n=aS(e);return t.queryToTagMap.get(n)}function aS(t){return t._path.toString()+"$"+t._queryIdentifier}function b2(t,e){return t.tagToQueryMap.get(e)}function _2(t){const e=t.indexOf("$");return be(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _n(t.substr(0,e))}}function E2(t,e,n){const r=t.syncPointTree_.get(e);be(r,"Missing sync point for query tag that we're tracking");const s=iS(t.pendingWriteTree_,e);return w2(r,n,s,null)}function oMe(t){return t.fold((e,n,r)=>{if(n&&Ju(n))return[oS(n)];{let s=[];return n&&(s=SV(n)),Ei(r,(i,o)=>{s=s.concat(o)}),s}})}function ow(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(X5e())(t._repo,t._path):t}function aMe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=aS(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function cMe(){return eMe++}function lMe(t,e,n){const r=e._path,s=j0(t,e),i=PV(t,n),o=t.listenProvider_.startListening(ow(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)be(!Ju(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Rt(l)&&u&&Ju(u))return[oS(u).query];{let h=[];return u&&(h=h.concat(SV(u).map(f=>f.query))),Ei(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(ow(u),j0(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new C2(n)}node(){return this.node_}}class S2{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Sr(this.path_,e);return new S2(this.syncTree_,n)}node(){return v2(this.syncTree_,this.path_)}}const uMe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Oj=function(t,e,n){if(!t||typeof t!="object")return t;if(be(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dMe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hMe(t[".sv"],e);be(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dMe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:be(!1,"Unexpected server value: "+t)}},hMe=function(t,e,n){t.hasOwnProperty("increment")||be(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&be(!1,"Unexpected increment value: "+r);const s=e.node();if(be(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},fMe=function(t,e,n,r){return A2(e,new S2(n,t),r)},kV=function(t,e,n){return A2(t,new C2(e),n)};function A2(t,e,n){const r=t.getPriority().val(),s=Oj(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Oj(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new $r(a,Br(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new $r(s))),o.forEachChild(sr,(a,c)=>{const l=A2(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function x2(t,e){let n=e instanceof _n?e:new _n(e),r=t,s=xt(n);for(;s!==null;){const i=Mg(r.node.children,s)||{children:{},childCount:0};r=new I2(s,r,i),n=kn(n),s=xt(n)}return r}function gm(t){return t.node.value}function OV(t,e){t.node.value=e,sP(t)}function DV(t){return t.node.childCount>0}function pMe(t){return gm(t)===void 0&&!DV(t)}function cS(t,e){Ei(t.node.children,(n,r)=>{e(new I2(n,t,r))})}function $V(t,e,n,r){n&&e(t),cS(t,s=>{$V(s,e,!0)})}function gMe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jv(t){return new _n(t.parent===null?t.name:jv(t.parent)+"/"+t.name)}function sP(t){t.parent!==null&&mMe(t.parent,t.name,t)}function mMe(t,e,n){const r=pMe(n),s=ml(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,sP(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,sP(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yMe=/[\[\].#$\/\u0000-\u001F\u007F]/,wMe=/[\[\].#$\u0000-\u001F\u007F]/,fx=10*1024*1024,MV=function(t){return typeof t=="string"&&t.length!==0&&!yMe.test(t)},LV=function(t){return typeof t=="string"&&t.length!==0&&!wMe.test(t)},vMe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),LV(t)},bMe=function(t,e,n,r){T2(t2(t,"value"),e,n)},T2=function(t,e,n){const r=n instanceof _n?new U3e(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Td(r));if(typeof e=="function")throw new Error(t+"contains a function "+Td(r)+" with contents = "+e.toString());if(DH(e))throw new Error(t+"contains "+e.toString()+" "+Td(r));if(typeof e=="string"&&e.length>fx/3&&nS(e)>fx)throw new Error(t+"contains a string greater than "+fx+" utf8 bytes "+Td(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ei(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!MV(o)))throw new Error(t+" contains an invalid key ("+o+") "+Td(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);j3e(r,o),T2(t,a,r),B3e(r)}),s&&i)throw new Error(t+' contains ".value" child '+Td(r)+" in addition to actual children.")}},UV=function(t,e,n,r){if(!LV(n))throw new Error(t2(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},_Me=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UV(t,e,n)},EMe=function(t,e){if(xt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},CMe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!MV(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!vMe(n))throw new Error(t2(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SMe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function N2(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!c2(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function jV(t,e,n){N2(t,n),BV(t,r=>c2(r,e))}function hc(t,e,n){N2(t,n),BV(t,r=>ca(r,e)||ca(e,r))}function BV(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(AMe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function AMe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();nw&&vs("event: "+n.toString()),pm(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IMe="repo_interrupt",xMe=25;class TMe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SMe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hC(),this.transactionQueueTree_=new I2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function NMe(t,e,n){if(t.stats_=o2(t.repoInfo_),t.forceRestClient_||l3e())t.server_=new dC(t.repoInfo_,(r,s,i,o)=>{Dj(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$j(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Cr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new tl(t.repoInfo_,e,(r,s,i,o)=>{Dj(t,r,s,i,o)},r=>{$j(t,r)},r=>{PMe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=p3e(t.repoInfo_,()=>new h5e(t.stats_,t.server_)),t.infoData_=new a5e,t.infoSyncTree_=new kj({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Lv(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),P2(t,"connected",!1),t.serverSyncTree_=new kj({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);hc(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function RMe(t){const n=t.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function R2(t){return uMe({timestamp:RMe(t)})}function Dj(t,e,n,r,s){t.dataUpdateCount++;const i=new _n(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=iC(n,l=>Br(l));o=sMe(t.serverSyncTree_,i,c,s)}else{const c=Br(n);o=TV(t.serverSyncTree_,i,c,s)}else if(r){const c=iC(n,l=>Br(l));o=tMe(t.serverSyncTree_,i,c)}else{const c=Br(n);o=Lv(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=uS(t,i)),hc(t.eventQueue_,a,o)}function $j(t,e){P2(t,"connected",e),e===!1&&DMe(t)}function PMe(t,e){Ei(e,(n,r)=>{P2(t,n,r)})}function P2(t,e,n){const r=new _n("/.info/"+e),s=Br(n);t.infoData_.updateSnapshot(r,s);const i=Lv(t.infoSyncTree_,r,s);hc(t.eventQueue_,r,i)}function FV(t){return t.nextWriteId_++}function kMe(t,e,n){const r=iMe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Br(s).withIndex(e._queryParams.getIndex());rP(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Lv(t.serverSyncTree_,e._path,i);else{const a=j0(t.serverSyncTree_,e);o=TV(t.serverSyncTree_,e._path,i,a)}return hc(t.eventQueue_,e._path,o),bC(t.serverSyncTree_,e,n,null,!0),i},s=>(lS(t,"get for query "+Cr(e)+" failed: "+s),Promise.reject(new Error(s))))}function OMe(t,e,n,r,s){lS(t,"set",{path:e.toString(),value:n,priority:r});const i=R2(t),o=Br(n,r),a=v2(t.serverSyncTree_,e),c=kV(o,a,i),l=FV(t),u=xV(t.serverSyncTree_,e,c,l,!0);N2(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||bi("set at "+e+" failed: "+h);const g=Yd(t.serverSyncTree_,l,!p);hc(t.eventQueue_,e,g),UMe(t,s,h,f)});const d=VV(t,e);uS(t,d),hc(t.eventQueue_,d,[])}function DMe(t){lS(t,"onDisconnectEvents");const e=R2(t),n=hC();ZR(t.onDisconnect_,Gt(),(s,i)=>{const o=fMe(s,i,t.serverSyncTree_,e);dV(n,s,o)});let r=[];ZR(n,Gt(),(s,i)=>{r=r.concat(Lv(t.serverSyncTree_,s,i));const o=VV(t,s);uS(t,o)}),t.onDisconnect_=hC(),hc(t.eventQueue_,Gt(),r)}function $Me(t,e,n){let r;xt(e._path)===".info"?r=rP(t.infoSyncTree_,e,n):r=rP(t.serverSyncTree_,e,n),jV(t.eventQueue_,e._path,r)}function MMe(t,e,n){let r;xt(e._path)===".info"?r=bC(t.infoSyncTree_,e,n):r=bC(t.serverSyncTree_,e,n),jV(t.eventQueue_,e._path,r)}function LMe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(IMe)}function lS(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vs(n,...e)}function UMe(t,e,n,r){e&&pm(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function WV(t,e,n){return v2(t.serverSyncTree_,e,n)||ct.EMPTY_NODE}function k2(t,e=t.transactionQueueTree_){if(e||dS(t,e),gm(e)){const n=qV(t,e);be(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&jMe(t,jv(e),n)}else DV(e)&&cS(e,n=>{k2(t,n)})}function jMe(t,e,n){const r=n.map(l=>l.currentWriteId),s=WV(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];be(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=$s(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{lS(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Yd(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();dS(t,x2(t.transactionQueueTree_,e)),k2(t,t.transactionQueueTree_),hc(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)pm(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{bi("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}uS(t,e)}},o)}function uS(t,e){const n=zV(t,e),r=jv(n),s=qV(t,n);return BMe(t,s,r),r}function BMe(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=$s(n,c.path);let u=!1,d;if(be(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Yd(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=xMe)u=!0,d="maxretry",s=s.concat(Yd(t.serverSyncTree_,c.currentWriteId,!0));else{const h=WV(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){T2("transaction failed: Data returned ",f,c.path);let p=Br(f);typeof f=="object"&&f!=null&&ml(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=R2(t),v=kV(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=v,c.currentWriteId=FV(t),o.splice(o.indexOf(w),1),s=s.concat(xV(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally)),s=s.concat(Yd(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(Yd(t.serverSyncTree_,c.currentWriteId,!0))}hc(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}dS(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)pm(r[a]);k2(t,t.transactionQueueTree_)}function zV(t,e){let n,r=t.transactionQueueTree_;for(n=xt(e);n!==null&&gm(r)===void 0;)r=x2(r,n),e=kn(e),n=xt(e);return r}function qV(t,e){const n=[];return HV(t,e,n),n.sort((r,s)=>r.order-s.order),n}function HV(t,e,n){const r=gm(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);cS(e,s=>{HV(t,s,n)})}function dS(t,e){const n=gm(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,OV(e,n.length>0?n:void 0)}cS(e,r=>{dS(t,r)})}function VV(t,e){const n=jv(zV(t,e)),r=x2(t.transactionQueueTree_,e);return gMe(r,s=>{px(t,s)}),px(t,r),$V(r,s=>{px(t,s)}),n}function px(t,e){const n=gm(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(be(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(be(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Yd(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?OV(e,void 0):n.length=i+1,hc(t.eventQueue_,jv(e),s);for(let o=0;o<r.length;o++)pm(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FMe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function WMe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bi(`Invalid query segment '${n}' in query '${t}'`)}return e}const Mj=function(t,e){const n=zMe(t),r=n.namespace;n.domain==="firebase.com"&&hl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&hl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||e3e();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new VH(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new _n(n.pathString)}},zMe=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=FMe(t.substring(u,d)));const h=WMe(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qMe{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Cr(this.snapshot.exportVal())}}class HMe{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return be(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Rt(this._path)?null:tV(this._path)}get ref(){return new yl(this._repo,this._path)}get _queryIdentifier(){const e=_j(this._queryParams),n=s2(e);return n==="{}"?"default":n}get _queryObject(){return _j(this._queryParams)}isEqual(e){if(e=hm(e),!(e instanceof O2))return!1;const n=this._repo===e._repo,r=c2(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+L3e(this._path)}}class yl extends O2{constructor(e,n){super(e,n,new h2,!1)}get parent(){const e=rV(this._path);return e===null?null:new yl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class B0{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new _n(e),r=iP(this.ref,e);return new B0(this._node.getChild(n),r,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new B0(s,iP(this.ref,r),sr)))}hasChild(e){const n=new _n(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $i(t,e){return t=hm(t),t._checkNotDeleted("ref"),e!==void 0?iP(t._root,e):t._root}function iP(t,e){return t=hm(t),xt(t._path)===null?_Me("child","path",e):UV("child","path",e),new yl(t._repo,Sr(t._path,e))}function ap(t,e){t=hm(t),EMe("set",t._path),bMe("set",e,t._path);const n=new tS;return OMe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function xp(t){t=hm(t);const e=new GV(()=>{}),n=new hS(e);return kMe(t._repo,t,n).then(r=>new B0(r,new yl(t._repo,t._path),t._queryParams.getIndex()))}class hS{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new qMe("value",this,new B0(e.snapshotNode,new yl(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HMe(this,e,n):null}matches(e){return e instanceof hS?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function VMe(t,e,n,r,s){const i=new GV(n,void 0),o=new hS(i);return $Me(t._repo,t,o),()=>MMe(t._repo,t,o)}function Lj(t,e,n,r){return VMe(t,"value",e)}G5e(yl);Z5e(yl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GMe="FIREBASE_DATABASE_EMULATOR_HOST",oP={};let KMe=!1;function YMe(t,e,n,r){t.repoInfo_=new VH(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function QMe(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||hl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Mj(i,s),a=o.repoInfo,c;typeof process<"u"&&rj&&(c=rj[GMe]),c?(i=`http://${c}?ns=${a.namespace}`,o=Mj(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new d3e(t.name,t.options,e);CMe("Invalid Firebase Database URL",o),Rt(o.path)||hl("Database URL must point to the root of a Firebase Database (not including a child path).");const u=ZMe(a,t,l,new u3e(t.name,n));return new XMe(u,t)}function JMe(t,e){const n=oP[e];(!n||n[t.key]!==t)&&hl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),LMe(t),delete n[t.key]}function ZMe(t,e,n,r){let s=oP[e.name];s||(s={},oP[e.name]=s);let i=s[t.toURLString()];return i&&hl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new TMe(t,KMe,n,r),s[t.toURLString()]=i,i}class XMe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(NMe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yl(this._repo,Gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JMe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hl("Cannot call "+e+" on a deleted database.")}}function D2(t=r2(),e){const n=O$e(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=EDe("database");r&&eLe(n,...r)}return n}function eLe(t,e,n,r={}){t=hm(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hl("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&hl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new K_(K_.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:CDe(r.mockUserToken,t.app.options.projectId);i=new K_(o)}YMe(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tLe(t){K$e(M$e),oC(new R0("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return QMe(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Wp(sj,ij,t),Wp(sj,ij,"esm2017")}tl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};tl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tLe();const Uj=aC().length>0?r2():null,jj=Uj?D2(Uj):null,KV=()=>{if(!jj)throw new Error("[FIREBASE] Database not initialized");return jj},zh=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,_C=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=KV(),s=$i(r,`leaderboard/${t}`),i=await xp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await ap(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",zh(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},nLe=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:zh(e),redPlayer:zh(n)}),await _C(e,t==="blue"?"win":t==="red"?"loss":"draw"),await _C(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},YV=async(t=20)=>{try{const e=KV(),n=$i(e,"leaderboard"),r=await xp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},rLe=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ar(async()=>{const{default:r}=await Promise.resolve().then(()=>mm);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class $2 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class sLe extends $2{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bj extends $2{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fj extends $2{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var aP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(aP||(aP={}));var iLe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class oLe{constructor(e,{headers:n={},customFetch:r,region:s=aP.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=rLe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return iLe(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region);const l=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,l.searchParams.set("forceFunctionRegion",c));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(g=>{throw new sLe(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Bj(d);if(!d.ok)throw new Fj(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof Fj||s instanceof Bj?s.context:void 0}}})}}var ui={},M2={},fS={},Bv={},pS={},gS={},aLe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bg=aLe();const cLe=Bg.fetch,QV=Bg.fetch.bind(Bg),JV=Bg.Headers,lLe=Bg.Request,uLe=Bg.Response,mm=Object.freeze(Object.defineProperty({__proto__:null,Headers:JV,Request:lLe,Response:uLe,default:QV,fetch:cLe},Symbol.toStringTag,{value:"Module"})),dLe=gP(mm);var mS={};Object.defineProperty(mS,"__esModule",{value:!0});let hLe=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};mS.default=hLe;var ZV=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gS,"__esModule",{value:!0});const fLe=ZV(dLe),pLe=ZV(mS);let gLe=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fLe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new pLe.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};gS.default=gLe;var mLe=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pS,"__esModule",{value:!0});const yLe=mLe(gS);let wLe=class extends yLe.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};pS.default=wLe;var vLe=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bv,"__esModule",{value:!0});const bLe=vLe(pS);let _Le=class extends bLe.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Bv.default=_Le;var ELe=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fS,"__esModule",{value:!0});const dy=ELe(Bv);let CLe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new dy.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new dy.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new dy.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new dy.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new dy.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};fS.default=CLe;var yS={},wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.version=void 0;wS.version="0.0.0-automated";Object.defineProperty(yS,"__esModule",{value:!0});yS.DEFAULT_HEADERS=void 0;const SLe=wS;yS.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${SLe.version}`};var XV=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(M2,"__esModule",{value:!0});const ALe=XV(fS),ILe=XV(Bv),xLe=yS;let TLe=class eG{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},xLe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new ALe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new eG(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new ILe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};M2.default=TLe;var ym=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ui,"__esModule",{value:!0});ui.PostgrestError=ui.PostgrestBuilder=ui.PostgrestTransformBuilder=ui.PostgrestFilterBuilder=ui.PostgrestQueryBuilder=ui.PostgrestClient=void 0;const tG=ym(M2);ui.PostgrestClient=tG.default;const nG=ym(fS);ui.PostgrestQueryBuilder=nG.default;const rG=ym(Bv);ui.PostgrestFilterBuilder=rG.default;const sG=ym(pS);ui.PostgrestTransformBuilder=sG.default;const iG=ym(gS);ui.PostgrestBuilder=iG.default;const oG=ym(mS);ui.PostgrestError=oG.default;var NLe=ui.default={PostgrestClient:tG.default,PostgrestQueryBuilder:nG.default,PostgrestFilterBuilder:rG.default,PostgrestTransformBuilder:sG.default,PostgrestBuilder:iG.default,PostgrestError:oG.default};const{PostgrestClient:RLe,PostgrestQueryBuilder:c8e,PostgrestFilterBuilder:l8e,PostgrestTransformBuilder:u8e,PostgrestBuilder:d8e,PostgrestError:h8e}=NLe;function PLe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const kLe=PLe(),OLe="2.11.15",DLe=`realtime-js/${OLe}`,$Le="1.0.0",aG=1e4,MLe=1e3;var aw;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(aw||(aw={}));var ms;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ms||(ms={}));var Xo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xo||(Xo={}));var cP;(function(t){t.websocket="websocket"})(cP||(cP={}));var $d;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($d||($d={}));class LLe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class cG{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Tn||(Tn={}));const Wj=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=ULe(o,t,e,s),i),{})},ULe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?lG(i,o):lP(o)},lG=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return WLe(e,n)}switch(t){case Tn.bool:return jLe(e);case Tn.float4:case Tn.float8:case Tn.int2:case Tn.int4:case Tn.int8:case Tn.numeric:case Tn.oid:return BLe(e);case Tn.json:case Tn.jsonb:return FLe(e);case Tn.timestamp:return zLe(e);case Tn.abstime:case Tn.date:case Tn.daterange:case Tn.int4range:case Tn.int8range:case Tn.money:case Tn.reltime:case Tn.text:case Tn.time:case Tn.timestamptz:case Tn.timetz:case Tn.tsrange:case Tn.tstzrange:return lP(e);default:return lP(e)}},lP=t=>t,jLe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},BLe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},FLe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},WLe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>lG(e,a))}return t},zLe=t=>typeof t=="string"?t.replace(" ","T"):t,uG=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gx{constructor(e,n,r={},s=aG){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zj;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zj||(zj={}));class cw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cw.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=cw.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=cw.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0),g=d.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qj;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(qj||(qj={}));var Hj;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Hj||(Hj={}));var Mc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Mc||(Mc={}));class L2{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ms.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gx(this,Xo.join,this.params,this.timeout),this.rejoinTimer=new cG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ms.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ms.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ms.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ms.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xo.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new cw(this),this.broadcastEndpointURL=uG(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ms.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Mc.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Mc.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Mc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const w=h[g],{filter:{event:y,schema:v,table:b,filter:E}}=w,C=u&&u[g];if(C&&C.event===y&&C.schema===v&&C.table===b&&C.filter===E)p.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=ms.errored,e==null||e(Mc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Mc.SUBSCRIBED);return}}).receive("error",u=>{this.state=ms.errored,e==null||e(Mc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Mc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ms.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new gx(this,Xo.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gx(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Xo;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,w;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(g=f.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,w,y,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,C=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((g=n.ids)===null||g===void 0?void 0:g.includes(E))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(v=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return E==="*"||E===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:w,commit_timestamp:y,type:v,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===ms.closed}_isJoined(){return this.state===ms.joined}_isJoining(){return this.state===ms.joining}_isLeaving(){return this.state===ms.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&L2.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xo.close,{},e)}_onError(e){this._on(Xo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ms.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Wj(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Wj(e.columns,e.old_record)),n}}const Vj=()=>{},qLe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HLe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=aG,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vj,this.ref=0,this.logger=Vj,this.conn=null,this.sendBuffer=[],this.serializer=new LLe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ar(async()=>{const{default:c}=await Promise.resolve().then(()=>mm);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${cP.websocket}`,this.httpEndpoint=uG(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new cG(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=kLe),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$Le}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case aw.connecting:return $d.Connecting;case aw.open:return $d.Open;case aw.closing:return $d.Closing;default:return $d.Closed}}isConnected(){return this.connectionState()===$d.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new L2(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:DLe};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Xo.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(MLe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([qLe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class U2 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Or(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class VLe extends U2{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class uP extends U2{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var GLe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const dG=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ar(async()=>{const{default:r}=await Promise.resolve().then(()=>mm);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},KLe=()=>GLe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ar(()=>Promise.resolve().then(()=>mm),void 0)).Response:Response}),dP=t=>{if(Array.isArray(t))return t.map(n=>dP(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=dP(r)}),e};var df=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const mx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),YLe=(t,e,n)=>df(void 0,void 0,void 0,function*(){const r=yield KLe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new VLe(mx(s),t.status||500))}).catch(s=>{e(new uP(mx(s),s))}):e(new uP(mx(t),t))}),QLe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Fv(t,e,n,r,s,i){return df(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,QLe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>YLe(c,a,r))})})}function EC(t,e,n,r){return df(this,void 0,void 0,function*(){return Fv(t,"GET",e,n,r)})}function Hl(t,e,n,r,s){return df(this,void 0,void 0,function*(){return Fv(t,"POST",e,r,s,n)})}function JLe(t,e,n,r,s){return df(this,void 0,void 0,function*(){return Fv(t,"PUT",e,r,s,n)})}function ZLe(t,e,n,r){return df(this,void 0,void 0,function*(){return Fv(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function hG(t,e,n,r,s){return df(this,void 0,void 0,function*(){return Fv(t,"DELETE",e,r,s,n)})}var ei=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const XLe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eUe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=dG(s)}uploadOrUpdate(e,n,r,s){return ei(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Gj),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Or(i))return{data:null,error:i};throw i}})}upload(e,n,r){return ei(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ei(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:Gj.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Or(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return ei(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Hl(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new U2("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}})}update(e,n,r){return ei(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ei(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Or(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ei(this,void 0,void 0,function*(){try{return{data:{path:(yield Hl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Or(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ei(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Hl(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Or(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ei(this,void 0,void 0,function*(){try{const s=yield Hl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Or(s))return{data:null,error:s};throw s}})}download(e,n){return ei(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield EC(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Or(a))return{data:null,error:a};throw a}})}info(e){return ei(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield EC(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:dP(r),error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}})}exists(e){return ei(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield ZLe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Or(r)&&r instanceof uP){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return ei(this,void 0,void 0,function*(){try{return{data:yield hG(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}})}list(e,n,r){return ei(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},XLe),n),{prefix:e||""});return{data:yield Hl(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Or(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const tUe="2.7.1",nUe={"X-Client-Info":`storage-js/${tUe}`};var Qf=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class rUe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},nUe),n),this.fetch=dG(r)}listBuckets(){return Qf(this,void 0,void 0,function*(){try{return{data:yield EC(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Or(e))return{data:null,error:e};throw e}})}getBucket(e){return Qf(this,void 0,void 0,function*(){try{return{data:yield EC(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Qf(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Qf(this,void 0,void 0,function*(){try{return{data:yield JLe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Qf(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Qf(this,void 0,void 0,function*(){try{return{data:yield hG(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}})}}class sUe extends rUe{constructor(e,n={},r){super(e,n,r)}from(e){return new eUe(this.url,this.headers,e,this.fetch)}}const iUe="2.50.5";let Ny="";typeof Deno<"u"?Ny="deno":typeof document<"u"?Ny="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ny="react-native":Ny="node";const oUe={"X-Client-Info":`supabase-js-${Ny}/${iUe}`},aUe={headers:oUe},cUe={schema:"public"},lUe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uUe={};var dUe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const hUe=t=>{let e;return t?e=t:typeof fetch>"u"?e=QV:e=fetch,(...n)=>e(...n)},fUe=()=>typeof Headers>"u"?JV:Headers,pUe=(t,e,n)=>{const r=hUe(n),s=fUe();return(i,o)=>dUe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var gUe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function mUe(t){return t.endsWith("/")?t:t+"/"}function yUe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>gUe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const fG="2.70.0",cp=30*1e3,hP=3,yx=hP*cp,wUe="http://localhost:9999",vUe="supabase.auth.token",bUe={"X-Client-Info":`gotrue-js/${fG}`},fP="X-Supabase-Api-Version",pG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_Ue=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,EUe=6e5;class j2 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function bt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class CUe extends j2{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function SUe(t){return bt(t)&&t.name==="AuthApiError"}class gG extends j2{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class sd extends j2{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ul extends sd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function AUe(t){return bt(t)&&t.name==="AuthSessionMissingError"}class s_ extends sd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class i_ extends sd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class o_ extends sd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function IUe(t){return bt(t)&&t.name==="AuthImplicitGrantRedirectError"}class Kj extends sd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pP extends sd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wx(t){return bt(t)&&t.name==="AuthRetryableFetchError"}class Yj extends sd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class lw extends sd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const CC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qj=` 	
\r=`.split(""),xUe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qj.length;e+=1)t[Qj[e].charCodeAt(0)]=-2;for(let e=0;e<CC.length;e+=1)t[CC[e].charCodeAt(0)]=e;return t})();function Jj(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(CC[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(CC[r]),e.queuedBits-=6}}function mG(t,e,n){const r=xUe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zj(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{RUe(o,r,n)};for(let o=0;o<t.length;o+=1)mG(t.charCodeAt(o),s,i);return e.join("")}function TUe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function NUe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}TUe(r,e)}}function RUe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function PUe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)mG(t.charCodeAt(s),n,r);return new Uint8Array(e)}function kUe(t){const e=[];return NUe(t,n=>e.push(n)),new Uint8Array(e)}function OUe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Jj(s,n,r)),Jj(null,n,r),e.join("")}function DUe(t){return Math.round(Date.now()/1e3)+t}function $Ue(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Go=()=>typeof window<"u"&&typeof document<"u",bd={tested:!1,writable:!1},uw=()=>{if(!Go())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bd.tested)return bd.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bd.tested=!0,bd.writable=!0}catch{bd.tested=!0,bd.writable=!1}return bd.writable};function MUe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const yG=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ar(async()=>{const{default:r}=await Promise.resolve().then(()=>mm);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},LUe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wG=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},a_=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},c_=async(t,e)=>{await t.removeItem(e)};class vS{constructor(){this.promise=new vS.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}vS.promiseConstructor=Promise;function vx(t){const e=t.split(".");if(e.length!==3)throw new lw("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!_Ue.test(e[r]))throw new lw("JWT not in base64url format");return{header:JSON.parse(Zj(e[0])),payload:JSON.parse(Zj(e[1])),signature:PUe(e[2]),raw:{header:e[0],payload:e[1]}}}async function UUe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function jUe(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function BUe(t){return("0"+t.toString(16)).substr(-2)}function FUe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,BUe).join("")}async function WUe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function zUe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await WUe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jf(t,e,n=!1){const r=FUe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await wG(t,`${e}-code-verifier`,s);const i=await zUe(r);return[i,r===i?"plain":"s256"]}const qUe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HUe(t){const e=t.headers.get(fP);if(!e||!e.match(qUe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function VUe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function GUe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KUe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zf(t){if(!KUe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var YUe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Nd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),QUe=[502,503,504];async function Xj(t){var e;if(!LUe(t))throw new pP(Nd(t),0);if(QUe.includes(t.status))throw new pP(Nd(t),t.status);let n;try{n=await t.json()}catch(i){throw new gG(Nd(i),i)}let r;const s=HUe(t);if(s&&s.getTime()>=pG["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yj(Nd(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ul}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Yj(Nd(n),t.status,n.weak_password.reasons);throw new CUe(Nd(n),t.status||500,r)}const JUe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Nt(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[fP]||(i[fP]=pG["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ZUe(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ZUe(t,e,n,r,s,i){const o=JUe(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new pP(Nd(c),0)}if(a.ok||await Xj(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await Xj(c)}}function Dc(t){var e;let n=null;nje(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=DUe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function e6(t){const e=Dc(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Jl(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function XUe(t){return{data:t,error:null}}function eje(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=YUe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function tje(t){return t}function nje(t){return t.access_token&&t.refresh_token&&t.expires_in}const bx=["global","local","others"];var rje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class sje{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=yG(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=bx[0]){if(bx.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bx.join(", ")}`);try{return await Nt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Jl})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=rje(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:eje,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(bt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jl})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:tje});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(bt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Zf(e);try{return await Nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jl})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Zf(e);try{return await Nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Jl})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Zf(e);try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Jl})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Zf(e.userId);try{const{data:n,error:r}=await Nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Zf(e.userId),Zf(e.id);try{return{data:await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}}const ije={getItem:t=>uw()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{uw()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{uw()&&globalThis.localStorage.removeItem(t)}};function t6(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function oje(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xf={debug:!!(globalThis&&uw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vG extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class aje extends vG{}async function cje(t,e,n){Xf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Xf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Xf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new aje(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xf.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}oje();const lje={url:wUe,storageKey:vUe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bUe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function n6(t,e,n){return await n()}class F0{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=F0.nextInstanceID,F0.nextInstanceID+=1,this.instanceID>0&&Go()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},lje),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new sje({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=yG(s.fetch),this.lock=s.lock||n6,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Go()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cje:this.lock=n6,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:uw()?this.storage=ije:(this.memoryStorage={},this.storage=t6(this.memoryStorage)):(this.memoryStorage={},this.storage=t6(this.memoryStorage)),Go()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fG}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=MUe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Go()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),IUe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return bt(n)?{error:n}:{error:new gG("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Dc}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(bt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Jf(this.storage,this.storageKey)),i=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Dc})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Dc})}else throw new i_("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(bt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:e6})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:e6})}else throw new i_("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new s_}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:w,wallet:y,statement:v,options:b}=e;let E;if(Go())if(typeof y=="object")E=y;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))E=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const C=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const A=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),v?{statement:v}:null));let I;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")I=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)I=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)p=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),g=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${C.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const A=await E.signMessage(new TextEncoder().encode(p),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:w,error:y}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:OUe(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Dc});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new s_}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(bt(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await a_(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Dc});if(await c_(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new s_}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(bt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Dc}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new s_}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Jf(this.storage,this.storageKey));const{error:d}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new i_("You must provide either an email or phone number.")}catch(a){if(bt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Dc});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jf(this.storage,this.storageKey)),await Nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:XUe})}catch(i){if(bt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ul;const{error:s}=await Nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(bt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Nt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Nt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new i_("You must provide either an email or phone number and a type")}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await a_(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<yx:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jl}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ul}:await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Jl})})}catch(n){if(bt(n))return AUe(n)&&(await this._removeSession(),await c_(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ul;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Jf(this.storage,this.storageKey));const{data:l,error:u}=await Nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Jl});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ul;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=vx(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(bt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ul;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Go())throw new o_("No browser detected.");if(e.error||e.error_description||e.error_code)throw new o_(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Kj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new o_("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kj("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new o_("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=cp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(bt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await a_(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(SUe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await c_(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=$Ue(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Jf(this.storage,this.storageKey,!0));try{return await Nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(bt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Nt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Go()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(bt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await jUe(async s=>(s>0&&await UUe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dc})),(s,i)=>{const o=200*Math.pow(2,s);return i&&wx(i)&&Date.now()+o-r<cp})}catch(r){if(this._debug(n,"error",r),bt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Go()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await a_(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<yx;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${yx}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),wx(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ul;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new vS;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ul;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),bt(i)){const o={session:null,error:i};return wx(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await wG(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await c_(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Go()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/cp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${cp}ms, refresh threshold is ${hP} ticks`),s<=hP&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof vG)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Go()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jf(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await Nt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vx(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+EUe>Date.now()))return r;const{data:s,error:i}=await Nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new lw("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new lw("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=vx(r);if(VUe(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=GUe(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,kUe(`${a}.${c}`)))throw new lw("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}}F0.nextInstanceID=0;const uje=F0;class dje extends uje{constructor(e){super(e)}}var hje=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class fje{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=mUe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:cUe,realtime:uUe,auth:Object.assign(Object.assign({},lUe),{storageKey:l}),global:aUe},d=yUe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=pUe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new RLe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new oLe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sUe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return hje(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dje({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new HLe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pje=(t,e,n)=>new fje(t,e,n),gje=void 0,mje=void 0,l_=pje(gje,mje,{realtime:{params:{eventsPerSecond:10}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),r6=aC().length>0?r2():null,s6=r6?D2(r6):null,zo=()=>{if(!s6)throw new Error("[FIREBASE] Database not initialized");return s6},Ri={async getGame(t){try{const e=zo(),n=$i(e,`chess_games/${t}`),r=await xp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){try{const n=zo(),r=$i(n,`chess_games/${t}`);await ap(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=zo(),r=$i(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=Lj(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){try{const e=zo(),n=$i(e,`chess_games/${t.game_id}`);await ap(n,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",t.game_id)}catch(e){console.error("[FIREBASE] Error creating game:",e)}},async getActiveGames(){try{const t=zo(),e=$i(t,"chess_games"),n=await xp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=zo(),e=$i(t,"chess_games"),n=await xp(e);if(!n.exists())return[];const r=n.val(),s=Object.values(r).filter(i=>i.game_state==="waiting"&&i.is_public&&!i.red_player);return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=zo(),n=$i(e,`chess_games/${t}`);await ap(n,null)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async migrateGame(t){try{const e=zo(),n=$i(e,`chess_games/${t.game_id}`);await ap(n,{...t,migrated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error migrating game:",e)}},async updateLeaderboard(t){try{const e=zo(),n=$i(e,`leaderboard/${t.username}`);await ap(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=zo(),e=$i(t,"leaderboard"),n=await xp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=zo(),n=$i(e,"leaderboard");return Lj(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},ep=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],Dl="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",xn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},_x={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Pc=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],yje=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function wje(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}const bG=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=uv(),[i,o]=k.useState(""),[a,c]=k.useState(""),[l,u]=k.useState(!1),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[g,w]=k.useState(!1),{writeContract:y,isPending:v,data:b}=SA(),{writeContract:E,isPending:C,data:A}=SA(),{writeContract:I,isPending:x,data:S}=SA(),O=tie(),{isLoading:P}=CA({hash:b}),{isLoading:j}=CA({hash:A}),{isLoading:q}=CA({hash:S}),{data:B}=f3({address:Dl,abi:ep,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:N}=f3({address:Dl,abi:ep,functionName:"games",args:B?[B]:void 0,query:{enabled:!!B&&B!=="0x000000000000"}}),T=async()=>{if(!r||!ce||!de){console.error("[CLAIM] Missing required data for claiming winnings");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",ce,"Player:",de);const{data:M,error:z}=await l_.from("chess_games").select("blue_player, red_player, winner").eq("game_id",ce).single();if(z||!M){console.error("[CLAIM] Error fetching game data:",z),alert("Failed to fetch game data. Please try again.");return}const V=M.winner==="blue"?M.blue_player:M.red_player;if(V!==r){console.error("[CLAIM] Player is not the winner"),alert("Only the winner can claim winnings.");return}const J="0x"+ce.slice(0,12);console.log("[CLAIM] Calling contract with:",{inviteCode:J,winner:V}),I({address:Dl,abi:ep,functionName:"endGame",args:[J,V]})}catch(M){console.error("[CLAIM] Error claiming winnings:",M),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[$,R]=k.useState(Pc),[D,U]=k.useState("blue"),[H,te]=k.useState(null),[oe,re]=k.useState([]),[ie,ye]=k.useState([]),[Z,Y]=k.useState("Waiting for opponent..."),[ue,ne]=k.useState(xn.LOBBY),[ce,$e]=k.useState(""),[de,we]=k.useState(null),[We,rt]=k.useState(null),[Yt,ln]=k.useState(0),[nn,Ft]=k.useState([]),[Bn,Jn]=k.useState(!1),[ds,Ai]=k.useState(null),[Nr,Ss]=k.useState(""),[Vr,id]=k.useState(0),[Lo,hf]=k.useState(!1),[wm,vm]=k.useState(!1),[bm,ff]=k.useState(!1),[od,gc]=k.useState(null),[En,pf]=k.useState(!1),[_m,Ea]=k.useState(!0),[gf,Wv]=k.useState(null),[zs,zv]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[bS,qv]=k.useState([]),[ad,_S]=k.useState(null),Ca=k.useRef(null),qs=k.useRef(null);k.useEffect(()=>{A&&!j&&ce&&de==="red"&&(console.log("[CONTRACT] Join transaction confirmed:",A),l_.from("chess_games").update({red_player:r,game_state:"active"}).eq("game_id",ce).eq("game_state","waiting").is("red_player",null).select().single().then(({data:M,error:z})=>{z?(console.error("Error updating game in database:",z),Y("Joined game on contract but failed to update database")):M?(console.log("[CONTRACT] Game joined successfully:",M),ne(xn.ACTIVE),Y("Game started!"),Aa(ce)):(console.log("[CONTRACT] Game already updated by another process"),ne(xn.ACTIVE),Y("Game started!"),Aa(ce))}))},[A,j,ce,de,r]),k.useEffect(()=>{b&&!P&&ds&&!ce&&(console.log("[CONTRACT] Create game transaction confirmed:",b),Ri.createGame(ds).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),$e(ds.game_id),we("blue"),ln(Vr),ne(xn.WAITING),Y("Waiting for opponent to join..."),Aa(ds.game_id),Ai(null),Jn(!1)}).catch(M=>{console.error("[FIREBASE] Error creating game after transaction:",M),Y("Transaction confirmed but failed to create game in database"),Ai(null),Jn(!1)}))},[b,P,ds,ce,Vr]),k.useEffect(()=>{v===!1&&ds&&!b&&(console.log("[CONTRACT] Create game transaction rejected or failed"),Y("Transaction was rejected. Please try again."),Ai(null),Jn(!1))},[v,ds,b]),k.useEffect(()=>{C===!1&&ce&&de==="red"&&!A&&(console.log("[CONTRACT] Join game transaction rejected or failed"),Y("Transaction was rejected. Please try again."),$e(""),we(null),ln(0),rt(null))},[C,ce,de,A]),k.useEffect(()=>{r&&B!==void 0&&(g||(B!=="0x000000000000"&&N||B==="0x000000000000")&&mf())},[r,B,N,g]),k.useEffect(()=>{w(!1)},[r]),k.useEffect(()=>()=>{Vv(),Ca.current&&Ca.current()},[]);const mf=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),B&&B!=="0x000000000000"&&!N){console.log("[GAME_STATE] Waiting for contract data...");return}if(B&&B!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",B),N)){console.log("[GAME_STATE] Raw contract game data:",N);let V,J,ae,Ge,He,ht;if(Array.isArray(N))[V,J,ae,Ge,He,ht]=N;else{console.error("[GAME_STATE] Unexpected contract data format:",N);return}console.log("[GAME_STATE] Parsed contract game data:",{player1:V,player2:J,isActive:ae,winner:Ge,inviteCode:He,wagerAmount:ht});const un=He?He.slice(2):null;if(!un){console.error("[GAME_STATE] Invalid invite code:",He);return}const yn=V===r?"blue":"red",qn=V===r?J:V;console.log("[GAME_STATE] Player is",yn,"opponent is",qn);const Cn=await Ri.getGame(un);if(Cn){if(console.log("[GAME_STATE] Found game in Firebase:",Cn),$e(Cn.game_id),we(yn),ln(parseFloat(Cn.bet_amount)),rt(qn),Cn.game_state==="waiting")ne(xn.WAITING),Y("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Cn.game_state==="active"||Cn.game_state==="test_update"){if(ne(xn.ACTIVE),Y("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Cn.game_state,")"),Cn.board){const no=Cn.board;R(mc(no)),U(Cn.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Cn.game_state,"- treating as active"),ne(xn.ACTIVE),Y("Game in progress"),Cn.board){const no=Cn.board;R(mc(no)),U(Cn.current_player||"blue")}Aa(Cn.game_id),w(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",ue),console.log("[GAME_STATE] Game state from Firebase:",Cn.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const no={game_id:un,game_title:`Game ${un.slice(0,8)}`,bet_amount:ht?ht.toString():"0",blue_player:V,red_player:J,game_state:ae?"active":"waiting",board:{positions:wf(Pc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Dl,is_public:!0};if(await Ri.createGame(no),console.log("[GAME_STATE] Successfully synced game to Firebase:",no),$e(no.game_id),we(yn),ln(parseFloat(no.bet_amount)),rt(qn),ae?(ne(xn.ACTIVE),Y("Game in progress")):(ne(xn.WAITING),Y("Waiting for opponent to join...")),no.board){const xG=no.board;R(mc(xG)),U(no.current_player||"blue")}Aa(no.game_id),w(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const z=(await Ri.getActiveGames()).filter(V=>V.chain==="sanko"&&(V.blue_player===r||V.red_player===r)&&["waiting","active"].includes(V.game_state));if(z&&z.length>0){const V=z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",V),$e(V.game_id),we(V.blue_player===r?"blue":"red"),ln(parseFloat(V.bet_amount)),rt(V.blue_player===r?V.red_player:V.blue_player),V.game_state==="waiting")ne(xn.WAITING),Y("Waiting for opponent to join...");else if(V.game_state==="active"||V.game_state==="test_update"){if(ne(xn.ACTIVE),Y("Game in progress"),V.board){const J=V.board;R(mc(J)),U(V.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",V.game_state,"- treating as active"),ne(xn.ACTIVE),Y("Game in progress"),V.board){const J=V.board;R(mc(J)),U(V.current_player||"blue")}Aa(V.game_id),w(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),ne(xn.LOBBY),Jn(!1),w(!0)}catch(M){console.error("[GAME_STATE] Error checking player game state:",M),ne(xn.LOBBY),Jn(!1),w(!0)}},ES=()=>{hf(!Lo),Lo?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},cd=async()=>{try{const M=await YV(20);qv(M)}catch(M){console.error("Error loading leaderboard:",M)}},yf=async M=>{if(console.log("[SCORE] updateScore called with:",M,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",zh(r)),await _C(r,M)?console.log("[SCORE] Successfully updated score for:",zh(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(z){console.error("[SCORE] Error updating score:",z)}},Sa=async(M,z,V)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:M,bluePlayer:z,redPlayer:V}),!z||!V){console.error("[SCORE] Missing player addresses from contract");return}await nLe(M,z,V)?(console.log("[SCORE] Successfully updated both players scores"),await cd()):console.error("[SCORE] Failed to update both players scores")}catch(J){console.error("[SCORE] Error updating both players scores:",J)}},Em=async()=>{try{const M=await Ri.getOpenGames();console.log("[FIREBASE] Loaded open games:",M),await Hv(M),Ft(M)}catch(M){console.error("Error loading open games:",M)}},Hv=async M=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const z of M)try{const V=z.invite_code;if(!V||typeof V!="string"||!V.startsWith("0x")||V.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",z.game_id,V);continue}const J=await O.readContract({address:Dl,abi:ep,functionName:"games",args:[V]});(!J||Array.isArray(J)&&J[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",z.game_id,"- removing from Firebase"),await Ri.deleteGame(z.game_id),console.log("[CLEANUP] Ghost game removed:",z.game_id))}catch(V){console.error("[CLEANUP] Error checking game:",z.game_id,V)}},ld=async()=>{if(!(!r||Vr<=0)){Jn(!0);try{const M=`game_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,z=wje(),V={game_id:M,invite_code:z,game_title:`Chess Game ${M.slice(-6)}`,bet_amount:Vr.toString(),blue_player:r,game_state:"waiting",board:{positions:wf(Pc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Dl,is_public:!0,created_at:new Date().toISOString()},J=z;console.log("[CONTRACT] Creating game with:",{gameId:M,bytes6InviteCode:J,wager:Vr}),y({address:Dl,abi:ep,functionName:"createGame",args:[J],value:BigInt(Math.floor(Vr*1e18))}),Ai(V),console.log("[CONTRACT] Transaction sent, waiting for confirmation..."),Y("Creating game... Please confirm transaction in your wallet.")}catch(M){console.error("Error creating game:",M),Y("Failed to create game. Please try again.")}finally{Jn(!1)}}},CS=async M=>{if(r)try{const z=await Ri.getGame(M);if(!z||z.game_state!=="waiting"){console.error("Game not found or already full:",z),Y("Game not found or already full");return}const V=parseFloat(z.bet_amount),J=z.invite_code;if(!J||typeof J!="string"||!J.startsWith("0x")||J.length!==14){Y("Invalid invite code for contract join.");return}console.log("[CONTRACT] Joining game with wager:",V),$e(M),we("red"),ln(V),rt(z.blue_player),Y("Joining game... Please confirm transaction in your wallet."),E({address:Dl,abi:ep,functionName:"joinGame",args:[J],value:BigInt(Math.floor(V*1e18))})}catch(z){console.error("Error joining game:",z),Y("Failed to join game. Please try again."),$e(""),we(null),ln(0),rt(null)}},[B2,SS]=k.useState(null),[F2,W2]=k.useState(""),[z2,q2]=k.useState(!0),Vv=()=>{console.log("[FIREBASE] No fallback to stop")},Aa=M=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",M),Ca.current&&(console.log("[FIREBASE] Removing existing subscription"),Ca.current());const z=Ri.subscribeToGame(M,V=>{if(console.log("[FIREBASE] Game update received:",V),V){console.log("[FIREBASE] Processing new game state:",V),console.log("[FIREBASE] Board object:",V.board);const J=V.board,ae=mc(J);let Ge=V.current_player||"blue";JSON.stringify(ae)===JSON.stringify(Pc)&&V.board&&V.board.positions&&(console.log("[FIREBASE] Board is in initial state - this is normal for a new game"),Ge!=="blue"&&(console.log("[FIREBASE] Fixing current player from",Ge,"to blue for initial board"),Ge="blue")),console.log("[FIREBASE] Final board to set:",ae),console.log("[FIREBASE] Current player from data:",V.current_player),console.log("[FIREBASE] Final current player:",Ge),console.log("[FIREBASE] Player color:",de),R(ae),U(Ge),V.game_state==="active"?(ne(xn.ACTIVE),Y("Game in progress")):V.game_state==="finished"&&(ne(xn.FINISHED),Y("Game finished")),V.blue_player&&V.red_player&&rt(de==="blue"?V.red_player:V.blue_player)}});Ca.current=z,console.log("[FIREBASE] Firebase subscription setup complete for game:",M)},wf=M=>{const z={};return M.forEach((V,J)=>{V.forEach((ae,Ge)=>{z[`${J}_${Ge}`]=ae})}),z},mc=M=>{if(!M||!M.positions)return console.warn("[BOARD] No board data available, using initial board"),Pc;if(console.log("[BOARD] Attempting to reconstruct board from:",M),console.log("[BOARD] Positions type:",typeof M.positions),console.log("[BOARD] Positions is array:",Array.isArray(M.positions)),console.log("[BOARD] Positions value:",M.positions),typeof M.positions=="object"&&!Array.isArray(M.positions)){const z=M.positions,V=M.rows||8,J=M.cols||8,ae=Array(V).fill(null).map(()=>Array(J).fill(null));for(let Ge=0;Ge<V;Ge++)for(let He=0;He<J;He++){const ht=`${Ge}_${He}`;ae[Ge][He]=z[ht]||null}return console.log("[BOARD] Reconstructed from flat structure:",ae),ae}return Array.isArray(M.positions)?(console.log("[BOARD] Found array structure, length:",M.positions.length),M.positions.length===8?M.positions.every((V,J)=>{const ae=Array.isArray(V)&&V.length===8;return ae||console.warn(`[BOARD] Row ${J} is invalid:`,V,"Type:",typeof V,"Length:",V==null?void 0:V.length),ae})?(console.log("[BOARD] Using legacy array structure"),M.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Pc):(console.warn("[BOARD] Array has wrong length:",M.positions.length,"expected 8"),Pc)):(console.warn("[BOARD] Unknown board structure, using initial board:",M),Pc)},Cm=M=>`${M.slice(0,6)}...${M.slice(-4)}`,hr=M=>M&&M===M.toUpperCase()?"red":"blue",yc=(M,z)=>M>=0&&M<8&&z>=0&&z<8,ud=(M,z)=>{const V=z==="red"?"K":"k";let J=-1,ae=-1;for(let He=0;He<8;He++){for(let ht=0;ht<8;ht++)if(M[He][ht]===V){J=He,ae=ht;break}if(J!==-1)break}return J===-1?!1:AS(J,ae,z==="red"?"blue":"red",M)},AS=(M,z,V,J)=>{if(!J||!Array.isArray(J)||J.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",J),!1;for(let ae=0;ae<8;ae++){if(!J[ae]||!Array.isArray(J[ae])||J[ae].length!==8)return console.warn("[SAFETY] Invalid board row structure:",J[ae]),!1;for(let Ge=0;Ge<8;Ge++){const He=J[ae][Ge];if(He&&hr(He)===V&&F(He,ae,Ge,M,z,!1,V,J,!0))return!0}}return!1},Gv=(M,z,V,J,ae,Ge=$)=>{const He=Ge[M][z];if(!He)return!1;const ht=Ge.map(un=>[...un]);return ht[V][J]=He,ht[M][z]=null,ud(ht,ae)},IS=(M,z,V,J,ae,Ge)=>{const He=M==="blue"?-1:1,ht=M==="blue"?6:1;if(!yc(J,ae)||M==="blue"&&J>=z||M==="red"&&J<=z)return!1;if(V===ae&&J===z+He)return Ge[J][ae]===null;if(V===ae&&z===ht&&J===z+2*He)return Ge[z+He][V]===null&&Ge[J][ae]===null;if(Math.abs(V-ae)===1&&J===z+He){const un=Ge[J][ae];if(un!==null&&hr(un)!==M)return!0;if(un===null&&zs.lastPawnDoubleMove){const{row:yn,col:qn}=zs.lastPawnDoubleMove;if(yn===z&&qn===ae){const Cn=Ge[z][ae];if(Cn&&Cn.toLowerCase()==="p"&&hr(Cn)!==M)return!0}}}return!1},Sm=(M,z,V,J,ae)=>M===V||z===J,Kv=(M,z,V,J)=>{const ae=Math.abs(M-V),Ge=Math.abs(z-J);return ae===2&&Ge===1||ae===1&&Ge===2},vf=(M,z,V,J,ae)=>Math.abs(M-V)===Math.abs(z-J),Am=(M,z,V,J,ae)=>Sm(M,z,V,J)||vf(M,z,V,J),xS=(M,z,V,J,ae)=>{const Ge=Math.abs(z-J),He=Math.abs(V-ae);if(Ge<=1&&He<=1)return!0;if(Ge===0&&He===2){if(M==="blue"&&!zs.blueKingMoved){if(ae===6&&!zs.blueRooksMove.right||ae===2&&!zs.blueRooksMove.left)return!0}else if(M==="red"&&!zs.redKingMoved&&(ae===6&&!zs.redRooksMove.right||ae===2&&!zs.redRooksMove.left))return!0}return!1},Im=(M,z,V,J,ae)=>{const Ge=M===V?0:(V-M)/Math.abs(V-M),He=z===J?0:(J-z)/Math.abs(J-z);let ht=M+Ge,un=z+He;for(;ht!==V||un!==J;){if(ae[ht][un]!==null)return!1;ht+=Ge,un+=He}return!0},F=(M,z,V,J,ae,Ge=!0,He=hr(M),ht=$,un=!1)=>{if(!M||!yc(J,ae))return!1;const yn=ht[J][ae];if(yn&&hr(yn)===He)return!1;let qn=!1;switch(M.toUpperCase()){case"P":qn=IS(He,z,V,J,ae,ht);break;case"R":qn=Sm(z,V,J,ae)&&Im(z,V,J,ae,ht);break;case"N":qn=Kv(z,V,J,ae);break;case"B":qn=vf(z,V,J,ae)&&Im(z,V,J,ae,ht);break;case"Q":qn=Am(z,V,J,ae)&&Im(z,V,J,ae,ht);break;case"K":qn=xS(He,z,V,J,ae);break}return!(!qn||Ge&&Gv(z,V,J,ae,He,ht))},K=(M,z=$,V=D)=>{const J=[],ae=z[M.row][M.col];if(!ae||hr(ae)!==V)return J;const Ge=ae.toLowerCase();if(Ge==="p"){const He=V==="blue"?-1:1,ht=V==="blue"?6:1,un=M.row+He;if(un>=0&&un<8&&F(ae,M.row,M.col,un,M.col,!0,V,z,!0)&&J.push({row:un,col:M.col}),M.row===ht){const yn=M.row+2*He;yn>=0&&yn<8&&F(ae,M.row,M.col,yn,M.col,!0,V,z,!0)&&J.push({row:yn,col:M.col})}for(const yn of[-1,1]){const qn=M.col+yn,Cn=M.row+He;qn>=0&&qn<8&&Cn>=0&&Cn<8&&F(ae,M.row,M.col,Cn,qn,!0,V,z,!0)&&J.push({row:Cn,col:qn})}}else if(Ge==="n"){const He=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[ht,un]of He){const yn=M.row+ht,qn=M.col+un;yn>=0&&yn<8&&qn>=0&&qn<8&&F(ae,M.row,M.col,yn,qn,!0,V,z,!0)&&J.push({row:yn,col:qn})}}else for(let He=0;He<8;He++)for(let ht=0;ht<8;ht++)F(ae,M.row,M.col,He,ht,!0,V,z,!0)&&J.push({row:He,col:ht});return J},X=(M,z=$)=>{if(!ud(z,M))return!1;for(let V=0;V<8;V++)for(let J=0;J<8;J++){const ae=z[V][J];if(ae&&hr(ae)===M&&K({row:V,col:J},z,M).length>0)return!1}return!0},ee=(M,z=$)=>{if(ud(z,M))return!1;for(let V=0;V<8;V++)for(let J=0;J<8;J++){const ae=z[V][J];if(ae&&hr(ae)===M&&K({row:V,col:J},z,M).length>0)return!1}return!0},Q=(M,z)=>{if(console.log("[CLICK] Square clicked:",{row:M,col:z}),console.log("[CLICK] Game mode:",ue,"Player color:",de),console.log("[CLICK] Current player:",D,"Player color:",de),ue!==xn.ACTIVE||!de){console.log("[CLICK] Game not active or no player color");return}const V=$[M][z],J=V?hr(V):null;if(console.log("[CLICK] Piece at square:",V,"Piece color:",J),D!==de){console.log("[CLICK] Not player's turn. Current:",D,"Player:",de);return}if(V&&J===de){te({row:M,col:z});const ae=K({row:M,col:z});re(ae);return}if(H&&oe.some(ae=>ae.row===M&&ae.col===z)){Ee(H,{row:M,col:z}),te(null),re([]);return}te(null),re([])},Ee=async(M,z)=>{if(!de||D!==de)return;const V=$[M.row][M.col];if(V){if(console.log("[PROMOTION] Checking pawn promotion:",{piece:V,pieceUpperCase:V.toUpperCase(),playerColor:de,toRow:z.row,isPawn:V.toUpperCase()==="P",redPromotion:de==="red"&&z.row===0,bluePromotion:de==="blue"&&z.row===7}),V.toUpperCase()==="P"&&(de==="red"&&z.row===0||de==="blue"&&z.row===7)){console.log("[PROMOTION] Showing promotion dialog for piece:",V,"at position:",z),gc({from:M,to:z}),ff(!0);return}await Ce(M,z)}},Ce=async(M,z,V="q")=>{if(!de||D!==de||!$[M.row][M.col])return;const Ge=$[z.row][z.col]!==null;if(kt(Ge?"capture":"move"),Ge){Wv({row:z.row,col:z.col,show:!0}),setTimeout(()=>{qe(M,z,V),Wv(null)},500);return}qe(M,z,V)},qe=async(M,z,V="q")=>{if(!de||D!==de)return;const J=$[M.row][M.col];if(!J)return;const ae=$.map(yn=>[...yn]);let Ge=J;J.toUpperCase()==="P"&&(de==="red"&&z.row===0||de==="blue"&&z.row===7)&&(Ge=de==="red"?V.toUpperCase():V.toLowerCase()),Zt(ae,M,z,J),ae[z.row][z.col]=Ge,ae[M.row][M.col]=null,Fn(M,z,J);const He=D==="blue"?"red":"blue";ud(ae,He)&&kt("check");let ht="active",un=null;X(He,ae)?(ht="finished",un=D,Y(`${D==="red"?"Red":"Blue"} wins by checkmate!`),kt("checkmate"),Mt(),console.log("[SCORE] Updating scores - Winner:",D,"Loser:",He),console.log("[SCORE] Contract game data:",N),console.log("[SCORE] Player game invite code:",B),N&&N.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Sa(D,N[0],N[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await yf(D===de?"win":"loss"),await cd()),un===de&&(console.log("[CONTRACT] Triggering automatic payout for winner:",un),setTimeout(()=>{T()},2e3))):ee(He,ae)&&(ht="finished",Y("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await yf("draw"));try{console.log("[DATABASE] Updating game in database:",{gameId:ce,board:{positions:ae},current_player:He,game_state:ht,winner:un,last_move:{from:M,to:z}});const yn={board:{positions:wf(ae),rows:8,cols:8},current_player:He,game_state:ht,winner:un,last_move:{from:M,to:z}};console.log("[FIREBASE] Storing data in Firebase:",yn),await Ri.updateGame(ce,yn),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(yn){console.error("[DATABASE] Error updating game:",yn)}R(ae),U(He),_S({from:M,to:z}),ff(!1),gc(null)},Mt=()=>{pf(!0),kt("victory"),qs.current&&clearTimeout(qs.current),qs.current=setTimeout(()=>{pf(!1)},5e3)},Zt=(M,z,V,J)=>{if(J.toLowerCase()==="p"&&(hr(J)==="blue"&&V.row===0||hr(J)==="red"&&V.row===7)){const ae=hr(J)==="blue"?"q":"Q";M[V.row][V.col]=ae}J.toLowerCase()==="k"&&Math.abs(z.col-V.col)===2&&(V.col===6?(M[z.row][7]=null,M[z.row][5]=hr(J)==="blue"?"r":"R"):V.col===2&&(M[z.row][0]=null,M[z.row][3]=hr(J)==="blue"?"r":"R")),J.toLowerCase()==="p"&&Math.abs(z.col-V.col)===1&&M[V.row][V.col]===null&&zs.lastPawnDoubleMove&&zs.lastPawnDoubleMove.row===z.row&&zs.lastPawnDoubleMove.col===V.col&&(M[z.row][V.col]=null)},Fn=(M,z,V)=>{const J={...zs};V.toLowerCase()==="k"?hr(V)==="blue"?J.blueKingMoved=!0:J.redKingMoved=!0:V.toLowerCase()==="r"&&(hr(V)==="blue"?(M.col===0&&(J.blueRooksMove.left=!0),M.col===7&&(J.blueRooksMove.right=!0)):(M.col===0&&(J.redRooksMove.left=!0),M.col===7&&(J.redRooksMove.right=!0))),V.toLowerCase()==="p"&&Math.abs(M.row-z.row)===2?J.lastPawnDoubleMove={row:z.row,col:z.col}:J.lastPawnDoubleMove=null,zv(J)},kt=M=>{if(_m)try{const z=new Audio(`/images/${M}.mp3`);z.volume=.3,z.play().catch(V=>console.warn("Audio play failed:",V))}catch(z){console.warn("Sound play failed:",z)}},xm=async()=>{if(ce)try{console.log("[RESET] Resetting corrupted game data for:",ce);const M={board:{positions:wf(Pc),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Ri.updateGame(ce,M),console.log("[RESET] Successfully reset game data"),Y("Game reset successfully. You can now make moves.")}catch(M){console.error("[RESET] Error resetting game data:",M),Y("Failed to reset game. Please try again.")}},_G=async M=>{try{const z=await Ri.getGame(M);if(!z){alert("Game not found");return}$e(M),we(r===z.blue_player?"blue":"red"),ln(parseFloat(z.bet_amount)),rt(r===z.blue_player?z.red_player:z.blue_player),ne(xn.ACTIVE),Y("Game resumed"),console.log("[DEBUG] Resuming game with board data:",z.board,"Type:",typeof z.board);const V=mc(z.board);console.log("[DEBUG] Final board state:",V),R(V),U(z.current_player||"blue"),Aa(M);const J=z.current_player||"blue";if(console.log("[DEBUG] Checking game state for player:",J),z.game_state==="active"&&!l){if(X(J,V)){console.log("[DEBUG] Checkmate detected for",J);const ae=J==="blue"?"red":"blue";Y(`${ae==="red"?"Red":"Blue"} wins by checkmate!`),ne(xn.FINISHED),u(!0);try{await Ri.updateGame(M,{game_state:"finished",winner:ae,updated_at:new Date().toISOString()}),console.log("[DEBUG] Game state updated successfully"),await yf(ae===de?"win":"loss"),await cd(),Mt(),ae===de?(h(!0),Y(`${ae==="red"?"Red":"Blue"} wins! Click "Claim Winnings" to receive your payout.`)):Y(`${ae==="red"?"Red":"Blue"} wins!`)}catch(Ge){console.error("Error in game resolution:",Ge),u(!1)}return}if(ee(J,V)){console.log("[DEBUG] Stalemate detected"),Y("Game ended in stalemate"),ne(xn.FINISHED);try{await Ri.updateGame(M,{game_state:"finished",game_result:"draw",updated_at:new Date().toISOString()}),console.log("[DEBUG] Game state updated successfully"),await yf("draw"),await cd()}catch(ae){console.error("Error in stalemate resolution:",ae)}return}}else if(z.game_state==="finished"){console.log("[DEBUG] Game already finished, showing result"),ne(xn.FINISHED),z.winner?(z.winner==="blue"?z.blue_player:z.red_player)===r?(h(!0),Y(`${z.winner==="red"?"Red":"Blue"} wins! Click "Claim Winnings" to receive your payout.`)):Y(`${z.winner==="red"?"Red":"Blue"} wins!`):z.game_result==="draw"&&Y("Game ended in draw");return}Aa(M)}catch(z){console.error("Error resuming game:",z)}},H2=async()=>{try{const{data:M,error:z}=await l_.from("chess_games").select("*").eq("game_state","active").or(`blue_player.eq.${r},red_player.eq.${r}`);if(z){console.error("Error checking stuck games:",z);return}if(M&&M.length>0){const V=M[0];(V.blue_player===r||V.red_player===r)&&confirm(`You have an active game (${V.game_id}). Would you like to resume it?`)&&_G(V.game_id)}}catch(M){console.error("Error checking stuck games:",M)}},EG=(M,z)=>{if(!$||!Array.isArray($)||$.length!==8||!$[M]||!Array.isArray($[M])||$[M].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:M,col:z,board:$}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${M}-${z}`);const V=$[M][z],J=(H==null?void 0:H.row)===M&&(H==null?void 0:H.col)===z,ae=oe.some(ht=>ht.row===M&&ht.col===z),Ge=ad&&(ad.from.row===M&&ad.from.col===z||ad.to.row===M&&ad.to.col===z),He=V&&V.toUpperCase()==="K"&&ud($,hr(V));return m.jsxs("div",{className:`square ${J?"selected":""} ${ae?"legal-move":""} ${Ge?"last-move":""} ${He?"square-in-check":""}`,onClick:()=>Q(M,z),children:[V&&m.jsx("div",{className:"piece",style:{backgroundImage:_x[V]?`url(${_x[V]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ae&&m.jsx("div",{className:"legal-move-indicator"})]},`${M}-${z}`)},CG=()=>{if(console.log("[PROMOTION] Rendering promotion dialog:",{showPromotion:bm,promotionMove:od,playerColor:de}),!bm||!od)return console.log("[PROMOTION] Not showing dialog - conditions not met"),null;const M=de==="red"?["Q","R","B","N"]:["q","r","b","n"];return console.log("[PROMOTION] Promotion pieces for",de,":",M),m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:M.map(z=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",z),Ce(od.from,od.to,z.toLowerCase()),ff(!1),gc(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:_x[z],alt:z,style:{width:"40px",height:"40px"}})},z))})]})})},SG=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:yje.map(M=>m.jsxs("div",{className:"piece-gallery-item",children:[m.jsx("img",{src:M.img,alt:M.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:M.name}),m.jsx("div",{className:"piece-gallery-desc",children:M.desc})]},M.key))})]}),V2=()=>m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",Cm(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsx("h3",{children:"Open Games"}),m.jsxs("div",{className:"games-list",children:[nn.map(M=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:M.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",parseFloat(M.bet_amount)," tDMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",Cm(M.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>CS(M.game_id),children:"Join Game"})]},M.game_id)),nn.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>Jn(!0),disabled:Bn,children:"Create New Game"}),m.jsx("button",{className:"resume-btn",onClick:H2,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"})]}),Bn&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Wager (tDMT):"}),m.jsx("input",{type:"number",value:Vr,onChange:M=>id(Number(M.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:ld,disabled:Vr<=0,children:"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>Jn(!1),children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),AG=()=>m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Game ID: ",m.jsx("strong",{children:ce})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",Yt," tDMT"]}),m.jsx("p",{children:"Share this game ID with your opponent"})]})]}),IG=()=>m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Multiplayer Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{onClick:ES,children:""}),e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-info",children:[m.jsx("span",{className:"status",children:Z}),m.jsxs("span",{className:"current-player",children:["Current: ",D==="red"?"Red":"Blue"]}),m.jsxs("span",{className:"wager-display",children:["Wager: ",Yt," tDMT"]}),We&&m.jsxs("span",{children:["Opponent: ",Cm(We)]}),ue===xn.FINISHED&&m.jsx("button",{onClick:T,disabled:f,style:{background:"rgba(255, 215, 0, 0.2)",border:"2px solid gold",color:"gold",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginLeft:"10px"},children:f?"Claiming...":"Claim Winnings"})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:ie.slice().reverse().map((M,z)=>m.jsx("div",{className:"move",children:M},ie.length-1-z))})]})}),m.jsxs("div",{className:"center-area",children:[m.jsxs("div",{className:"chessboard-container",children:[m.jsx("div",{className:"chessboard",children:Array.from({length:8},(M,z)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(V,J)=>EG(z,J))},z))}),gf&&gf.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${gf.row*12.5}%`,left:`${gf.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:m.jsx("div",{className:"explosion-effect",children:""})})]}),m.jsxs("div",{className:"game-controls",children:[m.jsxs("button",{onClick:()=>vm(!wm),children:[wm?"Hide":"Show"," Piece Gallery"]}),Z.includes("corrupted")&&m.jsx("button",{className:"reset-game-btn",onClick:xm,style:{backgroundColor:"#ff6b6b",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:" Reset Game"}),m.jsxs("div",{className:"sound-controls",children:[m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:_m,onChange:M=>Ea(M.target.checked)})," Sound Effects"]}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:En,onChange:M=>pf(M.target.checked)})," Victory Celebration"]})]}),d&&m.jsx("button",{className:"claim-winnings-btn",onClick:T,disabled:f||x||q,children:f||x||q?"Claiming...":"Claim Winnings"})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"#"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:bS.map((M,z)=>m.jsxs("tr",{children:[m.jsx("td",{children:z+1}),m.jsx("td",{children:M.username}),m.jsx("td",{children:M.wins}),m.jsx("td",{children:M.losses}),m.jsx("td",{children:M.draws}),m.jsx("td",{children:M.points})]},M.username))})]})})]})})]}),wm&&m.jsx("div",{className:"piece-gallery-panel",children:SG()}),CG(),En&&m.jsx("div",{className:"victory-celebration",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("h2",{children:" Victory! "}),m.jsx("p",{children:"Congratulations on your win!"})]})})]});switch(k.useEffect(()=>{cd(),Em(),H2();const M=setInterval(Em,5e3);return()=>{clearInterval(M),Ca.current&&l_.removeChannel(Ca.current),qs.current&&clearTimeout(qs.current)}},[]),console.log("[RENDER] Current game mode:",ue,"Game ID:",ce),ue){case xn.LOBBY:return V2();case xn.WAITING:return AG();case xn.ACTIVE:case xn.FINISHED:return IG();default:return V2()}},vje={AI:"ai"},u_={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},i6=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],bje=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],_je=()=>{const[t,e]=k.useState(!1),n=k.useRef(null),r=k.useRef(!1);k.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=k.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=k.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},Eje=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!1),s=k.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=k.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},Cje=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=uv(),[s,i]=k.useState(vje.AI),[o,a]=k.useState(()=>JSON.parse(JSON.stringify(i6))),[c,l]=k.useState("blue"),[u,d]=k.useState(null),[h,f]=k.useState("active"),[p,g]=k.useState("hard"),[w,y]=k.useState("Connect wallet to play"),[v,b]=k.useState([]),[E,C]=k.useState([]),[A,I]=k.useState([]),[x,S]=k.useState(null),[O,P]=k.useState(!1),[j,q]=k.useState(!1),[B,N]=k.useState(null),[T,$]=k.useState(null),[R]=k.useState(""),[D]=k.useState(.1),[U,H]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),te=k.useRef(null),oe=k.useRef(!1),re=k.useRef(o),ie=k.useRef(null),ye=k.useRef(null),Z=k.useRef(!1),Y=k.useRef(!1),[ue,ne]=k.useState(!1),[ce,$e]=k.useState(!1),[de,we]=k.useState(!1),[We,rt]=k.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Yt=()=>{rt(F=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!F)),!F))},{stockfishReady:ln}=_je(),{getOpeningData:nn}=Eje(),[Ft,Bn]=k.useState("loading"),[Jn,ds]=k.useState(!1),[Ai,Nr]=k.useState([]),[Ss,Vr]=k.useState(!1),[id,Lo]=k.useState("/images/chessboard1.png"),[hf,wm]=k.useState(!0),[vm,bm]=k.useState(!1),ff=()=>{const F=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*F.length),X=F[K];return console.log("[DEBUG] Random chessboard selected:",X,"(index:",K,")"),X};k.useEffect(()=>{if(ln)Bn("ready");else{const F=window.setTimeout(()=>{ln||(Bn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(F)}},[ln]),k.useEffect(()=>{re.current=o},[o]),k.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),P(!1))},[r]),k.useEffect(()=>(!te.current&&typeof Worker<"u"&&(te.current=new Worker("/aiWorker.js"),te.current.onmessage=F=>{console.log("[DEBUG] AI worker response received:",F.data);const{move:K,nodes:X}=F.data;K&&oe.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",X,"nodes"),oe.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),ie.current&&ie.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},te.current.onerror=F=>{console.error("[DEBUG] AI worker error:",F),y("AI worker error - using fallback mode"),oe.current=!1}),()=>{te.current&&(te.current.terminate(),te.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),k.useEffect(()=>{od()},[]);const od=async()=>{try{const F=await YV(20);C(F),console.log("Leaderboard data loaded:",F)}catch(F){y("Failed to load leaderboard"),console.error("Leaderboard error:",F)}},gc=async F=>{if(console.log("[DEBUG] updateScore called with:",F),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",zh(r)),await _C(r,F)?(console.log("[DEBUG] Successfully updated score for:",zh(r)),await od()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},En=F=>F&&F===F.toUpperCase()?"red":"blue",pf=(F,K)=>F>=0&&F<8&&K>=0&&K<8,_m=(F,K)=>`${String.fromCharCode(97+K)}${8-F}`,Ea=(F,K)=>{const X=K==="blue"?"k":"K";let ee=null;for(let Ce=0;Ce<8;Ce++){for(let qe=0;qe<8;qe++)if(F[Ce][qe]===X){ee={row:Ce,col:qe};break}if(ee)break}if(!ee)return console.log(`King not found for ${K}`),!1;const Q=K==="blue"?"red":"blue",Ee=gf(ee.row,ee.col,Q,F);return console.log(`${K} king at ${ee.row},${ee.col} under attack: ${Ee}`),Ee},gf=(F,K,X,ee)=>{for(let Q=0;Q<8;Q++)for(let Ee=0;Ee<8;Ee++){const Ce=ee[Q][Ee];if(Ce&&En(Ce)===X&&qs(Ce,Q,Ee,F,K,!1,X,ee,!0))return!0}return!1},Wv=(F,K,X,ee,Q,Ee=o)=>{const Ce=Ee.map(Mt=>[...Mt]),qe=Ce[F][K];return Ce[X][ee]=qe,Ce[F][K]=null,Ea(Ce,Q)},zs=(F,K,X,ee,Q,Ee)=>{const Ce=F==="blue"?-1:1,qe=F==="blue"?6:1;if(!pf(ee,Q)||F==="blue"&&ee>=K||F==="red"&&ee<=K)return!1;const Mt=Math.abs(ee-K),Zt=Math.abs(Q-X);if((Mt===1&&Zt===0||Mt===2&&Zt===0&&K===qe||Mt===1&&Zt===1)&&Mt<=2&&Zt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:F,from:`${K},${X}`,to:`${ee},${Q}`}),X===Q&&ee===K+Ce)return Ee[ee][Q]===null;if(X===Q&&K===qe&&ee===K+2*Ce)return Ee[K+Ce][X]===null&&Ee[ee][Q]===null;if(Math.abs(X-Q)===1&&ee===K+Ce){const kt=Ee[ee][Q];return kt!==null&&En(kt)!==F}if(Math.abs(X-Q)===1&&ee===K+Ce){const kt=Ee[K][Q];if(kt&&En(kt)!==F&&kt.toLowerCase()==="p"&&U.lastPawnDoubleMove&&U.lastPawnDoubleMove.row===K&&U.lastPawnDoubleMove.col===Q)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},zv=(F,K,X,ee,Q)=>F!==X&&K!==ee?!1:Ca(F,K,X,ee,Q),bS=(F,K,X,ee)=>{const Q=Math.abs(F-X),Ee=Math.abs(K-ee);return Q===2&&Ee===1||Q===1&&Ee===2},qv=(F,K,X,ee,Q)=>Math.abs(F-X)!==Math.abs(K-ee)?!1:Ca(F,K,X,ee,Q),ad=(F,K,X,ee,Q)=>zv(F,K,X,ee,Q)||qv(F,K,X,ee,Q),_S=(F,K,X,ee,Q)=>{const Ee=Math.abs(K-ee),Ce=Math.abs(X-Q);if(Ee<=1&&Ce<=1)return!0;if(Ee===0&&Ce===2){if(F==="blue"&&!U.blueKingMoved){if(Q===6&&!U.blueRooksMove.right||Q===2&&!U.blueRooksMove.left)return!0}else if(F==="red"&&!U.redKingMoved&&(Q===6&&!U.redRooksMove.right||Q===2&&!U.redRooksMove.left))return!0}return!1},Ca=(F,K,X,ee,Q)=>{const Ee=F===X?0:(X-F)/Math.abs(X-F),Ce=K===ee?0:(ee-K)/Math.abs(ee-K);let qe=F+Ee,Mt=K+Ce;for(;qe!==X||Mt!==ee;){if(Q[qe][Mt]!==null)return!1;qe+=Ee,Mt+=Ce}return!0},qs=(F,K,X,ee,Q,Ee=!0,Ce=En(F),qe=o,Mt=!1)=>{if(!pf(ee,Q))return Mt||console.log("[ILLEGAL MOVE] Out of board:",{piece:F,startRow:K,startCol:X,endRow:ee,endCol:Q}),!1;const Zt=qe[ee][Q];if(Zt&&En(Zt)===Ce)return Mt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:F,startRow:K,startCol:X,endRow:ee,endCol:Q}),!1;const Fn=F.toLowerCase();let kt=!1;switch(Fn){case"p":kt=zs(Ce,K,X,ee,Q,qe);break;case"r":kt=zv(K,X,ee,Q,qe);break;case"n":kt=bS(K,X,ee,Q);break;case"b":kt=qv(K,X,ee,Q,qe);break;case"q":kt=ad(K,X,ee,Q,qe);break;case"k":kt=_S(Ce,K,X,ee,Q);break}return kt?kt&&Ee&&Wv(K,X,ee,Q,Ce,qe)?(Mt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:F,startRow:K,startCol:X,endRow:ee,endCol:Q}),!1):kt:(Mt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:F,startRow:K,startCol:X,endRow:ee,endCol:Q,playerColor:Ce,pieceType:Fn,targetPiece:qe[ee][Q],targetPieceColor:qe[ee][Q]?En(qe[ee][Q]):null}),!1)},mf=(F,K=o,X=c)=>{const ee=[],Q=K[F.row][F.col];if(!Q||En(Q)!==X)return ee;const Ee=Q.toLowerCase();if(Ee==="p"){const Ce=X==="blue"?-1:1,qe=X==="blue"?6:1,Mt=F.row+Ce;if(Mt>=0&&Mt<8&&qs(Q,F.row,F.col,Mt,F.col,!0,X,K,!0)&&ee.push({row:Mt,col:F.col}),F.row===qe){const Zt=F.row+2*Ce;Zt>=0&&Zt<8&&qs(Q,F.row,F.col,Zt,F.col,!0,X,K,!0)&&ee.push({row:Zt,col:F.col})}for(const Zt of[-1,1]){const Fn=F.col+Zt,kt=F.row+Ce;Fn>=0&&Fn<8&&kt>=0&&kt<8&&qs(Q,F.row,F.col,kt,Fn,!0,X,K,!0)&&ee.push({row:kt,col:Fn})}}else if(Ee==="n"){const Ce=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[qe,Mt]of Ce){const Zt=F.row+qe,Fn=F.col+Mt;Zt>=0&&Zt<8&&Fn>=0&&Fn<8&&qs(Q,F.row,F.col,Zt,Fn,!0,X,K,!0)&&ee.push({row:Zt,col:Fn})}}else for(let Ce=0;Ce<8;Ce++)for(let qe=0;qe<8;qe++)qs(Q,F.row,F.col,Ce,qe,!0,X,K,!0)&&ee.push({row:Ce,col:qe});return ee},ES=(F,K=o)=>{if(!Ea(K,F))return!1;for(let X=0;X<8;X++)for(let ee=0;ee<8;ee++){const Q=K[X][ee];if(Q&&En(Q)===F&&mf({row:X,col:ee},K,F).length>0)return!1}return!0},cd=(F,K=o)=>{if(Ea(K,F))return!1;for(let X=0;X<8;X++)for(let ee=0;ee<8;ee++){const Q=K[X][ee];if(Q&&En(Q)===F&&mf({row:X,col:ee},K,F).length>0)return!1}return!0},yf=(F,K)=>{if(h!=="active"||oe.current)return;const X=o[F][K],ee=X?En(X):null;if(u&&A.some(Q=>Q.row===F&&Q.col===K)){Sa(u,{row:F,col:K});return}if(X&&ee===c){const Q=mf({row:F,col:K});d({row:F,col:K}),I(Q);return}d(null),I([])},Sa=(F,K,X=!1)=>{const ee=o[F.row][F.col];if(console.log("[MOVE ATTEMPT]",{from:F,to:K,piece:ee,isAIMove:X,board:JSON.parse(JSON.stringify(o)),moveHistory:v}),!!ee){if(ee.toLowerCase()==="p"&&(En(ee)==="blue"&&K.row===0||En(ee)==="red"&&K.row===7)){N({from:F,to:K}),q(!0);return}hr(F,K,"q",X)}};ie.current=Sa;const Em=k.useCallback((F,K,X=!1)=>{Vr(!0);const ee=o.map(Ce=>[...Ce]),Q=ee[F.row][F.col];if(!Q)return;ee[K.row][K.col]=Q,ee[F.row][F.col]=null,wf(ee,F,K,Q);const Ee=mc(F,K);if(b(Ce=>{const qe=[...Ce,Ee];return console.log("[MOVE HISTORY UPDATED]",qe),qe}),S({from:F,to:K}),d(null),I([]),v.length<10&&!X){const Ce=o6(ee,c==="blue"?"red":"blue");nn(Ce).then(qe=>{qe&&qe.moves&&qe.moves.length>0&&(Nr(qe.moves.slice(0,3)),ds(!0),setTimeout(()=>ds(!1),5e3))})}Cm(F,K,Q),l(Ce=>{const qe=Ce==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",qe),Hv(ee,qe),qe}),Hv(ee,c==="blue"?"red":"blue"),a(ee),oe.current=!1,Z.current=!1,Y.current=!1,Vr(!1)},[o,c,v,nn]);k.useEffect(()=>{if(!oe.current&&s==="ai"&&c==="red"&&!Z.current&&!Ss)if(oe.current=!0,p==="easy")setTimeout(()=>{const F=ld(o);F?Sa(F.from,F.to,!0):oe.current=!1},600);else{y("AI is calculating...");const F=o6(o,c);if(Y.current)return;Y.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:F,difficulty:p,movetime:3e3})}).then(X=>{if(X.ok)return X.json();throw new Error("API call failed")}).then(X=>{console.log("[DEBUG] Stockfish API response:",X);const ee=X.bestmove||X.move;if(ee&&ee!=="(none)"&&ee.length===4){const Q=ee.charCodeAt(0)-97,Ee=parseInt(ee[1]),Ce=ee.charCodeAt(2)-97,qe=parseInt(ee[3]),Mt=8-Ee,Zt=8-qe;if(console.log("[DEBUG] Parsed move:",{fromCol:Q,fromRowStockfish:Ee,toCol:Ce,toRowStockfish:qe,fromRow:Mt,toRow:Zt}),Q>=0&&Q<8&&Mt>=0&&Mt<8&&Ce>=0&&Ce<8&&Zt>=0&&Zt<8){const Fn={from:{row:Mt,col:Q},to:{row:Zt,col:Ce}},kt=o[Mt][Q];if(console.log("[DEBUG] Move validation:",{piece:kt,moveObj:Fn,isValid:kt&&En(kt)==="red"&&qs(kt,Mt,Q,Zt,Ce,!0,"red",o)}),kt&&En(kt)==="red"&&qs(kt,Mt,Q,Zt,Ce,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",Fn),Sa(Fn.from,Fn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const xm=ld(o);xm&&Sa(xm.from,xm.to,!0),oe.current=!1,Y.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Fn=ld(o);Fn&&Sa(Fn.from,Fn.to,!0),oe.current=!1,Y.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const Q=ld(o);Q&&Sa(Q.from,Q.to,!0),oe.current=!1,Y.current=!1}}).catch(X=>{console.error("[DEBUG] Stockfish API error:",X),y("AI error. Falling back to random moves.");const ee=ld(o);ee&&Sa(ee.from,ee.to,!0),oe.current=!1,Y.current=!1})}},[c,s,p,o,U,ln]);const Hv=(F,K)=>{console.log("Checking game end for player:",K);const X=F.some(Q=>Q.some(Ee=>Ee==="k")),ee=F.some(Q=>Q.some(Ee=>Ee==="K"));if(!X)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),gc("loss"),we(!0),setTimeout(()=>we(!1),3e3),"checkmate";if(!ee)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),gc("win"),we(!0),setTimeout(()=>we(!1),3e3),"checkmate";if(console.log("Is king in check:",Ea(F,K)),ES(K,F)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("checkmate");const Q=K==="blue"?"red":"blue";return Q==="blue"?(y("Checkmate! You win!"),yc("checkmate"),Gv(!0),ud(),gc("win"),we(!0),setTimeout(()=>we(!1),3e3)):(y(`Checkmate! ${Q==="red"?"AI":"Opponent"} wins!`),yc("checkmate"),Sm(!0),gc("loss"),we(!0),setTimeout(()=>we(!1),3e3)),"checkmate"}return cd(K,F)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("stalemate"),y("Stalemate! Game is a draw."),gc("draw"),we(!0),setTimeout(()=>we(!1),3e3),"stalemate"):(Ea(F,K)?(console.log("CHECK detected!"),yc("check"),y(`${K==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},ld=F=>{const K=[];for(let Q=0;Q<8;Q++)for(let Ee=0;Ee<8;Ee++){const Ce=F[Q][Ee];Ce&&En(Ce)==="red"&&K.push({row:Q,col:Ee})}for(let Q=K.length-1;Q>0;Q--){const Ee=Math.floor(Math.random()*(Q+1));[K[Q],K[Ee]]=[K[Ee],K[Q]]}const X=[],ee=[];for(const Q of K){const Ee=mf(Q,F,"red");for(const Ce of Ee){const qe=F[Ce.row][Ce.col];if(qe&&En(qe)==="blue"){const Zt={p:100,n:320,b:330,r:500,q:900,k:2e4}[qe.toLowerCase()]||0;X.push({from:Q,to:Ce,value:Zt})}else ee.push({from:Q,to:Ce})}}if(X.length>0&&Math.random()<.3){X.sort((Q,Ee)=>Q.value-Ee.value);for(const Q of X){const Ee=F.map(qe=>[...qe]),Ce=Ee[Q.from.row][Q.from.col];if(Ee[Q.to.row][Q.to.col]=Ce,Ee[Q.from.row][Q.from.col]=null,!Ea(Ee,"red"))return{from:Q.from,to:Q.to}}}for(const Q of ee){const Ee=F.map(qe=>[...qe]),Ce=Ee[Q.from.row][Q.from.col];if(Ee[Q.to.row][Q.to.col]=Ce,Ee[Q.from.row][Q.from.col]=null,!Ea(Ee,"red"))return Q}X.sort((Q,Ee)=>Q.value-Ee.value);for(const Q of X){const Ee=F.map(qe=>[...qe]),Ce=Ee[Q.from.row][Q.from.col];if(Ee[Q.to.row][Q.to.col]=Ce,Ee[Q.from.row][Q.from.col]=null,!Ea(Ee,"red"))return{from:Q.from,to:Q.to}}return null},CS=()=>{a(JSON.parse(JSON.stringify(i6))),l("blue"),d(null),f("active"),b([]),I([]),S(null),P(!1),y("Select game mode"),H({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Lo(ff()),oe.current&&(oe.current=!1)},B2=()=>{if(xS(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){P(!1),ne(!1);return}P(!0),ne(!1),y("Game started! Your turn");const F=ff();Lo(F),console.log("[DEBUG] Game started with chessboard:",F)},SS=F=>`${F.slice(0,6)}...${F.slice(-4)}`,F2=(F,K)=>{const X=o[F][K],ee=(u==null?void 0:u.row)===F&&(u==null?void 0:u.col)===K,Q=A.some(Ce=>Ce.row===F&&Ce.col===K),Ee=x&&(x.from.row===F&&x.from.col===K||x.to.row===F&&x.to.col===K);return m.jsxs("div",{className:`square ${ee?"selected":""} ${Q?"legal-move":""} ${Ee?"last-move":""}`,onClick:()=>yf(F,K),children:[X&&m.jsx("div",{className:"piece",style:{backgroundImage:u_[X]?`url(${u_[X]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Q&&m.jsx("div",{className:"legal-move-indicator"})]},`${F}-${K}`)},W2=()=>{if(!j||!B)return null;const F=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:F.map(K=>m.jsx("div",{className:"promotion-piece",onClick:()=>{hr(B.from,B.to,K),q(!1),N(null)},style:{backgroundImage:u_[K]?`url(${u_[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[z2,q2]=k.useState(null),Vv=(F=!1,K="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${F?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:bje.map(X=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>q2(X.key),children:[m.jsx("img",{src:X.img,alt:X.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:X.name}),z2===X.key&&m.jsx("div",{className:"piece-gallery-desc",children:X.desc})]},X.key))}),m.jsx("div",{className:"piece-gallery-tip",children:K})]}),Aa=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{B2()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),wf=(F,K,X,ee)=>{if(ee.toLowerCase()==="p"&&(En(ee)==="blue"&&X.row===0||En(ee)==="red"&&X.row===7)){const Q=En(ee)==="blue"?"q":"Q";F[X.row][X.col]=Q}ee.toLowerCase()==="k"&&Math.abs(K.col-X.col)===2&&(X.col===6?(F[K.row][7]=null,F[K.row][5]=En(ee)==="blue"?"r":"R"):X.col===2&&(F[K.row][0]=null,F[K.row][3]=En(ee)==="blue"?"r":"R"))},mc=(F,K,X,ee)=>{const Q=_m(F.row,F.col),Ee=_m(K.row,K.col);return`${Q}-${Ee}`},Cm=(F,K,X)=>{const ee={...U};X.toLowerCase()==="k"?En(X)==="blue"?ee.blueKingMoved=!0:ee.redKingMoved=!0:X.toLowerCase()==="r"&&(En(X)==="blue"?(F.col===0&&(ee.blueRooksMove.left=!0),F.col===7&&(ee.blueRooksMove.right=!0)):(F.col===0&&(ee.redRooksMove.left=!0),F.col===7&&(ee.redRooksMove.right=!0))),X.toLowerCase()==="p"&&Math.abs(F.row-K.row)===2?ee.lastPawnDoubleMove={row:K.row,col:K.col}:ee.lastPawnDoubleMove=null,H(ee)},hr=(F,K,X="q",ee=!1)=>{o[F.row][F.col];const Ee=o[K.row][K.col]!==null;if(yc(Ee?"capture":"move"),Ee){$({row:K.row,col:K.col,show:!0}),setTimeout(()=>{Em(F,K,ee),$(null)},500);return}Em(F,K,ee)},yc=F=>{if(!hf)return;let K="";switch(F){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},ud=()=>{if(vm){yc("victory");for(let F=0;F<50;F++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},F*100);setTimeout(()=>bm(!1),5e3)}},[AS,Gv]=k.useState(!1),[IS,Sm]=k.useState(!1),Kv=()=>{Gv(!1),Sm(!1)},vf=()=>{Kv(),CS()},Am=()=>{Kv(),P(!1)},xS=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Im=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${We?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""}),m.jsx("button",{className:"dark-mode-toggle",onClick:Yt,title:We?"Switch to light mode":"Switch to dark mode","aria-label":We?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:We?"":""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[O&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:w}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:v.slice().reverse().map((F,K)=>m.jsx("li",{children:F},v.length-1-K))})]})]}),!O&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(E)&&E.slice(0,10).map((F,K)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const X=F;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:SS(X.username)}),m.jsx("td",{children:X.wins}),m.jsx("td",{children:X.losses}),m.jsx("td",{children:X.draws}),m.jsx("td",{children:X.points})]},X.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s==="ai"?"NA":`${D} ETH`}),O&&!ue&&m.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&m.jsxs("span",{className:`stockfish-status ${Ft}`,children:["LawbBot: ",Ft==="loading"?"Loading...":Ft==="ready"?"Ready":"Failed"]}),p==="hard"&&m.jsxs("span",{className:`stockfish-status ${Ft}`,children:["LawbBot: ",Ft==="loading"?"Loading...":Ft==="ready"?"Ready":"Failed"]}),Jn&&Ai.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),Ai.map((F,K)=>m.jsxs("span",{className:"opening-move",children:[F.san," (",Math.round(F.white+F.draws+F.black)," games)"]},K))]})]})}),O?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${id})`},children:[Array.from({length:8},(F,K)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(X,ee)=>F2(K,ee))},K)),T&&T.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${T.row*12.5}%`,left:`${T.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>$e(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:vf,children:"New Game"}),m.jsx("button",{onClick:Am,children:"Back to Menu"})]}),m.jsxs("div",{className:"epic-controls",children:[m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:hf,onChange:F=>wm(F.target.checked)}),m.jsx("label",{htmlFor:"sound-toggle",children:" Sound Effects"})]}),m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:vm,onChange:F=>bm(F.target.checked)}),m.jsx("label",{htmlFor:"victory-toggle",children:" Victory Celebration"})]})]})]}):ue?Aa():s==="online"?m.jsx(bG,{onClose:t,onMinimize:e,fullscreen:n}):m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-section",children:[m.jsx("button",{className:`mode-btn ${Im?"selected":""}`,onClick:()=>i("online"),children:"PvP"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>ne(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:O?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(E)&&E.slice(0,10).map((F,K)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const X=F;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:SS(X.username)}),m.jsx("td",{children:X.wins}),m.jsx("td",{children:X.losses}),m.jsx("td",{children:X.draws}),m.jsx("td",{children:X.points})]},X.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:Vv(!1)})})]}),ce&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>$e(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:F=>F.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>$e(!1),children:""}),Vv(!1)]})}),W2(),de&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),AS&&vm&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:vf,children:"New Game"}),m.jsx("button",{onClick:Am,children:"Back to Menu"})]})]}),IS&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(F=>m.jsx("div",{className:"blood-drip",style:{left:`${10+F*14}%`,animationDelay:`${.5+F*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},F))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:vf,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Am,children:"Back to Menu"})]})]})]})]})};function o6(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const a6=()=>{const[t,e]=k.useState("singleplayer");return m.jsxs("div",{className:"chess-page",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h1",{children:" Chess"}),m.jsxs("div",{className:"mode-toggle",children:[m.jsx("button",{className:`mode-btn ${t==="singleplayer"?"active":""}`,onClick:()=>e("singleplayer"),children:"Single Player"}),m.jsx("button",{className:`mode-btn ${t==="multiplayer"?"active":""}`,onClick:()=>e("multiplayer"),children:"Multiplayer"})]})]}),m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(Cje,{onClose:()=>{}}):m.jsx(bG,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})]})},Sje={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"};let Ex;if(aC().length===0)try{Ex=TH(Sje),console.log("[FIREBASE] Firebase initialized successfully");const t=D2(Ex);console.log("[FIREBASE] Database connection established")}catch(t){console.error("[FIREBASE] Firebase initialization error:",t)}else Ex=aC()[0],console.log("[FIREBASE] Firebase already initialized");const Aje=new _se,Ije=typeof window<"u"&&window.location.hostname.startsWith("chess."),xje=()=>Tke("(max-width: 768px)")?m.jsx(xke,{}):m.jsx(vke,{});Cx.createRoot(document.getElementById("root")).render(m.jsx(zi.StrictMode,{children:m.jsx(Lre,{config:gH.wagmiConfig,children:m.jsx(Bse,{client:Aje,children:m.jsx(yke,{children:m.jsx(pke,{children:Ije?m.jsx(q_,{path:"/*",element:m.jsx(a6,{})}):m.jsxs(m.Fragment,{children:[m.jsx(q_,{path:"/",element:m.jsx(xje,{})}),m.jsx(q_,{path:"/chess",element:m.jsx(a6,{})})]})})})})})}));export{Q6e as $,Ue as A,st as B,Re as C,Qe as D,Vy as E,BN as F,_y as G,ta as H,Gde as I,fn as J,X6e as K,$R as L,Fr as M,zde as N,pe as O,Sl as P,B_ as Q,At as R,sa as S,oi as T,She as U,Yy as V,ss as W,K6e as X,jr as Y,qh as Z,nr as _,W_ as a,jq as a0,MR as a1,Pg as a2,ar as a3,Hje as a4,Vc as a5,ic as a6,Gw as a7,ze as a8,vr as a9,gP as aA,Uje as aB,Rw as aC,tZ as aD,Are as aE,Oo as aF,Po as aG,OF as aH,Ste as aI,Fl as aa,IF as ab,i1 as ac,he as ad,_k as ae,Ir as af,pX as ag,XC as ah,kk as ai,vX as aj,ov as ak,xo as al,nd as am,jy as an,sc as ao,G_e as ap,L6e as aq,_M as ar,yz as as,L_e as at,K_e as au,U6e as av,M6e as aw,B1 as ax,B6e as ay,j6e as az,gn as b,Pe as c,Ye as d,L as e,zn as f,Gc as g,Z6e as h,el as i,Bi as j,it as k,ai as l,Pbe as m,Ya as n,$Re as o,je as p,Wa as q,J6e as r,Qt as s,KW as t,Un as u,s5 as v,to as w,G6e as x,Cs as y,_s as z};
