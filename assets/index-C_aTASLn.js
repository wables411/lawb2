const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BvhL_akC.js","assets/if-defined-DnMioUjr.js","assets/index-DZvJNH_x.js","assets/index-BSnzCaQN.js","assets/ref-CBbg3ocR.js","assets/index-Bc8ALv42.js","assets/index-BEEIFyI7.js","assets/index-Cob_VsRs.js","assets/index-mEkC9C5R.js","assets/index-D_Q-UTPL.js","assets/index-DKY14rPM.js","assets/index-J_qIHZG_.js","assets/email-DkY_FQH3.js","assets/index-DPsgYXQ1.js","assets/socials-C8eUZo3B.js","assets/index-CdurfOyu.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BCYLZArJ.js","assets/index-BP0UvtqV.js","assets/index-Dcp9Udhk.js","assets/index-Dkcaucl_.js","assets/swaps-TUtewZu5.js","assets/index-B2UnKh9u.js","assets/index-Bto_nrsL.js","assets/index-_PJgUJAx.js","assets/send-CYmoFD2A.js","assets/index-CunFJmXM.js","assets/index-BLTowolR.js","assets/receive-Db15fJQ4.js","assets/index-B67QjOFx.js","assets/onramp-WKK90QDI.js","assets/index-Bxg6TCSP.js","assets/index-BSzcpoAd.js","assets/index-DuNZWd-_.js","assets/transactions-P7wO-tyh.js","assets/index-FxJNBhs0.js","assets/index-D9XpWNfz.js","assets/index-BCaGE41r.js","assets/index-xhjrTBUS.js","assets/index-DTufvONz.js","assets/w3m-modal-DijlfCRw.js"])))=>i.map(i=>d[i]);
var Zle=Object.defineProperty;var DF=t=>{throw TypeError(t)};var Xle=(t,e,n)=>e in t?Zle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>Xle(t,typeof e!="symbol"?e+"":e,n),gO=(t,e,n)=>e.has(t)||DF("Cannot "+n);var k=(t,e,n)=>(gO(t,e,"read from private field"),n?n.call(t):e.get(t)),se=(t,e,n)=>e.has(t)?DF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),q=(t,e,n,r)=>(gO(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Se=(t,e,n)=>(gO(t,e,"access private method"),n);var Gf=(t,e,n,r)=>({set _(s){q(t,e,s,n)},get _(){return k(t,e,r)}});function eue(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var LK={exports:{}},Jk={},UK={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI=Symbol.for("react.element"),tue=Symbol.for("react.portal"),nue=Symbol.for("react.fragment"),rue=Symbol.for("react.strict_mode"),sue=Symbol.for("react.profiler"),iue=Symbol.for("react.provider"),oue=Symbol.for("react.context"),aue=Symbol.for("react.forward_ref"),cue=Symbol.for("react.suspense"),lue=Symbol.for("react.memo"),uue=Symbol.for("react.lazy"),MF=Symbol.iterator;function due(t){return t===null||typeof t!="object"?null:(t=MF&&t[MF]||t["@@iterator"],typeof t=="function"?t:null)}var $K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FK=Object.assign,jK={};function pC(t,e,n){this.props=t,this.context=e,this.refs=jK,this.updater=n||$K}pC.prototype.isReactComponent={};pC.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pC.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WK(){}WK.prototype=pC.prototype;function _6(t,e,n){this.props=t,this.context=e,this.refs=jK,this.updater=n||$K}var A6=_6.prototype=new WK;A6.constructor=_6;FK(A6,pC.prototype);A6.isPureReactComponent=!0;var BF=Array.isArray,zK=Object.prototype.hasOwnProperty,S6={current:null},HK={key:!0,ref:!0,__self:!0,__source:!0};function GK(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)zK.call(e,r)&&!HK.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:aI,type:t,key:i,ref:o,props:s,_owner:S6.current}}function hue(t,e){return{$$typeof:aI,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function I6(t){return typeof t=="object"&&t!==null&&t.$$typeof===aI}function fue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LF=/\/+/g;function mO(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fue(""+t.key):e.toString(36)}function Hx(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case aI:case tue:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+mO(o,0):r,BF(s)?(n="",t!=null&&(n=t.replace(LF,"$&/")+"/"),Hx(s,e,n,"",function(l){return l})):s!=null&&(I6(s)&&(s=hue(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(LF,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",BF(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+mO(i,a);o+=Hx(i,e,n,c,s)}else if(c=due(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+mO(i,a++),o+=Hx(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yN(t,e,n){if(t==null)return t;var r=[],s=0;return Hx(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ba={current:null},Gx={transition:null},gue={ReactCurrentDispatcher:ba,ReactCurrentBatchConfig:Gx,ReactCurrentOwner:S6};function qK(){throw Error("act(...) is not supported in production builds of React.")}$n.Children={map:yN,forEach:function(t,e,n){yN(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yN(t,function(){e++}),e},toArray:function(t){return yN(t,function(e){return e})||[]},only:function(t){if(!I6(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$n.Component=pC;$n.Fragment=nue;$n.Profiler=sue;$n.PureComponent=_6;$n.StrictMode=rue;$n.Suspense=cue;$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gue;$n.act=qK;$n.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=FK({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=S6.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)zK.call(e,c)&&!HK.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:aI,type:t.type,key:s,ref:i,props:r,_owner:o}};$n.createContext=function(t){return t={$$typeof:oue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iue,_context:t},t.Consumer=t};$n.createElement=GK;$n.createFactory=function(t){var e=GK.bind(null,t);return e.type=t,e};$n.createRef=function(){return{current:null}};$n.forwardRef=function(t){return{$$typeof:aue,render:t}};$n.isValidElement=I6;$n.lazy=function(t){return{$$typeof:uue,_payload:{_status:-1,_result:t},_init:pue}};$n.memo=function(t,e){return{$$typeof:lue,type:t,compare:e===void 0?null:e}};$n.startTransition=function(t){var e=Gx.transition;Gx.transition={};try{t()}finally{Gx.transition=e}};$n.unstable_act=qK;$n.useCallback=function(t,e){return ba.current.useCallback(t,e)};$n.useContext=function(t){return ba.current.useContext(t)};$n.useDebugValue=function(){};$n.useDeferredValue=function(t){return ba.current.useDeferredValue(t)};$n.useEffect=function(t,e){return ba.current.useEffect(t,e)};$n.useId=function(){return ba.current.useId()};$n.useImperativeHandle=function(t,e,n){return ba.current.useImperativeHandle(t,e,n)};$n.useInsertionEffect=function(t,e){return ba.current.useInsertionEffect(t,e)};$n.useLayoutEffect=function(t,e){return ba.current.useLayoutEffect(t,e)};$n.useMemo=function(t,e){return ba.current.useMemo(t,e)};$n.useReducer=function(t,e,n){return ba.current.useReducer(t,e,n)};$n.useRef=function(t){return ba.current.useRef(t)};$n.useState=function(t){return ba.current.useState(t)};$n.useSyncExternalStore=function(t,e,n){return ba.current.useSyncExternalStore(t,e,n)};$n.useTransition=function(){return ba.current.useTransition()};$n.version="18.3.1";UK.exports=$n;var G=UK.exports;const Gc=ih(G),mue=eue({__proto__:null,default:Gc},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yue=G,wue=Symbol.for("react.element"),bue=Symbol.for("react.fragment"),vue=Object.prototype.hasOwnProperty,Eue=yue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cue={key:!0,ref:!0,__self:!0,__source:!0};function VK(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vue.call(e,r)&&!Cue.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wue,type:t,key:i,ref:o,props:s,_owner:Eue.current}}Jk.Fragment=bue;Jk.jsx=VK;Jk.jsxs=VK;LK.exports=Jk;var b=LK.exports,UF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze=function(t,e){if(!t)throw gC(e)},gC=function(t){return new Error("Firebase Database ("+KK.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_ue=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},N6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_ue(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Aue;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Aue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QK=function(t){const e=YK(t);return N6.encodeByteArray(e,!0)},HT=function(t){return QK(t).replace(/\./g,"")},jM=function(t){try{return N6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sue(t){return JK(void 0,t)}function JK(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Iue(n)||(t[n]=JK(t[n],e[n]));return t}function Iue(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xue=()=>Nue().__FIREBASE_DEFAULTS__,Tue=()=>{if(typeof process>"u"||typeof UF>"u")return;const t=UF.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rue=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jM(t[1]);return e&&JSON.parse(e)},ZK=()=>{try{return xue()||Tue()||Rue()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kue=t=>{var e,n;return(n=(e=ZK())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Pue=t=>{const e=kue(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XK=()=>{var t;return(t=ZK())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oue(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[HT(JSON.stringify(n)),HT(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Due(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Due())}function Mue(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bue(){return KK.NODE_ADMIN===!0}function Lue(){try{return typeof indexedDB=="object"}catch{return!1}}function Uue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ue="FirebaseError";class cI extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$ue,Object.setPrototypeOf(this,cI.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tY.prototype.create)}}class tY{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Fue(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cI(s,a,r)}}function Fue(t,e){return t.replace(jue,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jue=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return JSON.parse(t)}function Ei(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=J_(jM(i[0])||""),n=J_(jM(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Wue=function(t){const e=nY(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},zue=function(t){const e=nY(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vE(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function $F(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function GT(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function WM(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(FF(i)&&FF(o)){if(!WM(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function FF(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hue(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gue{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function x6(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ze(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Xk=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){return t&&t._delegate?t._delegate:t}class Z_{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Zk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yue(e))try{this.getOrInitializeService({instanceIdentifier:jm})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=jm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jm){return this.instances.has(e)}getOptions(e=jm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kue(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jm){return this.component?this.component.multipleInstances?e:jm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kue(t){return t===jm?void 0:t}function Yue(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Que{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ns||(ns={}));const Jue={debug:ns.DEBUG,verbose:ns.VERBOSE,info:ns.INFO,warn:ns.WARN,error:ns.ERROR,silent:ns.SILENT},Zue=ns.INFO,Xue={[ns.DEBUG]:"log",[ns.VERBOSE]:"log",[ns.INFO]:"info",[ns.WARN]:"warn",[ns.ERROR]:"error"},ede=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Xue[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rY{constructor(e){this.name=e,this._logLevel=Zue,this._logHandler=ede,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ns))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jue[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ns.DEBUG,...e),this._logHandler(this,ns.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ns.VERBOSE,...e),this._logHandler(this,ns.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ns.INFO,...e),this._logHandler(this,ns.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ns.WARN,...e),this._logHandler(this,ns.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ns.ERROR,...e),this._logHandler(this,ns.ERROR,...e)}}const tde=(t,e)=>e.some(n=>t instanceof n);let jF,WF;function nde(){return jF||(jF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rde(){return WF||(WF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sY=new WeakMap,zM=new WeakMap,iY=new WeakMap,yO=new WeakMap,T6=new WeakMap;function sde(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Eg(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sY.set(n,t)}).catch(()=>{}),T6.set(e,t),e}function ide(t){if(zM.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});zM.set(t,e)}let HM={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zM.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iY.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Eg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ode(t){HM=t(HM)}function ade(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wO(this),e,...n);return iY.set(r,e.sort?e.sort():[e]),Eg(r)}:rde().includes(t)?function(...e){return t.apply(wO(this),e),Eg(sY.get(this))}:function(...e){return Eg(t.apply(wO(this),e))}}function cde(t){return typeof t=="function"?ade(t):(t instanceof IDBTransaction&&ide(t),tde(t,nde())?new Proxy(t,HM):t)}function Eg(t){if(t instanceof IDBRequest)return sde(t);if(yO.has(t))return yO.get(t);const e=cde(t);return e!==t&&(yO.set(t,e),T6.set(e,t)),e}const wO=t=>T6.get(t);function lde(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Eg(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Eg(o.result),c.oldVersion,c.newVersion,Eg(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const ude=["get","getKey","getAll","getAllKeys","count"],dde=["put","add","delete","clear"],bO=new Map;function zF(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bO.get(e))return bO.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=dde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ude.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return bO.set(e,i),i}ode(t=>({...t,get:(e,n,r)=>zF(e,n)||t.get(e,n,r),has:(e,n)=>!!zF(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fde(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fde(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const GM="@firebase/app",HF="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new rY("@firebase/app"),pde="@firebase/app-compat",gde="@firebase/analytics-compat",mde="@firebase/analytics",yde="@firebase/app-check-compat",wde="@firebase/app-check",bde="@firebase/auth",vde="@firebase/auth-compat",Ede="@firebase/database",Cde="@firebase/data-connect",_de="@firebase/database-compat",Ade="@firebase/functions",Sde="@firebase/functions-compat",Ide="@firebase/installations",Nde="@firebase/installations-compat",xde="@firebase/messaging",Tde="@firebase/messaging-compat",Rde="@firebase/performance",kde="@firebase/performance-compat",Pde="@firebase/remote-config",Ode="@firebase/remote-config-compat",Dde="@firebase/storage",Mde="@firebase/storage-compat",Bde="@firebase/firestore",Lde="@firebase/vertexai-preview",Ude="@firebase/firestore-compat",$de="firebase",Fde="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="[DEFAULT]",jde={[GM]:"fire-core",[pde]:"fire-core-compat",[mde]:"fire-analytics",[gde]:"fire-analytics-compat",[wde]:"fire-app-check",[yde]:"fire-app-check-compat",[bde]:"fire-auth",[vde]:"fire-auth-compat",[Ede]:"fire-rtdb",[Cde]:"fire-data-connect",[_de]:"fire-rtdb-compat",[Ade]:"fire-fn",[Sde]:"fire-fn-compat",[Ide]:"fire-iid",[Nde]:"fire-iid-compat",[xde]:"fire-fcm",[Tde]:"fire-fcm-compat",[Rde]:"fire-perf",[kde]:"fire-perf-compat",[Pde]:"fire-rc",[Ode]:"fire-rc-compat",[Dde]:"fire-gcs",[Mde]:"fire-gcs-compat",[Bde]:"fire-fst",[Ude]:"fire-fst-compat",[Lde]:"fire-vertex","fire-js":"fire-js",[$de]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map,Wde=new Map,VM=new Map;function GF(t,e){try{t.container.addComponent(e)}catch(n){bf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qT(t){const e=t.name;if(VM.has(e))return bf.debug(`There were multiple attempts to register component ${e}.`),!1;VM.set(e,t);for(const n of X_.values())GF(n,t);for(const n of Wde.values())GF(n,t);return!0}function zde(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hde={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cg=new tY("app","Firebase",Hde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gde{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Z_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qde=Fde;function oY(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qM,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Cg.create("bad-app-name",{appName:String(s)});if(n||(n=XK()),!n)throw Cg.create("no-options");const i=X_.get(s);if(i){if(WM(n,i.options)&&WM(r,i.config))return i;throw Cg.create("duplicate-app",{appName:s})}const o=new Que(s);for(const c of VM.values())o.addComponent(c);const a=new Gde(n,r,o);return X_.set(s,a),a}function aY(t=qM){const e=X_.get(t);if(!e&&t===qM&&XK())return oY();if(!e)throw Cg.create("no-app",{appName:t});return e}function Vde(){return Array.from(X_.values())}function Zb(t,e,n){var r;let s=(r=jde[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bf.warn(a.join(" "));return}qT(new Z_(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kde="firebase-heartbeat-database",Yde=1,eA="firebase-heartbeat-store";let vO=null;function cY(){return vO||(vO=lde(Kde,Yde,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eA)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cg.create("idb-open",{originalErrorMessage:t.message})})),vO}async function Qde(t){try{const n=(await cY()).transaction(eA),r=await n.objectStore(eA).get(lY(t));return await n.done,r}catch(e){if(e instanceof cI)bf.warn(e.message);else{const n=Cg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bf.warn(n.message)}}}async function qF(t,e){try{const r=(await cY()).transaction(eA,"readwrite");await r.objectStore(eA).put(e,lY(t)),await r.done}catch(n){if(n instanceof cI)bf.warn(n.message);else{const r=Cg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bf.warn(r.message)}}}function lY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jde=1024,Zde=30*24*60*60*1e3;class Xde{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new the(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=VF();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Zde}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bf.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=VF(),{heartbeatsToSend:r,unsentEntries:s}=ehe(this._heartbeatsCache.heartbeats),i=HT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return bf.warn(n),""}}}function VF(){return new Date().toISOString().substring(0,10)}function ehe(t,e=Jde){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),KF(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),KF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class the{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lue()?Uue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qde(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function KF(t){return HT(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nhe(t){qT(new Z_("platform-logger",e=>new hde(e),"PRIVATE")),qT(new Z_("heartbeat",e=>new Xde(e),"PRIVATE")),Zb(GM,HF,t),Zb(GM,HF,"esm2017"),Zb("fire-js","")}nhe("");var rhe="firebase",she="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zb(rhe,she,"app");var YF={};const QF="@firebase/database",JF="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uY="";function ihe(t){uY=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ohe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ei(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:J_(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ahe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Of(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ohe(e)}}catch{}return new ahe},dy=dY("localStorage"),che=dY("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new rY("@firebase/database"),lhe=function(){let t=1;return function(){return t++}}(),hY=function(t){const e=que(t),n=new Gue;n.update(e);const r=n.digest();return N6.encodeByteArray(r)},lI=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=lI.apply(null,r):typeof r=="object"?e+=Ei(r):e+=r,e+=" "}return e};let p_=null,ZF=!0;const uhe=function(t,e){ze(!0,"Can't turn on custom loggers persistently."),Xb.logLevel=ns.VERBOSE,p_=Xb.log.bind(Xb)},Uo=function(...t){if(ZF===!0&&(ZF=!1,p_===null&&che.get("logging_enabled")===!0&&uhe()),p_){const e=lI.apply(null,t);p_(e)}},uI=function(t){return function(...e){Uo(t,...e)}},KM=function(...t){const e="FIREBASE INTERNAL ERROR: "+lI(...t);Xb.error(e)},vf=function(...t){const e=`FIREBASE FATAL ERROR: ${lI(...t)}`;throw Xb.error(e),new Error(e)},rc=function(...t){const e="FIREBASE WARNING: "+lI(...t);Xb.warn(e)},dhe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rc("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fY=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hhe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},EE="[MIN_NAME]",m0="[MAX_NAME]",yC=function(t,e){if(t===e)return 0;if(t===EE||e===m0)return-1;if(e===EE||t===m0)return 1;{const n=XF(t),r=XF(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fhe=function(t,e){return t===e?0:t<e?-1:1},JC=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ei(e))},R6=function(t){if(typeof t!="object"||t===null)return Ei(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ei(e[r]),n+=":",n+=R6(t[e[r]]);return n+="}",n},pY=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function uc(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const gY=function(t){ze(!fY(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},phe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ghe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function mhe(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const yhe=new RegExp("^-?(0*)\\d{1,10}$"),whe=-2147483648,bhe=2147483647,XF=function(t){if(yhe.test(t)){const e=Number(t);if(e>=whe&&e<=bhe)return e}return null},wC=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw rc("Exception was thrown by user callback.",n),e},Math.floor(0))}},vhe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},g_=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ehe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rc(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Che{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Uo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rc(e)}}class qx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}qx.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="5",mY="v",yY="s",wY="r",bY="f",vY=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EY="ls",CY="p",YM="ac",_Y="websocket",AY="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dy.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dy.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function _he(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function IY(t,e,n){ze(typeof e=="string","typeof type must == string"),ze(typeof n=="object","typeof params must == object");let r;if(e===_Y)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===AY)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_he(t)&&(n.ns=t.namespace);const s=[];return uc(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ahe{constructor(){this.counters_={}}incrementCounter(e,n=1){Of(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Sue(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO={},CO={};function P6(t){const e=t.toString();return EO[e]||(EO[e]=new Ahe),EO[e]}function She(t,e){const n=t.toString();return CO[n]||(CO[n]=e()),CO[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&wC(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="start",Nhe="close",xhe="pLPCommand",The="pRTLPCB",NY="id",xY="pw",TY="ser",Rhe="cb",khe="seg",Phe="ts",Ohe="d",Dhe="dframe",RY=1870,kY=30,Mhe=RY-kY,Bhe=25e3,Lhe=3e4;class Ib{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uI(e),this.stats_=P6(n),this.urlFn=c=>(this.appCheckToken&&(c[YM]=this.appCheckToken),IY(n,AY,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ihe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Lhe)),hhe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new O6((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ej)this.id=a,this.password=c;else if(o===Nhe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[ej]="t",r[TY]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Rhe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[mY]=k6,this.transportSessionId&&(r[yY]=this.transportSessionId),this.lastSessionId&&(r[EY]=this.lastSessionId),this.applicationId&&(r[CY]=this.applicationId),this.appCheckToken&&(r[YM]=this.appCheckToken),typeof location<"u"&&location.hostname&&vY.test(location.hostname)&&(r[wY]=bY);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ib.forceAllow_=!0}static forceDisallow(){Ib.forceDisallow_=!0}static isAvailable(){return Ib.forceAllow_?!0:!Ib.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!phe()&&!ghe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ei(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=QK(n),s=pY(r,Mhe);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Dhe]="t",r[NY]=e,r[xY]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ei(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class O6{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=lhe(),window[xhe+this.uniqueCallbackIdentifier]=e,window[The+this.uniqueCallbackIdentifier]=n,this.myIFrame=O6.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Uo("frame writing exception"),a.stack&&Uo(a.stack),Uo(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Uo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[NY]=this.myID,e[xY]=this.myPW,e[TY]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kY+r.length<=RY;){const o=this.pendingSegs.shift();r=r+"&"+khe+s+"="+o.seg+"&"+Phe+s+"="+o.ts+"&"+Ohe+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Bhe)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Uo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe=16384,$he=45e3;let VT=null;typeof MozWebSocket<"u"?VT=MozWebSocket:typeof WebSocket<"u"&&(VT=WebSocket);class Nu{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uI(this.connId),this.stats_=P6(n),this.connURL=Nu.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[mY]=k6,typeof location<"u"&&location.hostname&&vY.test(location.hostname)&&(o[wY]=bY),n&&(o[yY]=n),r&&(o[EY]=r),s&&(o[YM]=s),i&&(o[CY]=i),IY(e,_Y,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dy.set("previous_websocket_failure",!0);try{let r;Bue(),this.mySock=new VT(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Nu.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&VT!==null&&!Nu.forceDisallow_}static previouslyFailed(){return dy.isInMemoryStorage||dy.get("previous_websocket_failure")===!0}markConnectionHealthy(){dy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=J_(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ze(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ei(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=pY(n,Uhe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($he))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nu.responsesRequiredToBeHealthy=2;Nu.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ib,Nu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Nu&&Nu.isAvailable();let r=n&&!Nu.previouslyFailed();if(e.webSocketOnly&&(n||rc("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Nu];else{const s=this.transports_=[];for(const i of tA.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);tA.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tA.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fhe=6e4,jhe=5e3,Whe=10*1024,zhe=100*1024,_O="t",tj="d",Hhe="s",nj="r",Ghe="e",rj="o",sj="a",ij="n",oj="p",qhe="h";let Vhe=class{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uI("c:"+this.id+":"),this.transportManager_=new tA(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=g_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zhe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Whe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_O in e){const n=e[_O];n===sj?this.upgradeIfSecondaryHealthy_():n===nj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===rj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=JC("t",e),r=JC("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:oj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ij,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=JC("t",e),r=JC("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=JC(_O,e);if(tj in e){const r=e[tj];if(n===qhe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===ij){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Hhe?this.onConnectionShutdown_(r):n===nj?this.onReset_(r):n===Ghe?KM("Server Error: "+r):n===rj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KM("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),k6!==r&&rc("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),g_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Fhe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):g_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jhe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:oj,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OY=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ze(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ze(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends OY{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!eY()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new KT}getInitialEvent(e){return ze(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=32,cj=768;class Yr{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ur(){return new Yr("")}function Pn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Vg(t){return t.pieces_.length-t.pieceNum_}function is(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Yr(t.pieces_,e)}function DY(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Khe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function MY(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function BY(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Yr(e,0)}function Ci(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Yr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Yr(n,0)}function Ln(t){return t.pieceNum_>=t.pieces_.length}function aa(t,e){const n=Pn(t),r=Pn(e);if(n===null)return e;if(n===r)return aa(is(t),is(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function D6(t,e){if(Vg(t)!==Vg(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ku(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Vg(t)>Vg(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Yhe{constructor(e,n){this.errorPrefix_=n,this.parts_=MY(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xk(this.parts_[r]);LY(this)}}function Qhe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xk(e),LY(t)}function Jhe(t){const e=t.parts_.pop();t.byteLength_-=Xk(e),t.parts_.length>0&&(t.byteLength_-=1)}function LY(t){if(t.byteLength_>cj)throw new Error(t.errorPrefix_+"has a key path longer than "+cj+" bytes ("+t.byteLength_+").");if(t.parts_.length>aj)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+aj+") or object contains a cycle "+Wm(t))}function Wm(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6 extends OY{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new M6}getInitialEvent(e){return ze(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1e3,Zhe=60*5*1e3,lj=30*1e3,Xhe=1.3,efe=3e4,tfe="server_kill",uj=3;class lf extends PY{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=lf.nextPersistentConnectionId_++,this.log_=uI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ZC,this.maxReconnectDelay_=Zhe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");M6.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&KT.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ei(i)),ze(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Zk,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ze(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ze(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;lf.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Of(e,"w")){const r=vE(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();rc(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||zue(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lj)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Wue(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ze(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ei(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):KM("Unrecognized action received from server: "+Ei(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ze(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ZC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ZC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>efe&&(this.reconnectDelay_=ZC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Xhe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+lf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){ze(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Uo("getToken() completed but was canceled"):(Uo("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Vhe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{rc(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(tfe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&rc(d),c())}}}interrupt(e){Uo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Uo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$F(this.interruptReasons_)&&(this.reconnectDelay_=ZC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>R6(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Yr(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Uo("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uj&&(this.reconnectDelay_=lj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Uo("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+uY.replace(/\./g,"-")]=1,eY()?e["framework.cordova"]=1:Mue()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=KT.getInstance().currentlyOnline();return $F(this.interruptReasons_)&&e}}lf.nextPersistentConnectionId_=0;lf.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new On(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new On(EE,e),s=new On(EE,n);return this.compare(r,s)!==0}minPost(){return On.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wN;class UY extends e2{static get __EMPTY_NODE(){return wN}static set __EMPTY_NODE(e){wN=e}compare(e,n){return yC(e.name,n.name)}isDefinedOn(e){throw gC("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return On.MIN}maxPost(){return new On(m0,wN)}makePost(e,n){return ze(typeof e=="string","KeyIndex indexValue must always be a string."),new On(e,wN)}toString(){return".key"}}const ev=new UY;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Di{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Di.RED,this.left=s??ec.EMPTY_NODE,this.right=i??ec.EMPTY_NODE}copy(e,n,r,s,i){return new Di(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ec.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ec.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Di.RED=!0;Di.BLACK=!1;class nfe{copy(e,n,r,s,i){return this}insert(e,n,r){return new Di(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ec{constructor(e,n=ec.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ec(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Di.BLACK,null,null))}remove(e){return new ec(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Di.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bN(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new bN(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new bN(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new bN(this.root_,null,this.comparator_,!0,e)}}ec.EMPTY_NODE=new nfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rfe(t,e){return yC(t.name,e.name)}function B6(t,e){return yC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QM;function sfe(t){QM=t}const $Y=function(t){return typeof t=="number"?"number:"+gY(t):"string:"+t},FY=function(t){if(t.isLeafNode()){const e=t.val();ze(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Of(e,".sv"),"Priority must be a string or number.")}else ze(t===QM||t.isEmpty(),"priority of unexpected type.");ze(t===QM||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dj;class Oi{constructor(e,n=Oi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ze(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FY(this.priorityNode_)}static set __childrenNodeConstructor(e){dj=e}static get __childrenNodeConstructor(){return dj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Oi(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ln(e)?this:Pn(e)===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Oi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Pn(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ze(r!==".priority"||Vg(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Oi.__childrenNodeConstructor.EMPTY_NODE.updateChild(is(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$Y(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=gY(this.value_):e+=this.value_,this.lazyHash_=hY(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Oi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Oi.__childrenNodeConstructor?-1:(ze(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Oi.VALUE_TYPE_ORDER.indexOf(n),i=Oi.VALUE_TYPE_ORDER.indexOf(r);return ze(s>=0,"Unknown leaf type: "+n),ze(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Oi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jY,WY;function ife(t){jY=t}function ofe(t){WY=t}class afe extends e2{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?yC(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return On.MIN}maxPost(){return new On(m0,new Oi("[PRIORITY-POST]",WY))}makePost(e,n){const r=jY(e);return new On(n,new Oi("[PRIORITY-POST]",r))}toString(){return".priority"}}const qs=new afe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cfe=Math.log(2);class lfe{constructor(e){const n=i=>parseInt(Math.log(i)/cfe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const YT=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Di(h,d.node,Di.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Di(h,d.node,Di.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const m=d-p,y=d;d-=p;const w=s(m+1,y),C=t[m],N=n?n(C):C;f(new Di(N,C.node,g,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?h(m,Di.BLACK):(h(m,Di.BLACK),h(m,Di.RED))}return u},o=new lfe(t.length),a=i(o);return new ec(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AO;const Rw={};class tf{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ze(Rw&&qs,"ChildrenNode.ts has not been loaded"),AO=AO||new tf({".priority":Rw},{".priority":qs}),AO}get(e){const n=vE(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ec?n:null}hasIndex(e){return Of(this.indexSet_,e.toString())}addIndex(e,n){ze(e!==ev,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(On.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=YT(r,e.getCompare()):a=Rw;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new tf(u,l)}addToIndexes(e,n){const r=GT(this.indexes_,(s,i)=>{const o=vE(this.indexSet_,i);if(ze(o,"Missing index implementation for "+i),s===Rw)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(On.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),YT(a,o.getCompare())}else return Rw;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new On(e.name,a))),c.insert(e,e.node)}});return new tf(r,this.indexSet_)}removeFromIndexes(e,n){const r=GT(this.indexes_,s=>{if(s===Rw)return s;{const i=n.get(e.name);return i?s.remove(new On(e.name,i)):s}});return new tf(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XC;class en{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&FY(this.priorityNode_),this.children_.isEmpty()&&ze(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return XC||(XC=new en(new ec(B6),null,tf.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||XC}updatePriority(e){return this.children_.isEmpty()?this:new en(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?XC:n}}getChild(e){const n=Pn(e);return n===null?this:this.getImmediateChild(n).getChild(is(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ze(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new On(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?XC:this.priorityNode_;return new en(s,o,i)}}updateChild(e,n){const r=Pn(e);if(r===null)return n;{ze(Pn(e)!==".priority"||Vg(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(is(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(qs,(o,a)=>{n[o]=a.val(e),r++,i&&en.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$Y(this.getPriority().val())+":"),this.forEachChild(qs,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":hY(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new On(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new On(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new On(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,On.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,On.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===dI?-1:0}withIndex(e){if(e===ev||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new en(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ev||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(qs),s=n.getIterator(qs);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ev?null:this.indexMap_.get(e.toString())}}en.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ufe extends en{constructor(){super(new ec(B6),en.EMPTY_NODE,tf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}}const dI=new ufe;Object.defineProperties(On,{MIN:{value:new On(EE,en.EMPTY_NODE)},MAX:{value:new On(m0,dI)}});UY.__EMPTY_NODE=en.EMPTY_NODE;Oi.__childrenNodeConstructor=en;sfe(dI);ofe(dI);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe=!0;function Li(t,e=null){if(t===null)return en.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ze(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Oi(n,Li(e))}if(!(t instanceof Array)&&dfe){const n=[];let r=!1;if(uc(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Li(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new On(o,c)))}}),n.length===0)return en.EMPTY_NODE;const i=YT(n,rfe,o=>o.name,B6);if(r){const o=YT(n,qs.getCompare());return new en(i,Li(e),new tf({".priority":o},{".priority":qs}))}else return new en(i,Li(e),tf.Default)}else{let n=en.EMPTY_NODE;return uc(t,(r,s)=>{if(Of(t,r)&&r.substring(0,1)!=="."){const i=Li(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Li(e))}}ife(Li);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hfe extends e2{constructor(e){super(),this.indexPath_=e,ze(!Ln(e)&&Pn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?yC(e.name,n.name):i}makePost(e,n){const r=Li(e),s=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new On(n,s)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,dI);return new On(m0,e)}toString(){return MY(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ffe extends e2{compare(e,n){const r=e.node.compareTo(n.node);return r===0?yC(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return On.MIN}maxPost(){return On.MAX}makePost(e,n){const r=Li(e);return new On(n,r)}toString(){return".value"}}const pfe=new ffe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(t){return{type:"value",snapshotNode:t}}function CE(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function nA(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function rA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function gfe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){ze(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(nA(n,a)):ze(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(CE(n,r)):o.trackChildChange(rA(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(qs,(s,i)=>{n.hasChild(s)||r.trackChildChange(nA(s,i))}),n.isLeafNode()||n.forEachChild(qs,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(rA(s,i,o))}else r.trackChildChange(CE(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.indexedFilter_=new L6(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sA.getStartPost_(e),this.endPost_=sA.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new On(n,r))||(r=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=en.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(en.EMPTY_NODE);const i=this;return n.forEachChild(qs,(o,a)=>{i.matches(new On(o,a))||(s=s.updateImmediateChild(o,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new sA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new On(n,r))||(r=en.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=en.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=en.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(en.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;ze(a.numChildren()===this.limit_,"");const c=new On(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(rA(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(nA(n,d));const g=a.updateImmediateChild(n,en.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(CE(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(nA(l.name,l.node)),i.trackChildChange(CE(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,en.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qs}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ze(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ze(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:EE}hasEnd(){return this.endSet_}getIndexEndValue(){return ze(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ze(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:m0}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ze(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qs}copy(){const e=new U6;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yfe(t){return t.loadsAllData()?new L6(t.getIndex()):t.hasLimit()?new mfe(t):new sA(t)}function hj(t){const e={};if(t.isDefault())return e;let n;if(t.index_===qs?n="$priority":t.index_===pfe?n="$value":t.index_===ev?n="$key":(ze(t.index_ instanceof hfe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ei(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ei(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ei(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ei(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ei(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function fj(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==qs&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends PY{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=uI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ze(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=QT.getListenId_(e,r),a={};this.listens_[o]=a;const c=hj(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),vE(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=QT.getListenId_(e,n);delete this.listens_[r]}get(e){const n=hj(e._queryParams),r=e._path.toString(),s=new Zk;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Hue(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=J_(a.responseText)}catch{rc("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&rc("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wfe{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){return{value:null,children:new Map}}function HY(t,e,n){if(Ln(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Pn(e);t.children.has(r)||t.children.set(r,JT());const s=t.children.get(r);e=is(e),HY(s,e,n)}}function JM(t,e,n){t.value!==null?n(e,t.value):bfe(t,(r,s)=>{const i=new Yr(e.toString()+"/"+r);JM(s,i,n)})}function bfe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&uc(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=10*1e3,Efe=30*1e3,Cfe=5*60*1e3;class _fe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new vfe(e);const r=pj+(Efe-pj)*Math.random();g_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;uc(e,(s,i)=>{i>0&&Of(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),g_(this.reportStats_.bind(this),Math.floor(Math.random()*2*Cfe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pu;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Pu||(Pu={}));function GY(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $6(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function F6(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Pu.ACK_USER_WRITE,this.source=GY()}operationForChild(e){if(Ln(this.path)){if(this.affectedTree.value!=null)return ze(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Yr(e));return new ZT(ur(),n,this.revert)}}else return ze(Pn(this.path)===e,"operationForChild called for unrelated child."),new ZT(is(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n){this.source=e,this.path=n,this.type=Pu.LISTEN_COMPLETE}operationForChild(e){return Ln(this.path)?new iA(this.source,ur()):new iA(this.source,is(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Pu.OVERWRITE}operationForChild(e){return Ln(this.path)?new y0(this.source,ur(),this.snap.getImmediateChild(e)):new y0(this.source,is(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Pu.MERGE}operationForChild(e){if(Ln(this.path)){const n=this.children.subtree(new Yr(e));return n.isEmpty()?null:n.value?new y0(this.source,ur(),n.value):new oA(this.source,ur(),n)}else return ze(Pn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new oA(this.source,is(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ln(e))return this.isFullyInitialized()&&!this.filtered_;const n=Pn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Sfe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(gfe(o.childName,o.snapshotNode))}),e1(t,s,"child_removed",e,r,n),e1(t,s,"child_added",e,r,n),e1(t,s,"child_moved",i,r,n),e1(t,s,"child_changed",e,r,n),e1(t,s,"value",e,r,n),s}function e1(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Nfe(t,a,c)),o.forEach(a=>{const c=Ife(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Ife(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Nfe(t,e,n){if(e.childName==null||n.childName==null)throw gC("Should only compare child_ events.");const r=new On(e.childName,e.snapshotNode),s=new On(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e){return{eventCache:t,serverCache:e}}function m_(t,e,n,r){return t2(new Kg(e,n,r),t.serverCache)}function qY(t,e,n,r){return t2(t.eventCache,new Kg(e,n,r))}function XT(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function w0(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SO;const xfe=()=>(SO||(SO=new ec(fhe)),SO);class ps{constructor(e,n=xfe()){this.value=e,this.children=n}static fromObject(e){let n=new ps(null);return uc(e,(r,s)=>{n=n.set(new Yr(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ur(),value:this.value};if(Ln(e))return null;{const r=Pn(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(is(e),n);return i!=null?{path:Ci(new Yr(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ln(e))return this;{const n=Pn(e),r=this.children.get(n);return r!==null?r.subtree(is(e)):new ps(null)}}set(e,n){if(Ln(e))return new ps(n,this.children);{const r=Pn(e),i=(this.children.get(r)||new ps(null)).set(is(e),n),o=this.children.insert(r,i);return new ps(this.value,o)}}remove(e){if(Ln(e))return this.children.isEmpty()?new ps(null):new ps(null,this.children);{const n=Pn(e),r=this.children.get(n);if(r){const s=r.remove(is(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ps(null):new ps(this.value,i)}else return this}}get(e){if(Ln(e))return this.value;{const n=Pn(e),r=this.children.get(n);return r?r.get(is(e)):null}}setTree(e,n){if(Ln(e))return n;{const r=Pn(e),i=(this.children.get(r)||new ps(null)).setTree(is(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ps(this.value,o)}}fold(e){return this.fold_(ur(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ci(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ur(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ln(e))return null;{const i=Pn(e),o=this.children.get(i);return o?o.findOnPath_(is(e),Ci(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ur(),n)}foreachOnPath_(e,n,r){if(Ln(e))return this;{this.value&&r(n,this.value);const s=Pn(e),i=this.children.get(s);return i?i.foreachOnPath_(is(e),Ci(n,s),r):new ps(null)}}foreach(e){this.foreach_(ur(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ci(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.writeTree_=e}static empty(){return new Mu(new ps(null))}}function y_(t,e,n){if(Ln(e))return new Mu(new ps(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=aa(s,e);return i=i.updateChild(o,n),new Mu(t.writeTree_.set(s,i))}else{const s=new ps(n),i=t.writeTree_.setTree(e,s);return new Mu(i)}}}function gj(t,e,n){let r=t;return uc(n,(s,i)=>{r=y_(r,Ci(e,s),i)}),r}function mj(t,e){if(Ln(e))return Mu.empty();{const n=t.writeTree_.setTree(e,new ps(null));return new Mu(n)}}function ZM(t,e){return Z0(t,e)!=null}function Z0(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(aa(n.path,e)):null}function yj(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(qs,(r,s)=>{e.push(new On(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new On(r,s.value))}),e}function _g(t,e){if(Ln(e))return t;{const n=Z0(t,e);return n!=null?new Mu(new ps(n)):new Mu(t.writeTree_.subtree(e))}}function XM(t){return t.writeTree_.isEmpty()}function _E(t,e){return VY(ur(),t.writeTree_,e)}function VY(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ze(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=VY(Ci(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ci(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t,e){return JY(e,t)}function Tfe(t,e,n,r,s){ze(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=y_(t.visibleWrites,e,n)),t.lastWriteId=r}function Rfe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function kfe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ze(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Pfe(a,r.path)?s=!1:ku(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Ofe(t),!0;if(r.snap)t.visibleWrites=mj(t.visibleWrites,r.path);else{const a=r.children;uc(a,c=>{t.visibleWrites=mj(t.visibleWrites,Ci(r.path,c))})}return!0}else return!1}function Pfe(t,e){if(t.snap)return ku(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ku(Ci(t.path,n),e))return!0;return!1}function Ofe(t){t.visibleWrites=KY(t.allWrites,Dfe,ur()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Dfe(t){return t.visible}function KY(t,e,n){let r=Mu.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ku(n,o)?(a=aa(n,o),r=y_(r,a,i.snap)):ku(o,n)&&(a=aa(o,n),r=y_(r,ur(),i.snap.getChild(a)));else if(i.children){if(ku(n,o))a=aa(n,o),r=gj(r,a,i.children);else if(ku(o,n))if(a=aa(o,n),Ln(a))r=gj(r,ur(),i.children);else{const c=vE(i.children,Pn(a));if(c){const l=c.getChild(is(a));r=y_(r,ur(),l)}}}else throw gC("WriteRecord should have .snap or .children")}}return r}function YY(t,e,n,r,s){if(!r&&!s){const i=Z0(t.visibleWrites,e);if(i!=null)return i;{const o=_g(t.visibleWrites,e);if(XM(o))return n;if(n==null&&!ZM(o,ur()))return null;{const a=n||en.EMPTY_NODE;return _E(o,a)}}}else{const i=_g(t.visibleWrites,e);if(!s&&XM(i))return n;if(!s&&n==null&&!ZM(i,ur()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(ku(l.path,e)||ku(e,l.path))},a=KY(t.allWrites,o,e),c=n||en.EMPTY_NODE;return _E(a,c)}}}function Mfe(t,e,n){let r=en.EMPTY_NODE;const s=Z0(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(qs,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=_g(t.visibleWrites,e);return n.forEachChild(qs,(o,a)=>{const c=_E(_g(i,new Yr(o)),a);r=r.updateImmediateChild(o,c)}),yj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=_g(t.visibleWrites,e);return yj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Bfe(t,e,n,r,s){ze(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ci(e,n);if(ZM(t.visibleWrites,i))return null;{const o=_g(t.visibleWrites,i);return XM(o)?s.getChild(n):_E(o,s.getChild(n))}}function Lfe(t,e,n,r){const s=Ci(e,n),i=Z0(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=_g(t.visibleWrites,s);return _E(o,r.getNode().getImmediateChild(n))}else return null}function Ufe(t,e){return Z0(t.visibleWrites,e)}function $fe(t,e,n,r,s,i,o){let a;const c=_g(t.visibleWrites,e),l=Z0(c,ur());if(l!=null)a=l;else if(n!=null)a=_E(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Ffe(){return{visibleWrites:Mu.empty(),allWrites:[],lastWriteId:-1}}function eR(t,e,n,r){return YY(t.writeTree,t.treePath,e,n,r)}function j6(t,e){return Mfe(t.writeTree,t.treePath,e)}function wj(t,e,n,r){return Bfe(t.writeTree,t.treePath,e,n,r)}function tR(t,e){return Ufe(t.writeTree,Ci(t.treePath,e))}function jfe(t,e,n,r,s,i){return $fe(t.writeTree,t.treePath,e,n,r,s,i)}function W6(t,e,n){return Lfe(t.writeTree,t.treePath,e,n)}function QY(t,e){return JY(Ci(t.treePath,e),t.writeTree)}function JY(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wfe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ze(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ze(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,rA(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,nA(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,CE(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,rA(r,e.snapshotNode,s.oldSnap));else throw gC("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zfe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const ZY=new zfe;class z6{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Kg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return W6(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:w0(this.viewCache_),i=jfe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hfe(t){return{filter:t}}function Gfe(t,e){ze(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ze(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function qfe(t,e,n,r,s){const i=new Wfe;let o,a;if(n.type===Pu.OVERWRITE){const l=n;l.source.fromUser?o=eB(t,e,l.path,l.snap,r,s,i):(ze(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ln(l.path),o=nR(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Pu.MERGE){const l=n;l.source.fromUser?o=Kfe(t,e,l.path,l.children,r,s,i):(ze(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=tB(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Pu.ACK_USER_WRITE){const l=n;l.revert?o=Jfe(t,e,l.path,r,s,i):o=Yfe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Pu.LISTEN_COMPLETE)o=Qfe(t,e,n.path,r,i);else throw gC("Unknown operation type: "+n.type);const c=i.getChanges();return Vfe(e,o,c),{viewCache:o,changes:c}}function Vfe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=XT(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(zY(XT(e)))}}function XY(t,e,n,r,s,i){const o=e.eventCache;if(tR(r,n)!=null)return e;{let a,c;if(Ln(n))if(ze(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=w0(e),u=l instanceof en?l:en.EMPTY_NODE,d=j6(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=eR(r,w0(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Pn(n);if(l===".priority"){ze(Vg(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=wj(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=is(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=wj(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=W6(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return m_(e,a,o.isFullyInitialized()||Ln(n),t.filter.filtersNodes())}}function nR(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Ln(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Pn(n);if(!c.isCompleteForPath(n)&&Vg(n)>1)return e;const p=is(n),m=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),m):l=u.updateChild(c.getNode(),f,m,p,ZY,null)}const d=qY(e,l,c.isFullyInitialized()||Ln(n),u.filtersNodes()),h=new z6(s,d,i);return XY(t,d,n,s,h,a)}function eB(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new z6(s,e,i);if(Ln(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=m_(e,l,!0,t.filter.filtersNodes());else{const d=Pn(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=m_(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=is(n),f=a.getNode().getImmediateChild(d);let p;if(Ln(h))p=r;else{const g=u.getCompleteChild(d);g!=null?DY(h)===".priority"&&g.getChild(BY(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=en.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=m_(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function bj(t,e){return t.eventCache.isCompleteForChild(e)}function Kfe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Ci(n,c);bj(e,Pn(u))&&(a=eB(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Ci(n,c);bj(e,Pn(u))||(a=eB(t,a,u,l,s,i,o))}),a}function vj(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function tB(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ln(n)?l=r:l=new ps(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=vj(t,f,h);c=nR(t,c,new Yr(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=vj(t,p,h);c=nR(t,c,new Yr(d),g,s,i,o,a)}}),c}function Yfe(t,e,n,r,s,i,o){if(tR(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ln(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return nR(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Ln(n)){let l=new ps(null);return c.getNode().forEachChild(ev,(u,d)=>{l=l.set(new Yr(u),d)}),tB(t,e,n,l,s,i,a,o)}else return e}else{let l=new ps(null);return r.foreach((u,d)=>{const h=Ci(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),tB(t,e,n,l,s,i,a,o)}}function Qfe(t,e,n,r,s){const i=e.serverCache,o=qY(e,i.getNode(),i.isFullyInitialized()||Ln(n),i.isFiltered());return XY(t,o,n,r,ZY,s)}function Jfe(t,e,n,r,s,i){let o;if(tR(r,n)!=null)return e;{const a=new z6(r,e,s),c=e.eventCache.getNode();let l;if(Ln(n)||Pn(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=eR(r,w0(e));else{const d=e.serverCache.getNode();ze(d instanceof en,"serverChildren would be complete if leaf node"),u=j6(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Pn(n);let d=W6(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,is(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,en.EMPTY_NODE,is(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=eR(r,w0(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||tR(r,ur())!=null,m_(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zfe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new L6(r.getIndex()),i=yfe(r);this.processor_=Hfe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(en.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(en.EMPTY_NODE,a.getNode(),null),u=new Kg(c,o.isFullyInitialized(),s.filtersNodes()),d=new Kg(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=t2(d,u),this.eventGenerator_=new Afe(this.query_)}get query(){return this.query_}}function Xfe(t){return t.viewCache_.serverCache.getNode()}function epe(t){return XT(t.viewCache_)}function tpe(t,e){const n=w0(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ln(e)&&!n.getImmediateChild(Pn(e)).isEmpty())?n.getChild(e):null}function Ej(t){return t.eventRegistrations_.length===0}function npe(t,e){t.eventRegistrations_.push(e)}function Cj(t,e,n){const r=[];if(n){ze(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function _j(t,e,n,r){e.type===Pu.MERGE&&e.source.queryId!==null&&(ze(w0(t.viewCache_),"We should always have a full cache before handling merges"),ze(XT(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=qfe(t.processor_,s,e,n,r);return Gfe(t.processor_,i.viewCache),ze(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,eQ(t,i.changes,i.viewCache.eventCache.getNode(),null)}function rpe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qs,(i,o)=>{r.push(CE(i,o))}),n.isFullyInitialized()&&r.push(zY(n.getNode())),eQ(t,r,n.getNode(),e)}function eQ(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Sfe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rR;class tQ{constructor(){this.views=new Map}}function spe(t){ze(!rR,"__referenceConstructor has already been defined"),rR=t}function ipe(){return ze(rR,"Reference.ts has not been loaded"),rR}function ope(t){return t.views.size===0}function H6(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ze(i!=null,"SyncTree gave us an op for an invalid query."),_j(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(_j(o,e,n,r));return i}}function nQ(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=eR(n,s?r:null),c=!1;a?c=!0:r instanceof en?(a=j6(n,r),c=!1):(a=en.EMPTY_NODE,c=!1);const l=t2(new Kg(a,c,!1),new Kg(r,s,!1));return new Zfe(e,l)}return o}function ape(t,e,n,r,s,i){const o=nQ(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),npe(o,n),rpe(o,n)}function cpe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Yg(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(Cj(l,n,r)),Ej(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(Cj(c,n,r)),Ej(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Yg(t)&&i.push(new(ipe())(e._repo,e._path)),{removed:i,events:o}}function rQ(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ag(t,e){let n=null;for(const r of t.views.values())n=n||tpe(r,e);return n}function sQ(t,e){if(e._queryParams.loadsAllData())return r2(t);{const r=e._queryIdentifier;return t.views.get(r)}}function iQ(t,e){return sQ(t,e)!=null}function Yg(t){return r2(t)!=null}function r2(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sR;function lpe(t){ze(!sR,"__referenceConstructor has already been defined"),sR=t}function upe(){return ze(sR,"Reference.ts has not been loaded"),sR}let dpe=1;class Aj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ps(null),this.pendingWriteTree_=Ffe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oQ(t,e,n,r,s){return Tfe(t.pendingWriteTree_,e,n,r,s),s?fI(t,new y0(GY(),e,n)):[]}function hy(t,e,n=!1){const r=Rfe(t.pendingWriteTree_,e);if(kfe(t.pendingWriteTree_,e)){let i=new ps(null);return r.snap!=null?i=i.set(ur(),!0):uc(r.children,o=>{i=i.set(new Yr(o),!0)}),fI(t,new ZT(r.path,i,n))}else return[]}function hI(t,e,n){return fI(t,new y0($6(),e,n))}function hpe(t,e,n){const r=ps.fromObject(n);return fI(t,new oA($6(),e,r))}function fpe(t,e){return fI(t,new iA($6(),e))}function ppe(t,e,n){const r=q6(t,n);if(r){const s=V6(r),i=s.path,o=s.queryId,a=aa(i,e),c=new iA(F6(o),a);return K6(t,i,c)}else return[]}function iR(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||iQ(o,e))){const c=cpe(o,e,n,r);ope(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Yg(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=ype(h);for(let p=0;p<f.length;++p){const g=f[p],m=g.query,y=uQ(t,g);t.listenProvider_.startListening(w_(m),aA(t,m),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(w_(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(s2(h));t.listenProvider_.stopListening(w_(h),f)}))}wpe(t,l)}return a}function aQ(t,e,n,r){const s=q6(t,r);if(s!=null){const i=V6(s),o=i.path,a=i.queryId,c=aa(o,e),l=new y0(F6(a),c,n);return K6(t,o,l)}else return[]}function gpe(t,e,n,r){const s=q6(t,r);if(s){const i=V6(s),o=i.path,a=i.queryId,c=aa(o,e),l=ps.fromObject(n),u=new oA(F6(a),c,l);return K6(t,o,u)}else return[]}function nB(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=aa(h,s);i=i||Ag(f,p),o=o||Yg(f)});let a=t.syncPointTree_.get(s);a?(o=o||Yg(a),i=i||Ag(a,ur())):(a=new tQ,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=en.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Ag(p,ur());g&&(i=i.updateImmediateChild(f,g))}));const l=iQ(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=s2(e);ze(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=bpe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=n2(t.pendingWriteTree_,s);let d=ape(a,e,n,u,i,c);if(!l&&!o&&!r){const h=sQ(a,e);d=d.concat(vpe(t,e,h))}return d}function G6(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=aa(o,e),l=Ag(a,c);if(l)return l});return YY(s,e,i,n,!0)}function mpe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=aa(l,n);r=r||Ag(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Ag(s,ur()):(s=new tQ,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Kg(r,!0,!1):null,a=n2(t.pendingWriteTree_,e._path),c=nQ(s,e,a,i?o.getNode():en.EMPTY_NODE,i);return epe(c)}function fI(t,e){return cQ(e,t.syncPointTree_,null,n2(t.pendingWriteTree_,ur()))}function cQ(t,e,n,r){if(Ln(t.path))return lQ(t,e,n,r);{const s=e.get(ur());n==null&&s!=null&&(n=Ag(s,ur()));let i=[];const o=Pn(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=QY(r,o);i=i.concat(cQ(a,c,l,u))}return s&&(i=i.concat(H6(s,t,r,n))),i}}function lQ(t,e,n,r){const s=e.get(ur());n==null&&s!=null&&(n=Ag(s,ur()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=QY(r,o),u=t.operationForChild(o);u&&(i=i.concat(lQ(u,a,c,l)))}),s&&(i=i.concat(H6(s,t,r,n))),i}function uQ(t,e){const n=e.query,r=aA(t,n);return{hashFn:()=>(Xfe(e)||en.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?ppe(t,n._path,r):fpe(t,n._path);{const i=mhe(s,n);return iR(t,n,null,i)}}}}function aA(t,e){const n=s2(e);return t.queryToTagMap.get(n)}function s2(t){return t._path.toString()+"$"+t._queryIdentifier}function q6(t,e){return t.tagToQueryMap.get(e)}function V6(t){const e=t.indexOf("$");return ze(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Yr(t.substr(0,e))}}function K6(t,e,n){const r=t.syncPointTree_.get(e);ze(r,"Missing sync point for query tag that we're tracking");const s=n2(t.pendingWriteTree_,e);return H6(r,n,s,null)}function ype(t){return t.fold((e,n,r)=>{if(n&&Yg(n))return[r2(n)];{let s=[];return n&&(s=rQ(n)),uc(r,(i,o)=>{s=s.concat(o)}),s}})}function w_(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(upe())(t._repo,t._path):t}function wpe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=s2(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function bpe(){return dpe++}function vpe(t,e,n){const r=e._path,s=aA(t,e),i=uQ(t,n),o=t.listenProvider_.startListening(w_(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)ze(!Yg(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Ln(l)&&u&&Yg(u))return[r2(u).query];{let h=[];return u&&(h=h.concat(rQ(u).map(f=>f.query))),uc(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(w_(u),aA(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Y6(n)}node(){return this.node_}}class Q6{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ci(this.path_,e);return new Q6(this.syncTree_,n)}node(){return G6(this.syncTree_,this.path_)}}const Epe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Sj=function(t,e,n){if(!t||typeof t!="object")return t;if(ze(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Cpe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _pe(t[".sv"],e);ze(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Cpe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ze(!1,"Unexpected server value: "+t)}},_pe=function(t,e,n){t.hasOwnProperty("increment")||ze(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ze(!1,"Unexpected increment value: "+r);const s=e.node();if(ze(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Ape=function(t,e,n,r){return J6(e,new Q6(n,t),r)},dQ=function(t,e,n){return J6(t,new Y6(e),n)};function J6(t,e,n){const r=t.getPriority().val(),s=Sj(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Sj(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Oi(a,Li(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Oi(s))),o.forEachChild(qs,(a,c)=>{const l=J6(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function X6(t,e){let n=e instanceof Yr?e:new Yr(e),r=t,s=Pn(n);for(;s!==null;){const i=vE(r.node.children,s)||{children:{},childCount:0};r=new Z6(s,r,i),n=is(n),s=Pn(n)}return r}function bC(t){return t.node.value}function hQ(t,e){t.node.value=e,rB(t)}function fQ(t){return t.node.childCount>0}function Spe(t){return bC(t)===void 0&&!fQ(t)}function i2(t,e){uc(t.node.children,(n,r)=>{e(new Z6(n,t,r))})}function pQ(t,e,n,r){n&&e(t),i2(t,s=>{pQ(s,e,!0)})}function Ipe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function pI(t){return new Yr(t.parent===null?t.name:pI(t.parent)+"/"+t.name)}function rB(t){t.parent!==null&&Npe(t.parent,t.name,t)}function Npe(t,e,n){const r=Spe(n),s=Of(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,rB(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,rB(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpe=/[\[\].#$\/\u0000-\u001F\u007F]/,Tpe=/[\[\].#$\u0000-\u001F\u007F]/,IO=10*1024*1024,gQ=function(t){return typeof t=="string"&&t.length!==0&&!xpe.test(t)},mQ=function(t){return typeof t=="string"&&t.length!==0&&!Tpe.test(t)},Rpe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mQ(t)},kpe=function(t,e,n,r){e8(x6(t,"value"),e,n)},e8=function(t,e,n){const r=n instanceof Yr?new Yhe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Wm(r));if(typeof e=="function")throw new Error(t+"contains a function "+Wm(r)+" with contents = "+e.toString());if(fY(e))throw new Error(t+"contains "+e.toString()+" "+Wm(r));if(typeof e=="string"&&e.length>IO/3&&Xk(e)>IO)throw new Error(t+"contains a string greater than "+IO+" utf8 bytes "+Wm(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(uc(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!gQ(o)))throw new Error(t+" contains an invalid key ("+o+") "+Wm(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Qhe(r,o),e8(t,a,r),Jhe(r)}),s&&i)throw new Error(t+' contains ".value" child '+Wm(r)+" in addition to actual children.")}},yQ=function(t,e,n,r){if(!mQ(n))throw new Error(x6(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Ppe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yQ(t,e,n)},wQ=function(t,e){if(Pn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Ope=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gQ(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Rpe(n))throw new Error(x6(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dpe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function t8(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!D6(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function bQ(t,e,n){t8(t,n),vQ(t,r=>D6(r,e))}function Yd(t,e,n){t8(t,n),vQ(t,r=>ku(r,e)||ku(e,r))}function vQ(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Mpe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mpe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();p_&&Uo("event: "+n.toString()),wC(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe="repo_interrupt",Lpe=25;class Upe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dpe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=JT(),this.transactionQueueTree_=new Z6,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $pe(t,e,n){if(t.stats_=P6(t.repoInfo_),t.forceRestClient_||vhe())t.server_=new QT(t.repoInfo_,(r,s,i,o)=>{Ij(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Nj(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ei(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new lf(t.repoInfo_,e,(r,s,i,o)=>{Ij(t,r,s,i,o)},r=>{Nj(t,r)},r=>{jpe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=She(t.repoInfo_,()=>new _fe(t.stats_,t.server_)),t.infoData_=new wfe,t.infoSyncTree_=new Aj({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=hI(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),r8(t,"connected",!1),t.serverSyncTree_=new Aj({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Yd(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Fpe(t){const n=t.infoData_.getNode(new Yr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function n8(t){return Epe({timestamp:Fpe(t)})}function Ij(t,e,n,r,s){t.dataUpdateCount++;const i=new Yr(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=GT(n,l=>Li(l));o=gpe(t.serverSyncTree_,i,c,s)}else{const c=Li(n);o=aQ(t.serverSyncTree_,i,c,s)}else if(r){const c=GT(n,l=>Li(l));o=hpe(t.serverSyncTree_,i,c)}else{const c=Li(n);o=hI(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=a2(t,i)),Yd(t.eventQueue_,a,o)}function Nj(t,e){r8(t,"connected",e),e===!1&&Hpe(t)}function jpe(t,e){uc(e,(n,r)=>{r8(t,n,r)})}function r8(t,e,n){const r=new Yr("/.info/"+e),s=Li(n);t.infoData_.updateSnapshot(r,s);const i=hI(t.infoSyncTree_,r,s);Yd(t.eventQueue_,r,i)}function EQ(t){return t.nextWriteId_++}function Wpe(t,e,n){const r=mpe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Li(s).withIndex(e._queryParams.getIndex());nB(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=hI(t.serverSyncTree_,e._path,i);else{const a=aA(t.serverSyncTree_,e);o=aQ(t.serverSyncTree_,e._path,i,a)}return Yd(t.eventQueue_,e._path,o),iR(t.serverSyncTree_,e,n,null,!0),i},s=>(o2(t,"get for query "+Ei(e)+" failed: "+s),Promise.reject(new Error(s))))}function zpe(t,e,n,r,s){o2(t,"set",{path:e.toString(),value:n,priority:r});const i=n8(t),o=Li(n,r),a=G6(t.serverSyncTree_,e),c=dQ(o,a,i),l=EQ(t),u=oQ(t.serverSyncTree_,e,c,l,!0);t8(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||rc("set at "+e+" failed: "+h);const g=hy(t.serverSyncTree_,l,!p);Yd(t.eventQueue_,e,g),Kpe(t,s,h,f)});const d=IQ(t,e);a2(t,d),Yd(t.eventQueue_,d,[])}function Hpe(t){o2(t,"onDisconnectEvents");const e=n8(t),n=JT();JM(t.onDisconnect_,ur(),(s,i)=>{const o=Ape(s,i,t.serverSyncTree_,e);HY(n,s,o)});let r=[];JM(n,ur(),(s,i)=>{r=r.concat(hI(t.serverSyncTree_,s,i));const o=IQ(t,s);a2(t,o)}),t.onDisconnect_=JT(),Yd(t.eventQueue_,ur(),r)}function Gpe(t,e,n){let r;Pn(e._path)===".info"?r=nB(t.infoSyncTree_,e,n):r=nB(t.serverSyncTree_,e,n),bQ(t.eventQueue_,e._path,r)}function qpe(t,e,n){let r;Pn(e._path)===".info"?r=iR(t.infoSyncTree_,e,n):r=iR(t.serverSyncTree_,e,n),bQ(t.eventQueue_,e._path,r)}function Vpe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Bpe)}function o2(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Uo(n,...e)}function Kpe(t,e,n,r){e&&wC(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function CQ(t,e,n){return G6(t.serverSyncTree_,e,n)||en.EMPTY_NODE}function s8(t,e=t.transactionQueueTree_){if(e||c2(t,e),bC(e)){const n=AQ(t,e);ze(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Ype(t,pI(e),n)}else fQ(e)&&i2(e,n=>{s8(t,n)})}function Ype(t,e,n){const r=n.map(l=>l.currentWriteId),s=CQ(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];ze(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=aa(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{o2(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(hy(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();c2(t,X6(t.transactionQueueTree_,e)),s8(t,t.transactionQueueTree_),Yd(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)wC(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{rc("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}a2(t,e)}},o)}function a2(t,e){const n=_Q(t,e),r=pI(n),s=AQ(t,n);return Qpe(t,s,r),r}function Qpe(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=aa(n,c.path);let u=!1,d;if(ze(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(hy(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Lpe)u=!0,d="maxretry",s=s.concat(hy(t.serverSyncTree_,c.currentWriteId,!0));else{const h=CQ(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){e8("transaction failed: Data returned ",f,c.path);let p=Li(f);typeof f=="object"&&f!=null&&Of(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=c.currentWriteId,y=n8(t),w=dQ(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=EQ(t),o.splice(o.indexOf(m),1),s=s.concat(oQ(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(hy(t.serverSyncTree_,m,!0))}else u=!0,d="nodata",s=s.concat(hy(t.serverSyncTree_,c.currentWriteId,!0))}Yd(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}c2(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)wC(r[a]);s8(t,t.transactionQueueTree_)}function _Q(t,e){let n,r=t.transactionQueueTree_;for(n=Pn(e);n!==null&&bC(r)===void 0;)r=X6(r,n),e=is(e),n=Pn(e);return r}function AQ(t,e){const n=[];return SQ(t,e,n),n.sort((r,s)=>r.order-s.order),n}function SQ(t,e,n){const r=bC(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);i2(e,s=>{SQ(t,s,n)})}function c2(t,e){const n=bC(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,hQ(e,n.length>0?n:void 0)}i2(e,r=>{c2(t,r)})}function IQ(t,e){const n=pI(_Q(t,e)),r=X6(t.transactionQueueTree_,e);return Ipe(r,s=>{NO(t,s)}),NO(t,r),pQ(r,s=>{NO(t,s)}),n}function NO(t,e){const n=bC(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ze(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ze(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(hy(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?hQ(e,void 0):n.length=i+1,Yd(t.eventQueue_,pI(e),s);for(let o=0;o<r.length;o++)wC(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jpe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Zpe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rc(`Invalid query segment '${n}' in query '${t}'`)}return e}const xj=function(t,e){const n=Xpe(t),r=n.namespace;n.domain==="firebase.com"&&vf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&vf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dhe();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new SY(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Yr(n.pathString)}},Xpe=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=Jpe(t.substring(u,d)));const h=Zpe(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ege{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ei(this.snapshot.exportVal())}}class tge{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ze(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ln(this._path)?null:DY(this._path)}get ref(){return new Df(this._repo,this._path)}get _queryIdentifier(){const e=fj(this._queryParams),n=R6(e);return n==="{}"?"default":n}get _queryObject(){return fj(this._queryParams)}isEqual(e){if(e=mC(e),!(e instanceof i8))return!1;const n=this._repo===e._repo,r=D6(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Khe(this._path)}}class Df extends i8{constructor(e,n){super(e,n,new U6,!1)}get parent(){const e=BY(this._path);return e===null?null:new Df(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class cA{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Yr(e),r=sB(this.ref,e);return new cA(this._node.getChild(n),r,qs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new cA(s,sB(this.ref,r),qs)))}hasChild(e){const n=new Yr(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nc(t,e){return t=mC(t),t._checkNotDeleted("ref"),e!==void 0?sB(t._root,e):t._root}function sB(t,e){return t=mC(t),Pn(t._path)===null?Ppe("child","path",e):yQ("child","path",e),new Df(t._repo,Ci(t._path,e))}function xQ(t){return wQ("remove",t._path),b_(t,null)}function b_(t,e){t=mC(t),wQ("set",t._path),kpe("set",e,t._path);const n=new Zk;return zpe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Zm(t){t=mC(t);const e=new NQ(()=>{}),n=new l2(e);return Wpe(t._repo,t,n).then(r=>new cA(r,new Df(t._repo,t._path),t._queryParams.getIndex()))}class l2{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ege("value",this,new cA(e.snapshotNode,new Df(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tge(this,e,n):null}matches(e){return e instanceof l2?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function nge(t,e,n,r,s){const i=new NQ(n,void 0),o=new l2(i);return Gpe(t._repo,t,o),()=>qpe(t._repo,t,o)}function Tj(t,e,n,r){return nge(t,"value",e)}spe(Df);lpe(Df);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rge="FIREBASE_DATABASE_EMULATOR_HOST",iB={};let sge=!1;function ige(t,e,n,r){t.repoInfo_=new SY(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function oge(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||vf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Uo("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=xj(i,s),a=o.repoInfo,c;typeof process<"u"&&YF&&(c=YF[rge]),c?(i=`http://${c}?ns=${a.namespace}`,o=xj(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Che(t.name,t.options,e);Ope("Invalid Firebase Database URL",o),Ln(o.path)||vf("Database URL must point to the root of a Firebase Database (not including a child path).");const u=cge(a,t,l,new Ehe(t.name,n));return new lge(u,t)}function age(t,e){const n=iB[e];(!n||n[t.key]!==t)&&vf(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Vpe(t),delete n[t.key]}function cge(t,e,n,r){let s=iB[e.name];s||(s={},iB[e.name]=s);let i=s[t.toURLString()];return i&&vf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Upe(t,sge,n,r),s[t.toURLString()]=i,i}class lge{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($pe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Df(this._repo,ur())),this._rootInternal}_delete(){return this._rootInternal!==null&&(age(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vf("Cannot call "+e+" on a deleted database.")}}function uge(t=aY(),e){const n=zde(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Pue("database");r&&dge(n,...r)}return n}function dge(t,e,n,r={}){t=mC(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&vf("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&vf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new qx(qx.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Oue(r.mockUserToken,t.app.options.projectId);i=new qx(o)}ige(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hge(t){ihe(qde),qT(new Z_("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return oge(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Zb(QF,JF,t),Zb(QF,JF,"esm2017")}lf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};lf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};hge();const fge={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},pge=Vde().length?aY():oY(fge),oR=uge(pge);var oB={},TQ={exports:{}},Zc={},RQ={exports:{}},kQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,B){var j=x.length;x.push(B);e:for(;0<j;){var U=j-1>>>1,I=x[U];if(0<s(I,B))x[U]=B,x[j]=I,j=U;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var B=x[0],j=x.pop();if(j!==B){x[0]=j;e:for(var U=0,I=x.length,H=I>>>1;U<H;){var re=2*(U+1)-1,ne=x[re],ge=re+1,te=x[ge];if(0>s(ne,j))ge<I&&0>s(te,ne)?(x[U]=te,x[ge]=j,U=ge):(x[U]=ne,x[re]=j,U=re);else if(ge<I&&0>s(te,j))x[U]=te,x[ge]=j,U=ge;else break e}}return B}function s(x,B){var j=x.sortIndex-B.sortIndex;return j!==0?j:x.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(x){for(var B=n(l);B!==null;){if(B.callback===null)r(l);else if(B.startTime<=x)r(l),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(l)}}function N(x){if(g=!1,C(x),!p)if(n(c)!==null)p=!0,_(S);else{var B=n(l);B!==null&&R(N,B.startTime-x)}}function S(x,B){p=!1,g&&(g=!1,y(L),L=-1),f=!0;var j=h;try{for(C(B),d=n(c);d!==null&&(!(d.expirationTime>B)||x&&!F());){var U=d.callback;if(typeof U=="function"){d.callback=null,h=d.priorityLevel;var I=U(d.expirationTime<=B);B=t.unstable_now(),typeof I=="function"?d.callback=I:d===n(c)&&r(c),C(B)}else r(c);d=n(c)}if(d!==null)var H=!0;else{var re=n(l);re!==null&&R(N,re.startTime-B),H=!1}return H}finally{d=null,h=j,f=!1}}var P=!1,O=null,L=-1,M=5,W=-1;function F(){return!(t.unstable_now()-W<M)}function V(){if(O!==null){var x=t.unstable_now();W=x;var B=!0;try{B=O(!0,x)}finally{B?$():(P=!1,O=null)}}else P=!1}var $;if(typeof w=="function")$=function(){w(V)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,E=v.port2;v.port1.onmessage=V,$=function(){E.postMessage(null)}}else $=function(){m(V,0)};function _(x){O=x,P||(P=!0,$())}function R(x,B){L=m(function(){x(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,_(S))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(x){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var j=h;h=B;try{return x()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,B){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var j=h;h=x;try{return B()}finally{h=j}},t.unstable_scheduleCallback=function(x,B,j){var U=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?U+j:U):j=U,x){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=j+I,x={id:u++,callback:B,priorityLevel:x,startTime:j,expirationTime:I,sortIndex:-1},j>U?(x.sortIndex=j,e(l,x),n(c)===null&&x===n(l)&&(g?(y(L),L=-1):g=!0,R(N,j-U))):(x.sortIndex=I,e(c,x),p||f||(p=!0,_(S))),x},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(x){var B=h;return function(){var j=h;h=B;try{return x.apply(this,arguments)}finally{h=j}}}})(kQ);RQ.exports=kQ;var gge=RQ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mge=G,Yc=gge;function Me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PQ=new Set,lA={};function X0(t,e){AE(t,e),AE(t+"Capture",e)}function AE(t,e){for(lA[t]=e,t=0;t<e.length;t++)PQ.add(e[t])}var Ef=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aB=Object.prototype.hasOwnProperty,yge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rj={},kj={};function wge(t){return aB.call(kj,t)?!0:aB.call(Rj,t)?!1:yge.test(t)?kj[t]=!0:(Rj[t]=!0,!1)}function bge(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vge(t,e,n,r){if(e===null||typeof e>"u"||bge(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function va(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var bo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bo[t]=new va(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bo[e]=new va(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bo[t]=new va(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bo[t]=new va(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bo[t]=new va(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bo[t]=new va(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bo[t]=new va(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bo[t]=new va(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bo[t]=new va(t,5,!1,t.toLowerCase(),null,!1,!1)});var o8=/[\-:]([a-z])/g;function a8(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(o8,a8);bo[e]=new va(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(o8,a8);bo[e]=new va(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(o8,a8);bo[e]=new va(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bo[t]=new va(t,1,!1,t.toLowerCase(),null,!1,!1)});bo.xlinkHref=new va("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bo[t]=new va(t,1,!1,t.toLowerCase(),null,!0,!0)});function c8(t,e,n,r){var s=bo.hasOwnProperty(e)?bo[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vge(e,n,s,r)&&(n=null),r||s===null?wge(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mf=mge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vN=Symbol.for("react.element"),Nb=Symbol.for("react.portal"),xb=Symbol.for("react.fragment"),l8=Symbol.for("react.strict_mode"),cB=Symbol.for("react.profiler"),OQ=Symbol.for("react.provider"),DQ=Symbol.for("react.context"),u8=Symbol.for("react.forward_ref"),lB=Symbol.for("react.suspense"),uB=Symbol.for("react.suspense_list"),d8=Symbol.for("react.memo"),Cp=Symbol.for("react.lazy"),MQ=Symbol.for("react.offscreen"),Pj=Symbol.iterator;function t1(t){return t===null||typeof t!="object"?null:(t=Pj&&t[Pj]||t["@@iterator"],typeof t=="function"?t:null)}var Ls=Object.assign,xO;function W1(t){if(xO===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xO=e&&e[1]||""}return`
`+xO+t}var TO=!1;function RO(t,e){if(!t||TO)return"";TO=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{TO=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?W1(t):""}function Ege(t){switch(t.tag){case 5:return W1(t.type);case 16:return W1("Lazy");case 13:return W1("Suspense");case 19:return W1("SuspenseList");case 0:case 2:case 15:return t=RO(t.type,!1),t;case 11:return t=RO(t.type.render,!1),t;case 1:return t=RO(t.type,!0),t;default:return""}}function dB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xb:return"Fragment";case Nb:return"Portal";case cB:return"Profiler";case l8:return"StrictMode";case lB:return"Suspense";case uB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case DQ:return(t.displayName||"Context")+".Consumer";case OQ:return(t._context.displayName||"Context")+".Provider";case u8:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d8:return e=t.displayName||null,e!==null?e:dB(t.type)||"Memo";case Cp:e=t._payload,t=t._init;try{return dB(t(e))}catch{}}return null}function Cge(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dB(e);case 8:return e===l8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qg(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function BQ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _ge(t){var e=BQ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function EN(t){t._valueTracker||(t._valueTracker=_ge(t))}function LQ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=BQ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function aR(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hB(t,e){var n=e.checked;return Ls({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oj(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qg(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UQ(t,e){e=e.checked,e!=null&&c8(t,"checked",e,!1)}function fB(t,e){UQ(t,e);var n=Qg(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pB(t,e.type,n):e.hasOwnProperty("defaultValue")&&pB(t,e.type,Qg(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dj(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pB(t,e,n){(e!=="number"||aR(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var z1=Array.isArray;function tv(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qg(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return Ls({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mj(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Me(92));if(z1(n)){if(1<n.length)throw Error(Me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qg(n)}}function $Q(t,e){var n=Qg(e.value),r=Qg(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bj(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FQ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FQ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var CN,jQ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(CN=CN||document.createElement("div"),CN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=CN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uA(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var v_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Age=["Webkit","ms","Moz","O"];Object.keys(v_).forEach(function(t){Age.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),v_[e]=v_[t]})});function WQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||v_.hasOwnProperty(t)&&v_[t]?(""+e).trim():e+"px"}function zQ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=WQ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Sge=Ls({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yB(t,e){if(e){if(Sge[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function wB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bB=null;function h8(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vB=null,nv=null,rv=null;function Lj(t){if(t=yI(t)){if(typeof vB!="function")throw Error(Me(280));var e=t.stateNode;e&&(e=p2(e),vB(t.stateNode,t.type,e))}}function HQ(t){nv?rv?rv.push(t):rv=[t]:nv=t}function GQ(){if(nv){var t=nv,e=rv;if(rv=nv=null,Lj(t),e)for(t=0;t<e.length;t++)Lj(e[t])}}function qQ(t,e){return t(e)}function VQ(){}var kO=!1;function KQ(t,e,n){if(kO)return t(e,n);kO=!0;try{return qQ(t,e,n)}finally{kO=!1,(nv!==null||rv!==null)&&(VQ(),GQ())}}function dA(t,e){var n=t.stateNode;if(n===null)return null;var r=p2(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Me(231,e,typeof n));return n}var EB=!1;if(Ef)try{var n1={};Object.defineProperty(n1,"passive",{get:function(){EB=!0}}),window.addEventListener("test",n1,n1),window.removeEventListener("test",n1,n1)}catch{EB=!1}function Ige(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var E_=!1,cR=null,lR=!1,CB=null,Nge={onError:function(t){E_=!0,cR=t}};function xge(t,e,n,r,s,i,o,a,c){E_=!1,cR=null,Ige.apply(Nge,arguments)}function Tge(t,e,n,r,s,i,o,a,c){if(xge.apply(this,arguments),E_){if(E_){var l=cR;E_=!1,cR=null}else throw Error(Me(198));lR||(lR=!0,CB=l)}}function ew(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YQ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uj(t){if(ew(t)!==t)throw Error(Me(188))}function Rge(t){var e=t.alternate;if(!e){if(e=ew(t),e===null)throw Error(Me(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uj(s),t;if(i===r)return Uj(s),e;i=i.sibling}throw Error(Me(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Me(189))}}if(n.alternate!==r)throw Error(Me(190))}if(n.tag!==3)throw Error(Me(188));return n.stateNode.current===n?t:e}function QQ(t){return t=Rge(t),t!==null?JQ(t):null}function JQ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JQ(t);if(e!==null)return e;t=t.sibling}return null}var ZQ=Yc.unstable_scheduleCallback,$j=Yc.unstable_cancelCallback,kge=Yc.unstable_shouldYield,Pge=Yc.unstable_requestPaint,ni=Yc.unstable_now,Oge=Yc.unstable_getCurrentPriorityLevel,f8=Yc.unstable_ImmediatePriority,XQ=Yc.unstable_UserBlockingPriority,uR=Yc.unstable_NormalPriority,Dge=Yc.unstable_LowPriority,eJ=Yc.unstable_IdlePriority,u2=null,jd=null;function Mge(t){if(jd&&typeof jd.onCommitFiberRoot=="function")try{jd.onCommitFiberRoot(u2,t,void 0,(t.current.flags&128)===128)}catch{}}var Bu=Math.clz32?Math.clz32:Uge,Bge=Math.log,Lge=Math.LN2;function Uge(t){return t>>>=0,t===0?32:31-(Bge(t)/Lge|0)|0}var _N=64,AN=4194304;function H1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dR(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=H1(a):(i&=o,i!==0&&(r=H1(i)))}else o=n&~s,o!==0?r=H1(o):i!==0&&(r=H1(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bu(e),s=1<<n,r|=t[n],e&=~s;return r}function $ge(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fge(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bu(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=$ge(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function _B(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tJ(){var t=_N;return _N<<=1,!(_N&4194240)&&(_N=64),t}function PO(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gI(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bu(e),t[e]=n}function jge(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bu(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function p8(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bu(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xr=0;function nJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rJ,g8,sJ,iJ,oJ,AB=!1,SN=[],Sg=null,Ig=null,Ng=null,hA=new Map,fA=new Map,Tp=[],Wge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fj(t,e){switch(t){case"focusin":case"focusout":Sg=null;break;case"dragenter":case"dragleave":Ig=null;break;case"mouseover":case"mouseout":Ng=null;break;case"pointerover":case"pointerout":hA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fA.delete(e.pointerId)}}function r1(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yI(e),e!==null&&g8(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zge(t,e,n,r,s){switch(e){case"focusin":return Sg=r1(Sg,t,e,n,r,s),!0;case"dragenter":return Ig=r1(Ig,t,e,n,r,s),!0;case"mouseover":return Ng=r1(Ng,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return hA.set(i,r1(hA.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fA.set(i,r1(fA.get(i)||null,t,e,n,r,s)),!0}return!1}function aJ(t){var e=fy(t.target);if(e!==null){var n=ew(e);if(n!==null){if(e=n.tag,e===13){if(e=YQ(n),e!==null){t.blockedOn=e,oJ(t.priority,function(){sJ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=SB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bB=r,n.target.dispatchEvent(r),bB=null}else return e=yI(n),e!==null&&g8(e),t.blockedOn=n,!1;e.shift()}return!0}function jj(t,e,n){Vx(t)&&n.delete(e)}function Hge(){AB=!1,Sg!==null&&Vx(Sg)&&(Sg=null),Ig!==null&&Vx(Ig)&&(Ig=null),Ng!==null&&Vx(Ng)&&(Ng=null),hA.forEach(jj),fA.forEach(jj)}function s1(t,e){t.blockedOn===e&&(t.blockedOn=null,AB||(AB=!0,Yc.unstable_scheduleCallback(Yc.unstable_NormalPriority,Hge)))}function pA(t){function e(s){return s1(s,t)}if(0<SN.length){s1(SN[0],t);for(var n=1;n<SN.length;n++){var r=SN[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sg!==null&&s1(Sg,t),Ig!==null&&s1(Ig,t),Ng!==null&&s1(Ng,t),hA.forEach(e),fA.forEach(e),n=0;n<Tp.length;n++)r=Tp[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tp.length&&(n=Tp[0],n.blockedOn===null);)aJ(n),n.blockedOn===null&&Tp.shift()}var sv=Mf.ReactCurrentBatchConfig,hR=!0;function Gge(t,e,n,r){var s=xr,i=sv.transition;sv.transition=null;try{xr=1,m8(t,e,n,r)}finally{xr=s,sv.transition=i}}function qge(t,e,n,r){var s=xr,i=sv.transition;sv.transition=null;try{xr=4,m8(t,e,n,r)}finally{xr=s,sv.transition=i}}function m8(t,e,n,r){if(hR){var s=SB(t,e,n,r);if(s===null)WO(t,e,r,fR,n),Fj(t,r);else if(zge(s,t,e,n,r))r.stopPropagation();else if(Fj(t,r),e&4&&-1<Wge.indexOf(t)){for(;s!==null;){var i=yI(s);if(i!==null&&rJ(i),i=SB(t,e,n,r),i===null&&WO(t,e,r,fR,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else WO(t,e,r,null,n)}}var fR=null;function SB(t,e,n,r){if(fR=null,t=h8(r),t=fy(t),t!==null)if(e=ew(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YQ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fR=t,null}function cJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oge()){case f8:return 1;case XQ:return 4;case uR:case Dge:return 16;case eJ:return 536870912;default:return 16}default:return 16}}var cg=null,y8=null,Kx=null;function lJ(){if(Kx)return Kx;var t,e=y8,n=e.length,r,s="value"in cg?cg.value:cg.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kx=s.slice(t,1<r?1-r:void 0)}function Yx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function IN(){return!0}function Wj(){return!1}function Xc(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?IN:Wj,this.isPropagationStopped=Wj,this}return Ls(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=IN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=IN)},persist:function(){},isPersistent:IN}),e}var vC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w8=Xc(vC),mI=Ls({},vC,{view:0,detail:0}),Vge=Xc(mI),OO,DO,i1,d2=Ls({},mI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b8,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==i1&&(i1&&t.type==="mousemove"?(OO=t.screenX-i1.screenX,DO=t.screenY-i1.screenY):DO=OO=0,i1=t),OO)},movementY:function(t){return"movementY"in t?t.movementY:DO}}),zj=Xc(d2),Kge=Ls({},d2,{dataTransfer:0}),Yge=Xc(Kge),Qge=Ls({},mI,{relatedTarget:0}),MO=Xc(Qge),Jge=Ls({},vC,{animationName:0,elapsedTime:0,pseudoElement:0}),Zge=Xc(Jge),Xge=Ls({},vC,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eme=Xc(Xge),tme=Ls({},vC,{data:0}),Hj=Xc(tme),nme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ime(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sme[t])?!!e[t]:!1}function b8(){return ime}var ome=Ls({},mI,{key:function(t){if(t.key){var e=nme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rme[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b8,charCode:function(t){return t.type==="keypress"?Yx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ame=Xc(ome),cme=Ls({},d2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gj=Xc(cme),lme=Ls({},mI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b8}),ume=Xc(lme),dme=Ls({},vC,{propertyName:0,elapsedTime:0,pseudoElement:0}),hme=Xc(dme),fme=Ls({},d2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pme=Xc(fme),gme=[9,13,27,32],v8=Ef&&"CompositionEvent"in window,C_=null;Ef&&"documentMode"in document&&(C_=document.documentMode);var mme=Ef&&"TextEvent"in window&&!C_,uJ=Ef&&(!v8||C_&&8<C_&&11>=C_),qj=" ",Vj=!1;function dJ(t,e){switch(t){case"keyup":return gme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tb=!1;function yme(t,e){switch(t){case"compositionend":return hJ(e);case"keypress":return e.which!==32?null:(Vj=!0,qj);case"textInput":return t=e.data,t===qj&&Vj?null:t;default:return null}}function wme(t,e){if(Tb)return t==="compositionend"||!v8&&dJ(t,e)?(t=lJ(),Kx=y8=cg=null,Tb=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uJ&&e.locale!=="ko"?null:e.data;default:return null}}var bme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bme[t.type]:e==="textarea"}function fJ(t,e,n,r){HQ(r),e=pR(e,"onChange"),0<e.length&&(n=new w8("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var __=null,gA=null;function vme(t){AJ(t,0)}function h2(t){var e=Pb(t);if(LQ(e))return t}function Eme(t,e){if(t==="change")return e}var pJ=!1;if(Ef){var BO;if(Ef){var LO="oninput"in document;if(!LO){var Yj=document.createElement("div");Yj.setAttribute("oninput","return;"),LO=typeof Yj.oninput=="function"}BO=LO}else BO=!1;pJ=BO&&(!document.documentMode||9<document.documentMode)}function Qj(){__&&(__.detachEvent("onpropertychange",gJ),gA=__=null)}function gJ(t){if(t.propertyName==="value"&&h2(gA)){var e=[];fJ(e,gA,t,h8(t)),KQ(vme,e)}}function Cme(t,e,n){t==="focusin"?(Qj(),__=e,gA=n,__.attachEvent("onpropertychange",gJ)):t==="focusout"&&Qj()}function _me(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return h2(gA)}function Ame(t,e){if(t==="click")return h2(e)}function Sme(t,e){if(t==="input"||t==="change")return h2(e)}function Ime(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ju=typeof Object.is=="function"?Object.is:Ime;function mA(t,e){if(ju(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!aB.call(e,s)||!ju(t[s],e[s]))return!1}return!0}function Jj(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zj(t,e){var n=Jj(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jj(n)}}function mJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yJ(){for(var t=window,e=aR();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=aR(t.document)}return e}function E8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nme(t){var e=yJ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mJ(n.ownerDocument.documentElement,n)){if(r!==null&&E8(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zj(n,i);var o=Zj(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xme=Ef&&"documentMode"in document&&11>=document.documentMode,Rb=null,IB=null,A_=null,NB=!1;function Xj(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;NB||Rb==null||Rb!==aR(r)||(r=Rb,"selectionStart"in r&&E8(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),A_&&mA(A_,r)||(A_=r,r=pR(IB,"onSelect"),0<r.length&&(e=new w8("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rb)))}function NN(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kb={animationend:NN("Animation","AnimationEnd"),animationiteration:NN("Animation","AnimationIteration"),animationstart:NN("Animation","AnimationStart"),transitionend:NN("Transition","TransitionEnd")},UO={},wJ={};Ef&&(wJ=document.createElement("div").style,"AnimationEvent"in window||(delete kb.animationend.animation,delete kb.animationiteration.animation,delete kb.animationstart.animation),"TransitionEvent"in window||delete kb.transitionend.transition);function f2(t){if(UO[t])return UO[t];if(!kb[t])return t;var e=kb[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wJ)return UO[t]=e[n];return t}var bJ=f2("animationend"),vJ=f2("animationiteration"),EJ=f2("animationstart"),CJ=f2("transitionend"),_J=new Map,e9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fm(t,e){_J.set(t,e),X0(e,[t])}for(var $O=0;$O<e9.length;$O++){var FO=e9[$O],Tme=FO.toLowerCase(),Rme=FO[0].toUpperCase()+FO.slice(1);fm(Tme,"on"+Rme)}fm(bJ,"onAnimationEnd");fm(vJ,"onAnimationIteration");fm(EJ,"onAnimationStart");fm("dblclick","onDoubleClick");fm("focusin","onFocus");fm("focusout","onBlur");fm(CJ,"onTransitionEnd");AE("onMouseEnter",["mouseout","mouseover"]);AE("onMouseLeave",["mouseout","mouseover"]);AE("onPointerEnter",["pointerout","pointerover"]);AE("onPointerLeave",["pointerout","pointerover"]);X0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));X0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));X0("onBeforeInput",["compositionend","keypress","textInput","paste"]);X0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));X0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));X0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var G1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kme=new Set("cancel close invalid load scroll toggle".split(" ").concat(G1));function t9(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tge(r,e,void 0,t),t.currentTarget=null}function AJ(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;t9(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;t9(s,a,l),i=c}}}if(lR)throw t=CB,lR=!1,CB=null,t}function hs(t,e){var n=e[PB];n===void 0&&(n=e[PB]=new Set);var r=t+"__bubble";n.has(r)||(SJ(e,t,2,!1),n.add(r))}function jO(t,e,n){var r=0;e&&(r|=4),SJ(n,t,r,e)}var xN="_reactListening"+Math.random().toString(36).slice(2);function yA(t){if(!t[xN]){t[xN]=!0,PQ.forEach(function(n){n!=="selectionchange"&&(kme.has(n)||jO(n,!1,t),jO(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xN]||(e[xN]=!0,jO("selectionchange",!1,e))}}function SJ(t,e,n,r){switch(cJ(e)){case 1:var s=Gge;break;case 4:s=qge;break;default:s=m8}n=s.bind(null,e,n,t),s=void 0,!EB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function WO(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=fy(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}KQ(function(){var l=i,u=h8(n),d=[];e:{var h=_J.get(t);if(h!==void 0){var f=w8,p=t;switch(t){case"keypress":if(Yx(n)===0)break e;case"keydown":case"keyup":f=ame;break;case"focusin":p="focus",f=MO;break;case"focusout":p="blur",f=MO;break;case"beforeblur":case"afterblur":f=MO;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=zj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Yge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=ume;break;case bJ:case vJ:case EJ:f=Zge;break;case CJ:f=hme;break;case"scroll":f=Vge;break;case"wheel":f=pme;break;case"copy":case"cut":case"paste":f=eme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Gj}var g=(e&4)!==0,m=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var w=l,C;w!==null;){C=w;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,y!==null&&(N=dA(w,y),N!=null&&g.push(wA(w,N,C)))),m)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==bB&&(p=n.relatedTarget||n.fromElement)&&(fy(p)||p[Cf]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?fy(p):null,p!==null&&(m=ew(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=zj,N="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=Gj,N="onPointerLeave",y="onPointerEnter",w="pointer"),m=f==null?h:Pb(f),C=p==null?h:Pb(p),h=new g(N,w+"leave",f,n,u),h.target=m,h.relatedTarget=C,N=null,fy(u)===l&&(g=new g(y,w+"enter",p,n,u),g.target=C,g.relatedTarget=m,N=g),m=N,f&&p)t:{for(g=f,y=p,w=0,C=g;C;C=kw(C))w++;for(C=0,N=y;N;N=kw(N))C++;for(;0<w-C;)g=kw(g),w--;for(;0<C-w;)y=kw(y),C--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=kw(g),y=kw(y)}g=null}else g=null;f!==null&&n9(d,h,f,g,!1),p!==null&&m!==null&&n9(d,m,p,g,!0)}}e:{if(h=l?Pb(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=Eme;else if(Kj(h))if(pJ)S=Sme;else{S=_me;var P=Cme}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Ame);if(S&&(S=S(t,l))){fJ(d,S,n,u);break e}P&&P(t,h,l),t==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&pB(h,"number",h.value)}switch(P=l?Pb(l):window,t){case"focusin":(Kj(P)||P.contentEditable==="true")&&(Rb=P,IB=l,A_=null);break;case"focusout":A_=IB=Rb=null;break;case"mousedown":NB=!0;break;case"contextmenu":case"mouseup":case"dragend":NB=!1,Xj(d,n,u);break;case"selectionchange":if(xme)break;case"keydown":case"keyup":Xj(d,n,u)}var O;if(v8)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Tb?dJ(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(uJ&&n.locale!=="ko"&&(Tb||L!=="onCompositionStart"?L==="onCompositionEnd"&&Tb&&(O=lJ()):(cg=u,y8="value"in cg?cg.value:cg.textContent,Tb=!0)),P=pR(l,L),0<P.length&&(L=new Hj(L,t,null,n,u),d.push({event:L,listeners:P}),O?L.data=O:(O=hJ(n),O!==null&&(L.data=O)))),(O=mme?yme(t,n):wme(t,n))&&(l=pR(l,"onBeforeInput"),0<l.length&&(u=new Hj("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=O))}AJ(d,e)})}function wA(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pR(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=dA(t,n),i!=null&&r.unshift(wA(t,i,s)),i=dA(t,e),i!=null&&r.push(wA(t,i,s))),t=t.return}return r}function kw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n9(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=dA(n,i),c!=null&&o.unshift(wA(n,c,a))):s||(c=dA(n,i),c!=null&&o.push(wA(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Pme=/\r\n?/g,Ome=/\u0000|\uFFFD/g;function r9(t){return(typeof t=="string"?t:""+t).replace(Pme,`
`).replace(Ome,"")}function TN(t,e,n){if(e=r9(e),r9(t)!==e&&n)throw Error(Me(425))}function gR(){}var xB=null,TB=null;function RB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kB=typeof setTimeout=="function"?setTimeout:void 0,Dme=typeof clearTimeout=="function"?clearTimeout:void 0,s9=typeof Promise=="function"?Promise:void 0,Mme=typeof queueMicrotask=="function"?queueMicrotask:typeof s9<"u"?function(t){return s9.resolve(null).then(t).catch(Bme)}:kB;function Bme(t){setTimeout(function(){throw t})}function zO(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),pA(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pA(e)}function xg(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function i9(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var EC=Math.random().toString(36).slice(2),Od="__reactFiber$"+EC,bA="__reactProps$"+EC,Cf="__reactContainer$"+EC,PB="__reactEvents$"+EC,Lme="__reactListeners$"+EC,Ume="__reactHandles$"+EC;function fy(t){var e=t[Od];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cf]||n[Od]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=i9(t);t!==null;){if(n=t[Od])return n;t=i9(t)}return e}t=n,n=t.parentNode}return null}function yI(t){return t=t[Od]||t[Cf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pb(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Me(33))}function p2(t){return t[bA]||null}var OB=[],Ob=-1;function pm(t){return{current:t}}function gs(t){0>Ob||(t.current=OB[Ob],OB[Ob]=null,Ob--)}function os(t,e){Ob++,OB[Ob]=t.current,t.current=e}var Jg={},Wo=pm(Jg),sc=pm(!1),b0=Jg;function SE(t,e){var n=t.type.contextTypes;if(!n)return Jg;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ic(t){return t=t.childContextTypes,t!=null}function mR(){gs(sc),gs(Wo)}function o9(t,e,n){if(Wo.current!==Jg)throw Error(Me(168));os(Wo,e),os(sc,n)}function IJ(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Me(108,Cge(t)||"Unknown",s));return Ls({},n,r)}function yR(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jg,b0=Wo.current,os(Wo,t),os(sc,sc.current),!0}function a9(t,e,n){var r=t.stateNode;if(!r)throw Error(Me(169));n?(t=IJ(t,e,b0),r.__reactInternalMemoizedMergedChildContext=t,gs(sc),gs(Wo),os(Wo,t)):gs(sc),os(sc,n)}var Oh=null,g2=!1,HO=!1;function NJ(t){Oh===null?Oh=[t]:Oh.push(t)}function $me(t){g2=!0,NJ(t)}function gm(){if(!HO&&Oh!==null){HO=!0;var t=0,e=xr;try{var n=Oh;for(xr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Oh=null,g2=!1}catch(s){throw Oh!==null&&(Oh=Oh.slice(t+1)),ZQ(f8,gm),s}finally{xr=e,HO=!1}}return null}var Db=[],Mb=0,wR=null,bR=0,Tl=[],Rl=0,v0=null,nf=1,rf="";function zm(t,e){Db[Mb++]=bR,Db[Mb++]=wR,wR=t,bR=e}function xJ(t,e,n){Tl[Rl++]=nf,Tl[Rl++]=rf,Tl[Rl++]=v0,v0=t;var r=nf;t=rf;var s=32-Bu(r)-1;r&=~(1<<s),n+=1;var i=32-Bu(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,nf=1<<32-Bu(e)+s|n<<s|r,rf=i+t}else nf=1<<i|n<<s|r,rf=t}function C8(t){t.return!==null&&(zm(t,1),xJ(t,1,0))}function _8(t){for(;t===wR;)wR=Db[--Mb],Db[Mb]=null,bR=Db[--Mb],Db[Mb]=null;for(;t===v0;)v0=Tl[--Rl],Tl[Rl]=null,rf=Tl[--Rl],Tl[Rl]=null,nf=Tl[--Rl],Tl[Rl]=null}var qc=null,zc=null,Ns=!1,_u=null;function TJ(t,e){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c9(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qc=t,zc=xg(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qc=t,zc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=v0!==null?{id:nf,overflow:rf}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qc=t,zc=null,!0):!1;default:return!1}}function DB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function MB(t){if(Ns){var e=zc;if(e){var n=e;if(!c9(t,e)){if(DB(t))throw Error(Me(418));e=xg(n.nextSibling);var r=qc;e&&c9(t,e)?TJ(r,n):(t.flags=t.flags&-4097|2,Ns=!1,qc=t)}}else{if(DB(t))throw Error(Me(418));t.flags=t.flags&-4097|2,Ns=!1,qc=t}}}function l9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qc=t}function RN(t){if(t!==qc)return!1;if(!Ns)return l9(t),Ns=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!RB(t.type,t.memoizedProps)),e&&(e=zc)){if(DB(t))throw RJ(),Error(Me(418));for(;e;)TJ(t,e),e=xg(e.nextSibling)}if(l9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zc=xg(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zc=null}}else zc=qc?xg(t.stateNode.nextSibling):null;return!0}function RJ(){for(var t=zc;t;)t=xg(t.nextSibling)}function IE(){zc=qc=null,Ns=!1}function A8(t){_u===null?_u=[t]:_u.push(t)}var Fme=Mf.ReactCurrentBatchConfig;function o1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Me(309));var r=n.stateNode}if(!r)throw Error(Me(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Me(284));if(!n._owner)throw Error(Me(290,t))}return t}function kN(t,e){throw t=Object.prototype.toString.call(e),Error(Me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function u9(t){var e=t._init;return e(t._payload)}function kJ(t){function e(y,w){if(t){var C=y.deletions;C===null?(y.deletions=[w],y.flags|=16):C.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=Pg(y,w),y.index=0,y.sibling=null,y}function i(y,w,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<w?(y.flags|=2,w):C):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,C,N){return w===null||w.tag!==6?(w=JO(C,y.mode,N),w.return=y,w):(w=s(w,C),w.return=y,w)}function c(y,w,C,N){var S=C.type;return S===xb?u(y,w,C.props.children,N,C.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cp&&u9(S)===w.type)?(N=s(w,C.props),N.ref=o1(y,w,C),N.return=y,N):(N=nT(C.type,C.key,C.props,null,y.mode,N),N.ref=o1(y,w,C),N.return=y,N)}function l(y,w,C,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=ZO(C,y.mode,N),w.return=y,w):(w=s(w,C.children||[]),w.return=y,w)}function u(y,w,C,N,S){return w===null||w.tag!==7?(w=r0(C,y.mode,N,S),w.return=y,w):(w=s(w,C),w.return=y,w)}function d(y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=JO(""+w,y.mode,C),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vN:return C=nT(w.type,w.key,w.props,null,y.mode,C),C.ref=o1(y,null,w),C.return=y,C;case Nb:return w=ZO(w,y.mode,C),w.return=y,w;case Cp:var N=w._init;return d(y,N(w._payload),C)}if(z1(w)||t1(w))return w=r0(w,y.mode,C,null),w.return=y,w;kN(y,w)}return null}function h(y,w,C,N){var S=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return S!==null?null:a(y,w,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case vN:return C.key===S?c(y,w,C,N):null;case Nb:return C.key===S?l(y,w,C,N):null;case Cp:return S=C._init,h(y,w,S(C._payload),N)}if(z1(C)||t1(C))return S!==null?null:u(y,w,C,N,null);kN(y,C)}return null}function f(y,w,C,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(C)||null,a(w,y,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case vN:return y=y.get(N.key===null?C:N.key)||null,c(w,y,N,S);case Nb:return y=y.get(N.key===null?C:N.key)||null,l(w,y,N,S);case Cp:var P=N._init;return f(y,w,C,P(N._payload),S)}if(z1(N)||t1(N))return y=y.get(C)||null,u(w,y,N,S,null);kN(w,N)}return null}function p(y,w,C,N){for(var S=null,P=null,O=w,L=w=0,M=null;O!==null&&L<C.length;L++){O.index>L?(M=O,O=null):M=O.sibling;var W=h(y,O,C[L],N);if(W===null){O===null&&(O=M);break}t&&O&&W.alternate===null&&e(y,O),w=i(W,w,L),P===null?S=W:P.sibling=W,P=W,O=M}if(L===C.length)return n(y,O),Ns&&zm(y,L),S;if(O===null){for(;L<C.length;L++)O=d(y,C[L],N),O!==null&&(w=i(O,w,L),P===null?S=O:P.sibling=O,P=O);return Ns&&zm(y,L),S}for(O=r(y,O);L<C.length;L++)M=f(O,y,L,C[L],N),M!==null&&(t&&M.alternate!==null&&O.delete(M.key===null?L:M.key),w=i(M,w,L),P===null?S=M:P.sibling=M,P=M);return t&&O.forEach(function(F){return e(y,F)}),Ns&&zm(y,L),S}function g(y,w,C,N){var S=t1(C);if(typeof S!="function")throw Error(Me(150));if(C=S.call(C),C==null)throw Error(Me(151));for(var P=S=null,O=w,L=w=0,M=null,W=C.next();O!==null&&!W.done;L++,W=C.next()){O.index>L?(M=O,O=null):M=O.sibling;var F=h(y,O,W.value,N);if(F===null){O===null&&(O=M);break}t&&O&&F.alternate===null&&e(y,O),w=i(F,w,L),P===null?S=F:P.sibling=F,P=F,O=M}if(W.done)return n(y,O),Ns&&zm(y,L),S;if(O===null){for(;!W.done;L++,W=C.next())W=d(y,W.value,N),W!==null&&(w=i(W,w,L),P===null?S=W:P.sibling=W,P=W);return Ns&&zm(y,L),S}for(O=r(y,O);!W.done;L++,W=C.next())W=f(O,y,L,W.value,N),W!==null&&(t&&W.alternate!==null&&O.delete(W.key===null?L:W.key),w=i(W,w,L),P===null?S=W:P.sibling=W,P=W);return t&&O.forEach(function(V){return e(y,V)}),Ns&&zm(y,L),S}function m(y,w,C,N){if(typeof C=="object"&&C!==null&&C.type===xb&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case vN:e:{for(var S=C.key,P=w;P!==null;){if(P.key===S){if(S=C.type,S===xb){if(P.tag===7){n(y,P.sibling),w=s(P,C.props.children),w.return=y,y=w;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cp&&u9(S)===P.type){n(y,P.sibling),w=s(P,C.props),w.ref=o1(y,P,C),w.return=y,y=w;break e}n(y,P);break}else e(y,P);P=P.sibling}C.type===xb?(w=r0(C.props.children,y.mode,N,C.key),w.return=y,y=w):(N=nT(C.type,C.key,C.props,null,y.mode,N),N.ref=o1(y,w,C),N.return=y,y=N)}return o(y);case Nb:e:{for(P=C.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(y,w.sibling),w=s(w,C.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=ZO(C,y.mode,N),w.return=y,y=w}return o(y);case Cp:return P=C._init,m(y,w,P(C._payload),N)}if(z1(C))return p(y,w,C,N);if(t1(C))return g(y,w,C,N);kN(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,C),w.return=y,y=w):(n(y,w),w=JO(C,y.mode,N),w.return=y,y=w),o(y)):n(y,w)}return m}var NE=kJ(!0),PJ=kJ(!1),vR=pm(null),ER=null,Bb=null,S8=null;function I8(){S8=Bb=ER=null}function N8(t){var e=vR.current;gs(vR),t._currentValue=e}function BB(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function iv(t,e){ER=t,S8=Bb=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tc=!0),t.firstContext=null)}function Ll(t){var e=t._currentValue;if(S8!==t)if(t={context:t,memoizedValue:e,next:null},Bb===null){if(ER===null)throw Error(Me(308));Bb=t,ER.dependencies={lanes:0,firstContext:t}}else Bb=Bb.next=t;return e}var py=null;function x8(t){py===null?py=[t]:py.push(t)}function OJ(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,x8(e)):(n.next=s.next,s.next=n),e.interleaved=n,_f(t,r)}function _f(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _p=!1;function T8(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DJ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function uf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tg(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tr&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_f(t,n)}return s=r.interleaved,s===null?(e.next=e,x8(r)):(e.next=s.next,s.next=e),r.interleaved=e,_f(t,n)}function Qx(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p8(t,n)}}function d9(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function CR(t,e,n,r){var s=t.updateQueue;_p=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ls({},d,h);break e;case 2:_p=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);C0|=o,t.lanes=o,t.memoizedState=d}}function h9(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Me(191,s));s.call(r)}}}var wI={},Wd=pm(wI),vA=pm(wI),EA=pm(wI);function gy(t){if(t===wI)throw Error(Me(174));return t}function R8(t,e){switch(os(EA,e),os(vA,t),os(Wd,wI),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mB(e,t)}gs(Wd),os(Wd,e)}function xE(){gs(Wd),gs(vA),gs(EA)}function MJ(t){gy(EA.current);var e=gy(Wd.current),n=mB(e,t.type);e!==n&&(os(vA,t),os(Wd,n))}function k8(t){vA.current===t&&(gs(Wd),gs(vA))}var Rs=pm(0);function _R(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var GO=[];function P8(){for(var t=0;t<GO.length;t++)GO[t]._workInProgressVersionPrimary=null;GO.length=0}var Jx=Mf.ReactCurrentDispatcher,qO=Mf.ReactCurrentBatchConfig,E0=0,Bs=null,wi=null,Mi=null,AR=!1,S_=!1,CA=0,jme=0;function Ao(){throw Error(Me(321))}function O8(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ju(t[n],e[n]))return!1;return!0}function D8(t,e,n,r,s,i){if(E0=i,Bs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jx.current=t===null||t.memoizedState===null?Gme:qme,t=n(r,s),S_){i=0;do{if(S_=!1,CA=0,25<=i)throw Error(Me(301));i+=1,Mi=wi=null,e.updateQueue=null,Jx.current=Vme,t=n(r,s)}while(S_)}if(Jx.current=SR,e=wi!==null&&wi.next!==null,E0=0,Mi=wi=Bs=null,AR=!1,e)throw Error(Me(300));return t}function M8(){var t=CA!==0;return CA=0,t}function dd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?Bs.memoizedState=Mi=t:Mi=Mi.next=t,Mi}function Ul(){if(wi===null){var t=Bs.alternate;t=t!==null?t.memoizedState:null}else t=wi.next;var e=Mi===null?Bs.memoizedState:Mi.next;if(e!==null)Mi=e,wi=t;else{if(t===null)throw Error(Me(310));wi=t,t={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},Mi===null?Bs.memoizedState=Mi=t:Mi=Mi.next=t}return Mi}function _A(t,e){return typeof e=="function"?e(t):e}function VO(t){var e=Ul(),n=e.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=t;var r=wi,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((E0&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Bs.lanes|=u,C0|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,ju(r,e.memoizedState)||(tc=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Bs.lanes|=i,C0|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function KO(t){var e=Ul(),n=e.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ju(i,e.memoizedState)||(tc=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function BJ(){}function LJ(t,e){var n=Bs,r=Ul(),s=e(),i=!ju(r.memoizedState,s);if(i&&(r.memoizedState=s,tc=!0),r=r.queue,B8(FJ.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Mi!==null&&Mi.memoizedState.tag&1){if(n.flags|=2048,AA(9,$J.bind(null,n,r,s,e),void 0,null),Hi===null)throw Error(Me(349));E0&30||UJ(n,e,s)}return s}function UJ(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $J(t,e,n,r){e.value=n,e.getSnapshot=r,jJ(e)&&WJ(t)}function FJ(t,e,n){return n(function(){jJ(e)&&WJ(t)})}function jJ(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ju(t,n)}catch{return!0}}function WJ(t){var e=_f(t,1);e!==null&&Lu(e,t,1,-1)}function f9(t){var e=dd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_A,lastRenderedState:t},e.queue=t,t=t.dispatch=Hme.bind(null,Bs,t),[e.memoizedState,t]}function AA(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zJ(){return Ul().memoizedState}function Zx(t,e,n,r){var s=dd();Bs.flags|=t,s.memoizedState=AA(1|e,n,void 0,r===void 0?null:r)}function m2(t,e,n,r){var s=Ul();r=r===void 0?null:r;var i=void 0;if(wi!==null){var o=wi.memoizedState;if(i=o.destroy,r!==null&&O8(r,o.deps)){s.memoizedState=AA(e,n,i,r);return}}Bs.flags|=t,s.memoizedState=AA(1|e,n,i,r)}function p9(t,e){return Zx(8390656,8,t,e)}function B8(t,e){return m2(2048,8,t,e)}function HJ(t,e){return m2(4,2,t,e)}function GJ(t,e){return m2(4,4,t,e)}function qJ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VJ(t,e,n){return n=n!=null?n.concat([t]):null,m2(4,4,qJ.bind(null,e,t),n)}function L8(){}function KJ(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O8(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function YJ(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O8(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function QJ(t,e,n){return E0&21?(ju(n,e)||(n=tJ(),Bs.lanes|=n,C0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tc=!0),t.memoizedState=n)}function Wme(t,e){var n=xr;xr=n!==0&&4>n?n:4,t(!0);var r=qO.transition;qO.transition={};try{t(!1),e()}finally{xr=n,qO.transition=r}}function JJ(){return Ul().memoizedState}function zme(t,e,n){var r=kg(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ZJ(t))XJ(e,n);else if(n=OJ(t,e,n,r),n!==null){var s=pa();Lu(n,t,r,s),eZ(n,e,r)}}function Hme(t,e,n){var r=kg(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZJ(t))XJ(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ju(a,o)){var c=e.interleaved;c===null?(s.next=s,x8(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=OJ(t,e,s,r),n!==null&&(s=pa(),Lu(n,t,r,s),eZ(n,e,r))}}function ZJ(t){var e=t.alternate;return t===Bs||e!==null&&e===Bs}function XJ(t,e){S_=AR=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eZ(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p8(t,n)}}var SR={readContext:Ll,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useInsertionEffect:Ao,useLayoutEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useMutableSource:Ao,useSyncExternalStore:Ao,useId:Ao,unstable_isNewReconciler:!1},Gme={readContext:Ll,useCallback:function(t,e){return dd().memoizedState=[t,e===void 0?null:e],t},useContext:Ll,useEffect:p9,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zx(4194308,4,qJ.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zx(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zx(4,2,t,e)},useMemo:function(t,e){var n=dd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dd();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zme.bind(null,Bs,t),[r.memoizedState,t]},useRef:function(t){var e=dd();return t={current:t},e.memoizedState=t},useState:f9,useDebugValue:L8,useDeferredValue:function(t){return dd().memoizedState=t},useTransition:function(){var t=f9(!1),e=t[0];return t=Wme.bind(null,t[1]),dd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bs,s=dd();if(Ns){if(n===void 0)throw Error(Me(407));n=n()}else{if(n=e(),Hi===null)throw Error(Me(349));E0&30||UJ(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,p9(FJ.bind(null,r,i,t),[t]),r.flags|=2048,AA(9,$J.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dd(),e=Hi.identifierPrefix;if(Ns){var n=rf,r=nf;n=(r&~(1<<32-Bu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=CA++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jme++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qme={readContext:Ll,useCallback:KJ,useContext:Ll,useEffect:B8,useImperativeHandle:VJ,useInsertionEffect:HJ,useLayoutEffect:GJ,useMemo:YJ,useReducer:VO,useRef:zJ,useState:function(){return VO(_A)},useDebugValue:L8,useDeferredValue:function(t){var e=Ul();return QJ(e,wi.memoizedState,t)},useTransition:function(){var t=VO(_A)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:BJ,useSyncExternalStore:LJ,useId:JJ,unstable_isNewReconciler:!1},Vme={readContext:Ll,useCallback:KJ,useContext:Ll,useEffect:B8,useImperativeHandle:VJ,useInsertionEffect:HJ,useLayoutEffect:GJ,useMemo:YJ,useReducer:KO,useRef:zJ,useState:function(){return KO(_A)},useDebugValue:L8,useDeferredValue:function(t){var e=Ul();return wi===null?e.memoizedState=t:QJ(e,wi.memoizedState,t)},useTransition:function(){var t=KO(_A)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:BJ,useSyncExternalStore:LJ,useId:JJ,unstable_isNewReconciler:!1};function hu(t,e){if(t&&t.defaultProps){e=Ls({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function LB(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ls({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var y2={isMounted:function(t){return(t=t._reactInternals)?ew(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pa(),s=kg(t),i=uf(r,s);i.payload=e,n!=null&&(i.callback=n),e=Tg(t,i,s),e!==null&&(Lu(e,t,s,r),Qx(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pa(),s=kg(t),i=uf(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Tg(t,i,s),e!==null&&(Lu(e,t,s,r),Qx(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pa(),r=kg(t),s=uf(n,r);s.tag=2,e!=null&&(s.callback=e),e=Tg(t,s,r),e!==null&&(Lu(e,t,r,n),Qx(e,t,r))}};function g9(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!mA(n,r)||!mA(s,i):!0}function tZ(t,e,n){var r=!1,s=Jg,i=e.contextType;return typeof i=="object"&&i!==null?i=Ll(i):(s=ic(e)?b0:Wo.current,r=e.contextTypes,i=(r=r!=null)?SE(t,s):Jg),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y2,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function m9(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&y2.enqueueReplaceState(e,e.state,null)}function UB(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},T8(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ll(i):(i=ic(e)?b0:Wo.current,s.context=SE(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(LB(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&y2.enqueueReplaceState(s,s.state,null),CR(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function TE(t,e){try{var n="",r=e;do n+=Ege(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function YO(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $B(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kme=typeof WeakMap=="function"?WeakMap:Map;function nZ(t,e,n){n=uf(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){NR||(NR=!0,YB=r),$B(t,e)},n}function rZ(t,e,n){n=uf(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){$B(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$B(t,e),typeof r!="function"&&(Rg===null?Rg=new Set([this]):Rg.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function y9(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kme;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cye.bind(null,t,e,n),e.then(t,t))}function w9(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b9(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=uf(-1,1),e.tag=2,Tg(n,e,1))),n.lanes|=1),t)}var Yme=Mf.ReactCurrentOwner,tc=!1;function ea(t,e,n,r){e.child=t===null?PJ(e,null,n,r):NE(e,t.child,n,r)}function v9(t,e,n,r,s){n=n.render;var i=e.ref;return iv(e,s),r=D8(t,e,n,r,i,s),n=M8(),t!==null&&!tc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Af(t,e,s)):(Ns&&n&&C8(e),e.flags|=1,ea(t,e,r,s),e.child)}function E9(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!G8(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sZ(t,e,i,r,s)):(t=nT(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mA,n(o,r)&&t.ref===e.ref)return Af(t,e,s)}return e.flags|=1,t=Pg(i,r),t.ref=e.ref,t.return=e,e.child=t}function sZ(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(mA(i,r)&&t.ref===e.ref)if(tc=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(tc=!0);else return e.lanes=t.lanes,Af(t,e,s)}return FB(t,e,n,r,s)}function iZ(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},os(Ub,Oc),Oc|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,os(Ub,Oc),Oc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,os(Ub,Oc),Oc|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,os(Ub,Oc),Oc|=r;return ea(t,e,s,n),e.child}function oZ(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function FB(t,e,n,r,s){var i=ic(n)?b0:Wo.current;return i=SE(e,i),iv(e,s),n=D8(t,e,n,r,i,s),r=M8(),t!==null&&!tc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Af(t,e,s)):(Ns&&r&&C8(e),e.flags|=1,ea(t,e,n,s),e.child)}function C9(t,e,n,r,s){if(ic(n)){var i=!0;yR(e)}else i=!1;if(iv(e,s),e.stateNode===null)Xx(t,e),tZ(e,n,r),UB(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ll(l):(l=ic(n)?b0:Wo.current,l=SE(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&m9(e,o,r,l),_p=!1;var h=e.memoizedState;o.state=h,CR(e,r,o,s),c=e.memoizedState,a!==r||h!==c||sc.current||_p?(typeof u=="function"&&(LB(e,n,u,r),c=e.memoizedState),(a=_p||g9(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,DJ(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:hu(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ll(c):(c=ic(n)?b0:Wo.current,c=SE(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&m9(e,o,r,c),_p=!1,h=e.memoizedState,o.state=h,CR(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||sc.current||_p?(typeof f=="function"&&(LB(e,n,f,r),p=e.memoizedState),(l=_p||g9(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return jB(t,e,n,r,i,s)}function jB(t,e,n,r,s,i){oZ(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&a9(e,n,!1),Af(t,e,i);r=e.stateNode,Yme.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=NE(e,t.child,null,i),e.child=NE(e,null,a,i)):ea(t,e,a,i),e.memoizedState=r.state,s&&a9(e,n,!0),e.child}function aZ(t){var e=t.stateNode;e.pendingContext?o9(t,e.pendingContext,e.pendingContext!==e.context):e.context&&o9(t,e.context,!1),R8(t,e.containerInfo)}function _9(t,e,n,r,s){return IE(),A8(s),e.flags|=256,ea(t,e,n,r),e.child}var WB={dehydrated:null,treeContext:null,retryLane:0};function zB(t){return{baseLanes:t,cachePool:null,transitions:null}}function cZ(t,e,n){var r=e.pendingProps,s=Rs.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),os(Rs,s&1),t===null)return MB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=v2(o,r,0,null),t=r0(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zB(n),e.memoizedState=WB,t):U8(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Qme(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Pg(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Pg(a,i):(i=r0(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zB(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=WB,r}return i=t.child,t=i.sibling,r=Pg(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function U8(t,e){return e=v2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function PN(t,e,n,r){return r!==null&&A8(r),NE(e,t.child,null,n),t=U8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qme(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=YO(Error(Me(422))),PN(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=v2({mode:"visible",children:r.children},s,0,null),i=r0(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&NE(e,t.child,null,o),e.child.memoizedState=zB(o),e.memoizedState=WB,i);if(!(e.mode&1))return PN(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Me(419)),r=YO(i,r,void 0),PN(t,e,o,r)}if(a=(o&t.childLanes)!==0,tc||a){if(r=Hi,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_f(t,s),Lu(r,t,s,-1))}return H8(),r=YO(Error(Me(421))),PN(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lye.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zc=xg(s.nextSibling),qc=e,Ns=!0,_u=null,t!==null&&(Tl[Rl++]=nf,Tl[Rl++]=rf,Tl[Rl++]=v0,nf=t.id,rf=t.overflow,v0=e),e=U8(e,r.children),e.flags|=4096,e)}function A9(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),BB(t.return,e,n)}function QO(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lZ(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ea(t,e,r.children,n),r=Rs.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A9(t,n,e);else if(t.tag===19)A9(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(os(Rs,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&_R(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),QO(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&_R(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}QO(e,!0,n,null,i);break;case"together":QO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Af(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),C0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Me(153));if(e.child!==null){for(t=e.child,n=Pg(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pg(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jme(t,e,n){switch(e.tag){case 3:aZ(e),IE();break;case 5:MJ(e);break;case 1:ic(e.type)&&yR(e);break;case 4:R8(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;os(vR,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(os(Rs,Rs.current&1),e.flags|=128,null):n&e.child.childLanes?cZ(t,e,n):(os(Rs,Rs.current&1),t=Af(t,e,n),t!==null?t.sibling:null);os(Rs,Rs.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lZ(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),os(Rs,Rs.current),r)break;return null;case 22:case 23:return e.lanes=0,iZ(t,e,n)}return Af(t,e,n)}var uZ,HB,dZ,hZ;uZ=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HB=function(){};dZ=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,gy(Wd.current);var i=null;switch(n){case"input":s=hB(t,s),r=hB(t,r),i=[];break;case"select":s=Ls({},s,{value:void 0}),r=Ls({},r,{value:void 0}),i=[];break;case"textarea":s=gB(t,s),r=gB(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gR)}yB(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(lA.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(lA.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&hs("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};hZ=function(t,e,n,r){n!==r&&(e.flags|=4)};function a1(t,e){if(!Ns)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function So(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zme(t,e,n){var r=e.pendingProps;switch(_8(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return So(e),null;case 1:return ic(e.type)&&mR(),So(e),null;case 3:return r=e.stateNode,xE(),gs(sc),gs(Wo),P8(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(RN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_u!==null&&(ZB(_u),_u=null))),HB(t,e),So(e),null;case 5:k8(e);var s=gy(EA.current);if(n=e.type,t!==null&&e.stateNode!=null)dZ(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Me(166));return So(e),null}if(t=gy(Wd.current),RN(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Od]=e,r[bA]=i,t=(e.mode&1)!==0,n){case"dialog":hs("cancel",r),hs("close",r);break;case"iframe":case"object":case"embed":hs("load",r);break;case"video":case"audio":for(s=0;s<G1.length;s++)hs(G1[s],r);break;case"source":hs("error",r);break;case"img":case"image":case"link":hs("error",r),hs("load",r);break;case"details":hs("toggle",r);break;case"input":Oj(r,i),hs("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},hs("invalid",r);break;case"textarea":Mj(r,i),hs("invalid",r)}yB(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&TN(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&TN(r.textContent,a,t),s=["children",""+a]):lA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hs("scroll",r)}switch(n){case"input":EN(r),Dj(r,i,!0);break;case"textarea":EN(r),Bj(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gR)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FQ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Od]=e,t[bA]=r,uZ(t,e,!1,!1),e.stateNode=t;e:{switch(o=wB(n,r),n){case"dialog":hs("cancel",t),hs("close",t),s=r;break;case"iframe":case"object":case"embed":hs("load",t),s=r;break;case"video":case"audio":for(s=0;s<G1.length;s++)hs(G1[s],t);s=r;break;case"source":hs("error",t),s=r;break;case"img":case"image":case"link":hs("error",t),hs("load",t),s=r;break;case"details":hs("toggle",t),s=r;break;case"input":Oj(t,r),s=hB(t,r),hs("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ls({},r,{value:void 0}),hs("invalid",t);break;case"textarea":Mj(t,r),s=gB(t,r),hs("invalid",t);break;default:s=r}yB(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?zQ(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jQ(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uA(t,c):typeof c=="number"&&uA(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lA.hasOwnProperty(i)?c!=null&&i==="onScroll"&&hs("scroll",t):c!=null&&c8(t,i,c,o))}switch(n){case"input":EN(t),Dj(t,r,!1);break;case"textarea":EN(t),Bj(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qg(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?tv(t,!!r.multiple,i,!1):r.defaultValue!=null&&tv(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return So(e),null;case 6:if(t&&e.stateNode!=null)hZ(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Me(166));if(n=gy(EA.current),gy(Wd.current),RN(e)){if(r=e.stateNode,n=e.memoizedProps,r[Od]=e,(i=r.nodeValue!==n)&&(t=qc,t!==null))switch(t.tag){case 3:TN(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&TN(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Od]=e,e.stateNode=r}return So(e),null;case 13:if(gs(Rs),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ns&&zc!==null&&e.mode&1&&!(e.flags&128))RJ(),IE(),e.flags|=98560,i=!1;else if(i=RN(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Me(317));i[Od]=e}else IE(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;So(e),i=!1}else _u!==null&&(ZB(_u),_u=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rs.current&1?_i===0&&(_i=3):H8())),e.updateQueue!==null&&(e.flags|=4),So(e),null);case 4:return xE(),HB(t,e),t===null&&yA(e.stateNode.containerInfo),So(e),null;case 10:return N8(e.type._context),So(e),null;case 17:return ic(e.type)&&mR(),So(e),null;case 19:if(gs(Rs),i=e.memoizedState,i===null)return So(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)a1(i,!1);else{if(_i!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_R(t),o!==null){for(e.flags|=128,a1(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return os(Rs,Rs.current&1|2),e.child}t=t.sibling}i.tail!==null&&ni()>RE&&(e.flags|=128,r=!0,a1(i,!1),e.lanes=4194304)}else{if(!r)if(t=_R(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),a1(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ns)return So(e),null}else 2*ni()-i.renderingStartTime>RE&&n!==1073741824&&(e.flags|=128,r=!0,a1(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ni(),e.sibling=null,n=Rs.current,os(Rs,r?n&1|2:n&1),e):(So(e),null);case 22:case 23:return z8(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oc&1073741824&&(So(e),e.subtreeFlags&6&&(e.flags|=8192)):So(e),null;case 24:return null;case 25:return null}throw Error(Me(156,e.tag))}function Xme(t,e){switch(_8(e),e.tag){case 1:return ic(e.type)&&mR(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xE(),gs(sc),gs(Wo),P8(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return k8(e),null;case 13:if(gs(Rs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Me(340));IE()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gs(Rs),null;case 4:return xE(),null;case 10:return N8(e.type._context),null;case 22:case 23:return z8(),null;case 24:return null;default:return null}}var ON=!1,$o=!1,eye=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Lb(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gs(t,e,r)}else n.current=null}function GB(t,e,n){try{n()}catch(r){Gs(t,e,r)}}var S9=!1;function tye(t,e){if(xB=hR,t=yJ(),E8(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(TB={focusedElem:t,selectionRange:n},hR=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){e=yt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:hu(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(N){Gs(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}return p=S9,S9=!1,p}function I_(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&GB(e,n,i)}s=s.next}while(s!==r)}}function w2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qB(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fZ(t){var e=t.alternate;e!==null&&(t.alternate=null,fZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Od],delete e[bA],delete e[PB],delete e[Lme],delete e[Ume])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pZ(t){return t.tag===5||t.tag===3||t.tag===4}function I9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function VB(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gR));else if(r!==4&&(t=t.child,t!==null))for(VB(t,e,n),t=t.sibling;t!==null;)VB(t,e,n),t=t.sibling}function KB(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(KB(t,e,n),t=t.sibling;t!==null;)KB(t,e,n),t=t.sibling}var no=null,Cu=!1;function qf(t,e,n){for(n=n.child;n!==null;)gZ(t,e,n),n=n.sibling}function gZ(t,e,n){if(jd&&typeof jd.onCommitFiberUnmount=="function")try{jd.onCommitFiberUnmount(u2,n)}catch{}switch(n.tag){case 5:$o||Lb(n,e);case 6:var r=no,s=Cu;no=null,qf(t,e,n),no=r,Cu=s,no!==null&&(Cu?(t=no,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):no.removeChild(n.stateNode));break;case 18:no!==null&&(Cu?(t=no,n=n.stateNode,t.nodeType===8?zO(t.parentNode,n):t.nodeType===1&&zO(t,n),pA(t)):zO(no,n.stateNode));break;case 4:r=no,s=Cu,no=n.stateNode.containerInfo,Cu=!0,qf(t,e,n),no=r,Cu=s;break;case 0:case 11:case 14:case 15:if(!$o&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&GB(n,e,o),s=s.next}while(s!==r)}qf(t,e,n);break;case 1:if(!$o&&(Lb(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gs(n,e,a)}qf(t,e,n);break;case 21:qf(t,e,n);break;case 22:n.mode&1?($o=(r=$o)||n.memoizedState!==null,qf(t,e,n),$o=r):qf(t,e,n);break;default:qf(t,e,n)}}function N9(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eye),e.forEach(function(r){var s=uye.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tu(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:no=a.stateNode,Cu=!1;break e;case 3:no=a.stateNode.containerInfo,Cu=!0;break e;case 4:no=a.stateNode.containerInfo,Cu=!0;break e}a=a.return}if(no===null)throw Error(Me(160));gZ(i,o,s),no=null,Cu=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Gs(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mZ(e,t),e=e.sibling}function mZ(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tu(e,t),Zu(t),r&4){try{I_(3,t,t.return),w2(3,t)}catch(g){Gs(t,t.return,g)}try{I_(5,t,t.return)}catch(g){Gs(t,t.return,g)}}break;case 1:tu(e,t),Zu(t),r&512&&n!==null&&Lb(n,n.return);break;case 5:if(tu(e,t),Zu(t),r&512&&n!==null&&Lb(n,n.return),t.flags&32){var s=t.stateNode;try{uA(s,"")}catch(g){Gs(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&UQ(s,i),wB(a,o);var l=wB(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?zQ(s,d):u==="dangerouslySetInnerHTML"?jQ(s,d):u==="children"?uA(s,d):c8(s,u,d,l)}switch(a){case"input":fB(s,i);break;case"textarea":$Q(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?tv(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?tv(s,!!i.multiple,i.defaultValue,!0):tv(s,!!i.multiple,i.multiple?[]:"",!1))}s[bA]=i}catch(g){Gs(t,t.return,g)}}break;case 6:if(tu(e,t),Zu(t),r&4){if(t.stateNode===null)throw Error(Me(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Gs(t,t.return,g)}}break;case 3:if(tu(e,t),Zu(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pA(e.containerInfo)}catch(g){Gs(t,t.return,g)}break;case 4:tu(e,t),Zu(t);break;case 13:tu(e,t),Zu(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(j8=ni())),r&4&&N9(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?($o=(l=$o)||u,tu(e,t),$o=l):tu(e,t),Zu(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(yt=t,u=t.child;u!==null;){for(d=yt=u;yt!==null;){switch(h=yt,f=h.child,h.tag){case 0:case 11:case 14:case 15:I_(4,h,h.return);break;case 1:Lb(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Gs(r,n,g)}}break;case 5:Lb(h,h.return);break;case 22:if(h.memoizedState!==null){T9(d);continue}}f!==null?(f.return=h,yt=f):T9(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=WQ("display",o))}catch(g){Gs(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Gs(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tu(e,t),Zu(t),r&4&&N9(t);break;case 21:break;default:tu(e,t),Zu(t)}}function Zu(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pZ(n)){var r=n;break e}n=n.return}throw Error(Me(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uA(s,""),r.flags&=-33);var i=I9(t);KB(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=I9(t);VB(t,a,o);break;default:throw Error(Me(161))}}catch(c){Gs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nye(t,e,n){yt=t,yZ(t)}function yZ(t,e,n){for(var r=(t.mode&1)!==0;yt!==null;){var s=yt,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ON;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||$o;a=ON;var l=$o;if(ON=o,($o=c)&&!l)for(yt=s;yt!==null;)o=yt,c=o.child,o.tag===22&&o.memoizedState!==null?R9(s):c!==null?(c.return=o,yt=c):R9(s);for(;i!==null;)yt=i,yZ(i),i=i.sibling;yt=s,ON=a,$o=l}x9(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,yt=i):x9(t)}}function x9(t){for(;yt!==null;){var e=yt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$o||w2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$o)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hu(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&h9(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}h9(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&pA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}$o||e.flags&512&&qB(e)}catch(h){Gs(e,e.return,h)}}if(e===t){yt=null;break}if(n=e.sibling,n!==null){n.return=e.return,yt=n;break}yt=e.return}}function T9(t){for(;yt!==null;){var e=yt;if(e===t){yt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,yt=n;break}yt=e.return}}function R9(t){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{w2(4,e)}catch(c){Gs(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Gs(e,s,c)}}var i=e.return;try{qB(e)}catch(c){Gs(e,i,c)}break;case 5:var o=e.return;try{qB(e)}catch(c){Gs(e,o,c)}}}catch(c){Gs(e,e.return,c)}if(e===t){yt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,yt=a;break}yt=e.return}}var rye=Math.ceil,IR=Mf.ReactCurrentDispatcher,$8=Mf.ReactCurrentOwner,Dl=Mf.ReactCurrentBatchConfig,tr=0,Hi=null,ui=null,po=0,Oc=0,Ub=pm(0),_i=0,SA=null,C0=0,b2=0,F8=0,N_=null,Ka=null,j8=0,RE=1/0,Rh=null,NR=!1,YB=null,Rg=null,DN=!1,lg=null,xR=0,x_=0,QB=null,eT=-1,tT=0;function pa(){return tr&6?ni():eT!==-1?eT:eT=ni()}function kg(t){return t.mode&1?tr&2&&po!==0?po&-po:Fme.transition!==null?(tT===0&&(tT=tJ()),tT):(t=xr,t!==0||(t=window.event,t=t===void 0?16:cJ(t.type)),t):1}function Lu(t,e,n,r){if(50<x_)throw x_=0,QB=null,Error(Me(185));gI(t,n,r),(!(tr&2)||t!==Hi)&&(t===Hi&&(!(tr&2)&&(b2|=n),_i===4&&Rp(t,po)),oc(t,r),n===1&&tr===0&&!(e.mode&1)&&(RE=ni()+500,g2&&gm()))}function oc(t,e){var n=t.callbackNode;Fge(t,e);var r=dR(t,t===Hi?po:0);if(r===0)n!==null&&$j(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$j(n),e===1)t.tag===0?$me(k9.bind(null,t)):NJ(k9.bind(null,t)),Mme(function(){!(tr&6)&&gm()}),n=null;else{switch(nJ(r)){case 1:n=f8;break;case 4:n=XQ;break;case 16:n=uR;break;case 536870912:n=eJ;break;default:n=uR}n=SZ(n,wZ.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wZ(t,e){if(eT=-1,tT=0,tr&6)throw Error(Me(327));var n=t.callbackNode;if(ov()&&t.callbackNode!==n)return null;var r=dR(t,t===Hi?po:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=TR(t,r);else{e=r;var s=tr;tr|=2;var i=vZ();(Hi!==t||po!==e)&&(Rh=null,RE=ni()+500,n0(t,e));do try{oye();break}catch(a){bZ(t,a)}while(!0);I8(),IR.current=i,tr=s,ui!==null?e=0:(Hi=null,po=0,e=_i)}if(e!==0){if(e===2&&(s=_B(t),s!==0&&(r=s,e=JB(t,s))),e===1)throw n=SA,n0(t,0),Rp(t,r),oc(t,ni()),n;if(e===6)Rp(t,r);else{if(s=t.current.alternate,!(r&30)&&!sye(s)&&(e=TR(t,r),e===2&&(i=_B(t),i!==0&&(r=i,e=JB(t,i))),e===1))throw n=SA,n0(t,0),Rp(t,r),oc(t,ni()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Me(345));case 2:Hm(t,Ka,Rh);break;case 3:if(Rp(t,r),(r&130023424)===r&&(e=j8+500-ni(),10<e)){if(dR(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pa(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kB(Hm.bind(null,t,Ka,Rh),e);break}Hm(t,Ka,Rh);break;case 4:if(Rp(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Bu(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ni()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rye(r/1960))-r,10<r){t.timeoutHandle=kB(Hm.bind(null,t,Ka,Rh),r);break}Hm(t,Ka,Rh);break;case 5:Hm(t,Ka,Rh);break;default:throw Error(Me(329))}}}return oc(t,ni()),t.callbackNode===n?wZ.bind(null,t):null}function JB(t,e){var n=N_;return t.current.memoizedState.isDehydrated&&(n0(t,e).flags|=256),t=TR(t,e),t!==2&&(e=Ka,Ka=n,e!==null&&ZB(e)),t}function ZB(t){Ka===null?Ka=t:Ka.push.apply(Ka,t)}function sye(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ju(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rp(t,e){for(e&=~F8,e&=~b2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bu(e),r=1<<n;t[n]=-1,e&=~r}}function k9(t){if(tr&6)throw Error(Me(327));ov();var e=dR(t,0);if(!(e&1))return oc(t,ni()),null;var n=TR(t,e);if(t.tag!==0&&n===2){var r=_B(t);r!==0&&(e=r,n=JB(t,r))}if(n===1)throw n=SA,n0(t,0),Rp(t,e),oc(t,ni()),n;if(n===6)throw Error(Me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hm(t,Ka,Rh),oc(t,ni()),null}function W8(t,e){var n=tr;tr|=1;try{return t(e)}finally{tr=n,tr===0&&(RE=ni()+500,g2&&gm())}}function _0(t){lg!==null&&lg.tag===0&&!(tr&6)&&ov();var e=tr;tr|=1;var n=Dl.transition,r=xr;try{if(Dl.transition=null,xr=1,t)return t()}finally{xr=r,Dl.transition=n,tr=e,!(tr&6)&&gm()}}function z8(){Oc=Ub.current,gs(Ub)}function n0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dme(n)),ui!==null)for(n=ui.return;n!==null;){var r=n;switch(_8(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mR();break;case 3:xE(),gs(sc),gs(Wo),P8();break;case 5:k8(r);break;case 4:xE();break;case 13:gs(Rs);break;case 19:gs(Rs);break;case 10:N8(r.type._context);break;case 22:case 23:z8()}n=n.return}if(Hi=t,ui=t=Pg(t.current,null),po=Oc=e,_i=0,SA=null,F8=b2=C0=0,Ka=N_=null,py!==null){for(e=0;e<py.length;e++)if(n=py[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}py=null}return t}function bZ(t,e){do{var n=ui;try{if(I8(),Jx.current=SR,AR){for(var r=Bs.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}AR=!1}if(E0=0,Mi=wi=Bs=null,S_=!1,CA=0,$8.current=null,n===null||n.return===null){_i=1,SA=e,ui=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=po,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=w9(o);if(f!==null){f.flags&=-257,b9(f,o,a,i,e),f.mode&1&&y9(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){y9(i,l,e),H8();break e}c=Error(Me(426))}}else if(Ns&&a.mode&1){var m=w9(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),b9(m,o,a,i,e),A8(TE(c,a));break e}}i=c=TE(c,a),_i!==4&&(_i=2),N_===null?N_=[i]:N_.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=nZ(i,c,e);d9(i,y);break e;case 1:a=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Rg===null||!Rg.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=rZ(i,a,e);d9(i,N);break e}}i=i.return}while(i!==null)}CZ(n)}catch(S){e=S,ui===n&&n!==null&&(ui=n=n.return);continue}break}while(!0)}function vZ(){var t=IR.current;return IR.current=SR,t===null?SR:t}function H8(){(_i===0||_i===3||_i===2)&&(_i=4),Hi===null||!(C0&268435455)&&!(b2&268435455)||Rp(Hi,po)}function TR(t,e){var n=tr;tr|=2;var r=vZ();(Hi!==t||po!==e)&&(Rh=null,n0(t,e));do try{iye();break}catch(s){bZ(t,s)}while(!0);if(I8(),tr=n,IR.current=r,ui!==null)throw Error(Me(261));return Hi=null,po=0,_i}function iye(){for(;ui!==null;)EZ(ui)}function oye(){for(;ui!==null&&!kge();)EZ(ui)}function EZ(t){var e=AZ(t.alternate,t,Oc);t.memoizedProps=t.pendingProps,e===null?CZ(t):ui=e,$8.current=null}function CZ(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Xme(n,e),n!==null){n.flags&=32767,ui=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_i=6,ui=null;return}}else if(n=Zme(n,e,Oc),n!==null){ui=n;return}if(e=e.sibling,e!==null){ui=e;return}ui=e=t}while(e!==null);_i===0&&(_i=5)}function Hm(t,e,n){var r=xr,s=Dl.transition;try{Dl.transition=null,xr=1,aye(t,e,n,r)}finally{Dl.transition=s,xr=r}return null}function aye(t,e,n,r){do ov();while(lg!==null);if(tr&6)throw Error(Me(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Me(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jge(t,i),t===Hi&&(ui=Hi=null,po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||DN||(DN=!0,SZ(uR,function(){return ov(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dl.transition,Dl.transition=null;var o=xr;xr=1;var a=tr;tr|=4,$8.current=null,tye(t,n),mZ(n,t),Nme(TB),hR=!!xB,TB=xB=null,t.current=n,nye(n),Pge(),tr=a,xr=o,Dl.transition=i}else t.current=n;if(DN&&(DN=!1,lg=t,xR=s),i=t.pendingLanes,i===0&&(Rg=null),Mge(n.stateNode),oc(t,ni()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(NR)throw NR=!1,t=YB,YB=null,t;return xR&1&&t.tag!==0&&ov(),i=t.pendingLanes,i&1?t===QB?x_++:(x_=0,QB=t):x_=0,gm(),null}function ov(){if(lg!==null){var t=nJ(xR),e=Dl.transition,n=xr;try{if(Dl.transition=null,xr=16>t?16:t,lg===null)var r=!1;else{if(t=lg,lg=null,xR=0,tr&6)throw Error(Me(331));var s=tr;for(tr|=4,yt=t.current;yt!==null;){var i=yt,o=i.child;if(yt.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(yt=l;yt!==null;){var u=yt;switch(u.tag){case 0:case 11:case 15:I_(8,u,i)}var d=u.child;if(d!==null)d.return=u,yt=d;else for(;yt!==null;){u=yt;var h=u.sibling,f=u.return;if(fZ(u),u===l){yt=null;break}if(h!==null){h.return=f,yt=h;break}yt=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}yt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,yt=o;else e:for(;yt!==null;){if(i=yt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:I_(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,yt=y;break e}yt=i.return}}var w=t.current;for(yt=w;yt!==null;){o=yt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,yt=C;else e:for(o=w;yt!==null;){if(a=yt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:w2(9,a)}}catch(S){Gs(a,a.return,S)}if(a===o){yt=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,yt=N;break e}yt=a.return}}if(tr=s,gm(),jd&&typeof jd.onPostCommitFiberRoot=="function")try{jd.onPostCommitFiberRoot(u2,t)}catch{}r=!0}return r}finally{xr=n,Dl.transition=e}}return!1}function P9(t,e,n){e=TE(n,e),e=nZ(t,e,1),t=Tg(t,e,1),e=pa(),t!==null&&(gI(t,1,e),oc(t,e))}function Gs(t,e,n){if(t.tag===3)P9(t,t,n);else for(;e!==null;){if(e.tag===3){P9(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rg===null||!Rg.has(r))){t=TE(n,t),t=rZ(e,t,1),e=Tg(e,t,1),t=pa(),e!==null&&(gI(e,1,t),oc(e,t));break}}e=e.return}}function cye(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pa(),t.pingedLanes|=t.suspendedLanes&n,Hi===t&&(po&n)===n&&(_i===4||_i===3&&(po&130023424)===po&&500>ni()-j8?n0(t,0):F8|=n),oc(t,e)}function _Z(t,e){e===0&&(t.mode&1?(e=AN,AN<<=1,!(AN&130023424)&&(AN=4194304)):e=1);var n=pa();t=_f(t,e),t!==null&&(gI(t,e,n),oc(t,n))}function lye(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_Z(t,n)}function uye(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Me(314))}r!==null&&r.delete(e),_Z(t,n)}var AZ;AZ=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sc.current)tc=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tc=!1,Jme(t,e,n);tc=!!(t.flags&131072)}else tc=!1,Ns&&e.flags&1048576&&xJ(e,bR,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xx(t,e),t=e.pendingProps;var s=SE(e,Wo.current);iv(e,n),s=D8(null,e,r,t,s,n);var i=M8();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ic(r)?(i=!0,yR(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,T8(e),s.updater=y2,e.stateNode=s,s._reactInternals=e,UB(e,r,t,n),e=jB(null,e,r,!0,i,n)):(e.tag=0,Ns&&i&&C8(e),ea(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xx(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=hye(r),t=hu(r,t),s){case 0:e=FB(null,e,r,t,n);break e;case 1:e=C9(null,e,r,t,n);break e;case 11:e=v9(null,e,r,t,n);break e;case 14:e=E9(null,e,r,hu(r.type,t),n);break e}throw Error(Me(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hu(r,s),FB(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hu(r,s),C9(t,e,r,s,n);case 3:e:{if(aZ(e),t===null)throw Error(Me(387));r=e.pendingProps,i=e.memoizedState,s=i.element,DJ(t,e),CR(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=TE(Error(Me(423)),e),e=_9(t,e,r,n,s);break e}else if(r!==s){s=TE(Error(Me(424)),e),e=_9(t,e,r,n,s);break e}else for(zc=xg(e.stateNode.containerInfo.firstChild),qc=e,Ns=!0,_u=null,n=PJ(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(IE(),r===s){e=Af(t,e,n);break e}ea(t,e,r,n)}e=e.child}return e;case 5:return MJ(e),t===null&&MB(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,RB(r,s)?o=null:i!==null&&RB(r,i)&&(e.flags|=32),oZ(t,e),ea(t,e,o,n),e.child;case 6:return t===null&&MB(e),null;case 13:return cZ(t,e,n);case 4:return R8(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=NE(e,null,r,n):ea(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hu(r,s),v9(t,e,r,s,n);case 7:return ea(t,e,e.pendingProps,n),e.child;case 8:return ea(t,e,e.pendingProps.children,n),e.child;case 12:return ea(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,os(vR,r._currentValue),r._currentValue=o,i!==null)if(ju(i.value,o)){if(i.children===s.children&&!sc.current){e=Af(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=uf(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),BB(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Me(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),BB(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ea(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,iv(e,n),s=Ll(s),r=r(s),e.flags|=1,ea(t,e,r,n),e.child;case 14:return r=e.type,s=hu(r,e.pendingProps),s=hu(r.type,s),E9(t,e,r,s,n);case 15:return sZ(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hu(r,s),Xx(t,e),e.tag=1,ic(r)?(t=!0,yR(e)):t=!1,iv(e,n),tZ(e,r,s),UB(e,r,s,n),jB(null,e,r,!0,t,n);case 19:return lZ(t,e,n);case 22:return iZ(t,e,n)}throw Error(Me(156,e.tag))};function SZ(t,e){return ZQ(t,e)}function dye(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(t,e,n,r){return new dye(t,e,n,r)}function G8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hye(t){if(typeof t=="function")return G8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===u8)return 11;if(t===d8)return 14}return 2}function Pg(t,e){var n=t.alternate;return n===null?(n=Pl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nT(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")G8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xb:return r0(n.children,s,i,e);case l8:o=8,s|=8;break;case cB:return t=Pl(12,n,e,s|2),t.elementType=cB,t.lanes=i,t;case lB:return t=Pl(13,n,e,s),t.elementType=lB,t.lanes=i,t;case uB:return t=Pl(19,n,e,s),t.elementType=uB,t.lanes=i,t;case MQ:return v2(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OQ:o=10;break e;case DQ:o=9;break e;case u8:o=11;break e;case d8:o=14;break e;case Cp:o=16,r=null;break e}throw Error(Me(130,t==null?t:typeof t,""))}return e=Pl(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function r0(t,e,n,r){return t=Pl(7,t,r,e),t.lanes=n,t}function v2(t,e,n,r){return t=Pl(22,t,r,e),t.elementType=MQ,t.lanes=n,t.stateNode={isHidden:!1},t}function JO(t,e,n){return t=Pl(6,t,null,e),t.lanes=n,t}function ZO(t,e,n){return e=Pl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fye(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=PO(0),this.expirationTimes=PO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=PO(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function q8(t,e,n,r,s,i,o,a,c){return t=new fye(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pl(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T8(i),t}function pye(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nb,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function IZ(t){if(!t)return Jg;t=t._reactInternals;e:{if(ew(t)!==t||t.tag!==1)throw Error(Me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ic(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Me(171))}if(t.tag===1){var n=t.type;if(ic(n))return IJ(t,n,e)}return e}function NZ(t,e,n,r,s,i,o,a,c){return t=q8(n,r,!0,t,s,i,o,a,c),t.context=IZ(null),n=t.current,r=pa(),s=kg(n),i=uf(r,s),i.callback=e??null,Tg(n,i,s),t.current.lanes=s,gI(t,s,r),oc(t,r),t}function E2(t,e,n,r){var s=e.current,i=pa(),o=kg(s);return n=IZ(n),e.context===null?e.context=n:e.pendingContext=n,e=uf(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tg(s,e,o),t!==null&&(Lu(t,s,o,i),Qx(t,s,o)),o}function RR(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O9(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function V8(t,e){O9(t,e),(t=t.alternate)&&O9(t,e)}function gye(){return null}var xZ=typeof reportError=="function"?reportError:function(t){console.error(t)};function K8(t){this._internalRoot=t}C2.prototype.render=K8.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Me(409));E2(t,e,null,null)};C2.prototype.unmount=K8.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_0(function(){E2(null,t,null,null)}),e[Cf]=null}};function C2(t){this._internalRoot=t}C2.prototype.unstable_scheduleHydration=function(t){if(t){var e=iJ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tp.length&&e!==0&&e<Tp[n].priority;n++);Tp.splice(n,0,t),n===0&&aJ(t)}};function Y8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D9(){}function mye(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=RR(o);i.call(l)}}var o=NZ(e,r,t,0,null,!1,!1,"",D9);return t._reactRootContainer=o,t[Cf]=o.current,yA(t.nodeType===8?t.parentNode:t),_0(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=RR(c);a.call(l)}}var c=q8(t,0,!1,null,null,!1,!1,"",D9);return t._reactRootContainer=c,t[Cf]=c.current,yA(t.nodeType===8?t.parentNode:t),_0(function(){E2(e,c,n,r)}),c}function A2(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=RR(o);a.call(c)}}E2(e,o,t,s)}else o=mye(n,e,t,s,r);return RR(o)}rJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=H1(e.pendingLanes);n!==0&&(p8(e,n|1),oc(e,ni()),!(tr&6)&&(RE=ni()+500,gm()))}break;case 13:_0(function(){var r=_f(t,1);if(r!==null){var s=pa();Lu(r,t,1,s)}}),V8(t,1)}};g8=function(t){if(t.tag===13){var e=_f(t,134217728);if(e!==null){var n=pa();Lu(e,t,134217728,n)}V8(t,134217728)}};sJ=function(t){if(t.tag===13){var e=kg(t),n=_f(t,e);if(n!==null){var r=pa();Lu(n,t,e,r)}V8(t,e)}};iJ=function(){return xr};oJ=function(t,e){var n=xr;try{return xr=t,e()}finally{xr=n}};vB=function(t,e,n){switch(e){case"input":if(fB(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=p2(r);if(!s)throw Error(Me(90));LQ(r),fB(r,s)}}}break;case"textarea":$Q(t,n);break;case"select":e=n.value,e!=null&&tv(t,!!n.multiple,e,!1)}};qQ=W8;VQ=_0;var yye={usingClientEntryPoint:!1,Events:[yI,Pb,p2,HQ,GQ,W8]},c1={findFiberByHostInstance:fy,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wye={bundleType:c1.bundleType,version:c1.version,rendererPackageName:c1.rendererPackageName,rendererConfig:c1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QQ(t),t===null?null:t.stateNode},findFiberByHostInstance:c1.findFiberByHostInstance||gye,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var MN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!MN.isDisabled&&MN.supportsFiber)try{u2=MN.inject(wye),jd=MN}catch{}}Zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yye;Zc.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Y8(e))throw Error(Me(200));return pye(t,e,null,n)};Zc.createRoot=function(t,e){if(!Y8(t))throw Error(Me(299));var n=!1,r="",s=xZ;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=q8(t,1,!1,null,null,n,!1,r,s),t[Cf]=e.current,yA(t.nodeType===8?t.parentNode:t),new K8(e)};Zc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Me(188)):(t=Object.keys(t).join(","),Error(Me(268,t)));return t=QQ(e),t=t===null?null:t.stateNode,t};Zc.flushSync=function(t){return _0(t)};Zc.hydrate=function(t,e,n){if(!_2(e))throw Error(Me(200));return A2(null,t,e,!0,n)};Zc.hydrateRoot=function(t,e,n){if(!Y8(t))throw Error(Me(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=xZ;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=NZ(e,null,t,1,n??null,s,!1,i,o),t[Cf]=e.current,yA(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new C2(e)};Zc.render=function(t,e,n){if(!_2(e))throw Error(Me(200));return A2(null,t,e,!1,n)};Zc.unmountComponentAtNode=function(t){if(!_2(t))throw Error(Me(40));return t._reactRootContainer?(_0(function(){A2(null,null,t,!1,function(){t._reactRootContainer=null,t[Cf]=null})}),!0):!1};Zc.unstable_batchedUpdates=W8;Zc.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_2(n))throw Error(Me(200));if(t==null||t._reactInternals===void 0)throw Error(Me(38));return A2(t,e,n,!1,r)};Zc.version="18.3.1-next-f1338f8080-20240426";function TZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TZ)}catch(t){console.error(t)}}TZ(),TQ.exports=Zc;var Q8=TQ.exports,M9=Q8;oB.createRoot=M9.createRoot,oB.hydrateRoot=M9.hydrateRoot;const RZ="2.32.0";let l1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${RZ}`},Ne=class XB extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof XB?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof XB&&n.cause.docsPath||n.docsPath,i=(a=l1.getDocsUrl)==null?void 0:a.call(l1,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...l1.version?[`Version: ${l1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=RZ}walk(e){return kZ(this,e)}};function kZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?kZ(t.cause,e):e?null:t}let PZ=class extends Ne{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class bye extends Ne{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class vye extends Ne{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Eye=class extends Ne{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},OZ=class extends Ne{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},DZ=class extends Ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class B9 extends Ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function CC(t,{dir:e,size:n=32}={}){return typeof t=="string"?Og(t,{dir:e,size:n}):Cye(t,{dir:e,size:n})}function Og(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new DZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Cye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new DZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Qd(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Vs(t){return Qd(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function zd(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const _ye=new TextEncoder;function _C(t,e={}){return typeof t=="number"||typeof t=="bigint"?Sye(t,e):typeof t=="boolean"?Aye(t,e):Qd(t)?$l(t,e):s0(t,e)}function Aye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Gl(n,{size:e.size}),CC(n,{size:e.size})):n}const dh={zero:48,nine:57,A:65,F:70,a:97,f:102};function L9(t){if(t>=dh.zero&&t<=dh.nine)return t-dh.zero;if(t>=dh.A&&t<=dh.F)return t-(dh.A-10);if(t>=dh.a&&t<=dh.f)return t-(dh.a-10)}function $l(t,e={}){let n=t;e.size&&(Gl(n,{size:e.size}),n=CC(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=L9(r.charCodeAt(a++)),l=L9(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Ne(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Sye(t,e){const n=It(t,e);return $l(n)}function s0(t,e={}){const n=_ye.encode(t);return typeof e.size=="number"?(Gl(n,{size:e.size}),CC(n,{dir:"right",size:e.size})):n}function Gl(t,{size:e}){if(Vs(t)>e)throw new Eye({givenSize:Vs(t),maxSize:e})}function Qc(t,e={}){const{signed:n}=e;e.size&&Gl(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Iye(t,e={}){let n=t;if(e.size&&(Gl(n,{size:e.size}),n=zd(n)),zd(n)==="0x00")return!1;if(zd(n)==="0x01")return!0;throw new vye(n)}function Wu(t,e={}){return Number(Qc(t,e))}function MZ(t,e={}){let n=$l(t);return e.size&&(Gl(n,{size:e.size}),n=zd(n,{dir:"right"})),new TextDecoder().decode(n)}const Nye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fl(t,e={}){return typeof t=="number"||typeof t=="bigint"?It(t,e):typeof t=="string"?kE(t,e):typeof t=="boolean"?BZ(t,e):Ni(t,e)}function BZ(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Gl(n,{size:e.size}),CC(n,{size:e.size})):n}function Ni(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Nye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Gl(r,{size:e.size}),CC(r,{dir:"right",size:e.size})):r}function It(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new PZ({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?CC(a,{size:r}):a}const xye=new TextEncoder;function kE(t,e={}){const n=xye.encode(t);return Ni(n,e)}async function Tye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:It(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function zu(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Wye(t.type);return`${t.name}(${S2(t.inputs,{includeName:e})})`}function S2(t,{includeName:e=!1}={}){return t?t.map(n=>Rye(n,{includeName:e})).join(e?", ":","):""}function Rye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${S2(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class kye extends Ne{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class U9 extends Ne{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class LZ extends Ne{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${S2(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class bI extends Ne{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Pye extends Ne{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Oye extends Ne{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Vs(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Dye extends Ne{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Mye extends Ne{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class $9 extends Ne{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class UZ extends Ne{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Bye extends Ne{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class $Z extends Ne{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class F9 extends Ne{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class PE extends Ne{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class FZ extends Ne{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Lye extends Ne{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Uye extends Ne{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${zu(e.abiItem)}\`, and`,`\`${n.type}\` in \`${zu(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let $ye=class extends Ne{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class IA extends Ne{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${S2(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class I2 extends Ne{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${zu(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Fye extends Ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class jye extends Ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let jZ=class extends Ne{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Wye extends Ne{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function jl(t){return typeof t[0]=="string"?AC(t):zye(t)}function zye(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function AC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let Zg=class extends Ne{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},N2=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const BN=BigInt(2**32-1),j9=BigInt(32);function Hye(t,e=!1){return e?{h:Number(t&BN),l:Number(t>>j9&BN)}:{h:Number(t>>j9&BN)|0,l:Number(t&BN)|0}}function WZ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Hye(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const W9=(t,e,n)=>t>>>n,z9=(t,e,n)=>t<<32-n|e>>>n,Pw=(t,e,n)=>t>>>n|e<<32-n,Ow=(t,e,n)=>t<<32-n|e>>>n,LN=(t,e,n)=>t<<64-n|e>>>n-32,UN=(t,e,n)=>t>>>n-32|e<<64-n,Gye=(t,e,n)=>t<<n|e>>>32-n,qye=(t,e,n)=>e<<n|t>>>32-n,Vye=(t,e,n)=>e<<n-32|t>>>64-n,Kye=(t,e,n)=>t<<n-32|e>>>64-n;function hh(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Yye=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Qye=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Jye=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Zye=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Xye=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),e0e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function J8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function NA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Wl(t,...e){if(!J8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function t0e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");NA(t.outputLen),NA(t.blockLen)}function OE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zZ(t,e){Wl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function n0e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Xg(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function XO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xu(t,e){return t<<32-e|t>>>e}const r0e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function s0e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function i0e(t){for(let e=0;e<t.length;e++)t[e]=s0e(t[e]);return t}const H9=r0e?t=>t:i0e,HZ=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",o0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function DE(t){if(Wl(t),HZ)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=o0e[t[n]];return e}const fh={_0:48,_9:57,A:65,F:70,a:97,f:102};function G9(t){if(t>=fh._0&&t<=fh._9)return t-fh._0;if(t>=fh.A&&t<=fh.F)return t-(fh.A-10);if(t>=fh.a&&t<=fh.f)return t-(fh.a-10)}function Z8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(HZ)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=G9(t.charCodeAt(i)),a=G9(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function a0e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function vI(t){return typeof t=="string"&&(t=a0e(t)),Wl(t),t}function sf(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Wl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let X8=class{};function e$(t){const e=r=>t().update(vI(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function c0e(t){const e=(r,s)=>t(s).update(vI(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function GZ(t=32){if(Dw&&typeof Dw.getRandomValues=="function")return Dw.getRandomValues(new Uint8Array(t));if(Dw&&typeof Dw.randomBytes=="function")return Uint8Array.from(Dw.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const l0e=BigInt(0),u1=BigInt(1),u0e=BigInt(2),d0e=BigInt(7),h0e=BigInt(256),f0e=BigInt(113),qZ=[],VZ=[],KZ=[];for(let t=0,e=u1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],qZ.push(2*(5*r+n)),VZ.push((t+1)*(t+2)/2%64);let s=l0e;for(let i=0;i<7;i++)e=(e<<u1^(e>>d0e)*f0e)%h0e,e&u0e&&(s^=u1<<(u1<<BigInt(i))-u1);KZ.push(s)}const YZ=WZ(KZ,!0),p0e=YZ[0],g0e=YZ[1],q9=(t,e,n)=>n>32?Vye(t,e,n):Gye(t,e,n),V9=(t,e,n)=>n>32?Kye(t,e,n):qye(t,e,n);function QZ(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=q9(l,u,1)^n[a],h=V9(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=VZ[o],c=q9(s,i,a),l=V9(s,i,a),u=qZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=p0e[r],t[1]^=g0e[r]}Xg(n)}let t$=class JZ extends X8{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,NA(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=n0e(this.state)}clone(){return this._cloneInto()}keccak(){H9(this.state32),QZ(this.state32,this.rounds),H9(this.state32),this.posOut=0,this.pos=0}update(e){OE(this),e=vI(e),Wl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){OE(this,!1),Wl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return NA(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Xg(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new JZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const mm=(t,e,n)=>e$(()=>new t$(e,t,n)),m0e=mm(6,144,224/8),y0e=mm(6,136,256/8),w0e=mm(6,104,384/8),b0e=mm(6,72,512/8),v0e=mm(1,144,224/8),n$=mm(1,136,256/8),E0e=mm(1,104,384/8),C0e=mm(1,72,512/8),ZZ=(t,e,n)=>c0e((r={})=>new t$(e,t,r.dkLen===void 0?n:r.dkLen,!0)),_0e=ZZ(31,168,128/8),A0e=ZZ(31,136,256/8),Nit=Object.freeze(Object.defineProperty({__proto__:null,Keccak:t$,keccakP:QZ,keccak_224:v0e,keccak_256:n$,keccak_384:E0e,keccak_512:C0e,sha3_224:m0e,sha3_256:y0e,sha3_384:w0e,sha3_512:b0e,shake128:_0e,shake256:A0e},Symbol.toStringTag,{value:"Module"}));function fo(t,e){const n=e||"hex",r=n$(Qd(t,{strict:!1})?_C(t):t);return n==="bytes"?r:Fl(r)}const eD=new N2(8192);function EI(t,e){if(eD.has(`${t}.${e}`))return eD.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=fo(s0(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return eD.set(`${t}.${e}`,i),i}function of(t,e){if(!zl(t,{strict:!1}))throw new Zg({address:t});return EI(t,e)}const S0e=/^0x[a-fA-F0-9]{40}$/,tD=new N2(8192);function zl(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(tD.has(r))return tD.get(r);const s=S0e.test(t)?t.toLowerCase()===t?!0:n?EI(t)===t:!0:!1;return tD.set(r,s),s}function ME(t,e,n,{strict:r}={}){return Qd(t,{strict:!1})?kR(t,e,n,{strict:r}):tX(t,e,n,{strict:r})}function XZ(t,e){if(typeof e=="number"&&e>0&&e>Vs(t)-1)throw new OZ({offset:e,position:"start",size:Vs(t)})}function eX(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Vs(t)!==n-e)throw new OZ({offset:n,position:"end",size:Vs(t)})}function tX(t,e,n,{strict:r}={}){XZ(t,e);const s=t.slice(e,n);return r&&eX(s,e,n),s}function kR(t,e,n,{strict:r}={}){XZ(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&eX(s,e,n),s}const I0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nX=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ym(t,e){if(t.length!==e.length)throw new Dye({expectedLength:t.length,givenLength:e.length});const n=N0e({params:t,values:e}),r=s$(n);return r.length===0?"0x":r}function N0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(r$({param:t[r],value:e[r]}));return n}function r$({param:t,value:e}){const n=i$(t.type);if(n){const[r,s]=n;return T0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return D0e(e,{param:t});if(t.type==="address")return x0e(e);if(t.type==="bool")return k0e(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=nX.exec(t.type)??[];return P0e(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return R0e(e,{param:t});if(t.type==="string")return O0e(e);throw new Fye(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function s$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Vs(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(It(e+s,{size:32})),r.push(a),s+=Vs(a)):n.push(a)}return jl([...n,...r])}function x0e(t){if(!zl(t))throw new Zg({address:t});return{dynamic:!1,encoded:Og(t.toLowerCase())}}function T0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new jZ(t);if(!r&&t.length!==e)throw new Pye({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=r$({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=s$(i);if(r){const a=It(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?jl([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:jl(i.map(({encoded:o})=>o))}}function R0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=Vs(t);if(!n){let s=t;return r%32!==0&&(s=Og(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:jl([Og(It(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Oye({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Og(t,{dir:"right"})}}function k0e(t){if(typeof t!="boolean")throw new Ne(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Og(BZ(t))}}function P0e(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new PZ({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:It(t,{size:32,signed:e})}}function O0e(t){const e=kE(t),n=Math.ceil(Vs(e)/32),r=[];for(let s=0;s<n;s++)r.push(Og(ME(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:jl([Og(It(Vs(e),{size:32})),...r])}}function D0e(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=r$({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?s$(r):jl(r.map(({encoded:s})=>s))}}function i$(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const nD="/docs/contract/encodeDeployData";function x2(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new kye({docsPath:nD});if(!("inputs"in s))throw new U9({docsPath:nD});if(!s.inputs||s.inputs.length===0)throw new U9({docsPath:nD});const i=ym(s.inputs,n);return AC([r,i])}function Ys(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class tw extends Ne{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class rT extends Ne{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function M0e(t){const e=fo(`0x${t.substring(4)}`).substring(26);return EI(`0x${e}`)}const B0e="modulepreload",L0e=function(t){return"/"+t},K9={},ro=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=L0e(c),c in K9)return;K9[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":B0e,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function U0e({hash:t,signature:e}){const n=Qd(t)?t:Fl(t),{secp256k1:r}=await ro(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>ZCe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=Y9(f);return new r.Signature(Qc(l),Qc(u)).addRecoveryBit(p)}const o=Qd(e)?e:Fl(e);if(Vs(o)!==65)throw new Error("invalid signature length");const a=Wu(`0x${o.slice(130)}`),c=Y9(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Y9(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function rX({hash:t,signature:e}){return M0e(await U0e({hash:t,signature:e}))}class Q9 extends Ne{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class sX extends Ne{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class $0e extends Ne{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const F0e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new $0e({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new sX({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Q9({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Q9({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function o$(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(F0e);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function j0e(t,e="hex"){const n=iX(t),r=o$(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ni(r.bytes):r.bytes}function iX(t){return Array.isArray(t)?W0e(t.map(e=>iX(e))):z0e(t)}function W0e(t){const e=t.reduce((s,i)=>s+i.length,0),n=oX(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function z0e(t){const e=typeof t=="string"?$l(t):t,n=oX(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function oX(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Ne("Length is too large.")}function H0e(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=fo(AC(["0x05",j0e([e?It(e):"0x",s,n?It(n):"0x"])]));return r==="bytes"?$l(i):i}async function aX(t){const{authorization:e,signature:n}=t;return rX({hash:H0e(e),signature:n??e})}class eL extends Ne{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class G0e extends Ne{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class q0e extends Ne{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class cX extends Ne{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function lX({chain:t,currentChainId:e}){if(!t)throw new q0e;if(e!==t.id)throw new G0e({chain:t,currentChainId:e})}const V0e={gwei:9,wei:18},K0e={ether:-9,wei:9},Y0e={ether:-18,gwei:-9};function wm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ac(t,e="wei"){return wm(t,K0e[e])}class my extends Ne{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(my,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(my,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class PR extends Ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ac(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(PR,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class tL extends Ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ac(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(tL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class nL extends Ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(nL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class rL extends Ne{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(rL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class sL extends Ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(sL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class iL extends Ne{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(iL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class oL extends Ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(oL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class aL extends Ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(aL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class cL extends Ne{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(cL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class OR extends Ne{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ac(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ac(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(OR,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class CI extends Ne{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function a$(t,e="wei"){return wm(t,V0e[e])}function _I(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Q0e extends Ne{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class J0e extends Ne{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",_I(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Z0e extends Ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=_I({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${a$(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ac(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ac(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ac(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class uX extends Ne{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class dX extends Ne{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class X0e extends Ne{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Si=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),ewe=t=>t,c$=t=>t;class T_ extends Ne{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${c$(o)}`,e&&`Request body: ${Si(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class l$ extends Ne{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${c$(r)}`,`Request body: ${Si(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class J9 extends Ne{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${c$(n)}`,`Request body: ${Si(e)}`],name:"TimeoutError"})}}const twe=-1;class fc extends Ne{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof l$?e.code:n??twe}}class el extends fc{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class xA extends fc{constructor(e){super(e,{code:xA.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(xA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class TA extends fc{constructor(e){super(e,{code:TA.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(TA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class RA extends fc{constructor(e,{method:n}={}){super(e,{code:RA.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(RA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class kA extends fc{constructor(e){super(e,{code:kA.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(kA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class A0 extends fc{constructor(e){super(e,{code:A0.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(A0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class S0 extends fc{constructor(e){super(e,{code:S0.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(S0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class PA extends fc{constructor(e){super(e,{code:PA.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(PA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Dg extends fc{constructor(e){super(e,{code:Dg.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Dg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class BE extends fc{constructor(e){super(e,{code:BE.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(BE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class yy extends fc{constructor(e,{method:n}={}){super(e,{code:yy.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(yy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class LE extends fc{constructor(e){super(e,{code:LE.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(LE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class OA extends fc{constructor(e){super(e,{code:OA.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(OA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class yi extends el{constructor(e){super(e,{code:yi.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(yi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class DA extends el{constructor(e){super(e,{code:DA.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(DA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class MA extends el{constructor(e,{method:n}={}){super(e,{code:MA.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(MA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class BA extends el{constructor(e){super(e,{code:BA.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(BA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class LA extends el{constructor(e){super(e,{code:LA.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(LA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Jd extends el{constructor(e){super(e,{code:Jd.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Jd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class UE extends el{constructor(e){super(e,{code:UE.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(UE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class UA extends el{constructor(e){super(e,{code:UA.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(UA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class $A extends el{constructor(e){super(e,{code:$A.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty($A,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class FA extends el{constructor(e){super(e,{code:FA.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(FA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class jA extends el{constructor(e){super(e,{code:jA.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(jA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class WA extends el{constructor(e){super(e,{code:WA.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(WA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class $E extends el{constructor(e){super(e,{code:$E.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty($E,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class nwe extends fc{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function T2(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof Ne?t.walk(s=>(s==null?void 0:s.code)===my.code):t;return r instanceof Ne?new my({cause:t,message:r.details}):my.nodeMessage.test(n)?new my({cause:t,message:t.details}):PR.nodeMessage.test(n)?new PR({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):tL.nodeMessage.test(n)?new tL({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):nL.nodeMessage.test(n)?new nL({cause:t,nonce:e==null?void 0:e.nonce}):rL.nodeMessage.test(n)?new rL({cause:t,nonce:e==null?void 0:e.nonce}):sL.nodeMessage.test(n)?new sL({cause:t,nonce:e==null?void 0:e.nonce}):iL.nodeMessage.test(n)?new iL({cause:t}):oL.nodeMessage.test(n)?new oL({cause:t,gas:e==null?void 0:e.gas}):aL.nodeMessage.test(n)?new aL({cause:t,gas:e==null?void 0:e.gas}):cL.nodeMessage.test(n)?new cL({cause:t}):OR.nodeMessage.test(n)?new OR({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new CI({cause:t})}function hX(t,{docsPath:e,...n}){const r=(()=>{const s=T2(t,n);return s instanceof CI?t:s})();return new Z0e(r,{docsPath:e,...n})}function R2(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const rwe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function SC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=swe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ni(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=It(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=It(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=It(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=It(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=It(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=It(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=rwe[t.type]),typeof t.value<"u"&&(e.value=It(t.value)),e}function swe(t){return t.map(e=>({address:e.address,r:e.r?It(BigInt(e.r)):e.r,s:e.s?It(BigInt(e.s)):e.s,chainId:It(e.chainId),nonce:It(e.nonce),...typeof e.yParity<"u"?{yParity:It(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:It(e.v)}:{}}))}function $t(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const iwe=2n**256n-1n;function nw(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Ys(e):void 0;if(o&&!zl(o.address))throw new Zg({address:o.address});if(i&&!zl(i))throw new Zg({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Q0e;if(r&&r>iwe)throw new PR({maxFeePerGas:r});if(s&&r&&s>r)throw new OR({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function IC(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Wu(e)}class owe extends Ne{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class u$ extends Ne{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class awe extends Ne{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ac(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class fX extends Ne{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const pX={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function gX(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Wu(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Wu(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?pX[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=cwe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function cwe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function mX(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:gX(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function $d(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?It(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new fX({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||mX)(c)}async function d$(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function lwe(t,e){return yX(t,e)}async function yX(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await $t(t,$d,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Qc(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):$t(t,$d,"getBlock")({}),$t(t,d$,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new u$;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function uwe(t,e){return lL(t,e)}async function lL(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new owe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await $t(t,$d,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new u$;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await yX(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await $t(t,d$,"getGasPrice")({}))}}class dwe extends Ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=_I({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${a$(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ac(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ac(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ac(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function hwe(t,{docsPath:e,...n}){const r=(()=>{const s=T2(t,n);return s instanceof CI?t:s})();return new dwe(r,{docsPath:e,...n})}class fwe extends Ne{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class pwe extends Ne{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Z9(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function gwe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Z9(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Z9(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function X9(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new B9({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new B9({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function mwe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=It(e)),n!==void 0&&(o.nonce=It(n)),r!==void 0&&(o.state=X9(r)),s!==void 0){if(o.state)throw new pwe;o.stateDiff=X9(s)}return o}function h$(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!zl(n,{strict:!1}))throw new Zg({address:n});if(e[n])throw new fwe({address:n});e[n]=mwe(r)}return e}async function f$(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?It(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function k2(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Ys(n):void 0;try{let v=function(_){const{block:R,request:x,rpcStateOverride:B}=_;return t.request({method:"eth_estimateGas",params:B?[x,R??"latest",B]:R?[x,R]:[x]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,value:N,stateOverride:S,...P}=await AI(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),L=(typeof d=="bigint"?It(d):void 0)||h,M=h$(S),W=await(async()=>{if(P.to)return P.to;if(c&&c.length>0)return await aX({authorization:c[0]}).catch(()=>{throw new Ne("`to` is required. Could not infer from `authorizationList`")})})();nw(e);const F=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,$=(F||SC)({...R2(P,{format:F}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:W,value:N});let E=BigInt(await v({block:L,request:$,rpcStateOverride:M}));if(c){const _=await f$(t,{address:$.from}),R=await Promise.all(c.map(async x=>{const{address:B}=x,j=await v({block:L,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:B,value:It(_)},rpcStateOverride:M}).catch(()=>100000n);return 2n*BigInt(j)}));E+=R.reduce((x,B)=>x+B,0n)}return E}catch(a){throw hwe(a,{...e,account:r,chain:t.chain})}}async function p$(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?It(r):n]},{dedupe:!!r});return Wu(s)}function wX(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>$l(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ni(i))}function bX(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>$l(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>$l(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ni(o))}function ywe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function wwe(t,e,n){return t&e^~t&n}function bwe(t,e,n){return t&e^t&n^e&n}class vX extends X8{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=XO(this.buffer)}update(e){OE(this),e=vI(e),Wl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=XO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){OE(this),zZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Xg(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ywe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=XO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Vf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Io=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),vwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kf=new Uint32Array(64);let Ewe=class extends vX{constructor(e=32){super(64,e,8,!1),this.A=Vf[0]|0,this.B=Vf[1]|0,this.C=Vf[2]|0,this.D=Vf[3]|0,this.E=Vf[4]|0,this.F=Vf[5]|0,this.G=Vf[6]|0,this.H=Vf[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Kf[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Kf[d-15],f=Kf[d-2],p=Xu(h,7)^Xu(h,18)^h>>>3,g=Xu(f,17)^Xu(f,19)^f>>>10;Kf[d]=g+Kf[d-7]+p+Kf[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Xu(a,6)^Xu(a,11)^Xu(a,25),f=u+h+wwe(a,c,l)+vwe[d]+Kf[d]|0,g=(Xu(r,2)^Xu(r,13)^Xu(r,22))+bwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Xg(Kf)}destroy(){this.set(0,0,0,0,0,0,0,0),Xg(this.buffer)}};const EX=WZ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cwe=EX[0],_we=EX[1],Yf=new Uint32Array(80),Qf=new Uint32Array(80);let Awe=class extends vX{constructor(e=64){super(128,e,16,!1),this.Ah=Io[0]|0,this.Al=Io[1]|0,this.Bh=Io[2]|0,this.Bl=Io[3]|0,this.Ch=Io[4]|0,this.Cl=Io[5]|0,this.Dh=Io[6]|0,this.Dl=Io[7]|0,this.Eh=Io[8]|0,this.El=Io[9]|0,this.Fh=Io[10]|0,this.Fl=Io[11]|0,this.Gh=Io[12]|0,this.Gl=Io[13]|0,this.Hh=Io[14]|0,this.Hl=Io[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)Yf[C]=e.getUint32(n),Qf[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=Yf[C-15]|0,S=Qf[C-15]|0,P=Pw(N,S,1)^Pw(N,S,8)^W9(N,S,7),O=Ow(N,S,1)^Ow(N,S,8)^z9(N,S,7),L=Yf[C-2]|0,M=Qf[C-2]|0,W=Pw(L,M,19)^LN(L,M,61)^W9(L,M,6),F=Ow(L,M,19)^UN(L,M,61)^z9(L,M,6),V=Jye(O,F,Qf[C-7],Qf[C-16]),$=Zye(V,P,W,Yf[C-7],Yf[C-16]);Yf[C]=$|0,Qf[C]=V|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Pw(d,h,14)^Pw(d,h,18)^LN(d,h,41),S=Ow(d,h,14)^Ow(d,h,18)^UN(d,h,41),P=d&f^~d&g,O=h&p^~h&m,L=Xye(w,S,O,_we[C],Qf[C]),M=e0e(L,y,N,P,Cwe[C],Yf[C]),W=L|0,F=Pw(r,s,28)^LN(r,s,34)^LN(r,s,39),V=Ow(r,s,28)^UN(r,s,34)^UN(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=hh(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=Yye(W,V,v);r=Qye(E,M,F,$),s=E|0}({h:r,l:s}=hh(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=hh(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=hh(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=hh(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=hh(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=hh(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=hh(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=hh(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){Xg(Yf,Qf)}destroy(){Xg(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const CX=e$(()=>new Ewe),Swe=e$(()=>new Awe),uL=CX;function Iwe(t,e){return uL(Qd(t,{strict:!1})?_C(t):t)}function Nwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Iwe(e);return s.set([n],0),r==="bytes"?s:Ni(s)}function xwe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Nwe({commitment:i,to:r,version:n}));return s}const e7=6,_X=32,g$=4096,AX=_X*g$,t7=AX*e7-1-1*g$*e7;class Twe extends Ne{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Rwe extends Ne{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function kwe(t){const e=typeof t.data=="string"?$l(t.data):t.data,n=Vs(e);if(!n)throw new Rwe;if(n>t7)throw new Twe({maxSize:t7,size:n});const r=[];let s=!0,i=0;for(;s;){const o=o$(new Uint8Array(AX));let a=0;for(;a<g$;){const c=e.slice(i,i+(_X-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Ni(o.bytes))}function Pwe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??kwe({data:e}),i=t.commitments??wX({blobs:s,kzg:n,to:r}),o=t.proofs??bX({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Owe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new J0e({transaction:t})}const SX=["blobVersionedHashes","chainId","fees","gas","nonce","type"],n7=new Map;async function AI(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=SX,type:u}=e,d=n&&Ys(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await $t(t,$d,"getBlock")({blockTag:"latest"}),f)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await $t(t,IC,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await m();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await $t(t,p$,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=wX({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=xwe({commitments:y,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=bX({blobs:r,commitments:y,kzg:o}),C=Pwe({blobs:r,commitments:y,proofs:w,to:"hex"});h.sidecars=C}}if(l.includes("chainId")&&(h.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Owe(h)}catch{let y=n7.get(t.uid);if(typeof y>"u"){const w=await p();y=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",n7.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:C}=await lL(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<C)throw new awe({maxPriorityFeePerGas:C});h.maxPriorityFeePerGas=C,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new u$;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:w}=await lL(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await $t(t,k2,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),nw(h),delete h.parameters,h}async function m$(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const rD=new N2(128);async function SI(t,e){var w,C,N,S;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...m}=e;if(typeof n>"u")throw new tw({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Ys(n):null;try{nw(e);const P=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await aX({authorization:i[0]}).catch(()=>{throw new Ne("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let O;r!==null&&(O=await $t(t,IC,"getChainId")({}),lX({currentChainId:O,chain:r}));const L=(N=(C=(w=t.chain)==null?void 0:w.formatters)==null?void 0:C.transactionRequest)==null?void 0:N.format,W=(L||SC)({...R2(m,{format:L}),accessList:s,authorizationList:i,blobs:o,chainId:O,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:P,type:p,value:g}),F=rD.get(t.uid),V=F?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:V,params:[W]},{retryCount:0})}catch($){if(F===!1)throw $;const v=$;if(v.name==="InvalidInputRpcError"||v.name==="InvalidParamsRpcError"||v.name==="MethodNotFoundRpcError"||v.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[W]},{retryCount:0}).then(E=>(rD.set(t.uid,!0),E)).catch(E=>{const _=E;throw _.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"?(rD.set(t.uid,!1),v):_});throw v}}if((y==null?void 0:y.type)==="local"){const O=await $t(t,AI,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...SX,"sidecars"],type:p,value:g,...m,to:P}),L=(S=r==null?void 0:r.serializers)==null?void 0:S.transaction,M=await y.signTransaction(O,{serializer:L});return await $t(t,m$,"sendRawTransaction")({serializedTransaction:M})}throw(y==null?void 0:y.type)==="smart"?new rT({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new rT({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(P){throw P instanceof rT?P:hX(P,{...e,account:y,chain:e.chain||void 0})}}function Dwe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=x2({abi:n,args:r,bytecode:s});return SI(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const dL=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],hL=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],IX=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],NX=[...IX,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Mwe=[...IX,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],r7=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],s7=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],i7=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Bwe(t,e={}){typeof e.size<"u"&&Gl(t,{size:e.size});const n=Ni(t,e);return Qc(n,e)}function Lwe(t,e={}){let n=t;if(typeof e.size<"u"&&(Gl(n,{size:e.size}),n=zd(n)),n.length>1||n[0]>1)throw new bye(n);return!!n[0]}function df(t,e={}){typeof e.size<"u"&&Gl(t,{size:e.size});const n=Ni(t,e);return Wu(n,e)}function Uwe(t,e={}){let n=t;return typeof e.size<"u"&&(Gl(n,{size:e.size}),n=zd(n,{dir:"right"})),new TextDecoder().decode(n)}function II(t,e){const n=typeof e=="string"?$l(e):e,r=o$(n);if(Vs(n)===0&&t.length>0)throw new bI;if(Vs(e)&&Vs(e)<32)throw new LZ({data:typeof e=="string"?e:Ni(e),params:t,size:Vs(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=av(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function av(t,e,{staticPosition:n}){const r=i$(e.type);if(r){const[s,i]=r;return Fwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Hwe(t,e,{staticPosition:n});if(e.type==="address")return $we(t);if(e.type==="bool")return jwe(t);if(e.type.startsWith("bytes"))return Wwe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return zwe(t,e);if(e.type==="string")return Gwe(t,{staticPosition:n});throw new jye(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const o7=32,fL=32;function $we(t){const e=t.readBytes(32);return[EI(Ni(tX(e,-20))),32]}function Fwe(t,e,{length:n,staticPosition:r}){if(!n){const o=df(t.readBytes(fL)),a=r+o,c=a+o7;t.setPosition(a);const l=df(t.readBytes(o7)),u=zA(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=av(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(zA(e)){const o=df(t.readBytes(fL)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=av(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=av(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function jwe(t){return[Lwe(t.readBytes(32),{size:32}),32]}function Wwe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=df(t.readBytes(32));t.setPosition(n+o);const a=df(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ni(c),32]}return[Ni(t.readBytes(Number.parseInt(s),32)),32]}function zwe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Bwe(s,{signed:n}):df(s,{signed:n}),32]}function Hwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(zA(e)){const o=df(t.readBytes(fL)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=av(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=av(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Gwe(t,{staticPosition:e}){const n=df(t.readBytes(32)),r=e+n;t.setPosition(r);const s=df(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Uwe(zd(i));return t.setPosition(e+32),[o,32]}function zA(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(zA);const n=i$(t.type);return!!(n&&zA({...t,type:n[1]}))}const qwe=t=>fo(_C(t));function Vwe(t){return qwe(t)}const Kwe="1.0.8";let tl=class pL extends Error{constructor(e,n={}){var o;const r=n.cause instanceof pL?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof pL&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Kwe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Bf(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const xX=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,TX=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,RX=/^\(.+?\).*?$/,a7=/^tuple(?<array>(\[(\d*)\])*)$/;function gL(t){let e=t.type;if(a7.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=gL(i),s<n-1&&(e+=", ")}const r=Bf(a7,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,gL({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function d1(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=gL(s),r!==n-1&&(e+=", ")}return e}function DR(t){var e;return t.type==="function"?`function ${t.name}(${d1(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${d1(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${d1(t.inputs)})`:t.type==="error"?`error ${t.name}(${d1(t.inputs)})`:t.type==="constructor"?`constructor(${d1(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const kX=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Ywe(t){return kX.test(t)}function Qwe(t){return Bf(kX,t)}const PX=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Jwe(t){return PX.test(t)}function Zwe(t){return Bf(PX,t)}const OX=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Xwe(t){return OX.test(t)}function ebe(t){return Bf(OX,t)}const DX=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function y$(t){return DX.test(t)}function tbe(t){return Bf(DX,t)}const MX=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function nbe(t){return MX.test(t)}function rbe(t){return Bf(MX,t)}const BX=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function sbe(t){return BX.test(t)}function ibe(t){return Bf(BX,t)}const obe=/^receive\(\) external payable$/;function abe(t){return obe.test(t)}const cbe=new Set(["indexed"]),mL=new Set(["calldata","memory","storage"]);class lbe extends tl{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class ube extends tl{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class dbe extends tl{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class hbe extends tl{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class fbe extends tl{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class pbe extends tl{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class gbe extends tl{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class mbe extends tl{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class NC extends tl{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class ybe extends tl{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class wbe extends tl{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class bbe extends tl{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class vbe extends tl{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Ebe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const sD=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function yL(t,e={}){if(Xwe(t))return Cbe(t,e);if(Jwe(t))return _be(t,e);if(Ywe(t))return Abe(t,e);if(nbe(t))return Sbe(t,e);if(sbe(t))return Ibe(t);if(abe(t))return{type:"receive",stateMutability:"payable"};throw new ybe({signature:t})}function Cbe(t,e={}){const n=ebe(t);if(!n)throw new NC({signature:t,type:"function"});const r=xu(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(I0(r[a],{modifiers:mL,structs:e,type:"function"}));const o=[];if(n.returns){const a=xu(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(I0(a[l],{modifiers:mL,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function _be(t,e={}){const n=Zwe(t);if(!n)throw new NC({signature:t,type:"event"});const r=xu(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(I0(r[o],{modifiers:cbe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Abe(t,e={}){const n=Qwe(t);if(!n)throw new NC({signature:t,type:"error"});const r=xu(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(I0(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Sbe(t,e={}){const n=rbe(t);if(!n)throw new NC({signature:t,type:"constructor"});const r=xu(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(I0(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Ibe(t){const e=ibe(t);if(!e)throw new NC({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Nbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,xbe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Tbe=/^u?int$/;function I0(t,e){var d,h;const n=Ebe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(sD.has(n))return sD.get(n);const r=RX.test(t),s=Bf(r?xbe:Nbe,t);if(!s)throw new hbe({param:t});if(s.name&&kbe(s.name))throw new fbe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=xu(s.type),p=[],g=f.length;for(let m=0;m<g;m++)p.push(I0(f[m],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Tbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!LX(c))throw new dbe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new pbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(mL.has(s.modifier)&&!Pbe(c,!!s.array))throw new gbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return sD.set(n,u),u}function xu(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?xu(a,[...e,n.trim()]):xu(a,e,`${n}${o}`,r);case"(":return xu(a,e,`${n}${o}`,r+1);case")":return xu(a,e,`${n}${o}`,r-1);default:return xu(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new vbe({current:n,depth:r});return e.push(n.trim()),e}function LX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||xX.test(t)||TX.test(t)}const Rbe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function kbe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||xX.test(t)||TX.test(t)||Rbe.test(t)}function Pbe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function UX(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!y$(a))continue;const c=tbe(a);if(!c)throw new NC({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=I0(p,{type:"struct"});u.push(g)}if(!u.length)throw new wbe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=$X(c,e)}return r}const Obe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function $X(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(RX.test(o.type))r.push(o);else{const c=Bf(Obe,o.type);if(!(c!=null&&c.type))throw new mbe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new bbe({type:u});r.push({...o,type:`tuple${l??""}`,components:$X(e[u]??[],e,new Set([...n,u]))})}else if(LX(u))r.push(o);else throw new ube({type:u})}}return r}function FX(t){const e=UX(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];y$(i)||n.push(yL(i,e))}return n}function c7(t){let e;if(typeof t=="string")e=yL(t);else{const n=UX(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!y$(i)){e=yL(i,n);break}}}if(!e)throw new lbe({signature:t});return e}function Dbe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Ne("Unable to normalize signature.");return s}const Mbe=t=>{const e=typeof t=="string"?t:DR(t);return Dbe(e)};function jX(t){return Vwe(Mbe(t))}const P2=jX,NI=t=>ME(jX(t),0,4);function rw(t){const{abi:e,args:n=[],name:r}=t,s=Qd(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?NI(a)===r:a.type==="event"?P2(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?wL(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=WX(a.inputs,o.inputs,n);if(l)throw new Uye({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function wL(t,e){const n=typeof t,r=e.type;switch(r){case"address":return zl(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>wL(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>wL(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function WX(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return WX(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?zl(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?zl(n[r],{strict:!1}):!1)return o}}const iD="/docs/contract/decodeFunctionResult";function sw(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=rw({abi:e,args:n,name:r});if(!a)throw new PE(r,{docsPath:iD});i=a}if(i.type!=="function")throw new PE(void 0,{docsPath:iD});if(!i.outputs)throw new FZ(i.name,{docsPath:iD});const o=II(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const l7="/docs/contract/encodeFunctionData";function Bbe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=rw({abi:e,args:n,name:r});if(!i)throw new PE(r,{docsPath:l7});s=i}if(s.type!=="function")throw new PE(void 0,{docsPath:l7});return{abi:[s],functionName:NI(zu(s))}}function ql(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Bbe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?ym(s.inputs,e??[]):void 0;return AC([i,o??"0x"])}function xC({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new eL({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new eL({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const zX={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},HX={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Lbe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Ube(t){const{abi:e,data:n}=t,r=ME(n,0,4);if(r==="0x")throw new bI;const i=[...e||[],HX,Lbe].find(o=>o.type==="error"&&r===NI(zu(o)));if(!i)throw new UZ(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?II(i.inputs,ME(n,4)):void 0,errorName:i.name}}function GX({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Si(e[i]):e[i]}`).join(", ")})`}class qX extends Ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var m;const p=n?Ys(n):void 0;let g=_I({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${a$(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ac(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ac(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ac(l)} gwei`,nonce:u});f&&(g+=`
${gwe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class VX extends Ne{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=rw({abi:n,args:r,name:o}),l=c?GX({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?zu(c,{includeName:!0}):void 0,d=_I({address:s&&ewe(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class bL extends Ne{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Ube({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=zX[f]}else{const f=u?zu(u,{includeName:!0}):void 0,p=u&&h?GX({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof UZ&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class $be extends Ne{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Fbe extends Ne{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class O2 extends Ne{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function w$(t,e){var r,s,i,o,a,c;if(!(t instanceof Ne))return!1;const n=t.walk(l=>l instanceof bL);return n instanceof bL?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===zX[50]):!1}function jbe(t){const{abi:e,data:n}=t,r=ME(n,0,4),s=e.find(i=>i.type==="function"&&r===NI(zu(i)));if(!s)throw new Lye(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?II(s.inputs,ME(n,4)):void 0}}const oD="/docs/contract/encodeErrorResult";function u7(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=rw({abi:e,args:r,name:n});if(!c)throw new $9(n,{docsPath:oD});s=c}if(s.type!=="error")throw new $9(void 0,{docsPath:oD});const i=zu(s),o=NI(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Mye(s.name,{docsPath:oD});a=ym(s.inputs,r)}return AC([o,a])}const aD="/docs/contract/encodeFunctionResult";function Wbe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=rw({abi:e,name:n});if(!o)throw new PE(n,{docsPath:aD});s=o}if(s.type!=="function")throw new PE(void 0,{docsPath:aD});if(!s.outputs)throw new FZ(s.name,{docsPath:aD});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new jZ(r)})();return ym(s.outputs,i)}const b$="x-batch-gateway:true";async function zbe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=jbe({abi:hL,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(b$)?await zbe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Hbe(c)}})),Wbe({abi:hL,functionName:"query",result:[s,i]})}function Hbe(t){return t.name==="HttpRequestError"&&t.status?u7({abi:hL,errorName:"HttpError",args:[t.status,t.shortMessage]}):u7({abi:[HX],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function KX(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Qd(e)?e:null}function sT(t){let e=new Uint8Array(32).fill(0);if(!t)return Ni(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=KX(n[r]),i=s?_C(s):fo(s0(n[r]),"bytes");e=fo(jl([e,i]),"bytes")}return Ni(e)}function Gbe(t){return`[${t.slice(2)}]`}function qbe(t){const e=new Uint8Array(32).fill(0);return t?KX(t)||fo(s0(t)):Ni(e)}function D2(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(s0(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=s0(s[i]);o.byteLength>255&&(o=s0(Gbe(qbe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Vbe=3;function N0(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof O2?t:t instanceof Ne?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof bI?new $be({functionName:i}):[Vbe,A0.code].includes(c)&&(l||u||d||h)?new bL({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof l$?u:h??d}):t;return new VX(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const v$=BigInt(0),vL=BigInt(1);function x0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function $N(t){const e=t.toString(16);return e.length&1?"0"+e:e}function YX(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?v$:BigInt("0x"+t)}function M2(t){return YX(DE(t))}function HA(t){return Wl(t),YX(DE(Uint8Array.from(t).reverse()))}function E$(t,e){return Z8(t.toString(16).padStart(e*2,"0"))}function B2(t,e){return E$(t,e).reverse()}function Zs(t,e,n){let r;if(typeof e=="string")try{r=Z8(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(J8(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const cD=t=>typeof t=="bigint"&&v$<=t;function Kbe(t,e,n){return cD(t)&&cD(e)&&cD(n)&&e<=t&&t<n}function $b(t,e,n,r){if(!Kbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Ybe(t){let e;for(e=0;t>v$;t>>=vL,e+=1);return e}const L2=t=>(vL<<BigInt(t))-vL;function Qbe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return sf(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function xI(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function MR(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Jbe="0.1.1";function Zbe(){return Jbe}let oi=class EL extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof EL){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof EL&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Zbe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return QX(this,e)}};function QX(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?QX(t.cause,e):e?null:t}const Xbe="#__bigint";function eve(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Xbe:s,n)}function tve(t,e){if(h7(t)>e)throw new dve({givenSize:h7(t),maxSize:e})}const ph={zero:48,nine:57,A:65,F:70,a:97,f:102};function d7(t){if(t>=ph.zero&&t<=ph.nine)return t-ph.zero;if(t>=ph.A&&t<=ph.F)return t-(ph.A-10);if(t>=ph.a&&t<=ph.f)return t-(ph.a-10)}function nve(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new hve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function C$(t,e){if(Hl(t)>e)throw new yve({givenSize:Hl(t),maxSize:e})}function rve(t,e){if(typeof e=="number"&&e>0&&e>Hl(t)-1)throw new tee({offset:e,position:"start",size:Hl(t)})}function sve(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Hl(t)!==n-e)throw new tee({offset:n,position:"end",size:Hl(t)})}function JX(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new wve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const ive=new TextEncoder;function ove(t){return t instanceof Uint8Array?t:typeof t=="string"?cve(t):ave(t)}function ave(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function cve(t,e={}){const{size:n}=e;let r=t;n&&(C$(t,n),r=R0(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=d7(s.charCodeAt(c++)),u=d7(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new oi(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function lve(t,e={}){const{size:n}=e,r=ive.encode(t);return typeof n=="number"?(tve(r,n),uve(r,n)):r}function uve(t,e){return nve(t,{dir:"right",size:e})}function h7(t){return t.length}let dve=class extends oi{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},hve=class extends oi{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const fve=new TextEncoder,pve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gve(t,e={}){const{strict:n=!1}=e;if(!t)throw new f7(t);if(typeof t!="string")throw new f7(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new p7(t);if(!t.startsWith("0x"))throw new p7(t)}function Zd(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function ZX(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(C$(n,e.size),T0(n,e.size)):n}function XX(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=pve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(C$(r,e.size),R0(r,e.size)):r}function ra(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new eee({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?T0(c,r):c}function _$(t,e={}){return XX(fve.encode(t),e)}function T0(t,e){return JX(t,{dir:"left",size:e})}function R0(t,e){return JX(t,{dir:"right",size:e})}function A$(t,e,n,r={}){const{strict:s}=r;rve(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&sve(i,e,n),i}function Hl(t){return Math.ceil((t.length-2)/2)}function mve(t,e={}){const{strict:n=!1}=e;try{return gve(t,{strict:n}),!0}catch{return!1}}let eee=class extends oi{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class f7 extends oi{constructor(e){super(`Value \`${typeof e=="object"?eve(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class p7 extends oi{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let yve=class extends oi{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class tee extends oi{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let wve=class extends oi{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function bve(t){return{address:t.address,amount:ra(t.amount),index:ra(t.index),validatorIndex:ra(t.validatorIndex)}}function nee(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:ra(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:ra(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:ra(t.gasLimit)},...typeof t.number=="bigint"&&{number:ra(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:ra(t.prevRandao)},...typeof t.time=="bigint"&&{time:ra(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(bve)}}}const vve="0x82ad56cb",ree="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Eve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Cve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function see(t,{docsPath:e,...n}){const r=(()=>{const s=T2(t,n);return s instanceof CI?t:s})();return new qX(r,{docsPath:e,...n})}function S$(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const lD=new Map;function iee({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>lD.delete(e),a=()=>c().map(({args:u})=>u),c=()=>lD.get(e)||[],l=u=>lD.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=S$();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function TI(t,e){var $,v,E,_;const{account:n=t.account,authorizationList:r,batch:s=!!(($=t.batch)!=null&&$.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:N,value:S,stateOverride:P,...O}=e,L=n?Ys(n):void 0;if(u&&(h||f))throw new Ne("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&N)throw new Ne("Cannot provide both `code` & `to` as parameters.");const M=u&&d,W=h&&f&&N&&d,F=M||W,V=M?Sve({code:u,data:d}):W?Ive({data:d,factory:h,factoryData:f,to:N}):d;try{nw(e);const x=(typeof i=="bigint"?It(i):void 0)||o,B=l?nee(l):void 0,j=h$(P),U=(_=(E=(v=t.chain)==null?void 0:v.formatters)==null?void 0:E.transactionRequest)==null?void 0:_.format,H=(U||SC)({...R2(O,{format:U}),from:L==null?void 0:L.address,accessList:a,authorizationList:r,blobs:c,data:V,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:F?void 0:N,value:S});if(s&&_ve({request:H})&&!j&&!B)try{return await Ave(t,{...H,blockNumber:i,blockTag:o})}catch(ge){if(!(ge instanceof cX)&&!(ge instanceof eL))throw ge}const re=(()=>{const ge=[H,x];return j&&B?[...ge,j,B]:j?[...ge,j]:B?[...ge,{},B]:ge})(),ne=await t.request({method:"eth_call",params:re});return ne==="0x"?{data:void 0}:{data:ne}}catch(R){const x=Nve(R),{offchainLookup:B,offchainLookupSignature:j}=await ro(async()=>{const{offchainLookup:U,offchainLookupSignature:I}=await import("./ccip-Ca3JmEFC.js");return{offchainLookup:U,offchainLookupSignature:I}},[]);if(t.ccipRead!==!1&&(x==null?void 0:x.slice(0,10))===j&&N)return{data:await B(t,{data:x,to:N})};throw F&&(x==null?void 0:x.slice(0,10))==="0x101bb98d"?new Fbe({factory:h}):see(R,{...e,account:L,chain:t.chain})}}function _ve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(vve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Ave(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new cX;l=xC({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?It(s):void 0)||i,{schedule:h}=iee({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((w,{data:C})=>w+(C.length-2),0)>n*2},fn:async m=>{const y=m.map(N=>({allowFailure:!0,callData:N.data,target:N.to})),w=ql({abi:dL,args:[y],functionName:"aggregate3"}),C=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return sw({abi:dL,args:[y],functionName:"aggregate3",data:C||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new O2({data:f});return f==="0x"?{data:void 0}:{data:f}}function Sve(t){const{code:e,data:n}=t;return x2({abi:FX(["constructor(bytes, bytes)"]),bytecode:ree,args:[e,n]})}function Ive(t){const{data:e,factory:n,factoryData:r,to:s}=t;return x2({abi:FX(["constructor(address, bytes, address, bytes)"]),bytecode:Eve,args:[s,e,n,r]})}function Nve(t){var n;if(!(t instanceof Ne))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Xd(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=ql({abi:n,args:s,functionName:i});try{const{data:c}=await $t(t,TI,"call")({...o,data:a,to:r});return sw({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw N0(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function xve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=ql({abi:s7,functionName:"addr",...s!=null?{args:[sT(i),BigInt(s)]}:{args:[sT(i)]}}),h={address:l,abi:NX,functionName:"resolve",args:[Fl(D2(i)),d,o??[b$]],blockNumber:n,blockTag:r},p=await $t(t,Xd,"readContract")(h);if(p[0]==="0x")return null;const g=sw({abi:s7,args:s!=null?[sT(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||zd(g)==="0x00"?null:g}catch(d){if(a)throw d;if(w$(d,"resolve"))return null;throw d}}class Tve extends Ne{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class h1 extends Ne{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class I$ extends Ne{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Rve extends Ne{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const kve=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Pve=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Ove=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Dve=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Mve(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function g7(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function oee({uri:t,gatewayUrls:e}){const n=Ove.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=g7(e==null?void 0:e.ipfs,"https://ipfs.io"),s=g7(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(kve),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Pve.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Dve,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new I$({uri:t})}function aee(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Tve({data:t});return t.image||t.image_url||t.image_data}async function Bve({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await N$({gatewayUrls:t,uri:aee(n)})}catch{throw new I$({uri:e})}}async function N$({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=oee({uri:e,gatewayUrls:t});if(r||await Mve(n))return n;throw new I$({uri:e})}function Lve(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new h1({reason:"Only EIP-155 supported"});if(!o)throw new h1({reason:"Chain ID not found"});if(!c)throw new h1({reason:"Contract address not found"});if(!s)throw new h1({reason:"Token ID not found"});if(!a)throw new h1({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Uve(t,{nft:e}){if(e.namespace==="erc721")return Xd(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Xd(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Rve({namespace:e.namespace})}async function $ve(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Fve(t,{gatewayUrls:e,record:n}):N$({uri:n,gatewayUrls:e})}async function Fve(t,{gatewayUrls:e,record:n}){const r=Lve(n),s=await Uve(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=oee({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return N$({uri:aee(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Bve({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function cee(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:NX,functionName:"resolve",args:[Fl(D2(i)),ql({abi:r7,functionName:"text",args:[sT(i),s]}),o??[b$]],blockNumber:n,blockTag:r},f=await $t(t,Xd,"readContract")(d);if(f[0]==="0x")return null;const p=sw({abi:r7,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(w$(d,"resolve"))return null;throw d}}async function jve(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await $t(t,cee,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await $ve(t,{record:c,gatewayUrls:r})}catch{return null}}async function lee(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=xC({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Mwe,functionName:"reverse",args:[Fl(D2(c))],blockNumber:n,blockTag:r},u=$t(t,Xd,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(w$(l,"reverse"))return null;throw l}}async function Wve(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await $t(t,Xd,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Fl(D2(s))],blockNumber:n,blockTag:r});return c}async function uee(t,e){var m,y,w;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Ys(n):void 0;try{nw(e);const N=(typeof r=="bigint"?It(r):void 0)||s,S=(w=(y=(m=t.chain)==null?void 0:m.formatters)==null?void 0:y.transactionRequest)==null?void 0:w.format,O=(S||SC)({...R2(p,{format:S}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),L=await t.request({method:"eth_createAccessList",params:[O,N]});return{accessList:L.accessList,gasUsed:BigInt(L.gasUsed)}}catch(C){throw see(C,{...e,account:g,chain:t.chain})}}function U2(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function zve(t){const e=U2(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Hve extends Ne{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const m7="/docs/contract/encodeEventTopics";function RI(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=rw({abi:e,name:n});if(!l)throw new F9(n,{docsPath:m7});s=l}if(s.type!=="event")throw new F9(void 0,{docsPath:m7});const i=zu(s),o=P2(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>y7({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?y7({param:d,value:u[h]}):null))??[])}return[o,...a]}function y7({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return fo(_C(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Hve(t.type);return ym([t],[e])}async function dee(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=U2(t,{method:"eth_newFilter"}),u=i?RI({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?It(o):o,toBlock:typeof c=="bigint"?It(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function hee(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=U2(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>RI({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?It(i):i,toBlock:typeof a=="bigint"?It(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function fee(t){const e=U2(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Gve(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=ql({abi:n,args:s,functionName:i});try{return await $t(t,k2,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Ys(a.account):void 0;throw N0(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function qve(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Vve=new Map,Kve=new Map;function Yve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Vve),r=e(t,Kve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Qve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Yve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Jve=t=>`blockNumber.${t}`;async function kI(t,{cacheTime:e=t.cacheTime}={}){const n=await Qve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Jve(t.uid),cacheTime:e});return BigInt(n)}async function Zve(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?It(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Wu(i)}async function w7(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?It(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function $2(t,e){if(!zl(t,{strict:!1}))throw new Zg({address:t});if(!zl(e,{strict:!1}))throw new Zg({address:e});return t.toLowerCase()===e.toLowerCase()}const b7="/docs/contract/decodeEventLog";function x$(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Bye({docsPath:b7});const c=e.find(g=>g.type==="event"&&o===P2(zu(g)));if(!(c&&"name"in c)||c.type!=="event")throw new $Z(o,{docsPath:b7});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,m)=>[g,m]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[m,y]=f[g],w=a[g];if(!w)throw new I2({abiItem:c,param:m});h[d?y:m.name||y]=Xve({param:m,value:w})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=II(p,n);if(g)if(d)for(let m=0;m<u.length;m++)h[m]=h[m]??g.shift();else for(let m=0;m<p.length;m++)h[p[m].name]=g[m]}catch(g){if(i)throw g instanceof LZ||g instanceof sX?new IA({abiItem:c,data:n,params:p,size:Vs(n)}):g}else if(i)throw new IA({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Xve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(II([t],e)||[])[0]}function T$(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===P2(u));if(!c)return null;const l=x$({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!eEe({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof $Z)return null;if(c instanceof IA||c instanceof I2){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function eEe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?$2(o,a):i.type==="string"||i.type==="bytes"?fo(_C(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Sf(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function R$(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>RI({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?It(r):r,toBlock:typeof s=="bigint"?It(s):s}]});const f=h.map(p=>Sf(p));return u?T$({abi:u,args:a,logs:f,strict:l}):f}async function pee(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?rw({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return $t(t,R$,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class tEe extends Ne{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function nEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await $t(t,Xd,"readContract")({abi:rEe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new tEe({address:n}):o}}const rEe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function sEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function iEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?It(n):void 0,o=await t.request({method:"eth_feeHistory",params:[It(e),i||r,s]},{dedupe:!!i});return sEe(o)}async function F2(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Sf(i));return!("abi"in e)||!e.abi?s:T$({abi:e.abi,logs:s,strict:n})}async function oEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Sf(i));return e.abi?T$({abi:e.abi,logs:s,strict:n}):s}async function aEe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?It(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function j2(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?It(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,It(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,It(i)]},{dedupe:!!a}),!c)throw new uX({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||gX)(c)}async function cEe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([$t(t,kI,"getBlockNumber")({}),e?$t(t,j2,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const gee={"0x0":"reverted","0x1":"success"};function lEe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Sf(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Wu(t.transactionIndex):null,status:t.status?gee[t.status]:null,type:t.type?pX[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function CL(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new dX({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||lEe)(n)}async function mee(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=xC({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:C,address:N,args:S,functionName:P}=l[w];try{const O=ql({abi:C,args:S,functionName:P});p+=(O.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(O.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:O,target:N}]}catch(O){const L=N0(O,{abi:C,address:N,args:S,docsPath:"/docs/contract/multicall",functionName:P,sender:n});if(!r)throw L;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:N}]}}const g=await Promise.allSettled(h.map(w=>$t(t,Xd,"readContract")({abi:dL,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let w=0;w<g.length;w++){const C=g[w];if(C.status==="rejected"){if(!r)throw C.reason;for(let S=0;S<h[w].length;S++)m.push({status:"failure",error:C.reason,result:void 0});continue}const N=C.value;for(let S=0;S<N.length;S++){const{returnData:P,success:O}=N[S],{callData:L}=h[w][S],{abi:M,address:W,functionName:F,args:V}=l[m.length];try{if(L==="0x")throw new bI;if(!O)throw new O2({data:P});const $=sw({abi:M,args:V,data:P,functionName:F});m.push(r?{result:$,status:"success"}:$)}catch($){const v=N0($,{abi:M,address:W,args:V,docsPath:"/docs/contract/multicall",functionName:F});if(!r)throw v;m.push({error:v,result:void 0,status:"failure"})}}}if(m.length!==l.length)throw new Ne("multicall results mismatch");return m}async function _L(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?nee(h.blockOverrides):void 0,p=h.calls.map(m=>{const y=m,w=y.account?Ys(y.account):void 0,C=y.abi?ql(y):y.data,N={...y,data:y.dataSuffix?jl([C||"0x",y.dataSuffix]):C,from:y.from??(w==null?void 0:w.address)};return nw(N),SC(N)}),g=h.stateOverrides?h$(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?It(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...mX(h),calls:h.calls.map((p,g)=>{var W,F;const{abi:m,args:y,functionName:w,to:C}=s[f].calls[g],N=((W=p.error)==null?void 0:W.data)??p.returnData,S=BigInt(p.gasUsed),P=(F=p.logs)==null?void 0:F.map(V=>Sf(V)),O=p.status==="0x1"?"success":"failure",L=m&&O==="success"&&N!=="0x"?sw({abi:m,data:N,functionName:w}):null,M=(()=>{var $;if(O==="success")return;let V;if((($=p.error)==null?void 0:$.data)==="0x"?V=new bI:p.error&&(V=new O2(p.error)),!!V)return N0(V,{abi:m??[],address:C??"0x",args:y,functionName:w??"<unknown>"})})();return{data:N,gasUsed:S,logs:P,status:O,...O==="success"?{result:L}:{error:M}}})}))}catch(c){const l=c,u=T2(l,{});throw u instanceof CI?l:u}}function yee(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=n$(ove(t));return n==="Bytes"?r:XX(r)}let uEe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const dEe={checksum:new uEe(8192)},uD=dEe.checksum,hEe=/^0x[a-fA-F0-9]{40}$/;function W2(t,e={}){const{strict:n=!0}=e;if(!hEe.test(t))throw new v7({address:t,cause:new pEe});if(n){if(t.toLowerCase()===t)return;if(fEe(t)!==t)throw new v7({address:t,cause:new gEe})}}function fEe(t){if(uD.has(t))return uD.get(t);W2(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=yee(lve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return uD.set(t,s),s}function AL(t,e={}){const{strict:n=!0}=e??{};try{return W2(t,{strict:n}),!0}catch{return!1}}class v7 extends oi{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class pEe extends oi{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class gEe extends oi{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function SL(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new oi("Unable to normalize signature.");return s}function IL(t,e){const n=typeof t,r=e.type;switch(r){case"address":return AL(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>IL(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>IL(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function wee(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return wee(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?AL(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?AL(n[r],{strict:!1}):!1)return o}}function bee(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?c7(t):t;return{...r,...n?{hash:Fb(r)}:{}}}function mEe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=mve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?vee(l)===A$(e,0,4):l.type==="event"?Fb(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new NL({name:e});if(o.length===1)return{...o[0],...s?{hash:Fb(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Fb(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?IL(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=wee(l.inputs,a.inputs,r);if(d)throw new wEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new NL({name:e});return{...c,...s?{hash:Fb(c)}:{}}}function vee(t){return A$(Fb(t),0,4)}function yEe(t){const e=typeof t=="string"?t:DR(t);return SL(e)}function Fb(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:yee(_$(yEe(t)))}class wEe extends oi{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${SL(DR(e.abiItem))}\`, and`,`\`${n.type}\` in \`${SL(DR(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class NL extends oi{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const bEe=/^(.*)\[([0-9]*)\]$/,vEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Eee=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function EEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(k$({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function k$({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=TEe(r.type);if(s){const[i,o]=s;return _Ee(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return xEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return CEe(n,{checksum:t});if(r.type==="bool")return SEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=Eee.exec(r.type)??[];return IEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return AEe(n,{type:r.type});if(r.type==="string")return NEe(n);throw new See(r.type)}function P$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Hl(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ra(e+s,{size:32})),r.push(a),s+=Hl(a)):n.push(a)}return Zd(...n,...r)}function CEe(t,e){const{checksum:n=!1}=e;return W2(t,{strict:n}),{dynamic:!1,encoded:T0(t.toLowerCase())}}function _Ee(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new kEe(t);if(!i&&t.length!==r)throw new REe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=k$({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=P$(a);if(i){const l=ra(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Zd(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Zd(...a.map(({encoded:c})=>c))}}function AEe(t,{type:e}){const[,n]=e.split("bytes"),r=Hl(t);if(!n){let s=t;return r%32!==0&&(s=R0(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Zd(T0(ra(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new _ee({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:R0(t)}}function SEe(t){if(typeof t!="boolean")throw new oi(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:T0(ZX(t))}}function IEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new eee({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ra(t,{size:32,signed:e})}}function NEe(t){const e=_$(t),n=Math.ceil(Hl(e)/32),r=[];for(let s=0;s<n;s++)r.push(R0(A$(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Zd(R0(ra(Hl(e),{size:32})),...r)}}function xEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=k$({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?P$(i):Zd(...i.map(({encoded:o})=>o))}}function TEe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Cee(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new Aee({expectedLength:t.length,givenLength:e.length});const s=EEe({checksumAddress:r,parameters:t,values:e}),i=P$(s);return i.length===0?"0x":i}function xL(t,e){if(t.length!==e.length)throw new Aee({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(xL.encode(s,i))}return Zd(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return W2(c),T0(c.toLowerCase(),s?32:0)}if(n==="string")return _$(r);if(n==="bytes")return r;if(n==="bool")return T0(ZX(r),s?32:1);const i=n.match(Eee);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return ra(r,{size:s?32:d,signed:l==="int"})}const o=n.match(vEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new _ee({expectedSize:Number.parseInt(l),value:r});return R0(r,s?32:0)}const a=n.match(bEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Zd(...u)}throw new See(n)}t.encode=e})(xL||(xL={}));class REe extends oi{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class _ee extends oi{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Hl(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Aee extends oi{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class kEe extends oi{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class See extends oi{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function PEe(t,e){var s;const{bytecode:n,args:r}=e;return Zd(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?Cee(t.inputs,r):"0x")}function OEe(t){return bee(t)}function DEe(t,...e){const{overloads:n}=t,r=n?MEe([t,...n],t.name,{args:e[0]}):t,s=BEe(r),i=e.length>0?Cee(r.inputs,e[0]):void 0;return i?Zd(s,i):s}function Mw(t,e={}){return bee(t,e)}function MEe(t,e,n){const r=mEe(t,e,n);if(r.type!=="function")throw new NL({name:e,type:"function"});return r}function BEe(t){return vee(t)}const LEe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ed="0x0000000000000000000000000000000000000000",FN=new N2(8192);function UEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(FN.get(n))return FN.get(n);const r=t().finally(()=>FN.delete(n));return FN.set(n,r),r}async function BR(t){return new Promise(e=>setTimeout(e,t))}function LR(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await BR(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function $Ee(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new yy(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new yy(new Error("method not supported"),{method:l});const u=s?kE(`${c}.${Si(n)}`):void 0;return UEe(()=>LR(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case xA.code:throw new xA(f);case TA.code:throw new TA(f);case RA.code:throw new RA(f,{method:n.method});case kA.code:throw new kA(f);case A0.code:throw new A0(f);case S0.code:throw new S0(f);case PA.code:throw new PA(f);case Dg.code:throw new Dg(f);case BE.code:throw new BE(f);case yy.code:throw new yy(f,{method:n.method});case LE.code:throw new LE(f);case OA.code:throw new OA(f);case yi.code:throw new yi(f);case DA.code:throw new DA(f);case MA.code:throw new MA(f);case BA.code:throw new BA(f);case LA.code:throw new LA(f);case Jd.code:throw new Jd(f);case UE.code:throw new UE(f);case UA.code:throw new UA(f);case $A.code:throw new $A(f);case FA.code:throw new FA(f);case jA.code:throw new jA(f);case WA.code:throw new WA(f);case $E.code:throw new $E(f);case 5e3:throw new yi(f);default:throw h instanceof Ne?h:new nwe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof T_){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>FEe(h)}),{enabled:s,id:u})}}function FEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===LE.code||t.code===A0.code:t instanceof T_&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Iee(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Nee(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function jEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const E7=jEe();function WEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await Nee(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Si(r.map(C=>({jsonrpc:"2.0",id:C.id??E7.take(),...C}))):Si({jsonrpc:"2.0",id:r.id??E7.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},m=new Request(t,g),y=await(s==null?void 0:s(m,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new J9({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new T_({body:r,details:Si(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof T_||h instanceof J9?h:new T_({body:r,cause:h,url:t})}}}}class zEe extends Ne{constructor({domain:e}){super(`Invalid domain "${Si(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class HEe extends Ne{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class GEe extends Ne{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function qEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:Oee({domain:e}),...t.types};Pee({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(VEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(xee({data:n,primaryType:r,types:s})),fo(jl(i))}function VEe({domain:t,types:e}){return xee({data:t,primaryType:"EIP712Domain",types:e})}function xee({data:t,primaryType:e,types:n}){const r=Tee({data:t,primaryType:e,types:n});return fo(r)}function Tee({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[KEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=kee({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return ym(r,s)}function KEe({primaryType:t,types:e}){const n=Fl(YEe({primaryType:t,types:e}));return fo(n)}function YEe({primaryType:t,types:e}){let n="";const r=Ree({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function Ree({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])Ree({primaryType:i.type,types:e},n);return n}function kee({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},fo(Tee({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},fo(r)];if(n==="string")return[{type:"bytes32"},fo(Fl(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>kee({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},fo(ym(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function QEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Si({domain:o,message:a,primaryType:r,types:s})}function Pee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(nX);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,m,y]=h;It(d,{signed:m==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!zl(d))throw new Zg({address:d});const f=u.match(I0e);if(f){const[g,m]=f;if(m&&Vs(d)!==Number.parseInt(m))throw new $ye({expectedSize:Number.parseInt(m),givenSize:Vs(d)})}const p=s[u];p&&(JEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new zEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new HEe({primaryType:r,types:s})}function Oee({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function JEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new GEe({type:t})}const ZEe=`Ethereum Signed Message:
`;function XEe(t){const e=typeof t=="string"?kE(t):typeof t.raw=="string"?t.raw:Ni(t.raw),n=kE(`${ZEe}${Vs(e)}`);return jl([n,e])}function Dee(t,e){return fo(XEe(t),e)}const Mee="0x6492649264926492649264926492649264926492649264926492649264926492";function eCe(t){return kR(t,-32)===Mee}function tCe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=AC([ym([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),Mee]);return s==="hex"?i:$l(i)}class nCe extends Ne{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function rCe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new nCe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const sCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function iCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Ys(e.account):void 0;if(o&&!l)throw new Ne("`account` is required when `traceAssetChanges` is true");const u=l?PEe(OEe("constructor(bytes, bytes)"),{bytecode:ree,args:[sCe,DEe(Mw("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async x=>{if(!x.data&&!x.abi)return;const{accessList:B}=await uee(t,{account:l.address,...x,data:x.abi?ql(x):x.data});return B.map(({address:j,storageKeys:U})=>U.length>0?j:null)})).then(x=>x.flat().filter(Boolean)):[],h=await _L(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((x,B)=>({abi:[Mw("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:x,from:ed,nonce:B})),stateOverrides:[{address:ed,nonce:0}]}]:[],{calls:[...s,{}].map(x=>({...x,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((x,B)=>({abi:[Mw("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:x,from:ed,nonce:B})),stateOverrides:[{address:ed,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function decimals() returns (uint256)")],functionName:"decimals",from:ed,nonce:B})),stateOverrides:[{address:ed,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ed,nonce:B})),stateOverrides:[{address:ed,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function symbol() returns (string)")],functionName:"symbol",from:ed,nonce:B})),stateOverrides:[{address:ed,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,m,y,w,C,N]=o?h:[],{calls:S,...P}=f,O=S.slice(0,-1)??[],L=(p==null?void 0:p.calls)??[],M=(g==null?void 0:g.calls)??[],W=[...L,...M].map(x=>x.status==="success"?Qc(x.data):null),F=(m==null?void 0:m.calls)??[],V=(y==null?void 0:y.calls)??[],$=[...F,...V].map(x=>x.status==="success"?Qc(x.data):null),v=((w==null?void 0:w.calls)??[]).map(x=>x.status==="success"?x.result:null),E=((N==null?void 0:N.calls)??[]).map(x=>x.status==="success"?x.result:null),_=((C==null?void 0:C.calls)??[]).map(x=>x.status==="success"?x.result:null),R=[];for(const[x,B]of $.entries()){const j=W[x];if(typeof B!="bigint"||typeof j!="bigint")continue;const U=v[x-1],I=E[x-1],H=_[x-1],re=x===0?{address:LEe,decimals:18,symbol:"ETH"}:{address:d[x-1],decimals:H||U?Number(U??1):void 0,symbol:I??void 0};R.some(ne=>ne.token.address===re.address)||R.push({token:re,value:{pre:j,post:B,diff:B-j}})}return{assetChanges:R,block:P,results:O}}const dD=new Map,C7=new Map;let oCe=0;function If(t,e,n){const r=++oCe,s=()=>dD.get(t)||[],i=()=>{const u=s();dD.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=C7.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(dD.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&C7.set(t,l),o}function TC(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await BR(c);const l=async()=>{s&&(await t({unpoll:i}),await BR(r),l())};l()})(),i}function aCe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Si(["watchBlocks",t.uid,e,n,r,u,c]);return If(p,{onBlock:s,onError:i},g=>TC(async()=>{var m;try{const y=await $t(t,$d,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<y.number;w++){const C=await $t(t,$d,"getBlock")({blockNumber:w,includeTransactions:u});g.onBlock(C,d),d=C}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(m=g.onError)==null||m.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,m=()=>p=!1;return(async()=>{try{r&&$t(t,$d,"getBlock")({blockTag:e,includeTransactions:u}).then(C=>{p&&g&&(s(C,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const C=t.transport.transports.find(N=>N.config.type==="webSocket"||N.config.type==="ipc");return C?C.value:t.transport}return t.transport})(),{unsubscribe:w}=await y.subscribe({params:["newHeads"],async onData(C){var S;if(!p)return;const N=await $t(t,$d,"getBlock")({blockNumber:(S=C.result)==null?void 0:S.number,includeTransactions:u}).catch(()=>{});p&&(s(N,d),g=!1,d=N)},onError(C){i==null||i(C)}});m=w,p||m()}catch(y){i==null||i(y)}})(),()=>m()})()}function Bee(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Si(["watchBlockNumber",t.uid,e,n,o]);return If(d,{onBlockNumber:r,onError:s},h=>TC(async()=>{var f;try{const p=await $t(t,kI,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Si(["watchBlockNumber",t.uid,e,n]);return If(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(y){var C;if(!f)return;const w=Qc((C=y.result)==null?void 0:C.number);h.onBlockNumber(w,c),c=w},onError(y){var w;(w=h.onError)==null||w.call(h,y)}});p=m,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function z2(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function cCe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const m=Si(["watchEvent",e,n,r,t.uid,s,u,o]);return If(m,{onLogs:c,onError:a},y=>{let w;o!==void 0&&(w=o-1n);let C,N=!1;const S=TC(async()=>{var P;if(!N){try{C=await $t(t,hee,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}N=!0;return}try{let O;if(C)O=await $t(t,F2,"getFilterChanges")({filter:C});else{const L=await $t(t,kI,"getBlockNumber")({});w&&w!==L?O=await $t(t,R$,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:L}):O=[],w=L}if(O.length===0)return;if(r)y.onLogs(O);else for(const L of O)y.onLogs([L])}catch(O){C&&O instanceof S0&&(N=!1),(P=y.onError)==null||P.call(y,O)}},{emitOnBegin:!0,interval:u});return async()=>{C&&await $t(t,z2,"uninstallFilter")({filter:C}),S()}})})():(()=>{let m=!0,y=()=>m=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const P=t.transport.transports.find(O=>O.config.type==="webSocket"||O.config.type==="ipc");return P?P.value:t.transport}return t.transport})(),C=i??(s?[s]:void 0);let N=[];C&&(N=[C.flatMap(O=>RI({abi:[O],eventName:O.name,args:n}))],s&&(N=N[0]));const{unsubscribe:S}=await w.subscribe({params:["logs",{address:e,topics:N}],onData(P){var L;if(!m)return;const O=P.result;try{const{eventName:M,args:W}=x$({abi:C??[],data:O.data,topics:O.topics,strict:f}),F=Sf(O,{args:W,eventName:M});c([F])}catch(M){let W,F;if(M instanceof IA||M instanceof I2){if(d)return;W=M.abiItem.name,F=(L=M.abiItem.inputs)==null?void 0:L.some($=>!("name"in $&&$.name))}const V=Sf(O,{args:F?[]:{},eventName:W});c([V])}},onError(P){a==null||a(P)}});y=S,m||y()}catch(w){a==null||a(w)}})(),()=>y()})()}function Lee(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Si(["watchPendingTransactions",t.uid,e,i]);return If(l,{onTransactions:r,onError:n},u=>{let d;const h=TC(async()=>{var f;try{if(!d)try{d=await $t(t,fee,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await $t(t,F2,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await $t(t,z2,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function lCe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>EI(r))}async function uCe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function dCe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Ys(n):void 0,i=r?[s==null?void 0:s.address,[It(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const Uee="0x5792579257925792579257925792579257925792579257925792579257925792",$ee=It(0,{size:32});async function hCe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Ys(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?ql({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?jl([p,f.dataSuffix]):p,to:f.to,value:f.value?It(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:It(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new UE(new Ne(w,{details:w}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new $E(new Ne(y,{details:y}))}const p=[];for(const y of d){const w=SI(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Qc(y.value):void 0});p.push(w),o>0&&await new Promise(C=>setTimeout(C,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const m=g.map(y=>y.status==="fulfilled"?y.value:$ee);return{id:jl([...m,It(s.id,{size:32}),Uee])}}throw hX(h,{...e,account:u,chain:e.chain})}}async function Fee(t,e){async function n(u){if(u.endsWith(Uee.slice(2))){const h=zd(kR(u,-64,-32)),f=kR(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(m=>$ee.slice(2)!==m?t.request({method:"eth_getTransactionReceipt",params:[`0x${m}`]},{dedupe:!0}):void 0)),g=p.some(m=>m===null)?100:p.every(m=>(m==null?void 0:m.status)==="0x1")?200:p.every(m=>(m==null?void 0:m.status)==="0x0")?500:600;return{atomic:!1,chainId:Wu(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Wu(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Qc(u.blockNumber),gasUsed:Qc(u.gasUsed),status:gee[u.status]})))??[],statusCode:l,status:c,version:o}}async function fCe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function pCe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Si(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=S$();let u;const d=If(o,{resolve:c,reject:l},h=>{const f=TC(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await Fee(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new gCe({id:n}))},i):void 0,await a}class gCe extends Ne{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function mCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function yCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Wu(t.nonce):void 0,storageProof:t.storageProof?mCe(t.storageProof):void 0}}async function wCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?It(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return yCe(a)}async function jee(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Si(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:m,reject:y}=S$(),w=a?setTimeout(()=>{p(),f(),y(new X0e({hash:n}))},a):void 0;return f=If(c,{onReplaced:r,resolve:m,reject:y},C=>{p=$t(t,Bee,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(N){const S=O=>{clearTimeout(w),p(),O(),f()};let P=N;if(!h)try{if(d){if(e>1&&(!d.blockNumber||P-d.blockNumber+1n<e))return;S(()=>C.resolve(d));return}if(l||(h=!0,await LR(async()=>{l=await $t(t,j2,"getTransaction")({hash:n}),l.blockNumber&&(P=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await $t(t,CL,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||P-d.blockNumber+1n<e))return;S(()=>C.resolve(d))}catch(O){if(O instanceof uX||O instanceof dX){if(!l){h=!1;return}try{u=l,h=!0;const L=await LR(()=>$t(t,$d,"getBlock")({blockNumber:P,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:F})=>F instanceof fX});h=!1;const M=L.transactions.find(({from:F,nonce:V})=>F===u.from&&V===u.nonce);if(!M||(d=await $t(t,CL,"getTransactionReceipt")({hash:M.hash}),e>1&&(!d.blockNumber||P-d.blockNumber+1n<e)))return;let W="replaced";M.to===u.to&&M.value===u.value&&M.input===u.input?W="repriced":M.from===M.to&&M.value===0n&&(W="cancelled"),S(()=>{var F;(F=C.onReplaced)==null||F.call(C,{reason:W,replacedTransaction:u,transaction:M,transactionReceipt:d}),C.resolve(d)})}catch(L){S(()=>C.reject(L))}}else S(()=>C.reject(O))}}})}),g}async function bCe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>of(n))}async function vCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function Wee(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new tw({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Ys(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Ys(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await $t(t,IC,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await $t(t,p$,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&$2(o.address,i.address))&&(a.nonce+=1)),a}async function ECe(t,e){const{account:n=t.account}=e;if(!n)throw new tw({docsPath:"/docs/eip7702/signAuthorization"});const r=Ys(n);if(!r.signAuthorization)throw new rT({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await Wee(t,e);return r.signAuthorization(s)}async function CCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new tw({docsPath:"/docs/actions/wallet/signTransaction"});const i=Ys(n);nw({account:i,...e});const o=await $t(t,IC,"getChainId")({});r!==null&&lX({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||SC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:It(o),from:i.address}]},{retryCount:0})}async function zee(t,{account:e=t.account,message:n}){if(!e)throw new tw({docsPath:"/docs/actions/wallet/signMessage"});const r=Ys(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?kE(n):n.raw instanceof Uint8Array?Fl(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function _Ce(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new tw({docsPath:"/docs/actions/wallet/signTypedData"});const o=Ys(n),a={EIP712Domain:Oee({domain:r}),...e.types};if(Pee({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=QEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function ACe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Ys(a.account):t.account,l=ql({abi:n,args:s,functionName:o});try{const{data:u}=await $t(t,TI,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=sw({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw N0(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function SCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:It(e)}]},{retryCount:0})}let Hee=class extends X8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,t0e(e);const r=vI(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Xg(i)}update(e){return OE(this),this.iHash.update(e),this}digestInto(e){OE(this),Wl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Gee=(t,e,n)=>new Hee(t,e).update(n).digest();Gee.create=(t,e)=>new Hee(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nc=BigInt(0),go=BigInt(1),wy=BigInt(2),ICe=BigInt(3),qee=BigInt(4),Vee=BigInt(5),Kee=BigInt(8);function Xs(t,e){const n=t%e;return n>=nc?n:e+n}function zs(t,e,n){let r=t;for(;e-- >nc;)r*=r,r%=n;return r}function _7(t,e){if(t===nc)throw new Error("invert: expected non-zero number");if(e<=nc)throw new Error("invert: expected positive modulus, got "+e);let n=Xs(t,e),r=e,s=nc,i=go;for(;n!==nc;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==go)throw new Error("invert: does not exist");return Xs(s,e)}function Yee(t,e){const n=(t.ORDER+go)/qee,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function NCe(t,e){const n=(t.ORDER-Vee)/Kee,r=t.mul(e,wy),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,wy),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function xCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-go,n=0;for(;e%wy===nc;)e/=wy,n++;let r=wy;const s=RC(t);for(;A7(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Yee;let i=s.pow(r,e);const o=(e+go)/wy;return function(c,l){if(c.is0(l))return l;if(A7(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const m=go<<BigInt(u-p-1),y=c.pow(d,m);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function TCe(t){return t%qee===ICe?Yee:t%Kee===Vee?NCe:xCe(t)}const RCe=(t,e)=>(Xs(t,e)&go)===go,kCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function PCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=kCe.reduce((r,s)=>(r[s]="function",r),e);return xI(t,n),t}function OCe(t,e,n){if(n<nc)throw new Error("invalid exponent, negatives unsupported");if(n===nc)return t.ONE;if(n===go)return e;let r=t.ONE,s=e;for(;n>nc;)n&go&&(r=t.mul(r,s)),s=t.sqr(s),n>>=go;return r}function Qee(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function A7(t,e){const n=(t.ORDER-go)/wy,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function DCe(t,e){e!==void 0&&NA(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function RC(t,e,n=!1,r={}){if(t<=nc)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=DCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:L2(o),ZERO:nc,ONE:go,create:u=>Xs(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return nc<=u&&u<t},is0:u=>u===nc,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&go)===go,neg:u=>Xs(-u,t),eql:(u,d)=>u===d,sqr:u=>Xs(u*u,t),add:(u,d)=>Xs(u+d,t),sub:(u,d)=>Xs(u-d,t),mul:(u,d)=>Xs(u*d,t),pow:(u,d)=>OCe(l,u,d),div:(u,d)=>Xs(u*_7(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>_7(u,t),sqrt:i||(u=>(c||(c=TCe(t)),c(l,u))),toBytes:u=>n?B2(u,a):E$(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?HA(u):M2(u)},invertBatch:u=>Qee(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function Jee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Zee(t){const e=Jee(t);return e+Math.ceil(e/2)}function MCe(t,e,n=!1){const r=t.length,s=Jee(e),i=Zee(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?HA(t):M2(t),a=Xs(o,e-go)+go;return n?B2(a,s):E$(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FE=BigInt(0),by=BigInt(1);function R_(t,e){const n=e.negate();return t?n:e}function Xee(t,e,n){const r=e==="pz"?o=>o.pz:o=>o.ez,s=Qee(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function ete(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function hD(t,e){ete(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=L2(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function S7(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=by);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function BCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function LCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const fD=new WeakMap,tte=new WeakMap;function pD(t){return tte.get(t)||1}function I7(t){if(t!==FE)throw new Error("invalid wNAF")}function nte(t,e){return{constTimeNegate:R_,hasPrecomputes(n){return pD(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>FE;)r&by&&(s=s.add(i)),i=i.double(),r>>=by;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=hD(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=hD(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=S7(s,c,a);s=l,d?o=o.add(R_(f,r[p])):i=i.add(R_(h,r[u]))}return I7(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=hD(n,e);for(let a=0;a<o.windows&&s!==FE;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=S7(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return I7(s),i},getPrecomputes(n,r,s){let i=fD.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),fD.set(r,i))),i},wNAFCached(n,r,s){const i=pD(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=pD(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){ete(r,e),tte.set(n,r),fD.delete(n)}}}function UCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>FE||r>FE;)n&by&&(i=i.add(s)),r&by&&(o=o.add(s)),s=s.double(),n>>=by,r>>=by;return{p1:i,p2:o}}function rte(t,e,n,r){BCe(n,t),LCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Ybe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=L2(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const m=r[g],y=Number(m>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function N7(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return PCe(e),e}else return RC(t)}function ste(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>FE))throw new Error(`CURVE.${a} must be positive bigint`)}const r=N7(e.p,n.Fp),s=N7(e.n,n.Fn),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function x7(t){t.lowS!==void 0&&x0("lowS",t.lowS),t.prehash!==void 0&&x0("prehash",t.prehash)}class $Ce extends Error{constructor(e=""){super(e)}}const Dh={Err:$Ce,_tlv:{encode:(t,e)=>{const{Err:n}=Dh;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=$N(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?$N(s.length/2|128):"";return $N(t)+i+s+e},decode(t,e){const{Err:n}=Dh;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Dh;if(t<k_)throw new e("integer: negative integers are not allowed");let n=$N(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Dh;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return M2(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Dh,s=Zs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Dh,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},k_=BigInt(0),P_=BigInt(1),FCe=BigInt(2),jN=BigInt(3),jCe=BigInt(4);function WCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function ite(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Zs("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function zCe(t,e={}){const{Fp:n,Fn:r}=ste("weierstrass",t,e),{h:s,n:i}=t;xI(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(L,M,W){const{x:F,y:V}=M.toAffine(),$=n.toBytes(F);if(x0("isCompressed",W),W){a();const v=!n.isOdd(V);return sf(ote(v),$)}else return sf(Uint8Array.of(4),$,n.toBytes(V))}function l(L){Wl(L);const M=n.BYTES,W=M+1,F=2*M+1,V=L.length,$=L[0],v=L.subarray(1);if(V===W&&($===2||$===3)){const E=n.fromBytes(v);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const _=h(E);let R;try{R=n.sqrt(_)}catch(j){const U=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}a();const x=n.isOdd(R);return($&1)===1!==x&&(R=n.neg(R)),{x:E,y:R}}else if(V===F&&$===4){const E=n.fromBytes(v.subarray(M*0,M*1)),_=n.fromBytes(v.subarray(M*1,M*2));if(!f(E,_))throw new Error("bad point: is not on curve");return{x:E,y:_}}else throw new Error(`bad point: got length ${V}, expected compressed=${W} or uncompressed=${F}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=WCe(n,t.a,t.b);function f(L,M){const W=n.sqr(M),F=h(L);return n.eql(W,F)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,jN),jCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function m(L,M,W=!1){if(!n.isValid(M)||W&&n.is0(M))throw new Error(`bad point coordinate ${L}`);return M}function y(L){if(!(L instanceof S))throw new Error("ProjectivePoint expected")}const w=MR((L,M)=>{const{px:W,py:F,pz:V}=L;if(n.eql(V,n.ONE))return{x:W,y:F};const $=L.is0();M==null&&(M=$?n.ONE:n.inv(V));const v=n.mul(W,M),E=n.mul(F,M),_=n.mul(V,M);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:v,y:E}}),C=MR(L=>{if(L.is0()){if(e.allowInfinityPoint&&!n.is0(L.py))return;throw new Error("bad point: ZERO")}const{x:M,y:W}=L.toAffine();if(!n.isValid(M)||!n.isValid(W))throw new Error("bad point: x or y not field elements");if(!f(M,W))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(L,M,W,F,V){return W=new S(n.mul(W.px,L),W.py,W.pz),M=R_(F,M),W=R_(V,W),M.add(W)}class S{constructor(M,W,F){this.px=m("x",M),this.py=m("y",W,!0),this.pz=m("z",F),Object.freeze(this)}static fromAffine(M){const{x:W,y:F}=M||{};if(!M||!n.isValid(W)||!n.isValid(F))throw new Error("invalid affine point");if(M instanceof S)throw new Error("projective point not allowed");return n.is0(W)&&n.is0(F)?S.ZERO:new S(W,F,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){return Xee(S,"pz",M)}static fromBytes(M){return Wl(M),S.fromHex(M)}static fromHex(M){const W=S.fromAffine(d(Zs("pointHex",M)));return W.assertValidity(),W}static fromPrivateKey(M){const W=ite(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return S.BASE.multiply(W(M))}static msm(M,W){return rte(S,r,M,W)}precompute(M=8,W=!0){return O.setWindowSize(this,M),W||this.multiply(jN),this}_setWindowSize(M){this.precompute(M)}assertValidity(){C(this)}hasEvenY(){const{y:M}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(M)}equals(M){y(M);const{px:W,py:F,pz:V}=this,{px:$,py:v,pz:E}=M,_=n.eql(n.mul(W,E),n.mul($,V)),R=n.eql(n.mul(F,E),n.mul(v,V));return _&&R}negate(){return new S(this.px,n.neg(this.py),this.pz)}double(){const{a:M,b:W}=t,F=n.mul(W,jN),{px:V,py:$,pz:v}=this;let E=n.ZERO,_=n.ZERO,R=n.ZERO,x=n.mul(V,V),B=n.mul($,$),j=n.mul(v,v),U=n.mul(V,$);return U=n.add(U,U),R=n.mul(V,v),R=n.add(R,R),E=n.mul(M,R),_=n.mul(F,j),_=n.add(E,_),E=n.sub(B,_),_=n.add(B,_),_=n.mul(E,_),E=n.mul(U,E),R=n.mul(F,R),j=n.mul(M,j),U=n.sub(x,j),U=n.mul(M,U),U=n.add(U,R),R=n.add(x,x),x=n.add(R,x),x=n.add(x,j),x=n.mul(x,U),_=n.add(_,x),j=n.mul($,v),j=n.add(j,j),x=n.mul(j,U),E=n.sub(E,x),R=n.mul(j,B),R=n.add(R,R),R=n.add(R,R),new S(E,_,R)}add(M){y(M);const{px:W,py:F,pz:V}=this,{px:$,py:v,pz:E}=M;let _=n.ZERO,R=n.ZERO,x=n.ZERO;const B=t.a,j=n.mul(t.b,jN);let U=n.mul(W,$),I=n.mul(F,v),H=n.mul(V,E),re=n.add(W,F),ne=n.add($,v);re=n.mul(re,ne),ne=n.add(U,I),re=n.sub(re,ne),ne=n.add(W,V);let ge=n.add($,E);return ne=n.mul(ne,ge),ge=n.add(U,H),ne=n.sub(ne,ge),ge=n.add(F,V),_=n.add(v,E),ge=n.mul(ge,_),_=n.add(I,H),ge=n.sub(ge,_),x=n.mul(B,ne),_=n.mul(j,H),x=n.add(_,x),_=n.sub(I,x),x=n.add(I,x),R=n.mul(_,x),I=n.add(U,U),I=n.add(I,U),H=n.mul(B,H),ne=n.mul(j,ne),I=n.add(I,H),H=n.sub(U,H),H=n.mul(B,H),ne=n.add(ne,H),U=n.mul(I,ne),R=n.add(R,U),U=n.mul(ge,ne),_=n.mul(re,_),_=n.sub(_,U),U=n.mul(re,I),x=n.mul(ge,x),x=n.add(x,U),new S(_,R,x)}subtract(M){return this.add(M.negate())}is0(){return this.equals(S.ZERO)}multiply(M){const{endo:W}=e;if(!r.isValidNot0(M))throw new Error("invalid scalar: out of range");let F,V;const $=v=>O.wNAFCached(this,v,S.normalizeZ);if(W){const{k1neg:v,k1:E,k2neg:_,k2:R}=W.splitScalar(M),{p:x,f:B}=$(E),{p:j,f:U}=$(R);V=B.add(U),F=N(W.beta,x,j,v,_)}else{const{p:v,f:E}=$(M);F=v,V=E}return S.normalizeZ([F,V])[0]}multiplyUnsafe(M){const{endo:W}=e,F=this;if(!r.isValid(M))throw new Error("invalid scalar: out of range");if(M===k_||F.is0())return S.ZERO;if(M===P_)return F;if(O.hasPrecomputes(this))return this.multiply(M);if(W){const{k1neg:V,k1:$,k2neg:v,k2:E}=W.splitScalar(M),{p1:_,p2:R}=UCe(S,F,$,E);return N(W.beta,_,R,V,v)}else return O.wNAFCachedUnsafe(F,M)}multiplyAndAddUnsafe(M,W,F){const V=this.multiplyUnsafe(W).add(M.multiplyUnsafe(F));return V.is0()?void 0:V}toAffine(M){return w(this,M)}isTorsionFree(){const{isTorsionFree:M}=e;return s===P_?!0:M?M(S,this):O.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:M}=e;return s===P_?this:M?M(S,this):this.multiplyUnsafe(s)}toBytes(M=!0){return x0("isCompressed",M),this.assertValidity(),u(S,this,M)}toRawBytes(M=!0){return this.toBytes(M)}toHex(M=!0){return DE(this.toBytes(M))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(t.Gx,t.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=r;const P=r.BITS,O=nte(S,e.endo?Math.ceil(P/2):P);return S}function ote(t){return Uint8Array.of(t?2:3)}function HCe(t,e,n={}){xI(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||GZ,s=e.hmac||((F,...V)=>Gee(e.hash,F,sf(...V))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(F){const V=a>>P_;return F>V}function u(F){return l(F)?o.neg(F):F}function d(F,V){if(!o.isValidNot0(V))throw new Error(`invalid signature ${F}: out of range 1..CURVE.n`)}class h{constructor(V,$,v){d("r",V),d("s",$),this.r=V,this.s=$,v!=null&&(this.recovery=v),Object.freeze(this)}static fromCompact(V){const $=o.BYTES,v=Zs("compactSignature",V,$*2);return new h(o.fromBytes(v.subarray(0,$)),o.fromBytes(v.subarray($,$*2)))}static fromDER(V){const{r:$,s:v}=Dh.toSig(Zs("DER",V));return new h($,v)}assertValidity(){}addRecoveryBit(V){return new h(this.r,this.s,V)}recoverPublicKey(V){const $=i.ORDER,{r:v,s:E,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(a*FCe<$&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=_===2||_===3?v+a:v;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const B=i.toBytes(x),j=t.fromHex(sf(ote((_&1)===0),B)),U=o.inv(x),I=C(Zs("msgHash",V)),H=o.create(-I*U),re=o.create(E*U),ne=t.BASE.multiplyUnsafe(H).add(j.multiplyUnsafe(re));if(ne.is0())throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(V){if(V==="compact")return sf(o.toBytes(this.r),o.toBytes(this.s));if(V==="der")return Z8(Dh.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return DE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return DE(this.toBytes("compact"))}}const f=ite(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(F){try{return f(F),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const F=a;return MCe(r(Zee(F)),F)},precompute(F=8,V=t.BASE){return V.precompute(F,!1)}};function g(F,V=!0){return t.fromPrivateKey(F).toBytes(V)}function m(F){if(typeof F=="bigint")return!1;if(F instanceof t)return!0;const $=Zs("key",F).length,v=i.BYTES,E=v+1,_=2*v+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===E))return $===E||$===_}function y(F,V,$=!0){if(m(F)===!0)throw new Error("first arg must be private key");if(m(V)===!1)throw new Error("second arg must be public key");return t.fromHex(V).multiply(f(F)).toBytes($)}const w=e.bits2int||function(F){if(F.length>8192)throw new Error("input is too large");const V=M2(F),$=F.length*8-c;return $>0?V>>BigInt($):V},C=e.bits2int_modN||function(F){return o.create(w(F))},N=L2(c);function S(F){return $b("num < 2^"+c,F,k_,N),o.toBytes(F)}function P(F,V,$=O){if(["recovered","canonical"].some(re=>re in $))throw new Error("sign() legacy options not supported");const{hash:v}=e;let{lowS:E,prehash:_,extraEntropy:R}=$;E==null&&(E=!0),F=Zs("msgHash",F),x7($),_&&(F=Zs("prehashed msgHash",v(F)));const x=C(F),B=f(V),j=[S(B),S(x)];if(R!=null&&R!==!1){const re=R===!0?r(i.BYTES):R;j.push(Zs("extraEntropy",re))}const U=sf(...j),I=x;function H(re){const ne=w(re);if(!o.isValidNot0(ne))return;const ge=o.inv(ne),te=t.BASE.multiply(ne).toAffine(),he=o.create(te.x);if(he===k_)return;const me=o.create(ge*o.create(I+he*B));if(me===k_)return;let _e=(te.x===he?0:2)|Number(te.y&P_),Ce=me;return E&&l(me)&&(Ce=u(me),_e^=1),new h(he,Ce,_e)}return{seed:U,k2sig:H}}const O={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function M(F,V,$=O){const{seed:v,k2sig:E}=P(F,V,$);return Qbe(e.hash.outputLen,o.BYTES,s)(v,E)}t.BASE.precompute(8);function W(F,V,$,v=L){const E=F;V=Zs("msgHash",V),$=Zs("publicKey",$),x7(v);const{lowS:_,prehash:R,format:x}=v;if("strict"in v)throw new Error("options.strict was renamed to lowS");if(x!==void 0&&!["compact","der","js"].includes(x))throw new Error('format must be "compact", "der" or "js"');const B=typeof E=="string"||J8(E),j=!B&&!x&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!B&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let U,I;try{if(j)if(x===void 0||x==="js")U=new h(E.r,E.s);else throw new Error("invalid format");if(B){try{x!=="compact"&&(U=h.fromDER(E))}catch(Ce){if(!(Ce instanceof Dh.Err))throw Ce}!U&&x!=="der"&&(U=h.fromCompact(E))}I=t.fromHex($)}catch{return!1}if(!U||_&&U.hasHighS())return!1;R&&(V=e.hash(V));const{r:H,s:re}=U,ne=C(V),ge=o.inv(re),te=o.create(ne*ge),he=o.create(H*ge),me=t.BASE.multiplyUnsafe(te).add(I.multiplyUnsafe(he));return me.is0()?!1:o.create(me.x)===H}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:M,verify:W,utils:p,Point:t,Signature:h})}function GCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=RC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function qCe(t){const{CURVE:e,curveOpts:n}=GCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function VCe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function KCe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=qCe(t),s=zCe(e,n),i=HCe(s,r,n);return VCe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function YCe(t,e){const n=r=>KCe({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UR={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const QCe=BigInt(1),TL=BigInt(2),T7=(t,e)=>(t+e/TL)/e;function JCe(t){const e=UR.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=zs(u,n,e)*u%e,h=zs(d,n,e)*u%e,f=zs(h,TL,e)*l%e,p=zs(f,s,e)*f%e,g=zs(p,i,e)*p%e,m=zs(g,a,e)*g%e,y=zs(m,c,e)*m%e,w=zs(y,a,e)*g%e,C=zs(w,n,e)*u%e,N=zs(C,o,e)*p%e,S=zs(N,r,e)*l%e,P=zs(S,TL,e);if(!RL.eql(RL.sqr(P),t))throw new Error("Cannot find square root");return P}const RL=RC(UR.p,void 0,void 0,{sqrt:JCe}),H2=YCe({...UR,Fp:RL,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=UR.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-QCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=T7(i*t,e),c=T7(-r*t,e);let l=Xs(t-a*n-c*s,e),u=Xs(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},CX),ZCe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:H2},Symbol.toStringTag,{value:"Module"}));function XCe({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new H2.Signature(Qc(t),Qc(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:$l(o)}async function O$(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Qd(o)?o:typeof o=="object"&&"r"in o&&"s"in o?XCe(o):Ni(o),u=await(async()=>!r&&!s||eCe(l)?l:tCe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:ql({abi:i7,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:x2({abi:i7,args:[n,i,u],bytecode:Cve}),...c},{data:g}=await $t(t,TI,"call")(p);return Iye(g??"0x0")}catch(p){try{if($2(of(n),await rX({hash:i,signature:o})))return!0}catch{}if(p instanceof qX)return!1;throw p}}async function e1e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=Dee(n);return O$(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function t1e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=qEe({message:o,primaryType:a,types:c,domain:l});return O$(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function n1e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function r1e(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const m=h??!1,y=Si(["watchContractEvent",r,s,i,t.uid,o,d,m,a]);return If(y,{onLogs:l,onError:c},w=>{let C;a!==void 0&&(C=a-1n);let N,S=!1;const P=TC(async()=>{var O;if(!S){try{N=await $t(t,dee,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:m,fromBlock:a})}catch{}S=!0;return}try{let L;if(N)L=await $t(t,F2,"getFilterChanges")({filter:N});else{const M=await $t(t,kI,"getBlockNumber")({});C&&C<M?L=await $t(t,pee,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:C+1n,toBlock:M,strict:m}):L=[],C=M}if(L.length===0)return;if(i)w.onLogs(L);else for(const M of L)w.onLogs([M])}catch(L){N&&L instanceof S0&&(S=!1),(O=w.onError)==null||O.call(w,L)}},{emitOnBegin:!0,interval:d});return async()=>{N&&await $t(t,z2,"uninstallFilter")({filter:N}),P()}})})():(()=>{const m=h??!1,y=Si(["watchContractEvent",r,s,i,t.uid,o,d,m]);let w=!0,C=()=>w=!1;return If(y,{onLogs:l,onError:c},N=>((async()=>{try{const S=(()=>{if(t.transport.type==="fallback"){const L=t.transport.transports.find(M=>M.config.type==="webSocket"||M.config.type==="ipc");return L?L.value:t.transport}return t.transport})(),P=o?RI({abi:n,eventName:o,args:s}):[],{unsubscribe:O}=await S.subscribe({params:["logs",{address:r,topics:P}],onData(L){var W;if(!w)return;const M=L.result;try{const{eventName:F,args:V}=x$({abi:n,data:M.data,topics:M.topics,strict:h}),$=Sf(M,{args:V,eventName:F});N.onLogs([$])}catch(F){let V,$;if(F instanceof IA||F instanceof I2){if(h)return;V=F.abiItem.name,$=(W=F.abiItem.inputs)==null?void 0:W.some(E=>!("name"in E&&E.name))}const v=Sf(M,{args:$?[]:{},eventName:V});N.onLogs([v])}},onError(L){var M;(M=N.onError)==null||M.call(N,L)}});C=O,w||C()}catch(S){c==null||c(S)}})(),()=>C()))})()}async function ate(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new tw({docsPath:"/docs/contract/writeContract"});const l=r?Ys(r):null,u=ql({abi:n,args:i,functionName:a});try{return await $t(t,SI,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw N0(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Vc(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const iT="2.17.3",s1e=()=>`@wagmi/core@${iT}`;var cte=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},$R,lte;let Lf=class kL extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return s1e()}constructor(e,n={}){var i;super(),$R.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof kL?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof kL&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return cte(this,$R,"m",lte).call(this,this,e)}};$R=new WeakSet,lte=function t(e,n){return n!=null&&n(e)?e:e.cause?cte(this,$R,"m",t).call(this,e.cause,n):e};class GA extends Lf{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class i1e extends Lf{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class o1e extends Lf{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class a1e extends Lf{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class c1e extends Lf{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class l1e extends Lf{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function oT(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new i1e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const PL=256;let WN=PL,zN;function ute(t=11){if(!zN||WN+t>PL*2){zN="",WN=0;for(let e=0;e<PL;e++)zN+=(256+Math.random()*256|0).toString(16).substring(1)}return zN.substring(WN,WN+++t)}function dte(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Ys(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},m={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:ute()};function y(w){return C=>{const N=C(w);for(const P in m)delete N[P];const S={...w,...N};return Object.assign(S,{extend:y(S)})}}return Object.assign(m,{extend:y(m)})}function D$({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=ute();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:$Ee(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function u1e(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>D$({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function FR(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=d1e,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=D$({key:n,name:r,async request({method:g,params:m}){let y;const w=async(C=0)=>{const N=h[C]({...d,chain:c,retryCount:0,timeout:u});try{const S=await N.request({method:g,params:m});return f({method:g,params:m,response:S,transport:N,status:"success"}),S}catch(S){if(f({error:S,method:g,params:m,transport:N,status:"error"}),i(S)||C===h.length-1||(y??(y=h.slice(C+1).some(P=>{const{include:O,exclude:L}=P({chain:c}).config.methods||{};return O?O.includes(g):L?!L.includes(g):!0})),!y))throw S;return w(C+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};h1e({chain:c,interval:g.interval??l,onTransports:m=>h=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function d1e(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===BE.code||t.code===yi.code||my.nodeMessage.test(t.message)||t.code===5e3))}function h1e({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let w,C;try{await(r?r({transport:m}):m.request({method:"net_listening"})),C=1}catch{C=0}finally{w=Date.now()}return{latency:w-y,success:C}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const y=u.map(P=>P[m].latency),C=1-y.reduce((P,O)=>P+O,0)/y.length/f,N=u.map(P=>P[m].success),S=N.reduce((P,O)=>P+O,0)/N.length;return S===0?[0,m]:[l*C+c*S,m]}).sort((g,m)=>m[0]-g[0]);n(p.map(([,g])=>o[g])),await BR(e),d()};d()}class f1e extends Ne{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function ug(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},m=e.retryCount??h,y=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new f1e;const C=WEe(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return D$({key:s,methods:i,name:o,async request({method:N,params:S}){const P={method:N,params:S},{schedule:O}=iee({id:w,wait:g,shouldSplitBatch(F){return F.length>p},fn:F=>C.request({body:F}),sort:(F,V)=>F.id-V.id}),L=async F=>n?O(F):[await C.request({body:F})],[{error:M,result:W}]=await L(P);if(u)return{error:M,result:W};if(M)throw new l$({body:P,error:M,url:w});return W},retryCount:m,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:w})}}function p1e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(g1e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(m1e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const g1e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,m1e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function y1e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!zl(r.address,{strict:!1})||e&&!$2(r.address,e))return!1}catch{return!1}return!0}async function w1e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=p1e(s);if(!u.address||!y1e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=Dee(s);return O$(t,{address:u.address,hash:h,signature:a,...l})}function b1e(t){return{call:e=>TI(t,e),createAccessList:e=>uee(t,e),createBlockFilter:()=>zve(t),createContractEventFilter:e=>dee(t,e),createEventFilter:e=>hee(t,e),createPendingTransactionFilter:()=>fee(t),estimateContractGas:e=>Gve(t,e),estimateGas:e=>k2(t,e),getBalance:e=>f$(t,e),getBlobBaseFee:()=>qve(t),getBlock:e=>$d(t,e),getBlockNumber:e=>kI(t,e),getBlockTransactionCount:e=>Zve(t,e),getBytecode:e=>w7(t,e),getChainId:()=>IC(t),getCode:e=>w7(t,e),getContractEvents:e=>pee(t,e),getEip712Domain:e=>nEe(t,e),getEnsAddress:e=>xve(t,e),getEnsAvatar:e=>jve(t,e),getEnsName:e=>lee(t,e),getEnsResolver:e=>Wve(t,e),getEnsText:e=>cee(t,e),getFeeHistory:e=>iEe(t,e),estimateFeesPerGas:e=>uwe(t,e),getFilterChanges:e=>F2(t,e),getFilterLogs:e=>oEe(t,e),getGasPrice:()=>d$(t),getLogs:e=>R$(t,e),getProof:e=>wCe(t,e),estimateMaxPriorityFeePerGas:e=>lwe(t,e),getStorageAt:e=>aEe(t,e),getTransaction:e=>j2(t,e),getTransactionConfirmations:e=>cEe(t,e),getTransactionCount:e=>p$(t,e),getTransactionReceipt:e=>CL(t,e),multicall:e=>mee(t,e),prepareTransactionRequest:e=>AI(t,e),readContract:e=>Xd(t,e),sendRawTransaction:e=>m$(t,e),simulate:e=>_L(t,e),simulateBlocks:e=>_L(t,e),simulateCalls:e=>iCe(t,e),simulateContract:e=>ACe(t,e),verifyMessage:e=>e1e(t,e),verifySiweMessage:e=>w1e(t,e),verifyTypedData:e=>t1e(t,e),uninstallFilter:e=>z2(t,e),waitForTransactionReceipt:e=>jee(t,e),watchBlocks:e=>aCe(t,e),watchBlockNumber:e=>Bee(t,e),watchContractEvent:e=>r1e(t,e),watchEvent:e=>cCe(t,e),watchPendingTransactions:e=>Lee(t,e)}}function v1e(t){return{addChain:e=>Tye(t,e),deployContract:e=>Dwe(t,e),getAddresses:()=>lCe(t),getCallsStatus:e=>Fee(t,e),getCapabilities:e=>dCe(t,e),getChainId:()=>IC(t),getPermissions:()=>uCe(t),prepareAuthorization:e=>Wee(t,e),prepareTransactionRequest:e=>AI(t,e),requestAddresses:()=>bCe(t),requestPermissions:e=>vCe(t,e),sendCalls:e=>hCe(t,e),sendRawTransaction:e=>m$(t,e),sendTransaction:e=>SI(t,e),showCallsStatus:e=>fCe(t,e),signAuthorization:e=>ECe(t,e),signMessage:e=>zee(t,e),signTransaction:e=>CCe(t,e),signTypedData:e=>_Ce(t,e),switchChain:e=>SCe(t,e),waitForCallsStatus:e=>pCe(t,e),watchAsset:e=>n1e(t,e),writeContract:e=>ate(t,e)}}async function PI(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new l1e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new o1e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new c1e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Ys(e.account??n.accounts[0]);if(o&&(o.address=of(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new a1e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return dte({account:o,chain:a,name:"Connector Client",transport:l=>u1e(c)({...l,retryCount:0})})}async function OL(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function E1e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await PI(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Vc(o,k2,"estimateGas")({...s,account:i})}function hte(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(Y0e[t])}function cv(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function C1e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Vc(o,mee,"multicall")({allowFailure:n,contracts:s,...i})}function fte(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Vc(s,Xd,"readContract")(r)}async function _1e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>C1e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof VX)throw c;const l=()=>o.map(u=>fte(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function A1e(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await R7(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await R7(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=MZ(zd(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Vc(c,f$,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:wm(u,hte(a)),symbol:d.nativeCurrency.symbol,value:u}}async function R7(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await _1e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=wm(c??"0",hte(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function k7(t){return t.state.chainId}function em(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!em(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!em(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let gD=[];function P7(t){const e=t.chains;return em(gD,e)?gD:(gD=e,e)}function S1e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let HN=[];function fu(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||em(HN,e)?HN:(HN=e,e)}let mD=[];function O7(t){const e=t.connectors;return em(mD,e)?mD:(mD=e,e)}function I1e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Vc(s,lee,"getEnsName")(r)}function DL(t,e={}){const n=S1e(t,e);return n==null?void 0:n.extend(b1e)}async function N1e(t,e={}){return(await PI(t,e)).extend(v1e)}async function x1e(t,e){const{account:n,chainId:r,...s}=e,i=n??cv(t).address,o=t.getClient({chainId:r});return Vc(o,AI,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let yD=!1;async function ML(t,e={}){var l,u;if(yD)return[];yD=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),yD=!1,a}async function T1e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await PI(t,{account:n??void 0,chainId:r,connector:s}),await Vc(o,SI,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function R1e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await PI(t,{account:n,connector:r}),Vc(i,zee,"signMessage")({...s,...n?{account:n}:{}})}class Ap extends Lf{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class k1e extends Lf{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function BL(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new k1e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new GA;return t.setState(a=>({...a,chainId:r})),i}function pte(t,e){const{onChange:n}=e;return t.subscribe(()=>cv(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return em(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function P1e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function gte(t,e){const{onChange:n}=e;return t.subscribe(()=>fu(t),n,{equalityFn:em})}function mte(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function O1e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Vc(l,Lee,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function D1e(t,e){const{onChange:n}=e;return t.subscribe(()=>DL(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function yte(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Vc(i,jee,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Vc(i,j2,"getTransaction")({hash:a.transactionHash}),d=await Vc(i,TI,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?MZ(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function wte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await PI(t,{account:n??void 0,chainId:r,connector:s}),await Vc(o,ate,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function Lit(t){return t}G2.type="injected";function G2(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...M1e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:G2.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,m,y,w;const d=await this.getProvider();if(!d)throw new Ap;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(m=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:m.map(N=>of(N)),h.length>0&&(h=await this.getAccounts())}catch(C){const N=C;if(N.code===yi.code)throw new yi(N);if(N.code===Dg.code)throw N}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(S=>of(S))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let C=await this.getChainId();if(l&&C!==l){const N=await this.switchChain({chainId:l}).catch(S=>{if(S.code===yi.code)throw S;return{id:C}});C=(N==null?void 0:N.id)??C}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:C}}catch(C){const N=C;throw N.code===yi.code?new yi(N):N.code===Dg.code?new Dg(N):N}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Ap;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await Nee(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Ap;return(await l.request({method:"eth_accounts"})).map(d=>of(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Ap;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=aT(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Ap}return!!(await LR(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,m,y;const d=await this.getProvider();if(!d)throw new Ap;const h=c.chains.find(w=>w.id===u);if(!h)throw new Jd(new GA);const f=new Promise(w=>{const C=N=>{"chainId"in N&&N.chainId===u&&(c.emitter.off("change",C),w())};c.emitter.on("change",C)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:It(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const C=w;if(C.code===4902||((g=(p=C==null?void 0:C.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:N,...S}=h.blockExplorers??{};let P;l!=null&&l.blockExplorerUrls?P=l.blockExplorerUrls:N&&(P=[N.url,...Object.values(S).map(M=>M.url)]);let O;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?O=l.rpcUrls:O=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const L={blockExplorerUrls:P,chainId:It(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:O};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[L]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new yi(new Error("User rejected switch after adding network."))}),f]),h}catch(N){throw new yi(N)}throw C.code===yi.code?new yi(C):new Jd(C)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>of(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const M1e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:aT(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return aT(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:aT(t,"isPhantom")}}};function aT(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function B1e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function L1e(){const t=new Set;let e=[];const n=()=>B1e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const U1e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},$1e=U1e;function F1e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const LL=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return LL(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return LL(r)(n)}}}},j1e=(t,e)=>(n,r,s)=>{let i={storage:F1e(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(w=>{var C;return w((C=r())!=null?C:h)});const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=r())!=null?g:h))||void 0;return LL(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var C;const[N,S]=w;if(f=i.merge(S,(C=r())!=null?C:h),n(f,!0),N)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{y==null||y(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},W1e=j1e,D7=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},wD=t=>t?D7(t):D7;var bte={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,w,C;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,f),!0;case 6:return m.fn.call(m.context,u,d,h,f,p),!0}for(C=1,w=new Array(y-1);C<y;C++)w[C-1]=arguments[C];m.fn.apply(m.context,w)}else{var N=m.length,S;for(C=0;C<N;C++)switch(m[C].once&&this.removeListener(l,m[C].fn,void 0,!0),y){case 1:m[C].fn.call(m[C].context);break;case 2:m[C].fn.call(m[C].context,u);break;case 3:m[C].fn.call(m[C].context,u,d);break;case 4:m[C].fn.call(m[C].context,u,d,h);break;default:if(!w)for(S=1,w=new Array(y-1);S<y;S++)w[S-1]=arguments[S];m[C].fn.apply(m[C].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,m=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(bte);var z1e=bte.exports;const M$=ih(z1e);class H1e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new M$})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function G1e(t){return new H1e(t)}function q1e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function M7(t,e){return t.slice(0,e).join(".")||"."}function B7(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function V1e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=B7(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=B7(s,c);if(u!==0)return r?e.call(this,a,c,M7(i,u)):`[ref=${M7(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function K1e(t,e,n,r){return JSON.stringify(t,V1e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Y1e(t){const{deserialize:e=q1e,key:n="wagmi",serialize:r=K1e,storage:s=vte}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const vte={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Q1e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:vte;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const UL=256;let GN=UL,qN;function J1e(t=11){if(!qN||GN+t>UL*2){qN="",GN=0;for(let e=0;e<UL;e++)qN+=(256+Math.random()*256|0).toString(16).substring(1)}return qN.substring(GN,GN+++t)}function Z1e(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Y1e({storage:Q1e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?L1e():void 0,a=wD(()=>i.chains),c=wD(()=>{const S=[],P=new Set;for(const O of i.connectors??[]){const L=l(O);if(S.push(L),!s&&L.rdns){const M=typeof L.rdns=="string"?[L.rdns]:L.rdns;for(const W of M)P.add(W)}}if(!s&&o){const O=o.getProviders();for(const L of O)P.has(L.info.rdns)||S.push(l(u(L)))}return S});function l(S){var L;const P=G1e(J1e()),O={...S({emitter:P,chains:a.getState(),storage:n,transports:i.transports}),emitter:P,uid:P.uid};return P.on("connect",C),(L=O.setup)==null||L.call(O),O}function u(S){const{info:P}=S,O=S.provider;return G2({target:{...P,id:P.rdns,provider:O}})}const d=new Map;function h(S={}){const P=S.chainId??m.getState().chainId,O=a.getState().find(M=>M.id===P);if(S.chainId&&!O)throw new GA;{const M=d.get(m.getState().chainId);if(M&&!O)return M;if(!O)throw new GA}{const M=d.get(P);if(M)return M}let L;if(i.client)L=i.client({chain:O});else{const M=O.id,W=a.getState().map($=>$.id),F={},V=Object.entries(i);for(const[$,v]of V)if(!($==="chains"||$==="client"||$==="connectors"||$==="transports"))if(typeof v=="object")if(M in v)F[$]=v[M];else{if(W.some(_=>_ in v))continue;F[$]=v}else F[$]=v;L=dte({...F,chain:O,batch:F.batch??{multicall:!0},transport:$=>i.transports[M]({...$,connectors:c})})}return d.set(P,L),L}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";iT.startsWith(g)?p=Number.parseInt(iT.replace(g,"")):p=Number.parseInt(iT.split(".")[0]??"0");const m=wD($1e(n?W1e(f,{migrate(S,P){if(P===p)return S;const O=f(),L=y(S,O.chainId);return{...O,chainId:L}},name:"store",partialize(S){return{connections:{__type:"Map",value:Array.from(S.connections.entries()).map(([P,O])=>{const{id:L,name:M,type:W,uid:F}=O.connector;return[P,{...O,connector:{id:L,name:M,type:W,uid:F}}]})},chainId:S.chainId,current:S.current}},merge(S,P){typeof S=="object"&&S&&"status"in S&&delete S.status;const O=y(S,P.chainId);return{...P,...S,chainId:O}},skipHydration:s,storage:n,version:p}):f));m.setState(f());function y(S,P){return S&&typeof S=="object"&&"chainId"in S&&typeof S.chainId=="number"&&a.getState().some(O=>O.id===S.chainId)?S.chainId:P}r&&m.subscribe(({connections:S,current:P})=>{var O;return P?(O=S.get(P))==null?void 0:O.chainId:void 0},S=>{if(a.getState().some(O=>O.id===S))return m.setState(O=>({...O,chainId:S??O.chainId}))}),o==null||o.subscribe(S=>{const P=new Set,O=new Set;for(const M of c.getState())if(P.add(M.id),M.rdns){const W=typeof M.rdns=="string"?[M.rdns]:M.rdns;for(const F of W)O.add(F)}const L=[];for(const M of S){if(O.has(M.info.rdns))continue;const W=l(u(M));P.has(W.id)||L.push(W)}n&&!m.persist.hasHydrated()||c.setState(M=>[...M,...L],!0)});function w(S){m.setState(P=>{const O=P.connections.get(S.uid);return O?{...P,connections:new Map(P.connections).set(S.uid,{accounts:S.accounts??O.accounts,chainId:S.chainId??O.chainId,connector:O.connector})}:P})}function C(S){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(P=>{const O=c.getState().find(L=>L.uid===S.uid);return O?(O.emitter.listenerCount("connect")&&O.emitter.off("connect",w),O.emitter.listenerCount("change")||O.emitter.on("change",w),O.emitter.listenerCount("disconnect")||O.emitter.on("disconnect",N),{...P,connections:new Map(P.connections).set(S.uid,{accounts:S.accounts,chainId:S.chainId,connector:O}),current:S.uid,status:"connected"}):P})}function N(S){m.setState(P=>{const O=P.connections.get(S.uid);if(O){const M=O.connector;M.emitter.listenerCount("change")&&O.connector.emitter.off("change",w),M.emitter.listenerCount("disconnect")&&O.connector.emitter.off("disconnect",N),M.emitter.listenerCount("connect")||O.connector.emitter.on("connect",C)}if(P.connections.delete(S.uid),P.connections.size===0)return{...P,connections:new Map,current:null,status:"disconnected"};const L=P.connections.values().next().value;return{...P,connections:new Map(P.connections),current:L.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(S){let P;typeof S=="function"?P=S(m.getState()):P=S;const O=f();typeof P!="object"&&(P=O),Object.keys(O).some(M=>!(M in P))&&(P=O),m.setState(P,!0)},subscribe(S,P,O){return m.subscribe(S,P,O?{...O,fireImmediately:O.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(S){const P=typeof S=="function"?S(a.getState()):S;if(P.length!==0)return a.setState(P,!0)},subscribe(S){return a.subscribe(S)}},connectors:{providerDetailToConnector:u,setup:l,setState(S){return c.setState(typeof S=="function"?S(c.getState()):S,!0)},subscribe(S){return c.subscribe(S)}},events:{change:w,connect:C,disconnect:N}}}}function X1e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?ML(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function e_e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=X1e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=G.useRef(!0);return G.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const Ete=G.createContext(void 0);function t_e(t){const{children:e,config:n}=t,r={value:n};return G.createElement(e_e,t,G.createElement(Ete.Provider,r,e))}const n_e="2.15.6",r_e=()=>`wagmi@${n_e}`;let s_e=class extends Lf{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return r_e()}};class i_e extends s_e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function pc(t={}){const e=t.config??G.useContext(Ete);if(!e)throw new i_e;return e}function o_e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var Cte={exports:{}},_te={},Ate={exports:{}},Ste={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=G;function a_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var c_e=typeof Object.is=="function"?Object.is:a_e,l_e=jE.useState,u_e=jE.useEffect,d_e=jE.useLayoutEffect,h_e=jE.useDebugValue;function f_e(t,e){var n=e(),r=l_e({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return d_e(function(){s.value=n,s.getSnapshot=e,bD(s)&&i({inst:s})},[t,n,e]),u_e(function(){return bD(s)&&i({inst:s}),t(function(){bD(s)&&i({inst:s})})},[t]),h_e(n),n}function bD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!c_e(t,n)}catch{return!0}}function p_e(t,e){return e()}var g_e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p_e:f_e;Ste.useSyncExternalStore=jE.useSyncExternalStore!==void 0?jE.useSyncExternalStore:g_e;Ate.exports=Ste;var Ite=Ate.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2=G,m_e=Ite;function y_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var w_e=typeof Object.is=="function"?Object.is:y_e,b_e=m_e.useSyncExternalStore,v_e=q2.useRef,E_e=q2.useEffect,C_e=q2.useMemo,__e=q2.useDebugValue;_te.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=v_e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=C_e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,w_e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=b_e(t,i[0],i[1]);return E_e(function(){o.hasValue=!0,o.value=a},[a]),__e(a),a};Cte.exports=_te;var Nte=Cte.exports;const vD=t=>typeof t=="object"&&!Array.isArray(t);function A_e(t,e,n=e,r=em){const s=G.useRef([]),i=Nte.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(vD(o)&&vD(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return G.useMemo(()=>{if(vD(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function OI(t={}){const e=pc(t);return A_e(n=>pte(e,{onChange:n}),()=>cv(e))}var kC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},k0=typeof window>"u"||"Deno"in globalThis;function na(){}function S_e(t,e){return typeof t=="function"?t(e):t}function $L(t){return typeof t=="number"&&t>=0&&t!==1/0}function xte(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Mg(t,e){return typeof t=="function"?t(e):t}function Nl(t,e){return typeof t=="function"?t(e):t}function L7(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==B$(o,e.options))return!1}else if(!qA(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function U7(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(P0(e.options.mutationKey)!==P0(i))return!1}else if(!qA(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function B$(t,e){return((e==null?void 0:e.queryKeyHashFn)||P0)(t)}function P0(t){return JSON.stringify(t,(e,n)=>FL(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qA(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>qA(t[n],e[n])):!1}function L$(t,e){if(t===e)return t;const n=$7(t)&&$7(e);if(n||FL(t)&&FL(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=L$(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function jR(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $7(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function FL(t){if(!F7(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!F7(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function F7(t){return Object.prototype.toString.call(t)==="[object Object]"}function I_e(t){return new Promise(e=>{setTimeout(e,t)})}function jL(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?L$(t,e):e}function N_e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function x_e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var U$=Symbol();function Tte(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===U$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Rte(t,e){return typeof t=="function"?t(...e):!!t}var Ny,Mp,Cv,SK,T_e=(SK=class extends kC{constructor(){super();se(this,Ny);se(this,Mp);se(this,Cv);q(this,Cv,e=>{if(!k0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,Mp)||this.setEventListener(k(this,Cv))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Mp))==null||e.call(this),q(this,Mp,void 0))}setEventListener(e){var n;q(this,Cv,e),(n=k(this,Mp))==null||n.call(this),q(this,Mp,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){k(this,Ny)!==e&&(q(this,Ny,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof k(this,Ny)=="boolean"?k(this,Ny):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ny=new WeakMap,Mp=new WeakMap,Cv=new WeakMap,SK),$$=new T_e,_v,Bp,Av,IK,R_e=(IK=class extends kC{constructor(){super();se(this,_v,!0);se(this,Bp);se(this,Av);q(this,Av,e=>{if(!k0&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,Bp)||this.setEventListener(k(this,Av))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Bp))==null||e.call(this),q(this,Bp,void 0))}setEventListener(e){var n;q(this,Av,e),(n=k(this,Bp))==null||n.call(this),q(this,Bp,e(this.setOnline.bind(this)))}setOnline(e){k(this,_v)!==e&&(q(this,_v,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return k(this,_v)}},_v=new WeakMap,Bp=new WeakMap,Av=new WeakMap,IK),WR=new R_e;function WL(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function k_e(t){return Math.min(1e3*2**t,3e4)}function kte(t){return(t??"online")==="online"?WR.isOnline():!0}var Pte=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ED(t){return t instanceof Pte}function Ote(t){let e=!1,n=0,r=!1,s;const i=WL(),o=g=>{var m;r||(h(new Pte(g)),(m=t.abort)==null||m.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>$$.isFocused()&&(t.networkMode==="always"||WR.isOnline())&&t.canRun(),u=()=>kte(t.networkMode)&&t.canRun(),d=g=>{var m;r||(r=!0,(m=t.onSuccess)==null||m.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var m;r||(r=!0,(m=t.onError)==null||m.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var m;s=y=>{(r||l())&&g(y)},(m=t.onPause)==null||m.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const m=n===0?t.initialPromise:void 0;try{g=m??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var P;if(r)return;const w=t.retry??(k0?0:3),C=t.retryDelay??k_e,N=typeof C=="function"?C(n,y):C,S=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!S){h(y);return}n++,(P=t.onFail)==null||P.call(t,n,y),I_e(N).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var P_e=t=>setTimeout(t,0);function O_e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=P_e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var vi=O_e(),xy,NK,Dte=(NK=class{constructor(){se(this,xy)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$L(this.gcTime)&&q(this,xy,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(k0?1/0:5*60*1e3))}clearGcTimeout(){k(this,xy)&&(clearTimeout(k(this,xy)),q(this,xy,void 0))}},xy=new WeakMap,NK),Sv,Ty,vl,Ry,Oo,HS,ky,gu,xh,xK,D_e=(xK=class extends Dte{constructor(e){super();se(this,gu);se(this,Sv);se(this,Ty);se(this,vl);se(this,Ry);se(this,Oo);se(this,HS);se(this,ky);q(this,ky,!1),q(this,HS,e.defaultOptions),this.setOptions(e.options),this.observers=[],q(this,Ry,e.client),q(this,vl,k(this,Ry).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,q(this,Sv,M_e(this.options)),this.state=e.state??k(this,Sv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=k(this,Oo))==null?void 0:e.promise}setOptions(e){this.options={...k(this,HS),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,vl).remove(this)}setData(e,n){const r=jL(this.state.data,e,this.options);return Se(this,gu,xh).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Se(this,gu,xh).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=k(this,Oo))==null?void 0:r.promise;return(s=k(this,Oo))==null||s.cancel(e),n?n.then(na).catch(na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,Sv))}isActive(){return this.observers.some(e=>Nl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===U$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Mg(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!xte(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=k(this,Oo))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=k(this,Oo))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),k(this,vl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(k(this,Oo)&&(k(this,ky)?k(this,Oo).cancel({revert:!0}):k(this,Oo).cancelRetry()),this.scheduleGc()),k(this,vl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Se(this,gu,xh).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,Oo))return k(this,Oo).continueRetry(),k(this,Oo).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(q(this,ky,!0),r.signal)})},i=()=>{const h=Tte(this.options,n),p=(()=>{const g={client:k(this,Ry),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return q(this,ky,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,Ry),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),q(this,Ty,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Se(this,gu,xh).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,m;ED(h)&&h.silent||Se(this,gu,xh).call(this,{type:"error",error:h}),ED(h)||((p=(f=k(this,vl).config).onError)==null||p.call(f,h,this),(m=(g=k(this,vl).config).onSettled)==null||m.call(g,this.state.data,h,this)),this.scheduleGc()};return q(this,Oo,Ote({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,m;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=k(this,vl).config).onSuccess)==null||p.call(f,h,this),(m=(g=k(this,vl).config).onSettled)==null||m.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{Se(this,gu,xh).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Se(this,gu,xh).call(this,{type:"pause"})},onContinue:()=>{Se(this,gu,xh).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),k(this,Oo).start()}},Sv=new WeakMap,Ty=new WeakMap,vl=new WeakMap,Ry=new WeakMap,Oo=new WeakMap,HS=new WeakMap,ky=new WeakMap,gu=new WeakSet,xh=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Mte(r.data,this.options),fetchMeta:e.meta??null};case"success":return q(this,Ty,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return ED(s)&&s.revert&&k(this,Ty)?{...k(this,Ty),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),vi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,vl).notify({query:this,type:"updated",action:e})})},xK);function Mte(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kte(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function M_e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gd,TK,B_e=(TK=class extends kC{constructor(e={}){super();se(this,gd);this.config=e,q(this,gd,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??B$(s,n);let o=this.get(i);return o||(o=new D_e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){k(this,gd).has(e.queryHash)||(k(this,gd).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=k(this,gd).get(e.queryHash);n&&(e.destroy(),n===e&&k(this,gd).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return k(this,gd).get(e)}getAll(){return[...k(this,gd).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>L7(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>L7(e,r)):n}notify(e){vi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){vi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gd=new WeakMap,TK),md,Jo,Py,yd,wp,RK,L_e=(RK=class extends Dte{constructor(e){super();se(this,yd);se(this,md);se(this,Jo);se(this,Py);this.mutationId=e.mutationId,q(this,Jo,e.mutationCache),q(this,md,[]),this.state=e.state||Bte(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){k(this,md).includes(e)||(k(this,md).push(e),this.clearGcTimeout(),k(this,Jo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){q(this,md,k(this,md).filter(n=>n!==e)),this.scheduleGc(),k(this,Jo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){k(this,md).length||(this.state.status==="pending"?this.scheduleGc():k(this,Jo).remove(this))}continue(){var e;return((e=k(this,Py))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,m,y,w,C,N,S,P,O,L;const n=()=>{Se(this,yd,wp).call(this,{type:"continue"})};q(this,Py,Ote({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,W)=>{Se(this,yd,wp).call(this,{type:"failed",failureCount:M,error:W})},onPause:()=>{Se(this,yd,wp).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,Jo).canRun(this)}));const r=this.state.status==="pending",s=!k(this,Py).canStart();try{if(r)n();else{Se(this,yd,wp).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=k(this,Jo).config).onMutate)==null?void 0:o.call(i,e,this));const W=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));W!==this.state.context&&Se(this,yd,wp).call(this,{type:"pending",context:W,variables:e,isPaused:s})}const M=await k(this,Py).start();return await((u=(l=k(this,Jo).config).onSuccess)==null?void 0:u.call(l,M,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,M,e,this.state.context)),await((p=(f=k(this,Jo).config).onSettled)==null?void 0:p.call(f,M,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,M,null,e,this.state.context)),Se(this,yd,wp).call(this,{type:"success",data:M}),M}catch(M){try{throw await((w=(y=k(this,Jo).config).onError)==null?void 0:w.call(y,M,e,this.state.context,this)),await((N=(C=this.options).onError)==null?void 0:N.call(C,M,e,this.state.context)),await((P=(S=k(this,Jo).config).onSettled)==null?void 0:P.call(S,void 0,M,this.state.variables,this.state.context,this)),await((L=(O=this.options).onSettled)==null?void 0:L.call(O,void 0,M,e,this.state.context)),M}finally{Se(this,yd,wp).call(this,{type:"error",error:M})}}finally{k(this,Jo).runNext(this)}}},md=new WeakMap,Jo=new WeakMap,Py=new WeakMap,yd=new WeakSet,wp=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vi.batch(()=>{k(this,md).forEach(r=>{r.onMutationUpdate(e)}),k(this,Jo).notify({mutation:this,type:"updated",action:e})})},RK);function Bte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lh,mu,GS,kK,U_e=(kK=class extends kC{constructor(e={}){super();se(this,Lh);se(this,mu);se(this,GS);this.config=e,q(this,Lh,new Set),q(this,mu,new Map),q(this,GS,0)}build(e,n,r){const s=new L_e({mutationCache:this,mutationId:++Gf(this,GS)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){k(this,Lh).add(e);const n=VN(e);if(typeof n=="string"){const r=k(this,mu).get(n);r?r.push(e):k(this,mu).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(k(this,Lh).delete(e)){const n=VN(e);if(typeof n=="string"){const r=k(this,mu).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&k(this,mu).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=VN(e);if(typeof n=="string"){const r=k(this,mu).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=VN(e);if(typeof n=="string"){const s=(r=k(this,mu).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vi.batch(()=>{k(this,Lh).forEach(e=>{this.notify({type:"removed",mutation:e})}),k(this,Lh).clear(),k(this,mu).clear()})}getAll(){return Array.from(k(this,Lh))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>U7(n,r))}findAll(e={}){return this.getAll().filter(n=>U7(e,n))}notify(e){vi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return vi.batch(()=>Promise.all(e.map(n=>n.continue().catch(na))))}},Lh=new WeakMap,mu=new WeakMap,GS=new WeakMap,kK);function VN(t){var e;return(e=t.options.scope)==null?void 0:e.id}function j7(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const m=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=Tte(e.options,e.fetchOptions),w=async(C,N,S)=>{if(g)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const O=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:N,direction:S?"backward":"forward",meta:e.options.meta};return m(F),F})(),L=await y(O),{maxPages:M}=e.options,W=S?x_e:N_e;return{pages:W(C.pages,L,M),pageParams:W(C.pageParams,N,M)}};if(s&&i.length){const C=s==="backward",N=C?$_e:W7,S={pages:i,pageParams:o},P=N(r,S);a=await w(S,P,C)}else{const C=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:W7(r,a);if(c>0&&N==null)break;a=await w(a,N),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var g,m;return(m=(g=e.options).persister)==null?void 0:m.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function W7(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function $_e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ws,Lp,Up,Iv,Nv,$p,xv,Tv,PK,F_e=(PK=class{constructor(t={}){se(this,Ws);se(this,Lp);se(this,Up);se(this,Iv);se(this,Nv);se(this,$p);se(this,xv);se(this,Tv);q(this,Ws,t.queryCache||new B_e),q(this,Lp,t.mutationCache||new U_e),q(this,Up,t.defaultOptions||{}),q(this,Iv,new Map),q(this,Nv,new Map),q(this,$p,0)}mount(){Gf(this,$p)._++,k(this,$p)===1&&(q(this,xv,$$.subscribe(async t=>{t&&(await this.resumePausedMutations(),k(this,Ws).onFocus())})),q(this,Tv,WR.subscribe(async t=>{t&&(await this.resumePausedMutations(),k(this,Ws).onOnline())})))}unmount(){var t,e;Gf(this,$p)._--,k(this,$p)===0&&((t=k(this,xv))==null||t.call(this),q(this,xv,void 0),(e=k(this,Tv))==null||e.call(this),q(this,Tv,void 0))}isFetching(t){return k(this,Ws).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return k(this,Lp).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=k(this,Ws).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=k(this,Ws).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Mg(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return k(this,Ws).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=k(this,Ws).get(r.queryHash),i=s==null?void 0:s.state.data,o=S_e(e,i);if(o!==void 0)return k(this,Ws).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return vi.batch(()=>k(this,Ws).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=k(this,Ws).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=k(this,Ws);vi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=k(this,Ws);return vi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=vi.batch(()=>k(this,Ws).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(na).catch(na)}invalidateQueries(t,e={}){return vi.batch(()=>(k(this,Ws).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=vi.batch(()=>k(this,Ws).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(na)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(na)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=k(this,Ws).build(this,e);return n.isStaleByTime(Mg(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(na).catch(na)}fetchInfiniteQuery(t){return t.behavior=j7(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(na).catch(na)}ensureInfiniteQueryData(t){return t.behavior=j7(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return WR.isOnline()?k(this,Lp).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,Ws)}getMutationCache(){return k(this,Lp)}getDefaultOptions(){return k(this,Up)}setDefaultOptions(t){q(this,Up,t)}setQueryDefaults(t,e){k(this,Iv).set(P0(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...k(this,Iv).values()],n={};return e.forEach(r=>{qA(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){k(this,Nv).set(P0(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...k(this,Nv).values()],n={};return e.forEach(r=>{qA(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...k(this,Up).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=B$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===U$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...k(this,Up).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){k(this,Ws).clear(),k(this,Lp).clear()}},Ws=new WeakMap,Lp=new WeakMap,Up=new WeakMap,Iv=new WeakMap,Nv=new WeakMap,$p=new WeakMap,xv=new WeakMap,Tv=new WeakMap,PK),$a,Hn,qS,Zo,Oy,Rv,Fp,jp,VS,kv,Pv,Dy,My,Wp,Ov,Ar,q1,zL,HL,GL,qL,VL,KL,YL,Lte,OK,j_e=(OK=class extends kC{constructor(e,n){super();se(this,Ar);se(this,$a);se(this,Hn);se(this,qS);se(this,Zo);se(this,Oy);se(this,Rv);se(this,Fp);se(this,jp);se(this,VS);se(this,kv);se(this,Pv);se(this,Dy);se(this,My);se(this,Wp);se(this,Ov,new Set);this.options=n,q(this,$a,e),q(this,jp,null),q(this,Fp,WL()),this.options.experimental_prefetchInRender||k(this,Fp).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,Hn).addObserver(this),z7(k(this,Hn),this.options)?Se(this,Ar,q1).call(this):this.updateResult(),Se(this,Ar,qL).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return QL(k(this,Hn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return QL(k(this,Hn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Se(this,Ar,VL).call(this),Se(this,Ar,KL).call(this),k(this,Hn).removeObserver(this)}setOptions(e){const n=this.options,r=k(this,Hn);if(this.options=k(this,$a).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nl(this.options.enabled,k(this,Hn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Se(this,Ar,YL).call(this),k(this,Hn).setOptions(this.options),n._defaulted&&!jR(this.options,n)&&k(this,$a).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,Hn),observer:this});const s=this.hasListeners();s&&H7(k(this,Hn),r,this.options,n)&&Se(this,Ar,q1).call(this),this.updateResult(),s&&(k(this,Hn)!==r||Nl(this.options.enabled,k(this,Hn))!==Nl(n.enabled,k(this,Hn))||Mg(this.options.staleTime,k(this,Hn))!==Mg(n.staleTime,k(this,Hn)))&&Se(this,Ar,zL).call(this);const i=Se(this,Ar,HL).call(this);s&&(k(this,Hn)!==r||Nl(this.options.enabled,k(this,Hn))!==Nl(n.enabled,k(this,Hn))||i!==k(this,Wp))&&Se(this,Ar,GL).call(this,i)}getOptimisticResult(e){const n=k(this,$a).getQueryCache().build(k(this,$a),e),r=this.createResult(n,e);return z_e(this,r)&&(q(this,Zo,r),q(this,Rv,this.options),q(this,Oy,k(this,Hn).state)),r}getCurrentResult(){return k(this,Zo)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){k(this,Ov).add(e)}getCurrentQuery(){return k(this,Hn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=k(this,$a).defaultQueryOptions(e),r=k(this,$a).getQueryCache().build(k(this,$a),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Se(this,Ar,q1).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,Zo)))}createResult(e,n){var M;const r=k(this,Hn),s=this.options,i=k(this,Zo),o=k(this,Oy),a=k(this,Rv),l=e!==r?e.state:k(this,qS),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const W=this.hasListeners(),F=!W&&z7(e,n),V=W&&H7(e,r,n,s);(F||V)&&(d={...d,...Mte(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&m==="pending"){let W;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(W=i.data,y=!0):W=typeof n.placeholderData=="function"?n.placeholderData((M=k(this,Pv))==null?void 0:M.state.data,k(this,Pv)):n.placeholderData,W!==void 0&&(m="success",f=jL(i==null?void 0:i.data,W,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===k(this,VS))f=k(this,kv);else try{q(this,VS,n.select),f=n.select(f),f=jL(i==null?void 0:i.data,f,n),q(this,kv,f),q(this,jp,null)}catch(W){q(this,jp,W)}k(this,jp)&&(p=k(this,jp),f=k(this,kv),g=Date.now(),m="error");const w=d.fetchStatus==="fetching",C=m==="pending",N=m==="error",S=C&&w,P=f!==void 0,L={status:m,fetchStatus:d.fetchStatus,isPending:C,isSuccess:m==="success",isError:N,isInitialLoading:S,isLoading:S,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!C,isLoadingError:N&&!P,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&P,isStale:F$(e,n),refetch:this.refetch,promise:k(this,Fp),isEnabled:Nl(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=$=>{L.status==="error"?$.reject(L.error):L.data!==void 0&&$.resolve(L.data)},F=()=>{const $=q(this,Fp,L.promise=WL());W($)},V=k(this,Fp);switch(V.status){case"pending":e.queryHash===r.queryHash&&W(V);break;case"fulfilled":(L.status==="error"||L.data!==V.value)&&F();break;case"rejected":(L.status!=="error"||L.error!==V.reason)&&F();break}}return L}updateResult(){const e=k(this,Zo),n=this.createResult(k(this,Hn),this.options);if(q(this,Oy,k(this,Hn).state),q(this,Rv,this.options),k(this,Oy).data!==void 0&&q(this,Pv,k(this,Hn)),jR(n,e))return;q(this,Zo,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!k(this,Ov).size)return!0;const o=new Set(i??k(this,Ov));return this.options.throwOnError&&o.add("error"),Object.keys(k(this,Zo)).some(a=>{const c=a;return k(this,Zo)[c]!==e[c]&&o.has(c)})};Se(this,Ar,Lte).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Se(this,Ar,qL).call(this)}},$a=new WeakMap,Hn=new WeakMap,qS=new WeakMap,Zo=new WeakMap,Oy=new WeakMap,Rv=new WeakMap,Fp=new WeakMap,jp=new WeakMap,VS=new WeakMap,kv=new WeakMap,Pv=new WeakMap,Dy=new WeakMap,My=new WeakMap,Wp=new WeakMap,Ov=new WeakMap,Ar=new WeakSet,q1=function(e){Se(this,Ar,YL).call(this);let n=k(this,Hn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(na)),n},zL=function(){Se(this,Ar,VL).call(this);const e=Mg(this.options.staleTime,k(this,Hn));if(k0||k(this,Zo).isStale||!$L(e))return;const r=xte(k(this,Zo).dataUpdatedAt,e)+1;q(this,Dy,setTimeout(()=>{k(this,Zo).isStale||this.updateResult()},r))},HL=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,Hn)):this.options.refetchInterval)??!1},GL=function(e){Se(this,Ar,KL).call(this),q(this,Wp,e),!(k0||Nl(this.options.enabled,k(this,Hn))===!1||!$L(k(this,Wp))||k(this,Wp)===0)&&q(this,My,setInterval(()=>{(this.options.refetchIntervalInBackground||$$.isFocused())&&Se(this,Ar,q1).call(this)},k(this,Wp)))},qL=function(){Se(this,Ar,zL).call(this),Se(this,Ar,GL).call(this,Se(this,Ar,HL).call(this))},VL=function(){k(this,Dy)&&(clearTimeout(k(this,Dy)),q(this,Dy,void 0))},KL=function(){k(this,My)&&(clearInterval(k(this,My)),q(this,My,void 0))},YL=function(){const e=k(this,$a).getQueryCache().build(k(this,$a),this.options);if(e===k(this,Hn))return;const n=k(this,Hn);q(this,Hn,e),q(this,qS,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Lte=function(e){vi.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(k(this,Zo))}),k(this,$a).getQueryCache().notify({query:k(this,Hn),type:"observerResultsUpdated"})})},OK);function W_e(t,e){return Nl(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function z7(t,e){return W_e(t,e)||t.state.data!==void 0&&QL(t,e,e.refetchOnMount)}function QL(t,e,n){if(Nl(e.enabled,t)!==!1&&Mg(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&F$(t,e)}return!1}function H7(t,e,n,r){return(t!==e||Nl(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&F$(t,n)}function F$(t,e){return Nl(e.enabled,t)!==!1&&t.isStaleByTime(Mg(e.staleTime,t))}function z_e(t,e){return!jR(t.getCurrentResult(),e)}var zp,Hp,Fa,Uh,wf,cT,JL,DK,H_e=(DK=class extends kC{constructor(n,r){super();se(this,wf);se(this,zp);se(this,Hp);se(this,Fa);se(this,Uh);q(this,zp,n),this.setOptions(r),this.bindMethods(),Se(this,wf,cT).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,zp).defaultMutationOptions(n),jR(this.options,r)||k(this,zp).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,Fa),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&P0(r.mutationKey)!==P0(this.options.mutationKey)?this.reset():((s=k(this,Fa))==null?void 0:s.state.status)==="pending"&&k(this,Fa).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,Fa))==null||n.removeObserver(this)}onMutationUpdate(n){Se(this,wf,cT).call(this),Se(this,wf,JL).call(this,n)}getCurrentResult(){return k(this,Hp)}reset(){var n;(n=k(this,Fa))==null||n.removeObserver(this),q(this,Fa,void 0),Se(this,wf,cT).call(this),Se(this,wf,JL).call(this)}mutate(n,r){var s;return q(this,Uh,r),(s=k(this,Fa))==null||s.removeObserver(this),q(this,Fa,k(this,zp).getMutationCache().build(k(this,zp),this.options)),k(this,Fa).addObserver(this),k(this,Fa).execute(n)}},zp=new WeakMap,Hp=new WeakMap,Fa=new WeakMap,Uh=new WeakMap,wf=new WeakSet,cT=function(){var r;const n=((r=k(this,Fa))==null?void 0:r.state)??Bte();q(this,Hp,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},JL=function(n){vi.batch(()=>{var r,s,i,o,a,c,l,u;if(k(this,Uh)&&this.hasListeners()){const d=k(this,Hp).variables,h=k(this,Hp).context;(n==null?void 0:n.type)==="success"?((s=(r=k(this,Uh)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=k(this,Uh)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=k(this,Uh)).onError)==null||c.call(a,n.error,d,h),(u=(l=k(this,Uh)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(k(this,Hp))})})},DK);function G_e(t,e){return L$(t,e)}function q_e(t){return JSON.stringify(t,(e,n)=>V_e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function V_e(t){if(!G7(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!G7(n)||!n.hasOwnProperty("isPrototypeOf"))}function G7(t){return Object.prototype.toString.call(t)==="[object Object]"}function V2(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:m,getNextPageParam:y,initialPageParam:w,_optimisticResults:C,enabled:N,notifyOnChangeProps:S,placeholderData:P,refetchInterval:O,refetchIntervalInBackground:L,refetchOnMount:M,refetchOnReconnect:W,refetchOnWindowFocus:F,retryOnMount:V,select:$,staleTime:v,suspense:E,throwOnError:_,config:R,connector:x,query:B,...j}=t;return j}function K_e(t){return{mutationFn(e){return oT(t,e)},mutationKey:["connect"]}}function Y_e(t){return{mutationFn(e){return OL(t,e)},mutationKey:["disconnect"]}}function Q_e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return I1e(t,{...i,address:r})},queryKey:J_e(e)}}function J_e(t={}){return["ensName",V2(t)]}function Z_e(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return N1e(t,{...o,connector:r})},queryKey:X_e(e)}}function X_e(t={}){const{connector:e,...n}=t;return["walletClient",{...V2(n),connectorUid:e==null?void 0:e.uid}]}function eAe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return fte(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:tAe(e)}}function tAe(t={}){const{abi:e,...n}=t;return["readContract",V2(n)]}function nAe(t){return{mutationFn(e){return BL(t,e)},mutationKey:["switchChain"]}}function rAe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return yte(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:sAe(e)}}function sAe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",V2(n)]}function iAe(t){return{mutationFn(e){return wte(t,e)},mutationKey:["writeContract"]}}var Ute=G.createContext(void 0),j$=t=>{const e=G.useContext(Ute);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},oAe=({client:t,children:e})=>(G.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(Ute.Provider,{value:t,children:e})),$te=G.createContext(!1),aAe=()=>G.useContext($te);$te.Provider;function cAe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lAe=G.createContext(cAe()),uAe=()=>G.useContext(lAe),dAe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},hAe=t=>{G.useEffect(()=>{t.clearReset()},[t])},fAe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Rte(n,[t.error,r])),pAe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},gAe=(t,e)=>t.isLoading&&t.isFetching&&!e,mAe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,q7=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function yAe(t,e,n){var d,h,f,p,g;const r=aAe(),s=uAe(),i=j$(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",pAe(o),dAe(o,s),hAe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=G.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(G.useSyncExternalStore(G.useCallback(m=>{const y=u?c.subscribe(vi.batchCalls(m)):na;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),G.useEffect(()=>{c.setOptions(o)},[o,c]),mAe(o,l))throw q7(o,c,s);if(fAe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!k0&&gAe(l,r)){const m=a?q7(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;m==null||m.catch(na).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function wAe(t,e){return yAe(t,j_e)}function K2(t,e){const n=j$(),[r]=G.useState(()=>new H_e(n,t));G.useEffect(()=>{r.setOptions(t)},[r,t]);const s=G.useSyncExternalStore(G.useCallback(o=>r.subscribe(vi.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=G.useCallback((o,a)=>{r.mutate(o,a).catch(na)},[r]);if(s.error&&Rte(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Y2(t){const e=wAe({...t,queryKeyHashFn:q_e});return e.queryKey=t.queryKey,e}function DI(t={}){const e=pc(t);return G.useSyncExternalStore(n=>P1e(e,{onChange:n}),()=>k7(e),()=>k7(e))}function bAe(t={}){const e=pc(t);return G.useSyncExternalStore(n=>o_e(e,{onChange:n}),()=>P7(e),()=>P7(e))}function vAe(t={}){const e=pc(t);return G.useSyncExternalStore(n=>mte(e,{onChange:n}),()=>O7(e),()=>O7(e))}function Fte(t={}){const{mutation:e}=t,n=pc(t),r=K_e(n),{mutate:s,mutateAsync:i,...o}=K2({...e,...r});return G.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:vAe({config:n})}}function EAe(t={}){const e=pc(t);return G.useSyncExternalStore(n=>gte(e,{onChange:n}),()=>fu(e),()=>fu(e))}function jte(t={}){const{mutation:e}=t,n=pc(t),r=Y_e(n),{mutate:s,mutateAsync:i,...o}=K2({...e,...r});return{...o,connectors:EAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function Wte(t={}){const{address:e,query:n={}}=t,r=pc(t),s=DI({config:r}),i=Q_e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return Y2({...n,...i,enabled:o})}function CAe(t={}){const e=pc(t);return Nte.useSyncExternalStoreWithSelector(n=>D1e(e,{onChange:n}),()=>DL(e,t),()=>DL(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function V7(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=pc(t),a=DI({config:o}),c=eAe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return Y2({...s,...c,enabled:l,structuralSharing:s.structuralSharing??G_e})}function _Ae(t={}){const{mutation:e}=t,n=pc(t),r=nAe(n),{mutate:s,mutateAsync:i,...o}=K2({...e,...r});return{...o,chains:bAe({config:n}),switchChain:s,switchChainAsync:i}}function zte(t={}){const{query:e={},...n}=t,r=pc(n),s=j$(),{address:i,connector:o,status:a}=OI({config:r}),c=DI({config:r}),l=t.connector??o,{queryKey:u,...d}=Z_e(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=G.useRef(i);return G.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),Y2({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function CD(t={}){const{hash:e,query:n={}}=t,r=pc(t),s=DI({config:r}),i=rAe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return Y2({...n,...i,enabled:o})}function _D(t={}){const{mutation:e}=t,n=pc(t),r=iAe(n),{mutate:s,mutateAsync:i,...o}=K2({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const AAe="_verified_lvyh0_1",W$={verified:AAe},SAe=()=>b.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:W$.verified,children:b.jsx("g",{children:b.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),IAe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:W$.verified,children:b.jsxs("g",{children:[b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[b.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),b.jsx("stop",{offset:".539",stopColor:"#cd8105"}),b.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),b.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),b.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[b.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),b.jsx("stop",{offset:".406",stopColor:"#e2b719"}),b.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),b.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[b.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),b.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),b.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),NAe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:W$.verified,children:b.jsx("g",{children:b.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function Hte(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Hte(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bg(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Hte(t))&&(r&&(r+=" "),r+=e);return r}const xAe="_root_98iqw_1",TAe="_article_98iqw_21",K7={root:xAe,article:TAe},z$=({className:t,children:e})=>b.jsx("div",{className:Bg("react-tweet-theme",K7.root,t),children:b.jsx("article",{className:K7.article,children:e})}),Gte=t=>b.jsx("img",{...t}),RAe="_header_nqq4j_1",kAe="_avatar_nqq4j_11",PAe="_avatarOverflow_nqq4j_16",OAe="_avatarSquare_nqq4j_23",DAe="_avatarShadow_nqq4j_26",MAe="_author_nqq4j_37",BAe="_authorLink_nqq4j_44",LAe="_authorVerified_nqq4j_53",UAe="_authorLinkText_nqq4j_56",$Ae="_authorMeta_nqq4j_63",FAe="_authorFollow_nqq4j_66",jAe="_username_nqq4j_69",WAe="_follow_nqq4j_74",zAe="_separator_nqq4j_82",HAe="_brand_nqq4j_86",GAe="_twitterIcon_nqq4j_90",qi={header:RAe,avatar:kAe,avatarOverflow:PAe,avatarSquare:OAe,avatarShadow:DAe,author:MAe,authorLink:BAe,authorVerified:LAe,authorLinkText:UAe,authorMeta:$Ae,authorFollow:FAe,username:jAe,follow:WAe,separator:zAe,brand:HAe,twitterIcon:GAe},qAe="_verifiedOld_lcna5_1",VAe="_verifiedBlue_lcna5_4",KAe="_verifiedGovernment_lcna5_7",AD={verifiedOld:qAe,verifiedBlue:VAe,verifiedGovernment:KAe},qte=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=b.jsx(SAe,{}),s=AD.verifiedBlue;if(n)switch(t.is_blue_verified||(s=AD.verifiedOld),t.verified_type){case"Government":r=b.jsx(NAe,{}),s=AD.verifiedGovernment;break;case"Business":r=b.jsx(IAe,{}),s=null;break}return n?b.jsx("div",{className:Bg(e,s),children:r}):null},YAe=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Gte,{user:s}=t;return b.jsxs("div",{className:qi.header,children:[b.jsxs("a",{href:t.url,className:qi.avatar,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Bg(qi.avatarOverflow,s.profile_image_shape==="Square"&&qi.avatarSquare),children:b.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),b.jsx("div",{className:qi.avatarOverflow,children:b.jsx("div",{className:qi.avatarShadow})})]}),b.jsxs("div",{className:qi.author,children:[b.jsxs("a",{href:t.url,className:qi.authorLink,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:qi.authorLinkText,children:b.jsx("span",{title:s.name,children:s.name})}),b.jsx(qte,{user:s,className:qi.authorVerified})]}),b.jsxs("div",{className:qi.authorMeta,children:[b.jsx("a",{href:t.url,className:qi.username,target:"_blank",rel:"noopener noreferrer",children:b.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),b.jsxs("div",{className:qi.authorFollow,children:[b.jsx("span",{className:qi.separator,children:"·"}),b.jsx("a",{href:s.follow_url,className:qi.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),b.jsx("a",{href:t.url,className:qi.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:qi.twitterIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},QAe="_root_1ec15_1",JAe={root:QAe},ZAe=({tweet:t})=>b.jsxs("a",{href:t.in_reply_to_url,className:JAe.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),XAe="_root_eihfa_1",eSe={root:XAe},tSe=({href:t,children:e})=>b.jsx("a",{href:t,className:eSe.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),nSe="_root_1xq52_1",rSe={root:nSe},sSe=({tweet:t})=>b.jsx("p",{className:rSe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return b.jsx(tSe,{href:e.href,children:e.text},n);case"media":return;default:return b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),Y7=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Vte=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,iSe=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,oSe=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,aSe=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,cSe=t=>`https://x.com/hashtag/${t.text}`,lSe=t=>`https://x.com/search?q=%24${t.text}`,uSe=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,Kte=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},dSe=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},hSe=t=>{const e=dSe(t);return e.length>1?e[1]:e[0]},ZL=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function Q7(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return f1(n,"hashtag",t.entities.hashtags),f1(n,"mention",t.entities.user_mentions),f1(n,"url",t.entities.urls),f1(n,"symbol",t.entities.symbols),t.entities.media&&f1(n,"media",t.entities.media),fSe(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:cSe(r),text:s});case"mention":return Object.assign(r,{href:Vte(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:lSe(r),text:s});default:return Object.assign(r,{text:s})}})}function f1(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function fSe(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const pSe=t=>({...t,url:Y7(t),user:{...t.user,url:Vte(t),follow_url:aSe(t)},like_url:iSe(t),reply_url:oSe(t),in_reply_to_url:t.in_reply_to_screen_name?uSe(t):void 0,entities:Q7(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:Y7(t.quoted_tweet),entities:Q7(t.quoted_tweet)}:void 0}),gSe="_root_g9tkv_1",mSe="_rounded_g9tkv_6",ySe="_mediaWrapper_g9tkv_10",wSe="_grid2Columns_g9tkv_17",bSe="_grid3_g9tkv_20",vSe="_grid2x2_g9tkv_23",ESe="_mediaContainer_g9tkv_26",CSe="_mediaLink_g9tkv_34",_Se="_skeleton_g9tkv_38",ASe="_image_g9tkv_43",Cc={root:gSe,rounded:mSe,mediaWrapper:ySe,grid2Columns:wSe,grid3:bSe,grid2x2:vSe,mediaContainer:ESe,mediaLink:CSe,skeleton:_Se,image:ASe},SSe="_anchor_fp31d_1",ISe="_videoButton_fp31d_17",NSe="_videoButtonIcon_fp31d_35",xSe="_watchOnTwitter_fp31d_44",TSe="_viewReplies_fp31d_60",Bw={anchor:SSe,videoButton:ISe,videoButtonIcon:NSe,watchOnTwitter:xSe,viewReplies:TSe},RSe=({tweet:t,media:e})=>{const[n,r]=G.useState(!0),[s,i]=G.useState(!1),[o,a]=G.useState(!1),c=hSe(e);let l=0;return b.jsxs(b.Fragment,{children:[b.jsx("video",{className:Cc.image,poster:Kte(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:b.jsx("source",{src:c.url,type:c.content_type})}),n&&b.jsx("button",{type:"button",className:Bw.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:b.jsx("svg",{viewBox:"0 0 24 24",className:Bw.videoButtonIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&b.jsx("div",{className:Bw.watchOnTwitter,children:b.jsx("a",{href:t.url,className:Bw.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&b.jsx("a",{href:t.url,className:Bg(Bw.anchor,Bw.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},kSe=t=>b.jsx("img",{...t}),J7=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},Yte=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:kSe;return b.jsx("div",{className:Bg(Cc.root,!n&&Cc.rounded),children:b.jsx("div",{className:Bg(Cc.mediaWrapper,o>1&&Cc.grid2Columns,o===3&&Cc.grid3,o>4&&Cc.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>b.jsx(G.Fragment,{children:l.type==="photo"?b.jsxs("a",{href:t.url,className:Bg(Cc.mediaContainer,Cc.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Cc.skeleton,style:J7(l,o)}),b.jsx(c,{src:Kte(l,"small"),alt:l.ext_alt_text||"Image",className:Cc.image,draggable:!0})]},l.media_url_https):b.jsxs("div",{className:Cc.mediaContainer,children:[b.jsx("div",{className:Cc.skeleton,style:J7(l,o)}),b.jsx(RSe,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},PSe={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},OSe=new Intl.DateTimeFormat("en-US",PSe),DSe=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},MSe=t=>{const e=DSe(OSe.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},BSe="_root_i24yn_1",LSe={root:BSe},USe=({tweet:t})=>{const e=new Date(t.created_at),n=MSe(e);return b.jsx("a",{className:LSe.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:b.jsx("time",{dateTime:e.toISOString(),children:n})})},$Se="_info_19qcj_1",FSe="_infoLink_19qcj_10",jSe="_infoIcon_19qcj_30",SD={info:$Se,infoLink:FSe,infoIcon:jSe},WSe=({tweet:t})=>b.jsxs("div",{className:SD.info,children:[b.jsx(USe,{tweet:t}),b.jsx("a",{className:SD.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:SD.infoIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),zSe="_actions_n2anf_1",HSe="_like_n2anf_13",GSe="_reply_n2anf_14",qSe="_copy_n2anf_15",VSe="_likeIconWrapper_n2anf_27",KSe="_likeCount_n2anf_30",YSe="_replyIconWrapper_n2anf_35",QSe="_copyIconWrapper_n2anf_36",JSe="_likeIcon_n2anf_27",ZSe="_replyIcon_n2anf_35",XSe="_copyIcon_n2anf_36",eIe="_replyText_n2anf_56",tIe="_copyText_n2anf_57",za={actions:zSe,like:HSe,reply:GSe,copy:qSe,likeIconWrapper:VSe,likeCount:KSe,replyIconWrapper:YSe,copyIconWrapper:QSe,likeIcon:JSe,replyIcon:ZSe,copyIcon:XSe,replyText:eIe,copyText:tIe},nIe=({tweet:t})=>{const[e,n]=G.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return G.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),b.jsxs("button",{type:"button",className:za.copy,"aria-label":"Copy link",onClick:r,children:[b.jsx("div",{className:za.copyIconWrapper,children:e?b.jsx("svg",{viewBox:"0 0 24 24",className:za.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):b.jsx("svg",{viewBox:"0 0 24 24",className:za.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),b.jsx("span",{className:za.copyText,children:e?"Copied!":"Copy link"})]})},rIe=({tweet:t})=>{const e=ZL(t.favorite_count);return b.jsxs("div",{className:za.actions,children:[b.jsxs("a",{className:za.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[b.jsx("div",{className:za.likeIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:za.likeIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),b.jsx("span",{className:za.likeCount,children:e})]}),b.jsxs("a",{className:za.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[b.jsx("div",{className:za.replyIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:za.replyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),b.jsx("span",{className:za.replyText,children:"Reply"})]}),b.jsx(nIe,{tweet:t})]})},sIe="_replies_1cutb_1",iIe="_link_1cutb_4",oIe="_text_1cutb_23",ID={replies:sIe,link:iIe,text:oIe},aIe=({tweet:t})=>b.jsx("div",{className:ID.replies,children:b.jsx("a",{className:ID.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:b.jsx("span",{className:ID.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${ZL(t.conversation_count)} reply`:`Read ${ZL(t.conversation_count)} replies`})})}),cIe="_root_q5799_1",lIe="_article_q5799_16",Z7={root:cIe,article:lIe},uIe=({tweet:t,children:e})=>b.jsx("div",{className:Z7.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:b.jsx("article",{className:Z7.article,children:e})}),dIe="_header_r31i5_1",hIe="_avatar_r31i5_11",fIe="_avatarSquare_r31i5_17",pIe="_author_r31i5_21",gIe="_authorText_r31i5_26",mIe="_username_r31i5_33",Tm={header:dIe,avatar:hIe,avatarSquare:fIe,author:pIe,authorText:gIe,username:mIe},yIe=({tweet:t})=>{const{user:e}=t;return b.jsxs("div",{className:Tm.header,children:[b.jsx("a",{href:t.url,className:Tm.avatar,target:"_blank",rel:"noopener noreferrer",children:b.jsx("div",{className:Bg(Tm.avatarOverflow,e.profile_image_shape==="Square"&&Tm.avatarSquare),children:b.jsx(Gte,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),b.jsxs("div",{className:Tm.author,children:[b.jsx("div",{className:Tm.authorText,children:b.jsx("span",{title:e.name,children:e.name})}),b.jsx(qte,{user:e}),b.jsx("div",{className:Tm.username,children:b.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},wIe="_root_175ot_1",bIe={root:wIe},vIe=({tweet:t})=>b.jsx("p",{className:bIe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),EIe=({tweet:t})=>{var e;return b.jsxs(uIe,{tweet:t,children:[b.jsx(yIe,{tweet:t}),b.jsx(vIe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?b.jsx(Yte,{quoted:!0,tweet:t}):null]})},CIe=({tweet:t,components:e})=>{var n;const r=G.useMemo(()=>pSe(t),[t]);return b.jsxs(z$,{children:[b.jsx(YAe,{tweet:r,components:e}),r.in_reply_to_status_id_str&&b.jsx(ZAe,{tweet:r}),b.jsx(sSe,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?b.jsx(Yte,{tweet:r,components:e}):null,r.quoted_tweet&&b.jsx(EIe,{tweet:r.quoted_tweet}),b.jsx(WSe,{tweet:r}),b.jsx(rIe,{tweet:r}),b.jsx(aIe,{tweet:r})]})},_Ie="_root_16yxa_1",AIe={root:_Ie},SIe=t=>b.jsx(z$,{children:b.jsxs("div",{className:AIe.root,children:[b.jsx("h3",{children:"Tweet not found"}),b.jsx("p",{children:"The embedded tweet could not be found…"})]})}),IIe="_skeleton_oi7hr_1",NIe={skeleton:IIe},KN=({style:t})=>b.jsx("span",{className:NIe.skeleton,style:t}),xIe="_root_17qqv_1",TIe={root:xIe},RIe=()=>b.jsxs(z$,{className:TIe.root,children:[b.jsx(KN,{style:{height:"3rem",marginBottom:"0.75rem"}}),b.jsx(KN,{style:{height:"6rem",margin:"0.5rem 0"}}),b.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),b.jsx(KN,{style:{height:"2rem"}}),b.jsx(KN,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),Qte=0,Jte=1,Zte=2,X7=3;var eW=Object.prototype.hasOwnProperty;function XL(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&XL(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(eW.call(t,n)&&++r&&!eW.call(e,n)||!(n in e)||!XL(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Qh=new WeakMap,dg=()=>{},sa=dg(),eU=Object,er=t=>t===sa,Dd=t=>typeof t=="function",tm=(t,e)=>({...t,...e}),Xte=t=>Dd(t.then),ND={},YN={},H$="undefined",MI=typeof window!=H$,tU=typeof document!=H$,kIe=MI&&"Deno"in window,PIe=()=>MI&&typeof window.requestAnimationFrame!=H$,ene=(t,e)=>{const n=Qh.get(t);return[()=>!er(e)&&t.get(e)||ND,r=>{if(!er(e)){const s=t.get(e);e in YN||(YN[e]=s),n[5](e,tm(s,r),s||ND)}},n[6],()=>!er(e)&&e in YN?YN[e]:!er(e)&&t.get(e)||ND]};let nU=!0;const OIe=()=>nU,[rU,sU]=MI&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[dg,dg],DIe=()=>{const t=tU&&document.visibilityState;return er(t)||t!=="hidden"},MIe=t=>(tU&&document.addEventListener("visibilitychange",t),rU("focus",t),()=>{tU&&document.removeEventListener("visibilitychange",t),sU("focus",t)}),BIe=t=>{const e=()=>{nU=!0,t()},n=()=>{nU=!1};return rU("online",e),rU("offline",n),()=>{sU("online",e),sU("offline",n)}},LIe={isOnline:OIe,isVisible:DIe},UIe={initFocus:MIe,initReconnect:BIe},tW=!Gc.useId,VA=!MI||kIe,$Ie=t=>PIe()?window.requestAnimationFrame(t):setTimeout(t,1),xD=VA?G.useEffect:G.useLayoutEffect,TD=typeof navigator<"u"&&navigator.connection,nW=!VA&&TD&&(["slow-2g","2g"].includes(TD.effectiveType)||TD.saveData),QN=new WeakMap,FIe=t=>eU.prototype.toString.call(t),RD=(t,e)=>t===`[object ${e}]`;let jIe=0;const iU=t=>{const e=typeof t,n=FIe(t),r=RD(n,"Date"),s=RD(n,"RegExp"),i=RD(n,"Object");let o,a;if(eU(t)===t&&!r&&!s){if(o=QN.get(t),o)return o;if(o=++jIe+"~",QN.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=iU(t[a])+",";QN.set(t,o)}if(i){o="#";const c=eU.keys(t).sort();for(;!er(a=c.pop());)er(t[a])||(o+=a+":"+iU(t[a])+",");QN.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},G$=t=>{if(Dd(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?iU(t):"",[t,e]};let WIe=0;const oU=()=>++WIe;async function tne(...t){const[e,n,r,s]=t,i=tm({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Dd(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=G$(h);if(!f)return;const[p,g]=ene(e,f),[m,y,w,C]=Qh.get(e),N=()=>{const v=m[f];return(Dd(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete w[f],delete C[f],v&&v[0])?v[0](Zte).then(()=>p().data):p().data};if(t.length<3)return N();let S=r,P,O=!1;const L=oU();y[f]=[L,0];const M=!er(c),W=p(),F=W.data,V=W._c,$=er(V)?F:V;if(M&&(c=Dd(c)?c($,F):c,g({data:c,_c:$})),Dd(S))try{S=S($)}catch(v){P=v,O=!0}if(S&&Xte(S))if(S=await S.catch(v=>{P=v,O=!0}),L!==y[f][0]){if(O)throw P;return S}else O&&M&&l(P)&&(o=!0,g({data:$,_c:sa}));if(o&&!O)if(Dd(o)){const v=o(S,$);g({data:v,error:sa,_c:sa})}else g({data:S,error:sa,_c:sa});if(y[f][1]=oU(),Promise.resolve(N()).then(()=>{g({_c:sa})}),O){if(u)throw P;return}return S}}const rW=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},zIe=(t,e)=>{if(!Qh.has(t)){const n=tm(UIe,e),r=Object.create(null),s=tne.bind(sa,t);let i=dg;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Qh.has(t)&&(Qh.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!VA)){const u=n.initFocus(setTimeout.bind(sa,rW.bind(sa,r,Qte))),d=n.initReconnect(setTimeout.bind(sa,rW.bind(sa,r,Jte)));i=()=>{u&&u(),d&&d(),Qh.delete(t)}}};return l(),[t,s,l,i]}return[t,Qh.get(t)[4]]},HIe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!er(i)&&o>i||setTimeout(r,a,s)},GIe=XL,[nne,qIe]=zIe(new Map),VIe=tm({onLoadingSlow:dg,onSuccess:dg,onError:dg,onErrorRetry:HIe,onDiscarded:dg,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:nW?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:nW?5e3:3e3,compare:GIe,isPaused:()=>!1,cache:nne,mutate:qIe,fallback:{}},LIe),KIe=(t,e)=>{const n=tm(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=tm(s,o))}return n},YIe=G.createContext({}),QIe="$inf$",rne=MI&&window.__SWR_DEVTOOLS_USE__,JIe=rne?window.__SWR_DEVTOOLS_USE__:[],ZIe=()=>{rne&&(window.__SWR_DEVTOOLS_REACT__=Gc)},XIe=t=>Dd(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],eNe=()=>tm(VIe,G.useContext(YIe)),tNe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=G$(e),[,,,a]=Qh.get(nne);if(o.startsWith(QIe))return n(...i);const c=a[o];return er(c)?n(...i):(delete a[o],c)}),r),nNe=JIe.concat(tNe),rNe=t=>function(...n){const r=eNe(),[s,i,o]=XIe(n),a=KIe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(nNe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},sNe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ZIe();const kD=Gc.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),PD={dedupe:!0},iNe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,m]=Qh.get(r),[y,w]=G$(t),C=G.useRef(!1),N=G.useRef(!1),S=G.useRef(y),P=G.useRef(e),O=G.useRef(n),L=()=>O.current,M=()=>L().isVisible()&&L().isOnline(),[W,F,V,$]=ene(r,y),v=G.useRef({}).current,E=er(o)?er(n.fallback)?sa:n.fallback[y]:o,_=(Te,xe)=>{for(const je in v){const Ue=je;if(Ue==="data"){if(!s(Te[Ue],xe[Ue])&&(!er(Te[Ue])||!s(ne,xe[Ue])))return!1}else if(xe[Ue]!==Te[Ue])return!1}return!0},R=G.useMemo(()=>{const Te=!y||!e?!1:er(a)?L().isPaused()||i?!1:c!==!1:a,xe=pt=>{const nn=tm(pt);return delete nn._k,Te?{isValidating:!0,isLoading:!0,...nn}:nn},je=W(),Ue=$(),rt=xe(je),Rt=je===Ue?rt:xe(Ue);let qe=rt;return[()=>{const pt=xe(W());return _(pt,qe)?(qe.data=pt.data,qe.isLoading=pt.isLoading,qe.isValidating=pt.isValidating,qe.error=pt.error,qe):(qe=pt,pt)},()=>Rt]},[r,y]),x=Ite.useSyncExternalStore(G.useCallback(Te=>V(y,(xe,je)=>{_(je,xe)||Te()}),[r,y]),R[0],R[1]),B=!C.current,j=f[y]&&f[y].length>0,U=x.data,I=er(U)?E&&Xte(E)?kD(E):E:U,H=x.error,re=G.useRef(I),ne=h?er(U)?er(re.current)?I:re.current:U:I,ge=j&&!er(H)?!1:B&&!er(a)?a:L().isPaused()?!1:i?er(I)?!1:c:er(I)||c,te=!!(y&&e&&B&&ge),he=er(x.isValidating)?te:x.isValidating,me=er(x.isLoading)?te:x.isLoading,_e=G.useCallback(async Te=>{const xe=P.current;if(!y||!xe||N.current||L().isPaused())return!1;let je,Ue,rt=!0;const Rt=Te||{},qe=!g[y]||!Rt.dedupe,pt=()=>tW?!N.current&&y===S.current&&C.current:y===S.current,nn={isValidating:!1,isLoading:!1},gn=()=>{F(nn)},Fn=()=>{const fr=g[y];fr&&fr[1]===Ue&&delete g[y]},Qn={isValidating:!0};er(W().data)&&(Qn.isLoading=!0);try{if(qe&&(F(Qn),n.loadingTimeout&&er(W().data)&&setTimeout(()=>{rt&&pt()&&L().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[xe(w),oU()]),[je,Ue]=g[y],je=await je,qe&&setTimeout(Fn,n.dedupingInterval),!g[y]||g[y][1]!==Ue)return qe&&pt()&&L().onDiscarded(y),!1;nn.error=sa;const fr=p[y];if(!er(fr)&&(Ue<=fr[0]||Ue<=fr[1]||fr[1]===0))return gn(),qe&&pt()&&L().onDiscarded(y),!1;const Tn=W().data;nn.data=s(Tn,je)?Tn:je,qe&&pt()&&L().onSuccess(je,y,n)}catch(fr){Fn();const Tn=L(),{shouldRetryOnError:z}=Tn;Tn.isPaused()||(nn.error=fr,qe&&pt()&&(Tn.onError(fr,y,Tn),(z===!0||Dd(z)&&z(fr))&&(!L().revalidateOnFocus||!L().revalidateOnReconnect||M())&&Tn.onErrorRetry(fr,y,Tn,T=>{const D=f[y];D&&D[0]&&D[0](X7,T)},{retryCount:(Rt.retryCount||0)+1,dedupe:!0})))}return rt=!1,gn(),!0},[y,r]),Ce=G.useCallback((...Te)=>tne(r,S.current,...Te),[]);if(xD(()=>{P.current=e,O.current=n,er(U)||(re.current=U)}),xD(()=>{if(!y)return;const Te=_e.bind(sa,PD);let xe=0;L().revalidateOnFocus&&(xe=Date.now()+L().focusThrottleInterval);const Ue=sNe(y,f,(rt,Rt={})=>{if(rt==Qte){const qe=Date.now();L().revalidateOnFocus&&qe>xe&&M()&&(xe=qe+L().focusThrottleInterval,Te())}else if(rt==Jte)L().revalidateOnReconnect&&M()&&Te();else{if(rt==Zte)return _e();if(rt==X7)return _e(Rt)}});return N.current=!1,S.current=y,C.current=!0,F({_k:w}),ge&&(g[y]||(er(I)||VA?Te():$Ie(Te))),()=>{N.current=!0,Ue()}},[y]),xD(()=>{let Te;function xe(){const Ue=Dd(l)?l(W().data):l;Ue&&Te!==-1&&(Te=setTimeout(je,Ue))}function je(){!W().error&&(u||L().isVisible())&&(d||L().isOnline())?_e(PD).then(xe):xe()}return xe(),()=>{Te&&(clearTimeout(Te),Te=-1)}},[l,u,d,y]),G.useDebugValue(ne),i&&er(I)&&y){if(!tW&&VA)throw new Error("Fallback data is required when using Suspense in SSR.");P.current=e,O.current=n,N.current=!1;const Te=m[y];if(!er(Te)){const xe=Ce(Te);kD(xe)}if(er(H)){const xe=_e(PD);er(ne)||(xe.status="fulfilled",xe.value=!0),kD(xe)}else throw H}return{mutate:Ce,get data(){return v.data=!0,ne},get error(){return v.error=!0,H},get isValidating(){return v.isValidating=!0,he},get isLoading(){return v.isLoading=!0,me}}},sW=rNe(iNe);class oNe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const aNe=sW.default||sW,cNe="https://react-tweet.vercel.app";async function lNe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new oNe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const uNe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=aNe(()=>e||t?[e||t&&`${cNe}/api/tweet/${t}`,n]:null,lNe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},dNe=({id:t,apiUrl:e,fallback:n=b.jsx(RIe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=uNe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||SIe;return b.jsx(l,{error:i?i(a):a})}return b.jsx(CIe,{tweet:o,components:r})};var Q2={exports:{}},sne={},ine={exports:{}},hNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fNe=hNe,pNe=fNe;function one(){}function ane(){}ane.resetWarningCache=one;var gNe=function(){function t(r,s,i,o,a,c){if(c!==pNe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ane,resetWarningCache:one};return n.PropTypes=n,n};ine.exports=gNe();var cne=ine.exports,aU={exports:{}};function lne(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=lne(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function iW(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=lne(t))&&(r&&(r+=" "),r+=e);return r}aU.exports=iW,aU.exports.clsx=iW;var mNe=aU.exports,Qs={},oh={};Object.defineProperty(oh,"__esModule",{value:!0});oh.dontSetMe=ENe;oh.findInArray=yNe;oh.int=vNe;oh.isFunction=wNe;oh.isNum=bNe;function yNe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function wNe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function bNe(t){return typeof t=="number"&&!isNaN(t)}function vNe(t){return parseInt(t,10)}function ENe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var iw={};Object.defineProperty(iw,"__esModule",{value:!0});iw.browserPrefixToKey=dne;iw.browserPrefixToStyle=CNe;iw.default=void 0;iw.getPrefix=une;const OD=["Moz","Webkit","O","ms"];function une(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<OD.length;s++)if(dne(t,OD[s])in e)return OD[s];return""}function dne(t,e){return e?`${e}${_Ne(t)}`:t}function CNe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function _Ne(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}iw.default=une();Object.defineProperty(Qs,"__esModule",{value:!0});Qs.addClassName=pne;Qs.addEvent=SNe;Qs.addUserSelectStyles=BNe;Qs.createCSSTransform=PNe;Qs.createSVGTransform=ONe;Qs.getTouch=DNe;Qs.getTouchIdentifier=MNe;Qs.getTranslation=q$;Qs.innerHeight=TNe;Qs.innerWidth=RNe;Qs.matchesSelector=fne;Qs.matchesSelectorAndParentsTo=ANe;Qs.offsetXYFromParent=kNe;Qs.outerHeight=NNe;Qs.outerWidth=xNe;Qs.removeClassName=gne;Qs.removeEvent=INe;Qs.scheduleRemoveUserSelectStyles=LNe;var Kc=oh,oW=hne(iw);function hne(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(hne=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let JN="";function fne(t,e){return JN||(JN=(0,Kc.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Kc.isFunction)(t[n])})),(0,Kc.isFunction)(t[JN])?t[JN](e):!1}function ANe(t,e,n){let r=t;do{if(fne(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function SNe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function INe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function NNe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Kc.int)(n.borderTopWidth),e+=(0,Kc.int)(n.borderBottomWidth),e}function xNe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Kc.int)(n.borderLeftWidth),e+=(0,Kc.int)(n.borderRightWidth),e}function TNe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Kc.int)(n.paddingTop),e-=(0,Kc.int)(n.paddingBottom),e}function RNe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Kc.int)(n.paddingLeft),e-=(0,Kc.int)(n.paddingRight),e}function kNe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function PNe(t,e){const n=q$(t,e,"px");return{[(0,oW.browserPrefixToKey)("transform",oW.default)]:n}}function ONe(t,e){return q$(t,e,"")}function q$(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function DNe(t,e){return t.targetTouches&&(0,Kc.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Kc.findInArray)(t.changedTouches,n=>e===n.identifier)}function MNe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function BNe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&pne(t.body,"react-draggable-transparent-selection")}function LNe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{aW(t)}):aW(t)}function aW(t){if(t)try{if(t.body&&gne(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function pne(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function gne(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var ah={};Object.defineProperty(ah,"__esModule",{value:!0});ah.canDragX=FNe;ah.canDragY=jNe;ah.createCoreData=zNe;ah.createDraggableData=HNe;ah.getBoundPosition=UNe;ah.getControlPosition=WNe;ah.snapToGrid=$Ne;var _c=oh,jb=Qs;function UNe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:GNe(r);const s=V$(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,_c.int)(u.paddingLeft)+(0,_c.int)(l.marginLeft),top:-s.offsetTop+(0,_c.int)(u.paddingTop)+(0,_c.int)(l.marginTop),right:(0,jb.innerWidth)(c)-(0,jb.outerWidth)(s)-s.offsetLeft+(0,_c.int)(u.paddingRight)-(0,_c.int)(l.marginRight),bottom:(0,jb.innerHeight)(c)-(0,jb.outerHeight)(s)-s.offsetTop+(0,_c.int)(u.paddingBottom)-(0,_c.int)(l.marginBottom)}}return(0,_c.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,_c.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,_c.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,_c.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function $Ne(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function FNe(t){return t.props.axis==="both"||t.props.axis==="x"}function jNe(t){return t.props.axis==="both"||t.props.axis==="y"}function WNe(t,e,n){const r=typeof e=="number"?(0,jb.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=V$(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,jb.offsetXYFromParent)(r||t,i,n.props.scale)}function zNe(t,e,n){const r=!(0,_c.isNum)(t.lastX),s=V$(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function HNe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function GNe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function V$(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var J2={},Z2={};Object.defineProperty(Z2,"__esModule",{value:!0});Z2.default=qNe;function qNe(){}Object.defineProperty(J2,"__esModule",{value:!0});J2.default=void 0;var DD=mne(G),Vo=K$(cne),VNe=K$(Q8),No=Qs,Jf=ah,MD=oh,p1=K$(Z2);function K$(t){return t&&t.__esModule?t:{default:t}}function mne(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(mne=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function Qo(t,e,n){return(e=KNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KNe(t){var e=YNe(t,"string");return typeof e=="symbol"?e:e+""}function YNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ou={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Zf=ou.mouse,X2=class extends DD.Component{constructor(){super(...arguments),Qo(this,"dragging",!1),Qo(this,"lastX",NaN),Qo(this,"lastY",NaN),Qo(this,"touchIdentifier",null),Qo(this,"mounted",!1),Qo(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,No.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,No.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,No.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Jf.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Jf.createCoreData)(this,o,a);(0,p1.default)("DraggableCore: handleDragStart: %j",c),(0,p1.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,No.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,No.addEvent)(r,Zf.move,this.handleDrag),(0,No.addEvent)(r,Zf.stop,this.handleDragStop))}),Qo(this,"handleDrag",e=>{const n=(0,Jf.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Jf.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Jf.createCoreData)(this,r,s);if((0,p1.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Qo(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Jf.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Jf.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Jf.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,No.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,p1.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,p1.default)("DraggableCore: Removing handlers"),(0,No.removeEvent)(a.ownerDocument,Zf.move,this.handleDrag),(0,No.removeEvent)(a.ownerDocument,Zf.stop,this.handleDragStop))}),Qo(this,"onMouseDown",e=>(Zf=ou.mouse,this.handleDragStart(e))),Qo(this,"onMouseUp",e=>(Zf=ou.mouse,this.handleDragStop(e))),Qo(this,"onTouchStart",e=>(Zf=ou.touch,this.handleDragStart(e))),Qo(this,"onTouchEnd",e=>(Zf=ou.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,No.addEvent)(e,ou.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,No.removeEvent)(n,ou.mouse.move,this.handleDrag),(0,No.removeEvent)(n,ou.touch.move,this.handleDrag),(0,No.removeEvent)(n,ou.mouse.stop,this.handleDragStop),(0,No.removeEvent)(n,ou.touch.stop,this.handleDragStop),(0,No.removeEvent)(e,ou.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,No.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:VNe.default.findDOMNode(this)}render(){return DD.cloneElement(DD.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};J2.default=X2;Qo(X2,"displayName","DraggableCore");Qo(X2,"propTypes",{allowAnyClick:Vo.default.bool,allowMobileScroll:Vo.default.bool,children:Vo.default.node.isRequired,disabled:Vo.default.bool,enableUserSelectHack:Vo.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Vo.default.arrayOf(Vo.default.number),handle:Vo.default.string,cancel:Vo.default.string,nodeRef:Vo.default.object,onStart:Vo.default.func,onDrag:Vo.default.func,onStop:Vo.default.func,onMouseDown:Vo.default.func,scale:Vo.default.number,className:MD.dontSetMe,style:MD.dontSetMe,transform:MD.dontSetMe});Qo(X2,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(G),n=u(cne),r=u(Q8),s=mNe,i=Qs,o=ah,a=oh,c=u(J2),l=u(Z2);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,w){if(typeof WeakMap=="function")var C=new WeakMap,N=new WeakMap;return(d=function(S,P){if(!P&&S&&S.__esModule)return S;var O,L,M={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return M;if(O=P?N:C){if(O.has(S))return O.get(S);O.set(S,M)}for(const W in S)W!=="default"&&{}.hasOwnProperty.call(S,W)&&((L=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,W))&&(L.get||L.set)?O(M,W,L):M[W]=S[W]);return M})(y,w)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var N in C)({}).hasOwnProperty.call(C,N)&&(y[N]=C[N])}return y},h.apply(null,arguments)}function f(y,w,C){return(w=p(w))in y?Object.defineProperty(y,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):y[w]=C,y}function p(y){var w=g(y,"string");return typeof w=="symbol"?w:w+""}function g(y,w){if(typeof y!="object"||!y)return y;var C=y[Symbol.toPrimitive];if(C!==void 0){var N=C.call(y,w);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(y)}class m extends e.Component{static getDerivedStateFromProps(w,C){let{position:N}=w,{prevPropsPosition:S}=C;return N&&(!S||N.x!==S.x||N.y!==S.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:N,prevPropsPosition:S}),{x:N.x,y:N.y,prevPropsPosition:{...N}}):null}constructor(w){super(w),f(this,"onDragStart",(C,N)=>{if((0,l.default)("Draggable: onDragStart: %j",N),this.props.onStart(C,(0,o.createDraggableData)(this,N))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(C,N)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",N);const S=(0,o.createDraggableData)(this,N),P={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:L,y:M}=P;P.x+=this.state.slackX,P.y+=this.state.slackY;const[W,F]=(0,o.getBoundPosition)(this,P.x,P.y);P.x=W,P.y=F,P.slackX=this.state.slackX+(L-P.x),P.slackY=this.state.slackY+(M-P.y),S.x=P.x,S.y=P.y,S.deltaX=P.x-this.state.x,S.deltaY=P.y-this.state.y}if(this.props.onDrag(C,S)===!1)return!1;this.setState(P)}),f(this,"onDragStop",(C,N)=>{if(!this.state.dragging||this.props.onStop(C,(0,o.createDraggableData)(this,N))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",N);const P={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:L,y:M}=this.props.position;P.x=L,P.y=M}this.setState(P)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,C;return((C=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:C.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:C,children:N,defaultPosition:S,defaultClassName:P,defaultClassNameDragging:O,defaultClassNameDragged:L,position:M,positionOffset:W,scale:F,...V}=this.props;let $={},v=null;const _=!!!M||this.state.dragging,R=M||S,x={x:(0,o.canDragX)(this)&&_?this.state.x:R.x,y:(0,o.canDragY)(this)&&_?this.state.y:R.y};this.state.isElementSVG?v=(0,i.createSVGTransform)(x,W):$=(0,i.createCSSTransform)(x,W);const B=(0,s.clsx)(N.props.className||"",P,{[O]:this.state.dragging,[L]:this.state.dragged});return e.createElement(c.default,h({},V,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(N),{className:B,style:{...N.props.style,...$},transform:v}))}}t.default=m,f(m,"displayName","Draggable"),f(m,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(m,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(sne);const{default:yne,DraggableCore:QNe}=sne;Q2.exports=yne;Q2.exports.default=yne;Q2.exports.DraggableCore=QNe;var JNe=Q2.exports;const BI=ih(JNe);function Ms(){return Ms=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ms.apply(null,arguments)}function wne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bne={exports:{}},kr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=typeof Symbol=="function"&&Symbol.for,Y$=Gi?Symbol.for("react.element"):60103,Q$=Gi?Symbol.for("react.portal"):60106,eP=Gi?Symbol.for("react.fragment"):60107,tP=Gi?Symbol.for("react.strict_mode"):60108,nP=Gi?Symbol.for("react.profiler"):60114,rP=Gi?Symbol.for("react.provider"):60109,sP=Gi?Symbol.for("react.context"):60110,J$=Gi?Symbol.for("react.async_mode"):60111,iP=Gi?Symbol.for("react.concurrent_mode"):60111,oP=Gi?Symbol.for("react.forward_ref"):60112,aP=Gi?Symbol.for("react.suspense"):60113,ZNe=Gi?Symbol.for("react.suspense_list"):60120,cP=Gi?Symbol.for("react.memo"):60115,lP=Gi?Symbol.for("react.lazy"):60116,XNe=Gi?Symbol.for("react.block"):60121,exe=Gi?Symbol.for("react.fundamental"):60117,txe=Gi?Symbol.for("react.responder"):60118,nxe=Gi?Symbol.for("react.scope"):60119;function nl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Y$:switch(t=t.type,t){case J$:case iP:case eP:case nP:case tP:case aP:return t;default:switch(t=t&&t.$$typeof,t){case sP:case oP:case lP:case cP:case rP:return t;default:return e}}case Q$:return e}}}function vne(t){return nl(t)===iP}kr.AsyncMode=J$;kr.ConcurrentMode=iP;kr.ContextConsumer=sP;kr.ContextProvider=rP;kr.Element=Y$;kr.ForwardRef=oP;kr.Fragment=eP;kr.Lazy=lP;kr.Memo=cP;kr.Portal=Q$;kr.Profiler=nP;kr.StrictMode=tP;kr.Suspense=aP;kr.isAsyncMode=function(t){return vne(t)||nl(t)===J$};kr.isConcurrentMode=vne;kr.isContextConsumer=function(t){return nl(t)===sP};kr.isContextProvider=function(t){return nl(t)===rP};kr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Y$};kr.isForwardRef=function(t){return nl(t)===oP};kr.isFragment=function(t){return nl(t)===eP};kr.isLazy=function(t){return nl(t)===lP};kr.isMemo=function(t){return nl(t)===cP};kr.isPortal=function(t){return nl(t)===Q$};kr.isProfiler=function(t){return nl(t)===nP};kr.isStrictMode=function(t){return nl(t)===tP};kr.isSuspense=function(t){return nl(t)===aP};kr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eP||t===iP||t===nP||t===tP||t===aP||t===ZNe||typeof t=="object"&&t!==null&&(t.$$typeof===lP||t.$$typeof===cP||t.$$typeof===rP||t.$$typeof===sP||t.$$typeof===oP||t.$$typeof===exe||t.$$typeof===txe||t.$$typeof===nxe||t.$$typeof===XNe)};kr.typeOf=nl;bne.exports=kr;var rxe=bne.exports,Z$=rxe,sxe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ixe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},oxe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ene={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},X$={};X$[Z$.ForwardRef]=oxe;X$[Z$.Memo]=Ene;function cW(t){return Z$.isMemo(t)?Ene:X$[t.$$typeof]||sxe}var axe=Object.defineProperty,cxe=Object.getOwnPropertyNames,lW=Object.getOwnPropertySymbols,lxe=Object.getOwnPropertyDescriptor,uxe=Object.getPrototypeOf,uW=Object.prototype;function Cne(t,e,n){if(typeof e!="string"){if(uW){var r=uxe(e);r&&r!==uW&&Cne(t,r,n)}var s=cxe(e);lW&&(s=s.concat(lW(e)));for(var i=cW(t),o=cW(e),a=0;a<s.length;++a){var c=s[a];if(!ixe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=lxe(e,c);try{axe(t,c,l)}catch{}}}}return t}var dxe=Cne;const hxe=ih(dxe);var _ne={};Object.defineProperty(_ne,"__esModule",{value:!0});_ne.default=fxe;function fxe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function ZN(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zR(){return zR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zR.apply(this,arguments)}function pxe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Xf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gxe(t){var e=function(n){pxe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,ZN(Xf(Xf(i)),"cachedTheme",void 0),ZN(Xf(Xf(i)),"lastOuterTheme",void 0),ZN(Xf(Xf(i)),"lastTheme",void 0),ZN(Xf(Xf(i)),"renderProvider",function(l){var u=i.props.children;return Gc.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?zR({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Gc.createElement(t.Consumer,null,this.renderProvider):null},r}(Gc.Component);return e}function mxe(t){return function(n){var r=Gc.forwardRef(function(s,i){return Gc.createElement(t.Consumer,null,function(o){return Gc.createElement(n,zR({theme:o,ref:i},s))})});return hxe(r,n),r}}function yxe(t){var e=function(){var r=Gc.useContext(t);return r};return e}function wxe(t){return{context:t,withTheme:mxe(t),useTheme:yxe(t),ThemeProvider:gxe(t)}}var Ane=G.createContext();wxe(Ane);var dW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PC=(typeof window>"u"?"undefined":dW(window))==="object"&&(typeof document>"u"?"undefined":dW(document))==="object"&&document.nodeType===9;function KA(t){"@babel/helpers - typeof";return KA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KA(t)}function bxe(t,e){if(KA(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(KA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vxe(t){var e=bxe(t,"string");return KA(e)=="symbol"?e:e+""}function Exe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vxe(r.key),r)}}function e4(t,e,n){return e&&Exe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cU(t,e){return cU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},cU(t,e)}function Sne(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,cU(t,e)}function hW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Cxe={}.constructor;function lU(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(lU);if(t.constructor!==Cxe)return t;var e={};for(var n in t)e[n]=lU(t[n]);return e}function uP(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=lU(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var fW=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},i0=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=fW(e[r]," ");else n=fW(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function OC(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function g1(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function YA(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=OC(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=g1(f+":"+u+i0(p)+";",o))}}else for(var g in a){var m=a[g];m!=null&&(r&&(r+=l),r+=g1(g+":"+u+i0(m)+";",o))}for(var y in e){var w=e[y];w!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=g1(y+":"+u+i0(w)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),g1(""+t+u+"{"+r,o)+g1("}",o))}var _xe=/([[\].#*$><+~=|^:(),"'`\s])/g,pW=typeof CSS<"u"&&CSS.escape,t4=function(t){return pW?pW(t):t.replace(_xe,"\\$1")},Ine=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),uU=function(t){Sne(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(hW(hW(o)),l),o.selectorText="."+t4(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=i0(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Ms({},s,{allowEmpty:!0}):s;return YA(this.selectorText,this.style,a)},e4(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(Ine),Axe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new uU(e,n,r)}},BD={indent:1,children:!0},Sxe=/@([\w-]+)/,Ixe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Sxe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new dP(Ms({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=BD);var s=OC(r),i=s.linebreak;if(r.indent==null&&(r.indent=BD.indent),r.children==null&&(r.children=BD.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Nxe=/@container|@media|@supports\s+/,xxe={onCreateRule:function(e,n,r){return Nxe.test(e)?new Ixe(e,n,r):null}},LD={indent:1,children:!0},Txe=/@keyframes\s+([\w-]+)/,dU=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Txe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:t4(c(this,a)),this.rules=new dP(Ms({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Ms({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=LD);var s=OC(r),i=s.linebreak;if(r.indent==null&&(r.indent=LD.indent),r.children==null&&(r.children=LD.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Rxe=/@keyframes\s+/,kxe=/\$([\w-]+)/g,hU=function(e,n){return typeof e=="string"?e.replace(kxe,function(r,s){return s in n?n[s]:r}):e},gW=function(e,n,r){var s=e[n],i=hU(s,r);i!==s&&(e[n]=i)},Pxe={onCreateRule:function(e,n,r){return typeof e=="string"&&Rxe.test(e)?new dU(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&gW(e,"animation-name",r.keyframes),"animation"in e&&gW(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return hU(e,s.keyframes);case"animation-name":return hU(e,s.keyframes);default:return e}}},Oxe=function(t){Sne(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Ms({},s,{allowEmpty:!0}):s;return YA(this.key,this.style,a)},e}(Ine),Dxe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Oxe(e,n,r):null}},Mxe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=OC(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=YA(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return YA(this.at,this.style,r)},t}(),Bxe=/@font-face/,Lxe={onCreateRule:function(e,n,r){return Bxe.test(e)?new Mxe(e,n,r):null}},Uxe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return YA(this.key,this.style,r)},t}(),$xe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new Uxe(e,n,r):null}},Fxe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),jxe={"@charset":!0,"@import":!0,"@namespace":!0},Wxe={onCreateRule:function(e,n,r){return e in jxe?new Fxe(e,n,r):null}},mW=[Axe,xxe,Pxe,Dxe,Lxe,$xe,Wxe],zxe={process:!0},yW={force:!0,process:!0},dP=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Ms({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+t4(this.classes[p]));var g=uP(p,s,f);if(!g)return null;this.register(g);var m=f.index===void 0?this.index.length:f.index;return this.index.splice(m,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Ms({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof uU?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof dU&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof uU?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof dU&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=zxe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,yW)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,yW)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=OC(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),Nne=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Ms({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new dP(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Hxe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Gxe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=wne(s,["attached"]),a=OC(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},e4(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),O_=new Gxe,fU=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),pU="2f1acc6c3a606b082e5eef5e54414ffb";fU[pU]==null&&(fU[pU]=0);var wW=fU[pU]++,bW=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+wW+a+n:c+i.key+"-"+wW+(a?"-"+a:"")+"-"+n};return r},xne=function(e){var n;return function(){return n||(n=e()),n}},qxe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},Vxe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=i0(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},Kxe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},Yxe=function(e,n){return e.selectorText=n,e.selectorText===n},Tne=xne(function(){return document.querySelector("head")});function Qxe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Jxe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Zxe(t){for(var e=Tne(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Xxe(t){var e=O_.registry;if(e.length>0){var n=Qxe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=Jxe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Zxe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function eTe(t,e){var n=e.insertionPoint,r=Xxe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}Tne().appendChild(t)}var tTe=xne(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),vW=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},EW=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},nTe=function(){var e=document.createElement("style");return e.textContent=`
`,e},rTe=function(){function t(n){this.getPropertyValue=qxe,this.setProperty=Vxe,this.removeProperty=Kxe,this.setSelector=Yxe,this.hasInsertedRules=!1,this.cssRules=[],n&&O_.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||nTe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=tTe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){eTe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=EW(i,s);if(a=vW(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=EW(i,s),d=vW(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof Nne&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),sTe=0,iTe=function(){function t(n){this.id=sTe++,this.version="10.10.0",this.plugins=new Hxe,this.options={id:{minify:!1},createGenerateId:bW,Renderer:PC?rTe:null,plugins:[]},this.generateId=bW({minify:!1});for(var r=0;r<mW.length;r++)this.plugins.use(mW[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Ms({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=O_.index===0?0:O_.index+1);var a=new Nne(r,Ms({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),O_.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Ms({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=uP(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),Rne=function(e){return new iTe(e)},CW=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},e4(t,[{key:"size",get:function(){return this.length}}]),t}(),n4=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function kne(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=kne(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */Rne();var Pne=Date.now(),UD="fnValues"+Pne,$D="fnStyle"+ ++Pne,oTe=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=uP(n,{},s);return i[$D]=r,i},onProcessStyle:function(n,r){if(UD in r||$D in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[UD]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[$D];a&&(o.style=a(n)||{});var c=o[UD];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function aTe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var gb;typeof self<"u"?gb=self:typeof window<"u"?gb=window:typeof global<"u"?gb=global:typeof module<"u"?gb=module:gb=Function("return this")();var _W=aTe(gb),AW=function(e){return e&&e[_W]&&e===e[_W]()},cTe=function(e){return{onCreateRule:function(r,s,i){if(!AW(s))return null;var o=s,a=uP(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!AW(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},lTe=/;\n/,uTe=function(e){for(var n={},r=e.split(lTe),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},dTe=function(e){typeof e.style=="string"&&(e.style=uTe(e.style))};function hTe(){return{onProcessRule:dTe}}var Lg="@global",gU="@global ",fTe=function(){function t(n,r,s){this.type="global",this.at=Lg,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new dP(Ms({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),pTe=function(){function t(n,r,s){this.type="global",this.at=Lg,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(gU.length);this.rule=s.jss.createRule(i,r,Ms({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),gTe=/\s*,\s*/g;function One(t,e){for(var n=t.split(gTe),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function mTe(t,e){var n=t.options,r=t.style,s=r?r[Lg]:null;if(s){for(var i in s)e.addRule(i,s[i],Ms({},n,{selector:One(i,t.selector)}));delete r[Lg]}}function yTe(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Lg.length)!==Lg)){var i=One(s.substr(Lg.length),t.selector);e.addRule(i,r[s],Ms({},n,{selector:i})),delete r[s]}}function wTe(){function t(n,r,s){if(!n)return null;if(n===Lg)return new fTe(n,r,s);if(n[0]==="@"&&n.substr(0,gU.length)===gU)return new pTe(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(mTe(n,r),yTe(n,r))}return{onCreateRule:t,onProcessRule:e}}var lT=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},FD="extendCurrValue"+Date.now();function bTe(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];vy(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Ms({},t,{extend:l}):t.extend[c];vy(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){vy(t.extend.extend,e,n,r);continue}if(lT(t.extend[d])){d in r||(r[d]={}),vy(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function vTe(t,e,n,r){for(var s in t)if(s!=="extend"){if(lT(r[s])&&lT(t[s])){vy(t[s],e,n,r[s]);continue}if(lT(t[s])){r[s]=vy(t[s],e,n);continue}r[s]=t[s]}}function vy(t,e,n,r){return r===void 0&&(r={}),bTe(t,e,n,r),vTe(t,e,n,r),r}function ETe(){function t(n,r,s){return"extend"in n?vy(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[FD])s.prop(i,null);return s[FD]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[FD]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var SW=/\s*,\s*/g,CTe=/&/g,_Te=/\$([\w-]+)/g;function ATe(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(SW),a=s.split(SW),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(CTe,u):u+" "+h}return c}function n(s,i,o){if(o)return Ms({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Ms({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(_Te,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Ms({},l,{selector:p})):c.addRule(g,s[d],Ms({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function mU(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=mU(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return mU(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function STe(){function t(e,n){return"composes"in e&&(mU(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var ITe=/[A-Z]/g,NTe=/^ms-/,jD={};function xTe(t){return"-"+t.toLowerCase()}function Dne(t){if(jD.hasOwnProperty(t))return jD[t];var e=t.replace(ITe,xTe);return jD[t]=NTe.test(e)?"-"+e:e}function HR(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:Dne(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(HR):e.fallbacks=HR(t.fallbacks)),e}function TTe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=HR(n[r]);return n}return HR(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=Dne(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Ae=n4&&CSS?CSS.px:"px",XN=n4&&CSS?CSS.ms:"ms",Lw=n4&&CSS?CSS.percent:"%",RTe={"animation-delay":XN,"animation-duration":XN,"background-position":Ae,"background-position-x":Ae,"background-position-y":Ae,"background-size":Ae,border:Ae,"border-bottom":Ae,"border-bottom-left-radius":Ae,"border-bottom-right-radius":Ae,"border-bottom-width":Ae,"border-left":Ae,"border-left-width":Ae,"border-radius":Ae,"border-right":Ae,"border-right-width":Ae,"border-top":Ae,"border-top-left-radius":Ae,"border-top-right-radius":Ae,"border-top-width":Ae,"border-width":Ae,"border-block":Ae,"border-block-end":Ae,"border-block-end-width":Ae,"border-block-start":Ae,"border-block-start-width":Ae,"border-block-width":Ae,"border-inline":Ae,"border-inline-end":Ae,"border-inline-end-width":Ae,"border-inline-start":Ae,"border-inline-start-width":Ae,"border-inline-width":Ae,"border-start-start-radius":Ae,"border-start-end-radius":Ae,"border-end-start-radius":Ae,"border-end-end-radius":Ae,margin:Ae,"margin-bottom":Ae,"margin-left":Ae,"margin-right":Ae,"margin-top":Ae,"margin-block":Ae,"margin-block-end":Ae,"margin-block-start":Ae,"margin-inline":Ae,"margin-inline-end":Ae,"margin-inline-start":Ae,padding:Ae,"padding-bottom":Ae,"padding-left":Ae,"padding-right":Ae,"padding-top":Ae,"padding-block":Ae,"padding-block-end":Ae,"padding-block-start":Ae,"padding-inline":Ae,"padding-inline-end":Ae,"padding-inline-start":Ae,"mask-position-x":Ae,"mask-position-y":Ae,"mask-size":Ae,height:Ae,width:Ae,"min-height":Ae,"max-height":Ae,"min-width":Ae,"max-width":Ae,bottom:Ae,left:Ae,top:Ae,right:Ae,inset:Ae,"inset-block":Ae,"inset-block-end":Ae,"inset-block-start":Ae,"inset-inline":Ae,"inset-inline-end":Ae,"inset-inline-start":Ae,"box-shadow":Ae,"text-shadow":Ae,"column-gap":Ae,"column-rule":Ae,"column-rule-width":Ae,"column-width":Ae,"font-size":Ae,"font-size-delta":Ae,"letter-spacing":Ae,"text-decoration-thickness":Ae,"text-indent":Ae,"text-stroke":Ae,"text-stroke-width":Ae,"word-spacing":Ae,motion:Ae,"motion-offset":Ae,outline:Ae,"outline-offset":Ae,"outline-width":Ae,perspective:Ae,"perspective-origin-x":Lw,"perspective-origin-y":Lw,"transform-origin":Lw,"transform-origin-x":Lw,"transform-origin-y":Lw,"transform-origin-z":Lw,"transition-delay":XN,"transition-duration":XN,"vertical-align":Ae,"flex-basis":Ae,"shape-margin":Ae,size:Ae,gap:Ae,grid:Ae,"grid-gap":Ae,"row-gap":Ae,"grid-row-gap":Ae,"grid-column-gap":Ae,"grid-template-rows":Ae,"grid-template-columns":Ae,"grid-auto-rows":Ae,"grid-auto-columns":Ae,"box-shadow-x":Ae,"box-shadow-y":Ae,"box-shadow-blur":Ae,"box-shadow-spread":Ae,"font-line-height":Ae,"text-shadow-x":Ae,"text-shadow-y":Ae,"text-shadow-blur":Ae};function Mne(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var kTe=Mne(RTe);function D_(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=D_(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=D_(s,e[s],n);else for(var i in e)e[i]=D_(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||kTe[t];return o&&!(e===0&&o===Ae)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function PTe(t){t===void 0&&(t={});var e=Mne(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=D_(o,s[o],e);return s}function r(s,i){return D_(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var OTe={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},DTe={position:!0,size:!0},ex={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},WD={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function MTe(t,e,n){return t.map(function(r){return Lne(r,e,n,!1,!0)})}function Bne(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?Bne(t[0],e,n,r):typeof t[0]=="object"?MTe(t,e,r):[t]}function Lne(t,e,n,r,s){if(!(ex[e]||WD[e]))return[];var i=[];if(WD[e]&&(t=BTe(t,n,WD[e],r)),Object.keys(t).length)for(var o in ex[e]){if(t[o]){Array.isArray(t[o])?i.push(DTe[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}ex[e][o]!=null&&i.push(ex[e][o])}return!i.length||s?i:[i]}function BTe(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=QA((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function QA(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=QA(t.fallbacks[i],e,!0);continue}t[r]=Bne(s,r,OTe,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=QA(t.fallbacks,e,!0);continue}t[r]=Lne(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function LTe(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=QA(e[r],n);return e}return QA(e,n)}return{onProcessStyle:t}}function yU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function UTe(t){if(Array.isArray(t))return yU(t)}function $Te(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FTe(t,e){if(t){if(typeof t=="string")return yU(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yU(t,e):void 0}}function jTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WTe(t){return UTe(t)||$Te(t)||FTe(t)||jTe()}var V1="",wU="",Une="",$ne="",zTe=PC&&"ontouchstart"in document.documentElement;if(PC){var zD={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},HTe=document.createElement("p"),HD=HTe.style,GTe="Transform";for(var GD in zD)if(GD+GTe in HD){V1=GD,wU=zD[GD];break}V1==="Webkit"&&"msHyphens"in HD&&(V1="ms",wU=zD.ms,$ne="edge"),V1==="Webkit"&&"-apple-trailing-word"in HD&&(Une="apple")}var Cn={js:V1,css:wU,vendor:Une,browser:$ne,isTouch:zTe};function qTe(t){return t[1]==="-"||Cn.js==="ms"?t:"@"+Cn.css+"keyframes"+t.substr(10)}var VTe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Cn.js==="ms"?"-webkit-"+e:Cn.css+e}},KTe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Cn.js==="Webkit"?Cn.css+"print-"+e:e}},YTe=/[-\s]+(.)?/g;function QTe(t,e){return e?e.toUpperCase():""}function r4(t){return t.replace(YTe,QTe)}function nm(t){return r4("-"+t)}var JTe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Cn.js==="Webkit"){var r="mask-image";if(r4(r)in n)return e;if(Cn.js+nm(r)in n)return Cn.css+e}return e}},ZTe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Cn.vendor==="apple"&&!Cn.isTouch?Cn.css+e:e}},XTe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Cn.css+e}},eRe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Cn.css+e}},tRe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Cn.js==="Webkit"||Cn.js==="ms"&&Cn.browser!=="edge"?Cn.css+e:e}},nRe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Cn.js==="Moz"||Cn.js==="ms"||Cn.vendor==="apple"?Cn.css+e:e}},rRe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Cn.js==="Webkit"){var r="WebkitColumn"+nm(e);return r in n?Cn.css+"column-"+e:!1}if(Cn.js==="Moz"){var s="page"+nm(e);return s in n?"page-"+e:!1}return!1}},sRe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Cn.js==="Moz")return e;var r=e.replace("-inline","");return Cn.js+nm(r)in n?Cn.css+r:!1}},iRe={supportedProperty:function(e,n){return r4(e)in n?e:!1}},oRe={supportedProperty:function(e,n){var r=nm(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Cn.js+r in n?Cn.css+e:Cn.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},aRe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Cn.js==="ms"?""+Cn.css+e:e}},cRe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Cn.js==="ms"?Cn.css+"scroll-chaining":e}},lRe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},uRe={supportedProperty:function(e,n){var r=lRe[e];return r&&Cn.js+nm(r)in n?Cn.css+r:!1}},Fne={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},dRe=Object.keys(Fne),hRe=function(e){return Cn.css+e},fRe={supportedProperty:function(e,n,r){var s=r.multiple;if(dRe.indexOf(e)>-1){var i=Fne[e];if(!Array.isArray(i))return Cn.js+nm(i)in n?Cn.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Cn.js+nm(i[0])in n))return!1;return i.map(hRe)}return!1}},jne=[VTe,KTe,JTe,ZTe,XTe,eRe,tRe,nRe,rRe,sRe,iRe,oRe,aRe,cRe,uRe,fRe],IW=jne.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),pRe=jne.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,WTe(e.noPrefill)),t},[]),K1,Xm={};if(PC){K1=document.createElement("p");var qD=window.getComputedStyle(document.documentElement,"");for(var VD in qD)isNaN(VD)||(Xm[qD[VD]]=qD[VD]);pRe.forEach(function(t){return delete Xm[t]})}function bU(t,e){if(e===void 0&&(e={}),!K1)return t;if(Xm[t]!=null)return Xm[t];(t==="transition"||t==="transform")&&(e[t]=t in K1.style);for(var n=0;n<IW.length&&(Xm[t]=IW[n](t,K1.style,e),!Xm[t]);n++);try{K1.style[t]=""}catch{return!1}return Xm[t]}var Uw={},gRe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},mRe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,bp;function yRe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?bU(e):", "+bU(n);return r||e||n}PC&&(bp=document.createElement("p"));function NW(t,e){var n=e;if(!bp||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Uw[r]!=null)return Uw[r];try{bp.style[t]=n}catch{return Uw[r]=!1,!1}if(gRe[t])n=n.replace(mRe,yRe);else if(bp.style[t]===""&&(n=Cn.css+n,n==="-ms-flex"&&(bp.style[t]="-ms-flexbox"),bp.style[t]=n,bp.style[t]===""))return Uw[r]=!1,!1;return bp.style[t]="",Uw[r]=n,Uw[r]}function wRe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=qTe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=bU(i);c&&c!==i&&(a=!0);var l=!1,u=NW(c,i0(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return NW(i,i0(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function bRe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var vRe=function(e){return e===void 0&&(e={}),{plugins:[oTe(),cTe(e.observable),hTe(),wTe(),ETe(),ATe(),STe(),TTe(),PTe(e.defaultUnit),LTe(),wRe(),bRe()]}},ERe=Number.MIN_SAFE_INTEGER||-1e9,CRe=function(){return ERe++},_Re=G.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!PC}),xW=new Map,s4=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new CW),r[n];var s=xW.get(n);return s||(s=new CW,xW.set(n,s)),s},TW=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=s4(r,s);o.manage(i),r.registry&&r.registry.add(n)}},ARe=function(e){if(e.sheet){var n=s4(e.context,e.index);n.unmanage(e.theme)}},SRe=Rne(vRe()),Wne=new WeakMap,zne=function(e){return Wne.get(e)},IRe=function(e,n){Wne.set(e,n)},NRe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function xRe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Ms({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var TRe=function(e){if(!e.context.disableStylesGeneration){var n=s4(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||SRe,i=NRe(e),o=kne(i),a=s.createStyleSheet(i,xRe(e,o!==null));return IRe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},RRe=function(e,n){for(var r in n)e.deleteRule(n[r])},kRe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},PRe=function(e,n){var r=zne(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},ORe=function(e,n){if(!n)return e.classes;var r=zne(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function RW(t){return t?G.useEffect:Gc.useInsertionEffect||G.useLayoutEffect}var KD={},Vu=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?CRe():s,o=r.theming,a=r.name,c=wne(r,["index","theming","name"]),l=o&&o.context||Ane,u=function(f){return typeof e=="function"&&(f||G.useContext(l))||KD},d={};return function(f){var p=G.useRef(!0),g=G.useContext(_Re),m=u(f&&f.theme),y=G.useMemo(function(){var S=TRe({context:g,styles:e,name:a,theme:m,index:i,sheetOptions:c});return S&&g.isSSR&&TW({index:i,context:g,sheet:S,theme:m}),[S,S?PRe(S,f):null]},[g,m]),w=y[0],C=y[1];RW(g.isSSR)(function(){w&&C&&!p.current&&kRe(f,w,C)},[f]),RW(g.isSSR)(function(){return w&&TW({index:i,context:g,sheet:w,theme:m}),function(){w&&(ARe({index:i,context:g,sheet:w,theme:m}),C&&RRe(w,C))}},[w]);var N=G.useMemo(function(){return w&&C?ORe(w,C):d},[w,C]);return G.useDebugValue(N),G.useDebugValue(m===KD?"No theme":m),G.useEffect(function(){p.current=!1}),N}};const DRe=Vu({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function YD({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=DRe(),d=G.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=b.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[b.jsx("img",{src:t,alt:e,className:u.iconImage}),b.jsx("span",{className:u.iconLabel,children:e})]});return o?f:b.jsx(BI,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const MRe=Vu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function gl({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=MRe({isOpen:e}),u=G.useRef(null),d=()=>{r&&r(t)};return b.jsx(BI,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:b.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[b.jsxs("div",{className:l.header,children:[b.jsx("span",{children:i||t.replace("-popup","")}),b.jsxs("div",{className:l.titleBarButtons,children:[b.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),b.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:l.content,children:s})]})})}const QD=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],BRe=80,LRe=80,URe=10,$Re=10,FRe=10,jRe=10,WRe=({onIconClick:t})=>{const e=QD.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:FRe+d*(BRe+URe),y:jRe+u*(LRe+$Re)},u++,u>=4&&(u=0,d++)}),l},[r,s]=G.useState(n()),[i,o]=G.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return b.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:b.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>b.jsx(YD,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&b.jsx(gl,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:QD.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>b.jsx(YD,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&b.jsx(gl,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:QD.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>b.jsx(YD,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},zRe=Vu({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),HRe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=G.useState(!1),[o,a]=G.useState(new Date),c=zRe({isOpen:s});G.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return b.jsxs("div",{className:c.taskbar,children:[b.jsxs("div",{className:c.leftSection,children:[b.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),b.jsx("div",{className:c.windows,children:t.map(h=>b.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),b.jsxs("div",{className:c.rightSection,children:[b.jsxs("div",{className:c.statusSection,children:[b.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:b.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),b.jsx("div",{className:c.clock,children:l(o)})]}),s&&b.jsxs("div",{className:c.menu,children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function Hne(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function i4(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function Gne(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function o4(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function qne(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function Vne(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,m,y,w,C,N,S,P,O,L,M,W,F,V,$,v,E,_,R,x,B,j,U,I,H,re;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(m=u.content)==null?void 0:m.metadata)==null?void 0:y.name)||((N=(C=(w=u.content)==null?void 0:w.files)==null?void 0:C[0])==null?void 0:N.name)||`#${(S=u.mint)==null?void 0:S.slice(0,8)}`,image_url:((L=(O=(P=u.content)==null?void 0:P.files)==null?void 0:O[0])==null?void 0:L.uri)||((W=(M=u.content)==null?void 0:M.metadata)==null?void 0:W.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((V=(F=u.content)==null?void 0:F.metadata)==null?void 0:V.description)||"",image:((E=(v=($=u.content)==null?void 0:$.files)==null?void 0:v[0])==null?void 0:E.uri)||((R=(_=u.content)==null?void 0:_.metadata)==null?void 0:R.image)||"",image_url_shrunk:((j=(B=(x=u.content)==null?void 0:x.files)==null?void 0:B[0])==null?void 0:j.uri)||((I=(U=u.content)==null?void 0:U.metadata)==null?void 0:I.image)||"",animation_url:((re=(H=u.content)==null?void 0:H.metadata)==null?void 0:re.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function GRe(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,m,y,w,C,N,S,P,O,L,M,W,F,V,$,v,E,_,R,x,B,j,U,I,H,re,ne,ge;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(m=u.content)==null?void 0:m.metadata)==null?void 0:y.name)||((N=(C=(w=u.content)==null?void 0:w.files)==null?void 0:C[0])==null?void 0:N.name)||`#${(S=u.mint)==null?void 0:S.slice(0,8)}`,image_url:((L=(O=(P=u.content)==null?void 0:P.files)==null?void 0:O[0])==null?void 0:L.uri)||((W=(M=u.content)==null?void 0:M.metadata)==null?void 0:W.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((V=(F=u.content)==null?void 0:F.metadata)==null?void 0:V.description)||"",image:((E=(v=($=u.content)==null?void 0:$.files)==null?void 0:v[0])==null?void 0:E.uri)||((R=(_=u.content)==null?void 0:_.metadata)==null?void 0:R.image)||"",image_url_shrunk:((j=(B=(x=u.content)==null?void 0:x.files)==null?void 0:B[0])==null?void 0:j.uri)||((I=(U=u.content)==null?void 0:U.metadata)==null?void 0:I.image)||"",animation_url:((re=(H=u.content)==null?void 0:H.metadata)==null?void 0:re.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ge=(ne=u.grouping)==null?void 0:ne.find(te=>te.group_key==="collection"))==null?void 0:ge.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const qRe=Vu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),VRe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=qRe({isOpen:t}),i=G.useRef(null),[o,a]=G.useState([]),[c,l]=G.useState(!1),[u,d]=G.useState(!1),[h,f]=G.useState({}),[p,g]=G.useState(null),{data:m}=zte();G.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const P=await Hne(r);a(P);const O={};P.forEach(L=>{O[L.id]=0}),f(O)}catch(P){g(P.message)}finally{l(!1)}},w=(P,O)=>{f(L=>({...L,[P]:Math.max(0,O)}))},C=async()=>{const P=Object.entries(h).filter(([,O])=>O>0).map(([O,L])=>({id:O,quantity:L}));if(P.length===0){g("Please select at least one item to mint");return}if(!m){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const O=await Gne(r,P);if(console.log("Mint API result:",O),O.success&&O.mintTransaction){console.log("Got mint transaction:",O.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const L=await m.sendTransaction({to:O.mintTransaction.to,value:BigInt(O.mintTransaction.value),data:O.mintTransaction.data});console.log("Transaction sent successfully:",L),alert(`NFT Minted Successfully: Transaction Hash - ${L}`),e()}catch(L){console.error("Transaction sending failed:",L),g("Transaction failed: "+L.message)}}else throw new Error(O.message||"Could not retrieve minting transaction.")}catch(O){console.error("Minting failed:",O),g("Minting failed: "+O.message)}finally{d(!1)}},N=(P,O)=>`${parseFloat(P)} ${O}`,S=()=>{n&&n()};return t?b.jsx(BI,{nodeRef:i,handle:`.${s.header}`,children:b.jsxs("div",{ref:i,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"Mint Pixelawbster"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:S,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsxs("div",{className:s.content,children:[p&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?b.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{children:"Available Lists:"}),o.map(P=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:P.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",N(P.token_price,P.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",P.wallet_limit===4294967295?"Unlimited":P.wallet_limit," per wallet"]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),b.jsx("input",{type:"number",min:"0",max:P.wallet_limit===4294967295?999:P.wallet_limit,value:h[P.id]||0,onChange:O=>w(P.id,parseInt(O.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},P.id))]}),b.jsx("button",{onClick:()=>void C(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},Kne=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",Yne=({src:t,alt:e,style:n})=>{const[r,s]=G.useState(t),[i,o]=G.useState(!1),[a,c]=G.useState(0);G.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?b.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):b.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},KRe=Vu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),YRe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},QRe=({nft:t,onClose:e})=>{const n=KRe(),r=G.useRef(null),s=YRe(t.attributes);return b.jsx(BI,{nodeRef:r,handle:`.${n.header}`,children:b.jsxs("div",{className:n.popup,ref:r,children:[b.jsxs("div",{className:n.header,children:[b.jsxs("span",{children:[t.name," - Details"]}),b.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),b.jsxs("div",{className:n.content,children:[b.jsx(Yne,{src:Kne(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),b.jsx("h3",{children:"Traits"}),b.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):b.jsx("li",{children:"No traits found."})})]})]})})},JRe=Symbol(),kW=Object.getPrototypeOf,vU=new WeakMap,ZRe=t=>t&&(vU.has(t)?vU.get(t):kW(t)===Object.prototype||kW(t)===Array.prototype),XRe=t=>ZRe(t)&&t[JRe]||null,PW=(t,e=!0)=>{vU.set(t,e)},GR={},JD=t=>typeof t=="object"&&t!==null,Sp=new WeakMap,Y1=new WeakSet,eke=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>JD(l)&&!Y1.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return PW(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:m}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:m,configurable:!0};if(Y1.has(g))PW(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Sp.has(g)){const[w,C]=Sp.get(g);y.value=i(w,C(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!JD(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(M,W=++a[0])=>{d!==W&&(d=W,h.forEach(F=>F(M,W)))};let p=a[1];const g=(M=++a[1])=>(p!==M&&!h.size&&(p=M,y.forEach(([W])=>{const F=W[1](M);F>d&&(d=F)})),d),m=M=>(W,F)=>{const V=[...W];V[1]=[M,...V[1]],f(V,F)},y=new Map,w=(M,W)=>{if((GR?"production":void 0)!=="production"&&y.has(M))throw new Error("prop listener already exists");if(h.size){const F=W[3](m(M));y.set(M,[W,F])}else y.set(M,[W])},C=M=>{var W;const F=y.get(M);F&&(y.delete(M),(W=F[1])==null||W.call(F))},N=M=>(h.add(M),h.size===1&&y.forEach(([F,V],$)=>{if((GR?"production":void 0)!=="production"&&V)throw new Error("remove already exists");const v=F[3](m($));y.set($,[F,v])}),()=>{h.delete(M),h.size===0&&y.forEach(([F,V],$)=>{V&&(V(),y.set($,[F]))})}),S=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),O=e(S,{deleteProperty(M,W){const F=Reflect.get(M,W);C(W);const V=Reflect.deleteProperty(M,W);return V&&f(["delete",[W],F]),V},set(M,W,F,V){const $=Reflect.has(M,W),v=Reflect.get(M,W,V);if($&&(t(v,F)||o.has(F)&&t(v,o.get(F))))return!0;C(W),JD(F)&&(F=XRe(F)||F);let E=F;if(F instanceof Promise)F.then(_=>{F.status="fulfilled",F.value=_,f(["resolve",[W],_])}).catch(_=>{F.status="rejected",F.reason=_,f(["reject",[W],_])});else{!Sp.has(F)&&n(F)&&(E=c(F));const _=!Y1.has(E)&&Sp.get(E);_&&w(W,_)}return Reflect.set(M,W,E,V),f(["set",[W],F,v]),!0}});o.set(l,O);const L=[S,g,i,N];return Sp.set(O,L),Reflect.ownKeys(l).forEach(M=>{const W=Object.getOwnPropertyDescriptor(l,M);"value"in W&&(O[M]=l[M],delete W.value,delete W.writable),Object.defineProperty(S,M,W)}),O})=>[c,Sp,Y1,t,e,n,r,s,i,o,a],[tke]=eke();function ms(t={}){return tke(t)}function zo(t,e,n){const r=Sp.get(t);(GR?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function JA(t,e){const n=Sp.get(t);(GR?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function O0(t){return Y1.add(t),t}function Go(t,e,n,r){let s=t[e];return zo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function nke(t){const e=ms({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var OW={};const ut={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof OW<"u"?OW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},Qne={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ut.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var rke=20,ske=1,D0=1e6,DW=1e6,ike=-7,oke=21,ake=!1,LI="[big.js] ",ow=LI+"Invalid ",hP=ow+"decimal places",cke=ow+"rounding mode",Jne=LI+"Division by zero",Tr={},Hd=void 0,lke=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Zne(){function t(e){var n=this;if(!(n instanceof t))return e===Hd?Zne():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(ow+"value");e=e===0&&1/e<0?"-0":String(e)}uke(n,e)}n.constructor=t}return t.prototype=Tr,t.DP=rke,t.RM=ske,t.NE=ike,t.PE=oke,t.strict=ake,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function uke(t,e){var n,r,s;if(!lke.test(e))throw Error(ow+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function aw(t,e,n,r){var s=t.c;if(n===Hd&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(cke);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Hd))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Hd||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function cw(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Tr.abs=function(){var t=new this.constructor(this);return t.s=1,t};Tr.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Tr.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>D0)throw Error(hP);if(!s[0])throw Error(Jne);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),m=g.length,y=t,w=y.c=[],C=0,N=o+(y.e=e.e-t.e)+1;for(y.s=i,i=N<0?0:N,h.unshift(0);m++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(m=g.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=m==a?s:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}w[C++]=u?l:++l,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Hd)&&i--);return!w[0]&&C!=1&&(w.shift(),y.e--,N--),C>N&&aw(y,N,n.RM,g[0]!==Hd),y};Tr.eq=function(t){return this.cmp(t)===0};Tr.gt=function(t){return this.cmp(t)>0};Tr.gte=function(t){return this.cmp(t)>-1};Tr.lt=function(t){return this.cmp(t)<0};Tr.lte=function(t){return this.cmp(t)<1};Tr.minus=Tr.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Tr.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(Jne);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Tr.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Tr.plus=Tr.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Tr.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-DW||t>DW)throw Error(ow+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Tr.prec=function(t,e){if(t!==~~t||t<1||t>D0)throw Error(ow+"precision");return aw(new this.constructor(this),t,e)};Tr.round=function(t,e){if(t===Hd)t=0;else if(t!==~~t||t<-D0||t>D0)throw Error(hP);return aw(new this.constructor(this),t+this.e+1,e)};Tr.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(LI+"No square root");i=Math.sqrt(+cw(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return aw(t,(s.DP-=4)+t.e+1,s.RM)};Tr.times=Tr.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Tr.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Hd){if(t!==~~t||t<0||t>D0)throw Error(hP);for(n=aw(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return cw(n,!0,!!r)};Tr.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Hd){if(t!==~~t||t<0||t>D0)throw Error(hP);for(n=aw(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return cw(n,!1,!!r)};Tr[Symbol.for("nodejs.util.inspect.custom")]=Tr.toJSON=Tr.toString=function(){var t=this,e=t.constructor;return cw(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Tr.toNumber=function(){var t=+cw(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(LI+"Imprecise conversion");return t};Tr.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Hd){if(t!==~~t||t<1||t>D0)throw Error(ow+"precision");for(n=aw(new r(n),t,e);n.c.length<t;)n.c.push(0)}return cw(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Tr.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(LI+"valueOf disallowed");return cw(t,t.e<=e.NE||t.e>=e.PE,!0)};var ia=Zne();const dke={bigNumber(t){return t?new ia(t):new ia(0)},multiply(t,e){if(t===void 0||e===void 0)return new ia(0);const n=new ia(t),r=new ia(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},hke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],fke=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],pke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],gke={getERC20Abi:t=>ut.USDT_CONTRACT_ADDRESSES.includes(t)?pke:hke,getSwapAbi:()=>fke},ep={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},wn={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function ZD(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const un={setItem(t,e){Q1()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Q1())return localStorage.getItem(t)||void 0},removeItem(t){Q1()&&localStorage.removeItem(t)},clear(){Q1()&&localStorage.clear()}};function Q1(){return typeof window<"u"&&typeof localStorage<"u"}function af(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var MW={};const XD=(typeof process<"u"&&typeof MW<"u"?MW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Xne=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],mke="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",$r={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:XD,SECURE_SITE_DASHBOARD:`${XD}/dashboard`,SECURE_SITE_FAVICON:`${XD}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},bt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=bt.getActiveNamespace(),e=bt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{un.setItem(wn.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=un.getItem(wn.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{un.removeItem(wn.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{un.setItem(wn.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{un.setItem(wn.ACTIVE_CAIP_NETWORK_ID,t),bt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return un.getItem(wn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{un.removeItem(wn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=ZD(t);un.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=bt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),un.setItem(wn.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=un.getItem(wn.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=ZD(t);un.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return un.getItem(wn.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=ZD(t);return un.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{un.setItem(wn.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return un.getItem(wn.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{un.removeItem(wn.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return un.getItem(wn.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=un.getItem(wn.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{un.setItem(wn.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return un.getItem(wn.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=un.getItem(wn.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));un.setItem(wn.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=bt.getConnectedNamespaces();e.includes(t)||(e.push(t),bt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=bt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),bt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return un.getItem(wn.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{un.setItem(wn.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{un.removeItem(wn.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=un.getItem(wn.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=bt.getBalanceCache();un.setItem(wn.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=bt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;bt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=bt.getBalanceCache();e[t.caipAddress]=t,un.setItem(wn.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=un.getItem(wn.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=bt.getBalanceCache();un.setItem(wn.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=bt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),bt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=bt.getNativeBalanceCache();e[t.caipAddress]=t,un.setItem(wn.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=un.getItem(wn.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=bt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;bt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=bt.getEnsCache();e[t.address]=t,un.setItem(wn.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=bt.getEnsCache();un.setItem(wn.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=un.getItem(wn.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=bt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;bt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=bt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},un.setItem(wn.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=bt.getIdentityCache();un.setItem(wn.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{un.removeItem(wn.PORTFOLIO_CACHE),un.removeItem(wn.NATIVE_BALANCE_CACHE),un.removeItem(wn.ENS_CACHE),un.removeItem(wn.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{un.setItem(wn.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=un.getItem(wn.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...bt.getConnections(),[e]:t};un.setItem(wn.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=un.getItem(wn.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},Bt={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Bt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=$r.TEN_SEC_MS:!0},isAllowedRetry(t,e=$r.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Bt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+$r.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Bt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Bt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?bt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Bt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ut.W3M_API_URL},getBlockchainApiUrl(){return ut.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ut.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?$r.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ut.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function m1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let UI=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await m1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await m1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await m1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await m1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await m1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const yke={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?$r.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Bt.isTelegram()){if(Bt.isIos())return t.filter(e=>e!=="google");if(Bt.isMac())return t.filter(e=>e!=="x");if(Bt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Wt=ms({features:$r.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:$r.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Oe={state:Wt,subscribeKey(t,e){return Go(Wt,t,e)},setOptions(t){Object.assign(Wt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Wt.remoteFeatures,...t};Wt.remoteFeatures=e,(n=Wt.remoteFeatures)!=null&&n.socials&&(Wt.remoteFeatures.socials=yke.filterSocialsByPlatform(Wt.remoteFeatures.socials))},setFeatures(t){if(!t)return;Wt.features||(Wt.features=$r.DEFAULT_FEATURES);const e={...Wt.features,...t};Wt.features=e},setProjectId(t){Wt.projectId=t},setCustomRpcUrls(t){Wt.customRpcUrls=t},setAllWallets(t){Wt.allWallets=t},setIncludeWalletIds(t){Wt.includeWalletIds=t},setExcludeWalletIds(t){Wt.excludeWalletIds=t},setFeaturedWalletIds(t){Wt.featuredWalletIds=t},setTokens(t){Wt.tokens=t},setTermsConditionsUrl(t){Wt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Wt.privacyPolicyUrl=t},setCustomWallets(t){Wt.customWallets=t},setIsSiweEnabled(t){Wt.isSiweEnabled=t},setIsUniversalProvider(t){Wt.isUniversalProvider=t},setSdkVersion(t){Wt.sdkVersion=t},setMetadata(t){Wt.metadata=t},setDisableAppend(t){Wt.disableAppend=t},setEIP6963Enabled(t){Wt.enableEIP6963=t},setDebug(t){Wt.debug=t},setEnableWalletConnect(t){Wt.enableWalletConnect=t},setEnableWalletGuide(t){Wt.enableWalletGuide=t},setEnableAuthLogger(t){Wt.enableAuthLogger=t},setEnableWallets(t){Wt.enableWallets=t},setPreferUniversalLinks(t){Wt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Wt.hasMultipleAddresses=t},setSIWX(t){Wt.siwx=t},setConnectMethodsOrder(t){Wt.features={...Wt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Wt.features={...Wt.features,walletFeaturesOrder:t}},setSocialsOrder(t){Wt.remoteFeatures={...Wt.remoteFeatures,socials:t}},setCollapseWallets(t){Wt.features={...Wt.features,collapseWallets:t}},setEnableEmbedded(t){Wt.enableEmbedded=t},setAllowUnsupportedChain(t){Wt.allowUnsupportedChain=t},setManualWCControl(t){Wt.manualWCControl=t},setEnableNetworkSwitch(t){Wt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Wt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Wt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Wt.universalProviderConfigOverride},getSnapshot(){return JA(Wt)}},wke=Object.freeze({enabled:!0,events:[]}),bke=new UI({baseUrl:Bt.getAnalyticsUrl(),clientId:null}),vke=5,Eke=60*1e3,tp=ms({...wke}),Cke={state:tp,subscribeKey(t,e){return Go(tp,t,e)},async sendError(t,e){if(!tp.enabled)return;const n=Date.now();if(tp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Eke}).length>=vke)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};tp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Oe.state;await bke.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Bt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){tp.enabled=!0},disable(){tp.enabled=!1},clearEvents(){tp.events=[]}};let EU=class CU extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,CU.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,CU):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function BW(t,e){const n=t instanceof EU?t:new EU(t instanceof Error?t.message:String(t),e,t);throw Cke.sendError(n,n.category),n}function rl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return BW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return BW(a,e)}},n[r]=i}else n[r]=s}),n}const Nd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},_ke={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Nd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Nd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Nd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Nd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ut.CHAIN.SOLANA&&t===Nd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Nd.COINBASE.url}/dapp?cb_url=${r}`)}},yc=ms({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Ake={state:yc,subscribeNetworkImages(t){return zo(yc.networkImages,()=>t(yc.networkImages))},subscribeKey(t,e){return Go(yc,t,e)},subscribe(t){return zo(yc,()=>t(yc))},setWalletImage(t,e){yc.walletImages[t]=e},setNetworkImage(t,e){yc.networkImages[t]=e},setChainImage(t,e){yc.chainImages[t]=e},setConnectorImage(t,e){yc.connectorImages={...yc.connectorImages,[t]:e}},setTokenImage(t,e){yc.tokenImages[t]=e},setCurrencyImage(t,e){yc.currencyImages[t]=e}},Au=rl(Ake),Ske={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},e3=ms({networkImagePromises:{}}),ere={async fetchWalletImage(t){if(t)return await Lt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(e3.networkImagePromises[t]||(e3.networkImagePromises[t]=Lt._fetchNetworkImage(t)),await e3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Au.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Au.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Au.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Au.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Au.state.connectorImages[t.imageId]},getChainImage(t){return Au.state.networkImages[Ske[t]]}},np=ms({message:"",variant:"info",open:!1}),Ike={state:np,subscribeKey(t,e){return Go(np,t,e)},open(t,e){const{debug:n}=Oe.state,{shortMessage:r,longMessage:s}=t;n&&(np.message=r,np.variant=e,np.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){np.open=!1,np.message="",np.variant="info"}},Md=rl(Ike),Nke=Bt.getAnalyticsUrl(),xke=new UI({baseUrl:Nke,clientId:null}),Tke=["MODAL_CREATED"],gh=ms({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),xs={state:gh,subscribe(t){return zo(gh,()=>t(gh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Oe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=wt.state.address;if(Tke.includes(t.data.event)||typeof window>"u")return;await xke.post({path:"/e",params:xs.getSdkProperties(),body:{eventId:Bt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),gh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ut.HTTP_STATUS_CODES.FORBIDDEN&&!gh.reportedErrors.FORBIDDEN&&(Md.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Q1()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),gh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;gh.timestamp=Date.now(),gh.data=t,(e=Oe.state.features)!=null&&e.analytics&&xs._sendAnalyticsEvent(gh)}},Rke=Bt.getApiUrl(),Sa=new UI({baseUrl:Rke,clientId:null}),kke=40,LW=4,Pke=20,bn=ms({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Lt={state:bn,subscribeKey(t,e){return Go(bn,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Oe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Oe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Sa.baseUrl}/getWalletImage/${t}`,n=await Sa.getBlob({path:e,params:Lt._getSdkProperties()});Au.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Sa.baseUrl}/public/getAssetImage/${t}`,n=await Sa.getBlob({path:e,params:Lt._getSdkProperties()});Au.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Sa.baseUrl}/public/getAssetImage/${t}`,n=await Sa.getBlob({path:e,params:Lt._getSdkProperties()});Au.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Sa.baseUrl}/public/getCurrencyImage/${t}`,n=await Sa.getBlob({path:e,params:Lt._getSdkProperties()});Au.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Sa.baseUrl}/public/getTokenImage/${t}`,n=await Sa.getBlob({path:e,params:Lt._getSdkProperties()});Au.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Bt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Nd.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Nd.SOLFLARE.id||n.id===Nd.PHANTOM.id)):t},async fetchProjectConfig(){return(await Sa.get({path:"/appkit/v1/config",params:Lt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Sa.get({path:"/projects/v1/origins",params:Lt._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!ere.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Lt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=lt.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Lt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Lt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Lt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Lt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Nd).map(o=>o.id));const r=await Sa.get({path:"/getWallets",params:{...Lt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Lt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Oe.state;if(t!=null&&t.length){const e={...Lt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??LW,include:t},{data:n}=await Lt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Lt._fetchWalletImage(i))),bn.featured=r,bn.allFeatured=r}},async fetchRecommendedWallets(){try{bn.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Oe.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:LW,include:t,exclude:r,chains:s},{data:o,count:a}=await Lt.fetchWallets(i),c=bt.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Lt._fetchWalletImage(d))),bn.recommended=o,bn.allRecommended=o,bn.count=a??0}catch{}finally{bn.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Oe.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...bn.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:kke,include:e,exclude:i,chains:s},{data:a,count:c}=await Lt.fetchWallets(o),l=a.slice(0,Pke).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Lt._fetchWalletImage(u))),bn.wallets=Bt.uniqueBy([...bn.wallets,...Lt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),bn.count=c>bn.count?c:bn.count,bn.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Lt.fetchWallets(e);n&&n.forEach(r=>{bn.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Oe.state,s=J.getRequestedCaipNetworkIds().join(",");bn.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Lt.fetchWallets(i);xs.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Lt._fetchWalletImage(c)),Bt.wait(300)]),bn.search=Lt._filterOutExtensions(o)},initPromise(t,e){const n=bn.promises[t];return n||(bn.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Lt.initPromise("connectorImages",Lt.fetchConnectorImages),e&&Lt.initPromise("featuredWallets",Lt.fetchFeaturedWallets),n&&Lt.initPromise("recommendedWallets",Lt.fetchRecommendedWallets),r&&Lt.initPromise("networkImages",Lt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Oe.state.features)!=null&&t.analytics&&Lt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Sa.get({path:"/getAnalyticsConfig",params:Lt._getSdkProperties()});Oe.setFeatures({analytics:t})}catch{Oe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){bn.featured=bn.allFeatured,bn.recommended=bn.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");bn.featured=bn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bn.recommended=bn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bn.filteredWallets=bn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){bn.filteredWallets=[]},setFilterByNamespace(t){if(!t){bn.featured=bn.allFeatured,bn.recommended=bn.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");bn.featured=bn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bn.recommended=bn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bn.filteredWallets=bn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Dr=ms({view:"Connect",history:["Connect"],transactionStack:[]}),Oke={state:Dr,subscribeKey(t,e){return Go(Dr,t,e)},pushTransactionStack(t){Dr.transactionStack.push(t)},popTransactionStack(t){const e=Dr.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Nn.goBack();break;case"cancel":s==null||s(),Nn.goBack();break}},push(t,e){t!==Dr.view&&(Dr.view=t,Dr.history.push(t),Dr.data=e)},reset(t,e){Dr.view=t,Dr.history=[t],Dr.data=e},replace(t,e){Dr.history.at(-1)===t||(Dr.view=t,Dr.history[Dr.history.length-1]=t,Dr.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Nn.state.view==="ConnectingFarcaster",n=!t&&e;if(Dr.history.length>1){Dr.history.pop();const[s]=Dr.history.slice(-1);s&&(t&&s==="Connect"?Dr.view="Account":Dr.view=s)}else Fi.close();(r=Dr.data)!=null&&r.wallet&&(Dr.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){wt.setFarcasterUrl(void 0,J.state.activeChain);const a=lt.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=JA(Oe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Dr.history.length>1){Dr.history=Dr.history.slice(0,t+1);const[e]=Dr.history.slice(-1);e&&(Dr.view=e)}},goBackOrCloseModal(){Nn.state.history.length>1?Nn.goBack():Fi.close()}},Nn=rl(Oke),mh=ms({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),_U={state:mh,subscribe(t){return zo(mh,()=>t(mh))},setThemeMode(t){mh.themeMode=t;try{const e=lt.getAuthConnector();if(e){const n=_U.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:af(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){mh.themeVariables={...mh.themeVariables,...t};try{const e=lt.getAuthConnector();if(e){const n=_U.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:af(mh.themeVariables,mh.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return JA(mh)}},Ha=rl(_U),tre={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},rr=ms({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...tre},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Dke={state:rr,subscribe(t){return zo(rr,()=>{t(rr)})},subscribeKey(t,e){return Go(rr,t,e)},initialize(t){t.forEach(e=>{const n=bt.getConnectedConnectorId(e);n&&lt.setConnectorId(n,e)})},setActiveConnector(t){t&&(rr.activeConnector=O0(t))},setConnectors(t){t.filter(s=>!rr.allConnectors.some(i=>i.id===s.id&&lt.getConnectorName(i.name)===lt.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&rr.allConnectors.push(O0(s))});const n=lt.getEnabledNamespaces(),r=lt.getEnabledConnectors(n);rr.connectors=lt.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(rr.filterByNamespaceMap).forEach(e=>{rr.filterByNamespaceMap[e]=!1}),t.forEach(e=>{rr.filterByNamespaceMap[e]=!0}),lt.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){rr.filterByNamespaceMap[t]=e,lt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=lt.getEnabledNamespaces(),e=lt.getEnabledConnectors(t),n=lt.areAllNamespacesEnabled();rr.connectors=lt.mergeMultiChainConnectors(e),n?Lt.clearFilterByNamespaces():Lt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(rr.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return rr.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(rr.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=lt.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ut.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=lt.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ut.CONNECTOR_ID.AUTH){const s=t,i=JA(Oe.state),o=Ha.getSnapshot().themeMode,a=Ha.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:af(a,o)}),lt.setConnectors([t])}else lt.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=rr.connectors.find(s=>s.id===ut.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return rr.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return rr.allConnectors.find(e=>e.id===t)},getConnector(t,e){return rr.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=JA(Oe.state),r=Ha.getSnapshot().themeMode,s=Ha.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:af(s,r)})},getConnectorsByNamespace(t){const e=rr.allConnectors.filter(n=>n.chain===t);return lt.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=lt.getConnector(t.id,t.rdns),n=J.state.activeChain;_ke.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Nn.push("ConnectingExternal",{connector:e}):Nn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?lt.getConnectorsByNamespace(t):lt.mergeMultiChainConnectors(rr.allConnectors)},setFilterByNamespace(t){rr.filterByNamespace=t,rr.connectors=lt.getConnectors(t),Lt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(rr.activeConnectorIds={...rr.activeConnectorIds,[e]:t},bt.setConnectedConnectorId(e,t))},removeConnectorId(t){rr.activeConnectorIds={...rr.activeConnectorIds,[t]:void 0},bt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return rr.activeConnectorIds[t]},isConnected(t){return t?!!rr.activeConnectorIds[t]:Object.values(rr.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){rr.activeConnectorIds={...tre}}},lt=rl(Dke);var WE={};const Mke="https://secure.walletconnect.org/sdk",Bke=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Mke,Lke=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Uke=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",mt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},mo={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Gm=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),fi=ms({...Gm}),$ke={state:fi,subscribeKey(t,e){return Go(fi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Bt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){fi.message=Gm.message,fi.variant=Gm.variant,fi.svg=Gm.svg,fi.open=Gm.open,fi.autoClose=Gm.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Gm.autoClose}){fi.open?(fi.open=!1,setTimeout(()=>{fi.message=t,fi.variant=n,fi.svg=e,fi.open=!0,fi.autoClose=r},150)):(fi.message=t,fi.variant=n,fi.svg=e,fi.open=!0,fi.autoClose=r)}},Tu=$ke,Jr=ms({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Fke={state:Jr,subscribe(t){return zo(Jr,()=>t(Jr))},setLastNetworkInView(t){Jr.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Jr.loading=!0;try{const s=await qt.fetchTransactions({account:t,cursor:Jr.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=J1.filterSpamTransactions(s.data),o=J1.filterByConnectedChain(i),a=[...Jr.transactions,...o];Jr.loading=!1,e==="coinbase"?Jr.coinbaseTransactions=J1.groupTransactionsByYearAndMonth(Jr.coinbaseTransactions,s.data):(Jr.transactions=a,Jr.transactionsByYear=J1.groupTransactionsByYearAndMonth(Jr.transactionsByYear,o)),Jr.empty=a.length===0,Jr.next=s.next?s.next:void 0}catch{const i=J.state.activeChain;xs.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Oe.state.projectId,cursor:Jr.next,isSmartAccount:((r=wt.state.preferredAccountTypes)==null?void 0:r[i])===mo.ACCOUNT_TYPES.SMART_ACCOUNT}}),Tu.showError("Failed to fetch transactions"),Jr.loading=!1,Jr.empty=!0,Jr.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Jr.next=void 0},resetTransactions(){Jr.transactions=[],Jr.transactionsByYear={},Jr.lastNetworkInView=void 0,Jr.loading=!1,Jr.empty=!1,Jr.next=void 0}},J1=rl(Fke,"API_ERROR"),Gr=ms({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Rm;const jke={state:Gr,subscribeKey(t,e){return Go(Gr,t,e)},_getClient(){return Gr._client},setClient(t){Gr._client=O0(t)},async connectWalletConnect(){var t,e,n,r;if(Bt.isTelegram()||Bt.isSafari()&&Bt.isIos()){if(Rm){await Rm,Rm=void 0;return}if(!Bt.isPairingExpired(Gr==null?void 0:Gr.wcPairingExpiry)){const s=Gr.wcUri;Gr.wcUri=s;return}Rm=(e=(t=Vt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Vt.state.status="connecting",await Rm,Rm=void 0,Gr.wcPairingExpiry=void 0,Vt.state.status="connected"}else await((r=(n=Vt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=Vt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&J.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=Vt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&lt.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Fi.setLoading(!0,J.state.activeChain);const n=lt.getAuthConnector();n&&(wt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),bt.setPreferredAccountTypes(wt.state.preferredAccountTypes??{[e]:t}),await Vt.reconnectExternal(n),Fi.setLoading(!1,J.state.activeChain),xs.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Vt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Vt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Vt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Vt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Vt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Vt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Vt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Vt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Vt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Vt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Vt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Vt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Gr.wcUri=void 0,Gr.wcPairingExpiry=void 0,Gr.wcLinking=void 0,Gr.recentWallet=void 0,Gr.status="disconnected",J1.resetTransactions(),bt.deleteWalletConnectDeepLink()},resetUri(){Gr.wcUri=void 0,Gr.wcPairingExpiry=void 0,Rm=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Vt.state;t&&bt.setWalletConnectDeepLink(t),e&&bt.setAppKitRecent(e),xs.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Nn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Gr.wcBasic=t},setUri(t){Gr.wcUri=t,Gr.wcPairingExpiry=Bt.getPairingExpiry()},setWcLinking(t){Gr.wcLinking=t},setWcError(t){Gr.wcError=t,Gr.buffering=!1},setRecentWallet(t){Gr.recentWallet=t},setBuffering(t){Gr.buffering=t},setStatus(t){Gr.status=t},async disconnect(t){var e;try{await((e=Vt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new EU("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Gr.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(lt.state.activeConnectorIds[n]===t.connectorId){const i=J.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;wt.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=lt.getConnector(t.connectorId);i?Vt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},Vt=rl(jke),$w=ms({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Gd={state:$w,subscribe(t){return zo($w,()=>t($w))},subscribeOpen(t){return Go($w,"open",t)},set(t){Object.assign($w,{...$w,...t})}},t3={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return wm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},UW={async getMyTokensWithBalance(t){const e=wt.state.address,n=J.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await qt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=t3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Vt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Vt.walletGetAssets({account:t,chainFilter:[s]});return t3.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>t3.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:J.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Sr=ms({tokenBalances:[],loading:!1}),Wke={state:Sr,subscribe(t){return zo(Sr,()=>t(Sr))},subscribeKey(t,e){return Go(Sr,t,e)},setToken(t){t&&(Sr.token=O0(t))},setTokenAmount(t){Sr.sendTokenAmount=t},setReceiverAddress(t){Sr.receiverAddress=t},setReceiverProfileImageUrl(t){Sr.receiverProfileImageUrl=t},setReceiverProfileName(t){Sr.receiverProfileName=t},setNetworkBalanceInUsd(t){Sr.networkBalanceInUSD=t},setLoading(t){Sr.loading=t},async sendToken(){var t;try{switch(mr.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await mr.sendEvmToken();return;case"solana":await mr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{mr.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=J.state.activeChain,e=(n=wt.state.preferredAccountTypes)==null?void 0:n[t];if(!mr.state.sendTokenAmount||!mr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!mr.state.token)throw new Error("A token is required");(r=mr.state.token)!=null&&r.address?(xs.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:mr.state.token.address,amount:mr.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await mr.sendERC20Token({receiverAddress:mr.state.receiverAddress,tokenAddress:mr.state.token.address,sendTokenAmount:mr.state.sendTokenAmount,decimals:mr.state.token.quantity.decimals})):(xs.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:mr.state.token.symbol||"",amount:mr.state.sendTokenAmount,network:((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await mr.sendNativeToken({receiverAddress:mr.state.receiverAddress,sendTokenAmount:mr.state.sendTokenAmount,decimals:mr.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Sr.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?Bt.getPlainAddress(r):void 0;if(Sr.lastRetry&&!Bt.isAllowedRetry(Sr.lastRetry,30*$r.ONE_SEC_MS))return Sr.loading=!1,[];try{if(s&&e&&n){const a=await UW.getMyTokensWithBalance();return Sr.tokenBalances=a,Sr.lastRetry=void 0,a}}catch(a){Sr.lastRetry=Date.now(),t==null||t(a),Tu.showError("Token Balance Unavailable")}finally{Sr.loading=!1}return[]},fetchNetworkBalance(){if(Sr.tokenBalances.length===0)return;const t=UW.mapBalancesToSwapTokens(Sr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===J.getActiveNetworkTokenAddress());e&&(Sr.networkBalanceInUSD=e?dke.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Nn.pushTransactionStack({});const e=t.receiverAddress,n=wt.state.address,r=Vt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Vt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),xs.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=wt.state.preferredAccountTypes)==null?void 0:i.eip155)===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=mr.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Vt._getClient())==null||c.updateBalance("eip155"),mr.resetSend()},async sendERC20Token(t){Nn.pushTransactionStack({onSuccess(){Nn.replace("Account")}});const e=Vt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(wt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Bt.getPlainAddress(t.tokenAddress);await Vt.writeContract({fromAddress:wt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:gke.getERC20Abi(n),chainNamespace:"eip155"}),mr.resetSend()}},async sendSolanaToken(){var t;if(!mr.state.sendTokenAmount||!mr.state.receiverAddress)throw new Error("An amount and receiver address are required");Nn.pushTransactionStack({onSuccess(){Nn.replace("Account")}}),await Vt.sendTransaction({chainNamespace:"solana",to:mr.state.receiverAddress,value:mr.state.sendTokenAmount}),(t=Vt._getClient())==null||t.updateBalance("solana"),mr.resetSend()},resetSend(){Sr.token=void 0,Sr.sendTokenAmount=void 0,Sr.receiverAddress=void 0,Sr.receiverProfileImageUrl=void 0,Sr.receiverProfileName=void 0,Sr.loading=!1,Sr.tokenBalances=[]}},mr=rl(Wke),n3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},tx={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},tt=ms({chains:nke(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),zke={state:tt,subscribe(t){return zo(tt,()=>{t(tt)})},subscribeKey(t,e){return Go(tt,t,e)},subscribeChainProp(t,e,n){let r;return zo(tt.chains,()=>{var i;const s=n||tt.activeChain;if(s){const o=(i=tt.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=bt.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Oe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(tt.noAdapters=!0),tt.noAdapters||(tt.activeChain=a==null?void 0:a.namespace,tt.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),tt.activeChain&&Gd.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);J.state.chains.set(u,{namespace:u,networkState:ms({...tx,caipNetwork:d==null?void 0:d[0]}),accountState:ms(n3),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(tt.activeChain===t){const r=Array.from(tt.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}tt.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){tt.chains.set(t.namespace,{namespace:t.namespace,networkState:{...tx,caipNetwork:r[0]},accountState:n3,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=tt.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),tt.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),lt.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=tt.chains.get(t);if(n){const o=((r=tt.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),tt.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&lt.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=tt.chains.get(t);n&&(n.networkState={...n.networkState||tx,...e},tt.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=tt.chains.get(t);if(r){const s={...r.accountState||n3,...e};tt.chains.set(t,{...r,accountState:s}),(tt.chains.size===1||tt.activeChain===t)&&(e.caipAddress&&(tt.activeCaipAddress=e.caipAddress),wt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=tt.chains.get(t);if(n){const r={...n.networkState||tx,...e};tt.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&lt.removeConnectorId(n)},setActiveNamespace(t){var r,s;tt.activeChain=t;const e=t?tt.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(tt.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,tt.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),bt.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Gd.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;tt.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=tt.chains.get(t.chainNamespace);tt.activeChain=t.chainNamespace,tt.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?tt.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:tt.activeCaipAddress=void 0,J.setAccountProp("caipAddress",tt.activeCaipAddress,t.chainNamespace),e&&wt.replaceState(e.accountState),mr.resetSend(),Gd.set({activeChain:tt.activeChain,selectedNetworkId:(i=tt.activeCaipNetwork)==null?void 0:i.caipNetworkId}),bt.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&Oe.state.enableNetworkSwitch&&!Oe.state.allowUnsupportedChain&&!Vt.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=tt.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=J.state.chains.get(J.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=tt.activeCaipNetwork)==null?void 0:o.id)})),r=J.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Fi.close()}catch{Nn.goBack()}xs.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||tt.activeChain,n=tt.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||tt.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=tt.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=tt.activeChain;if(e&&(n=e),!n)return;const r=(s=tt.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=tt.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=tt.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Bt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return tt.chains.forEach(e=>{const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));lt.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return tt.chains.forEach(e=>{const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return tt.activeCaipNetwork},getActiveCaipAddress(){return tt.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=tt.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||tt.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!tt.activeChain)return!0;const e=J.getRequestedCaipNetworks(tt.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=Qne.caipNetworkIdToNumber((r=tt.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=tt.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=tt.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=tt.activeCaipNetwork)==null?void 0:s.id)||1,n=$r.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Fi.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=tt.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&$r.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");tt.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),lt.removeConnectorId(e)},setIsSwitchingNamespace(t){tt.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(tt.chains.forEach(s=>{ut.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=tt.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:wt.state},getNetworkData(t){var n;const e=t||tt.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=lt.state.filterByNamespace;return(t?[tt.chains.get(t)]:Array.from(tt.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()}},J=rl(zke),Hke={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},nre=Bt.getBlockchainApiUrl(),Ia=ms({clientId:null,api:new UI({baseUrl:nre,clientId:null}),supportedChains:{http:[],ws:[]}}),qt={state:Ia,async get(t){const{st:e,sv:n}=qt.getSdkProperties(),r=Oe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ia.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Oe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ia.supportedChains.http.length||await qt.getSupportedNetworks()}catch{return!1}return Ia.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await qt.get({path:"v1/supported-chains"});return Ia.supportedChains=t,t}catch{return Ia.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await qt.isNetworkSupported(e))return{avatar:"",name:""};const r=bt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await qt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?Bt.getPlainAddress(J.state.activeCaipAddress):void 0}});return bt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await qt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?qt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await qt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?qt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await qt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await qt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ia.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Oe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await qt.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?qt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=qt.getSdkProperties();if(!await qt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return qt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await qt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ia.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:$r.CONVERT_SLIPPAGE_TOLERANCE},projectId:Oe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=qt.getSdkProperties();if(!await qt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return qt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=qt.getSdkProperties();if(!await qt.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Tu.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=bt.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await qt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return bt.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await qt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await qt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qt.get({path:`/v1/profile/reverse/${t}`,params:{sender:wt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await qt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await qt.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ia.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await qt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ia.api.post({path:"/v1/generators/onrampurl",params:{projectId:Oe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await qt.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await qt.get({path:"/v1/onramp/options"})}catch{return Hke}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await qt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ia.api.post({path:"/v1/onramp/quote",params:{projectId:Oe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await qt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await qt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ia.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Oe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ia.clientId=t,Ia.api=new UI({baseUrl:nre,clientId:t})}},il=ms({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Gke={state:il,replaceState(t){t&&Object.assign(il,O0(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Bt.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){J.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountTypes",{...il.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){il.preferredAccountTypes=t},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?O0(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;il.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?Bt.getPlainAddress(r):void 0;if(il.lastRetry&&!Bt.isAllowedRetry(il.lastRetry,30*$r.ONE_SEC_MS))return il.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await qt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return wt.setTokenBalance(c,n),il.lastRetry=void 0,il.balanceLoading=!1,c}}catch(a){il.lastRetry=Date.now(),t==null||t(a),Tu.showError("Token Balance Unavailable")}finally{il.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},wt=rl(Gke),qke={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Nn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=wt.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=wt.getCaipAddress(t.chainNamespace),l=lt.getConnectorId(J.state.activeChain)===ut.CONNECTOR_ID.AUTH,u=ut.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Nn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Nn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Nn.push("SwitchNetwork",{...r,network:t})}},Na=ms({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Vke={state:Na,subscribe(t){return zo(Na,()=>t(Na))},subscribeKey(t,e){return Go(Na,t,e)},async open(t){var o,a;const e=wt.state.status==="connected",n=t==null?void 0:t.namespace,r=J.state.activeChain,s=n&&n!==r,i=(o=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Vt.state.wcBasic?Lt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Lt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),lt.setFilterByNamespace(t==null?void 0:t.namespace),Fi.setLoading(!0,n),n&&s){const c=((a=J.getNetworkData(n))==null?void 0:a.caipNetwork)||J.getRequestedCaipNetworks(n)[0];c&&qke.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=J.state.noAdapters;Oe.state.manualWCControl||c&&!i?Bt.isMobile()?Nn.reset("AllWallets"):Nn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Nn.reset(t.view,t.data):i?Nn.reset("Account"):Nn.reset("Connect")}Na.open=!0,Gd.set({open:!0}),xs.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=Oe.state.enableEmbedded,e=!!J.state.activeCaipAddress;Na.open&&xs.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Na.open=!1,Nn.reset("Connect"),Fi.clearLoading(),t?e?Nn.replace("Account"):Nn.push("Connect"):Gd.set({open:!1}),Vt.resetUri()},setLoading(t,e){e&&Na.loadingNamespaceMap.set(e,t),Na.loading=t,Gd.set({loading:t})},clearLoading(){Na.loadingNamespaceMap.clear(),Na.loading=!1},shake(){Na.shake||(Na.shake=!0,setTimeout(()=>{Na.shake=!1},500))}},Fi=rl(Vke),M_={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},AU={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Kke={providers:Xne,selectedProvider:null,error:null,purchaseCurrency:M_,paymentCurrency:AU,purchaseCurrencies:[M_],paymentCurrencies:[],quotesLoading:!1},Xn=ms(Kke),Yke={state:Xn,subscribe(t){return zo(Xn,()=>t(Xn))},subscribeKey(t,e){return Go(Xn,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=J.state.activeChain===ut.CHAIN.SOLANA?"SOL":"USDC",n=wt.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",mke),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",Oe.state.projectId),Xn.selectedProvider={...t,url:r.toString()}}else Xn.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=Xne.filter(r=>e.includes(r.name));Xn.providers=n}else Xn.providers=[]},setPurchaseCurrency(t){Xn.purchaseCurrency=t},setPaymentCurrency(t){Xn.paymentCurrency=t},setPurchaseAmount(t){SU.state.purchaseAmount=t},setPaymentAmount(t){SU.state.paymentAmount=t},async getAvailableCurrencies(){const t=await qt.getOnrampOptions();Xn.purchaseCurrencies=t.purchaseCurrencies,Xn.paymentCurrencies=t.paymentCurrencies,Xn.paymentCurrency=t.paymentCurrencies[0]||AU,Xn.purchaseCurrency=t.purchaseCurrencies[0]||M_,await Lt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Lt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Xn.quotesLoading=!0;try{const n=await qt.getOnrampQuote({purchaseCurrency:Xn.purchaseCurrency,paymentCurrency:Xn.paymentCurrency,amount:((t=Xn.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Xn.purchaseCurrency)==null?void 0:e.symbol});return Xn.quotesLoading=!1,Xn.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Xn.error=n.message,Xn.quotesLoading=!1,null}finally{Xn.quotesLoading=!1}},resetState(){Xn.selectedProvider=null,Xn.error=null,Xn.purchaseCurrency=M_,Xn.paymentCurrency=AU,Xn.purchaseCurrencies=[M_],Xn.paymentCurrencies=[],Xn.paymentAmount=void 0,Xn.purchaseAmount=void 0,Xn.quotesLoading=!1}},SU=rl(Yke),$W=2147483648,Qke={convertEVMChainIdToCoinType(t){if(t>=$W)throw new Error("Invalid chainId");return($W|t)>>>0}},ol=ms({suggestions:[],loading:!1}),Jke={state:ol,subscribe(t){return zo(ol,()=>t(ol))},subscribeKey(t,e){return Go(ol,t,e)},async resolveName(t){var e,n;try{return await qt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await qt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ol.loading=!0,ol.suggestions=[];const e=await qt.getEnsNameSuggestions(t);return ol.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ol.suggestions}catch(e){const n=B_.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ol.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=bt.getEnsFromCacheForAddress(t);if(n)return n;const r=await qt.reverseLookupEnsName({address:t});return bt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=B_.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=wt.state.address,r=lt.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");ol.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Nn.pushTransactionStack({onCancel(){Nn.replace("RegisterAccountName")}});const i=await Vt.signMessage(s);ol.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=Qke.convertEVMChainIdToCoinType(Number(o));await qt.registerEnsName({coinType:a,address:n,signature:i,message:s}),wt.setProfileName(t,e.chainNamespace),Nn.replace("RegisterAccountNameSuccess")}catch(s){const i=B_.parseEnsApiError(s,`Error registering name ${t}`);throw Nn.replace("RegisterAccountName"),new Error(i)}finally{ol.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},B_=rl(Jke);var a4={exports:{}},lv=typeof Reflect=="object"?Reflect:null,FW=lv&&typeof lv.apply=="function"?lv.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},uT;lv&&typeof lv.ownKeys=="function"?uT=lv.ownKeys:Object.getOwnPropertySymbols?uT=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:uT=function(e){return Object.getOwnPropertyNames(e)};function Zke(t){console&&console.warn&&console.warn(t)}var rre=Number.isNaN||function(e){return e!==e};function jr(){jr.init.call(this)}a4.exports=jr;a4.exports.once=n2e;jr.EventEmitter=jr;jr.prototype._events=void 0;jr.prototype._eventsCount=0;jr.prototype._maxListeners=void 0;var jW=10;function fP(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jr,"defaultMaxListeners",{enumerable:!0,get:function(){return jW},set:function(t){if(typeof t!="number"||t<0||rre(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");jW=t}});jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||rre(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function sre(t){return t._maxListeners===void 0?jr.defaultMaxListeners:t._maxListeners}jr.prototype.getMaxListeners=function(){return sre(this)};jr.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")FW(c,this,n);else for(var l=c.length,u=lre(c,l),r=0;r<l;++r)FW(u[r],this,n);return!0};function ire(t,e,n,r){var s,i,o;if(fP(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=sre(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Zke(a)}return t}jr.prototype.addListener=function(e,n){return ire(this,e,n,!1)};jr.prototype.on=jr.prototype.addListener;jr.prototype.prependListener=function(e,n){return ire(this,e,n,!0)};function Xke(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ore(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=Xke.bind(r);return s.listener=n,r.wrapFn=s,s}jr.prototype.once=function(e,n){return fP(n),this.on(e,ore(this,e,n)),this};jr.prototype.prependOnceListener=function(e,n){return fP(n),this.prependListener(e,ore(this,e,n)),this};jr.prototype.removeListener=function(e,n){var r,s,i,o,a;if(fP(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():e2e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};jr.prototype.off=jr.prototype.removeListener;jr.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function are(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?t2e(s):lre(s,s.length)}jr.prototype.listeners=function(e){return are(this,e,!0)};jr.prototype.rawListeners=function(e){return are(this,e,!1)};jr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):cre.call(t,e)};jr.prototype.listenerCount=cre;function cre(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}jr.prototype.eventNames=function(){return this._eventsCount>0?uT(this._events):[]};function lre(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function e2e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function t2e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function n2e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}ure(t,e,i,{once:!0}),e!=="error"&&r2e(t,s,{once:!0})})}function r2e(t,e,n){typeof t.on=="function"&&ure(t,"error",e,n)}function ure(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Vl=a4.exports;const c4=ih(Vl);var We={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var IU=function(t,e){return IU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},IU(t,e)};function s2e(t,e){IU(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var NU=function(){return NU=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},NU.apply(this,arguments)};function i2e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function o2e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function a2e(t,e){return function(n,r){e(n,r,t)}}function c2e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function l2e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function u2e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function d2e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function h2e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function xU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dre(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function f2e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(dre(arguments[e]));return t}function p2e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function ZA(t){return this instanceof ZA?(this.v=t,this):new ZA(t)}function g2e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof ZA?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function m2e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ZA(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function y2e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xU=="function"?xU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function w2e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b2e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function v2e(t){return t&&t.__esModule?t:{default:t}}function E2e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C2e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const _2e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return NU},__asyncDelegator:m2e,__asyncGenerator:g2e,__asyncValues:y2e,__await:ZA,__awaiter:l2e,__classPrivateFieldGet:E2e,__classPrivateFieldSet:C2e,__createBinding:d2e,__decorate:o2e,__exportStar:h2e,__extends:s2e,__generator:u2e,__importDefault:v2e,__importStar:b2e,__makeTemplateObject:w2e,__metadata:c2e,__param:a2e,__read:dre,__rest:i2e,__spread:f2e,__spreadArrays:p2e,__values:xU},Symbol.toStringTag,{value:"Module"})),pP=oI(_2e);var r3={},y1={},WW;function A2e(){if(WW)return y1;WW=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return y1.delay=t,y1}var km={},s3={},Pm={},zW;function S2e(){return zW||(zW=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.ONE_THOUSAND=Pm.ONE_HUNDRED=void 0,Pm.ONE_HUNDRED=100,Pm.ONE_THOUSAND=1e3),Pm}var i3={},HW;function I2e(){return HW||(HW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(i3)),i3}var GW;function hre(){return GW||(GW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pP;e.__exportStar(S2e(),t),e.__exportStar(I2e(),t)}(s3)),s3}var qW;function N2e(){if(qW)return km;qW=1,Object.defineProperty(km,"__esModule",{value:!0}),km.fromMiliseconds=km.toMiliseconds=void 0;const t=hre();function e(r){return r*t.ONE_THOUSAND}km.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return km.fromMiliseconds=n,km}var VW;function x2e(){return VW||(VW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pP;e.__exportStar(A2e(),t),e.__exportStar(N2e(),t)}(r3)),r3}var Fw={},KW;function T2e(){if(KW)return Fw;KW=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Fw.Watch=t,Fw.default=t,Fw}var o3={},w1={},YW;function R2e(){if(YW)return w1;YW=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.IWatch=void 0;class t{}return w1.IWatch=t,w1}var QW;function k2e(){return QW||(QW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),pP.__exportStar(R2e(),t)}(o3)),o3}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pP;e.__exportStar(x2e(),t),e.__exportStar(T2e(),t),e.__exportStar(k2e(),t),e.__exportStar(hre(),t)})(We);class lw{}let P2e=class extends lw{constructor(e){super()}};const JW=We.FIVE_SECONDS,uw={pulse:"heartbeat_pulse"};let O2e=class fre extends P2e{constructor(e){super(e),this.events=new Vl.EventEmitter,this.interval=JW,this.interval=(e==null?void 0:e.interval)||JW}static async init(e){const n=new fre(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),We.toMiliseconds(this.interval))}pulse(){this.events.emit(uw.pulse)}};const D2e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,M2e=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,B2e=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function L2e(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){U2e(t);return}return e}function U2e(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function nx(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!B2e.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(D2e.test(t)||M2e.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,L2e)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function dw(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function pre(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=dw(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let a3;function $I(){return a3||(a3=pre("keyval-store","keyval")),a3}function ZW(t,e=$I()){return e("readonly",n=>dw(n.get(t)))}function $2e(t,e,n=$I()){return n("readwrite",r=>(r.put(e,t),dw(r.transaction)))}function F2e(t,e=$I()){return e("readwrite",n=>(n.delete(t),dw(n.transaction)))}function j2e(t=$I()){return t("readwrite",e=>(e.clear(),dw(e.transaction)))}function W2e(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},dw(t.transaction)}function z2e(t=$I()){return t("readonly",e=>{if(e.getAllKeys)return dw(e.getAllKeys());const n=[];return W2e(e,r=>n.push(r.key)).then(()=>n)})}const H2e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),G2e=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function M0(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return G2e(t)}catch{return t}}function Nf(t){return typeof t=="string"?t:H2e(t)||""}function q2e(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var V2e=K2e;function K2e(t,e,n){var r=n&&n.stringify||q2e,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const XW=V2e;var mb=qd;const XA=sPe().console||{},Y2e={mapHttpRequest:rx,mapHttpResponse:rx,wrapRequestSerializer:c3,wrapResponseSerializer:c3,wrapErrorSerializer:c3,req:rx,res:rx,err:ePe};function Q2e(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function qd(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||XA;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Q2e(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=eS),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:tPe(t)};c.levels=qd.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=eS,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=TU());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,jw(l,c,"error","log"),jw(l,c,"fatal","error"),jw(l,c,"warn","error"),jw(l,c,"info","log"),jw(l,c,"debug","log"),jw(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const m=g.serializers;if(s&&m){var y=Object.assign({},r,m),w=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,gP([p],w,y,this._stdErrSerialize)}function C(N){this._childLevel=(N._childLevel|0)+1,this.error=Ww(N,p,"error"),this.fatal=Ww(N,p,"fatal"),this.warn=Ww(N,p,"warn"),this.info=Ww(N,p,"info"),this.debug=Ww(N,p,"debug"),this.trace=Ww(N,p,"trace"),y&&(this.serializers=y,this._serialize=w),e&&(this._logEvent=TU([].concat(N._logEvent.bindings,p)))}return C.prototype=this,new C(this)}return c}qd.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};qd.stdSerializers=Y2e;qd.stdTimeFunctions=Object.assign({},{nullTime:gre,epochTime:mre,unixTime:nPe,isoTime:rPe});function jw(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?eS:s[n]?s[n]:XA[n]||XA[r]||eS,J2e(t,e,n)}function J2e(t,e,n){!t.transmit&&e[n]===eS||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===XA?XA:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&gP(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Z2e(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=qd.levels.values[l],d=qd.levels.values[n];if(d<u)return;X2e(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:qd.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Z2e(t,e,n,r){t._serialize&&gP(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=qd.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?XW(s.shift(),s):void 0}else typeof i=="string"&&(i=XW(s.shift(),s));return i!==void 0&&(o.msg=i),o}function gP(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=qd.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ww(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function X2e(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;gP(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=TU(c)}function TU(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function ePe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function tPe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?gre:mre}function rx(){return{}}function c3(t){return t}function eS(){}function gre(){return!1}function mre(){return Date.now()}function nPe(){return Math.round(Date.now()/1e3)}function rPe(){return new Date(Date.now()).toISOString()}function sPe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const FI=ih(mb),iPe={level:"info"},jI="custom_context",l4=1e3*1024;let oPe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},ez=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new oPe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},yre=class{constructor(e,n=l4){this.level=e??"error",this.levelValue=mb.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new ez(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===mb.levels.values.error?console.error(e):n===mb.levels.values.warn?console.warn(e):n===mb.levels.values.debug?console.debug(e):n===mb.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Nf({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new ez(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Nf({extraMetadata:e})),new Blob(n,{type:"application/json"})}},aPe=class{constructor(e,n=l4){this.baseChunkLogger=new yre(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},cPe=class{constructor(e,n=l4){this.baseChunkLogger=new yre(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var lPe=Object.defineProperty,uPe=Object.defineProperties,dPe=Object.getOwnPropertyDescriptors,tz=Object.getOwnPropertySymbols,hPe=Object.prototype.hasOwnProperty,fPe=Object.prototype.propertyIsEnumerable,nz=(t,e,n)=>e in t?lPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qR=(t,e)=>{for(var n in e||(e={}))hPe.call(e,n)&&nz(t,n,e[n]);if(tz)for(var n of tz(e))fPe.call(e,n)&&nz(t,n,e[n]);return t},VR=(t,e)=>uPe(t,dPe(e));function hw(t){return VR(qR({},t),{level:(t==null?void 0:t.level)||iPe.level})}function pPe(t,e=jI){return t[e]||""}function gPe(t,e,n=jI){return t[n]=e,t}function gc(t,e=jI){let n="";return typeof t.bindings>"u"?n=pPe(t,e):n=t.bindings().context||"",n}function mPe(t,e,n=jI){const r=gc(t,n);return r.trim()?`${r}/${e}`:e}function vo(t,e,n=jI){const r=mPe(t,e,n),s=t.child({context:r});return gPe(s,r,n)}function yPe(t){var e,n;const r=new aPe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:FI(VR(qR({},t.opts),{level:"trace",browser:VR(qR({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function wPe(t){var e;const n=new cPe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:FI(VR(qR({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function mP(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?yPe(t):wPe(t)}function bPe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wre(t,...e){if(!bPe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function rz(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vPe(t,e){wre(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const l3=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function EPe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function bre(t){return typeof t=="string"&&(t=EPe(t)),wre(t),t}let CPe=class{clone(){return this._cloneInto()}};function _Pe(t){const e=r=>t().update(bre(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function vre(t=32){if(zw&&typeof zw.getRandomValues=="function")return zw.getRandomValues(new Uint8Array(t));if(zw&&typeof zw.randomBytes=="function")return zw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function APe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let SPe=class extends CPe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=l3(this.buffer)}update(e){rz(this);const{view:n,buffer:r,blockLen:s}=this;e=bre(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=l3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rz(this),vPe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;APe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=l3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const sx=BigInt(2**32-1),RU=BigInt(32);function Ere(t,e=!1){return e?{h:Number(t&sx),l:Number(t>>RU&sx)}:{h:Number(t>>RU&sx)|0,l:Number(t&sx)|0}}function IPe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Ere(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const NPe=(t,e)=>BigInt(t>>>0)<<RU|BigInt(e>>>0),xPe=(t,e,n)=>t>>>n,TPe=(t,e,n)=>t<<32-n|e>>>n,RPe=(t,e,n)=>t>>>n|e<<32-n,kPe=(t,e,n)=>t<<32-n|e>>>n,PPe=(t,e,n)=>t<<64-n|e>>>n-32,OPe=(t,e,n)=>t>>>n-32|e<<64-n,DPe=(t,e)=>e,MPe=(t,e)=>t,BPe=(t,e,n)=>t<<n|e>>>32-n,LPe=(t,e,n)=>e<<n|t>>>32-n,UPe=(t,e,n)=>e<<n-32|t>>>64-n,$Pe=(t,e,n)=>t<<n-32|e>>>64-n;function FPe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const jPe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),WPe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,zPe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),HPe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,GPe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),qPe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,An={fromBig:Ere,split:IPe,toBig:NPe,shrSH:xPe,shrSL:TPe,rotrSH:RPe,rotrSL:kPe,rotrBH:PPe,rotrBL:OPe,rotr32H:DPe,rotr32L:MPe,rotlSH:BPe,rotlSL:LPe,rotlBH:UPe,rotlBL:$Pe,add:FPe,add3L:jPe,add3H:WPe,add4L:zPe,add4H:HPe,add5H:qPe,add5L:GPe},[VPe,KPe]=An.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),rp=new Uint32Array(80),sp=new Uint32Array(80);let YPe=class extends SPe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)rp[C]=e.getUint32(n),sp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=rp[C-15]|0,S=sp[C-15]|0,P=An.rotrSH(N,S,1)^An.rotrSH(N,S,8)^An.shrSH(N,S,7),O=An.rotrSL(N,S,1)^An.rotrSL(N,S,8)^An.shrSL(N,S,7),L=rp[C-2]|0,M=sp[C-2]|0,W=An.rotrSH(L,M,19)^An.rotrBH(L,M,61)^An.shrSH(L,M,6),F=An.rotrSL(L,M,19)^An.rotrBL(L,M,61)^An.shrSL(L,M,6),V=An.add4L(O,F,sp[C-7],sp[C-16]),$=An.add4H(V,P,W,rp[C-7],rp[C-16]);rp[C]=$|0,sp[C]=V|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=An.rotrSH(d,h,14)^An.rotrSH(d,h,18)^An.rotrBH(d,h,41),S=An.rotrSL(d,h,14)^An.rotrSL(d,h,18)^An.rotrBL(d,h,41),P=d&f^~d&g,O=h&p^~h&m,L=An.add5L(w,S,O,KPe[C],sp[C]),M=An.add5H(L,y,N,P,VPe[C],rp[C]),W=L|0,F=An.rotrSH(r,s,28)^An.rotrBH(r,s,34)^An.rotrBH(r,s,39),V=An.rotrSL(r,s,28)^An.rotrBL(r,s,34)^An.rotrBL(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=An.add(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=An.add3L(W,V,v);r=An.add3H(E,M,F,$),s=E|0}({h:r,l:s}=An.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=An.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=An.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=An.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=An.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=An.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=An.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=An.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){rp.fill(0),sp.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const QPe=_Pe(()=>new YPe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u4=BigInt(0),Cre=BigInt(1),JPe=BigInt(2);function d4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function h4(t){if(!d4(t))throw new Error("Uint8Array expected")}function u3(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const ZPe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function f4(t){h4(t);let e="";for(let n=0;n<t.length;n++)e+=ZPe[t[n]];return e}function _re(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?u4:BigInt("0x"+t)}const yh={_0:48,_9:57,A:65,F:70,a:97,f:102};function sz(t){if(t>=yh._0&&t<=yh._9)return t-yh._0;if(t>=yh.A&&t<=yh.F)return t-(yh.A-10);if(t>=yh.a&&t<=yh.f)return t-(yh.a-10)}function Are(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=sz(t.charCodeAt(i)),a=sz(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function XPe(t){return _re(f4(t))}function dT(t){return h4(t),_re(f4(Uint8Array.from(t).reverse()))}function Sre(t,e){return Are(t.toString(16).padStart(e*2,"0"))}function kU(t,e){return Sre(t,e).reverse()}function wh(t,e,n){let r;if(typeof e=="string")try{r=Are(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(d4(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function iz(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];h4(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const d3=t=>typeof t=="bigint"&&u4<=t;function eOe(t,e,n){return d3(t)&&d3(e)&&d3(n)&&e<=t&&t<n}function b1(t,e,n,r){if(!eOe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tOe(t){let e;for(e=0;t>u4;t>>=Cre,e+=1);return e}const nOe=t=>(JPe<<BigInt(t-1))-Cre,rOe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||d4(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function p4(t,e,n={}){const r=(s,i,o)=>{const a=rOe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function oz(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ji=BigInt(0),ri=BigInt(1),ey=BigInt(2),sOe=BigInt(3),PU=BigInt(4),az=BigInt(5),cz=BigInt(8);function bi(t,e){const n=t%e;return n>=ji?n:e+n}function iOe(t,e,n){if(e<ji)throw new Error("invalid exponent, negatives unsupported");if(n<=ji)throw new Error("invalid modulus");if(n===ri)return ji;let r=ri;for(;e>ji;)e&ri&&(r=r*t%n),t=t*t%n,e>>=ri;return r}function td(t,e,n){let r=t;for(;e-- >ji;)r*=r,r%=n;return r}function lz(t,e){if(t===ji)throw new Error("invert: expected non-zero number");if(e<=ji)throw new Error("invert: expected positive modulus, got "+e);let n=bi(t,e),r=e,s=ji,i=ri;for(;n!==ji;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ri)throw new Error("invert: does not exist");return bi(s,e)}function oOe(t){const e=(t-ri)/ey;let n,r,s;for(n=t-ri,r=0;n%ey===ji;n/=ey,r++);for(s=ey;s<t&&iOe(s,e,t)!==t-ri;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ri)/PU;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ri)/ey;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ri<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function aOe(t){if(t%PU===sOe){const e=(t+ri)/PU;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%cz===az){const e=(t-az)/cz;return function(n,r){const s=n.mul(r,ey),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ey),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return oOe(t)}const cOe=(t,e)=>(bi(t,e)&ri)===ri,lOe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uOe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lOe.reduce((r,s)=>(r[s]="function",r),e);return p4(t,n)}function dOe(t,e,n){if(n<ji)throw new Error("invalid exponent, negatives unsupported");if(n===ji)return t.ONE;if(n===ri)return e;let r=t.ONE,s=e;for(;n>ji;)n&ri&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ri;return r}function hOe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Ire(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Nre(t,e,n=!1,r={}){if(t<=ji)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Ire(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:nOe(s),ZERO:ji,ONE:ri,create:c=>bi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ji<=c&&c<t},is0:c=>c===ji,isOdd:c=>(c&ri)===ri,neg:c=>bi(-c,t),eql:(c,l)=>c===l,sqr:c=>bi(c*c,t),add:(c,l)=>bi(c+l,t),sub:(c,l)=>bi(c-l,t),mul:(c,l)=>bi(c*l,t),pow:(c,l)=>dOe(a,c,l),div:(c,l)=>bi(c*lz(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>lz(c,t),sqrt:r.sqrt||(c=>(o||(o=aOe(t)),o(a,c))),invertBatch:c=>hOe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kU(c,i):Sre(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?dT(c):XPe(c)}});return Object.freeze(a)}const uz=BigInt(0),ix=BigInt(1);function h3(t,e){const n=e.negate();return t?n:e}function xre(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function f3(t,e){xre(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function fOe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function pOe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const p3=new WeakMap,Tre=new WeakMap;function g3(t){return Tre.get(t)||1}function gOe(t,e){return{constTimeNegate:h3,hasPrecomputes(n){return g3(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>uz;)r&ix&&(s=s.add(i)),i=i.double(),r>>=ix;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=f3(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=f3(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=ix);const g=f,m=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(h3(y,r[g])):a=a.add(h3(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=f3(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===uz)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=ix),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=p3.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&p3.set(r,s(i))),i},wNAFCached(n,r,s){const i=g3(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=g3(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){xre(r,e),Tre.set(n,r),p3.delete(n)}}}function mOe(t,e,n,r){if(fOe(n,t),pOe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=tOe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function yOe(t){return uOe(t.Fp),p4(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ire(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const nu=BigInt(0),xa=BigInt(1),ox=BigInt(2),wOe=BigInt(8),bOe={zip215:!0};function vOe(t){const e=yOe(t);return p4(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function EOe(t){const e=vOe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=ox<<BigInt(a*8)-xa,u=n.create,d=Nre(e.n,e.nBitLength),h=e.uvRatio||((E,_)=>{try{return{isValid:!0,value:n.sqrt(E*n.inv(_))}}catch{return{isValid:!1,value:nu}}}),f=e.adjustScalarBytes||(E=>E),p=e.domain||((E,_,R)=>{if(u3("phflag",R),_.length||R)throw new Error("Contexts/pre-hash are not supported");return E});function g(E,_){b1("coordinate "+E,_,nu,l)}function m(E){if(!(E instanceof C))throw new Error("ExtendedPoint expected")}const y=oz((E,_)=>{const{ex:R,ey:x,ez:B}=E,j=E.is0();_==null&&(_=j?wOe:n.inv(B));const U=u(R*_),I=u(x*_),H=u(B*_);if(j)return{x:nu,y:xa};if(H!==xa)throw new Error("invZ was invalid");return{x:U,y:I}}),w=oz(E=>{const{a:_,d:R}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:x,ey:B,ez:j,et:U}=E,I=u(x*x),H=u(B*B),re=u(j*j),ne=u(re*re),ge=u(I*_),te=u(re*u(ge+H)),he=u(ne+u(R*u(I*H)));if(te!==he)throw new Error("bad point: equation left != right (1)");const me=u(x*B),_e=u(j*U);if(me!==_e)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(_,R,x,B){this.ex=_,this.ey=R,this.ez=x,this.et=B,g("x",_),g("y",R),g("z",x),g("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof C)throw new Error("extended point not allowed");const{x:R,y:x}=_||{};return g("x",R),g("y",x),new C(R,x,xa,u(R*x))}static normalizeZ(_){const R=n.invertBatch(_.map(x=>x.ez));return _.map((x,B)=>x.toAffine(R[B])).map(C.fromAffine)}static msm(_,R){return mOe(C,d,_,R)}_setWindowSize(_){P.setWindowSize(this,_)}assertValidity(){w(this)}equals(_){m(_);const{ex:R,ey:x,ez:B}=this,{ex:j,ey:U,ez:I}=_,H=u(R*I),re=u(j*B),ne=u(x*I),ge=u(U*B);return H===re&&ne===ge}is0(){return this.equals(C.ZERO)}negate(){return new C(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:_}=e,{ex:R,ey:x,ez:B}=this,j=u(R*R),U=u(x*x),I=u(ox*u(B*B)),H=u(_*j),re=R+x,ne=u(u(re*re)-j-U),ge=H+U,te=ge-I,he=H-U,me=u(ne*te),_e=u(ge*he),Ce=u(ne*he),Be=u(te*ge);return new C(me,_e,Be,Ce)}add(_){m(_);const{a:R,d:x}=e,{ex:B,ey:j,ez:U,et:I}=this,{ex:H,ey:re,ez:ne,et:ge}=_;if(R===BigInt(-1)){const qe=u((j-B)*(re+H)),pt=u((j+B)*(re-H)),nn=u(pt-qe);if(nn===nu)return this.double();const gn=u(U*ox*ge),Fn=u(I*ox*ne),Qn=Fn+gn,fr=pt+qe,Tn=Fn-gn,z=u(Qn*nn),T=u(fr*Tn),D=u(Qn*Tn),K=u(nn*fr);return new C(z,T,K,D)}const te=u(B*H),he=u(j*re),me=u(I*x*ge),_e=u(U*ne),Ce=u((B+j)*(H+re)-te-he),Be=_e-me,Te=_e+me,xe=u(he-R*te),je=u(Ce*Be),Ue=u(Te*xe),rt=u(Ce*xe),Rt=u(Be*Te);return new C(je,Ue,Rt,rt)}subtract(_){return this.add(_.negate())}wNAF(_){return P.wNAFCached(this,_,C.normalizeZ)}multiply(_){const R=_;b1("scalar",R,xa,r);const{p:x,f:B}=this.wNAF(R);return C.normalizeZ([x,B])[0]}multiplyUnsafe(_,R=C.ZERO){const x=_;return b1("scalar",x,nu,r),x===nu?S:this.is0()||x===xa?this:P.wNAFCachedUnsafe(this,x,C.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,r).is0()}toAffine(_){return y(this,_)}clearCofactor(){const{h:_}=e;return _===xa?this:this.multiplyUnsafe(_)}static fromHex(_,R=!1){const{d:x,a:B}=e,j=n.BYTES;_=wh("pointHex",_,j),u3("zip215",R);const U=_.slice(),I=_[j-1];U[j-1]=I&-129;const H=dT(U),re=R?l:n.ORDER;b1("pointHex.y",H,nu,re);const ne=u(H*H),ge=u(ne-xa),te=u(x*ne-B);let{isValid:he,value:me}=h(ge,te);if(!he)throw new Error("Point.fromHex: invalid y coordinate");const _e=(me&xa)===xa,Ce=(I&128)!==0;if(!R&&me===nu&&Ce)throw new Error("Point.fromHex: x=0 and x_0=1");return Ce!==_e&&(me=u(-me)),C.fromAffine({x:me,y:H})}static fromPrivateKey(_){return M(_).point}toRawBytes(){const{x:_,y:R}=this.toAffine(),x=kU(R,n.BYTES);return x[x.length-1]|=_&xa?128:0,x}toHex(){return f4(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,xa,u(e.Gx*e.Gy)),C.ZERO=new C(nu,xa,xa,nu);const{BASE:N,ZERO:S}=C,P=gOe(C,a*8);function O(E){return bi(E,r)}function L(E){return O(dT(E))}function M(E){const _=n.BYTES;E=wh("private key",E,_);const R=wh("hashed private key",i(E),2*_),x=f(R.slice(0,_)),B=R.slice(_,2*_),j=L(x),U=N.multiply(j),I=U.toRawBytes();return{head:x,prefix:B,scalar:j,point:U,pointBytes:I}}function W(E){return M(E).pointBytes}function F(E=new Uint8Array,..._){const R=iz(..._);return L(i(p(R,wh("context",E),!!s)))}function V(E,_,R={}){E=wh("message",E),s&&(E=s(E));const{prefix:x,scalar:B,pointBytes:j}=M(_),U=F(R.context,x,E),I=N.multiply(U).toRawBytes(),H=F(R.context,I,j,E),re=O(U+H*B);b1("signature.s",re,nu,r);const ne=iz(I,kU(re,n.BYTES));return wh("result",ne,n.BYTES*2)}const $=bOe;function v(E,_,R,x=$){const{context:B,zip215:j}=x,U=n.BYTES;E=wh("signature",E,2*U),_=wh("message",_),R=wh("publicKey",R,U),j!==void 0&&u3("zip215",j),s&&(_=s(_));const I=dT(E.slice(U,2*U));let H,re,ne;try{H=C.fromHex(R,j),re=C.fromHex(E.slice(0,U),j),ne=N.multiplyUnsafe(I)}catch{return!1}if(!j&&H.isSmallOrder())return!1;const ge=F(B,re.toRawBytes(),H.toRawBytes(),_);return re.add(H.multiplyUnsafe(ge)).subtract(ne).clearCofactor().equals(C.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:V,verify:v,ExtendedPoint:C,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(n.BYTES),precompute(E=8,_=C.BASE){return _._setWindowSize(E),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const g4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),dz=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const COe=BigInt(1),hz=BigInt(2);BigInt(3);const _Oe=BigInt(5),AOe=BigInt(8);function SOe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=g4,o=t*t%i*t%i,a=td(o,hz,i)*o%i,c=td(a,COe,i)*t%i,l=td(c,_Oe,i)*c%i,u=td(l,e,i)*l%i,d=td(u,n,i)*u%i,h=td(d,r,i)*d%i,f=td(h,s,i)*h%i,p=td(f,s,i)*h%i,g=td(p,e,i)*l%i;return{pow_p_5_8:td(g,hz,i)*t%i,b2:o}}function IOe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function NOe(t,e){const n=g4,r=bi(e*e*e,n),s=bi(r*r*e,n),i=SOe(t*s).pow_p_5_8;let o=bi(t*r*i,n);const a=bi(e*o*o,n),c=o,l=bi(o*dz,n),u=a===t,d=a===bi(-t,n),h=a===bi(-t*dz,n);return u&&(o=c),(d||h)&&(o=l),cOe(o,n)&&(o=bi(-o,n)),{isValid:u||d,value:o}}const xOe=Nre(g4,void 0,!0),TOe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:xOe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:AOe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:QPe,randomBytes:vre,adjustScalarBytes:IOe,uvRatio:NOe},Rre=EOe(TOe),ROe="EdDSA",kOe="JWT",KR=".",yP="base64url",kre="utf8",Pre="utf8",POe=":",OOe="did",DOe="key",fz="base58btc",MOe="z",BOe="K36",LOe=32;function m4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ore(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?m4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Dre(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Ore(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return m4(n)}function UOe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var S=p[y],P=0,O=C-1;(S!==0||P<m)&&O!==-1;O--,P++)S+=256*N[O]>>>0,N[O]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");m=P,y++}for(var L=C-m;L!==C&&N[L]===0;)L++;for(var M=c.repeat(g);L<C;++L)M+=t.charAt(N[L]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var S=0,P=w-1;(N!==0||S<y)&&P!==-1;P--,S++)N+=a*C[P]>>>0,C[P]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=S,g++}if(p[g]!==" "){for(var O=w-y;O!==w&&C[O]===0;)O++;for(var L=new Uint8Array(m+(w-O)),M=m;O!==w;)L[M++]=C[O++];return L}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var $Oe=UOe,FOe=$Oe;const Mre=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jOe=t=>new TextEncoder().encode(t),WOe=t=>new TextDecoder().decode(t);let zOe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},HOe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bre(this,e)}},GOe=class{constructor(e){this.decoders=e}or(e){return Bre(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Bre=(t,e)=>new GOe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let qOe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new zOe(e,n,r),this.decoder=new HOe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const wP=({name:t,prefix:e,encode:n,decode:r})=>new qOe(t,e,n,r),WI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=FOe(n,e);return wP({prefix:t,name:e,encode:r,decode:i=>Mre(s(i))})},VOe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},KOe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Eo=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>wP({prefix:e,name:t,encode(s){return KOe(s,r,n)},decode(s){return VOe(s,r,n,t)}}),YOe=wP({prefix:"\0",name:"identity",encode:t=>WOe(t),decode:t=>jOe(t)});var QOe=Object.freeze({__proto__:null,identity:YOe});const JOe=Eo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ZOe=Object.freeze({__proto__:null,base2:JOe});const XOe=Eo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eDe=Object.freeze({__proto__:null,base8:XOe});const tDe=WI({prefix:"9",name:"base10",alphabet:"0123456789"});var nDe=Object.freeze({__proto__:null,base10:tDe});const rDe=Eo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sDe=Eo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iDe=Object.freeze({__proto__:null,base16:rDe,base16upper:sDe});const oDe=Eo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aDe=Eo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cDe=Eo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lDe=Eo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uDe=Eo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dDe=Eo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hDe=Eo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fDe=Eo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pDe=Eo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gDe=Object.freeze({__proto__:null,base32:oDe,base32upper:aDe,base32pad:cDe,base32padupper:lDe,base32hex:uDe,base32hexupper:dDe,base32hexpad:hDe,base32hexpadupper:fDe,base32z:pDe});const mDe=WI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yDe=WI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wDe=Object.freeze({__proto__:null,base36:mDe,base36upper:yDe});const bDe=WI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vDe=WI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var EDe=Object.freeze({__proto__:null,base58btc:bDe,base58flickr:vDe});const CDe=Eo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_De=Eo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ADe=Eo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),SDe=Eo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var IDe=Object.freeze({__proto__:null,base64:CDe,base64pad:_De,base64url:ADe,base64urlpad:SDe});const Lre=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),NDe=Lre.reduce((t,e,n)=>(t[n]=e,t),[]),xDe=Lre.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function TDe(t){return t.reduce((e,n)=>(e+=NDe[n],e),"")}function RDe(t){const e=[];for(const n of t){const r=xDe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const kDe=wP({prefix:"🚀",name:"base256emoji",encode:TDe,decode:RDe});var PDe=Object.freeze({__proto__:null,base256emoji:kDe}),ODe=Ure,pz=128,DDe=-128,MDe=Math.pow(2,31);function Ure(t,e,n){e=e||[],n=n||0;for(var r=n;t>=MDe;)e[n++]=t&255|pz,t/=128;for(;t&DDe;)e[n++]=t&255|pz,t>>>=7;return e[n]=t|0,Ure.bytes=n-r+1,e}var BDe=OU,LDe=128,gz=127;function OU(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw OU.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&gz)<<s:(o&gz)*Math.pow(2,s),s+=7}while(o>=LDe);return OU.bytes=i-r,n}var UDe=Math.pow(2,7),$De=Math.pow(2,14),FDe=Math.pow(2,21),jDe=Math.pow(2,28),WDe=Math.pow(2,35),zDe=Math.pow(2,42),HDe=Math.pow(2,49),GDe=Math.pow(2,56),qDe=Math.pow(2,63),VDe=function(t){return t<UDe?1:t<$De?2:t<FDe?3:t<jDe?4:t<WDe?5:t<zDe?6:t<HDe?7:t<GDe?8:t<qDe?9:10},KDe={encode:ODe,decode:BDe,encodingLength:VDe},$re=KDe;const mz=(t,e,n=0)=>($re.encode(t,e,n),e),yz=t=>$re.encodingLength(t),DU=(t,e)=>{const n=e.byteLength,r=yz(t),s=r+yz(n),i=new Uint8Array(s+n);return mz(t,i,0),mz(n,i,r),i.set(e,s),new YDe(t,n,e,i)};let YDe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Fre=({name:t,code:e,encode:n})=>new QDe(t,e,n);let QDe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?DU(this.code,n):n.then(r=>DU(this.code,r))}else throw Error("Unknown type, must be binary type")}};const jre=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),JDe=Fre({name:"sha2-256",code:18,encode:jre("SHA-256")}),ZDe=Fre({name:"sha2-512",code:19,encode:jre("SHA-512")});var XDe=Object.freeze({__proto__:null,sha256:JDe,sha512:ZDe});const Wre=0,e3e="identity",zre=Mre,t3e=t=>DU(Wre,zre(t)),n3e={code:Wre,name:e3e,encode:zre,digest:t3e};var r3e=Object.freeze({__proto__:null,identity:n3e});new TextEncoder,new TextDecoder;const wz={...QOe,...ZOe,...eDe,...nDe,...iDe,...gDe,...wDe,...EDe,...IDe,...PDe};({...XDe,...r3e});function Hre(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const bz=Hre("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),m3=Hre("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Ore(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Gre={utf8:bz,"utf-8":bz,hex:wz.base16,latin1:m3,ascii:m3,binary:m3,...wz};function bP(t,e="utf8"){const n=Gre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function DC(t,e="utf8"){const n=Gre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?m4(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function vz(t){return M0(bP(DC(t,yP),kre))}function YR(t){return bP(DC(Nf(t),kre),yP)}function qre(t){const e=DC(BOe,fz),n=MOe+bP(Dre([e,t]),fz);return[OOe,DOe,n].join(POe)}function s3e(t){return bP(t,yP)}function i3e(t){return DC(t,yP)}function o3e(t){return DC([YR(t.header),YR(t.payload)].join(KR),Pre)}function a3e(t){return[YR(t.header),YR(t.payload),s3e(t.signature)].join(KR)}function MU(t){const e=t.split(KR),n=vz(e[0]),r=vz(e[1]),s=i3e(e[2]),i=DC(e.slice(0,2).join(KR),Pre);return{header:n,payload:r,signature:s,data:i}}function Ez(t=vre(LOe)){const e=Rre.getPublicKey(t);return{secretKey:Dre([t,e]),publicKey:e}}async function c3e(t,e,n,r,s=We.fromMiliseconds(Date.now())){const i={alg:ROe,typ:kOe},o=qre(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=o3e({header:i,payload:c}),u=Rre.sign(l,r.secretKey.slice(0,32));return a3e({header:i,payload:c,signature:u})}var Cz=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},l3e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),u3e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),d3e=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),h3e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),f3e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),p3e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,g3e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,_z=3,m3e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",p3e]],Az=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function y3e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new f3e:typeof navigator<"u"?b3e(navigator.userAgent):E3e()}function w3e(t){return t!==""&&m3e.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function b3e(t){var e=w3e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new h3e;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<_z&&(s=Cz(Cz([],s,!0),C3e(_z-s.length),!0)):s=[];var i=s.join("."),o=v3e(t),a=g3e.exec(t);return a&&a[1]?new d3e(n,i,o,a[1]):new l3e(n,i,o)}function v3e(t){for(var e=0,n=Az.length;e<n;e++){var r=Az[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function E3e(){var t=typeof process<"u"&&process.version;return t?new u3e(process.version.slice(1)):null}function C3e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.getLocalStorage=ts.getLocalStorageOrThrow=ts.getCrypto=ts.getCryptoOrThrow=Vre=ts.getLocation=ts.getLocationOrThrow=y4=ts.getNavigator=ts.getNavigatorOrThrow=B0=ts.getDocument=ts.getDocumentOrThrow=ts.getFromWindowOrThrow=ts.getFromWindow=void 0;function fw(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}ts.getFromWindow=fw;function MC(t){const e=fw(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}ts.getFromWindowOrThrow=MC;function _3e(){return MC("document")}ts.getDocumentOrThrow=_3e;function A3e(){return fw("document")}var B0=ts.getDocument=A3e;function S3e(){return MC("navigator")}ts.getNavigatorOrThrow=S3e;function I3e(){return fw("navigator")}var y4=ts.getNavigator=I3e;function N3e(){return MC("location")}ts.getLocationOrThrow=N3e;function x3e(){return fw("location")}var Vre=ts.getLocation=x3e;function T3e(){return MC("crypto")}ts.getCryptoOrThrow=T3e;function R3e(){return fw("crypto")}ts.getCrypto=R3e;function k3e(){return MC("localStorage")}ts.getLocalStorageOrThrow=k3e;function P3e(){return fw("localStorage")}ts.getLocalStorage=P3e;var w4={};Object.defineProperty(w4,"__esModule",{value:!0});var Kre=w4.getWindowMetadata=void 0;const Sz=ts;function O3e(){let t,e;try{t=Sz.getDocumentOrThrow(),e=Sz.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(m.indexOf("/")===0)y+=m;else{const w=e.pathname.split("/");w.pop();const C=w.join("/");y+=C+"/"+m}h.push(y)}else if(m.indexOf("//")===0){const y=e.protocol+m;h.push(y)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}Kre=w4.getWindowMetadata=O3e;function D3e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=l[h],C=0;for(let N=p-1;(w!==0||C<d)&&N!==-1;N--,C++)w+=256*g[N]>>>0,g[N]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=C,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let y=r.repeat(u);for(;m<p;++m)y+=t.charAt(g[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let C=e[w];if(C===255)return;let N=0;for(let S=f-1;(C!==0||N<h)&&S!==-1;S--,N++)C+=n*p[S]>>>0,p[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");h=N,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)m[y++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var M3e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Qa=D3e(M3e);function Yre(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function L_(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Yre(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function B3e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var S=p[y],P=0,O=C-1;(S!==0||P<m)&&O!==-1;O--,P++)S+=256*N[O]>>>0,N[O]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");m=P,y++}for(var L=C-m;L!==C&&N[L]===0;)L++;for(var M=c.repeat(g);L<C;++L)M+=t.charAt(N[L]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var S=0,P=w-1;(N!==0||S<y)&&P!==-1;P--,S++)N+=a*C[P]>>>0,C[P]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=S,g++}if(p[g]!==" "){for(var O=w-y;O!==w&&C[O]===0;)O++;for(var L=new Uint8Array(m+(w-O)),M=m;O!==w;)L[M++]=C[O++];return L}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var L3e=B3e,U3e=L3e;const $3e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},F3e=t=>new TextEncoder().encode(t),j3e=t=>new TextDecoder().decode(t);class W3e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class z3e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Qre(this,e)}}class H3e{constructor(e){this.decoders=e}or(e){return Qre(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Qre=(t,e)=>new H3e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class G3e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new W3e(e,n,r),this.decoder=new z3e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const vP=({name:t,prefix:e,encode:n,decode:r})=>new G3e(t,e,n,r),zI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=U3e(n,e);return vP({prefix:t,name:e,encode:r,decode:i=>$3e(s(i))})},q3e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},V3e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Co=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>vP({prefix:e,name:t,encode(s){return V3e(s,r,n)},decode(s){return q3e(s,r,n,t)}}),K3e=vP({prefix:"\0",name:"identity",encode:t=>j3e(t),decode:t=>F3e(t)}),Y3e=Object.freeze(Object.defineProperty({__proto__:null,identity:K3e},Symbol.toStringTag,{value:"Module"})),Q3e=Co({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),J3e=Object.freeze(Object.defineProperty({__proto__:null,base2:Q3e},Symbol.toStringTag,{value:"Module"})),Z3e=Co({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),X3e=Object.freeze(Object.defineProperty({__proto__:null,base8:Z3e},Symbol.toStringTag,{value:"Module"})),eMe=zI({prefix:"9",name:"base10",alphabet:"0123456789"}),tMe=Object.freeze(Object.defineProperty({__proto__:null,base10:eMe},Symbol.toStringTag,{value:"Module"})),nMe=Co({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rMe=Co({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),sMe=Object.freeze(Object.defineProperty({__proto__:null,base16:nMe,base16upper:rMe},Symbol.toStringTag,{value:"Module"})),iMe=Co({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),oMe=Co({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aMe=Co({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cMe=Co({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lMe=Co({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uMe=Co({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dMe=Co({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hMe=Co({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fMe=Co({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),pMe=Object.freeze(Object.defineProperty({__proto__:null,base32:iMe,base32hex:lMe,base32hexpad:dMe,base32hexpadupper:hMe,base32hexupper:uMe,base32pad:aMe,base32padupper:cMe,base32upper:oMe,base32z:fMe},Symbol.toStringTag,{value:"Module"})),gMe=zI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mMe=zI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yMe=Object.freeze(Object.defineProperty({__proto__:null,base36:gMe,base36upper:mMe},Symbol.toStringTag,{value:"Module"})),wMe=zI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bMe=zI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),vMe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:wMe,base58flickr:bMe},Symbol.toStringTag,{value:"Module"})),EMe=Co({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),CMe=Co({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_Me=Co({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),AMe=Co({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),SMe=Object.freeze(Object.defineProperty({__proto__:null,base64:EMe,base64pad:CMe,base64url:_Me,base64urlpad:AMe},Symbol.toStringTag,{value:"Module"})),Jre=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),IMe=Jre.reduce((t,e,n)=>(t[n]=e,t),[]),NMe=Jre.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function xMe(t){return t.reduce((e,n)=>(e+=IMe[n],e),"")}function TMe(t){const e=[];for(const n of t){const r=NMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const RMe=vP({prefix:"🚀",name:"base256emoji",encode:xMe,decode:TMe}),kMe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:RMe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Iz={...Y3e,...J3e,...X3e,...tMe,...sMe,...pMe,...yMe,...vMe,...SMe,...kMe};function Zre(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Nz=Zre("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),y3=Zre("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Yre(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Xre={utf8:Nz,"utf-8":Nz,hex:Iz.base16,latin1:y3,ascii:y3,binary:y3,...Iz};function Ol(t,e="utf8"){const n=Xre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function cc(t,e="utf8"){const n=Xre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const PMe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},OMe="PARSE_ERROR",DMe="INVALID_REQUEST",MMe="METHOD_NOT_FOUND",BMe="INVALID_PARAMS",ese="INTERNAL_ERROR",b4="SERVER_ERROR",LMe=[-32700,-32600,-32601,-32602,-32603],U_={[OMe]:{code:-32700,message:"Parse error"},[DMe]:{code:-32600,message:"Invalid Request"},[MMe]:{code:-32601,message:"Method not found"},[BMe]:{code:-32602,message:"Invalid params"},[ese]:{code:-32603,message:"Internal error"},[b4]:{code:-32e3,message:"Server error"}},tse=b4;function UMe(t){return LMe.includes(t)}function xz(t){return Object.keys(U_).includes(t)?U_[t]:U_[tse]}function $Me(t){const e=Object.values(U_).find(n=>n.code===t);return e||U_[tse]}function nse(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var rse={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var BU=function(t,e){return BU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},BU(t,e)};function FMe(t,e){BU(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var LU=function(){return LU=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LU.apply(this,arguments)};function jMe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function WMe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function zMe(t,e){return function(n,r){e(n,r,t)}}function HMe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function GMe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function qMe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function VMe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function KMe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function UU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sse(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function YMe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sse(arguments[e]));return t}function QMe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function tS(t){return this instanceof tS?(this.v=t,this):new tS(t)}function JMe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof tS?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function ZMe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:tS(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function XMe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof UU=="function"?UU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function eBe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function tBe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function nBe(t){return t&&t.__esModule?t:{default:t}}function rBe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function sBe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const iBe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return LU},__asyncDelegator:ZMe,__asyncGenerator:JMe,__asyncValues:XMe,__await:tS,__awaiter:GMe,__classPrivateFieldGet:rBe,__classPrivateFieldSet:sBe,__createBinding:VMe,__decorate:WMe,__exportStar:KMe,__extends:FMe,__generator:qMe,__importDefault:nBe,__importStar:tBe,__makeTemplateObject:eBe,__metadata:HMe,__param:zMe,__read:sse,__rest:jMe,__spread:YMe,__spreadArrays:QMe,__values:UU},Symbol.toStringTag,{value:"Module"})),oBe=oI(iBe);var bh={},Tz;function aBe(){if(Tz)return bh;Tz=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.isBrowserCryptoAvailable=bh.getSubtleCrypto=bh.getBrowerCrypto=void 0;function t(){return(ti==null?void 0:ti.crypto)||(ti==null?void 0:ti.msCrypto)||{}}bh.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}bh.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return bh.isBrowserCryptoAvailable=n,bh}var vh={},Rz;function cBe(){if(Rz)return vh;Rz=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.isBrowser=vh.isNode=vh.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vh.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vh.isNode=e;function n(){return!t()&&!e()}return vh.isBrowser=n,vh}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=oBe;e.__exportStar(aBe(),t),e.__exportStar(cBe(),t)})(rse);function hd(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ey(t=6){return BigInt(hd(t))}function hg(t,e,n){return{id:n||hd(),jsonrpc:"2.0",method:t,params:e}}function EP(t,e){return{id:t,jsonrpc:"2.0",result:e}}function CP(t,e,n){return{id:t,jsonrpc:"2.0",error:lBe(e)}}function lBe(t,e){return typeof t>"u"?xz(ese):(typeof t=="string"&&(t=Object.assign(Object.assign({},xz(b4)),{message:t})),UMe(t.code)&&(t=$Me(t.code)),t)}let uBe=class{},dBe=class extends uBe{constructor(){super()}},hBe=class extends dBe{constructor(e){super()}};const fBe="^https?:",pBe="^wss?:";function gBe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function ise(t,e){const n=gBe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function kz(t){return ise(t,fBe)}function Pz(t){return ise(t,pBe)}function mBe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ose(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function v4(t){return ose(t)&&"method"in t}function _P(t){return ose(t)&&(fd(t)||Sl(t))}function fd(t){return"result"in t}function Sl(t){return"error"in t}let Kl=class extends hBe{constructor(e){super(e),this.events=new Vl.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(hg(e.method,e.params||[],e.id||Ey().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Sl(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),_P(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const yBe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),wBe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Oz=t=>t.split("?")[0],Dz=10,bBe=yBe();let vBe=class{constructor(e){if(this.url=e,this.events=new Vl.EventEmitter,this.registering=!1,!Pz(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Nf(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Pz(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=rse.isReactNative()?void 0:{rejectUnauthorized:!mBe(e)},i=new bBe(e,[],s);wBe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?M0(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=CP(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return nse(e,Oz(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Dz&&this.events.setMaxListeners(Dz)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Oz(this.url)}`));return this.events.emit("register_error",n),n}};var $U={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ti<"u"&&ti,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ti<"u"&&ti||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(E){return E&&DataView.prototype.isPrototypeOf(E)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(E){return E&&u.indexOf(Object.prototype.toString.call(E))>-1};function h(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function f(E){return typeof E!="string"&&(E=String(E)),E}function p(E){var _={next:function(){var R=E.shift();return{done:R===void 0,value:R}}};return c.iterable&&(_[Symbol.iterator]=function(){return _}),_}function g(E){this.map={},E instanceof g?E.forEach(function(_,R){this.append(R,_)},this):Array.isArray(E)?E.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(_){this.append(_,E[_])},this)}g.prototype.append=function(E,_){E=h(E),_=f(_);var R=this.map[E];this.map[E]=R?R+", "+_:_},g.prototype.delete=function(E){delete this.map[h(E)]},g.prototype.get=function(E){return E=h(E),this.has(E)?this.map[E]:null},g.prototype.has=function(E){return this.map.hasOwnProperty(h(E))},g.prototype.set=function(E,_){this.map[h(E)]=f(_)},g.prototype.forEach=function(E,_){for(var R in this.map)this.map.hasOwnProperty(R)&&E.call(_,this.map[R],R,this)},g.prototype.keys=function(){var E=[];return this.forEach(function(_,R){E.push(R)}),p(E)},g.prototype.values=function(){var E=[];return this.forEach(function(_){E.push(_)}),p(E)},g.prototype.entries=function(){var E=[];return this.forEach(function(_,R){E.push([R,_])}),p(E)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(E){if(!E._noBody){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}}function y(E){return new Promise(function(_,R){E.onload=function(){_(E.result)},E.onerror=function(){R(E.error)}})}function w(E){var _=new FileReader,R=y(_);return _.readAsArrayBuffer(E),R}function C(E){var _=new FileReader,R=y(_),x=/charset=([A-Za-z0-9_-]+)/.exec(E.type),B=x?x[1]:"utf-8";return _.readAsText(E,B),R}function N(E){for(var _=new Uint8Array(E),R=new Array(_.length),x=0;x<_.length;x++)R[x]=String.fromCharCode(_[x]);return R.join("")}function S(E){if(E.slice)return E.slice(0);var _=new Uint8Array(E.byteLength);return _.set(new Uint8Array(E)),_.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:c.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:c.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():c.arrayBuffer&&c.blob&&l(E)?(this._bodyArrayBuffer=S(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||d(E))?this._bodyArrayBuffer=S(E):this._bodyText=E=Object.prototype.toString.call(E):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=m(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(E){var _=E.toUpperCase();return O.indexOf(_)>-1?_:E}function M(E,_){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var R=_.body;if(E instanceof M){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,_.headers||(this.headers=new g(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!R&&E._bodyInit!=null&&(R=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new g(_.headers)),this.method=L(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function W(E){var _=new FormData;return E.trim().split("&").forEach(function(R){if(R){var x=R.split("="),B=x.shift().replace(/\+/g," "),j=x.join("=").replace(/\+/g," ");_.append(decodeURIComponent(B),decodeURIComponent(j))}}),_}function F(E){var _=new g,R=E.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var B=x.split(":"),j=B.shift().trim();if(j){var U=B.join(":").trim();try{_.append(j,U)}catch(I){console.warn("Response "+I.message)}}}),_}P.call(M.prototype);function V(E,_){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new g(_.headers),this.url=_.url||"",this._initBody(E)}P.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},V.error=function(){var E=new V(null,{status:200,statusText:""});return E.ok=!1,E.status=0,E.type="error",E};var $=[301,302,303,307,308];V.redirect=function(E,_){if($.indexOf(_)===-1)throw new RangeError("Invalid status code");return new V(null,{status:_,headers:{location:E}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,R){this.message=_,this.name=R;var x=Error(_);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(E,_){return new Promise(function(R,x){var B=new M(E,_);if(B.signal&&B.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function U(){j.abort()}j.onload=function(){var re={statusText:j.statusText,headers:F(j.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(j.status<200||j.status>599)?re.status=200:re.status=j.status,re.url="responseURL"in j?j.responseURL:re.headers.get("X-Request-URL");var ne="response"in j?j.response:j.responseText;setTimeout(function(){R(new V(ne,re))},0)},j.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){x(new o.DOMException("Aborted","AbortError"))},0)};function I(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(j.open(B.method,I(B.url),!0),B.credentials==="include"?j.withCredentials=!0:B.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof g||a.Headers&&_.headers instanceof a.Headers)){var H=[];Object.getOwnPropertyNames(_.headers).forEach(function(re){H.push(h(re)),j.setRequestHeader(re,f(_.headers[re]))}),B.headers.forEach(function(re,ne){H.indexOf(ne)===-1&&j.setRequestHeader(ne,re)})}else B.headers.forEach(function(re,ne){j.setRequestHeader(ne,re)});B.signal&&(B.signal.addEventListener("abort",U),j.onreadystatechange=function(){j.readyState===4&&B.signal.removeEventListener("abort",U)}),j.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return v.polyfill=!0,a.fetch||(a.fetch=v,a.Headers=g,a.Request=M,a.Response=V),o.Headers=g,o.Request=M,o.Response=V,o.fetch=v,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})($U,$U.exports);var EBe=$U.exports;const Mz=ih(EBe);var CBe=Object.defineProperty,_Be=Object.defineProperties,ABe=Object.getOwnPropertyDescriptors,Bz=Object.getOwnPropertySymbols,SBe=Object.prototype.hasOwnProperty,IBe=Object.prototype.propertyIsEnumerable,Lz=(t,e,n)=>e in t?CBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uz=(t,e)=>{for(var n in e||(e={}))SBe.call(e,n)&&Lz(t,n,e[n]);if(Bz)for(var n of Bz(e))IBe.call(e,n)&&Lz(t,n,e[n]);return t},$z=(t,e)=>_Be(t,ABe(e));const NBe={Accept:"application/json","Content-Type":"application/json"},xBe="POST",Fz={headers:NBe,method:xBe},jz=10;let Ku=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Vl.EventEmitter,this.isAvailable=!1,this.registering=!1,!kz(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Nf(e),r=await(await Mz(this.url,$z(Uz({},Fz),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!kz(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Nf({id:1,jsonrpc:"2.0",method:"test",params:[]});await Mz(e,$z(Uz({},Fz),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?M0(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=CP(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return nse(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>jz&&this.events.setMaxListeners(jz)}};const $_={getSIWX(){return Oe.state.siwx},async initializeIfEnabled(){var i;const t=Oe.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Fi.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),xs.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Vt._getClient())==null?void 0:i.disconnect().catch(console.error)),Nn.reset("Connect"),Tu.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Oe.state.siwx,e=Bt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=Vt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();lt.getConnectorId(n.chainNamespace)===ut.CONNECTOR_ID.AUTH&&Nn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Fi.close(),xs.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Fi.state.open||Nn.state.view==="ApproveTransaction")&&await Fi.open({view:"SIWXSignMessage"}),i.isSmartAccount?Tu.showError("This application might not support Smart Accounts"):Tu.showError("Signature declined"),xs.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Vt.disconnect():Fi.close(),Nn.reset("Connect"),xs.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=Oe.state.siwx,e=Bt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Nn.state.view==="ApproveTransaction",r=Nn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=$_.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Tu.showLoading("Authenticating...",{autoClose:!1}),wt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),xs.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:$_.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),xs.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:$_.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Tu.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=J.state.activeChain;return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=wt.state.preferredAccountTypes)==null?void 0:n[t])===mo.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function ax(t,e){return lt.getConnectorId(t)===e}function TBe(t){const e=Array.from(J.state.chains.keys());let n=[];return t?(n.push([t,J.state.chains.get(t)]),ax(t,ut.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&ax(r,ut.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,J.state.chains.get(r)])}):ax(t,ut.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&ax(r,ut.CONNECTOR_ID.AUTH)&&n.push([r,J.state.chains.get(r)])})):n=Array.from(J.state.chains.entries()),n}const Ga={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},QR={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ut.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ut.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ut.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ut.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ut.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ut.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ut.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ut.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ut.CONNECTOR_ID.COINBASE]:"Coinbase",[ut.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ut.CONNECTOR_ID.LEDGER]:"Ledger",[ut.CONNECTOR_ID.SAFE]:"Safe"}},AP={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ga.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},RBe=new AbortController,xd={EmbeddedWalletAbortController:RBe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${kBe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function kBe(){return typeof window<"u"}const PBe={createLogger(t,e="error"){const n=hw({level:e}),{logger:r}=mP({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},OBe="rpc.walletconnect.org";function Wz(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const w3=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],yb={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===OBe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ut.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ut.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return w3.includes(e)?Wz(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:QR.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>yb.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(ug(a.url,a.config))}),w3.includes(t.caipNetworkId)&&r.push(ug(Wz(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(ug(a))}),FR(r)},extendWagmiTransports(t,e,n){if(w3.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return FR([n,ug(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ut.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=bt.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},JR={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ta=ms({providers:{...JR},providerIds:{...JR}}),Lr={state:Ta,subscribeKey(t,e){return Go(Ta,t,e)},subscribe(t){return zo(Ta,()=>{t(Ta)})},subscribeProviders(t){return zo(Ta.providers,()=>t(Ta.providers))},setProvider(t,e){e&&(Ta.providers[t]=O0(e))},getProvider(t){return Ta.providers[t]},setProviderId(t,e){e&&(Ta.providerIds[t]=e)},getProviderId(t){if(t)return Ta.providerIds[t]},reset(){Ta.providers={...JR},Ta.providerIds={...JR}},resetChain(t){Ta.providers[t]=void 0,Ta.providerIds[t]=void 0}};var mn={},SP={};SP.byteLength=BBe;SP.toByteArray=UBe;SP.fromByteArray=jBe;var Bd=[],bl=[],DBe=typeof Uint8Array<"u"?Uint8Array:Array,b3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Hw=0,MBe=b3.length;Hw<MBe;++Hw)Bd[Hw]=b3[Hw],bl[b3.charCodeAt(Hw)]=Hw;bl[45]=62;bl[95]=63;function ase(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function BBe(t){var e=ase(t),n=e[0],r=e[1];return(n+r)*3/4-r}function LBe(t,e,n){return(e+n)*3/4-n}function UBe(t){var e,n=ase(t),r=n[0],s=n[1],i=new DBe(LBe(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=bl[t.charCodeAt(c)]<<18|bl[t.charCodeAt(c+1)]<<12|bl[t.charCodeAt(c+2)]<<6|bl[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=bl[t.charCodeAt(c)]<<2|bl[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=bl[t.charCodeAt(c)]<<10|bl[t.charCodeAt(c+1)]<<4|bl[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function $Be(t){return Bd[t>>18&63]+Bd[t>>12&63]+Bd[t>>6&63]+Bd[t&63]}function FBe(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push($Be(r));return s.join("")}function jBe(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(FBe(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(Bd[e>>2]+Bd[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(Bd[e>>10]+Bd[e>>4&63]+Bd[e<<2&63]+"=")),s.join("")}var E4={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */E4.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-l}return(f?-1:1)*o*Math.pow(2,i-r)};E4.write=function(t,e,n,r,s,i){var o,a,c,l=i*8-s-1,u=(1<<l)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[n+f]=o&255,f+=p,o/=256,l-=8);t[n+f-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=SP,n=E4,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const z=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(z,T),z.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(z){if(z>s)throw new RangeError('The value "'+z+'" is invalid for option "size"');const T=new Uint8Array(z);return Object.setPrototypeOf(T,a.prototype),T}function a(z,T,D){if(typeof z=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(z)}return c(z,T,D)}a.poolSize=8192;function c(z,T,D){if(typeof z=="string")return h(z,T);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(gn(z,ArrayBuffer)||z&&gn(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gn(z,SharedArrayBuffer)||z&&gn(z.buffer,SharedArrayBuffer)))return g(z,T,D);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=z.valueOf&&z.valueOf();if(K!=null&&K!==z)return a.from(K,T,D);const X=m(z);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return a.from(z[Symbol.toPrimitive]("string"),T,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}a.from=function(z,T,D){return c(z,T,D)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function u(z,T,D){return l(z),z<=0?o(z):T!==void 0?typeof D=="string"?o(z).fill(T,D):o(z).fill(T):o(z)}a.alloc=function(z,T,D){return u(z,T,D)};function d(z){return l(z),o(z<0?0:y(z)|0)}a.allocUnsafe=function(z){return d(z)},a.allocUnsafeSlow=function(z){return d(z)};function h(z,T){if((typeof T!="string"||T==="")&&(T="utf8"),!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const D=C(z,T)|0;let K=o(D);const X=K.write(z,T);return X!==D&&(K=K.slice(0,X)),K}function f(z){const T=z.length<0?0:y(z.length)|0,D=o(T);for(let K=0;K<T;K+=1)D[K]=z[K]&255;return D}function p(z){if(gn(z,Uint8Array)){const T=new Uint8Array(z);return g(T.buffer,T.byteOffset,T.byteLength)}return f(z)}function g(z,T,D){if(T<0||z.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<T+(D||0))throw new RangeError('"length" is outside of buffer bounds');let K;return T===void 0&&D===void 0?K=new Uint8Array(z):D===void 0?K=new Uint8Array(z,T):K=new Uint8Array(z,T,D),Object.setPrototypeOf(K,a.prototype),K}function m(z){if(a.isBuffer(z)){const T=y(z.length)|0,D=o(T);return D.length===0||z.copy(D,0,0,T),D}if(z.length!==void 0)return typeof z.length!="number"||Fn(z.length)?o(0):f(z);if(z.type==="Buffer"&&Array.isArray(z.data))return f(z.data)}function y(z){if(z>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return z|0}function w(z){return+z!=z&&(z=0),a.alloc(+z)}a.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==a.prototype},a.compare=function(T,D){if(gn(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),gn(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),!a.isBuffer(T)||!a.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===D)return 0;let K=T.length,X=D.length;for(let ue=0,ve=Math.min(K,X);ue<ve;++ue)if(T[ue]!==D[ue]){K=T[ue],X=D[ue];break}return K<X?-1:X<K?1:0},a.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(T,D){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return a.alloc(0);let K;if(D===void 0)for(D=0,K=0;K<T.length;++K)D+=T[K].length;const X=a.allocUnsafe(D);let ue=0;for(K=0;K<T.length;++K){let ve=T[K];if(gn(ve,Uint8Array))ue+ve.length>X.length?(a.isBuffer(ve)||(ve=a.from(ve)),ve.copy(X,ue)):Uint8Array.prototype.set.call(X,ve,ue);else if(a.isBuffer(ve))ve.copy(X,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=ve.length}return X};function C(z,T){if(a.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||gn(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const D=z.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&D===0)return 0;let X=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return rt(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return pt(z).length;default:if(X)return K?-1:rt(z).length;T=(""+T).toLowerCase(),X=!0}}a.byteLength=C;function N(z,T,D){let K=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,T>>>=0,D<=T))return"";for(z||(z="utf8");;)switch(z){case"hex":return B(this,T,D);case"utf8":case"utf-8":return v(this,T,D);case"ascii":return R(this,T,D);case"latin1":case"binary":return x(this,T,D);case"base64":return $(this,T,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,T,D);default:if(K)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),K=!0}}a.prototype._isBuffer=!0;function S(z,T,D){const K=z[T];z[T]=z[D],z[D]=K}a.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<T;D+=2)S(this,D,D+1);return this},a.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<T;D+=4)S(this,D,D+3),S(this,D+1,D+2);return this},a.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<T;D+=8)S(this,D,D+7),S(this,D+1,D+6),S(this,D+2,D+5),S(this,D+3,D+4);return this},a.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?v(this,0,T):N.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(T){if(!a.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:a.compare(this,T)===0},a.prototype.inspect=function(){let T="";const D=t.INSPECT_MAX_BYTES;return T=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(T+=" ... "),"<Buffer "+T+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(T,D,K,X,ue){if(gn(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),!a.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(D===void 0&&(D=0),K===void 0&&(K=T?T.length:0),X===void 0&&(X=0),ue===void 0&&(ue=this.length),D<0||K>T.length||X<0||ue>this.length)throw new RangeError("out of range index");if(X>=ue&&D>=K)return 0;if(X>=ue)return-1;if(D>=K)return 1;if(D>>>=0,K>>>=0,X>>>=0,ue>>>=0,this===T)return 0;let ve=ue-X,ln=K-D;const Dt=Math.min(ve,ln),Gt=this.slice(X,ue),Jn=T.slice(D,K);for(let Je=0;Je<Dt;++Je)if(Gt[Je]!==Jn[Je]){ve=Gt[Je],ln=Jn[Je];break}return ve<ln?-1:ln<ve?1:0};function P(z,T,D,K,X){if(z.length===0)return-1;if(typeof D=="string"?(K=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Fn(D)&&(D=X?0:z.length-1),D<0&&(D=z.length+D),D>=z.length){if(X)return-1;D=z.length-1}else if(D<0)if(X)D=0;else return-1;if(typeof T=="string"&&(T=a.from(T,K)),a.isBuffer(T))return T.length===0?-1:O(z,T,D,K,X);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(z,T,D):Uint8Array.prototype.lastIndexOf.call(z,T,D):O(z,[T],D,K,X);throw new TypeError("val must be string, number or Buffer")}function O(z,T,D,K,X){let ue=1,ve=z.length,ln=T.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(z.length<2||T.length<2)return-1;ue=2,ve/=2,ln/=2,D/=2}function Dt(Jn,Je){return ue===1?Jn[Je]:Jn.readUInt16BE(Je*ue)}let Gt;if(X){let Jn=-1;for(Gt=D;Gt<ve;Gt++)if(Dt(z,Gt)===Dt(T,Jn===-1?0:Gt-Jn)){if(Jn===-1&&(Jn=Gt),Gt-Jn+1===ln)return Jn*ue}else Jn!==-1&&(Gt-=Gt-Jn),Jn=-1}else for(D+ln>ve&&(D=ve-ln),Gt=D;Gt>=0;Gt--){let Jn=!0;for(let Je=0;Je<ln;Je++)if(Dt(z,Gt+Je)!==Dt(T,Je)){Jn=!1;break}if(Jn)return Gt}return-1}a.prototype.includes=function(T,D,K){return this.indexOf(T,D,K)!==-1},a.prototype.indexOf=function(T,D,K){return P(this,T,D,K,!0)},a.prototype.lastIndexOf=function(T,D,K){return P(this,T,D,K,!1)};function L(z,T,D,K){D=Number(D)||0;const X=z.length-D;K?(K=Number(K),K>X&&(K=X)):K=X;const ue=T.length;K>ue/2&&(K=ue/2);let ve;for(ve=0;ve<K;++ve){const ln=parseInt(T.substr(ve*2,2),16);if(Fn(ln))return ve;z[D+ve]=ln}return ve}function M(z,T,D,K){return nn(rt(T,z.length-D),z,D,K)}function W(z,T,D,K){return nn(Rt(T),z,D,K)}function F(z,T,D,K){return nn(pt(T),z,D,K)}function V(z,T,D,K){return nn(qe(T,z.length-D),z,D,K)}a.prototype.write=function(T,D,K,X){if(D===void 0)X="utf8",K=this.length,D=0;else if(K===void 0&&typeof D=="string")X=D,K=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(K)?(K=K>>>0,X===void 0&&(X="utf8")):(X=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-D;if((K===void 0||K>ue)&&(K=ue),T.length>0&&(K<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let ve=!1;for(;;)switch(X){case"hex":return L(this,T,D,K);case"utf8":case"utf-8":return M(this,T,D,K);case"ascii":case"latin1":case"binary":return W(this,T,D,K);case"base64":return F(this,T,D,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,T,D,K);default:if(ve)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ve=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(z,T,D){return T===0&&D===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(T,D))}function v(z,T,D){D=Math.min(z.length,D);const K=[];let X=T;for(;X<D;){const ue=z[X];let ve=null,ln=ue>239?4:ue>223?3:ue>191?2:1;if(X+ln<=D){let Dt,Gt,Jn,Je;switch(ln){case 1:ue<128&&(ve=ue);break;case 2:Dt=z[X+1],(Dt&192)===128&&(Je=(ue&31)<<6|Dt&63,Je>127&&(ve=Je));break;case 3:Dt=z[X+1],Gt=z[X+2],(Dt&192)===128&&(Gt&192)===128&&(Je=(ue&15)<<12|(Dt&63)<<6|Gt&63,Je>2047&&(Je<55296||Je>57343)&&(ve=Je));break;case 4:Dt=z[X+1],Gt=z[X+2],Jn=z[X+3],(Dt&192)===128&&(Gt&192)===128&&(Jn&192)===128&&(Je=(ue&15)<<18|(Dt&63)<<12|(Gt&63)<<6|Jn&63,Je>65535&&Je<1114112&&(ve=Je))}}ve===null?(ve=65533,ln=1):ve>65535&&(ve-=65536,K.push(ve>>>10&1023|55296),ve=56320|ve&1023),K.push(ve),X+=ln}return _(K)}const E=4096;function _(z){const T=z.length;if(T<=E)return String.fromCharCode.apply(String,z);let D="",K=0;for(;K<T;)D+=String.fromCharCode.apply(String,z.slice(K,K+=E));return D}function R(z,T,D){let K="";D=Math.min(z.length,D);for(let X=T;X<D;++X)K+=String.fromCharCode(z[X]&127);return K}function x(z,T,D){let K="";D=Math.min(z.length,D);for(let X=T;X<D;++X)K+=String.fromCharCode(z[X]);return K}function B(z,T,D){const K=z.length;(!T||T<0)&&(T=0),(!D||D<0||D>K)&&(D=K);let X="";for(let ue=T;ue<D;++ue)X+=Qn[z[ue]];return X}function j(z,T,D){const K=z.slice(T,D);let X="";for(let ue=0;ue<K.length-1;ue+=2)X+=String.fromCharCode(K[ue]+K[ue+1]*256);return X}a.prototype.slice=function(T,D){const K=this.length;T=~~T,D=D===void 0?K:~~D,T<0?(T+=K,T<0&&(T=0)):T>K&&(T=K),D<0?(D+=K,D<0&&(D=0)):D>K&&(D=K),D<T&&(D=T);const X=this.subarray(T,D);return Object.setPrototypeOf(X,a.prototype),X};function U(z,T,D){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+T>D)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(T,D,K){T=T>>>0,D=D>>>0,K||U(T,D,this.length);let X=this[T],ue=1,ve=0;for(;++ve<D&&(ue*=256);)X+=this[T+ve]*ue;return X},a.prototype.readUintBE=a.prototype.readUIntBE=function(T,D,K){T=T>>>0,D=D>>>0,K||U(T,D,this.length);let X=this[T+--D],ue=1;for(;D>0&&(ue*=256);)X+=this[T+--D]*ue;return X},a.prototype.readUint8=a.prototype.readUInt8=function(T,D){return T=T>>>0,D||U(T,1,this.length),this[T]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(T,D){return T=T>>>0,D||U(T,2,this.length),this[T]|this[T+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(T,D){return T=T>>>0,D||U(T,2,this.length),this[T]<<8|this[T+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(T,D){return T=T>>>0,D||U(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(T,D){return T=T>>>0,D||U(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},a.prototype.readBigUInt64LE=fr(function(T){T=T>>>0,Te(T,"offset");const D=this[T],K=this[T+7];(D===void 0||K===void 0)&&xe(T,this.length-8);const X=D+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,ue=this[++T]+this[++T]*2**8+this[++T]*2**16+K*2**24;return BigInt(X)+(BigInt(ue)<<BigInt(32))}),a.prototype.readBigUInt64BE=fr(function(T){T=T>>>0,Te(T,"offset");const D=this[T],K=this[T+7];(D===void 0||K===void 0)&&xe(T,this.length-8);const X=D*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],ue=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+K;return(BigInt(X)<<BigInt(32))+BigInt(ue)}),a.prototype.readIntLE=function(T,D,K){T=T>>>0,D=D>>>0,K||U(T,D,this.length);let X=this[T],ue=1,ve=0;for(;++ve<D&&(ue*=256);)X+=this[T+ve]*ue;return ue*=128,X>=ue&&(X-=Math.pow(2,8*D)),X},a.prototype.readIntBE=function(T,D,K){T=T>>>0,D=D>>>0,K||U(T,D,this.length);let X=D,ue=1,ve=this[T+--X];for(;X>0&&(ue*=256);)ve+=this[T+--X]*ue;return ue*=128,ve>=ue&&(ve-=Math.pow(2,8*D)),ve},a.prototype.readInt8=function(T,D){return T=T>>>0,D||U(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},a.prototype.readInt16LE=function(T,D){T=T>>>0,D||U(T,2,this.length);const K=this[T]|this[T+1]<<8;return K&32768?K|4294901760:K},a.prototype.readInt16BE=function(T,D){T=T>>>0,D||U(T,2,this.length);const K=this[T+1]|this[T]<<8;return K&32768?K|4294901760:K},a.prototype.readInt32LE=function(T,D){return T=T>>>0,D||U(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},a.prototype.readInt32BE=function(T,D){return T=T>>>0,D||U(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},a.prototype.readBigInt64LE=fr(function(T){T=T>>>0,Te(T,"offset");const D=this[T],K=this[T+7];(D===void 0||K===void 0)&&xe(T,this.length-8);const X=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(K<<24);return(BigInt(X)<<BigInt(32))+BigInt(D+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),a.prototype.readBigInt64BE=fr(function(T){T=T>>>0,Te(T,"offset");const D=this[T],K=this[T+7];(D===void 0||K===void 0)&&xe(T,this.length-8);const X=(D<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(X)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+K)}),a.prototype.readFloatLE=function(T,D){return T=T>>>0,D||U(T,4,this.length),n.read(this,T,!0,23,4)},a.prototype.readFloatBE=function(T,D){return T=T>>>0,D||U(T,4,this.length),n.read(this,T,!1,23,4)},a.prototype.readDoubleLE=function(T,D){return T=T>>>0,D||U(T,8,this.length),n.read(this,T,!0,52,8)},a.prototype.readDoubleBE=function(T,D){return T=T>>>0,D||U(T,8,this.length),n.read(this,T,!1,52,8)};function I(z,T,D,K,X,ue){if(!a.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>X||T<ue)throw new RangeError('"value" argument is out of bounds');if(D+K>z.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(T,D,K,X){if(T=+T,D=D>>>0,K=K>>>0,!X){const ln=Math.pow(2,8*K)-1;I(this,T,D,K,ln,0)}let ue=1,ve=0;for(this[D]=T&255;++ve<K&&(ue*=256);)this[D+ve]=T/ue&255;return D+K},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(T,D,K,X){if(T=+T,D=D>>>0,K=K>>>0,!X){const ln=Math.pow(2,8*K)-1;I(this,T,D,K,ln,0)}let ue=K-1,ve=1;for(this[D+ue]=T&255;--ue>=0&&(ve*=256);)this[D+ue]=T/ve&255;return D+K},a.prototype.writeUint8=a.prototype.writeUInt8=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,1,255,0),this[D]=T&255,D+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,2,65535,0),this[D]=T&255,this[D+1]=T>>>8,D+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,2,65535,0),this[D]=T>>>8,this[D+1]=T&255,D+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,4,4294967295,0),this[D+3]=T>>>24,this[D+2]=T>>>16,this[D+1]=T>>>8,this[D]=T&255,D+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,4,4294967295,0),this[D]=T>>>24,this[D+1]=T>>>16,this[D+2]=T>>>8,this[D+3]=T&255,D+4};function H(z,T,D,K,X){Be(T,K,X,z,D,7);let ue=Number(T&BigInt(4294967295));z[D++]=ue,ue=ue>>8,z[D++]=ue,ue=ue>>8,z[D++]=ue,ue=ue>>8,z[D++]=ue;let ve=Number(T>>BigInt(32)&BigInt(4294967295));return z[D++]=ve,ve=ve>>8,z[D++]=ve,ve=ve>>8,z[D++]=ve,ve=ve>>8,z[D++]=ve,D}function re(z,T,D,K,X){Be(T,K,X,z,D,7);let ue=Number(T&BigInt(4294967295));z[D+7]=ue,ue=ue>>8,z[D+6]=ue,ue=ue>>8,z[D+5]=ue,ue=ue>>8,z[D+4]=ue;let ve=Number(T>>BigInt(32)&BigInt(4294967295));return z[D+3]=ve,ve=ve>>8,z[D+2]=ve,ve=ve>>8,z[D+1]=ve,ve=ve>>8,z[D]=ve,D+8}a.prototype.writeBigUInt64LE=fr(function(T,D=0){return H(this,T,D,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=fr(function(T,D=0){return re(this,T,D,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(T,D,K,X){if(T=+T,D=D>>>0,!X){const Dt=Math.pow(2,8*K-1);I(this,T,D,K,Dt-1,-Dt)}let ue=0,ve=1,ln=0;for(this[D]=T&255;++ue<K&&(ve*=256);)T<0&&ln===0&&this[D+ue-1]!==0&&(ln=1),this[D+ue]=(T/ve>>0)-ln&255;return D+K},a.prototype.writeIntBE=function(T,D,K,X){if(T=+T,D=D>>>0,!X){const Dt=Math.pow(2,8*K-1);I(this,T,D,K,Dt-1,-Dt)}let ue=K-1,ve=1,ln=0;for(this[D+ue]=T&255;--ue>=0&&(ve*=256);)T<0&&ln===0&&this[D+ue+1]!==0&&(ln=1),this[D+ue]=(T/ve>>0)-ln&255;return D+K},a.prototype.writeInt8=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,1,127,-128),T<0&&(T=255+T+1),this[D]=T&255,D+1},a.prototype.writeInt16LE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,2,32767,-32768),this[D]=T&255,this[D+1]=T>>>8,D+2},a.prototype.writeInt16BE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,2,32767,-32768),this[D]=T>>>8,this[D+1]=T&255,D+2},a.prototype.writeInt32LE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,4,2147483647,-2147483648),this[D]=T&255,this[D+1]=T>>>8,this[D+2]=T>>>16,this[D+3]=T>>>24,D+4},a.prototype.writeInt32BE=function(T,D,K){return T=+T,D=D>>>0,K||I(this,T,D,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[D]=T>>>24,this[D+1]=T>>>16,this[D+2]=T>>>8,this[D+3]=T&255,D+4},a.prototype.writeBigInt64LE=fr(function(T,D=0){return H(this,T,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=fr(function(T,D=0){return re(this,T,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(z,T,D,K,X,ue){if(D+K>z.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ge(z,T,D,K,X){return T=+T,D=D>>>0,X||ne(z,T,D,4),n.write(z,T,D,K,23,4),D+4}a.prototype.writeFloatLE=function(T,D,K){return ge(this,T,D,!0,K)},a.prototype.writeFloatBE=function(T,D,K){return ge(this,T,D,!1,K)};function te(z,T,D,K,X){return T=+T,D=D>>>0,X||ne(z,T,D,8),n.write(z,T,D,K,52,8),D+8}a.prototype.writeDoubleLE=function(T,D,K){return te(this,T,D,!0,K)},a.prototype.writeDoubleBE=function(T,D,K){return te(this,T,D,!1,K)},a.prototype.copy=function(T,D,K,X){if(!a.isBuffer(T))throw new TypeError("argument should be a Buffer");if(K||(K=0),!X&&X!==0&&(X=this.length),D>=T.length&&(D=T.length),D||(D=0),X>0&&X<K&&(X=K),X===K||T.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),T.length-D<X-K&&(X=T.length-D+K);const ue=X-K;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,K,X):Uint8Array.prototype.set.call(T,this.subarray(K,X),D),ue},a.prototype.fill=function(T,D,K,X){if(typeof T=="string"){if(typeof D=="string"?(X=D,D=0,K=this.length):typeof K=="string"&&(X=K,K=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!a.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(T.length===1){const ve=T.charCodeAt(0);(X==="utf8"&&ve<128||X==="latin1")&&(T=ve)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(D<0||this.length<D||this.length<K)throw new RangeError("Out of range index");if(K<=D)return this;D=D>>>0,K=K===void 0?this.length:K>>>0,T||(T=0);let ue;if(typeof T=="number")for(ue=D;ue<K;++ue)this[ue]=T;else{const ve=a.isBuffer(T)?T:a.from(T,X),ln=ve.length;if(ln===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(ue=0;ue<K-D;++ue)this[ue+D]=ve[ue%ln]}return this};const he={};function me(z,T,D){he[z]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(z,T){return`The "${z}" argument must be of type number. Received type ${typeof T}`},TypeError),me("ERR_OUT_OF_RANGE",function(z,T,D){let K=`The value of "${z}" is out of range.`,X=D;return Number.isInteger(D)&&Math.abs(D)>2**32?X=_e(String(D)):typeof D=="bigint"&&(X=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(X=_e(X)),X+="n"),K+=` It must be ${T}. Received ${X}`,K},RangeError);function _e(z){let T="",D=z.length;const K=z[0]==="-"?1:0;for(;D>=K+4;D-=3)T=`_${z.slice(D-3,D)}${T}`;return`${z.slice(0,D)}${T}`}function Ce(z,T,D){Te(T,"offset"),(z[T]===void 0||z[T+D]===void 0)&&xe(T,z.length-(D+1))}function Be(z,T,D,K,X,ue){if(z>D||z<T){const ve=typeof T=="bigint"?"n":"";let ln;throw T===0||T===BigInt(0)?ln=`>= 0${ve} and < 2${ve} ** ${(ue+1)*8}${ve}`:ln=`>= -(2${ve} ** ${(ue+1)*8-1}${ve}) and < 2 ** ${(ue+1)*8-1}${ve}`,new he.ERR_OUT_OF_RANGE("value",ln,z)}Ce(K,X,ue)}function Te(z,T){if(typeof z!="number")throw new he.ERR_INVALID_ARG_TYPE(T,"number",z)}function xe(z,T,D){throw Math.floor(z)!==z?(Te(z,D),new he.ERR_OUT_OF_RANGE("offset","an integer",z)):T<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,z)}const je=/[^+/0-9A-Za-z-_]/g;function Ue(z){if(z=z.split("=")[0],z=z.trim().replace(je,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function rt(z,T){T=T||1/0;let D;const K=z.length;let X=null;const ue=[];for(let ve=0;ve<K;++ve){if(D=z.charCodeAt(ve),D>55295&&D<57344){if(!X){if(D>56319){(T-=3)>-1&&ue.push(239,191,189);continue}else if(ve+1===K){(T-=3)>-1&&ue.push(239,191,189);continue}X=D;continue}if(D<56320){(T-=3)>-1&&ue.push(239,191,189),X=D;continue}D=(X-55296<<10|D-56320)+65536}else X&&(T-=3)>-1&&ue.push(239,191,189);if(X=null,D<128){if((T-=1)<0)break;ue.push(D)}else if(D<2048){if((T-=2)<0)break;ue.push(D>>6|192,D&63|128)}else if(D<65536){if((T-=3)<0)break;ue.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((T-=4)<0)break;ue.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return ue}function Rt(z){const T=[];for(let D=0;D<z.length;++D)T.push(z.charCodeAt(D)&255);return T}function qe(z,T){let D,K,X;const ue=[];for(let ve=0;ve<z.length&&!((T-=2)<0);++ve)D=z.charCodeAt(ve),K=D>>8,X=D%256,ue.push(X),ue.push(K);return ue}function pt(z){return e.toByteArray(Ue(z))}function nn(z,T,D,K){let X;for(X=0;X<K&&!(X+D>=T.length||X>=z.length);++X)T[X+D]=z[X];return X}function gn(z,T){return z instanceof T||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===T.name}function Fn(z){return z!==z}const Qn=function(){const z="0123456789abcdef",T=new Array(256);for(let D=0;D<16;++D){const K=D*16;for(let X=0;X<16;++X)T[K+X]=z[D]+z[X]}return T}();function fr(z){return typeof BigInt>"u"?Tn:z}function Tn(){throw new Error("BigInt not supported")}})(mn);const zz={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Zi={set(t,e){jc.isClient&&localStorage.setItem(`${mt.STORAGE_KEY}${t}`,e)},get(t){return jc.isClient?localStorage.getItem(`${mt.STORAGE_KEY}${t}`):null},delete(t,e){jc.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${mt.STORAGE_KEY}${t}`))}},cx=30*1e3,jc={checkIfAllowedToTriggerEmail(){const t=Zi.get(mt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<cx){const n=Math.ceil((cx-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Zi.get(mt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<cx)return Math.ceil((cx-e)/1e3)}return 0},checkIfRequestExists(t){return mo.NOT_SAFE_RPC_METHODS.includes(t.method)||mo.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(zz.transactionHash))||(t==null?void 0:t.match(zz.signedMessage)))?mt.RPC_RESPONSE_TYPE_TX:mt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return mo.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var lr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(lr||(lr={}));var FU;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(FU||(FU={}));const it=lr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),kp=t=>{switch(typeof t){case"undefined":return it.undefined;case"string":return it.string;case"number":return isNaN(t)?it.nan:it.number;case"boolean":return it.boolean;case"function":return it.function;case"bigint":return it.bigint;case"symbol":return it.symbol;case"object":return Array.isArray(t)?it.array:t===null?it.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?it.promise:typeof Map<"u"&&t instanceof Map?it.map:typeof Set<"u"&&t instanceof Set?it.set:typeof Date<"u"&&t instanceof Date?it.date:it.object;default:return it.unknown}},Le=lr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),WBe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Uu extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,lr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Uu.create=t=>new Uu(t);const nS=(t,e)=>{let n;switch(t.code){case Le.invalid_type:t.received===it.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,lr.jsonStringifyReplacer)}`;break;case Le.unrecognized_keys:n=`Unrecognized key(s) in object: ${lr.joinValues(t.keys,", ")}`;break;case Le.invalid_union:n="Invalid input";break;case Le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${lr.joinValues(t.options)}`;break;case Le.invalid_enum_value:n=`Invalid enum value. Expected ${lr.joinValues(t.options)}, received '${t.received}'`;break;case Le.invalid_arguments:n="Invalid function arguments";break;case Le.invalid_return_type:n="Invalid function return type";break;case Le.invalid_date:n="Invalid date";break;case Le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:lr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Le.custom:n="Invalid input";break;case Le.invalid_intersection_types:n="Intersection results could not be merged";break;case Le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Le.not_finite:n="Number must be finite";break;default:n=e.defaultError,lr.assertNever(t)}return{message:n}};let cse=nS;function zBe(t){cse=t}function ZR(){return cse}const XR=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},HBe=[];function ft(t,e){const n=XR({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ZR(),nS].filter(r=>!!r)});t.common.issues.push(n)}class Ho{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return pn;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Ho.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return pn;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const pn=Object.freeze({status:"aborted"}),lse=t=>({status:"dirty",value:t}),ma=t=>({status:"valid",value:t}),jU=t=>t.status==="aborted",WU=t=>t.status==="dirty",rS=t=>t.status==="valid",ek=t=>typeof Promise<"u"&&t instanceof Promise;var Ut;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ut||(Ut={}));class eh{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Hz=(t,e)=>{if(rS(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Uu(t.common.issues);return this._error=n,this._error}}};function _n(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class xn{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return kp(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:kp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ho,ctx:{common:e.parent.common,data:e.data,parsedType:kp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(ek(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kp(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Hz(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kp(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(ek(s)?s:Promise.resolve(s));return Hz(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Le.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Hu({schema:this,typeName:tn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return hf.create(this,this._def)}nullable(){return $0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $u.create(this,this._def)}promise(){return HE.create(this,this._def)}or(e){return aS.create([this,e],this._def)}and(e){return cS.create(this,e,this._def)}transform(e){return new Hu({..._n(this._def),schema:this,typeName:tn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new fS({..._n(this._def),innerType:this,defaultValue:n,typeName:tn.ZodDefault})}brand(){return new dse({typeName:tn.ZodBranded,type:this,..._n(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new sk({..._n(this._def),innerType:this,catchValue:n,typeName:tn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return HI.create(this,e)}readonly(){return ok.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const GBe=/^c[^\s-]{8,}$/i,qBe=/^[a-z][a-z0-9]*$/,VBe=/^[0-9A-HJKMNP-TV-Z]{26}$/,KBe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,YBe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,QBe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let v3;const JBe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ZBe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,XBe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function eLe(t,e){return!!((e==="v4"||!e)&&JBe.test(t)||(e==="v6"||!e)&&ZBe.test(t))}class Ou extends xn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==it.string){const i=this._getOrReturnCtx(e);return ft(i,{code:Le.invalid_type,expected:it.string,received:i.parsedType}),pn}const r=new Ho;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ft(s,{code:Le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ft(s,{code:Le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")YBe.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"email",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")v3||(v3=new RegExp(QBe,"u")),v3.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"emoji",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KBe.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"uuid",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")GBe.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"cuid",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")qBe.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"cuid2",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")VBe.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"ulid",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ft(s,{validation:"url",code:Le.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"regex",code:Le.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?XBe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?eLe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ft(s,{validation:"ip",code:Le.invalid_string,message:i.message}),r.dirty()):lr.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Le.invalid_string,...Ut.errToObj(r)})}_addCheck(e){return new Ou({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ut.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ut.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ut.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ut.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ut.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ut.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ut.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ut.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ut.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ut.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ut.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ut.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ut.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ut.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ut.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ut.errToObj(n)})}nonempty(e){return this.min(1,Ut.errToObj(e))}trim(){return new Ou({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ou({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ou({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ou.create=t=>{var e;return new Ou({checks:[],typeName:tn.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._n(t)})};function tLe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class rm extends xn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==it.number){const i=this._getOrReturnCtx(e);return ft(i,{code:Le.invalid_type,expected:it.number,received:i.parsedType}),pn}let r;const s=new Ho;for(const i of this._def.checks)i.kind==="int"?lr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?tLe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.not_finite,message:i.message}),s.dirty()):lr.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ut.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ut.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ut.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ut.toString(n))}setLimit(e,n,r,s){return new rm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ut.toString(s)}]})}_addCheck(e){return new rm({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ut.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ut.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ut.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ut.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ut.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ut.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&lr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}rm.create=t=>new rm({checks:[],typeName:tn.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,..._n(t)});class sm extends xn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==it.bigint){const i=this._getOrReturnCtx(e);return ft(i,{code:Le.invalid_type,expected:it.bigint,received:i.parsedType}),pn}let r;const s=new Ho;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ft(r,{code:Le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):lr.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ut.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ut.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ut.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ut.toString(n))}setLimit(e,n,r,s){return new sm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ut.toString(s)}]})}_addCheck(e){return new sm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ut.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ut.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}sm.create=t=>{var e;return new sm({checks:[],typeName:tn.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._n(t)})};class sS extends xn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==it.boolean){const r=this._getOrReturnCtx(e);return ft(r,{code:Le.invalid_type,expected:it.boolean,received:r.parsedType}),pn}return ma(e.data)}}sS.create=t=>new sS({typeName:tn.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,..._n(t)});class L0 extends xn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==it.date){const i=this._getOrReturnCtx(e);return ft(i,{code:Le.invalid_type,expected:it.date,received:i.parsedType}),pn}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ft(i,{code:Le.invalid_date}),pn}const r=new Ho;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ft(s,{code:Le.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):lr.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new L0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ut.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ut.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}L0.create=t=>new L0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:tn.ZodDate,..._n(t)});class tk extends xn{_parse(e){if(this._getType(e)!==it.symbol){const r=this._getOrReturnCtx(e);return ft(r,{code:Le.invalid_type,expected:it.symbol,received:r.parsedType}),pn}return ma(e.data)}}tk.create=t=>new tk({typeName:tn.ZodSymbol,..._n(t)});class iS extends xn{_parse(e){if(this._getType(e)!==it.undefined){const r=this._getOrReturnCtx(e);return ft(r,{code:Le.invalid_type,expected:it.undefined,received:r.parsedType}),pn}return ma(e.data)}}iS.create=t=>new iS({typeName:tn.ZodUndefined,..._n(t)});class oS extends xn{_parse(e){if(this._getType(e)!==it.null){const r=this._getOrReturnCtx(e);return ft(r,{code:Le.invalid_type,expected:it.null,received:r.parsedType}),pn}return ma(e.data)}}oS.create=t=>new oS({typeName:tn.ZodNull,..._n(t)});class zE extends xn{constructor(){super(...arguments),this._any=!0}_parse(e){return ma(e.data)}}zE.create=t=>new zE({typeName:tn.ZodAny,..._n(t)});class o0 extends xn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ma(e.data)}}o0.create=t=>new o0({typeName:tn.ZodUnknown,..._n(t)});class xf extends xn{_parse(e){const n=this._getOrReturnCtx(e);return ft(n,{code:Le.invalid_type,expected:it.never,received:n.parsedType}),pn}}xf.create=t=>new xf({typeName:tn.ZodNever,..._n(t)});class nk extends xn{_parse(e){if(this._getType(e)!==it.undefined){const r=this._getOrReturnCtx(e);return ft(r,{code:Le.invalid_type,expected:it.void,received:r.parsedType}),pn}return ma(e.data)}}nk.create=t=>new nk({typeName:tn.ZodVoid,..._n(t)});class $u extends xn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==it.array)return ft(n,{code:Le.invalid_type,expected:it.array,received:n.parsedType}),pn;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ft(n,{code:o?Le.too_big:Le.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ft(n,{code:Le.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ft(n,{code:Le.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new eh(n,o,n.path,a)))).then(o=>Ho.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new eh(n,o,n.path,a)));return Ho.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new $u({...this._def,minLength:{value:e,message:Ut.toString(n)}})}max(e,n){return new $u({...this._def,maxLength:{value:e,message:Ut.toString(n)}})}length(e,n){return new $u({...this._def,exactLength:{value:e,message:Ut.toString(n)}})}nonempty(e){return this.min(1,e)}}$u.create=(t,e)=>new $u({type:t,minLength:null,maxLength:null,exactLength:null,typeName:tn.ZodArray,..._n(e)});function wb(t){if(t instanceof Ts){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=hf.create(wb(r))}return new Ts({...t._def,shape:()=>e})}else return t instanceof $u?new $u({...t._def,type:wb(t.element)}):t instanceof hf?hf.create(wb(t.unwrap())):t instanceof $0?$0.create(wb(t.unwrap())):t instanceof th?th.create(t.items.map(e=>wb(e))):t}class Ts extends xn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=lr.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==it.object){const l=this._getOrReturnCtx(e);return ft(l,{code:Le.invalid_type,expected:it.object,received:l.parsedType}),pn}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof xf&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new eh(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof xf){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ft(s,{code:Le.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new eh(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Ho.mergeObjectSync(r,l)):Ho.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ut.errToObj,new Ts({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ut.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Ts({...this._def,unknownKeys:"strip"})}passthrough(){return new Ts({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ts({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ts({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ts({...this._def,catchall:e})}pick(e){const n={};return lr.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ts({...this._def,shape:()=>n})}omit(e){const n={};return lr.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ts({...this._def,shape:()=>n})}deepPartial(){return wb(this)}partial(e){const n={};return lr.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ts({...this._def,shape:()=>n})}required(e){const n={};return lr.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof hf;)i=i._def.innerType;n[r]=i}}),new Ts({...this._def,shape:()=>n})}keyof(){return use(lr.objectKeys(this.shape))}}Ts.create=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strip",catchall:xf.create(),typeName:tn.ZodObject,..._n(e)});Ts.strictCreate=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strict",catchall:xf.create(),typeName:tn.ZodObject,..._n(e)});Ts.lazycreate=(t,e)=>new Ts({shape:t,unknownKeys:"strip",catchall:xf.create(),typeName:tn.ZodObject,..._n(e)});class aS extends xn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Uu(a.ctx.common.issues));return ft(n,{code:Le.invalid_union,unionErrors:o}),pn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Uu(c));return ft(n,{code:Le.invalid_union,unionErrors:a}),pn}}get options(){return this._def.options}}aS.create=(t,e)=>new aS({options:t,typeName:tn.ZodUnion,..._n(e)});const hT=t=>t instanceof uS?hT(t.schema):t instanceof Hu?hT(t.innerType()):t instanceof dS?[t.value]:t instanceof im?t.options:t instanceof hS?Object.keys(t.enum):t instanceof fS?hT(t._def.innerType):t instanceof iS?[void 0]:t instanceof oS?[null]:null;class IP extends xn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==it.object)return ft(n,{code:Le.invalid_type,expected:it.object,received:n.parsedType}),pn;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ft(n,{code:Le.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),pn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=hT(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new IP({typeName:tn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,..._n(r)})}}function zU(t,e){const n=kp(t),r=kp(e);if(t===e)return{valid:!0,data:t};if(n===it.object&&r===it.object){const s=lr.objectKeys(e),i=lr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=zU(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===it.array&&r===it.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=zU(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===it.date&&r===it.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class cS extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(jU(i)||jU(o))return pn;const a=zU(i.value,o.value);return a.valid?((WU(i)||WU(o))&&n.dirty(),{status:n.value,value:a.data}):(ft(r,{code:Le.invalid_intersection_types}),pn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}cS.create=(t,e,n)=>new cS({left:t,right:e,typeName:tn.ZodIntersection,..._n(n)});class th extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.array)return ft(r,{code:Le.invalid_type,expected:it.array,received:r.parsedType}),pn;if(r.data.length<this._def.items.length)return ft(r,{code:Le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pn;!this._def.rest&&r.data.length>this._def.items.length&&(ft(r,{code:Le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new eh(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ho.mergeArray(n,o)):Ho.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new th({...this._def,rest:e})}}th.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new th({items:t,typeName:tn.ZodTuple,rest:null,..._n(e)})};class lS extends xn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.object)return ft(r,{code:Le.invalid_type,expected:it.object,received:r.parsedType}),pn;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new eh(r,a,r.path,a)),value:o._parse(new eh(r,r.data[a],r.path,a))});return r.common.async?Ho.mergeObjectAsync(n,s):Ho.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof xn?new lS({keyType:e,valueType:n,typeName:tn.ZodRecord,..._n(r)}):new lS({keyType:Ou.create(),valueType:e,typeName:tn.ZodRecord,..._n(n)})}}class rk extends xn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.map)return ft(r,{code:Le.invalid_type,expected:it.map,received:r.parsedType}),pn;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new eh(r,a,r.path,[l,"key"])),value:i._parse(new eh(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return pn;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return pn;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}rk.create=(t,e,n)=>new rk({valueType:e,keyType:t,typeName:tn.ZodMap,..._n(n)});class U0 extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.set)return ft(r,{code:Le.invalid_type,expected:it.set,received:r.parsedType}),pn;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ft(r,{code:Le.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ft(r,{code:Le.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return pn;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new eh(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new U0({...this._def,minSize:{value:e,message:Ut.toString(n)}})}max(e,n){return new U0({...this._def,maxSize:{value:e,message:Ut.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}U0.create=(t,e)=>new U0({valueType:t,minSize:null,maxSize:null,typeName:tn.ZodSet,..._n(e)});class uv extends xn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==it.function)return ft(n,{code:Le.invalid_type,expected:it.function,received:n.parsedType}),pn;function r(a,c){return XR({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ZR(),nS].filter(l=>!!l),issueData:{code:Le.invalid_arguments,argumentsError:c}})}function s(a,c){return XR({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ZR(),nS].filter(l=>!!l),issueData:{code:Le.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof HE){const a=this;return ma(async function(...c){const l=new Uu([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return ma(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Uu([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Uu([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new uv({...this._def,args:th.create(e).rest(o0.create())})}returns(e){return new uv({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new uv({args:e||th.create([]).rest(o0.create()),returns:n||o0.create(),typeName:tn.ZodFunction,..._n(r)})}}class uS extends xn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}uS.create=(t,e)=>new uS({getter:t,typeName:tn.ZodLazy,..._n(e)});class dS extends xn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ft(n,{received:n.data,code:Le.invalid_literal,expected:this._def.value}),pn}return{status:"valid",value:e.data}}get value(){return this._def.value}}dS.create=(t,e)=>new dS({value:t,typeName:tn.ZodLiteral,..._n(e)});function use(t,e){return new im({values:t,typeName:tn.ZodEnum,..._n(e)})}class im extends xn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ft(n,{expected:lr.joinValues(r),received:n.parsedType,code:Le.invalid_type}),pn}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ft(n,{received:n.data,code:Le.invalid_enum_value,options:r}),pn}return ma(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return im.create(e)}exclude(e){return im.create(this.options.filter(n=>!e.includes(n)))}}im.create=use;class hS extends xn{_parse(e){const n=lr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==it.string&&r.parsedType!==it.number){const s=lr.objectValues(n);return ft(r,{expected:lr.joinValues(s),received:r.parsedType,code:Le.invalid_type}),pn}if(n.indexOf(e.data)===-1){const s=lr.objectValues(n);return ft(r,{received:r.data,code:Le.invalid_enum_value,options:s}),pn}return ma(e.data)}get enum(){return this._def.values}}hS.create=(t,e)=>new hS({values:t,typeName:tn.ZodNativeEnum,..._n(e)});class HE extends xn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==it.promise&&n.common.async===!1)return ft(n,{code:Le.invalid_type,expected:it.promise,received:n.parsedType}),pn;const r=n.parsedType===it.promise?n.data:Promise.resolve(n.data);return ma(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}HE.create=(t,e)=>new HE({type:t,typeName:tn.ZodPromise,..._n(e)});class Hu extends xn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ft(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?pn:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?pn:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!rS(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>rS(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);lr.assertNever(s)}}Hu.create=(t,e,n)=>new Hu({schema:t,typeName:tn.ZodEffects,effect:e,..._n(n)});Hu.createWithPreprocess=(t,e,n)=>new Hu({schema:e,effect:{type:"preprocess",transform:t},typeName:tn.ZodEffects,..._n(n)});class hf extends xn{_parse(e){return this._getType(e)===it.undefined?ma(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hf.create=(t,e)=>new hf({innerType:t,typeName:tn.ZodOptional,..._n(e)});class $0 extends xn{_parse(e){return this._getType(e)===it.null?ma(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$0.create=(t,e)=>new $0({innerType:t,typeName:tn.ZodNullable,..._n(e)});class fS extends xn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===it.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}fS.create=(t,e)=>new fS({innerType:t,typeName:tn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._n(e)});class sk extends xn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ek(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Uu(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Uu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}sk.create=(t,e)=>new sk({innerType:t,typeName:tn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._n(e)});class ik extends xn{_parse(e){if(this._getType(e)!==it.nan){const r=this._getOrReturnCtx(e);return ft(r,{code:Le.invalid_type,expected:it.nan,received:r.parsedType}),pn}return{status:"valid",value:e.data}}}ik.create=t=>new ik({typeName:tn.ZodNaN,..._n(t)});const nLe=Symbol("zod_brand");class dse extends xn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class HI extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?pn:i.status==="dirty"?(n.dirty(),lse(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?pn:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new HI({in:e,out:n,typeName:tn.ZodPipeline})}}class ok extends xn{_parse(e){const n=this._def.innerType._parse(e);return rS(n)&&(n.value=Object.freeze(n.value)),n}}ok.create=(t,e)=>new ok({innerType:t,typeName:tn.ZodReadonly,..._n(e)});const hse=(t,e={},n)=>t?zE.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):zE.create(),rLe={object:Ts.lazycreate};var tn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(tn||(tn={}));const sLe=(t,e={message:`Input not instance of ${t.name}`})=>hse(n=>n instanceof t,e),fse=Ou.create,pse=rm.create,iLe=ik.create,oLe=sm.create,gse=sS.create,aLe=L0.create,cLe=tk.create,lLe=iS.create,uLe=oS.create,dLe=zE.create,hLe=o0.create,fLe=xf.create,pLe=nk.create,gLe=$u.create,mLe=Ts.create,yLe=Ts.strictCreate,wLe=aS.create,bLe=IP.create,vLe=cS.create,ELe=th.create,CLe=lS.create,_Le=rk.create,ALe=U0.create,SLe=uv.create,ILe=uS.create,NLe=dS.create,xLe=im.create,TLe=hS.create,RLe=HE.create,Gz=Hu.create,kLe=hf.create,PLe=$0.create,OLe=Hu.createWithPreprocess,DLe=HI.create,MLe=()=>fse().optional(),BLe=()=>pse().optional(),LLe=()=>gse().optional(),ULe={string:t=>Ou.create({...t,coerce:!0}),number:t=>rm.create({...t,coerce:!0}),boolean:t=>sS.create({...t,coerce:!0}),bigint:t=>sm.create({...t,coerce:!0}),date:t=>L0.create({...t,coerce:!0})},$Le=pn;var A=Object.freeze({__proto__:null,defaultErrorMap:nS,setErrorMap:zBe,getErrorMap:ZR,makeIssue:XR,EMPTY_PATH:HBe,addIssueToContext:ft,ParseStatus:Ho,INVALID:pn,DIRTY:lse,OK:ma,isAborted:jU,isDirty:WU,isValid:rS,isAsync:ek,get util(){return lr},get objectUtil(){return FU},ZodParsedType:it,getParsedType:kp,ZodType:xn,ZodString:Ou,ZodNumber:rm,ZodBigInt:sm,ZodBoolean:sS,ZodDate:L0,ZodSymbol:tk,ZodUndefined:iS,ZodNull:oS,ZodAny:zE,ZodUnknown:o0,ZodNever:xf,ZodVoid:nk,ZodArray:$u,ZodObject:Ts,ZodUnion:aS,ZodDiscriminatedUnion:IP,ZodIntersection:cS,ZodTuple:th,ZodRecord:lS,ZodMap:rk,ZodSet:U0,ZodFunction:uv,ZodLazy:uS,ZodLiteral:dS,ZodEnum:im,ZodNativeEnum:hS,ZodPromise:HE,ZodEffects:Hu,ZodTransformer:Hu,ZodOptional:hf,ZodNullable:$0,ZodDefault:fS,ZodCatch:sk,ZodNaN:ik,BRAND:nLe,ZodBranded:dse,ZodPipeline:HI,ZodReadonly:ok,custom:hse,Schema:xn,ZodSchema:xn,late:rLe,get ZodFirstPartyTypeKind(){return tn},coerce:ULe,any:dLe,array:gLe,bigint:oLe,boolean:gse,date:aLe,discriminatedUnion:bLe,effect:Gz,enum:xLe,function:SLe,instanceof:sLe,intersection:vLe,lazy:ILe,literal:NLe,map:_Le,nan:iLe,nativeEnum:TLe,never:fLe,null:uLe,nullable:PLe,number:pse,object:mLe,oboolean:LLe,onumber:BLe,optional:kLe,ostring:MLe,pipeline:DLe,preprocess:OLe,promise:RLe,record:CLe,set:ALe,strictObject:yLe,string:fse,symbol:cLe,transformer:Gz,tuple:ELe,undefined:lLe,union:wLe,unknown:hLe,void:pLe,NEVER:$Le,ZodIssueCode:Le,quotelessJson:WBe,ZodError:Uu});const Fs=A.object({message:A.string()});function dt(t){return A.literal(mt[t])}A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const FLe=A.object({chainId:A.string().or(A.number())}),jLe=A.object({email:A.string().email()}),WLe=A.object({otp:A.string()}),zLe=A.object({uri:A.string(),preferredAccountType:A.optional(A.string()),chainId:A.optional(A.string().or(A.number()))}),HLe=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string())}),GLe=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),qLe=A.object({email:A.string().email()}),VLe=A.object({otp:A.string()}),KLe=A.object({otp:A.string()}),YLe=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),QLe=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),JLe=A.object({type:A.string()}),ZLe=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),XLe=A.object({url:A.string()}),eUe=A.object({userName:A.string()}),tUe=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([mo.ACCOUNT_TYPES.EOA,mo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string())}),nUe=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),rUe=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([mo.ACCOUNT_TYPES.EOA,mo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string())}),sUe=A.object({uri:A.string()}),iUe=A.object({isConnected:A.boolean()}),oUe=A.object({chainId:A.string().or(A.number())}),aUe=A.object({chainId:A.string().or(A.number())}),cUe=A.object({newEmail:A.string().email()}),lUe=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const uUe=A.object({version:A.string().optional()}),dUe=A.object({type:A.string(),address:A.string()}),hUe=A.any(),fUe=A.object({method:A.literal("eth_accounts")}),pUe=A.object({method:A.literal("eth_blockNumber")}),gUe=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),mUe=A.object({method:A.literal("eth_chainId")}),yUe=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),wUe=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),bUe=A.object({method:A.literal("eth_gasPrice")}),vUe=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),EUe=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),CUe=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),_Ue=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),AUe=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),SUe=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),IUe=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),NUe=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),xUe=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),TUe=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),RUe=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),kUe=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),PUe=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),OUe=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),DUe=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),MUe=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),BUe=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),LUe=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),UUe=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),$Ue=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),FUe=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),jUe=A.object({method:A.literal("eth_newBlockFilter")}),WUe=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),zUe=A.object({method:A.literal("eth_newPendingTransactionFilter")}),HUe=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),GUe=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),qUe=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),qz=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),VUe=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),KUe=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),YUe=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),QUe=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),JUe=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),ZUe=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),XUe=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),e5e=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),t5e=A.object({method:A.literal("wallet_getCapabilities")}),n5e=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),r5e=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),s5e=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),Vz=A.object({token:A.string()}),ht=A.object({id:A.string().optional()}),v1={appEvent:ht.extend({type:dt("APP_SWITCH_NETWORK"),payload:FLe}).or(ht.extend({type:dt("APP_CONNECT_EMAIL"),payload:jLe})).or(ht.extend({type:dt("APP_CONNECT_DEVICE")})).or(ht.extend({type:dt("APP_CONNECT_OTP"),payload:WLe})).or(ht.extend({type:dt("APP_CONNECT_SOCIAL"),payload:zLe})).or(ht.extend({type:dt("APP_GET_FARCASTER_URI")})).or(ht.extend({type:dt("APP_CONNECT_FARCASTER")})).or(ht.extend({type:dt("APP_GET_USER"),payload:A.optional(HLe)})).or(ht.extend({type:dt("APP_GET_SOCIAL_REDIRECT_URI"),payload:GLe})).or(ht.extend({type:dt("APP_SIGN_OUT")})).or(ht.extend({type:dt("APP_IS_CONNECTED"),payload:A.optional(Vz)})).or(ht.extend({type:dt("APP_GET_CHAIN_ID")})).or(ht.extend({type:dt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ht.extend({type:dt("APP_INIT_SMART_ACCOUNT")})).or(ht.extend({type:dt("APP_SET_PREFERRED_ACCOUNT"),payload:JLe})).or(ht.extend({type:dt("APP_RPC_REQUEST"),payload:qz.or(s5e).or(fUe).or(pUe).or(gUe).or(mUe).or(yUe).or(wUe).or(bUe).or(vUe).or(EUe).or(CUe).or(_Ue).or(AUe).or(SUe).or(IUe).or(NUe).or(xUe).or(TUe).or(RUe).or(kUe).or(PUe).or(OUe).or(DUe).or(MUe).or(BUe).or(LUe).or(UUe).or($Ue).or(FUe).or(jUe).or(WUe).or(zUe).or(HUe).or(GUe).or(qUe).or(qz).or(VUe).or(KUe).or(YUe).or(QUe).or(JUe).or(ZUe).or(e5e).or(XUe).or(t5e).or(n5e).or(r5e)})).or(ht.extend({type:dt("APP_UPDATE_EMAIL"),payload:qLe})).or(ht.extend({type:dt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:VLe})).or(ht.extend({type:dt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:KLe})).or(ht.extend({type:dt("APP_SYNC_THEME"),payload:YLe})).or(ht.extend({type:dt("APP_SYNC_DAPP_DATA"),payload:QLe})).or(ht.extend({type:dt("APP_RELOAD")})),frameEvent:ht.extend({type:dt("FRAME_SWITCH_NETWORK_ERROR"),payload:Fs}).or(ht.extend({type:dt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:aUe})).or(ht.extend({type:dt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:ZLe})).or(ht.extend({type:dt("FRAME_CONNECT_EMAIL_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:XLe})).or(ht.extend({type:dt("FRAME_GET_FARCASTER_URI_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:eUe})).or(ht.extend({type:dt("FRAME_CONNECT_FARCASTER_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_CONNECT_OTP_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_CONNECT_OTP_SUCCESS")})).or(ht.extend({type:dt("FRAME_CONNECT_DEVICE_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ht.extend({type:dt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:tUe})).or(ht.extend({type:dt("FRAME_CONNECT_SOCIAL_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_GET_USER_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_GET_USER_SUCCESS"),payload:rUe})).or(ht.extend({type:dt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:sUe})).or(ht.extend({type:dt("FRAME_SIGN_OUT_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_SIGN_OUT_SUCCESS")})).or(ht.extend({type:dt("FRAME_IS_CONNECTED_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_IS_CONNECTED_SUCCESS"),payload:iUe})).or(ht.extend({type:dt("FRAME_GET_CHAIN_ID_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:oUe})).or(ht.extend({type:dt("FRAME_RPC_REQUEST_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_RPC_REQUEST_SUCCESS"),payload:hUe})).or(ht.extend({type:dt("FRAME_SESSION_UPDATE"),payload:Vz})).or(ht.extend({type:dt("FRAME_UPDATE_EMAIL_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:nUe})).or(ht.extend({type:dt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ht.extend({type:dt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:cUe})).or(ht.extend({type:dt("FRAME_SYNC_THEME_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_SYNC_THEME_SUCCESS")})).or(ht.extend({type:dt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ht.extend({type:dt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:lUe})).or(ht.extend({type:dt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:dUe})).or(ht.extend({type:dt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_READY"),payload:uUe})).or(ht.extend({type:dt("FRAME_RELOAD_ERROR"),payload:Fs})).or(ht.extend({type:dt("FRAME_RELOAD_SUCCESS")}))};function E3(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let i5e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ut.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!E3(mt.FRAME_EVENT_KEY,l))return;const u=v1.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}jc.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{jc.isClient&&window.addEventListener("message",({data:o})=>{if(!E3(mt.FRAME_EVENT_KEY,o))return;const a=v1.frameEvent.parse(o);i(a)})},onAppEvent:i=>{jc.isClient&&window.addEventListener("message",({data:o})=>{if(!E3(mt.APP_EVENT_KEY,o))return;const a=v1.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(jc.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");v1.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(jc.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");v1.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),jc.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Bke}?projectId=${e}&chainId=${r}&version=${Uke}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},o5e=class{constructor(e){var i;const n=hw({level:Lke}),{logger:r,chunkLoggerController:s}=mP({opts:n});this.logger=vo(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},a5e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new o5e(e)),this.abortController=i,this.w3mFrame=new i5e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Zi.get(mt.EMAIL_LOGIN_USED_KEY)}getEmail(){return Zi.get(mt.EMAIL)}getUsername(){return Zi.get(mt.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:mt.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{jc.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:mt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:mt.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:mt.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:mt.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:mt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:mt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:mt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:mt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:mt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:mt.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:mt.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:mt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:mt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:mt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:mt.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:mt.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:mt.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:mt.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:mt.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:mt.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(mo.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:mt.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===mt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===mt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:mo.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===mt.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{mo.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[mt.APP_SYNC_DAPP_DATA,mt.APP_SYNC_THEME,mt.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[mt.APP_CONNECT_EMAIL,mt.APP_CONNECT_DEVICE,mt.APP_CONNECT_OTP,mt.APP_CONNECT_SOCIAL,mt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,y){var w,C,N;m.id===u&&((C=y==null?void 0:(w=y.logger).info)==null||C.call(w,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Zi.set(mt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Zi.set(mt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Zi.set(mt.EMAIL,e),Zi.set(mt.EMAIL_LOGIN_USED_KEY,"true"),Zi.delete(mt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Zi.delete(mt.EMAIL_LOGIN_USED_KEY),Zi.delete(mt.EMAIL),Zi.delete(mt.LAST_USED_CHAIN_KEY),Zi.delete(mt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Zi.set(mt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Zi.get(mt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Zi.set(mt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},c5e=class fT{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return fT.instance||(fT.instance=new a5e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),fT.instance}};function l5e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Ri(t,...e){try{return l5e(t(...e))}catch(n){return Promise.reject(n)}}function u5e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function d5e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function pT(t){if(u5e(t))return String(t);if(d5e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return pT(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const HU="base64:";function h5e(t){return typeof t=="string"?t:HU+g5e(t)}function f5e(t){return typeof t!="string"||!t.startsWith(HU)?t:p5e(t.slice(HU.length))}function p5e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function g5e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function La(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function m5e(...t){return La(t.join(":"))}function lx(t){return t=La(t),t?t+":":""}function y5e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function w5e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const b5e="memory",v5e=()=>{const t=new Map;return{name:b5e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function E5e(t={}){const e={mounts:{"":t.driver||v5e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=La(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Kz(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=La(g?p:p.key),y=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},C=n(m);f(C).items.push({key:m,value:y,relativeKey:C.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=La(l);const{relativeKey:d,driver:h}=n(l);return Ri(h.hasItem,d,u)},getItem(l,u={}){l=La(l);const{relativeKey:d,driver:h}=n(l);return Ri(h.getItem,d,u).then(f=>nx(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Ri(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:m5e(d.base,f.key),value:nx(f.value)}))):Promise.all(d.items.map(h=>Ri(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:nx(f)})))))},getItemRaw(l,u={}){l=La(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Ri(h.getItemRaw,d,u):Ri(h.getItem,d,u).then(f=>f5e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=La(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Ri(f.setItem,h,pT(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Ri(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:pT(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Ri(d.driver.setItem,h.relativeKey,pT(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=La(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Ri(f.setItemRaw,h,u,d);else if(f.setItem)await Ri(f.setItem,h,h5e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=La(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Ri(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Ri(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=La(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Ri(h.getMeta,d,u)),!u.nativeOnly){const p=await Ri(h.getItem,d+"$",u).then(g=>nx(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=lx(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(m=y.driver.flags)!=null&&m.maxDepth||(p=!1);const w=await Ri(y.driver.getKeys,y.relativeBase,u);for(const C of w){const N=y.mountpoint+La(C);h.some(S=>N.startsWith(S))||f.push(N)}h=[y.mountpoint,...h.filter(C=>!C.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||y5e(y,u.maxDepth))&&w5e(y,l))},async clear(l,u={}){l=lx(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Ri(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Yz(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=lx(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Kz(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=lx(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await Yz(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=La(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=La(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Kz(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function Yz(t){typeof t.dispose=="function"&&await Ri(t.dispose)}const C5e="idb-keyval";var _5e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=pre(t.dbName,t.storeName)),{name:C5e,options:t,async hasItem(s){return!(typeof await ZW(n(s),r)>"u")},async getItem(s){return await ZW(n(s),r)??null},setItem(s,i){return $2e(n(s),i,r)},removeItem(s){return F2e(n(s),r)},getKeys(){return z2e(r)},clear(){return j2e(r)}}};const A5e="WALLET_CONNECT_V2_INDEXED_DB",S5e="keyvaluestorage";let I5e=class{constructor(){this.indexedDb=E5e({driver:_5e({dbName:A5e,storeName:S5e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Nf(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var C3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gT={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof C3<"u"&&C3.localStorage?gT.exports=C3.localStorage:typeof window<"u"&&window.localStorage?gT.exports=window.localStorage:gT.exports=new e})();function N5e(t){var e;return[t[0],M0((e=t[1])!=null?e:"")]}let x5e=class{constructor(){this.localStorage=gT.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(N5e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return M0(n)}async setItem(e,n){this.localStorage.setItem(e,Nf(n))}async removeItem(e){this.localStorage.removeItem(e)}};const T5e="wc_storage_version",Qz=1,R5e=async(t,e,n)=>{const r=T5e,s=await e.getItem(r);if(s&&s>=Qz){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,Qz),n(e),k5e(t,o)},k5e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let P5e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new x5e;this.storage=e;try{const n=new I5e;R5e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var O5e=Object.defineProperty,D5e=(t,e,n)=>e in t?O5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jz=(t,e,n)=>D5e(t,typeof e!="symbol"?e+"":e,n);let M5e=class extends lw{constructor(e){super(),this.opts=e,Jz(this,"protocol","wc"),Jz(this,"version",2)}};var B5e=Object.defineProperty,L5e=(t,e,n)=>e in t?B5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U5e=(t,e,n)=>L5e(t,e+"",n);let $5e=class extends lw{constructor(e,n){super(),this.core=e,this.logger=n,U5e(this,"records",new Map)}},F5e=class{constructor(e,n){this.logger=e,this.core=n}},j5e=class extends lw{constructor(e,n){super(),this.relayer=e,this.logger=n}},W5e=class extends lw{constructor(e){super()}},z5e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},H5e=class extends lw{constructor(e,n){super(),this.relayer=e,this.logger=n}},G5e=class extends lw{constructor(e,n){super(),this.core=e,this.logger=n}},q5e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},V5e=class{constructor(e,n){this.projectId=e,this.logger=n}},K5e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Y5e=Object.defineProperty,Q5e=(t,e,n)=>e in t?Y5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zz=(t,e,n)=>Q5e(t,typeof e!="symbol"?e+"":e,n);let J5e=class{constructor(e){this.opts=e,Zz(this,"protocol","wc"),Zz(this,"version",2)}},Z5e=class{constructor(e){this.client=e}};function pS(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Xz(t){return pS(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const mse="2.23.2";let E1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${mse}`};class F0 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof F0?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof F0&&n.cause.docsPath||n.docsPath,i=(a=E1.getDocsUrl)==null?void 0:a.call(E1,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...E1.version?[`Version: ${E1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=mse}walk(e){return yse(this,e)}}function yse(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?yse(t.cause,e):e?null:t}class wse extends F0{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function BC(t,{dir:e,size:n=32}={}){return typeof t=="string"?X5e(t,{dir:e,size:n}):e6e(t,{dir:e,size:n})}function X5e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new wse({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function e6e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new wse({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class t6e extends F0{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class n6e extends F0{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function LC(t,{size:e}){if(Xz(t)>e)throw new n6e({givenSize:Xz(t),maxSize:e})}function GU(t,e={}){const{signed:n}=e;e.size&&LC(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function r6e(t,e={}){return Number(GU(t,e))}const s6e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qU(t,e={}){return typeof t=="number"||typeof t=="bigint"?vse(t,e):typeof t=="string"?a6e(t,e):typeof t=="boolean"?i6e(t,e):bse(t,e)}function i6e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(LC(n,{size:e.size}),BC(n,{size:e.size})):n}function bse(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=s6e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(LC(r,{size:e.size}),BC(r,{dir:"right",size:e.size})):r}function vse(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new t6e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?BC(a,{size:r}):a}const o6e=new TextEncoder;function a6e(t,e={}){const n=o6e.encode(t);return bse(n,e)}const c6e=new TextEncoder;function l6e(t,e={}){return typeof t=="number"||typeof t=="bigint"?d6e(t,e):typeof t=="boolean"?u6e(t,e):pS(t)?Ese(t,e):Cse(t,e)}function u6e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(LC(n,{size:e.size}),BC(n,{size:e.size})):n}const Eh={zero:48,nine:57,A:65,F:70,a:97,f:102};function eH(t){if(t>=Eh.zero&&t<=Eh.nine)return t-Eh.zero;if(t>=Eh.A&&t<=Eh.F)return t-(Eh.A-10);if(t>=Eh.a&&t<=Eh.f)return t-(Eh.a-10)}function Ese(t,e={}){let n=t;e.size&&(LC(n,{size:e.size}),n=BC(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=eH(r.charCodeAt(a++)),l=eH(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new F0(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function d6e(t,e){const n=vse(t,e);return Ese(n)}function Cse(t,e={}){const n=c6e.encode(t);return typeof e.size=="number"?(LC(n,{size:e.size}),BC(n,{dir:"right",size:e.size})):n}function ak(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function h6e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function NP(t,...e){if(!h6e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Tot(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ak(t.outputLen),ak(t.blockLen)}function tH(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function f6e(t,e){NP(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ux=BigInt(2**32-1),nH=BigInt(32);function p6e(t,e=!1){return e?{h:Number(t&ux),l:Number(t>>nH&ux)}:{h:Number(t>>nH&ux)|0,l:Number(t&ux)|0}}function g6e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=p6e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const m6e=(t,e,n)=>t<<n|e>>>32-n,y6e=(t,e,n)=>e<<n|t>>>32-n,w6e=(t,e,n)=>e<<n-32|t>>>64-n,b6e=(t,e,n)=>t<<n-32|e>>>64-n,Gw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v6e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Rot(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function kot(t,e){return t<<32-e|t>>>e}const rH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function E6e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function sH(t){for(let e=0;e<t.length;e++)t[e]=E6e(t[e])}function C6e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function _se(t){return typeof t=="string"&&(t=C6e(t)),NP(t),t}function Pot(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];NP(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let _6e=class{clone(){return this._cloneInto()}};function A6e(t){const e=r=>t().update(_se(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Dot(t=32){if(Gw&&typeof Gw.getRandomValues=="function")return Gw.getRandomValues(new Uint8Array(t));if(Gw&&typeof Gw.randomBytes=="function")return Gw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Ase=[],Sse=[],Ise=[],S6e=BigInt(0),C1=BigInt(1),I6e=BigInt(2),N6e=BigInt(7),x6e=BigInt(256),T6e=BigInt(113);for(let t=0,e=C1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ase.push(2*(5*r+n)),Sse.push((t+1)*(t+2)/2%64);let s=S6e;for(let i=0;i<7;i++)e=(e<<C1^(e>>N6e)*T6e)%x6e,e&I6e&&(s^=C1<<(C1<<BigInt(i))-C1);Ise.push(s)}const[R6e,k6e]=g6e(Ise,!0),iH=(t,e,n)=>n>32?w6e(t,e,n):m6e(t,e,n),oH=(t,e,n)=>n>32?b6e(t,e,n):y6e(t,e,n);function P6e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=iH(l,u,1)^n[a],h=oH(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Sse[o],c=iH(s,i,a),l=oH(s,i,a),u=Ase[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=R6e[r],t[1]^=k6e[r]}n.fill(0)}let O6e=class Nse extends _6e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ak(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=v6e(this.state)}keccak(){rH||sH(this.state32),P6e(this.state32,this.rounds),rH||sH(this.state32),this.posOut=0,this.pos=0}update(e){tH(this);const{blockLen:n,state:r}=this;e=_se(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){tH(this,!1),NP(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ak(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(f6e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Nse(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const D6e=(t,e,n)=>A6e(()=>new O6e(e,t,n)),M6e=D6e(1,136,256/8);function xse(t,e){const n=e||"hex",r=M6e(pS(t,{strict:!1})?l6e(t):t);return n==="bytes"?r:qU(r)}class B6e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const _3=new B6e(8192);function L6e(t,e){if(_3.has(`${t}.${e}`))return _3.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=xse(Cse(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return _3.set(`${t}.${e}`,i),i}function U6e(t){const e=xse(`0x${t.substring(4)}`).substring(26);return L6e(`0x${e}`)}async function $6e({hash:t,signature:e}){const n=pS(t)?t:qU(t),{secp256k1:r}=await ro(async()=>{const{secp256k1:o}=await import("./secp256k1-BGIIg_CJ.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=aH(f);return new r.Signature(GU(l),GU(u)).addRecoveryBit(p)}const o=pS(e)?e:qU(e),a=r6e(`0x${o.slice(130)}`),c=aH(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function aH(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function F6e({hash:t,signature:e}){return U6e(await $6e({hash:t,signature:e}))}var j6e={};const W6e=":";function dv(t){const[e,n]=t.split(W6e);return{namespace:e,reference:n}}function Tse(t,e){return t.includes(":")?[t]:e.chains||[]}var z6e=Object.defineProperty,H6e=Object.defineProperties,G6e=Object.getOwnPropertyDescriptors,cH=Object.getOwnPropertySymbols,q6e=Object.prototype.hasOwnProperty,V6e=Object.prototype.propertyIsEnumerable,lH=(t,e,n)=>e in t?z6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uH=(t,e)=>{for(var n in e||(e={}))q6e.call(e,n)&&lH(t,n,e[n]);if(cH)for(var n of cH(e))V6e.call(e,n)&&lH(t,n,e[n]);return t},K6e=(t,e)=>H6e(t,G6e(e));const Y6e="ReactNative",Hc={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Q6e="js";function ck(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function bm(){return!B0()&&!!y4()&&navigator.product===Y6e}function J6e(){return bm()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Z6e(){return bm()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function UC(){return!ck()&&!!y4()&&!!B0()}function GI(){return bm()?Hc.reactNative:ck()?Hc.node:UC()?Hc.browser:Hc.unknown}function dH(){var t;try{return bm()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function X6e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function e8e(t){var e,n;const r=Rse();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),K6e(uH(uH({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Rse(){return Kre()||{name:"",description:"",url:"",icons:[""]}}function t8e(){if(GI()===Hc.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=y3e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function n8e(){var t;const e=GI();return e===Hc.browser?[e,((t=Vre())==null?void 0:t.host)||"unknown"].join(":"):e}function kse(t,e,n){const r=t8e(),s=n8e();return[[t,e].join("-"),[Q6e,n].join("-"),r,s].join("/")}function r8e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=kse(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=X6e(l[1]||"",d);return l[0]+"?"+h}function Cy(t,e){return t.filter(n=>e.includes(n)).length===t.length}function VU(t){return Object.fromEntries(t.entries())}function KU(t){return new Map(Object.entries(t))}function qm(t=We.FIVE_MINUTES,e){const n=We.toMiliseconds(t||We.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function fg(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Pse(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function s8e(t){return Pse("topic",t)}function i8e(t){return Pse("id",t)}function Ose(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function mi(t,e){return We.fromMiliseconds(Date.now()+We.toMiliseconds(t))}function Ip(t){return Date.now()>=We.toMiliseconds(t)}function Cr(t,e){return`${t}${e?`:${e}`:""}`}function Vd(t=[],e=[]){return[...new Set([...t,...e])]}async function o8e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=a8e(i,t,e),a=GI();if(a===Hc.browser){if(!((r=B0())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}c8e(o)}else a===Hc.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function a8e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${h8e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function c8e(t){let e="_self";d8e()?e="_top":(u8e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function l8e(t,e){let n="";try{if(UC()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function hH(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function fH(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function C4(){return typeof process<"u"&&j6e.IS_VITEST==="true"}function u8e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function d8e(){try{return window.self!==window.top}catch{return!1}}function h8e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Dse(t){return Buffer.from(t,"base64").toString("utf-8")}function f8e(t){return new Promise(e=>setTimeout(e,t))}function gS(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function p8e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qI(t,...e){if(!p8e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _4(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gS(t.outputLen),gS(t.blockLen)}function GE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mse(t,e){qI(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const dx=BigInt(2**32-1),pH=BigInt(32);function g8e(t,e=!1){return e?{h:Number(t&dx),l:Number(t>>pH&dx)}:{h:Number(t>>pH&dx)|0,l:Number(t&dx)|0}}function m8e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=g8e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const y8e=(t,e,n)=>t<<n|e>>>32-n,w8e=(t,e,n)=>e<<n|t>>>32-n,b8e=(t,e,n)=>e<<n-32|t>>>64-n,v8e=(t,e,n)=>t<<n-32|e>>>64-n,qw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function E8e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function A3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function nd(t,e){return t<<32-e|t>>>e}const gH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function C8e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function mH(t){for(let e=0;e<t.length;e++)t[e]=C8e(t[e])}function _8e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function qE(t){return typeof t=="string"&&(t=_8e(t)),qI(t),t}function A8e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];qI(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let A4=class{clone(){return this._cloneInto()}};function Bse(t){const e=r=>t().update(qE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function $C(t=32){if(qw&&typeof qw.getRandomValues=="function")return qw.getRandomValues(new Uint8Array(t));if(qw&&typeof qw.randomBytes=="function")return qw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Lse=[],Use=[],$se=[],S8e=BigInt(0),_1=BigInt(1),I8e=BigInt(2),N8e=BigInt(7),x8e=BigInt(256),T8e=BigInt(113);for(let t=0,e=_1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Lse.push(2*(5*r+n)),Use.push((t+1)*(t+2)/2%64);let s=S8e;for(let i=0;i<7;i++)e=(e<<_1^(e>>N8e)*T8e)%x8e,e&I8e&&(s^=_1<<(_1<<BigInt(i))-_1);$se.push(s)}const[R8e,k8e]=m8e($se,!0),yH=(t,e,n)=>n>32?b8e(t,e,n):y8e(t,e,n),wH=(t,e,n)=>n>32?v8e(t,e,n):w8e(t,e,n);function P8e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=yH(l,u,1)^n[a],h=wH(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Use[o],c=yH(s,i,a),l=wH(s,i,a),u=Lse[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=R8e[r],t[1]^=k8e[r]}n.fill(0)}let O8e=class Fse extends A4{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,gS(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=E8e(this.state)}keccak(){gH||mH(this.state32),P8e(this.state32,this.rounds),gH||mH(this.state32),this.posOut=0,this.pos=0}update(e){GE(this);const{blockLen:n,state:r}=this;e=qE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){GE(this,!1),qI(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return gS(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Mse(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Fse(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const D8e=(t,e,n)=>Bse(()=>new O8e(e,t,n)),M8e=D8e(1,136,256/8),B8e="https://rpc.walletconnect.org/v1";function jse(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(M8e(n)).toString("hex")}async function L8e(t,e,n,r,s,i){switch(n.t){case"eip191":return await U8e(t,e,n.s);case"eip1271":return await $8e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function U8e(t,e,n){return(await F6e({hash:jse(e),signature:n})).toLowerCase()===t.toLowerCase()}async function $8e(t,e,n,r,s,i){const o=dv(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=jse(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||B8e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:F8e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function F8e(){return Date.now()+Math.floor(Math.random()*1e3)}function j8e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Qa.encode(i)}var W8e=Object.defineProperty,z8e=Object.defineProperties,H8e=Object.getOwnPropertyDescriptors,bH=Object.getOwnPropertySymbols,G8e=Object.prototype.hasOwnProperty,q8e=Object.prototype.propertyIsEnumerable,vH=(t,e,n)=>e in t?W8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V8e=(t,e)=>{for(var n in e||(e={}))G8e.call(e,n)&&vH(t,n,e[n]);if(bH)for(var n of bH(e))q8e.call(e,n)&&vH(t,n,e[n]);return t},K8e=(t,e)=>z8e(t,H8e(e));const Y8e="did:pkh:",S4=t=>t==null?void 0:t.split(":"),Q8e=t=>{const e=t&&S4(t);if(e)return t.includes(Y8e)?e[3]:e[1]},YU=t=>{const e=t&&S4(t);if(e)return e[2]+":"+e[3]},lk=t=>{const e=t&&S4(t);if(e)return e.pop()};async function EH(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Wse(s,s.iss),o=lk(s.iss);return await L8e(o,i,r,YU(s.iss),n)}const Wse=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=lk(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Q8e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=mT(t.resources);if(p){const g=mS(p);s=i$e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function J8e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Z8e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function j0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function X8e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:e$e(e,n,r)}}}function e$e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function zse(t){return j0(t),`urn:recap:${J8e(t).replace(/=/g,"")}`}function mS(t){const e=Z8e(t.replace("urn:recap:",""));return j0(e),e}function t$e(t,e,n){const r=X8e(t,e,n);return zse(r)}function n$e(t){return t&&t.includes("urn:recap:")}function r$e(t,e){const n=mS(t),r=mS(e),s=s$e(n,r);return zse(s)}function s$e(t,e){j0(t),j0(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=K8e(V8e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function i$e(t="",e){j0(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function CH(t){var e;const n=mS(t);j0(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function _H(t){const e=mS(t);j0(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function mT(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return n$e(e)?e:void 0}function S3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hse(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bc(t,...e){if(!Hse(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function AH(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o$e(t,e){Bc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function SH(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Ug=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),a$e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),c$e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!c$e)throw new Error("Non little-endian hardware is not supported");function l$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function QU(t){if(typeof t=="string")t=l$e(t);else if(Hse(t))t=JU(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function u$e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function d$e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const h$e=(t,e)=>{function n(r,...s){if(Bc(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Bc(l):Bc(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Bc(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Bc(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Bc(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Bc(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function IH(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!f$e(e))throw new Error("invalid output, must be aligned");return e}function NH(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function f$e(t){return t.byteOffset%4===0}function JU(t){return Uint8Array.from(t)}function VE(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Gse=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),p$e=Gse("expand 16-byte k"),g$e=Gse("expand 32-byte k"),m$e=Ug(p$e),y$e=Ug(g$e);function sr(t,e){return t<<e|t>>>32-e}function ZU(t){return t.byteOffset%4===0}const hx=64,w$e=16,qse=2**32-1,xH=new Uint32Array;function b$e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(hx),u=Ug(l),d=ZU(s)&&ZU(i),h=d?Ug(s):xH,f=d?Ug(i):xH;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=qse)throw new Error("arx: counter overflow");const g=Math.min(hx,c-p);if(d&&g===hx){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<w$e;y++)w=m+y,f[w]=h[w]^u[y];p+=hx;continue}for(let m=0,y;m<g;m++)y=p+m,i[y]=s[y]^l[m];p+=g}}function v$e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=u$e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return S3(s),S3(o),SH(i),SH(n),(a,c,l,u,d=0)=>{Bc(a),Bc(c),Bc(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Bc(u),S3(d),d<0||d>=qse)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=JU(a)),m=y$e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=m$e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);ZU(c)||f.push(c=JU(c));const y=Ug(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,Ug(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,f.push(c)}const C=Ug(c);return b$e(t,m,y,C,l,u,d,o),VE(...f),u}}const Vi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class E$e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=QU(e),Bc(e,32);const n=Vi(e,0),r=Vi(e,2),s=Vi(e,4),i=Vi(e,6),o=Vi(e,8),a=Vi(e,10),c=Vi(e,12),l=Vi(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Vi(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],y=Vi(e,n+0),w=Vi(e,n+2),C=Vi(e,n+4),N=Vi(e,n+6),S=Vi(e,n+8),P=Vi(e,n+10),O=Vi(e,n+12),L=Vi(e,n+14);let M=i[0]+(y&8191),W=i[1]+((y>>>13|w<<3)&8191),F=i[2]+((w>>>10|C<<6)&8191),V=i[3]+((C>>>7|N<<9)&8191),$=i[4]+((N>>>4|S<<12)&8191),v=i[5]+(S>>>1&8191),E=i[6]+((S>>>14|P<<2)&8191),_=i[7]+((P>>>11|O<<5)&8191),R=i[8]+((O>>>8|L<<8)&8191),x=i[9]+(L>>>5|s),B=0,j=B+M*a+W*(5*m)+F*(5*g)+V*(5*p)+$*(5*f);B=j>>>13,j&=8191,j+=v*(5*h)+E*(5*d)+_*(5*u)+R*(5*l)+x*(5*c),B+=j>>>13,j&=8191;let U=B+M*c+W*a+F*(5*m)+V*(5*g)+$*(5*p);B=U>>>13,U&=8191,U+=v*(5*f)+E*(5*h)+_*(5*d)+R*(5*u)+x*(5*l),B+=U>>>13,U&=8191;let I=B+M*l+W*c+F*a+V*(5*m)+$*(5*g);B=I>>>13,I&=8191,I+=v*(5*p)+E*(5*f)+_*(5*h)+R*(5*d)+x*(5*u),B+=I>>>13,I&=8191;let H=B+M*u+W*l+F*c+V*a+$*(5*m);B=H>>>13,H&=8191,H+=v*(5*g)+E*(5*p)+_*(5*f)+R*(5*h)+x*(5*d),B+=H>>>13,H&=8191;let re=B+M*d+W*u+F*l+V*c+$*a;B=re>>>13,re&=8191,re+=v*(5*m)+E*(5*g)+_*(5*p)+R*(5*f)+x*(5*h),B+=re>>>13,re&=8191;let ne=B+M*h+W*d+F*u+V*l+$*c;B=ne>>>13,ne&=8191,ne+=v*a+E*(5*m)+_*(5*g)+R*(5*p)+x*(5*f),B+=ne>>>13,ne&=8191;let ge=B+M*f+W*h+F*d+V*u+$*l;B=ge>>>13,ge&=8191,ge+=v*c+E*a+_*(5*m)+R*(5*g)+x*(5*p),B+=ge>>>13,ge&=8191;let te=B+M*p+W*f+F*h+V*d+$*u;B=te>>>13,te&=8191,te+=v*l+E*c+_*a+R*(5*m)+x*(5*g),B+=te>>>13,te&=8191;let he=B+M*g+W*p+F*f+V*h+$*d;B=he>>>13,he&=8191,he+=v*u+E*l+_*c+R*a+x*(5*m),B+=he>>>13,he&=8191;let me=B+M*m+W*g+F*p+V*f+$*h;B=me>>>13,me&=8191,me+=v*d+E*u+_*l+R*c+x*a,B+=me>>>13,me&=8191,B=(B<<2)+B|0,B=B+j|0,j=B&8191,B=B>>>13,U+=B,i[0]=j,i[1]=U,i[2]=I,i[3]=H,i[4]=re,i[5]=ne,i[6]=ge,i[7]=te,i[8]=he,i[9]=me}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;VE(r)}update(e){AH(this);const{buffer:n,blockLen:r}=this;e=QU(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){VE(this.h,this.r,this.buffer,this.pad)}digestInto(e){AH(this),o$e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function C$e(t){const e=(r,s)=>t(s).update(QU(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const _$e=C$e(t=>new E$e(t));function A$e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],y=e[7],w=s,C=n[0],N=n[1],S=n[2],P=o,O=a,L=c,M=l,W=u,F=d,V=h,$=f,v=p,E=g,_=m,R=y,x=w,B=C,j=N,U=S;for(let H=0;H<i;H+=2)P=P+W|0,x=sr(x^P,16),v=v+x|0,W=sr(W^v,12),P=P+W|0,x=sr(x^P,8),v=v+x|0,W=sr(W^v,7),O=O+F|0,B=sr(B^O,16),E=E+B|0,F=sr(F^E,12),O=O+F|0,B=sr(B^O,8),E=E+B|0,F=sr(F^E,7),L=L+V|0,j=sr(j^L,16),_=_+j|0,V=sr(V^_,12),L=L+V|0,j=sr(j^L,8),_=_+j|0,V=sr(V^_,7),M=M+$|0,U=sr(U^M,16),R=R+U|0,$=sr($^R,12),M=M+$|0,U=sr(U^M,8),R=R+U|0,$=sr($^R,7),P=P+F|0,U=sr(U^P,16),_=_+U|0,F=sr(F^_,12),P=P+F|0,U=sr(U^P,8),_=_+U|0,F=sr(F^_,7),O=O+V|0,x=sr(x^O,16),R=R+x|0,V=sr(V^R,12),O=O+V|0,x=sr(x^O,8),R=R+x|0,V=sr(V^R,7),L=L+$|0,B=sr(B^L,16),v=v+B|0,$=sr($^v,12),L=L+$|0,B=sr(B^L,8),v=v+B|0,$=sr($^v,7),M=M+W|0,j=sr(j^M,16),E=E+j|0,W=sr(W^E,12),M=M+W|0,j=sr(j^M,8),E=E+j|0,W=sr(W^E,7);let I=0;r[I++]=o+P|0,r[I++]=a+O|0,r[I++]=c+L|0,r[I++]=l+M|0,r[I++]=u+W|0,r[I++]=d+F|0,r[I++]=h+V|0,r[I++]=f+$|0,r[I++]=p+v|0,r[I++]=g+E|0,r[I++]=m+_|0,r[I++]=y+R|0,r[I++]=w+x|0,r[I++]=C+B|0,r[I++]=N+j|0,r[I++]=S+U|0}const S$e=v$e(A$e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),I$e=new Uint8Array(16),TH=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(I$e.subarray(n))},N$e=new Uint8Array(32);function RH(t,e,n,r,s){const i=t(e,n,N$e),o=_$e.create(i);s&&TH(o,s),TH(o,r);const a=new Uint8Array(16),c=a$e(a);NH(c,0,BigInt(s?s.length:0),!0),NH(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return VE(i,a),l}const x$e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=IH(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=RH(t,e,n,a,r);return i.set(c,o),VE(c),i},decrypt(s,i){i=IH(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=RH(t,e,n,o,r);if(!d$e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),VE(c),i}}),Vse=h$e({blockSize:64,nonceLength:12,tagLength:16},x$e(S$e));let Kse=class extends A4{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,_4(e);const r=qE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return GE(this),this.iHash.update(e),this}digestInto(e){GE(this),qI(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const xP=(t,e,n)=>new Kse(t,e).update(n).digest();xP.create=(t,e)=>new Kse(t,e);function T$e(t,e,n){return _4(t),n===void 0&&(n=new Uint8Array(t.outputLen)),xP(t,qE(n),qE(e))}const I3=new Uint8Array([0]),kH=new Uint8Array;function R$e(t,e,n,r=32){if(_4(t),gS(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=kH);const i=new Uint8Array(s*t.outputLen),o=xP.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)I3[0]=l+1,a.update(l===0?kH:c).update(n).update(I3).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),I3.fill(0),i.slice(0,r)}const k$e=(t,e,n,r,s)=>R$e(t,T$e(t,e,n),r,s);function P$e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function O$e(t,e,n){return t&e^~t&n}function D$e(t,e,n){return t&e^t&n^e&n}let M$e=class extends A4{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=A3(this.buffer)}update(e){GE(this);const{view:n,buffer:r,blockLen:s}=this;e=qE(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=A3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){GE(this),Mse(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;P$e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=A3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const B$e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ip=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),op=new Uint32Array(64);class L$e extends M$e{constructor(){super(64,32,8,!1),this.A=ip[0]|0,this.B=ip[1]|0,this.C=ip[2]|0,this.D=ip[3]|0,this.E=ip[4]|0,this.F=ip[5]|0,this.G=ip[6]|0,this.H=ip[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)op[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=op[d-15],f=op[d-2],p=nd(h,7)^nd(h,18)^h>>>3,g=nd(f,17)^nd(f,19)^f>>>10;op[d]=g+op[d-7]+p+op[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=nd(a,6)^nd(a,11)^nd(a,25),f=u+h+O$e(a,c,l)+B$e[d]+op[d]|0,p=(nd(r,2)^nd(r,13)^nd(r,22))+D$e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){op.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const VI=Bse(()=>new L$e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TP=BigInt(0),RP=BigInt(1),U$e=BigInt(2);function W0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function KI(t){if(!W0(t))throw new Error("Uint8Array expected")}function KE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const $$e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YE(t){KI(t);let e="";for(let n=0;n<t.length;n++)e+=$$e[t[n]];return e}function Wb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function I4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?TP:BigInt("0x"+t)}const Ch={_0:48,_9:57,A:65,F:70,a:97,f:102};function PH(t){if(t>=Ch._0&&t<=Ch._9)return t-Ch._0;if(t>=Ch.A&&t<=Ch.F)return t-(Ch.A-10);if(t>=Ch.a&&t<=Ch.f)return t-(Ch.a-10)}function QE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=PH(t.charCodeAt(i)),a=PH(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function a0(t){return I4(YE(t))}function yS(t){return KI(t),I4(YE(Uint8Array.from(t).reverse()))}function JE(t,e){return QE(t.toString(16).padStart(e*2,"0"))}function kP(t,e){return JE(t,e).reverse()}function F$e(t){return QE(Wb(t))}function Dc(t,e,n){let r;if(typeof e=="string")try{r=QE(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(W0(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function wS(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];KI(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function j$e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function W$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const N3=t=>typeof t=="bigint"&&TP<=t;function PP(t,e,n){return N3(t)&&N3(e)&&N3(n)&&e<=t&&t<n}function ff(t,e,n,r){if(!PP(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Yse(t){let e;for(e=0;t>TP;t>>=RP,e+=1);return e}function z$e(t,e){return t>>BigInt(e)&RP}function H$e(t,e,n){return t|(n?RP:TP)<<BigInt(e)}const N4=t=>(U$e<<BigInt(t-1))-RP,x3=t=>new Uint8Array(t),OH=t=>Uint8Array.from(t);function Qse(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=x3(t),s=x3(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=x3())=>{s=a(OH([0]),u),r=a(),u.length!==0&&(s=a(OH([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return wS(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const G$e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||W0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function FC(t,e,n={}){const r=(s,i,o)=>{const a=G$e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const q$e=()=>{throw new Error("not implemented")};function XU(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var V$e=Object.freeze({__proto__:null,isBytes:W0,abytes:KI,abool:KE,bytesToHex:YE,numberToHexUnpadded:Wb,hexToNumber:I4,hexToBytes:QE,bytesToNumberBE:a0,bytesToNumberLE:yS,numberToBytesBE:JE,numberToBytesLE:kP,numberToVarBytesBE:F$e,ensureBytes:Dc,concatBytes:wS,equalBytes:j$e,utf8ToBytes:W$e,inRange:PP,aInRange:ff,bitLen:Yse,bitGet:z$e,bitSet:H$e,bitMask:N4,createHmacDrbg:Qse,validateObject:FC,notImplemented:q$e,memoized:XU});const Wi=BigInt(0),si=BigInt(1),ty=BigInt(2),K$e=BigInt(3),e5=BigInt(4),DH=BigInt(5),MH=BigInt(8);function qa(t,e){const n=t%e;return n>=Wi?n:e+n}function Jse(t,e,n){if(e<Wi)throw new Error("invalid exponent, negatives unsupported");if(n<=Wi)throw new Error("invalid modulus");if(n===si)return Wi;let r=si;for(;e>Wi;)e&si&&(r=r*t%n),t=t*t%n,e>>=si;return r}function au(t,e,n){let r=t;for(;e-- >Wi;)r*=r,r%=n;return r}function t5(t,e){if(t===Wi)throw new Error("invert: expected non-zero number");if(e<=Wi)throw new Error("invert: expected positive modulus, got "+e);let n=qa(t,e),r=e,s=Wi,i=si;for(;n!==Wi;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==si)throw new Error("invert: does not exist");return qa(s,e)}function Y$e(t){const e=(t-si)/ty;let n,r,s;for(n=t-si,r=0;n%ty===Wi;n/=ty,r++);for(s=ty;s<t&&Jse(s,e,t)!==t-si;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+si)/e5;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+si)/ty;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,si<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Q$e(t){if(t%e5===K$e){const e=(t+si)/e5;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%MH===DH){const e=(t-DH)/MH;return function(n,r){const s=n.mul(r,ty),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ty),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Y$e(t)}const J$e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Z$e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=J$e.reduce((r,s)=>(r[s]="function",r),e);return FC(t,n)}function X$e(t,e,n){if(n<Wi)throw new Error("invalid exponent, negatives unsupported");if(n===Wi)return t.ONE;if(n===si)return e;let r=t.ONE,s=e;for(;n>Wi;)n&si&&(r=t.mul(r,s)),s=t.sqr(s),n>>=si;return r}function e4e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Zse(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Xse(t,e,n=!1,r={}){if(t<=Wi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Zse(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:N4(s),ZERO:Wi,ONE:si,create:c=>qa(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Wi<=c&&c<t},is0:c=>c===Wi,isOdd:c=>(c&si)===si,neg:c=>qa(-c,t),eql:(c,l)=>c===l,sqr:c=>qa(c*c,t),add:(c,l)=>qa(c+l,t),sub:(c,l)=>qa(c-l,t),mul:(c,l)=>qa(c*l,t),pow:(c,l)=>X$e(a,c,l),div:(c,l)=>qa(c*t5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>t5(c,t),sqrt:r.sqrt||(c=>(o||(o=Q$e(t)),o(a,c))),invertBatch:c=>e4e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kP(c,i):JE(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?yS(c):a0(c)}});return Object.freeze(a)}function eie(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function tie(t){const e=eie(t);return e+Math.ceil(e/2)}function t4e(t,e,n=!1){const r=t.length,s=eie(e),i=tie(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?yS(t):a0(t),a=qa(o,e-si)+si;return n?kP(a,s):JE(a,s)}const BH=BigInt(0),fx=BigInt(1);function T3(t,e){const n=e.negate();return t?n:e}function nie(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function R3(t,e){nie(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function n4e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function r4e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const k3=new WeakMap,rie=new WeakMap;function P3(t){return rie.get(t)||1}function s4e(t,e){return{constTimeNegate:T3,hasPrecomputes(n){return P3(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>BH;)r&fx&&(s=s.add(i)),i=i.double(),r>>=fx;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=R3(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=R3(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=fx);const g=f,m=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(T3(y,r[g])):a=a.add(T3(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=R3(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===BH)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=fx),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=k3.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&k3.set(r,s(i))),i},wNAFCached(n,r,s){const i=P3(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=P3(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){nie(r,e),rie.set(n,r),k3.delete(n)}}}function i4e(t,e,n,r){if(n4e(n,t),r4e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Yse(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function sie(t){return Z$e(t.Fp),FC(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Zse(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Vw=BigInt(0),O3=BigInt(1);function o4e(t){return FC(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function a4e(t){const e=o4e(t),{P:n}=e,r=w=>qa(w,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>Jse(w,n-BigInt(2),n));function l(w,C,N){const S=r(w*(C-N));return C=r(C-S),N=r(N+S),[C,N]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,C){ff("u",w,Vw,n),ff("scalar",C,Vw,n);const N=C,S=w;let P=O3,O=Vw,L=w,M=O3,W=Vw,F;for(let $=BigInt(s-1);$>=Vw;$--){const v=N>>$&O3;W^=v,F=l(W,P,L),P=F[0],L=F[1],F=l(W,O,M),O=F[0],M=F[1],W=v;const E=P+O,_=r(E*E),R=P-O,x=r(R*R),B=_-x,j=L+M,U=L-M,I=r(U*E),H=r(j*R),re=I+H,ne=I-H;L=r(re*re),M=r(S*r(ne*ne)),P=r(_*x),O=r(B*(_+r(u*B)))}F=l(W,P,L),P=F[0],L=F[1],F=l(W,O,M),O=F[0],M=F[1];const V=c(O);return r(P*V)}function h(w){return kP(r(w),i)}function f(w){const C=Dc("u coordinate",w,i);return o===32&&(C[31]&=127),yS(C)}function p(w){const C=Dc("scalar",w),N=C.length;if(N!==i&&N!==o){let S=""+i+" or "+o;throw new Error("invalid scalar, expected "+S+" bytes, got "+N)}return yS(a(C))}function g(w,C){const N=f(C),S=p(w),P=d(N,S);if(P===Vw)throw new Error("invalid private or public key received");return h(P)}const m=h(e.Gu);function y(w){return g(w,m)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(w,C)=>g(w,C),getPublicKey:w=>y(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const n5=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const c4e=BigInt(1),LH=BigInt(2),l4e=BigInt(3),u4e=BigInt(5);BigInt(8);function d4e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=n5,o=t*t%i*t%i,a=au(o,LH,i)*o%i,c=au(a,c4e,i)*t%i,l=au(c,u4e,i)*c%i,u=au(l,e,i)*l%i,d=au(u,n,i)*u%i,h=au(d,r,i)*d%i,f=au(h,s,i)*h%i,p=au(f,s,i)*h%i,g=au(p,e,i)*l%i;return{pow_p_5_8:au(g,LH,i)*t%i,b2:o}}function h4e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const r5=a4e({P:n5,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=n5,{pow_p_5_8:n,b2:r}=d4e(t);return qa(au(n,l4e,e)*r,e)},adjustScalarBytes:h4e,randomBytes:$C});function UH(t){t.lowS!==void 0&&KE("lowS",t.lowS),t.prehash!==void 0&&KE("prehash",t.prehash)}function f4e(t){const e=sie(t);FC(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:p4e,hexToBytes:g4e}=V$e;class m4e extends Error{constructor(e=""){super(e)}}const Mh={Err:m4e,_tlv:{encode:(t,e)=>{const{Err:n}=Mh;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Wb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Wb(s.length/2|128):"";return Wb(t)+i+s+e},decode(t,e){const{Err:n}=Mh;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Mh;if(t<Jh)throw new e("integer: negative integers are not allowed");let n=Wb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Mh;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return p4e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Mh,s=typeof t=="string"?g4e(t):t;KI(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Mh,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Jh=BigInt(0),Pi=BigInt(1);BigInt(2);const $H=BigInt(3);BigInt(4);function y4e(t){const e=f4e(t),{Fp:n}=e,r=Xse(e.n,e.nBitLength),s=e.toBytes||((g,m,y)=>{const w=m.toAffine();return wS(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(g=>{const m=g.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(g){const{a:m,b:y}=e,w=n.sqr(g),C=n.mul(w,g);return n.add(n.add(C,n.mul(g,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return PP(g,Pi,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:C}=e;if(m&&typeof g!="bigint"){if(W0(g)&&(g=YE(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let N;try{N=typeof g=="bigint"?g:a0(Dc("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return w&&(N=qa(N,C)),ff("private key",N,Pi,C),N}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=XU((g,m)=>{const{px:y,py:w,pz:C}=g;if(n.eql(C,n.ONE))return{x:y,y:w};const N=g.is0();m==null&&(m=N?n.ONE:n.inv(C));const S=n.mul(y,m),P=n.mul(w,m),O=n.mul(C,m);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:S,y:P}}),d=XU(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=g.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),C=o(m);if(!n.eql(w,C))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const C=N=>n.eql(N,n.ZERO);return C(y)&&C(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,C)=>w.toAffine(y[C])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(i(Dc("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return i4e(h,r,m,y)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:C}=this,{px:N,py:S,pz:P}=m,O=n.eql(n.mul(y,P),n.mul(N,C)),L=n.eql(n.mul(w,P),n.mul(S,C));return O&&L}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,$H),{px:C,py:N,pz:S}=this;let P=n.ZERO,O=n.ZERO,L=n.ZERO,M=n.mul(C,C),W=n.mul(N,N),F=n.mul(S,S),V=n.mul(C,N);return V=n.add(V,V),L=n.mul(C,S),L=n.add(L,L),P=n.mul(m,L),O=n.mul(w,F),O=n.add(P,O),P=n.sub(W,O),O=n.add(W,O),O=n.mul(P,O),P=n.mul(V,P),L=n.mul(w,L),F=n.mul(m,F),V=n.sub(M,F),V=n.mul(m,V),V=n.add(V,L),L=n.add(M,M),M=n.add(L,M),M=n.add(M,F),M=n.mul(M,V),O=n.add(O,M),F=n.mul(N,S),F=n.add(F,F),M=n.mul(F,V),P=n.sub(P,M),L=n.mul(F,W),L=n.add(L,L),L=n.add(L,L),new h(P,O,L)}add(m){l(m);const{px:y,py:w,pz:C}=this,{px:N,py:S,pz:P}=m;let O=n.ZERO,L=n.ZERO,M=n.ZERO;const W=e.a,F=n.mul(e.b,$H);let V=n.mul(y,N),$=n.mul(w,S),v=n.mul(C,P),E=n.add(y,w),_=n.add(N,S);E=n.mul(E,_),_=n.add(V,$),E=n.sub(E,_),_=n.add(y,C);let R=n.add(N,P);return _=n.mul(_,R),R=n.add(V,v),_=n.sub(_,R),R=n.add(w,C),O=n.add(S,P),R=n.mul(R,O),O=n.add($,v),R=n.sub(R,O),M=n.mul(W,_),O=n.mul(F,v),M=n.add(O,M),O=n.sub($,M),M=n.add($,M),L=n.mul(O,M),$=n.add(V,V),$=n.add($,V),v=n.mul(W,v),_=n.mul(F,_),$=n.add($,v),v=n.sub(V,v),v=n.mul(W,v),_=n.add(_,v),V=n.mul($,_),L=n.add(L,V),V=n.mul(R,_),O=n.mul(E,O),O=n.sub(O,V),V=n.mul(E,$),M=n.mul(R,M),M=n.add(M,V),new h(O,L,M)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;ff("scalar",m,Jh,w);const C=h.ZERO;if(m===Jh)return C;if(this.is0()||m===Pi)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:N,k1:S,k2neg:P,k2:O}=y.splitScalar(m),L=C,M=C,W=this;for(;S>Jh||O>Jh;)S&Pi&&(L=L.add(W)),O&Pi&&(M=M.add(W)),W=W.double(),S>>=Pi,O>>=Pi;return N&&(L=L.negate()),P&&(M=M.negate()),M=new h(n.mul(M.px,y.beta),M.py,M.pz),L.add(M)}multiply(m){const{endo:y,n:w}=e;ff("scalar",m,Pi,w);let C,N;if(y){const{k1neg:S,k1:P,k2neg:O,k2:L}=y.splitScalar(m);let{p:M,f:W}=this.wNAF(P),{p:F,f:V}=this.wNAF(L);M=p.constTimeNegate(S,M),F=p.constTimeNegate(O,F),F=new h(n.mul(F.px,y.beta),F.py,F.pz),C=M.add(F),N=W.add(V)}else{const{p:S,f:P}=this.wNAF(m);C=S,N=P}return h.normalizeZ([C,N])[0]}multiplyAndAddUnsafe(m,y,w){const C=h.BASE,N=(P,O)=>O===Jh||O===Pi||!P.equals(C)?P.multiplyUnsafe(O):P.multiply(O),S=N(this,y).add(N(m,w));return S.is0()?void 0:S}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===Pi)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===Pi?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return KE("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return KE("isCompressed",m),YE(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=s4e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function w4e(t){const e=sie(t);return FC(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function b4e(t){const e=w4e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(v){return qa(v,r)}function a(v){return t5(v,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=y4e({...e,toBytes(v,E,_){const R=E.toAffine(),x=n.toBytes(R.x),B=wS;return KE("isCompressed",_),_?B(Uint8Array.from([E.hasEvenY()?2:3]),x):B(Uint8Array.from([4]),x,n.toBytes(R.y))},fromBytes(v){const E=v.length,_=v[0],R=v.subarray(1);if(E===s&&(_===2||_===3)){const x=a0(R);if(!PP(x,Pi,n.ORDER))throw new Error("Point is not on curve");const B=u(x);let j;try{j=n.sqrt(B)}catch(I){const H=I instanceof Error?": "+I.message:"";throw new Error("Point is not on curve"+H)}const U=(j&Pi)===Pi;return(_&1)===1!==U&&(j=n.neg(j)),{x,y:j}}else if(E===i&&_===4){const x=n.fromBytes(R.subarray(0,n.BYTES)),B=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x,y:B}}else{const x=s,B=i;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+B+", got "+E)}}}),h=v=>YE(JE(v,e.nByteLength));function f(v){const E=r>>Pi;return v>E}function p(v){return f(v)?o(-v):v}const g=(v,E,_)=>a0(v.slice(E,_));class m{constructor(E,_,R){this.r=E,this.s=_,this.recovery=R,this.assertValidity()}static fromCompact(E){const _=e.nByteLength;return E=Dc("compactSignature",E,_*2),new m(g(E,0,_),g(E,_,2*_))}static fromDER(E){const{r:_,s:R}=Mh.toSig(Dc("DER",E));return new m(_,R)}assertValidity(){ff("r",this.r,Pi,r),ff("s",this.s,Pi,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:_,s:R,recovery:x}=this,B=P(Dc("msgHash",E));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const j=x===2||x===3?_+e.n:_;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const U=x&1?"03":"02",I=c.fromHex(U+h(j)),H=a(j),re=o(-B*H),ne=o(R*H),ge=c.BASE.multiplyAndAddUnsafe(I,re,ne);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return QE(this.toDERHex())}toDERHex(){return Mh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return QE(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(v){try{return l(v),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const v=tie(e.n);return t4e(e.randomBytes(v),e.n)},precompute(v=8,E=c.BASE){return E._setWindowSize(v),E.multiply(BigInt(3)),E}};function w(v,E=!0){return c.fromPrivateKey(v).toRawBytes(E)}function C(v){const E=W0(v),_=typeof v=="string",R=(E||_)&&v.length;return E?R===s||R===i:_?R===2*s||R===2*i:v instanceof c}function N(v,E,_=!0){if(C(v))throw new Error("first arg must be private key");if(!C(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(v)).toRawBytes(_)}const S=e.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const E=a0(v),_=v.length*8-e.nBitLength;return _>0?E>>BigInt(_):E},P=e.bits2int_modN||function(v){return o(S(v))},O=N4(e.nBitLength);function L(v){return ff("num < 2^"+e.nBitLength,v,Jh,O),JE(v,e.nByteLength)}function M(v,E,_=W){if(["recovered","canonical"].some(he=>he in _))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:x}=e;let{lowS:B,prehash:j,extraEntropy:U}=_;B==null&&(B=!0),v=Dc("msgHash",v),UH(_),j&&(v=Dc("prehashed msgHash",R(v)));const I=P(v),H=l(E),re=[L(H),L(I)];if(U!=null&&U!==!1){const he=U===!0?x(n.BYTES):U;re.push(Dc("extraEntropy",he))}const ne=wS(...re),ge=I;function te(he){const me=S(he);if(!d(me))return;const _e=a(me),Ce=c.BASE.multiply(me).toAffine(),Be=o(Ce.x);if(Be===Jh)return;const Te=o(_e*o(ge+Be*H));if(Te===Jh)return;let xe=(Ce.x===Be?0:2)|Number(Ce.y&Pi),je=Te;return B&&f(Te)&&(je=p(Te),xe^=1),new m(Be,je,xe)}return{seed:ne,k2sig:te}}const W={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function V(v,E,_=W){const{seed:R,k2sig:x}=M(v,E,_),B=e;return Qse(B.hash.outputLen,B.nByteLength,B.hmac)(R,x)}c.BASE._setWindowSize(8);function $(v,E,_,R=F){var Te;const x=v;E=Dc("msgHash",E),_=Dc("publicKey",_);const{lowS:B,prehash:j,format:U}=R;if(UH(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&U!=="compact"&&U!=="der")throw new Error("format must be compact or der");const I=typeof x=="string"||W0(x),H=!I&&!U&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!I&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let re,ne;try{if(H&&(re=new m(x.r,x.s)),I){try{U!=="compact"&&(re=m.fromDER(x))}catch(xe){if(!(xe instanceof Mh.Err))throw xe}!re&&U!=="der"&&(re=m.fromCompact(x))}ne=c.fromHex(_)}catch{return!1}if(!re||B&&re.hasHighS())return!1;j&&(E=e.hash(E));const{r:ge,s:te}=re,he=P(E),me=a(te),_e=o(he*me),Ce=o(ge*me),Be=(Te=c.BASE.multiplyAndAddUnsafe(ne,_e,Ce))==null?void 0:Te.toAffine();return Be?o(Be.x)===ge:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:N,sign:V,verify:$,ProjectivePoint:c,Signature:m,utils:y}}function v4e(t){return{hash:t,hmac:(e,...n)=>xP(t,e,A8e(...n)),randomBytes:$C}}function E4e(t,e){const n=r=>b4e({...t,...v4e(r)});return{...n(e),create:n}}const iie=Xse(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),C4e=iie.create(BigInt("-3")),_4e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),A4e=E4e({a:C4e,b:_4e,Fp:iie,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},VI),oie="base10",ga="base16",Du="base64pad",Pp="base64url",YI="utf8",aie=0,pf=1,QI=2,S4e=0,FH=1,F_=12,x4=32;function I4e(){const t=r5.utils.randomPrivateKey(),e=r5.getPublicKey(t);return{privateKey:cc(t,ga),publicKey:cc(e,ga)}}function s5(){const t=$C(x4);return cc(t,ga)}function N4e(t,e){const n=r5.getSharedSecret(Ol(t,ga),Ol(e,ga)),r=k$e(VI,n,void 0,void 0,x4);return cc(r,ga)}function yT(t){const e=VI(Ol(t,ga));return cc(e,ga)}function Td(t){const e=VI(Ol(t,YI));return cc(e,ga)}function cie(t){return Ol(`${t}`,oie)}function z0(t){return Number(cc(t,oie))}function lie(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function uie(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function x4e(t){const e=cie(typeof t.type<"u"?t.type:aie);if(z0(e)===pf&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ol(t.senderPublicKey,ga):void 0,r=typeof t.iv<"u"?Ol(t.iv,ga):$C(F_),s=Ol(t.symKey,ga),i=Vse(s,r).encrypt(Ol(t.message,YI)),o=die({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Pp?lie(o):o}function T4e(t){const e=Ol(t.symKey,ga),{sealed:n,iv:r}=bS({encoded:t.encoded,encoding:t.encoding}),s=Vse(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return cc(s,YI)}function R4e(t,e){const n=cie(QI),r=$C(F_),s=Ol(t,YI),i=die({type:n,sealed:s,iv:r});return e===Pp?lie(i):i}function k4e(t,e){const{sealed:n}=bS({encoded:t,encoding:e});return cc(n,YI)}function die(t){if(z0(t.type)===QI)return cc(L_([t.type,t.sealed]),Du);if(z0(t.type)===pf){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cc(L_([t.type,t.senderPublicKey,t.iv,t.sealed]),Du)}return cc(L_([t.type,t.iv,t.sealed]),Du)}function bS(t){const e=(t.encoding||Du)===Pp?uie(t.encoded):t.encoded,n=Ol(e,Du),r=n.slice(S4e,FH),s=FH;if(z0(r)===pf){const c=s+x4,l=c+F_,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(z0(r)===QI){const c=n.slice(s),l=$C(F_);return{type:r,sealed:c,iv:l}}const i=s+F_,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function P4e(t,e){const n=bS({encoded:t,encoding:e==null?void 0:e.encoding});return hie({type:z0(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?cc(n.senderPublicKey,ga):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function hie(t){const e=(t==null?void 0:t.type)||aie;if(e===pf){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function jH(t){return t.type===pf&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function WH(t){return t.type===QI}function O4e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return L_([new Uint8Array([4]),e,n])}function D4e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(uie(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=VI(c),u=O4e(e);if(!A4e.verify(L_([o,a]),l,u))throw new Error("Invalid signature");return MU(t).payload}const M4e="irn";function uk(t){return(t==null?void 0:t.relay)||{protocol:M4e}}function Z1(t){const e=PMe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function B4e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function zH(t){if(!t.includes("wc:")){const l=Dse(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:L4e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:B4e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function L4e(t){return t.startsWith("//")?t.substring(2):t}function U4e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function HH(t){const e=new URLSearchParams,n=U4e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function px(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var $4e=Object.defineProperty,F4e=Object.defineProperties,j4e=Object.getOwnPropertyDescriptors,GH=Object.getOwnPropertySymbols,W4e=Object.prototype.hasOwnProperty,z4e=Object.prototype.propertyIsEnumerable,qH=(t,e,n)=>e in t?$4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H4e=(t,e)=>{for(var n in e||(e={}))W4e.call(e,n)&&qH(t,n,e[n]);if(GH)for(var n of GH(e))z4e.call(e,n)&&qH(t,n,e[n]);return t},G4e=(t,e)=>F4e(t,j4e(e));function jC(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function q4e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...jC(n.accounts))}),e}function V4e(t,e){const n=[];return Object.values(t).forEach(r=>{jC(r.accounts).includes(e)&&n.push(...r.methods)}),n}function K4e(t,e){const n=[];return Object.values(t).forEach(r=>{jC(r.accounts).includes(e)&&n.push(...r.events)}),n}function OP(t){return t.includes(":")}function zb(t){return OP(t)?t.split(":")[0]:t}function VH(t){var e,n,r;const s={};if(!Fg(t))return s;for(const[i,o]of Object.entries(t)){const a=OP(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=zb(i);s[u]=G4e(H4e({},s[u]),{chains:Vd(a,(e=s[u])==null?void 0:e.chains),methods:Vd(c,(n=s[u])==null?void 0:n.methods),events:Vd(l,(r=s[u])==null?void 0:r.events)})}return s}function Y4e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function KH(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Y4e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Vd(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Q4e(t,e){var n,r,s,i,o,a;const c=VH(t),l=VH(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Vd((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Vd((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Vd((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const J4e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Z4e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ge(t,e){const{message:n,code:r}=Z4e[t];return{message:e?`${n} ${e}`:n,code:r}}function Ur(t,e){const{message:n,code:r}=J4e[t];return{message:e?`${n} ${e}`:n,code:r}}function $g(t,e){return!!Array.isArray(t)}function Fg(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function co(t){return typeof t>"u"}function li(t,e){return e&&co(t)?!0:typeof t=="string"&&!!t.trim().length}function T4(t,e){return e&&co(t)?!0:typeof t=="number"&&!isNaN(t)}function X4e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Cy(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=jC(a),d=n[o];(!Cy(Tse(o,d),u)||!Cy(d.methods,c)||!Cy(d.events,l))&&(i=!1)}),i):!1}function dk(t){return li(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function eFe(t){if(li(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&dk(n)}}return!1}function tFe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(li(t,!1)){if(e(t))return!0;const n=Dse(t);return e(n)}}catch{}return!1}function nFe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function rFe(t){return t==null?void 0:t.topic}function sFe(t,e){let n=null;return li(t==null?void 0:t.publicKey,!1)||(n=Ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function YH(t){let e=!0;return $g(t)?t.length&&(e=t.every(n=>li(n,!1))):e=!1,e}function iFe(t,e,n){let r=null;return $g(e)&&e.length?e.forEach(s=>{r||dk(s)||(r=Ur("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):dk(t)||(r=Ur("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function oFe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=iFe(s,Tse(s,i),`${e} ${n}`);o&&(r=o)}),r}function aFe(t,e){let n=null;return $g(t)?t.forEach(r=>{n||eFe(r)||(n=Ur("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Ur("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function cFe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=aFe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function lFe(t,e){let n=null;return YH(t==null?void 0:t.methods)?YH(t==null?void 0:t.events)||(n=Ur("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Ur("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function fie(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=lFe(r,`${e}, namespace`);s&&(n=s)}),n}function uFe(t,e,n){let r=null;if(t&&Fg(t)){const s=fie(t,e);s&&(r=s);const i=oFe(t,e,n);i&&(r=i)}else r=Ge("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function D3(t,e){let n=null;if(t&&Fg(t)){const r=fie(t,e);r&&(n=r);const s=cFe(t,e);s&&(n=s)}else n=Ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function pie(t){return li(t.protocol,!0)}function dFe(t,e){let n=!1;return t?t&&$g(t)&&t.length&&t.forEach(r=>{n=pie(r)}):n=!0,n}function hFe(t){return typeof t=="number"}function Ua(t){return typeof t<"u"&&typeof t!==null}function fFe(t){return!(!t||typeof t!="object"||!t.code||!T4(t.code,!1)||!t.message||!li(t.message,!1))}function pFe(t){return!(co(t)||!li(t.method,!1))}function gFe(t){return!(co(t)||co(t.result)&&co(t.error)||!T4(t.id,!1)||!li(t.jsonrpc,!1))}function mFe(t){return!(co(t)||!li(t.name,!1))}function QH(t,e){return!(!dk(e)||!q4e(t).includes(e))}function yFe(t,e,n){return li(n,!1)?V4e(t,e).includes(n):!1}function wFe(t,e,n){return li(n,!1)?K4e(t,e).includes(n):!1}function JH(t,e,n){let r=null;const s=bFe(t),i=vFe(e),o=Object.keys(s),a=Object.keys(i),c=ZH(Object.keys(t)),l=ZH(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Cy(o,a)||(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=jC(e[d].accounts);h.includes(d)||(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Cy(s[d].methods,i[d].methods)?Cy(s[d].events,i[d].events)||(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function bFe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function ZH(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function vFe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=jC(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function EFe(t,e){return T4(t,!1)&&t<=e.max&&t>=e.min}function XH(){const t=GI();return new Promise(e=>{switch(t){case Hc.browser:e(CFe());break;case Hc.reactNative:e(_Fe());break;case Hc.node:e(AFe());break;default:e(!0)}})}function CFe(){return UC()&&(navigator==null?void 0:navigator.onLine)}async function _Fe(){if(bm()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function AFe(){return!0}function SFe(t){switch(GI()){case Hc.browser:IFe(t);break;case Hc.reactNative:NFe(t);break}}function IFe(t){!bm()&&UC()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function NFe(t){bm()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function xFe(){var t;return UC()&&B0()?((t=B0())==null?void 0:t.visibilityState)==="visible":!0}const M3={};class A1{static get(e){return M3[e]}static set(e,n){M3[e]=n}static delete(e){delete M3[e]}}var TFe={};const gie="wc",mie=2,i5="core",nh=`${gie}@2:${i5}:`,RFe={logger:"error"},kFe={database:":memory:"},PFe="crypto",eG="client_ed25519_seed",OFe=We.ONE_DAY,DFe="keychain",MFe="0.3",BFe="messages",LFe="0.3",tG=We.SIX_HOURS,UFe="publisher",yie="irn",$Fe="error",wie="wss://relay.walletconnect.org",FFe="relayer",Ui={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},jFe="_subscription",al={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},WFe=.1,o5="2.21.0",fs={link_mode:"link_mode",relay:"relay"},wT={inbound:"inbound",outbound:"outbound"},zFe="0.3",HFe="WALLETCONNECT_CLIENT_ID",nG="WALLETCONNECT_LINK_MODE_APPS",Ic={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},GFe="subscription",qFe="0.3",VFe="pairing",KFe="0.3",S1={wc_pairingDelete:{req:{ttl:We.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:We.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:We.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:We.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:We.ONE_DAY,prompt:!1,tag:0},res:{ttl:We.ONE_DAY,prompt:!1,tag:0}}},ny={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ru={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},YFe="history",QFe="0.3",JFe="expirer",ml={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ZFe="0.3",XFe="verify-api",eje="https://verify.walletconnect.com",bie="https://verify.walletconnect.org",j_=bie,tje=`${j_}/v3`,nje=[eje,bie],rje="echo",sje="https://echo.walletconnect.com",ld={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Th={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},su={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Om={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Dm={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},I1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ije=.1,oje="event-client",aje=86400,cje="https://pulse.walletconnect.org/batch";function lje(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var S=p[y],P=0,O=C-1;(S!==0||P<m)&&O!==-1;O--,P++)S+=256*N[O]>>>0,N[O]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");m=P,y++}for(var L=C-m;L!==C&&N[L]===0;)L++;for(var M=c.repeat(g);L<C;++L)M+=t.charAt(N[L]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var S=0,P=w-1;(N!==0||S<y)&&P!==-1;P--,S++)N+=a*C[P]>>>0,C[P]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=S,g++}if(p[g]!==" "){for(var O=w-y;O!==w&&C[O]===0;)O++;for(var L=new Uint8Array(m+(w-O)),M=m;O!==w;)L[M++]=C[O++];return L}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var uje=lje,dje=uje;const vie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},hje=t=>new TextEncoder().encode(t),fje=t=>new TextDecoder().decode(t);class pje{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class gje{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Eie(this,e)}}class mje{constructor(e){this.decoders=e}or(e){return Eie(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Eie=(t,e)=>new mje({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class yje{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new pje(e,n,r),this.decoder=new gje(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const DP=({name:t,prefix:e,encode:n,decode:r})=>new yje(t,e,n,r),JI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=dje(n,e);return DP({prefix:t,name:e,encode:r,decode:i=>vie(s(i))})},wje=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},bje=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},_o=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>DP({prefix:e,name:t,encode(s){return bje(s,r,n)},decode(s){return wje(s,r,n,t)}}),vje=DP({prefix:"\0",name:"identity",encode:t=>fje(t),decode:t=>hje(t)});var Eje=Object.freeze({__proto__:null,identity:vje});const Cje=_o({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _je=Object.freeze({__proto__:null,base2:Cje});const Aje=_o({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Sje=Object.freeze({__proto__:null,base8:Aje});const Ije=JI({prefix:"9",name:"base10",alphabet:"0123456789"});var Nje=Object.freeze({__proto__:null,base10:Ije});const xje=_o({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tje=_o({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Rje=Object.freeze({__proto__:null,base16:xje,base16upper:Tje});const kje=_o({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Pje=_o({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Oje=_o({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dje=_o({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mje=_o({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bje=_o({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lje=_o({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Uje=_o({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$je=_o({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Fje=Object.freeze({__proto__:null,base32:kje,base32upper:Pje,base32pad:Oje,base32padupper:Dje,base32hex:Mje,base32hexupper:Bje,base32hexpad:Lje,base32hexpadupper:Uje,base32z:$je});const jje=JI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Wje=JI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zje=Object.freeze({__proto__:null,base36:jje,base36upper:Wje});const Hje=JI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gje=JI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qje=Object.freeze({__proto__:null,base58btc:Hje,base58flickr:Gje});const Vje=_o({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kje=_o({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Yje=_o({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qje=_o({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Jje=Object.freeze({__proto__:null,base64:Vje,base64pad:Kje,base64url:Yje,base64urlpad:Qje});const Cie=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Zje=Cie.reduce((t,e,n)=>(t[n]=e,t),[]),Xje=Cie.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function e9e(t){return t.reduce((e,n)=>(e+=Zje[n],e),"")}function t9e(t){const e=[];for(const n of t){const r=Xje[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const n9e=DP({prefix:"🚀",name:"base256emoji",encode:e9e,decode:t9e});var r9e=Object.freeze({__proto__:null,base256emoji:n9e}),s9e=_ie,rG=128,i9e=-128,o9e=Math.pow(2,31);function _ie(t,e,n){e=e||[],n=n||0;for(var r=n;t>=o9e;)e[n++]=t&255|rG,t/=128;for(;t&i9e;)e[n++]=t&255|rG,t>>>=7;return e[n]=t|0,_ie.bytes=n-r+1,e}var a9e=a5,c9e=128,sG=127;function a5(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw a5.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&sG)<<s:(o&sG)*Math.pow(2,s),s+=7}while(o>=c9e);return a5.bytes=i-r,n}var l9e=Math.pow(2,7),u9e=Math.pow(2,14),d9e=Math.pow(2,21),h9e=Math.pow(2,28),f9e=Math.pow(2,35),p9e=Math.pow(2,42),g9e=Math.pow(2,49),m9e=Math.pow(2,56),y9e=Math.pow(2,63),w9e=function(t){return t<l9e?1:t<u9e?2:t<d9e?3:t<h9e?4:t<f9e?5:t<p9e?6:t<g9e?7:t<m9e?8:t<y9e?9:10},b9e={encode:s9e,decode:a9e,encodingLength:w9e},Aie=b9e;const iG=(t,e,n=0)=>(Aie.encode(t,e,n),e),oG=t=>Aie.encodingLength(t),c5=(t,e)=>{const n=e.byteLength,r=oG(t),s=r+oG(n),i=new Uint8Array(s+n);return iG(t,i,0),iG(n,i,r),i.set(e,s),new v9e(t,n,e,i)};class v9e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Sie=({name:t,code:e,encode:n})=>new E9e(t,e,n);class E9e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?c5(this.code,n):n.then(r=>c5(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Iie=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),C9e=Sie({name:"sha2-256",code:18,encode:Iie("SHA-256")}),_9e=Sie({name:"sha2-512",code:19,encode:Iie("SHA-512")});var A9e=Object.freeze({__proto__:null,sha256:C9e,sha512:_9e});const Nie=0,S9e="identity",xie=vie,I9e=t=>c5(Nie,xie(t)),N9e={code:Nie,name:S9e,encode:xie,digest:I9e};var x9e=Object.freeze({__proto__:null,identity:N9e});new TextEncoder,new TextDecoder;const aG={...Eje,..._je,...Sje,...Nje,...Rje,...Fje,...zje,...qje,...Jje,...r9e};({...A9e,...x9e});function T9e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Tie(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const cG=Tie("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),B3=Tie("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=T9e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),R9e={utf8:cG,"utf-8":cG,hex:aG.base16,latin1:B3,ascii:B3,binary:B3,...aG};function k9e(t,e="utf8"){const n=R9e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var P9e=Object.defineProperty,O9e=(t,e,n)=>e in t?P9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rd=(t,e,n)=>O9e(t,typeof e!="symbol"?e+"":e,n);class D9e{constructor(e,n){this.core=e,this.logger=n,rd(this,"keychain",new Map),rd(this,"name",DFe),rd(this,"version",MFe),rd(this,"initialized",!1),rd(this,"storagePrefix",nh),rd(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),rd(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),rd(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),rd(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ge("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),rd(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=vo(n,this.name)}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,VU(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?KU(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var M9e=Object.defineProperty,B9e=(t,e,n)=>e in t?M9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ki=(t,e,n)=>B9e(t,typeof e!="symbol"?e+"":e,n);class L9e{constructor(e,n,r){this.core=e,this.logger=n,Ki(this,"name",PFe),Ki(this,"keychain"),Ki(this,"randomSessionIdentifier",s5()),Ki(this,"initialized",!1),Ki(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ki(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ki(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Ez(s);return qre(i.publicKey)}),Ki(this,"generateKeyPair",()=>{this.isInitialized();const s=I4e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ki(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Ez(i),a=this.randomSessionIdentifier;return await c3e(a,s,OFe,o)}),Ki(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=N4e(a,i);return this.setSymKey(c,o)}),Ki(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||yT(s);return await this.keychain.set(o,s),o}),Ki(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ki(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ki(this,"encode",async(s,i,o)=>{this.isInitialized();const a=hie(o),c=Nf(i);if(WH(a))return R4e(c,o==null?void 0:o.encoding);if(jH(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return x4e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ki(this,"decode",async(s,i,o)=>{this.isInitialized();const a=P4e(i,o);if(WH(a)){const c=k4e(i,o==null?void 0:o.encoding);return M0(c)}if(jH(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=T4e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return M0(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ki(this,"getPayloadType",(s,i=Du)=>{const o=bS({encoded:s,encoding:i});return z0(o.type)}),Ki(this,"getPayloadSenderPublicKey",(s,i=Du)=>{const o=bS({encoded:s,encoding:i});return o.senderPublicKey?cc(o.senderPublicKey,ga):void 0}),this.core=e,this.logger=vo(n,this.name),this.keychain=r||new D9e(this.core,this.logger)}get context(){return gc(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(eG)}catch{e=s5(),await this.keychain.set(eG,e)}return k9e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var U9e=Object.defineProperty,$9e=Object.defineProperties,F9e=Object.getOwnPropertyDescriptors,lG=Object.getOwnPropertySymbols,j9e=Object.prototype.hasOwnProperty,W9e=Object.prototype.propertyIsEnumerable,l5=(t,e,n)=>e in t?U9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z9e=(t,e)=>{for(var n in e||(e={}))j9e.call(e,n)&&l5(t,n,e[n]);if(lG)for(var n of lG(e))W9e.call(e,n)&&l5(t,n,e[n]);return t},H9e=(t,e)=>$9e(t,F9e(e)),wc=(t,e,n)=>l5(t,typeof e!="symbol"?e+"":e,n);class G9e extends F5e{constructor(e,n){super(e,n),this.logger=e,this.core=n,wc(this,"messages",new Map),wc(this,"messagesWithoutClientAck",new Map),wc(this,"name",BFe),wc(this,"version",LFe),wc(this,"initialized",!1),wc(this,"storagePrefix",nh),wc(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),wc(this,"set",async(r,s,i)=>{this.isInitialized();const o=Td(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===wT.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,H9e(z9e({},c),{[o]:s}))}return await this.persist(),o}),wc(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),wc(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),wc(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Td(s);return typeof i[o]<"u"}),wc(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Td(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),wc(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=vo(e,this.name),this.core=n}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,VU(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,VU(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?KU(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?KU(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var q9e=Object.defineProperty,V9e=Object.defineProperties,K9e=Object.getOwnPropertyDescriptors,uG=Object.getOwnPropertySymbols,Y9e=Object.prototype.hasOwnProperty,Q9e=Object.prototype.propertyIsEnumerable,u5=(t,e,n)=>e in t?q9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gx=(t,e)=>{for(var n in e||(e={}))Y9e.call(e,n)&&u5(t,n,e[n]);if(uG)for(var n of uG(e))Q9e.call(e,n)&&u5(t,n,e[n]);return t},L3=(t,e)=>V9e(t,K9e(e)),iu=(t,e,n)=>u5(t,typeof e!="symbol"?e+"":e,n);class J9e extends j5e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,iu(this,"events",new Vl.EventEmitter),iu(this,"name",UFe),iu(this,"queue",new Map),iu(this,"publishTimeout",We.toMiliseconds(We.ONE_MINUTE)),iu(this,"initialPublishTimeout",We.toMiliseconds(We.ONE_SECOND*15)),iu(this,"needsTransportRestart",!1),iu(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||tG,c=uk(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Ey().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(Ui.publish,m),g(h))};this.relayer.events.on(Ui.publish,m);const y=fg(new Promise((w,C)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(N=>{this.logger.warn(N,N==null?void 0:N.message),C(N)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Ui.publish,m)}catch(w){this.queue.set(d,L3(gx({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await fg(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),iu(this,"on",(r,s)=>{this.events.on(r,s)}),iu(this,"once",(r,s)=>{this.events.once(r,s)}),iu(this,"off",(r,s)=>{this.events.off(r,s)}),iu(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=vo(n,this.name),this.registerEventListeners()}get context(){return gc(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=tG,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Z1(uk().protocol).publish,params:gx({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};co((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),co((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Ui.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,L3(gx({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(L3(gx({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(uw.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ui.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ui.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Z9e=Object.defineProperty,X9e=(t,e,n)=>e in t?Z9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kw=(t,e,n)=>X9e(t,typeof e!="symbol"?e+"":e,n);class e7e{constructor(){Kw(this,"map",new Map),Kw(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Kw(this,"get",e=>this.map.get(e)||[]),Kw(this,"exists",(e,n)=>this.get(e).includes(n)),Kw(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Kw(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var t7e=Object.defineProperty,n7e=Object.defineProperties,r7e=Object.getOwnPropertyDescriptors,dG=Object.getOwnPropertySymbols,s7e=Object.prototype.hasOwnProperty,i7e=Object.prototype.propertyIsEnumerable,d5=(t,e,n)=>e in t?t7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N1=(t,e)=>{for(var n in e||(e={}))s7e.call(e,n)&&d5(t,n,e[n]);if(dG)for(var n of dG(e))i7e.call(e,n)&&d5(t,n,e[n]);return t},U3=(t,e)=>n7e(t,r7e(e)),qr=(t,e,n)=>d5(t,typeof e!="symbol"?e+"":e,n);class o7e extends H5e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qr(this,"subscriptions",new Map),qr(this,"topicMap",new e7e),qr(this,"events",new Vl.EventEmitter),qr(this,"name",GFe),qr(this,"version",qFe),qr(this,"pending",new Map),qr(this,"cached",[]),qr(this,"initialized",!1),qr(this,"storagePrefix",nh),qr(this,"subscribeTimeout",We.toMiliseconds(We.ONE_MINUTE)),qr(this,"initialSubscribeTimeout",We.toMiliseconds(We.ONE_SECOND*15)),qr(this,"clientId"),qr(this,"batchSubscribeTopicsLimit",500),qr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),qr(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=uk(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),qr(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),qr(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),qr(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),qr(this,"on",(r,s)=>{this.events.on(r,s)}),qr(this,"once",(r,s)=>{this.events.once(r,s)}),qr(this,"off",(r,s)=>{this.events.off(r,s)}),qr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),qr(this,"start",async()=>{await this.onConnect()}),qr(this,"stop",async()=>{await this.onDisconnect()}),qr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),qr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),qr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(uw.pulse,async()=>{await this.checkPending()}),this.events.on(Ic.created,async r=>{const s=Ic.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ic.deleted,async r=>{const s=Ic.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=vo(n,this.name),this.clientId=""}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=uk(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Ur("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===fs.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Z1(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===fs.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},We.toMiliseconds(We.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ic.created,d),u(h.id))};this.events.on(Ic.created,d);try{const h=await fg(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ic.created,d),u(h)}catch{}}),l=await fg(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ui.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Z1(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await fg(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ui.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Z1(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await fg(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ui.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Z1(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,U3(N1({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,N1({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,N1({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ic.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ic.deleted,U3(N1({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ic.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ic.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>U3(N1({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await f8e(We.toMiliseconds(We.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Td(e+await this.getClientId())}}var a7e=Object.defineProperty,hG=Object.getOwnPropertySymbols,c7e=Object.prototype.hasOwnProperty,l7e=Object.prototype.propertyIsEnumerable,h5=(t,e,n)=>e in t?a7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fG=(t,e)=>{for(var n in e||(e={}))c7e.call(e,n)&&h5(t,n,e[n]);if(hG)for(var n of hG(e))l7e.call(e,n)&&h5(t,n,e[n]);return t},ir=(t,e,n)=>h5(t,typeof e!="symbol"?e+"":e,n);class u7e extends W5e{constructor(e){super(e),ir(this,"protocol","wc"),ir(this,"version",2),ir(this,"core"),ir(this,"logger"),ir(this,"events",new Vl.EventEmitter),ir(this,"provider"),ir(this,"messages"),ir(this,"subscriber"),ir(this,"publisher"),ir(this,"name",FFe),ir(this,"transportExplicitlyClosed",!1),ir(this,"initialized",!1),ir(this,"connectionAttemptInProgress",!1),ir(this,"relayUrl"),ir(this,"projectId"),ir(this,"packageName"),ir(this,"bundleId"),ir(this,"hasExperiencedNetworkDisruption",!1),ir(this,"pingTimeout"),ir(this,"heartBeatTimeout",We.toMiliseconds(We.THIRTY_SECONDS+We.FIVE_SECONDS)),ir(this,"reconnectTimeout"),ir(this,"connectPromise"),ir(this,"reconnectInProgress",!1),ir(this,"requestsInFlight",[]),ir(this,"connectTimeout",We.toMiliseconds(We.ONE_SECOND*15)),ir(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Ey().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),ir(this,"resetPingTimeout",()=>{ck()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),ir(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),ir(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Ui.connect)}),ir(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),ir(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Ui.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ir(this,"registerProviderListeners",()=>{this.provider.on(al.payload,this.onPayloadHandler),this.provider.on(al.connect,this.onConnectHandler),this.provider.on(al.disconnect,this.onDisconnectHandler),this.provider.on(al.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?vo(e.logger,this.name):FI(hw({level:e.logger||$Fe})),this.messages=new G9e(this.logger,e.core),this.subscriber=new o7e(this,this.logger),this.publisher=new J9e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||wie,this.projectId=e.projectId,J6e()?this.packageName=dH():Z6e()&&(this.bundleId=dH()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return gc(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:fs.relay},wT.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ic.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ic.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,fG({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await fg(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await XH())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=mi(We.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Ui.message,e),await this.recordMessageEvent(e,wT.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(al.disconnect,i),await fg(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(al.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(al.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(al.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,We.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(ck())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Kl(new vBe(r8e({sdkVersion:o5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),v4(e)){if(!e.method.endsWith(jFe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:fs.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(fG({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else _P(e)&&this.events.emit(Ui.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,wT.inbound),this.events.emit(Ui.message,e))}async acknowledgePayload(e){const n=EP(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(al.payload,this.onPayloadHandler),this.provider.off(al.connect,this.onConnectHandler),this.provider.off(al.disconnect,this.onDisconnectHandler),this.provider.off(al.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await XH();SFe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(uw.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&xFe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Ui.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},We.toMiliseconds(WFe)))))}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function d7e(){}function pG(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function gG(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function mG(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const h7e="[object RegExp]",f7e="[object String]",p7e="[object Number]",g7e="[object Boolean]",yG="[object Arguments]",m7e="[object Symbol]",y7e="[object Date]",w7e="[object Map]",b7e="[object Set]",v7e="[object Array]",E7e="[object Function]",C7e="[object ArrayBuffer]",$3="[object Object]",_7e="[object Error]",A7e="[object DataView]",S7e="[object Uint8Array]",I7e="[object Uint8ClampedArray]",N7e="[object Uint16Array]",x7e="[object Uint32Array]",T7e="[object BigUint64Array]",R7e="[object Int8Array]",k7e="[object Int16Array]",P7e="[object Int32Array]",O7e="[object BigInt64Array]",D7e="[object Float32Array]",M7e="[object Float64Array]";function B7e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function L7e(t,e,n){return X1(t,e,void 0,void 0,void 0,void 0,n)}function X1(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return W_(t,e,i,o)}return W_(t,e,i,o)}function W_(t,e,n,r){if(Object.is(t,e))return!0;let s=mG(t),i=mG(e);if(s===yG&&(s=$3),i===yG&&(i=$3),s!==i)return!1;switch(s){case f7e:return t.toString()===e.toString();case p7e:{const c=t.valueOf(),l=e.valueOf();return B7e(c,l)}case g7e:case y7e:case m7e:return Object.is(t.valueOf(),e.valueOf());case h7e:return t.source===e.source&&t.flags===e.flags;case E7e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case w7e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!X1(l,e.get(c),c,t,e,n,r))return!1;return!0}case b7e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>X1(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case v7e:case S7e:case I7e:case N7e:case x7e:case T7e:case R7e:case k7e:case P7e:case O7e:case D7e:case M7e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!X1(t[c],e[c],c,t,e,n,r))return!1;return!0}case C7e:return t.byteLength!==e.byteLength?!1:W_(new Uint8Array(t),new Uint8Array(e),n,r);case A7e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:W_(new Uint8Array(t),new Uint8Array(e),n,r);case _7e:return t.name===e.name&&t.message===e.message;case $3:{if(!(W_(t.constructor,e.constructor,n,r)||pG(t)&&pG(e)))return!1;const c=[...Object.keys(t),...gG(t)],l=[...Object.keys(e),...gG(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!X1(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function U7e(t,e){return L7e(t,e,d7e)}var $7e=Object.defineProperty,wG=Object.getOwnPropertySymbols,F7e=Object.prototype.hasOwnProperty,j7e=Object.prototype.propertyIsEnumerable,f5=(t,e,n)=>e in t?$7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bG=(t,e)=>{for(var n in e||(e={}))F7e.call(e,n)&&f5(t,n,e[n]);if(wG)for(var n of wG(e))j7e.call(e,n)&&f5(t,n,e[n]);return t},Ra=(t,e,n)=>f5(t,typeof e!="symbol"?e+"":e,n);class pw extends z5e{constructor(e,n,r,s=nh,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ra(this,"map",new Map),Ra(this,"version",zFe),Ra(this,"cached",[]),Ra(this,"initialized",!1),Ra(this,"getKey"),Ra(this,"storagePrefix",nh),Ra(this,"recentlyDeleted",[]),Ra(this,"recentlyDeletedLimit",200),Ra(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!co(o)?this.map.set(this.getKey(o),o):nFe(o)?this.map.set(o.id,o):rFe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ra(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ra(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ra(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>U7e(a[c],o[c]))):this.values)),Ra(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=bG(bG({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ra(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=vo(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var W7e=Object.defineProperty,z7e=(t,e,n)=>e in t?W7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wn=(t,e,n)=>z7e(t,typeof e!="symbol"?e+"":e,n);class H7e{constructor(e,n){this.core=e,this.logger=n,Wn(this,"name",VFe),Wn(this,"version",KFe),Wn(this,"events",new c4),Wn(this,"pairings"),Wn(this,"initialized",!1),Wn(this,"storagePrefix",nh),Wn(this,"ignoredPayloadTypes",[pf]),Wn(this,"registeredMethods",[]),Wn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Wn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Wn(this,"create",async r=>{this.isInitialized();const s=s5(),i=await this.core.crypto.setSymKey(s),o=mi(We.FIVE_MINUTES),a={protocol:yie},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=HH({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ny.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Wn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ld.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=zH(r.uri);s.props.properties.topic=i,s.addTrace(ld.pairing_uri_validation_success),s.addTrace(ld.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ld.existing_pairing),u.active)throw s.setError(Th.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ld.pairing_not_expired)}const d=c||mi(We.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ld.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ny.create,h),s.addTrace(ld.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ld.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Th.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Th.subscribe_pairing_topic_failure),f}return s.addTrace(ld.subscribe_pairing_topic_success),h}),Wn(this,"activate",async({topic:r})=>{this.isInitialized();const s=mi(We.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Wn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=qm();this.events.once(Cr("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Wn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Wn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Wn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Wn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Ur("USER_DISCONNECTED")),await this.deletePairing(s))}),Wn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return HH({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Wn(this,"sendRequest",async(r,s,i)=>{const o=hg(s,i),a=await this.core.crypto.encode(r,o),c=S1[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Wn(this,"sendResult",async(r,s,i)=>{const o=EP(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=S1[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Wn(this,"sendError",async(r,s,i)=>{const o=CP(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=S1[c]?S1[c].res:S1.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Wn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Ur("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Wn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Ip(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Wn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Wn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Wn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ny.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Wn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{fd(s)?this.events.emit(Cr("pairing_ping",i),{}):Sl(s)&&this.events.emit(Cr("pairing_ping",i),{error:s.error})},500)}),Wn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ny.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Wn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Ur("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Wn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Ur("WC_METHOD_UNSUPPORTED",r))}),Wn(this,"isValidPair",(r,s)=>{var i;if(!Ua(r)){const{message:a}=Ge("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Th.malformed_pairing_uri),new Error(a)}if(!tFe(r.uri)){const{message:a}=Ge("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Th.malformed_pairing_uri),new Error(a)}const o=zH(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Th.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ge("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Th.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&We.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Th.pairing_expired);const{message:a}=Ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Wn(this,"isValidPing",async r=>{if(!Ua(r)){const{message:i}=Ge("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Wn(this,"isValidDisconnect",async r=>{if(!Ua(r)){const{message:i}=Ge("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Wn(this,"isValidPairingTopic",async r=>{if(!li(r,!1)){const{message:s}=Ge("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Ip(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ge("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=vo(n,this.name),this.pairings=new pw(this.core,this.logger,this.name,this.storagePrefix)}get context(){return gc(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ui.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==fs.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);v4(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):_P(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ml.expired,async e=>{const{topic:n}=Ose(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ny.expire,{topic:n}))})}}var G7e=Object.defineProperty,q7e=(t,e,n)=>e in t?G7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yi=(t,e,n)=>q7e(t,typeof e!="symbol"?e+"":e,n);class V7e extends $5e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Yi(this,"records",new Map),Yi(this,"events",new Vl.EventEmitter),Yi(this,"name",YFe),Yi(this,"version",QFe),Yi(this,"cached",[]),Yi(this,"initialized",!1),Yi(this,"storagePrefix",nh),Yi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Yi(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:mi(We.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ru.created,o)}),Yi(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Sl(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ru.updated,s))}),Yi(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Yi(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ru.deleted,i)}}),this.persist()}),Yi(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Yi(this,"on",(r,s)=>{this.events.on(r,s)}),Yi(this,"once",(r,s)=>{this.events.once(r,s)}),Yi(this,"off",(r,s)=>{this.events.off(r,s)}),Yi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=vo(n,this.name)}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:hg(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ru.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ru.created,e=>{const n=ru.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ru.updated,e=>{const n=ru.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ru.deleted,e=>{const n=ru.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(uw.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{We.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ru.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var K7e=Object.defineProperty,Y7e=(t,e,n)=>e in t?K7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xo=(t,e,n)=>Y7e(t,typeof e!="symbol"?e+"":e,n);class Q7e extends G5e{constructor(e,n){super(e,n),this.core=e,this.logger=n,xo(this,"expirations",new Map),xo(this,"events",new Vl.EventEmitter),xo(this,"name",JFe),xo(this,"version",ZFe),xo(this,"cached",[]),xo(this,"initialized",!1),xo(this,"storagePrefix",nh),xo(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xo(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),xo(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ml.created,{target:i,expiration:o})}),xo(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),xo(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ml.deleted,{target:s,expiration:i})}}),xo(this,"on",(r,s)=>{this.events.on(r,s)}),xo(this,"once",(r,s)=>{this.events.once(r,s)}),xo(this,"off",(r,s)=>{this.events.off(r,s)}),xo(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=vo(n,this.name)}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return s8e(e);if(typeof e=="number")return i8e(e);const{message:n}=Ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ml.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;We.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ml.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(uw.pulse,()=>this.checkExpirations()),this.events.on(ml.created,e=>{const n=ml.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ml.expired,e=>{const n=ml.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ml.deleted,e=>{const n=ml.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var J7e=Object.defineProperty,Z7e=(t,e,n)=>e in t?J7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ci=(t,e,n)=>Z7e(t,typeof e!="symbol"?e+"":e,n);class X7e extends q5e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ci(this,"name",XFe),ci(this,"abortController"),ci(this,"isDevEnv"),ci(this,"verifyUrlV3",tje),ci(this,"storagePrefix",nh),ci(this,"version",mie),ci(this,"publicKey"),ci(this,"fetchPromise"),ci(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&We.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ci(this,"register",async s=>{if(!UC()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=B0(),u=this.startAbortTimer(We.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(MU(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ci(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(MU(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ci(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(We.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ci(this,"getVerifyUrl",s=>{let i=s||j_;return nje.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${j_}`),i=j_),i}),ci(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(We.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ci(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ci(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ci(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ci(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ci(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ci(this,"validateAttestation",(s,i)=>{const o=D4e(s,i.publicKey),a={hasExpired:We.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=vo(n,this.name),this.abortController=new AbortController,this.isDevEnv=C4(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return gc(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),We.toMiliseconds(e))}}var eWe=Object.defineProperty,tWe=(t,e,n)=>e in t?eWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vG=(t,e,n)=>tWe(t,typeof e!="symbol"?e+"":e,n);class nWe extends V5e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,vG(this,"context",rje),vG(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${sje}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=vo(n,this.context)}}var rWe=Object.defineProperty,EG=Object.getOwnPropertySymbols,sWe=Object.prototype.hasOwnProperty,iWe=Object.prototype.propertyIsEnumerable,p5=(t,e,n)=>e in t?rWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x1=(t,e)=>{for(var n in e||(e={}))sWe.call(e,n)&&p5(t,n,e[n]);if(EG)for(var n of EG(e))iWe.call(e,n)&&p5(t,n,e[n]);return t},xi=(t,e,n)=>p5(t,typeof e!="symbol"?e+"":e,n);class oWe extends K5e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,xi(this,"context",oje),xi(this,"storagePrefix",nh),xi(this,"storageVersion",ije),xi(this,"events",new Map),xi(this,"shouldPersist",!1),xi(this,"init",async()=>{if(!C4())try{const s={eventId:fH(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:kse(this.core.relayer.protocol,this.core.relayer.version,o5)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),xi(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=fH(),u=this.core.projectId||"",d=Date.now(),h=x1({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),xi(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return x1(x1({},a),this.setMethods(a.eventId))}),xi(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),xi(this,"setEventListeners",()=>{this.core.heartbeat.on(uw.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{We.fromMiliseconds(Date.now())-We.fromMiliseconds(s.timestamp)>aje&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),xi(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),xi(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),xi(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),xi(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),xi(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,x1(x1({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),xi(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),xi(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${cje}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${o5}${i}`,{method:"POST",body:JSON.stringify(s)})}),xi(this,"getAppDomain",()=>Rse().url),this.logger=vo(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var aWe=Object.defineProperty,CG=Object.getOwnPropertySymbols,cWe=Object.prototype.hasOwnProperty,lWe=Object.prototype.propertyIsEnumerable,g5=(t,e,n)=>e in t?aWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_G=(t,e)=>{for(var n in e||(e={}))cWe.call(e,n)&&g5(t,n,e[n]);if(CG)for(var n of CG(e))lWe.call(e,n)&&g5(t,n,e[n]);return t},Zr=(t,e,n)=>g5(t,typeof e!="symbol"?e+"":e,n);let uWe=class Rie extends M5e{constructor(e){var n;super(e),Zr(this,"protocol",gie),Zr(this,"version",mie),Zr(this,"name",i5),Zr(this,"relayUrl"),Zr(this,"projectId"),Zr(this,"customStoragePrefix"),Zr(this,"events",new Vl.EventEmitter),Zr(this,"logger"),Zr(this,"heartbeat"),Zr(this,"relayer"),Zr(this,"crypto"),Zr(this,"storage"),Zr(this,"history"),Zr(this,"expirer"),Zr(this,"pairing"),Zr(this,"verify"),Zr(this,"echoClient"),Zr(this,"linkModeSupportedApps"),Zr(this,"eventClient"),Zr(this,"initialized",!1),Zr(this,"logChunkController"),Zr(this,"on",(a,c)=>this.events.on(a,c)),Zr(this,"once",(a,c)=>this.events.once(a,c)),Zr(this,"off",(a,c)=>this.events.off(a,c)),Zr(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Zr(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:fs.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||wie,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=hw({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:RFe.logger,name:i5}),{logger:i,chunkLoggerController:o}=mP({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=vo(i,this.name),this.heartbeat=new O2e,this.crypto=new L9e(this,this.logger,e==null?void 0:e.keychain),this.history=new V7e(this,this.logger),this.expirer=new Q7e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new P5e(_G(_G({},kFe),e==null?void 0:e.storageOptions)),this.relayer=new u7e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new H7e(this,this.logger),this.verify=new X7e(this,this.logger,this.storage),this.echoClient=new nWe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new oWe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Rie(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(HFe,r),n}get context(){return gc(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nG,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nG)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&TFe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const dWe=uWe,kie="wc",Pie=2,Oie="client",R4=`${kie}@${Pie}:${Oie}:`,F3={name:Oie,logger:"error"},AG="WALLETCONNECT_DEEPLINK_CHOICE",hWe="proposal",SG="Proposal expired",fWe="session",Yw=We.SEVEN_DAYS,pWe="engine",Ti={wc_sessionPropose:{req:{ttl:We.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:We.ONE_DAY,prompt:!1,tag:1104},res:{ttl:We.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:We.ONE_DAY,prompt:!1,tag:1106},res:{ttl:We.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:We.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:We.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:We.ONE_DAY,prompt:!1,tag:1112},res:{ttl:We.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:We.ONE_DAY,prompt:!1,tag:1114},res:{ttl:We.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:We.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:We.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:We.FIVE_MINUTES,prompt:!1,tag:1119}}},j3={min:We.FIVE_MINUTES,max:We.SEVEN_DAYS},sd={idle:"IDLE",active:"ACTIVE"},IG={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},gWe="request",mWe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],yWe="wc",wWe="auth",bWe="authKeys",vWe="pairingTopics",EWe="requests",MP=`${yWe}@${1.5}:${wWe}:`,bT=`${MP}:PUB_KEY`;var CWe=Object.defineProperty,_We=Object.defineProperties,AWe=Object.getOwnPropertyDescriptors,NG=Object.getOwnPropertySymbols,SWe=Object.prototype.hasOwnProperty,IWe=Object.prototype.propertyIsEnumerable,m5=(t,e,n)=>e in t?CWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vr=(t,e)=>{for(var n in e||(e={}))SWe.call(e,n)&&m5(t,n,e[n]);if(NG)for(var n of NG(e))IWe.call(e,n)&&m5(t,n,e[n]);return t},Ko=(t,e)=>_We(t,AWe(e)),Pe=(t,e,n)=>m5(t,typeof e!="symbol"?e+"":e,n);class NWe extends Z5e{constructor(e){super(e),Pe(this,"name",pWe),Pe(this,"events",new c4),Pe(this,"initialized",!1),Pe(this,"requestQueue",{state:sd.idle,queue:[]}),Pe(this,"sessionRequestQueue",{state:sd.idle,queue:[]}),Pe(this,"requestQueueDelay",We.ONE_SECOND),Pe(this,"expectedPairingMethodMap",new Map),Pe(this,"recentlyDeletedMap",new Map),Pe(this,"recentlyDeletedLimit",200),Pe(this,"relayMessageCache",[]),Pe(this,"pendingSessions",new Map),Pe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ti)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},We.toMiliseconds(this.requestQueueDelay)))}),Pe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ko(Vr({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Q4e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const P=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),P}if(!u||!h){const{topic:P,uri:O}=await this.client.core.pairing.create();u=P,d=O}if(!u){const{message:P}=Ge("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(P)}const f=await this.client.core.crypto.generateKeyPair(),p=Ti.wc_sessionPropose.req.ttl||We.FIVE_MINUTES,g=mi(p),m=Ko(Vr(Vr({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:yie}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:hd()}),y=Cr("session_connect",m.id),{reject:w,resolve:C,done:N}=qm(p,SG),S=({id:P})=>{P===m.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:SG,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(y,({error:P,session:O})=>{this.client.events.off("proposal_expire",S),P?w(P):O&&C(O)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:N}}),Pe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Pe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[su.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(Om.no_internet_connection),M}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Om.proposal_not_found),M}try{await this.isValidApprove(n)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Om.session_approve_namespace_validation_failure),M}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:y}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:su.session_approve_started,properties:{topic:p,trace:[su.session_approve_started,su.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),N=g.publicKey,S=await this.client.core.crypto.generateSharedKey(C,N),P=Vr(Vr(Vr({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:C,metadata:this.client.metadata},expiry:mi(Yw)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),O=fs.relay;w.addTrace(su.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:O})}catch(M){throw w.setError(Om.subscribe_session_topic_failure),M}w.addTrace(su.subscribe_session_topic_success);const L=Ko(Vr({},P),{topic:S,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:P.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:C,transportType:fs.relay});await this.client.session.set(S,L),w.addTrace(su.store_session);try{w.addTrace(su.publishing_session_settle),await this.sendRequest({topic:S,method:"wc_sessionSettle",params:P,throwOnFailedPublish:!0}).catch(M=>{throw w==null||w.setError(Om.session_settle_publish_failure),M}),w.addTrace(su.session_settle_publish_success),w.addTrace(su.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:C},throwOnFailedPublish:!0}).catch(M=>{throw w==null||w.setError(Om.session_approve_publish_failure),M}),w.addTrace(su.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(S,Ur("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),M}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Ur("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(S,mi(Yw)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),Pe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Ti.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Ur("USER_DISCONNECTED")))}),Pe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=qm(),c=hd(),l=Ey().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Cr("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),Pe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=hd(),{done:i,resolve:o,reject:a}=qm();return this.events.once(Cr("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,mi(Yw)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Pe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Ti.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===fs.relay&&await this.confirmOnlineStateOrThrow();const c=hd(),l=Ey().toString(),{done:u,resolve:d,reject:h}=qm(o,"Request expired. Please try again.");this.events.once(Cr("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Ko(Vr({},s),{expiryTimestamp:mi(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Ko(Vr({},s),{expiryTimestamp:mi(o)}),chainId:r},m=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(Vr({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const C=await l8e(this.client.core.storage,AG);await o8e({id:c,topic:i,wcDeepLink:C})}y()}),u()]).then(y=>y[2])}),Pe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===fs.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);fd(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Sl(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),Pe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=hd(),i=Ey().toString(),{done:o,resolve:a,reject:c}=qm();this.events.once(Cr("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Pe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Ey().toString(),a=hd();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Pe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Ur("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Pe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>X4e(r,n)))),Pe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Pe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?fs.link_mode:fs.relay;o===fs.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,y=[...n.resources||[]],{topic:w,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:C}});const N=await this.client.core.crypto.generateKeyPair(),S=yT(N);if(await Promise.all([this.client.auth.authKeys.set(bT,{responseTopic:S,publicKey:N}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:w})]),await this.client.core.relayer.subscribe(S,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:B}=dv(a[0]);let j=t$e(B,"request",g);mT(y)&&(j=r$e(j,y.pop())),y.push(j)}const P=m&&m>Ti.wc_sessionAuthenticate.req.ttl?m:Ti.wc_sessionAuthenticate.req.ttl,O={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:mi(P)},L={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:L,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:mi(Ti.wc_sessionPropose.req.ttl),id:hd()},{done:W,resolve:F,reject:V}=qm(P,"Request expired"),$=hd(),v=Cr("session_connect",M.id),E=Cr("session_request",$),_=async({error:B,session:j})=>{this.events.off(E,R),B?V(B):j&&F({session:j})},R=async B=>{var j,U,I;if(await this.deletePendingAuthRequest($,{message:"fulfilled",code:0}),B.error){const me=Ur("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return B.error.code===me.code?void 0:(this.events.off(v,_),V(B.error.message))}await this.deleteProposal(M.id),this.events.off(v,_);const{cacaos:H,responder:re}=B.result,ne=[],ge=[];for(const me of H){await EH({cacao:me,projectId:this.client.core.projectId})||(this.client.logger.error(me,"Signature verification failed"),V(Ur("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:_e}=me,Ce=mT(_e.resources),Be=[YU(_e.iss)],Te=lk(_e.iss);if(Ce){const xe=CH(Ce),je=_H(Ce);ne.push(...xe),Be.push(...je)}for(const xe of Be)ge.push(`${xe}:${Te}`)}const te=await this.client.core.crypto.generateSharedKey(N,re.publicKey);let he;ne.length>0&&(he={topic:te,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:mi(Yw),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:KH([...new Set(ne)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(te,{transportType:o}),await this.client.session.set(te,he),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:re.metadata}),he=this.client.session.get(te)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(U=re.metadata.redirect)!=null&&U.linkMode&&(I=re.metadata.redirect)!=null&&I.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(te,{transportType:fs.link_mode})),F({auths:H,session:he})};this.events.once(v,_),this.events.once(E,R);let x;try{if(i){const B=hg("wc_sessionAuthenticate",O,$);this.client.core.history.set(w,B);const j=await this.client.core.crypto.encode("",B,{type:QI,encoding:Pp});x=px(r,w,j)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:O,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:$}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:M,expiry:Ti.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(B){throw this.events.off(v,_),this.events.off(E,R),B}return await this.setProposal(M.id,M),await this.setAuthRequest($,{request:Ko(Vr({},O),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:x??C,response:W}}),Pe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Dm.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(I1.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(I1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||fs.relay;a===fs.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=yT(c),d={type:pf,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of s){if(!await EH({cacao:m,projectId:this.client.core.projectId})){i.setError(I1.invalid_cacao);const S=Ur("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:S,encodeOpts:d}),new Error(S.message)}i.addTrace(Dm.cacaos_verified);const{p:y}=m,w=mT(y.resources),C=[YU(y.iss)],N=lk(y.iss);if(w){const S=CH(w),P=_H(w);h.push(...S),C.push(...P)}for(const S of C)f.push(`${S}:${N}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Dm.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:mi(Yw),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:KH([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Dm.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(I1.subscribe_authenticated_session_topic_failure),m}i.addTrace(Dm.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Dm.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Dm.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(I1.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),Pe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===fs.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=yT(o),l={type:pf,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ti.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Ur("USER_DISCONNECTED"))}),Pe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Wse(r,s)}),Pe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Pe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Pe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Ur("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(AG).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Ur("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=sd.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Pe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Om.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Ur("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Pe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=sd.idle,this.client.events.emit("session_request_expire",{id:n}))}),Pe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),Pe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Pe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,mi(Ti.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Pe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=fs.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Pe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||mi(Ti.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Pe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=hg(s,i,c);let f;const p=!!u;try{const y=p?Pp:Du;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(mWe.includes(s)){const y=Td(JSON.stringify(h)),w=Td(f);g=await this.client.core.verify.register({id:w,decryptedId:y})}const m=Ti[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),p){const y=px(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Ti[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Ko(Vr({},d),{correlationId:h.id}),l?(y.internal=Ko(Vr({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(w=>this.client.logger.error(w))}return h.id}),Pe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=EP(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Pp:Du;u=await this.client.core.crypto.encode(s,l,Ko(Vr({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=px(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Ti[p].res;g.tvf=Ko(Vr({},f),{correlationId:r}),o?(g.internal=Ko(Vr({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),Pe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=CP(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Pp:Du;u=await this.client.core.crypto.encode(s,l,Ko(Vr({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=px(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Ti[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),Pe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Ip(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ip(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Pe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Pe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Pe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===sd.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=sd.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=sd.idle}),Pe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Pe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Pe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ge("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Pe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Pe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Th.proposal_listener_not_found)),this.isValidConnect(Vr({},s.params));const u=a.expiryTimestamp||mi(Ti.wc_sessionPropose.req.ttl),d=Vr({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Td(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ld.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ti.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Pe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(fd(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Sl(r)){await this.client.proposal.delete(i,Ur("USER_DISCONNECTED"));const o=Cr("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Pe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Ko(Vr(Vr(Vr({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:fs.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Cr("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Pe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;fd(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Cr("session_approve",s),{})):Sl(r)&&(await this.client.session.delete(n,Ur("USER_DISCONNECTED")),this.events.emit(Cr("session_approve",s),{error:r.error}))}),Pe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=A1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Ur("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Vr({topic:n},s));try{A1.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw A1.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Pe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Pe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Cr("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fd(r)?this.events.emit(Cr("session_update",s),{}):Sl(r)&&this.events.emit(Cr("session_update",s),{error:r.error})}),Pe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,mi(Yw)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Pe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Cr("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fd(r)?this.events.emit(Cr("session_extend",s),{}):Sl(r)&&this.events.emit(Cr("session_extend",s),{error:r.error})}),Pe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Pe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Cr("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);fd(r)?this.events.emit(Cr("session_ping",s),{}):Sl(r)&&this.events.emit(Cr("session_ping",s),{error:r.error})},500)}),Pe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Ui.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Ur("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Pe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Vr({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Td(JSON.stringify(hg("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===fs.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),Pe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Cr("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fd(r)?this.events.emit(Cr("session_request",s),{result:r.result}):Sl(r)&&this.events.emit(Cr("session_request",s),{error:r.error})}),Pe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=A1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Vr({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),A1.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Pe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),fd(r)?this.events.emit(Cr("session_request",s),{result:r.result}):Sl(r)&&this.events.emit(Cr("session_request",s),{error:r.error})}),Pe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Td(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===fs.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:pf,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ti.wc_sessionAuthenticate.autoReject,appLink:h})}}),Pe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Pe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=sd.idle,this.processSessionRequestQueue()},We.toMiliseconds(this.requestQueueDelay))}),Pe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Cr("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Cr("session_request",i.request.id),{error:r})})}),Pe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===sd.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=sd.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Pe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Pe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:hg("wc_sessionPropose",Ko(Vr({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Pe(this,"isValidConnect",async n=>{if(!Ua(n)){const{message:l}=Ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(co(r)||await this.isValidPairingTopic(r),!dFe(c)){const{message:l}=Ge("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!co(s)&&Fg(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!co(i)&&Fg(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),co(o)||this.validateSessionProps(o,"sessionProperties"),!co(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Pe(this,"validateNamespaces",(n,r)=>{const s=uFe(n,"connect()",r);if(s)throw new Error(s.message)}),Pe(this,"isValidApprove",async n=>{if(!Ua(n))throw new Error(Ge("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=D3(s,"approve()");if(l)throw new Error(l.message);const u=JH(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!li(i,!0)){const{message:d}=Ge("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(co(o)||this.validateSessionProps(o,"sessionProperties"),!co(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Pe(this,"isValidReject",async n=>{if(!Ua(n)){const{message:i}=Ge("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!fFe(s)){const{message:i}=Ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Pe(this,"isValidSessionSettleRequest",n=>{if(!Ua(n)){const{message:l}=Ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!pie(r)){const{message:l}=Ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=sFe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=D3(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ip(o)){const{message:l}=Ge("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Pe(this,"isValidUpdate",async n=>{if(!Ua(n)){const{message:c}=Ge("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=D3(s,"update()");if(o)throw new Error(o.message);const a=JH(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Pe(this,"isValidExtend",async n=>{if(!Ua(n)){const{message:s}=Ge("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Pe(this,"isValidRequest",async n=>{if(!Ua(n)){const{message:c}=Ge("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!QH(a,i)){const{message:c}=Ge("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!pFe(s)){const{message:c}=Ge("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!yFe(a,i,s.method)){const{message:c}=Ge("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!EFe(o,j3)){const{message:c}=Ge("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${j3.min} and ${j3.max}`);throw new Error(c)}}),Pe(this,"isValidRespond",async n=>{var r;if(!Ua(n)){const{message:o}=Ge("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!gFe(i)){const{message:o}=Ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Pe(this,"isValidPing",async n=>{if(!Ua(n)){const{message:s}=Ge("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Pe(this,"isValidEmit",async n=>{if(!Ua(n)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!QH(o,i)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!mFe(s)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!wFe(o,i,s.name)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Pe(this,"isValidDisconnect",async n=>{if(!Ua(n)){const{message:s}=Ge("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Pe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!li(s,!1))throw new Error("uri is required parameter");if(!li(i,!1))throw new Error("domain is required parameter");if(!li(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>dv(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=dv(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Pe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||j_,validation:"UNKNOWN",origin:o.url||""}};try{if(a===fs.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Pe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ge("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),Pe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Pe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Pe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ge("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),Pe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==fs.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Pe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),Pe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=hH(n,"topic")||"",s=decodeURIComponent(hH(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:fs.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Pe(this,"registerLinkModeListeners",async()=>{var n;if(C4()||bm()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Pe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(IG).includes(s.method)}),Pe(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return Ko(Vr({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Pe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Pe(this,"extractTxHashesFromResult",(n,r)=>{try{const s=IG[n];if(typeof r=="string")return[r];const i=r[s.key];if($g(i))return n==="solana_signAllTransactions"?i.map(o=>j8e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ui.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(bT)?this.client.auth.authKeys.get(bT):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===fs.link_mode?Pp:Du});v4(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Td(r)})):_P(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ml.expired,async e=>{const{topic:n,id:r}=Ose(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ge("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ge("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ny.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ny.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!li(e,!1)){const{message:n}=Ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Ip(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ge("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!li(e,!1)){const{message:n}=Ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Ip(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ge("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(li(e,!1)){const{message:n}=Ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!hFe(e)){const{message:n}=Ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Ip(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ge("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class xWe extends pw{constructor(e,n){super(e,n,hWe,R4),this.core=e,this.logger=n}}let TWe=class extends pw{constructor(e,n){super(e,n,fWe,R4),this.core=e,this.logger=n}};class RWe extends pw{constructor(e,n){super(e,n,gWe,R4,r=>r.id),this.core=e,this.logger=n}}class kWe extends pw{constructor(e,n){super(e,n,bWe,MP,()=>bT),this.core=e,this.logger=n}}class PWe extends pw{constructor(e,n){super(e,n,vWe,MP),this.core=e,this.logger=n}}class OWe extends pw{constructor(e,n){super(e,n,EWe,MP,r=>r.id),this.core=e,this.logger=n}}var DWe=Object.defineProperty,MWe=(t,e,n)=>e in t?DWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W3=(t,e,n)=>MWe(t,typeof e!="symbol"?e+"":e,n);class BWe{constructor(e,n){this.core=e,this.logger=n,W3(this,"authKeys"),W3(this,"pairingTopics"),W3(this,"requests"),this.authKeys=new kWe(this.core,this.logger),this.pairingTopics=new PWe(this.core,this.logger),this.requests=new OWe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var LWe=Object.defineProperty,UWe=(t,e,n)=>e in t?LWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zn=(t,e,n)=>UWe(t,typeof e!="symbol"?e+"":e,n);let $We=class Die extends J5e{constructor(e){super(e),zn(this,"protocol",kie),zn(this,"version",Pie),zn(this,"name",F3.name),zn(this,"metadata"),zn(this,"core"),zn(this,"logger"),zn(this,"events",new Vl.EventEmitter),zn(this,"engine"),zn(this,"session"),zn(this,"proposal"),zn(this,"pendingRequest"),zn(this,"auth"),zn(this,"signConfig"),zn(this,"on",(r,s)=>this.events.on(r,s)),zn(this,"once",(r,s)=>this.events.once(r,s)),zn(this,"off",(r,s)=>this.events.off(r,s)),zn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),zn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),zn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),zn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),zn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),zn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||F3.name,this.metadata=e8e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:FI(hw({level:(e==null?void 0:e.logger)||F3.logger}));this.core=(e==null?void 0:e.core)||new dWe(e),this.logger=vo(n,this.name),this.session=new TWe(this.core,this.logger),this.proposal=new xWe(this.core,this.logger),this.pendingRequest=new RWe(this.core,this.logger),this.engine=new NWe(this),this.auth=new BWe(this.core,this.logger)}static async init(e){const n=new Die(e);return await n.initialize(),n}get context(){return gc(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},We.toMiliseconds(We.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const xG="error",FWe="wss://relay.walletconnect.org",jWe="wc",WWe="universal_provider",mx=`${jWe}@2:${WWe}:`,Mie="https://rpc.walletconnect.org/v1/",bb="generic",zWe=`${Mie}bundler`,Yl={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function HWe(){}function k4(t){return t==null||typeof t!="object"&&typeof t!="function"}function P4(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function GWe(t){if(k4(t))return t;if(Array.isArray(t)||P4(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function TG(t){return typeof t=="object"&&t!==null}function Bie(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Lie(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const qWe="[object RegExp]",Uie="[object String]",$ie="[object Number]",Fie="[object Boolean]",jie="[object Arguments]",VWe="[object Symbol]",KWe="[object Date]",YWe="[object Map]",QWe="[object Set]",JWe="[object Array]",ZWe="[object ArrayBuffer]",XWe="[object Object]",eze="[object DataView]",tze="[object Uint8Array]",nze="[object Uint8ClampedArray]",rze="[object Uint16Array]",sze="[object Uint32Array]",ize="[object Int8Array]",oze="[object Int16Array]",aze="[object Int32Array]",cze="[object Float32Array]",lze="[object Float64Array]";function uze(t,e){return Hb(t,void 0,t,new Map,e)}function Hb(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(k4(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hb(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Hb(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Hb(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(P4(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hb(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ry(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ry(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ry(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ry(o,t,n,r,s),o}if(typeof t=="object"&&dze(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ry(o,t,n,r,s),o}return t}function ry(t,e,n=t,r,s){const i=[...Object.keys(e),...Bie(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Hb(e[a],a,n,r,s))}}function dze(t){switch(Lie(t)){case jie:case JWe:case ZWe:case eze:case Fie:case KWe:case cze:case lze:case ize:case oze:case aze:case YWe:case $ie:case XWe:case qWe:case QWe:case Uie:case VWe:case tze:case nze:case rze:case sze:return!0;default:return!1}}function hze(t,e){return uze(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case $ie:case Uie:case Fie:{const o=new t.constructor(t==null?void 0:t.valueOf());return ry(o,t),o}case jie:{const o={};return ry(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function RG(t){return hze(t)}function kG(t){return t!==null&&typeof t=="object"&&Lie(t)==="[object Arguments]"}function fze(t){return P4(t)}function pze(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function gze(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=y5(s,o,r,new Map)}return s}function y5(t,e,n,r){if(k4(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return GWe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Bie(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(kG(a)&&(a={...a}),kG(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=RG(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||TG(c)&&TG(a)?t[o]=y5(c,a,n,r):c==null&&pze(a)?t[o]=y5({},a,n,r):c==null&&fze(a)?t[o]=RG(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function mze(t,...e){return gze(t,...e,HWe)}var yze=Object.defineProperty,wze=Object.defineProperties,bze=Object.getOwnPropertyDescriptors,PG=Object.getOwnPropertySymbols,vze=Object.prototype.hasOwnProperty,Eze=Object.prototype.propertyIsEnumerable,OG=(t,e,n)=>e in t?yze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yx=(t,e)=>{for(var n in e||(e={}))vze.call(e,n)&&OG(t,n,e[n]);if(PG)for(var n of PG(e))Eze.call(e,n)&&OG(t,n,e[n]);return t},Cze=(t,e)=>wze(t,bze(e));function Jc(t,e,n){var r;const s=dv(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${Mie}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function gw(t){return t.includes(":")?t.split(":")[1]:t}function Wie(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function _ze(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function wx(t={},e={}){const n=DG(t),r=DG(e);return mze(n,r)}function DG(t){var e,n,r,s,i;const o={};if(!Fg(t))return o;for(const[a,c]of Object.entries(t)){const l=OP(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=zb(a);o[f]=Cze(yx(yx({},o[f]),c),{chains:Vd(l,(e=o[f])==null?void 0:e.chains),methods:Vd(u,(n=o[f])==null?void 0:n.methods),events:Vd(d,(r=o[f])==null?void 0:r.events)}),(Fg(h)||Fg(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=yx(yx({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function MG(t){return t.includes(":")?t.split(":")[2]:t}function BG(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=OP(n)?[n]:r.chains?r.chains:Wie(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function z3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const zie={},dr=t=>zie[t],H3=(t,e)=>{zie[t]=e};var Aze=Object.defineProperty,Sze=(t,e,n)=>e in t?Aze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qw=(t,e,n)=>Sze(t,typeof e!="symbol"?e+"":e,n);class Ize{constructor(e){Qw(this,"name","polkadot"),Qw(this,"client"),Qw(this,"httpProviders"),Qw(this,"events"),Qw(this,"namespace"),Qw(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var Nze=Object.defineProperty,xze=Object.defineProperties,Tze=Object.getOwnPropertyDescriptors,LG=Object.getOwnPropertySymbols,Rze=Object.prototype.hasOwnProperty,kze=Object.prototype.propertyIsEnumerable,w5=(t,e,n)=>e in t?Nze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,UG=(t,e)=>{for(var n in e||(e={}))Rze.call(e,n)&&w5(t,n,e[n]);if(LG)for(var n of LG(e))kze.call(e,n)&&w5(t,n,e[n]);return t},$G=(t,e)=>xze(t,Tze(e)),Jw=(t,e,n)=>w5(t,typeof e!="symbol"?e+"":e,n);class Pze{constructor(e){Jw(this,"name","eip155"),Jw(this,"client"),Jw(this,"chainId"),Jw(this,"namespace"),Jw(this,"httpProviders"),Jw(this,"events"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Jc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(gw(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:$G(UG({},u.sessionProperties||{}),{capabilities:$G(UG({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(hg("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${zWe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Oze=Object.defineProperty,Dze=(t,e,n)=>e in t?Oze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zw=(t,e,n)=>Dze(t,typeof e!="symbol"?e+"":e,n);class Mze{constructor(e){Zw(this,"name","solana"),Zw(this,"client"),Zw(this,"httpProviders"),Zw(this,"events"),Zw(this,"namespace"),Zw(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var Bze=Object.defineProperty,Lze=(t,e,n)=>e in t?Bze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xw=(t,e,n)=>Lze(t,typeof e!="symbol"?e+"":e,n);class Uze{constructor(e){Xw(this,"name","cosmos"),Xw(this,"client"),Xw(this,"httpProviders"),Xw(this,"events"),Xw(this,"namespace"),Xw(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var $ze=Object.defineProperty,Fze=(t,e,n)=>e in t?$ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eb=(t,e,n)=>Fze(t,typeof e!="symbol"?e+"":e,n);class jze{constructor(e){eb(this,"name","algorand"),eb(this,"client"),eb(this,"httpProviders"),eb(this,"events"),eb(this,"namespace"),eb(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Jc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Kl(new Ku(r,dr("disableProviderPing")))}}var Wze=Object.defineProperty,zze=(t,e,n)=>e in t?Wze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tb=(t,e,n)=>zze(t,typeof e!="symbol"?e+"":e,n);class Hze{constructor(e){tb(this,"name","cip34"),tb(this,"client"),tb(this,"httpProviders"),tb(this,"events"),tb(this,"namespace"),tb(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=gw(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var Gze=Object.defineProperty,qze=(t,e,n)=>e in t?Gze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nb=(t,e,n)=>qze(t,typeof e!="symbol"?e+"":e,n);class Vze{constructor(e){nb(this,"name","elrond"),nb(this,"client"),nb(this,"httpProviders"),nb(this,"events"),nb(this,"namespace"),nb(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var Kze=Object.defineProperty,Yze=(t,e,n)=>e in t?Kze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rb=(t,e,n)=>Yze(t,typeof e!="symbol"?e+"":e,n);class Qze{constructor(e){rb(this,"name","multiversx"),rb(this,"client"),rb(this,"httpProviders"),rb(this,"events"),rb(this,"namespace"),rb(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var Jze=Object.defineProperty,Zze=(t,e,n)=>e in t?Jze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sb=(t,e,n)=>Zze(t,typeof e!="symbol"?e+"":e,n);class Xze{constructor(e){sb(this,"name","near"),sb(this,"client"),sb(this,"httpProviders"),sb(this,"events"),sb(this,"namespace"),sb(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Jc(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace);return typeof r>"u"?void 0:new Kl(new Ku(r,dr("disableProviderPing")))}}var eHe=Object.defineProperty,tHe=(t,e,n)=>e in t?eHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ib=(t,e,n)=>tHe(t,typeof e!="symbol"?e+"":e,n);class nHe{constructor(e){ib(this,"name","tezos"),ib(this,"client"),ib(this,"httpProviders"),ib(this,"events"),ib(this,"namespace"),ib(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Jc(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace);return typeof r>"u"?void 0:new Kl(new Ku(r))}}var rHe=Object.defineProperty,sHe=(t,e,n)=>e in t?rHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ob=(t,e,n)=>sHe(t,typeof e!="symbol"?e+"":e,n);class iHe{constructor(e){ob(this,"name",bb),ob(this,"client"),ob(this,"httpProviders"),ob(this,"events"),ob(this,"namespace"),ob(this,"chainId"),this.namespace=e.namespace,this.events=dr("events"),this.client=dr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=dv(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kl(new Ku(r,dr("disableProviderPing")))}}var oHe=Object.defineProperty,aHe=Object.defineProperties,cHe=Object.getOwnPropertyDescriptors,FG=Object.getOwnPropertySymbols,lHe=Object.prototype.hasOwnProperty,uHe=Object.prototype.propertyIsEnumerable,b5=(t,e,n)=>e in t?oHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bx=(t,e)=>{for(var n in e||(e={}))lHe.call(e,n)&&b5(t,n,e[n]);if(FG)for(var n of FG(e))uHe.call(e,n)&&b5(t,n,e[n]);return t},G3=(t,e)=>aHe(t,cHe(e)),cl=(t,e,n)=>b5(t,typeof e!="symbol"?e+"":e,n);let dHe=class Hie{constructor(e){cl(this,"client"),cl(this,"namespaces"),cl(this,"optionalNamespaces"),cl(this,"sessionProperties"),cl(this,"scopedProperties"),cl(this,"events",new c4),cl(this,"rpcProviders",{}),cl(this,"session"),cl(this,"providerOpts"),cl(this,"logger"),cl(this,"uri"),cl(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:FI(hw({level:(e==null?void 0:e.logger)||xG})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new Hie(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:bx({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,EP(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ur("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=BG(this.session.namespaces);this.namespaces=wx(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=BG(s.namespaces);return this.namespaces=wx(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===bb?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if($g(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await $We.init({core:this.providerOpts.core,logger:this.providerOpts.logger||xG,relayUrl:this.providerOpts.relayUrl||FWe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>zb(n)))];H3("client",this.client),H3("events",this.events),H3("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=_ze(n,this.session),s=Wie(r),i=wx(this.namespaces,this.optionalNamespaces),o=G3(bx({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Pze({namespace:o});break;case"algorand":this.rpcProviders[n]=new jze({namespace:o});break;case"solana":this.rpcProviders[n]=new Mze({namespace:o});break;case"cosmos":this.rpcProviders[n]=new Uze({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Ize({namespace:o});break;case"cip34":this.rpcProviders[n]=new Hze({namespace:o});break;case"elrond":this.rpcProviders[n]=new Vze({namespace:o});break;case"multiversx":this.rpcProviders[n]=new Qze({namespace:o});break;case"near":this.rpcProviders[n]=new Xze({namespace:o});break;case"tezos":this.rpcProviders[n]=new nHe({namespace:o});break;default:this.rpcProviders[bb]?this.rpcProviders[bb].updateNamespace(o):this.rpcProviders[bb]=new iHe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&$g(o)&&this.events.emit("accountsChanged",o.map(MG))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=zb(o),l=z3(o)!==z3(a)?`${c}:${z3(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=G3(bx({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",G3(bx({},Ur("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Yl.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[bb]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=wx(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>zb(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=zb(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(MG);if(!$g(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${mx}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${mx}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${mx}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(mx)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var jG={};const hHe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof jG<"u"?jG.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},v5={filterOutDuplicatesByRDNS(t){const e=Oe.state.enableEIP6963?lt.state.connectors:[],n=bt.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Bt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=lt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=bt.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=lt.state,{featuredWalletIds:n}=Oe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Oe.state.features)==null?void 0:c.connectMethodsOrder),r=e||lt.state.connectors;if(n)return n;const{injected:s,announced:i}=vT.getConnectorsByType(r,Lt.state.recommended,Lt.state.featured),o=s.filter(vT.showConnector),a=i.filter(vT.showConnector);return o.length||a.length?["wallet","email","social"]:hHe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Lt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Lt.state.excludedWallets.some(r=>AP.isLowerCaseMatch(r.name,t.name));return e||n}},vT={getConnectorsByType(t,e,n){const{customWallets:r}=Oe.state,s=bt.getRecentWallets(),i=v5.filterOutDuplicateWallets(e),o=v5.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Lt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Lt.state.excludedWallets.some(i=>AP.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Bt.isMobile()||Bt.isMobile()&&!e&&!Vt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>lt.getConnectorId(n.namespace)===ut.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Oe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=vT.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:Oe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),m=f.filter(({type:y})=>!g.some(({type:C})=>C===y));return Array.from(new Set([...g,...m].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ET=globalThis,O4=ET.ShadowRoot&&(ET.ShadyCSS===void 0||ET.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,D4=Symbol(),WG=new WeakMap;let Gie=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==D4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(O4&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=WG.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&WG.set(n,e))}return e}toString(){return this.cssText}};const fl=t=>new Gie(typeof t=="string"?t:t+"",void 0,D4),Ml=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new Gie(n,t,D4)},fHe=(t,e)=>{if(O4)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=ET.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},zG=O4?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return fl(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:pHe,defineProperty:gHe,getOwnPropertyDescriptor:mHe,getOwnPropertyNames:yHe,getOwnPropertySymbols:wHe,getPrototypeOf:bHe}=Object,jg=globalThis,HG=jg.trustedTypes,vHe=HG?HG.emptyScript:"",q3=jg.reactiveElementPolyfillSupport,z_=(t,e)=>t,E5={toAttribute(t,e){switch(e){case Boolean:t=t?vHe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},qie=(t,e)=>!pHe(t,e),GG={attribute:!0,type:String,converter:E5,reflect:!1,useDefault:!1,hasChanged:qie};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),jg.litPropertyMetadata??(jg.litPropertyMetadata=new WeakMap);let vb=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=GG){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&gHe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=mHe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??GG}static _$Ei(){if(this.hasOwnProperty(z_("elementProperties")))return;const e=bHe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(z_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(z_("properties"))){const n=this.properties,r=[...yHe(n),...wHe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(zG(s))}else e!==void 0&&n.push(zG(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return fHe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:E5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:E5;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??qie)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};vb.elementStyles=[],vb.shadowRootOptions={mode:"open"},vb[z_("elementProperties")]=new Map,vb[z_("finalized")]=new Map,q3==null||q3({ReactiveElement:vb}),(jg.reactiveElementVersions??(jg.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const H_=globalThis,hk=H_.trustedTypes,qG=hk?hk.createPolicy("lit-html",{createHTML:t=>t}):void 0,Vie="$lit$",Op=`lit$${Math.random().toFixed(9).slice(2)}$`,Kie="?"+Op,EHe=`<${Kie}>`,H0=document,vS=()=>H0.createComment(""),ES=t=>t===null||typeof t!="object"&&typeof t!="function",M4=Array.isArray,CHe=t=>M4(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",V3=`[ 	
\f\r]`,T1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,VG=/-->/g,KG=/>/g,Mm=RegExp(`>|${V3}(?:([^\\s"'>=/]+)(${V3}*=${V3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),YG=/'/g,QG=/"/g,Yie=/^(?:script|style|textarea|title)$/i,Qie=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),jot=Qie(1),Wot=Qie(2),ZE=Symbol.for("lit-noChange"),$i=Symbol.for("lit-nothing"),JG=new WeakMap,_y=H0.createTreeWalker(H0,129);function Jie(t,e){if(!M4(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return qG!==void 0?qG.createHTML(e):e}const _He=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=T1;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===T1?u[1]==="!--"?o=VG:u[1]!==void 0?o=KG:u[2]!==void 0?(Yie.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Mm):u[3]!==void 0&&(o=Mm):o===Mm?u[0]===">"?(o=s??T1,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Mm:u[3]==='"'?QG:YG):o===QG||o===YG?o=Mm:o===VG||o===KG?o=T1:(o=Mm,s=void 0);const f=o===Mm&&t[a+1].startsWith("/>")?" ":"";i+=o===T1?c+EHe:d>=0?(r.push(l),c.slice(0,d)+Vie+c.slice(d)+Op+f):c+Op+(d===-2?a:f)}return[Jie(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class CS{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=_He(e,n);if(this.el=CS.createElement(l,r),_y.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=_y.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Vie)){const h=u[o++],f=s.getAttribute(d).split(Op),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?SHe:p[1]==="?"?IHe:p[1]==="@"?NHe:BP}),s.removeAttribute(d)}else d.startsWith(Op)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(Yie.test(s.tagName)){const d=s.textContent.split(Op),h=d.length-1;if(h>0){s.textContent=hk?hk.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],vS()),_y.nextNode(),c.push({type:2,index:++i});s.append(d[h],vS())}}}else if(s.nodeType===8)if(s.data===Kie)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Op,d+1))!==-1;)c.push({type:7,index:i}),d+=Op.length-1}i++}}static createElement(e,n){const r=H0.createElement("template");return r.innerHTML=e,r}}function XE(t,e,n=t,r){var o,a;if(e===ZE)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=ES(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=XE(t,s._$AS(t,e.values),s,r)),e}class AHe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??H0).importNode(n,!0);_y.currentNode=s;let i=_y.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new ZI(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new xHe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=_y.nextNode(),o++)}return _y.currentNode=H0,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class ZI{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=$i,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=XE(this,e,n),ES(e)?e===$i||e==null||e===""?(this._$AH!==$i&&this._$AR(),this._$AH=$i):e!==this._$AH&&e!==ZE&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):CHe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==$i&&ES(this._$AH)?this._$AA.nextSibling.data=e:this.T(H0.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=CS.createElement(Jie(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new AHe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=JG.get(e.strings);return n===void 0&&JG.set(e.strings,n=new CS(e)),n}k(e){M4(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new ZI(this.O(vS()),this.O(vS()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class BP{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=$i,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=$i}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=XE(this,e,n,0),o=!ES(e)||e!==this._$AH&&e!==ZE,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=XE(this,a[r+c],n,c),l===ZE&&(l=this._$AH[c]),o||(o=!ES(l)||l!==this._$AH[c]),l===$i?e=$i:e!==$i&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===$i?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class SHe extends BP{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===$i?void 0:e}}class IHe extends BP{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==$i)}}class NHe extends BP{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=XE(this,e,n,0)??$i)===ZE)return;const r=this._$AH,s=e===$i&&r!==$i||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==$i&&(r===$i||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class xHe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){XE(this,e)}}const K3=H_.litHtmlPolyfillSupport;K3==null||K3(CS,ZI),(H_.litHtmlVersions??(H_.litHtmlVersions=[])).push("3.3.1");const THe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new ZI(e.insertBefore(vS(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c0=globalThis;let CT=class extends vb{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=THe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ZE}};var MK;CT._$litElement$=!0,CT.finalized=!0,(MK=c0.litElementHydrateSupport)==null||MK.call(c0,{LitElement:CT});const Y3=c0.litElementPolyfillSupport;Y3==null||Y3({LitElement:CT});(c0.litElementVersions??(c0.litElementVersions=[])).push("4.2.1");let G_,Wg,zg;function Hot(t,e){G_=document.createElement("style"),Wg=document.createElement("style"),zg=document.createElement("style"),G_.textContent=hv(t).core.cssText,Wg.textContent=hv(t).dark.cssText,zg.textContent=hv(t).light.cssText,document.head.appendChild(G_),document.head.appendChild(Wg),document.head.appendChild(zg),Zie(e)}function Zie(t){Wg&&zg&&(t==="light"?(Wg.removeAttribute("media"),zg.media="enabled"):(zg.removeAttribute("media"),Wg.media="enabled"))}function RHe(t){G_&&Wg&&zg&&(G_.textContent=hv(t).core.cssText,Wg.textContent=hv(t).dark.cssText,zg.textContent=hv(t).light.cssText)}function hv(t){return{core:Ml`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${fl(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${fl((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${fl((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${fl((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${fl((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Ml`
      :root {
        --w3m-color-mix: ${fl((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${fl(af(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${fl(af(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Ml`
      :root {
        --w3m-color-mix: ${fl((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${fl(af(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${fl(af(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Got=Ml`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,qot=Ml`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Vot=Ml`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,e_={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},Xie=Iee({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),eoe=Iee({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function XI(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const C5=XI({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),_5=XI({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),kHe=XI({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});XI({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});XI({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const PHe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},_T={getMethodsByChainNamespace(t){return PHe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case C5.caipNetworkId:u.chains.push(C5.deprecatedCaipNetworkId);break;case _5.caipNetworkId:u.chains.push(_5.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await B_.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let toe=class{constructor({provider:e,namespace:n}){this.id=ut.CONNECTOR_ID.WALLET_CONNECT,this.name=QR.ConnectorNamesMap[ut.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=QR.ConnectorImageIds[ut.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Oe.state.universalProviderConfigOverride,s=_T.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return $_.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:OHe})}};const OHe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let DHe=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ut.CONNECTOR_ID.AUTH,type:"AUTH",name:ut.CONNECTOR_NAMES.AUTH,provider:e,imageId:QR.ConnectorImageIds[ut.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){wt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=wt.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof toe);if(!e)throw new Error("WalletConnectConnector not found");return e}};class MHe extends DHe{setUniversalProvider(e){this.addConnector(new toe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Bt.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&$r.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(wt.state.balanceLoading&&e.chainId===((c=J.state.activeCaipNetwork)==null?void 0:c.id))return{balance:wt.state.balance||"0.00",symbol:wt.state.balanceSymbol||""};const s=(await wt.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ut.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Qa.encode(new TextEncoder().encode(r)),pubkey:s}},(a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=J.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ut.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Fl(n.id)}]}))}catch(u){if(u.code===e_.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===e_.ERROR_INVALID_CHAIN_ID||u.code===e_.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===e_.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Fl(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const BHe=["email","socials","swaps","onramp","activity","reownBranding"],vx={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?$r.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?$r.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?$r.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},LHe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=vx[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=vx[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return vx[t].processApi(e)},processFallbackFeature(t,e){return vx[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Lt.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?$r.DEFAULT_REMOTE_FEATURES:$r.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of BHe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),$r.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Md.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class UHe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=J.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=J.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=J.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return J.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getActiveChainNamespace=()=>J.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{J.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>J.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>J.state.activeChain===n||!n?J.state.activeCaipAddress:J.getAccountProp("caipAddress",n),this.setClientId=n=>{qt.setClientId(n)},this.getProvider=n=>Lr.getProvider(n),this.getProviderType=n=>Lr.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=wt.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{wt.setCaipAddress(n,r),n&&Oe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{wt.setBalance(n,r,s)},this.setProfileName=(n,r)=>{wt.setProfileName(n,r)},this.setProfileImage=(n,r)=>{wt.setProfileImage(n,r)},this.setUser=(n,r)=>{wt.setUser(n,r)},this.resetAccount=n=>{wt.resetAccount(n)},this.setCaipNetwork=n=>{J.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{J.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{wt.setAllAccounts(n,r),Oe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{wt.setStatus(n,r),lt.isConnected()?bt.setConnectionStatus("connected"):bt.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>J.getAccountProp("address",n),this.setConnectors=n=>{const r=[...lt.state.allConnectors,...n];lt.setConnectors(r)},this.setConnections=(n,r)=>{Vt.setConnections(n,r)},this.fetchIdentity=n=>qt.fetchIdentity(n),this.getReownName=n=>B_.getNamesForAddress(n),this.getConnectors=()=>lt.getConnectors(),this.getConnectorImage=n=>ere.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Lr.getProviderId(r),i=n?{...n,type:s}:void 0;wt.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!J.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{wt.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{wt.removeAddressLabel(n,r)},this.getAddress=n=>J.state.activeChain===n||!n?wt.state.address:J.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>J.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{J.resetNetwork(n)},this.addConnector=n=>{lt.addConnector(n)},this.resetWcConnection=()=>{Vt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{wt.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{wt.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{J.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{wt.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{Oe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await LHe.fetchRemoteFeatures(e),Oe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&SU.setOnrampProviders(this.remoteFeatures.onramp),((n=Oe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=Oe.state.remoteFeatures)==null?void 0:r.socials)&&((s=Oe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Lt.fetchAllowedOrigins();if(e&&Bt.isClient()){const n=window.location.origin;_T.isOriginAllowed(n,e,e_.DEFAULT_ALLOWED_ANCESTORS)||Md.open(xd.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Md.open(xd.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,xs.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ha.setThemeMode(e.themeMode),e.themeVariables&&Ha.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");J.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&J.setActiveCaipNetwork(n)}initializeConnectionController(e){Vt.setWcBasic(e.basic??!1)}initializeConnectorController(){lt.initialize(this.chainNamespaces)}initializeProjectSettings(e){Oe.setProjectId(e.projectId),Oe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;Oe.setDebug(e.debug!==!1),Oe.setEnableWalletConnect(e.enableWalletConnect!==!1),Oe.setEnableWalletGuide(e.enableWalletGuide!==!1),Oe.setEnableWallets(e.enableWallets!==!1),Oe.setEIP6963Enabled(e.enableEIP6963!==!1),Oe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Oe.setEnableAuthLogger(e.enableAuthLogger!==!1),Oe.setCustomRpcUrls(e.customRpcUrls),Oe.setEnableEmbedded(e.enableEmbedded),Oe.setAllWallets(e.allWallets),Oe.setIncludeWalletIds(e.includeWalletIds),Oe.setExcludeWalletIds(e.excludeWalletIds),Oe.setFeaturedWalletIds(e.featuredWalletIds),Oe.setTokens(e.tokens),Oe.setTermsConditionsUrl(e.termsConditionsUrl),Oe.setPrivacyPolicyUrl(e.privacyPolicyUrl),Oe.setCustomWallets(e.customWallets),Oe.setFeatures(e.features),Oe.setAllowUnsupportedChain(e.allowUnsupportedChain),Oe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Oe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Oe.setDefaultAccountTypes(e.defaultAccountTypes);const n=bt.getPreferredAccountTypes()||{},r={...Oe.state.defaultAccountTypes,...n};wt.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),Oe.setMetadata(e.metadata),Oe.setDisableAppend(e.disableAppend),Oe.setEnableEmbedded(e.enableEmbedded),Oe.setSIWX(e.siwx),!e.projectId){Md.open(xd.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ut.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Oe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Bt.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=yb.getUnsupportedNetwork(`${n}:${e}`);J.setActiveCaipNetwork(r)}}getDefaultNetwork(){return yb.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return yb.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return yb.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?yb.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Lr.getProvider(e),s=Lr.getProviderId(e),{caipAddress:i}=J.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),bt.removeConnectedNamespace(e),Lr.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),lt.removeConnectorId(e),J.resetAccount(e),J.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=J.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),bt.setConnectedNamespaces([...J.state.chains.keys()]),this.chainNamespaces.forEach(o=>{lt.setConnectorId(Ga.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,m,y,w,C,N;const c=J.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const S=this.getCaipNetworks().find(P=>P.chainNamespace===i);S&&this.setCaipNetwork(S)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(m=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:m.http)==null?void 0:y[0])||((N=(C=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:C.http)==null?void 0:N[0])});if(!h)return;bt.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=wt.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=J.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),bt.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=TBe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));mr.resetSend(),Vt.resetWcConnection(),await $_.clearSessions(),lt.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));bt.deleteConnectedSocialProvider(),xs.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(J.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:wt.state.address,provider:Lr.getProvider(J.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if($r.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(J.state.activeChain),s=Lr.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ut.CHAIN.EVM){const n=this.getAdapter(J.state.activeChain),r=Lr.getProvider(J.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:wt.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:J.state.activeChain}),wt.state.profileImage||!1},getEnsAddress:async e=>await _T.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(J.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Lr.getProvider(J.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(J.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(J.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(J.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!wt.state.address||this.updateNativeBalance(wt.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Vt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Lr.getProviderId(J.state.activeChain)===Ga.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Lr.getProvider(n),i=Lr.getProviderId(n);if(e.chainNamespace===J.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Ga.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ep.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new MHe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=bt.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(bt.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=J.state.activeChain===e,c=J.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=wt.state.address,i=J.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=J.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=J.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=J.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ut.CHAIN.EVM&&Bt.isSafeApp()&&lt.setConnectorId(ut.CONNECTOR_ID.SAFE,e);const n=lt.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ut.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ut.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=lt.getConnectorId(e),s=this.getCaipNetwork(e),o=lt.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Bt.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=J.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=ep.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=ep.validateCaipAddress(o),{chainId:f,address:p}=ep.parseCaipAddress(h);if(Lr.setProviderId(n,Ga.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&J.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ut.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:J.state.activeCaipNetwork});Lr.setProvider(n,g)}else Lr.setProvider(n,this.universalProvider);lt.setConnectorId(ut.CONNECTOR_ID.WALLET_CONNECT,n),bt.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await J.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=ep.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Bt.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Lr.setProviderId(s,e),Lr.setProvider(s,n),lt.setConnectorId(r,s)}async syncAllAccounts(e){const n=lt.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===J.state.activeChain,r=J.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=bt.getActiveNetworkProps(),c=i||a,l=((d=J.state.activeCaipNetwork)==null?void 0:d.name)===ut.UNSUPPORTED_NETWORK_NAME,u=J.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),p=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!f&&!p){const m=this.getApprovedCaipNetworkIds()||[],y=m.find(C=>{var N;return((N=ep.parseCaipNetworkId(C))==null?void 0:N.chainId)===c.toString()}),w=m.find(C=>{var N;return((N=ep.parseCaipNetworkId(C))==null?void 0:N.chainNamespace)===o});f=this.getCaipNetworks().find(C=>C.caipNetworkId===y),p=this.getCaipNetworks().find(C=>C.caipNetworkId===w||"deprecatedCaipNetworkId"in C&&C.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===J.state.activeChain?Oe.state.enableNetworkSwitch&&!Oe.state.allowUnsupportedChain&&((h=J.state.activeCaipNetwork)==null?void 0:h.name)===ut.UNSUPPORTED_NETWORK_NAME?J.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),AP.isLowerCaseMatch(s,wt.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=lt.getConnectorId(e),r=Lr.getProviderId(e);if(r===Ga.CONNECTOR_TYPE_ANNOUNCED||r===Ga.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Ga.CONNECTOR_TYPE_WALLET_CONNECT){const i=Lr.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ut.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ut.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!Qne.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=J.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=PBe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};Oe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await dHe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Vt.setUri(e)}),this.universalProvider.on("connect",Vt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Vt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(_T.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Bt.isCaipAddress(r[0])&&this.syncAccount(ep.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Bt.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){xs.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(xd.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=xd.ALERT_ERRORS[o];a&&(Md.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Vt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Fi.open({...e,data:{swap:e.arguments}})}return Fi.open(e)}async close(){await this.injectModalUi(),Fi.close()}setLoading(e,n){Fi.setLoading(e,n)}async disconnect(e){await Vt.disconnect(e)}getSIWX(){return Oe.state.siwx}getError(){return""}getChainId(){var e;return(e=J.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Md.open(xd.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await J.switchActiveNetwork(n)}getWalletProvider(){return J.state.activeChain?Lr.state.providers[J.state.activeChain]:null}getWalletProviderType(){return Lr.getProviderId(J.state.activeChain)}subscribeProviders(e){return Lr.subscribeProviders(e)}getThemeMode(){return Ha.state.themeMode}getThemeVariables(){return Ha.state.themeVariables}setThemeMode(e){Ha.setThemeMode(e),Zie(Ha.state.themeMode)}setTermsConditionsUrl(e){Oe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Oe.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ha.setThemeVariables(e),RHe(Ha.state.themeVariables)}subscribeTheme(e){return Ha.subscribe(e)}getWalletInfo(){return wt.state.connectedWalletInfo}getAccount(e){var o;const n=lt.getAuthConnector(e),r=J.getAccountData(e),s=J.state.activeChain,i=bt.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Bt.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ut.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:bt.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?J.subscribeChainProp("accountState",r,n):J.subscribe(r),lt.subscribe(r)}subscribeNetwork(e){return J.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return wt.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){wt.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){J.subscribeKey("activeCaipNetwork",e)}getState(){return Gd.state}subscribeState(e){return Gd.subscribe(e)}showErrorMessage(e){Tu.showError(e)}showSuccessMessage(e){Tu.showSuccess(e)}getEvent(){return{...xs.state}}subscribeEvents(e){return xs.subscribe(e)}replace(e){Nn.replace(e)}redirect(e){Nn.push(e)}popTransactionStack(e){Nn.popTransactionStack(e)}isOpen(){return Fi.state.open}isTransactionStackEmpty(){return Nn.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Oe.setFeatures(e)}updateRemoteFeatures(e){Oe.setRemoteFeatures(e)}updateOptions(e){const r={...Oe.state||{},...e};Oe.setOptions(r)}setConnectMethodsOrder(e){Oe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Oe.setWalletFeaturesOrder(e)}setCollapseWallets(e){Oe.setCollapseWallets(e)}setSocialsOrder(e){Oe.setSocialsOrder(e)}getConnectMethodsOrder(){return v5.getConnectOrderMethod(Oe.state.features,lt.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||J.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&J.removeNetwork(e,n)}}let ZG=!1;class $He extends UHe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{jc.checkIfRequestExists(n)?jc.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(mo.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(mo.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=jc.checkIfRequestIsSafe(r),i=wt.state.address,o=J.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=J.state.activeChain;lt.getConnectorId(n)===ut.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=J.state.activeChain,s=r===ut.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=Oe.state.defaultAccountTypes[r],o=(l=wt.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;AP.isLowerCaseMatch(n.address,wt.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...wt.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Bt.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Bt.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...wt.state.user||{},username:n},J.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,J.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,J.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ut.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=wt.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Ha.getSnapshot(),l=Oe.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:af(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ut.CONNECTOR_ID.AUTH,info:{name:ut.CONNECTOR_ID.AUTH},type:Ga.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=J.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):lt.getConnectorId(n)===ut.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),bt.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Bt.isTelegram())return;const r=bt.getTelegramSocialProvider();if(!r||!Bt.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;wt.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=lt.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Vt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),bt.setConnectedSocialProvider(r),bt.removeTelegramSocialProvider(),xs.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ut.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=c5e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:xd.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Md.open(xd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Md.open(xd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Md.open(xd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Gd.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Lt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=J.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Lr.getProvider(r),u=Lr.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Lr.getProviderId(n)===Ga.CONNECTOR_TYPE_AUTH,u=Lr.getProviderId(r),d=u===Ga.CONNECTOR_TYPE_AUTH,h=ut.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(J.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ut.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Ga.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Ga.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Gd.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ut.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Lr.getProviderId(e);if(n===Ga.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=bt.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Bt.isClient()&&!ZG)try{const e={...$r.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Bt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!Oe.state.disableAppend&&!Oe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}ZG=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Bt.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ro(()=>import("./embedded-wallet-BvhL_akC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(ro(()=>import("./email-DkY_FQH3.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(ro(()=>import("./socials-C8eUZo3B.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(ro(()=>import("./swaps-TUtewZu5.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(ro(()=>import("./send-CYmoFD2A.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(ro(()=>import("./receive-Db15fJQ4.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(ro(()=>import("./onramp-WKK90QDI.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(ro(()=>import("./transactions-P7wO-tyh.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(ro(()=>import("./index-D9XpWNfz.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,ro(()=>import("./index-xhjrTBUS.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),ro(()=>import("./w3m-modal-DijlfCRw.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let vp;function FHe(t){t&&(vp=t)}function eN(){if(!vp)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(vp==null?void 0:vp.open(n))}async function e(){await(vp==null?void 0:vp.close())}return{open:t,close:e}}const jHe="1.7.8";let Ex;function WHe(t){return Ex||(Ex=new $He({...t,sdkVersion:Bt.generateSdkVersion(t.adapters??[],"react",jHe)}),FHe(Ex)),Ex}const zHe=Vu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),XG=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],HHe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=zHe({isOpen:t}),{open:i}=eN(),o=G.useRef(null),[a,c]=G.useState([]),[l,u]=G.useState(!0),[d,h]=G.useState(null),[f,p]=G.useState("all"),[g,m]=G.useState(1),[y,w]=G.useState(1),[C,N]=G.useState(0),[S,P]=G.useState(null),[O,L]=G.useState(XG[0]),[M,W]=G.useState(!1),[F,V]=G.useState(null),$=G.useCallback(async()=>{var B,j;try{if((B=window.solana)!=null&&B.isPhantom){const U=await window.solana.connect();V(U.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const U=await window.solflare.connect();V(U.publicKey.toString());return}i()}catch(U){console.error("Failed to connect Solana wallet:",U),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}W(!1)},[i]);G.useEffect(()=>{var B,j;(B=window.solana)!=null&&B.publicKey?V(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&V(window.solflare.publicKey.toString())},[]),G.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let U,I=f==="owned"&&r||void 0;if(O.api==="opensea-solana"){if(f==="owned"&&!F){W(!0),u(!1);return}I=F||void 0,U=await Vne(O.slug,50),console.log("Fetched Solana NFTs from collection:",U.data.length),f==="owned"&&F&&(console.log("Filtering for owner:",F),console.log("Sample NFT owner data:",(j=U.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",U.data.map(re=>({name:re.name,owners:re.owners,owner_of:re.owner_of}))),U.data.some(re=>re.owners&&re.owners.length>0)?(U.data=U.data.filter(re=>{const ne=re.owners.some(ge=>ge.owner_of&&ge.owner_of.toLowerCase()===F.toLowerCase());return ne&&console.log("Found owned NFT:",re.name),ne}),console.log("NFTs after filtering:",U.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else O.api==="opensea"?U=await o4(O.slug,50,I):U=await i4(O.slug,g,50,I);c(U.data),w(U.totalPages),N(U.totalCount)}catch(U){U instanceof Error?h(U.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,O,F]),G.useEffect(()=>{M&&$()},[M,$]);const v=B=>new Date(B).toLocaleDateString(),E=B=>O.api==="opensea-solana"?B.owner_of&&B.owner_of.length>0?`${B.owner_of.substring(0,6)}...${B.owner_of.substring(-4)}`:B.owners&&B.owners.length>0?`${B.owners[0].owner_of.substring(0,6)}...${B.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":B.owner_of&&B.owner_of.length>0?`${B.owner_of.substring(0,6)}...${B.owner_of.substring(-4)}`:B.owners&&B.owners.length>0?`${B.owners[0].owner_of.substring(0,6)}...${B.owners[0].owner_of.substring(-4)}`:"N/A",_=()=>{n&&n()},R=async B=>{if(O.api==="opensea"&&O.chain)try{const j=await qne(O.chain,B.address,B.token_id.toString()),U={...B,attributes:JSON.stringify(j.traits||[])};P(U)}catch(j){console.error("Failed to fetch full NFT details",j),P(B)}else P(B)},x=B=>{L(B),m(1)};return t?b.jsxs(b.Fragment,{children:[b.jsx(BI,{nodeRef:o,handle:`.${s.header}`,children:b.jsxs("div",{ref:o,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"LAWB NFT GALLERY"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:s.collectionSelector,children:XG.map(B=>b.jsx("button",{className:`${s.collectionButton} ${O.slug===B.slug?"active":""}`,onClick:()=>x(B),children:B.name},B.slug))}),b.jsxs("div",{className:s.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),b.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!F,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||F?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||F?1:.6},children:"My NFTs"}),O.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{$()},style:{background:F?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:F?"white":"black",marginLeft:"auto"},children:F?`Solana: ${F.slice(0,4)}...${F.slice(-4)}`:"Connect Solana"})]}),O.api==="opensea-solana"&&!F&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?b.jsx("div",{children:"Loading NFTs..."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${C} total)`,f==="recent"&&`Recently minted NFTs by ${O.api==="opensea-solana"?(F==null?void 0:F.slice(0,6))+"..."+(F==null?void 0:F.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${O.api==="opensea-solana"?(F==null?void 0:F.slice(0,6))+"..."+(F==null?void 0:F.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?b.jsx("div",{children:"No NFTs found."}):b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(B=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{R(B)},children:[b.jsx(Yne,{src:Kne(B),alt:`NFT #${B.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),b.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:b.jsxs("strong",{children:["#",B.token_id]})}),b.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",E(B)]}),b.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",v(B.created_at)]})]},B.id))}),f!=="recent"&&y>1&&b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[b.jsx("button",{onClick:()=>m(B=>Math.max(1,B-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),b.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),b.jsx("button",{onClick:()=>m(B=>Math.min(y,B+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),S&&b.jsx(QRe,{nft:S,onClose:()=>P(null)})]}):null};var Cx,GHe=new Uint8Array(16);function noe(){if(!Cx&&(Cx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Cx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cx(GHe)}const qHe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function LP(t){return typeof t=="string"&&qHe.test(t)}var Ji=[];for(var Q3=0;Q3<256;++Q3)Ji.push((Q3+256).toString(16).substr(1));function UP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ji[t[e+0]]+Ji[t[e+1]]+Ji[t[e+2]]+Ji[t[e+3]]+"-"+Ji[t[e+4]]+Ji[t[e+5]]+"-"+Ji[t[e+6]]+Ji[t[e+7]]+"-"+Ji[t[e+8]]+Ji[t[e+9]]+"-"+Ji[t[e+10]]+Ji[t[e+11]]+Ji[t[e+12]]+Ji[t[e+13]]+Ji[t[e+14]]+Ji[t[e+15]]).toLowerCase();if(!LP(n))throw TypeError("Stringified UUID is invalid");return n}var eq,J3,Z3=0,X3=0;function VHe(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||eq,o=t.clockseq!==void 0?t.clockseq:J3;if(i==null||o==null){var a=t.random||(t.rng||noe)();i==null&&(i=eq=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=J3=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:X3+1,u=c-Z3+(l-X3)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>Z3)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Z3=c,X3=l,J3=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var h=c/4294967296*1e4&268435455;s[r++]=h>>>8&255,s[r++]=h&255,s[r++]=h>>>24&15|16,s[r++]=h>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var f=0;f<6;++f)s[r+f]=i[f];return e||UP(s)}function roe(t){if(!LP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function KHe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var YHe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",QHe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function soe(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=KHe(s)),typeof i=="string"&&(i=roe(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return UP(c)}try{r.name=t}catch{}return r.DNS=YHe,r.URL=QHe,r}function JHe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return ZHe(XHe(eGe(t),t.length*8))}function ZHe(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function ioe(t){return(t+64>>>9<<4)+14+1}function XHe(t,e){t[e>>5]|=128<<e%32,t[ioe(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,c=r,l=s,u=i;n=To(n,r,s,i,t[o],7,-680876936),i=To(i,n,r,s,t[o+1],12,-389564586),s=To(s,i,n,r,t[o+2],17,606105819),r=To(r,s,i,n,t[o+3],22,-1044525330),n=To(n,r,s,i,t[o+4],7,-176418897),i=To(i,n,r,s,t[o+5],12,1200080426),s=To(s,i,n,r,t[o+6],17,-1473231341),r=To(r,s,i,n,t[o+7],22,-45705983),n=To(n,r,s,i,t[o+8],7,1770035416),i=To(i,n,r,s,t[o+9],12,-1958414417),s=To(s,i,n,r,t[o+10],17,-42063),r=To(r,s,i,n,t[o+11],22,-1990404162),n=To(n,r,s,i,t[o+12],7,1804603682),i=To(i,n,r,s,t[o+13],12,-40341101),s=To(s,i,n,r,t[o+14],17,-1502002290),r=To(r,s,i,n,t[o+15],22,1236535329),n=Ro(n,r,s,i,t[o+1],5,-165796510),i=Ro(i,n,r,s,t[o+6],9,-1069501632),s=Ro(s,i,n,r,t[o+11],14,643717713),r=Ro(r,s,i,n,t[o],20,-373897302),n=Ro(n,r,s,i,t[o+5],5,-701558691),i=Ro(i,n,r,s,t[o+10],9,38016083),s=Ro(s,i,n,r,t[o+15],14,-660478335),r=Ro(r,s,i,n,t[o+4],20,-405537848),n=Ro(n,r,s,i,t[o+9],5,568446438),i=Ro(i,n,r,s,t[o+14],9,-1019803690),s=Ro(s,i,n,r,t[o+3],14,-187363961),r=Ro(r,s,i,n,t[o+8],20,1163531501),n=Ro(n,r,s,i,t[o+13],5,-1444681467),i=Ro(i,n,r,s,t[o+2],9,-51403784),s=Ro(s,i,n,r,t[o+7],14,1735328473),r=Ro(r,s,i,n,t[o+12],20,-1926607734),n=ko(n,r,s,i,t[o+5],4,-378558),i=ko(i,n,r,s,t[o+8],11,-2022574463),s=ko(s,i,n,r,t[o+11],16,1839030562),r=ko(r,s,i,n,t[o+14],23,-35309556),n=ko(n,r,s,i,t[o+1],4,-1530992060),i=ko(i,n,r,s,t[o+4],11,1272893353),s=ko(s,i,n,r,t[o+7],16,-155497632),r=ko(r,s,i,n,t[o+10],23,-1094730640),n=ko(n,r,s,i,t[o+13],4,681279174),i=ko(i,n,r,s,t[o],11,-358537222),s=ko(s,i,n,r,t[o+3],16,-722521979),r=ko(r,s,i,n,t[o+6],23,76029189),n=ko(n,r,s,i,t[o+9],4,-640364487),i=ko(i,n,r,s,t[o+12],11,-421815835),s=ko(s,i,n,r,t[o+15],16,530742520),r=ko(r,s,i,n,t[o+2],23,-995338651),n=Po(n,r,s,i,t[o],6,-198630844),i=Po(i,n,r,s,t[o+7],10,1126891415),s=Po(s,i,n,r,t[o+14],15,-1416354905),r=Po(r,s,i,n,t[o+5],21,-57434055),n=Po(n,r,s,i,t[o+12],6,1700485571),i=Po(i,n,r,s,t[o+3],10,-1894986606),s=Po(s,i,n,r,t[o+10],15,-1051523),r=Po(r,s,i,n,t[o+1],21,-2054922799),n=Po(n,r,s,i,t[o+8],6,1873313359),i=Po(i,n,r,s,t[o+15],10,-30611744),s=Po(s,i,n,r,t[o+6],15,-1560198380),r=Po(r,s,i,n,t[o+13],21,1309151649),n=Po(n,r,s,i,t[o+4],6,-145523070),i=Po(i,n,r,s,t[o+11],10,-1120210379),s=Po(s,i,n,r,t[o+2],15,718787259),r=Po(r,s,i,n,t[o+9],21,-343485551),n=pg(n,a),r=pg(r,c),s=pg(s,l),i=pg(i,u)}return[n,r,s,i]}function eGe(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(ioe(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function pg(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function tGe(t,e){return t<<e|t>>>32-e}function $P(t,e,n,r,s,i){return pg(tGe(pg(pg(e,t),pg(r,i)),s),n)}function To(t,e,n,r,s,i,o){return $P(e&n|~e&r,t,e,s,i,o)}function Ro(t,e,n,r,s,i,o){return $P(e&r|n&~r,t,e,s,i,o)}function ko(t,e,n,r,s,i,o){return $P(e^n^r,t,e,s,i,o)}function Po(t,e,n,r,s,i,o){return $P(n^(e|~r),t,e,s,i,o)}var nGe=soe("v3",48,JHe);function ooe(t,e,n){t=t||{};var r=t.random||(t.rng||noe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return UP(r)}function rGe(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function eM(t,e){return t<<e|t>>>32-e}function sGe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var p=16;p<80;++p)h[p]=eM(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var g=n[0],m=n[1],y=n[2],w=n[3],C=n[4],N=0;N<80;++N){var S=Math.floor(N/20),P=eM(g,5)+rGe(S,m,y,w)+C+e[S]+h[N]>>>0;C=w,w=y,y=eM(m,30)>>>0,m=g,g=P}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+w>>>0,n[4]=n[4]+C>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var iGe=soe("v5",80,sGe);const oGe="00000000-0000-0000-0000-000000000000";function aGe(t){if(!LP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const cGe=Object.freeze(Object.defineProperty({__proto__:null,NIL:oGe,parse:roe,stringify:UP,v1:VHe,v3:nGe,v4:ooe,v5:iGe,validate:LP,version:aGe},Symbol.toStringTag,{value:"Module"})),lGe=Vu({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),uGe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],dGe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],bc=500;function aoe(){const t=lGe(),e=G.useRef(null),[n,r]=G.useState(null),[s,i]=G.useState(""),[o,a]=G.useState(""),[c,l]=G.useState(36),[u,d]=G.useState(36),[h,f]=G.useState(!1),[p,g]=G.useState(!1),[m,y]=G.useState(!1),[w,C]=G.useState(!1),[N,S]=G.useState(!1),[P,O]=G.useState([]),[L,M]=G.useState(null),W=G.useRef(null),[F,V]=G.useState(null),$=async te=>{const he=te.getContext("2d");if(!he)return;he.clearRect(0,0,te.width,te.height),n?await new Promise(_e=>{const Ce=new window.Image;Ce.crossOrigin="anonymous",Ce.onload=()=>{const Be=Math.min(te.width/Ce.width,te.height/Ce.height),Te=(te.width-Ce.width*Be)/2,xe=(te.height-Ce.height*Be)/2;he.drawImage(Ce,Te,xe,Ce.width*Be,Ce.height*Be),_e()},Ce.onerror=()=>_e(),Ce.src=n}):(he.fillStyle="#333",he.fillRect(0,0,te.width,te.height)),(_e=>{_e.textAlign="center",_e.strokeStyle="black",_e.lineWidth=3,_e.fillStyle="white";const Ce=(Be,Te)=>{const xe=Be.toUpperCase().split(" "),je=[];let Ue=xe[0];for(let rt=1;rt<xe.length;rt++){const Rt=xe[rt];_e.measureText(Ue+" "+Rt).width<Te?Ue+=" "+Rt:(je.push(Ue),Ue=Rt)}return je.push(Ue),je};if(s&&(_e.font=`${c}px Impact`,Ce(s,bc-20).forEach((Te,xe)=>{const je=c+xe*c*1.2;_e.strokeText(Te,bc/2,je),_e.fillText(Te,bc/2,je)})),o){_e.font=`${u}px Impact`;const Be=Ce(o,bc-20);Be.forEach((Te,xe)=>{const je=bc-(Be.length-xe)*u*1.2+u;_e.strokeText(Te,bc/2,je),_e.fillText(Te,bc/2,je)})}})(he),await Promise.all(P.map(_e=>new Promise(Ce=>{const Be=new window.Image;Be.src=_e.src,Be.onload=()=>{he.save(),he.translate(_e.x,_e.y),he.rotate(_e.rotation*Math.PI/180),he.scale(_e.scale,_e.scale),he.drawImage(Be,-40,-40,80,80),he.restore(),Ce()},Be.onerror=()=>Ce()})));try{h&&v(te),p&&E(te),m&&_(te)}catch(_e){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",_e),f(!1),g(!1),y(!1)}},v=te=>{const he=te.getContext("2d");if(!he)return;const me=he.getImageData(0,0,te.width,te.height),_e=me.data;for(let Ce=0;Ce<_e.length;Ce+=4){const Be=_e[Ce],Te=_e[Ce+1],xe=_e[Ce+2],je=(Be+Te+xe)/3,Ue=1.8;_e[Ce]=Math.min(255,je+(Be-je)*Ue),_e[Ce+1]=Math.min(255,je+(Te-je)*Ue*.7),_e[Ce+2]=Math.min(255,je+(xe-je)*Ue*.4);const rt=1.3;_e[Ce]=Math.min(255,Math.max(0,_e[Ce]*rt)),_e[Ce+1]=Math.min(255,Math.max(0,_e[Ce+1]*rt)),_e[Ce+2]=Math.min(255,Math.max(0,_e[Ce+2]*rt))}he.putImageData(me,0,0)},E=te=>{const he=te.getContext("2d");if(!he)return;const me=4,Ce=he.getImageData(0,0,te.width,te.height).data,Be=new Uint8ClampedArray(Ce);for(let Te=0;Te<te.height;Te+=me)for(let xe=0;xe<te.width;xe+=me){const je=(Te*te.width+xe)*4,Ue=Ce[je],rt=Ce[je+1],Rt=Ce[je+2],qe=Ce[je+3];for(let pt=0;pt<me&&Te+pt<te.height;pt++)for(let nn=0;nn<me&&xe+nn<te.width;nn++){const gn=((Te+pt)*te.width+(xe+nn))*4;Be[gn]=Ue,Be[gn+1]=rt,Be[gn+2]=Rt,Be[gn+3]=qe}}he.putImageData(new ImageData(Be,te.width,te.height),0,0)},_=te=>{const he=te.getContext("2d");if(!he)return;const me=he.getImageData(0,0,te.width,te.height),_e=me.data;for(let Ce=0;Ce<_e.length;Ce+=4){const Be=(Math.random()-.5)*50;_e[Ce]=Math.max(0,Math.min(255,_e[Ce]+Be)),_e[Ce+1]=Math.max(0,Math.min(255,_e[Ce+1]+Be)),_e[Ce+2]=Math.max(0,Math.min(255,_e[Ce+2]+Be))}he.putImageData(me,0,0)};G.useEffect(()=>{e.current&&$(e.current)},[$]);const R=te=>{var me;const he=(me=te.target.files)==null?void 0:me[0];he&&r(URL.createObjectURL(he))},x=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},B=async()=>{const te=e.current;if(!te)return;await $(te);const he=document.createElement("a");he.download="meme.png",he.href=te.toDataURL("image/png"),document.body.appendChild(he),he.click(),document.body.removeChild(he)},j=async te=>{S(!0),C(!1);try{console.log("Fetching NFTs for collection:",te);let he;if(te.api==="opensea"){console.log("Using OpenSea API for:",te.slug);const me=await o4(te.slug,50);he=me.data,console.log("OpenSea response:",me)}else if(te.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",te.slug);const me=await Vne(te.slug,50);if(he=me.data,console.log("Helius Solana response:",me),!he||he.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",te.slug);const me=await i4(te.slug,1,50);he=me.data,console.log("Scatter response:",me)}if(he&&he.length>0){const me=he[Math.floor(Math.random()*he.length)],_e=me.image||me.image_url||me.image_url_shrunk;console.log("Selected NFT:",me),console.log("Image URL:",_e),r(_e)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(he){console.error("Error fetching NFTs:",he),alert("Failed to fetch NFT images. Check console for details.")}finally{S(!1)}},U=te=>{const he={id:ooe(),src:te,x:80,y:80,scale:1,rotation:0};O(me=>me.length>=2||me.some(_e=>_e.src===te&&!_e.id.startsWith("upload-"))?me:[...me,he]),V(he.id)},I=te=>{var me;const he=(me=te.target.files)==null?void 0:me[0];if(he){const _e=URL.createObjectURL(he);U(_e)}},H=(te,he,me)=>{O(_e=>_e.map(Ce=>{if(Ce.id!==te)return Ce;let Be=Ce.x+he/1.2,Te=Ce.y+me/1.2;const xe=40*Ce.scale,je=40*Ce.scale;return Be=Math.max(xe,Math.min(bc-xe,Be)),Te=Math.max(je,Math.min(bc-je,Te)),{...Ce,x:Be,y:Te}}))},re=(te,he,me,_e,Ce)=>{O(Be=>Be.map(Te=>{if(Te.id!==te)return Te;const xe=Te.x,je=Te.y,Ue=Math.atan2(Ce-je,_e-xe)*180/Math.PI;return{...Te,rotation:me+(Ue-he)*.5}}))},ne=te=>{O(he=>he.filter(me=>me.id!==te))},ge=(te,he)=>{O(me=>me.map(_e=>_e.id===te?{..._e,scale:Math.max(.2,_e.scale*(1+(he-1)*.2))}:_e))};return b.jsxs("div",{className:t.container,children:[b.jsxs("div",{className:t.header,children:[b.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),b.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",b.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),b.jsxs("div",{className:t.content,children:[b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Collections"}),b.jsxs("div",{className:t.row,children:[b.jsxs("div",{className:t.dropdown,children:[b.jsx("button",{className:t.button,onClick:()=>C(te=>!te),children:"Collections"}),w&&b.jsx("div",{className:t.dropdownContent,children:uGe.map(te=>b.jsx("div",{className:t.dropdownItem,onClick:()=>{j(te)},children:te.name},te.id))})]}),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:R})]}),N&&b.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Text"}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Top Text:"}),b.jsx("input",{className:t.input,type:"text",value:s,onChange:te=>i(te.target.value),placeholder:"Enter top text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:te=>l(Number(te.target.value)),style:{width:60,textAlign:"center"}})]}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Bottom Text:"}),b.jsx("input",{className:t.input,type:"text",value:o,onChange:te=>a(te.target.value),placeholder:"Enter bottom text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:te=>d(Number(te.target.value)),style:{width:60,textAlign:"center"}})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Effects"}),b.jsxs("div",{className:t.row,children:[b.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(te=>!te),children:"Deep Fry"}),b.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(te=>!te),children:"Pixelate"}),b.jsx("button",{className:t.effectButton,style:{background:m?"#00ffff":void 0},onClick:()=>y(te=>!te),children:"Grain"})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Stickers"}),b.jsxs("div",{className:t.row,children:[dGe.map((te,he)=>b.jsx("img",{src:te,alt:`sticker${he+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>U(te)},te)),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:W,onChange:I})]})]})]}),b.jsxs("div",{className:t.actions,children:[b.jsx("button",{className:t.button,onClick:B,children:"Save Image"}),b.jsx("button",{className:t.button,onClick:x,children:"Restart"})]})]}),b.jsx("div",{className:t.memeArea,children:b.jsx("canvas",{ref:e,width:bc,height:bc,className:t.canvas})}),b.jsx("div",{style:{position:"absolute",left:0,top:0,width:bc,height:bc,pointerEvents:"none"},children:P.map(te=>F===te.id?b.jsxs("div",{style:{position:"absolute",left:te.x,top:te.y,width:80*te.scale,height:80*te.scale,transform:`rotate(${te.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:he=>{M(te.id),he.stopPropagation()},onMouseUp:()=>M(null),onMouseMove:he=>{L===te.id&&he.buttons===1&&H(te.id,he.movementX,he.movementY)},children:[b.jsx("img",{src:te.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),b.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:he=>{var Ue;he.stopPropagation();const me=(Ue=he.currentTarget.parentElement)==null?void 0:Ue.getBoundingClientRect(),_e=me?me.left+me.width/2:0,Ce=me?me.top+me.height/2:0,Be=Math.atan2(he.clientY-Ce,he.clientX-_e)*180/Math.PI,Te=te.rotation,xe=rt=>{re(te.id,Be,Te,rt.clientX,rt.clientY)},je=()=>{window.removeEventListener("mousemove",xe),window.removeEventListener("mouseup",je)};window.addEventListener("mousemove",xe),window.addEventListener("mouseup",je)}}),b.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:he=>{he.stopPropagation();const me=he.clientX,_e=Be=>{const Te=(Be.clientX-me)/80;ge(te.id,1+Te)},Ce=()=>{window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",Ce)};window.addEventListener("mousemove",_e),window.addEventListener("mouseup",Ce)}}),b.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ne(te.id),children:"×"}),b.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>V(null),children:"Place"})]},te.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_S.apply(this,arguments)}var gg;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gg||(gg={}));const tq="popstate";function hGe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return A5("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:loe(s)}return pGe(e,n,null,t)}function Ii(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function coe(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fGe(){return Math.random().toString(36).substr(2,8)}function nq(t,e){return{usr:t.state,key:t.key,idx:e}}function A5(t,e,n,r){return n===void 0&&(n=null),_S({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?WC(e):e,{state:n,key:e&&e.key||r||fGe()})}function loe(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function WC(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pGe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=gg.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(_S({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=gg.Pop;let m=u(),y=m==null?null:m-l;l=m,c&&c({action:a,location:g.location,delta:y})}function h(m,y){a=gg.Push;let w=A5(g.location,m,y);l=u()+1;let C=nq(w,l),N=g.createHref(w);try{o.pushState(C,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(N)}i&&c&&c({action:a,location:g.location,delta:1})}function f(m,y){a=gg.Replace;let w=A5(g.location,m,y);l=u();let C=nq(w,l),N=g.createHref(w);o.replaceState(C,"",N),i&&c&&c({action:a,location:g.location,delta:0})}function p(m){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof m=="string"?m:loe(m);return w=w.replace(/ $/,"%20"),Ii(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return a},get location(){return t(s,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(tq,d),c=m,()=>{s.removeEventListener(tq,d),c=null}},createHref(m){return e(s,m)},createURL:p,encodeLocation(m){let y=p(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(m){return o.go(m)}};return g}var rq;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rq||(rq={}));function gGe(t,e,n){return n===void 0&&(n="/"),mGe(t,e,n)}function mGe(t,e,n,r){let s=typeof e=="string"?WC(e):e,i=hoe(s.pathname||"/",n);if(i==null)return null;let o=uoe(t);yGe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=TGe(i);a=IGe(o[c],l)}return a}function uoe(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ii(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=l0([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Ii(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),uoe(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:AGe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of doe(i.path))s(i,o,c)}),e}function doe(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=doe(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function yGe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SGe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wGe=/^:[\w-]+$/,bGe=3,vGe=2,EGe=1,CGe=10,_Ge=-2,sq=t=>t==="*";function AGe(t,e){let n=t.split("/"),r=n.length;return n.some(sq)&&(r+=_Ge),e&&(r+=vGe),n.filter(s=>!sq(s)).reduce((s,i)=>s+(wGe.test(i)?bGe:i===""?EGe:CGe),r)}function SGe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function IGe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=NGe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:l0([i,d.pathname]),pathnameBase:MGe(l0([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=l0([i,d.pathnameBase]))}return o}function NGe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xGe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function xGe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),coe(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function TGe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return coe(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hoe(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RGe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?WC(t):t;return{pathname:n?n.startsWith("/")?n:kGe(n,e):e,search:BGe(r),hash:LGe(s)}}function kGe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function tM(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PGe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function OGe(t,e){let n=PGe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function DGe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=WC(t):(s=_S({},t),Ii(!s.pathname||!s.pathname.includes("?"),tM("?","pathname","search",s)),Ii(!s.pathname||!s.pathname.includes("#"),tM("#","pathname","hash",s)),Ii(!s.search||!s.search.includes("#"),tM("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=RGe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const l0=t=>t.join("/").replace(/\/\/+/g,"/"),MGe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BGe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LGe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UGe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const foe=["post","put","patch","delete"];new Set(foe);const $Ge=["get",...foe];new Set($Ge);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function AS(){return AS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AS.apply(this,arguments)}const B4=G.createContext(null),FGe=G.createContext(null),FP=G.createContext(null),jP=G.createContext(null),zC=G.createContext({outlet:null,matches:[],isDataRoute:!1}),poe=G.createContext(null);function WP(){return G.useContext(jP)!=null}function goe(){return WP()||Ii(!1),G.useContext(jP).location}function moe(t){G.useContext(FP).static||G.useLayoutEffect(t)}function jGe(){let{isDataRoute:t}=G.useContext(zC);return t?eqe():WGe()}function WGe(){WP()||Ii(!1);let t=G.useContext(B4),{basename:e,future:n,navigator:r}=G.useContext(FP),{matches:s}=G.useContext(zC),{pathname:i}=goe(),o=JSON.stringify(OGe(s,n.v7_relativeSplatPath)),a=G.useRef(!1);return moe(()=>{a.current=!0}),G.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=DGe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:l0([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function zGe(t,e){return HGe(t,e)}function HGe(t,e,n,r){WP()||Ii(!1);let{navigator:s}=G.useContext(FP),{matches:i}=G.useContext(zC),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=goe(),u;if(e){var d;let m=typeof e=="string"?WC(e):e;c==="/"||(d=m.pathname)!=null&&d.startsWith(c)||Ii(!1),u=m}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let m=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=gGe(t,{pathname:f}),g=YGe(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:l0([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:l0([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n,r);return e&&g?G.createElement(jP.Provider,{value:{location:AS({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:gg.Pop}},g):g}function GGe(){let t=XGe(),e=UGe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:s},n):null,null)}const qGe=G.createElement(GGe,null);class VGe extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(zC.Provider,{value:this.props.routeContext},G.createElement(poe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KGe(t){let{routeContext:e,match:n,children:r}=t,s=G.useContext(B4);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(zC.Provider,{value:e},r)}function YGe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ii(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,m=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||qGe,c&&(l<0&&h===0?(tqe("route-fallback"),p=!0,m=null):l===h&&(p=!0,m=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),w=()=>{let C;return f?C=g:p?C=m:d.route.Component?C=G.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,G.createElement(KGe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?G.createElement(VGe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var yoe=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yoe||{}),woe=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(woe||{});function QGe(t){let e=G.useContext(B4);return e||Ii(!1),e}function JGe(t){let e=G.useContext(FGe);return e||Ii(!1),e}function ZGe(t){let e=G.useContext(zC);return e||Ii(!1),e}function boe(t){let e=ZGe(),n=e.matches[e.matches.length-1];return n.route.id||Ii(!1),n.route.id}function XGe(){var t;let e=G.useContext(poe),n=JGe(),r=boe();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eqe(){let{router:t}=QGe(yoe.UseNavigateStable),e=boe(woe.UseNavigateStable),n=G.useRef(!1);return moe(()=>{n.current=!0}),G.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,AS({fromRouteId:e},i)))},[t,e])}const iq={};function tqe(t,e,n){iq[t]||(iq[t]=!0)}function nqe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function AT(t){Ii(!1)}function rqe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gg.Pop,navigator:i,static:o=!1,future:a}=t;WP()&&Ii(!1);let c=e.replace(/^\/*/,"/"),l=G.useMemo(()=>({basename:c,navigator:i,static:o,future:AS({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=WC(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=G.useMemo(()=>{let m=hoe(u,c);return m==null?null:{location:{pathname:m,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:G.createElement(FP.Provider,{value:l},G.createElement(jP.Provider,{children:n,value:g}))}function sqe(t){let{children:e,location:n}=t;return zGe(S5(e),n)}new Promise(()=>{});function S5(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(r,s)=>{if(!G.isValidElement(r))return;let i=[...e,s];if(r.type===G.Fragment){n.push.apply(n,S5(r.props.children,i));return}r.type!==AT&&Ii(!1),!r.props.index||!r.props.children||Ii(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=S5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const iqe="6";try{window.__reactRouterVersion=iqe}catch{}const oqe="startTransition",oq=mue[oqe];function aqe(t){let{basename:e,children:n,future:r,window:s}=t,i=G.useRef();i.current==null&&(i.current=hGe({window:s,v5Compat:!0}));let o=i.current,[a,c]=G.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=G.useCallback(d=>{l&&oq?oq(()=>c(d)):c(d)},[c,l]);return G.useLayoutEffect(()=>o.listen(u),[o,u]),G.useEffect(()=>nqe(r),[r]),G.createElement(rqe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var aq;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(aq||(aq={}));var cq;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cq||(cq={}));const cqe=Vu({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function lqe(){const t=cqe(),{open:e}=eN(),{address:n,isConnected:r}=OI(),{isPending:s}=Fte(),{disconnect:i}=jte(),{data:o}=Wte({address:n}),[a,c]=G.useState("pixelawbs-popup"),[l,u]=G.useState(new Set),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),C=jGe(),N=G.useRef(null);G.useEffect(()=>{if(a==="halloween-popup"&&N.current){const _=N.current.querySelector("script[data-tiktok-embed]");_&&_.remove();const R=document.createElement("script");R.src="https://www.tiktok.com/embed.js",R.async=!0,R.setAttribute("data-tiktok-embed","true"),N.current.appendChild(R)}},[a]);const S=(_,R,x)=>{if(_==="url"&&x)window.open(x,"_blank");else if(_==="popup"&&R)c(R),u(B=>{const j=new Set(B);return j.delete(R),j}),document.body.offsetWidth;else if(_==="wallet")r?i():e();else if(_==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else _==="nft-gallery"?p(!0):_==="meme-generator"?m(!0):_==="chess"&&(r?(w(!0),setTimeout(()=>{w(!1),C("/chess")},1500)):e().then(()=>{const B=()=>{window.ethereum&&window.ethereum.selectedAddress?(w(!0),setTimeout(()=>{w(!1),C("/chess")},1500)):setTimeout(B,200)};B()}))},P=()=>c(null),O=_=>{u(R=>new Set(R).add(_)),c(null)},L=_=>{_==="mint-popup"?h(!0):_==="nft-gallery-popup"?p(!0):_==="meme-generator-popup"?m(!0):c(_),u(R=>{const x=new Set(R);return x.delete(_),x})},M=()=>h(!1),W=()=>p(!1),F=()=>m(!1),V=()=>{h(!1),u(_=>new Set(_).add("mint-popup"))},$=()=>{p(!1),u(_=>new Set(_).add("nft-gallery-popup"))},v=()=>{m(!1),u(_=>new Set(_).add("meme-generator-popup"))},E=b.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return b.jsxs("div",{className:t.body,children:[y&&b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[b.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),b.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),b.jsx(WRe,{onIconClick:S}),b.jsx(HRe,{minimizedWindows:Array.from(l),onRestoreWindow:L,walletButton:E,connectionStatus:{connected:r,address:n,ens:o||void 0}}),b.jsxs(gl,{id:"chat-popup",isOpen:a==="chat-popup",onClose:P,onMinimize:O,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",b.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),b.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(gl,{id:"purity-popup",isOpen:a==="purity-popup",onClose:P,onMinimize:O,children:[b.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),b.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),b.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),b.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(gl,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:P,onMinimize:O,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[b.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",b.jsx("br",{}),b.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",b.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",b.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),b.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(gl,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:P,onMinimize:O,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(gl,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:P,onMinimize:O,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsxs(gl,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:P,onMinimize:O,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx(dNe,{id:"1620879129850834944"})}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsx(gl,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:P,onMinimize:O,children:(()=>{const _=R=>{R.preventDefault(),c(null),h(!0)};return b.jsxs(b.Fragment,{children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:_,children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),b.jsxs(gl,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:P,onMinimize:O,children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),b.jsx("div",{ref:N,style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:b.jsxs("section",{children:[b.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",b.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),b.jsxs(gl,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:P,onMinimize:O,children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),b.jsx(VRe,{isOpen:d,onClose:M,onMinimize:V,walletAddress:n||""}),b.jsx(HHe,{isOpen:f,onClose:W,onMinimize:$,walletAddress:n}),b.jsx(gl,{id:"meme-generator-popup",isOpen:g,onClose:F,onMinimize:v,children:b.jsx(aoe,{})})]})}const uqe=Vu({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),lq=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],dqe=({onBack:t,walletAddress:e})=>{const n=uqe(),{open:r}=eN(),[s,i]=G.useState([]),[o,a]=G.useState(!0),[c,l]=G.useState(null),[u,d]=G.useState(lq[0]),[h,f]=G.useState(!1),[p,g]=G.useState(null),[m,y]=G.useState("all"),[w,C]=G.useState(null),N=G.useCallback(async()=>{var L,M;try{if((L=window.solana)!=null&&L.isPhantom){const W=await window.solana.connect();g(W.publicKey.toString());return}if((M=window.solflare)!=null&&M.isSolflare){const W=await window.solflare.connect();g(W.publicKey.toString());return}r()}catch(W){console.error("Failed to connect Solana wallet:",W),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);G.useEffect(()=>{var L,M;(L=window.solana)!=null&&L.publicKey?g(window.solana.publicKey.toString()):(M=window.solflare)!=null&&M.publicKey&&g(window.solflare.publicKey.toString())},[]),G.useEffect(()=>{(async()=>{a(!0);try{let M,W=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}W=p,M=await GRe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",M.data.length)}else u.api==="opensea"?M=await o4(u.slug,100,W):M=await i4(u.slug,1,100,W);m==="owned"&&p&&(console.log("Filtering for owner:",p),M.data.some(V=>V.owners&&V.owners.length>0)?M.data=M.data.filter(V=>V.owners.some(v=>v.owner_of&&v.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),C("Owner data not available for this Solana collection. Showing all NFTs."))),i(M.data)}catch(M){console.error(M)}finally{a(!1)}})()},[e,u,p,m]),G.useEffect(()=>{h&&N()},[h,N]);const S=async L=>{if(a(!0),u.api==="opensea"&&u.chain)try{const M=await qne(u.chain,L.address,L.token_id.toString()),W={...L,attributes:JSON.stringify(M.traits||[])};l(W)}catch(M){console.error("Failed to fetch full NFT details",M),l(L)}else l(L);a(!1)},P=()=>{if(!c)return null;let L=[];try{L=JSON.parse(c.attributes||"[]")}catch(M){console.error("Failed to parse NFT attributes:",M)}return b.jsxs("div",{className:n.detailView,children:[b.jsx("img",{src:c.image,alt:c.name}),b.jsx("h2",{children:c.name}),b.jsx("h4",{children:"Traits:"}),b.jsx("ul",{children:L.map((M,W)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[M.trait_type,":"]})," ",M.value]},W))})]})},O=()=>b.jsxs(b.Fragment,{children:[b.jsx("div",{className:n.collectionSelector,children:lq.map(L=>b.jsx("button",{className:`${n.collectionButton} ${u.slug===L.slug?"active":""}`,onClick:()=>d(L),children:L.name},L.slug))}),b.jsxs("div",{className:n.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>y("all"),style:{background:m==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:m==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:m==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:m==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{N()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),w&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:w}),u.api==="opensea-solana"&&!p&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?b.jsx("div",{className:n.loading,children:"Loading NFTs..."}):b.jsx("div",{className:n.grid,children:s.map(L=>{let M=L.image||L.image_url||L.image_url_shrunk||"/assets/pixelawb.png";return b.jsxs("div",{className:n.gridItem,onClick:()=>void S(L),children:[b.jsx("img",{src:M,alt:L.name,onError:W=>{W.currentTarget.src!==L.image_url&&L.image_url?W.currentTarget.src=L.image_url:W.currentTarget.src!==L.image_url_shrunk&&L.image_url_shrunk?W.currentTarget.src=L.image_url_shrunk:W.currentTarget.src="/assets/pixelawb.png"}}),b.jsx("span",{children:L.name})]},L.id)})})]})]});return b.jsxs("div",{className:n.galleryContainer,children:[b.jsxs("header",{className:n.header,children:[b.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),b.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),b.jsx("div",{className:n.content,children:o?b.jsx("p",{className:n.loading,children:"Loading..."}):c?P():O()})]})},hqe=Vu({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),cu=({isOpen:t,onClose:e,title:n,children:r})=>{const s=hqe();return t?b.jsx("div",{className:s.overlay,children:b.jsxs("div",{className:s.popup,children:[b.jsxs("div",{className:s.titleBar,children:[b.jsx("span",{children:n}),b.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),b.jsx("div",{className:s.content,children:r})]})}):null},fqe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=G.useState([]),[i,o]=G.useState(!1),[a,c]=G.useState(!1),[l,u]=G.useState({}),[d,h]=G.useState(null),{data:f}=zte();G.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const N=await Hne(n);s(N);const S={};N.forEach(P=>{S[P.id]=0}),u(S)}catch(N){h(N.message)}finally{o(!1)}},g=(N,S)=>{u(P=>({...P,[N]:Math.max(0,S)}))},m=async()=>{const N=Object.entries(l).filter(([,S])=>S>0).map(([S,P])=>({id:S,quantity:P}));if(N.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const S=await Gne(n,N);if(S.success&&S.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const P=await f.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${P}`),e()}catch(P){h("Transaction failed: "+P.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){h("Minting failed: "+S.message)}finally{c(!1)}},y=(N,S)=>`${parseFloat(N)} ${S}`,w={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},C={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return b.jsxs(cu,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&b.jsx("div",{style:C,children:d}),i?b.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(N=>b.jsxs("div",{style:w,children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:N.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(N.token_price,N.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",N.wallet_limit===4294967295?"Unlimited":N.wallet_limit," per wallet"]}),b.jsx("input",{type:"number",min:0,max:N.wallet_limit===4294967295?void 0:N.wallet_limit,value:l[N.id]||"",onChange:S=>g(N.id,parseInt(S.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),b.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},N.id))]}),b.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:m,disabled:a,children:a?"Minting...":"Mint"})]})]})},pqe=Vu({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),gqe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],mqe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],yqe=()=>{const t=pqe(),{open:e}=eN(),{address:n,isConnected:r}=OI(),{isPending:s}=Fte(),{disconnect:i}=jte(),{data:o}=Wte({address:n}),[a,c]=G.useState("main"),[l,u]=G.useState(!1),[d,h]=G.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),[C,N]=G.useState(!1),[S,P]=G.useState(!1),[O,L]=G.useState(!1),[M,W]=G.useState(!1),[F,V]=G.useState(!1),[$,v]=G.useState(!1),[E,_]=G.useState(!1),[R,x]=G.useState(!1),[B,j]=G.useState(!1),U=[{label:"Mint",icon:"/assets/mint.gif",action:()=>m(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>w(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>N(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>P(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],I=ne=>{ne.disabled||ne.action()};if(G.useEffect(()=>{const ne=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ne)},[]),G.useEffect(()=>{u(!0)},[]),a==="gallery")return b.jsx(dqe,{onBack:()=>c("main"),walletAddress:n||void 0});function H({open:ne,onClose:ge,title:te,nfts:he}){const me=_e=>{switch(_e){case"lawbsters":L(!0);break;case"lawbstarz":W(!0);break;case"pixelawbs":V(!0);break;case"halloween":v(!0);break;case"lawbstation":_(!0);break;case"nexus":x(!0);break}};return b.jsx(cu,{isOpen:ne,onClose:ge,title:te,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:he.map(_e=>b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>me(_e.id),children:[b.jsx("img",{src:_e.image,alt:_e.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),b.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:_e.name}),b.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:_e.description})]},_e.id))})})}function re({open:ne,onClose:ge}){return ne?b.jsxs(cu,{isOpen:ne,onClose:ge,title:"$LAWB",children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return b.jsxs("div",{className:t.mobileContainer,children:[b.jsx("header",{className:t.header,children:b.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),b.jsx("div",{className:t.iconGrid,children:U.map(ne=>b.jsxs("div",{className:t.icon,onClick:()=>I(ne),children:[b.jsx("img",{src:ne.icon,alt:ne.label}),b.jsx("span",{children:ne.label})]},ne.label))}),l&&b.jsxs(cu,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),m(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&b.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:b.jsxs("div",{className:t.menuModal,onClick:ne=>ne.stopPropagation(),children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),b.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),b.jsx(fqe,{isOpen:g,onClose:()=>m(!1),walletAddress:n||""}),b.jsx(H,{open:y,onClose:()=>w(!1),title:"EVM NFT'S FOLDER",nfts:gqe}),b.jsx(H,{open:C,onClose:()=>N(!1),title:"SOL NFTS FOLDER",nfts:mqe}),b.jsx(re,{open:S,onClose:()=>P(!1)}),b.jsxs(cu,{isOpen:O,onClose:()=>L(!1),title:"Lawbsters",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(cu,{isOpen:M,onClose:()=>W(!1),title:"Lawbstarz",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(cu,{isOpen:F,onClose:()=>V(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{V(!1),m(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),b.jsxs(cu,{isOpen:$,onClose:()=>v(!1),title:"A Lawbster Halloween",children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),b.jsxs(cu,{isOpen:E,onClose:()=>_(!1),title:"Lawbstation",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(cu,{isOpen:R,onClose:()=>x(!1),title:"Nexus",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsx(cu,{isOpen:B,onClose:()=>j(!1),title:"Meme Generator",children:b.jsx(aoe,{})}),b.jsxs("div",{className:t.taskbar,children:[b.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),b.jsxs("div",{className:t.walletStatus,children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),b.jsx("span",{className:t.clock,children:d})]})]})};function wqe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=G.useState(e(t));function s(){r(e(t))}return G.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const bqe=Symbol(),uq=Object.getPrototypeOf,I5=new WeakMap,vqe=t=>t&&(I5.has(t)?I5.get(t):uq(t)===Object.prototype||uq(t)===Array.prototype),Eqe=t=>vqe(t)&&t[bqe]||null,dq=(t,e=!0)=>{I5.set(t,e)},fk={},L4=t=>typeof t=="object"&&t!==null,Cqe=t=>L4(t)&&!tN.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),voe=(t,e)=>{const n=N5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return dq(r,!0),N5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(tN.has(i))dq(i,!1);else if(om.has(i)){const[c,l]=om.get(i);a.value=voe(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},_qe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(hq(l,o)||SS.has(o)&&hq(l,SS.get(o))))return!0;n(i),L4(o)&&(o=Eqe(o)||o);const u=!om.has(o)&&Sqe(o)?ys(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),om=new WeakMap,tN=new WeakSet,N5=new WeakMap,t_=[1,1],SS=new WeakMap;let hq=Object.is,Aqe=(t,e)=>new Proxy(t,e),Sqe=Cqe,Iqe=voe,Nqe=_qe;function ys(t={}){if(!L4(t))throw new Error("object required");const e=SS.get(t);if(e)return e;let n=t_[0];const r=new Set,s=(m,y=++t_[0])=>{n!==y&&(n=y,r.forEach(w=>w(m,y)))};let i=t_[1];const o=(m=++t_[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const w=y[1](m);w>n&&(n=w)})),n),a=m=>(y,w)=>{const C=[...y];C[1]=[m,...C[1]],s(C,w)},c=new Map,l=(m,y)=>{const w=!tN.has(y)&&om.get(y);if(w){if((fk?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=w[2](a(m));c.set(m,[w,C])}else c.set(m,[w])}},u=m=>{var y;const w=c.get(m);w&&(c.delete(m),(y=w[1])==null||y.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,C],N)=>{if((fk?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const S=w[2](a(N));c.set(N,[w,S])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,C],N)=>{C&&(C(),c.set(N,[w]))})});let h=!0;const f=Nqe(()=>h,l,u,s),p=Aqe(t,f);SS.set(t,p);const g=[t,o,d];return om.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),h=!1,p}function dc(t,e,n){const r=om.get(t);(fk?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function IS(t){const e=om.get(t);(fk?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return Iqe(n,r())}function eC(t){return tN.add(t),t}function xqe(){return{proxyStateMap:om,refSet:tN,snapCache:N5,versionHolder:t_,proxyCache:SS}}function Ea(t,e,n,r){let s=t[e];return dc(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:Tqe,snapCache:Rqe}=xqe(),_x=t=>Tqe.has(t);function kqe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=Rqe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return _x(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!_x(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!_x(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!_x(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ys(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var fq={};const Ie={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof fq<"u"?fq.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},pk={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Ie.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},Pqe={bigNumber(t){return t?new ia(t):new ia(0)},multiply(t,e){if(t===void 0||e===void 0)return new ia(0);const n=new ia(t),r=new ia(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Oqe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Dqe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Mqe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Bqe={getERC20Abi:t=>Ie.USDT_CONTRACT_ADDRESSES.includes(t)?Mqe:Oqe,getSwapAbi:()=>Dqe},mg={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},an={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function nM(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Qt={setItem(t,e){n_()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(n_())return localStorage.getItem(t)||void 0},removeItem(t){n_()&&localStorage.removeItem(t)},clear(){n_()&&localStorage.clear()}};function n_(){return typeof window<"u"&&typeof localStorage<"u"}function gk(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const ca={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[Ie.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},_t={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=_t.getActiveNamespace(),e=_t.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Qt.setItem(an.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Qt.getItem(an.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Qt.removeItem(an.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Qt.setItem(an.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Qt.setItem(an.ACTIVE_CAIP_NETWORK_ID,t),_t.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Qt.getItem(an.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Qt.removeItem(an.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=nM(t);Qt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=_t.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Qt.setItem(an.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Qt.getItem(an.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=nM(t);Qt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Qt.getItem(an.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=nM(t);return Qt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Qt.setItem(an.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Qt.getItem(an.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Qt.removeItem(an.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Qt.getItem(an.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Qt.getItem(an.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Qt.setItem(an.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Qt.getItem(an.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Qt.getItem(an.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Qt.setItem(an.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=_t.getConnectedNamespaces();e.includes(t)||(e.push(t),_t.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=_t.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),_t.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Qt.getItem(an.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Qt.setItem(an.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Qt.removeItem(an.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Qt.getItem(an.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=_t.getBalanceCache();Qt.setItem(an.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=_t.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;_t.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=_t.getBalanceCache();e[t.caipAddress]=t,Qt.setItem(an.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Qt.getItem(an.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=_t.getBalanceCache();Qt.setItem(an.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=_t.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),_t.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=_t.getNativeBalanceCache();e[t.caipAddress]=t,Qt.setItem(an.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Qt.getItem(an.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=_t.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;_t.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=_t.getEnsCache();e[t.address]=t,Qt.setItem(an.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=_t.getEnsCache();Qt.setItem(an.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Qt.getItem(an.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=_t.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;_t.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=_t.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Qt.setItem(an.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=_t.getIdentityCache();Qt.setItem(an.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Qt.removeItem(an.PORTFOLIO_CACHE),Qt.removeItem(an.NATIVE_BALANCE_CACHE),Qt.removeItem(an.ENS_CACHE),Qt.removeItem(an.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Qt.setItem(an.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Qt.getItem(an.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=_t.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===Ie.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Qt.setItem(an.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Qt.getItem(an.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=_t.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Qt.setItem(an.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Qt.getItem(an.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=_t.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Qt.setItem(an.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=_t.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Qt.setItem(an.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(_t.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ft={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ft.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ca.TEN_SEC_MS:!0},isAllowedRetry(t,e=ca.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ft.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ca.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ft.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ft.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?_t.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ft.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Ie.W3M_API_URL},getBlockchainApiUrl(){return Ie.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Ie.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ca.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Ie.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function R1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let nN=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await R1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await R1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await R1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await R1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await R1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Lqe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ca.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ft.isTelegram()){if(Ft.isIos())return t.filter(e=>e!=="google");if(Ft.isMac())return t.filter(e=>e!=="x");if(Ft.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},zt=ys({features:ca.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ca.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),fn={state:zt,subscribeKey(t,e){return Ea(zt,t,e)},setOptions(t){Object.assign(zt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...zt.remoteFeatures,...t};zt.remoteFeatures=e,(n=zt.remoteFeatures)!=null&&n.socials&&(zt.remoteFeatures.socials=Lqe.filterSocialsByPlatform(zt.remoteFeatures.socials))},setFeatures(t){if(!t)return;zt.features||(zt.features=ca.DEFAULT_FEATURES);const e={...zt.features,...t};zt.features=e},setProjectId(t){zt.projectId=t},setCustomRpcUrls(t){zt.customRpcUrls=t},setAllWallets(t){zt.allWallets=t},setIncludeWalletIds(t){zt.includeWalletIds=t},setExcludeWalletIds(t){zt.excludeWalletIds=t},setFeaturedWalletIds(t){zt.featuredWalletIds=t},setTokens(t){zt.tokens=t},setTermsConditionsUrl(t){zt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){zt.privacyPolicyUrl=t},setCustomWallets(t){zt.customWallets=t},setIsSiweEnabled(t){zt.isSiweEnabled=t},setIsUniversalProvider(t){zt.isUniversalProvider=t},setSdkVersion(t){zt.sdkVersion=t},setMetadata(t){zt.metadata=t},setDisableAppend(t){zt.disableAppend=t},setEIP6963Enabled(t){zt.enableEIP6963=t},setDebug(t){zt.debug=t},setEnableWalletConnect(t){zt.enableWalletConnect=t},setEnableWalletGuide(t){zt.enableWalletGuide=t},setEnableAuthLogger(t){zt.enableAuthLogger=t},setEnableWallets(t){zt.enableWallets=t},setPreferUniversalLinks(t){zt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ca.SIWX_DEFAULTS))t[e]??(t[e]=n);zt.siwx=t},setConnectMethodsOrder(t){zt.features={...zt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){zt.features={...zt.features,walletFeaturesOrder:t}},setSocialsOrder(t){zt.remoteFeatures={...zt.remoteFeatures,socials:t}},setCollapseWallets(t){zt.features={...zt.features,collapseWallets:t}},setEnableEmbedded(t){zt.enableEmbedded=t},setAllowUnsupportedChain(t){zt.allowUnsupportedChain=t},setManualWCControl(t){zt.manualWCControl=t},setEnableNetworkSwitch(t){zt.enableNetworkSwitch=t},setEnableReconnect(t){zt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(zt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){zt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return zt.universalProviderConfigOverride},getSnapshot(){return IS(zt)}},Uqe=Object.freeze({enabled:!0,events:[]}),$qe=new nN({baseUrl:Ft.getAnalyticsUrl(),clientId:null}),Fqe=5,jqe=60*1e3,ap=ys({...Uqe}),Wqe={state:ap,subscribeKey(t,e){return Ea(ap,t,e)},async sendError(t,e){if(!ap.enabled)return;const n=Date.now();if(ap.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<jqe}).length>=Fqe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};ap.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=fn.state;await $qe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ft.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){ap.enabled=!0},disable(){ap.enabled=!1},clearEvents(){ap.events=[]}};let x5=class T5 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,T5.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,T5):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function pq(t,e){const n=t instanceof x5?t:new x5(t instanceof Error?t.message:String(t),e,t);throw Wqe.sendError(n,n.category),n}function Ql(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return pq(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return pq(a,e)}},n[r]=i}else n[r]=s}),n}var tC={};const zqe="https://secure.walletconnect.org/sdk",Hqe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||zqe,Gqe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",qqe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",vt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},yo={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Rd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Vqe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Rd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Rd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Rd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Rd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Ie.CHAIN.SOLANA&&t===Rd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Rd.COINBASE.url}/dapp?cb_url=${r}`)}},vc=ys({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Kqe={state:vc,subscribeNetworkImages(t){return dc(vc.networkImages,()=>t(vc.networkImages))},subscribeKey(t,e){return Ea(vc,t,e)},subscribe(t){return dc(vc,()=>t(vc))},setWalletImage(t,e){vc.walletImages[t]=e},setNetworkImage(t,e){vc.networkImages[t]=e},setChainImage(t,e){vc.chainImages[t]=e},setConnectorImage(t,e){vc.connectorImages={...vc.connectorImages,[t]:e}},setTokenImage(t,e){vc.tokenImages[t]=e},setCurrencyImage(t,e){vc.currencyImages[t]=e}},Su=Ql(Kqe),Yqe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},rM=ys({networkImagePromises:{}}),Qqe={async fetchWalletImage(t){if(t)return await Zt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(rM.networkImagePromises[t]||(rM.networkImagePromises[t]=Zt._fetchNetworkImage(t)),await rM.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Su.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Su.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Su.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Su.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Su.state.connectorImages[t.imageId]},getChainImage(t){return Su.state.networkImages[Yqe[t]]}},cp=ys({message:"",variant:"info",open:!1}),Jqe={state:cp,subscribeKey(t,e){return Ea(cp,t,e)},open(t,e){const{debug:n}=fn.state,{shortMessage:r,longMessage:s}=t;n&&(cp.message=r,cp.variant=e,cp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){cp.open=!1,cp.message="",cp.variant="info"}},Vm=Ql(Jqe),Zqe=Ft.getAnalyticsUrl(),Xqe=new nN({baseUrl:Zqe,clientId:null}),eVe=["MODAL_CREATED"],_h=ys({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ps={state:_h,subscribe(t){return dc(_h,()=>t(_h))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=fn.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=yr.state.address;if(eVe.includes(t.data.event)||typeof window>"u")return;await Xqe.post({path:"/e",params:Ps.getSdkProperties(),body:{eventId:Ft.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),_h.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Ie.HTTP_STATUS_CODES.FORBIDDEN&&!_h.reportedErrors.FORBIDDEN&&(Vm.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${n_()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),_h.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;_h.timestamp=Date.now(),_h.data=t,(e=fn.state.features)!=null&&e.analytics&&Ps._sendAnalyticsEvent(_h)}},tVe=Ft.getApiUrl(),ka=new nN({baseUrl:tVe,clientId:null}),nVe=40,gq=4,rVe=20,vn=ys({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Zt={state:vn,subscribeKey(t,e){return Ea(vn,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=fn.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return fn.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${ka.baseUrl}/getWalletImage/${t}`,n=await ka.getBlob({path:e,params:Zt._getSdkProperties()});Su.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${ka.baseUrl}/public/getAssetImage/${t}`,n=await ka.getBlob({path:e,params:Zt._getSdkProperties()});Su.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${ka.baseUrl}/public/getAssetImage/${t}`,n=await ka.getBlob({path:e,params:Zt._getSdkProperties()});Su.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${ka.baseUrl}/public/getCurrencyImage/${t}`,n=await ka.getBlob({path:e,params:Zt._getSdkProperties()});Su.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${ka.baseUrl}/public/getTokenImage/${t}`,n=await ka.getBlob({path:e,params:Zt._getSdkProperties()});Su.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ft.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Rd.COINBASE.id?!0:oe.state.activeChain==="solana"&&(n.id===Rd.SOLFLARE.id||n.id===Rd.PHANTOM.id)):t},async fetchProjectConfig(){return(await ka.get({path:"/appkit/v1/config",params:Zt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await ka.get({path:"/projects/v1/origins",params:Zt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Ie.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Ie.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=oe.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Qqe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Zt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ot.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Zt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Zt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Zt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Zt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Rd).map(o=>o.id));const r=await ka.get({path:"/getWallets",params:{...Zt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Zt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=fn.state;if(t!=null&&t.length){const e={...Zt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??gq,include:t},{data:n}=await Zt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Zt._fetchWalletImage(i))),vn.featured=r,vn.allFeatured=r}},async fetchRecommendedWallets(){try{vn.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=fn.state,r=[...e??[],...n??[]].filter(Boolean),s=oe.getRequestedCaipNetworkIds().join(","),i={page:1,entries:gq,include:t,exclude:r,chains:s},{data:o,count:a}=await Zt.fetchWallets(i),c=_t.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Zt._fetchWalletImage(d))),vn.recommended=o,vn.allRecommended=o,vn.count=a??0}catch{}finally{vn.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=fn.state,s=oe.getRequestedCaipNetworkIds().join(","),i=[...vn.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:nVe,include:e,exclude:i,chains:s},{data:a,count:c}=await Zt.fetchWallets(o),l=a.slice(0,rVe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Zt._fetchWalletImage(u))),vn.wallets=Ft.uniqueBy([...vn.wallets,...Zt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),vn.count=c>vn.count?c:vn.count,vn.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Zt.fetchWallets(e);n&&n.forEach(r=>{vn.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=fn.state,s=oe.getRequestedCaipNetworkIds().join(",");vn.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Zt.fetchWallets(i);Ps.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Zt._fetchWalletImage(c)),Ft.wait(300)]),vn.search=Zt._filterOutExtensions(o)},initPromise(t,e){const n=vn.promises[t];return n||(vn.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Zt.initPromise("connectorImages",Zt.fetchConnectorImages),e&&Zt.initPromise("featuredWallets",Zt.fetchFeaturedWallets),n&&Zt.initPromise("recommendedWallets",Zt.fetchRecommendedWallets),r&&Zt.initPromise("networkImages",Zt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=fn.state.features)!=null&&t.analytics&&Zt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await ka.get({path:"/getAnalyticsConfig",params:Zt._getSdkProperties()});fn.setFeatures({analytics:t})}catch{fn.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){vn.featured=vn.allFeatured,vn.recommended=vn.allRecommended;return}const e=oe.getRequestedCaipNetworkIds().join(",");vn.featured=vn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vn.recommended=vn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vn.filteredWallets=vn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){vn.filteredWallets=[]},setFilterByNamespace(t){if(!t){vn.featured=vn.allFeatured,vn.recommended=vn.allRecommended;return}const e=oe.getRequestedCaipNetworkIds().join(",");vn.featured=vn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vn.recommended=vn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),vn.filteredWallets=vn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mr=ys({view:"Connect",history:["Connect"],transactionStack:[]}),sVe={state:Mr,subscribeKey(t,e){return Ea(Mr,t,e)},pushTransactionStack(t){Mr.transactionStack.push(t)},popTransactionStack(t){const e=Mr.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),dn.goBack();break;case"cancel":s==null||s(),dn.goBack();break}},push(t,e){t!==Mr.view&&(Mr.view=t,Mr.history.push(t),Mr.data=e)},reset(t,e){Mr.view=t,Mr.history=[t],Mr.data=e},replace(t,e){Mr.history.at(-1)===t||(Mr.view=t,Mr.history[Mr.history.length-1]=t,Mr.data=e)},goBack(){var r;const t=oe.state.activeCaipAddress,e=dn.state.view==="ConnectingFarcaster",n=!t&&e;if(Mr.history.length>1){Mr.history.pop();const[s]=Mr.history.slice(-1);s&&(t&&s==="Connect"?Mr.view="Account":Mr.view=s)}else rs.close();(r=Mr.data)!=null&&r.wallet&&(Mr.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){yr.setFarcasterUrl(void 0,oe.state.activeChain);const a=Ot.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=IS(fn.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mr.history.length>1){Mr.history=Mr.history.slice(0,t+1);const[e]=Mr.history.slice(-1);e&&(Mr.view=e)}},goBackOrCloseModal(){dn.state.history.length>1?dn.goBack():rs.close()}},dn=Ql(sVe),Ah=ys({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),R5={state:Ah,subscribe(t){return dc(Ah,()=>t(Ah))},setThemeMode(t){Ah.themeMode=t;try{const e=Ot.getAuthConnector();if(e){const n=R5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:gk(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ah.themeVariables={...Ah.themeVariables,...t};try{const e=Ot.getAuthConnector();if(e){const n=R5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:gk(Ah.themeVariables,Ah.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return IS(Ah)}},Ax=Ql(R5),Eoe={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},or=ys({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Eoe},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),iVe={state:or,subscribe(t){return dc(or,()=>{t(or)})},subscribeKey(t,e){return Ea(or,t,e)},initialize(t){t.forEach(e=>{const n=_t.getConnectedConnectorId(e);n&&Ot.setConnectorId(n,e)})},setActiveConnector(t){t&&(or.activeConnector=eC(t))},setConnectors(t){t.filter(s=>!or.allConnectors.some(i=>i.id===s.id&&Ot.getConnectorName(i.name)===Ot.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&or.allConnectors.push(eC(s))});const n=Ot.getEnabledNamespaces(),r=Ot.getEnabledConnectors(n);or.connectors=Ot.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(or.filterByNamespaceMap).forEach(e=>{or.filterByNamespaceMap[e]=!1}),t.forEach(e=>{or.filterByNamespaceMap[e]=!0}),Ot.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){or.filterByNamespaceMap[t]=e,Ot.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ot.getEnabledNamespaces(),e=Ot.getEnabledConnectors(t),n=Ot.areAllNamespacesEnabled();or.connectors=Ot.mergeMultiChainConnectors(e),n?Zt.clearFilterByNamespaces():Zt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(or.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return or.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(or.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ot.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Ie.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ot.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Ie.CONNECTOR_ID.AUTH){const s=t,i=IS(fn.state),o=Ax.getSnapshot().themeMode,a=Ax.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:gk(a,o)}),Ot.setConnectors([t])}else Ot.setConnectors([t])},getAuthConnector(t){var r;const e=t||oe.state.activeChain,n=or.connectors.find(s=>s.id===Ie.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return or.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return or.allConnectors.find(e=>e.id===t)},getConnector(t,e){return or.allConnectors.filter(r=>r.chain===oe.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=IS(fn.state),r=Ax.getSnapshot().themeMode,s=Ax.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:gk(s,r)})},getConnectorsByNamespace(t){const e=or.allConnectors.filter(n=>n.chain===t);return Ot.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return oe.checkIfSmartAccountEnabled()&&rh(t)===yo.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ot.getConnector(t.id,t.rdns);Vqe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,oe.state.activeChain),e?dn.push("ConnectingExternal",{connector:e}):dn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ot.getConnectorsByNamespace(t):Ot.mergeMultiChainConnectors(or.allConnectors)},setFilterByNamespace(t){or.filterByNamespace=t,or.connectors=Ot.getConnectors(t),Zt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(or.activeConnectorIds={...or.activeConnectorIds,[e]:t},_t.setConnectedConnectorId(e,t))},removeConnectorId(t){or.activeConnectorIds={...or.activeConnectorIds,[t]:void 0},_t.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return or.activeConnectorIds[t]},isConnected(t){return t?!!or.activeConnectorIds[t]:Object.values(or.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){or.activeConnectorIds={...Eoe}}},Ot=Ql(iVe),oVe=1e3,k1={checkNamespaceConnectorId(t,e){return Ot.getConnectorId(t)===e},isSocialProvider(t){return ca.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ot.setActiveConnector(e),s==null||s(Ft.isMobile()&&t),r){const l=rs.subscribeKey("open",u=>{u||(dn.state.view!==r&&dn.replace(r),l(),a(new Error("Modal closed")))})}const c=oe.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&rs.close(),c(),o(mg.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=oe.subscribeKey("activeCaipAddress",s=>{s&&(rs.close(),r(),e(mg.parseCaipAddress(s)))});kt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=yr.state.socialWindow,i=yr.state.socialProvider,o=!1,a=null;const c=oe.subscribeKey("activeCaipAddress",l=>{l&&(e&&rs.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===Ie.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Ot.getAuthConnector();if(g&&!o){s&&(s.close(),yr.setSocialWindow(void 0,oe.state.activeChain),s=yr.state.socialWindow),o=!0;const m=f.data.resultUri;i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=oe.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:m,chainId:y==null?void 0:y.caipNetworkId}),i){_t.setConnectedSocialProvider(i),await kt.connectExternal({id:g.id,type:g.type,socialUri:m},g.chain);const w=oe.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(mg.parseCaipAddress(w)),Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(yr.setSocialProvider(t,oe.state.activeChain),i=yr.state.socialProvider,Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=rs.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ot.getAuthConnector();if(p&&!yr.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();yr.setFarcasterUrl(g,oe.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ot.getAuthConnector();a=Ft.returnOpenHref(`${Ie.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){yr.setSocialWindow(a,oe.state.activeChain),s=yr.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=rs.subscribeKey("open",c=>{c||(dn.state.view!==e&&dn.replace(e),a(),i(new Error("Modal closed")))})}const o=oe.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&rs.close(),o(),s(mg.parseCaipAddress(a)))})})},async updateEmail(){const t=_t.getConnectedConnectorId(oe.state.activeChain),e=Ot.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Ie.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return dn.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(rs.close(),clearInterval(i),o(),r({email:a}))},oVe),o=rs.subscribeKey("open",a=>{a||(dn.state.view!=="Connect"&&dn.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return oe.checkIfSmartAccountEnabled()&&rh(t)===yo.ACCOUNT_TYPES.EOA}};function Coe(){var r,s;const t=((r=oe.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=oe.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ca.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function rh(t){var n;return(n=oe.getAccountData(t))==null?void 0:n.preferredAccountType}const _oe={getConnectionStatus(t,e){const n=Ot.state.activeConnectorIds[e],r=kt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=fn.state.remoteFeatures)!=null&&a.multiWallet),n=Ot.state.activeConnectorIds[t],r=kt.getConnections(t),i=(kt.state.recentConnections.get(t)??[]).filter(c=>Ot.getConnectorById(c.connectorId)),o=_oe.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Km=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),pi=ys({...Km}),aVe={state:pi,subscribeKey(t,e){return Ea(pi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ft.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){pi.message=Km.message,pi.variant=Km.variant,pi.svg=Km.svg,pi.open=Km.open,pi.autoClose=Km.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Km.autoClose}){pi.open?(pi.open=!1,setTimeout(()=>{pi.message=t,pi.variant=n,pi.svg=e,pi.open=!0,pi.autoClose=r},150)):(pi.message=t,pi.variant=n,pi.svg=e,pi.open=!0,pi.autoClose=r)}},yg=aVe,Xr=ys({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),cVe={state:Xr,subscribe(t){return dc(Xr,()=>t(Xr))},setLastNetworkInView(t){Xr.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Xr.loading=!0;try{const r=await sn.fetchTransactions({account:t,cursor:Xr.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=r_.filterSpamTransactions(r.data),i=r_.filterByConnectedChain(s),o=[...Xr.transactions,...i];Xr.loading=!1,e==="coinbase"?Xr.coinbaseTransactions=r_.groupTransactionsByYearAndMonth(Xr.coinbaseTransactions,r.data):(Xr.transactions=o,Xr.transactionsByYear=r_.groupTransactionsByYearAndMonth(Xr.transactionsByYear,i)),Xr.empty=o.length===0,Xr.next=r.next?r.next:void 0}catch{const s=oe.state.activeChain;Ps.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:fn.state.projectId,cursor:Xr.next,isSmartAccount:rh(s)===yo.ACCOUNT_TYPES.SMART_ACCOUNT}}),yg.showError("Failed to fetch transactions"),Xr.loading=!1,Xr.empty=!0,Xr.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=oe.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Xr.next=void 0},resetTransactions(){Xr.transactions=[],Xr.transactionsByYear={},Xr.lastNetworkInView=void 0,Xr.loading=!1,Xr.empty=!1,Xr.next=void 0}},r_=Ql(cVe,"API_ERROR"),Kn=ys({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Bm;const lVe={state:Kn,subscribe(t){return dc(Kn,()=>t(Kn))},subscribeKey(t,e){return Ea(Kn,t,e)},_getClient(){return Kn._client},setClient(t){Kn._client=eC(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);kt.syncStorageConnections(e)},syncStorageConnections(t){const e=_t.getConnections(),n=t??Array.from(oe.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Kn.recentConnections);i.set(r,s),Kn.recentConnections=i}},getConnections(t){return t?Kn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=kt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Ft.isTelegram()||Ft.isSafari()&&Ft.isIos()){if(Bm){await Bm,Bm=void 0;return}if(!Ft.isPairingExpired(Kn==null?void 0:Kn.wcPairingExpiry)){const s=Kn.wcUri;Kn.wcUri=s;return}Bm=(e=(t=kt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),kt.state.status="connecting",await Bm,Bm=void 0,Kn.wcPairingExpiry=void 0,kt.state.status="connected"}else await((r=(n=kt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=kt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&oe.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=kt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||oe.state.activeChain;e&&Ot.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;rs.setLoading(!0,oe.state.activeChain);const n=Ot.getAuthConnector();n&&(yr.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),_t.setPreferredAccountTypes(Object.entries(oe.state.chains).reduce((s,[i,o])=>{const a=i,c=rh(a);return c!==void 0&&(s[a]=c),s},{})),await kt.reconnectExternal(n),rs.setLoading(!1,oe.state.activeChain),Ps.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=oe.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=kt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=kt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=kt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=kt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=kt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=kt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=kt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=kt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=kt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=kt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=kt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=kt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Kn.wcUri=void 0,Kn.wcPairingExpiry=void 0,Kn.wcLinking=void 0,Kn.recentWallet=void 0,Kn.status="disconnected",r_.resetTransactions(),_t.deleteWalletConnectDeepLink()},resetUri(){Kn.wcUri=void 0,Kn.wcPairingExpiry=void 0,Bm=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=kt.state;t&&_t.setWalletConnectDeepLink(t),e&&_t.setAppKitRecent(e),Ps.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=dn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Kn.wcBasic=t},setUri(t){Kn.wcUri=t,Kn.wcPairingExpiry=Ft.getPairingExpiry()},setWcLinking(t){Kn.wcLinking=t},setWcError(t){Kn.wcError=t,Kn.buffering=!1},setRecentWallet(t){Kn.recentWallet=t},setBuffering(t){Kn.buffering=t},setStatus(t){Kn.status=t},setIsSwitchingConnection(t){Kn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=kt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new x5("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Kn.connections);n.set(e,t),Kn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=yr.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&k1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await kt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ot.getConnectorById(t.connectorId),s=t.connectorId===Ie.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await kt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await kt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ot.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===Ie.CONNECTOR_ID.AUTH,a=t.connectorId===Ie.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&k1.isSocialProvider(i)){const{address:d}=await k1.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){rs.open({view:"ConnectingFarcaster"})},onConnect(){dn.replace("ProfileWallets")}});c=d}else{const{address:d}=await k1.connectEmail({closeModalOnConnect:r,onOpen(){rs.open({view:"EmailLogin"})},onConnect(){dn.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await k1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){rs.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){dn.replace("ProfileWallets")}});c=d}else{const d=await kt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await kt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=yr.getCaipAddress(n);if(o){const{address:c}=mg.parseCaipAddress(o);i=c}const a=_oe.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await kt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await kt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},kt=Ql(lVe),ab=ys({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),fv={state:ab,subscribe(t){return dc(ab,()=>t(ab))},subscribeOpen(t){return Ea(ab,"open",t)},set(t){Object.assign(ab,{...ab,...t})}},uVe={async getTokenList(){var r;const t=oe.state.activeCaipNetwork,e=await sn.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=oe.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(kt==null?void 0:kt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await sn.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await sn.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=kt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await U4.getMyTokensWithBalance(t);return yr.setTokenBalance(e,oe.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Coe(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Ir=ys({tokenBalances:[],loading:!1}),dVe={state:Ir,subscribe(t){return dc(Ir,()=>t(Ir))},subscribeKey(t,e){return Ea(Ir,t,e)},setToken(t){t&&(Ir.token=eC(t))},setTokenAmount(t){Ir.sendTokenAmount=t},setReceiverAddress(t){Ir.receiverAddress=t},setReceiverProfileImageUrl(t){Ir.receiverProfileImageUrl=t},setReceiverProfileName(t){Ir.receiverProfileName=t},setNetworkBalanceInUsd(t){Ir.networkBalanceInUSD=t},setLoading(t){Ir.loading=t},async sendToken(){var t;try{switch(vr.setLoading(!0),(t=oe.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await vr.sendEvmToken();return;case"solana":await vr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{vr.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=oe.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=rh(t);if(!vr.state.sendTokenAmount||!vr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!vr.state.token)throw new Error("A token is required");(n=vr.state.token)!=null&&n.address?(Ps.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===yo.ACCOUNT_TYPES.SMART_ACCOUNT,token:vr.state.token.address,amount:vr.state.sendTokenAmount,network:((r=oe.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await vr.sendERC20Token({receiverAddress:vr.state.receiverAddress,tokenAddress:vr.state.token.address,sendTokenAmount:vr.state.sendTokenAmount,decimals:vr.state.token.quantity.decimals})):(Ps.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===yo.ACCOUNT_TYPES.SMART_ACCOUNT,token:vr.state.token.symbol||"",amount:vr.state.sendTokenAmount,network:((s=oe.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await vr.sendNativeToken({receiverAddress:vr.state.receiverAddress,sendTokenAmount:vr.state.sendTokenAmount,decimals:vr.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Ir.loading=!0;const e=(i=oe.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=oe.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=oe.state.activeCaipAddress,s=r?Ft.getPlainAddress(r):void 0;if(Ir.lastRetry&&!Ft.isAllowedRetry(Ir.lastRetry,30*ca.ONE_SEC_MS))return Ir.loading=!1,[];try{if(s&&e&&n){const a=await U4.getMyTokensWithBalance();return Ir.tokenBalances=a,Ir.lastRetry=void 0,a}}catch(a){Ir.lastRetry=Date.now(),t==null||t(a),yg.showError("Token Balance Unavailable")}finally{Ir.loading=!1}return[]},fetchNetworkBalance(){if(Ir.tokenBalances.length===0)return;const t=uVe.mapBalancesToSwapTokens(Ir.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Coe());e&&(Ir.networkBalanceInUSD=e?Pqe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;dn.pushTransactionStack({});const e=t.receiverAddress,n=yr.state.address,r=kt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await kt.sendTransaction({chainNamespace:Ie.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Ps.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:rh("eip155")===yo.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=vr.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=oe.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=kt._getClient())==null||a.updateBalance("eip155"),vr.resetSend()},async sendERC20Token(t){dn.pushTransactionStack({onSuccess(){dn.replace("Account")}});const e=kt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(yr.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ft.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await kt.writeContract({fromAddress:yr.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Bqe.getERC20Abi(n),chainNamespace:Ie.CHAIN.EVM}),vr.resetSend()}},async sendSolanaToken(){var t;if(!vr.state.sendTokenAmount||!vr.state.receiverAddress)throw new Error("An amount and receiver address are required");dn.pushTransactionStack({onSuccess(){dn.replace("Account")}}),await kt.sendTransaction({chainNamespace:"solana",to:vr.state.receiverAddress,value:vr.state.sendTokenAmount}),(t=kt._getClient())==null||t.updateBalance("solana"),vr.resetSend()},resetSend(){Ir.token=void 0,Ir.sendTokenAmount=void 0,Ir.receiverAddress=void 0,Ir.receiverProfileImageUrl=void 0,Ir.receiverProfileName=void 0,Ir.loading=!1,Ir.tokenBalances=[]}},vr=Ql(dVe),sM={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Sx={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ze=ys({chains:kqe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),hVe={state:Ze,subscribe(t){return dc(Ze,()=>{t(Ze)})},subscribeKey(t,e){return Ea(Ze,t,e)},subscribeChainProp(t,e,n){let r;return dc(Ze.chains,()=>{var i;const s=n||Ze.activeChain;if(s){const o=(i=Ze.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=_t.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=fn.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ze.noAdapters=!0),Ze.noAdapters||(Ze.activeChain=a==null?void 0:a.namespace,Ze.activeCaipNetwork=i,oe.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ze.activeChain&&fv.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=_t.getPreferredAccountTypes()||{},f={...fn.state.defaultAccountTypes,...h};oe.state.chains.set(u,{namespace:u,networkState:ys({...Sx,caipNetwork:d==null?void 0:d[0]}),accountState:ys({...sM,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),oe.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ze.activeChain===t){const r=Array.from(Ze.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&oe.setActiveCaipNetwork(s)}}Ze.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ze.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Sx,caipNetwork:r[0]},accountState:sM,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),oe.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ze.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ze.chains.set(t.chainNamespace,{...e,caipNetworks:r}),oe.setRequestedCaipNetworks(r,t.chainNamespace),Ot.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ze.chains.get(t);if(n){const o=((r=Ze.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&oe.setActiveCaipNetwork(n.caipNetworks[0]),Ze.chains.set(t,{...n,caipNetworks:a}),oe.setRequestedCaipNetworks(a||[],t),a.length===0&&Ot.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ze.chains.get(t);n&&(n.networkState={...n.networkState||Sx,...e},Ze.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ze.chains.get(t);if(r){const s={...r.accountState||sM,...e};Ze.chains.set(t,{...r,accountState:s}),(Ze.chains.size===1||Ze.activeChain===t)&&(e.caipAddress&&(Ze.activeCaipAddress=e.caipAddress),yr.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ze.chains.get(t);if(n){const r={...n.networkState||Sx,...e};Ze.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){oe.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Ze.activeChain=t;const e=t?Ze.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ze.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ze.activeCaipNetwork=n,oe.setChainNetworkData(t,{caipNetwork:n}),_t.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),fv.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ze.activeChain!==t.chainNamespace&&oe.setIsSwitchingNamespace(!0);const e=Ze.chains.get(t.chainNamespace);Ze.activeChain=t.chainNamespace,Ze.activeCaipNetwork=t,oe.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ze.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ze.activeCaipAddress=void 0,oe.setAccountProp("caipAddress",Ze.activeCaipAddress,t.chainNamespace),e&&yr.replaceState(e.accountState),vr.resetSend(),fv.set({activeChain:Ze.activeChain,selectedNetworkId:(i=Ze.activeCaipNetwork)==null?void 0:i.caipNetworkId}),_t.setActiveCaipNetworkId(t.caipNetworkId),!oe.checkIfSupportedNetwork(t.chainNamespace)&&fn.state.enableNetworkSwitch&&!fn.state.allowUnsupportedChain&&!kt.state.wcBasic&&oe.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ze.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==oe.state.activeChain,n=(s=oe.getNetworkData(t))==null?void 0:s.caipNetwork,r=oe.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await oe.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=oe.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=oe.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Ze.activeCaipNetwork)==null?void 0:a.id)})),s=oe.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&rs.close()}catch{dn.goBack()}Ps.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ze.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Ze.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ze.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ze.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ze.activeChain;if(e&&(n=e),!n)return;const r=(s=Ze.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ze.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ze.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ft.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ze.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=oe.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){oe.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=oe.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ot.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ze.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=oe.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Ze.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Ze.activeCaipNetwork},getActiveCaipAddress(){return Ze.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ze.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=oe.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());oe.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ze.activeCaipNetwork,r=oe.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ze.activeChain)return!0;const e=oe.getRequestedCaipNetworks(Ze.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){oe.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=pk.caipNetworkIdToNumber((r=Ze.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ze.activeChain;if(!e||!t)return!1;const n=oe.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){rs.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ze.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ca.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){oe.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=oe.getAccountProp("preferredAccountType",e);Ze.activeCaipAddress=void 0,oe.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ot.removeConnectorId(e)},setIsSwitchingNamespace(t){Ze.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ze.chains.forEach(s=>{Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ze.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=oe.state.chains.get(t))==null?void 0:e.accountState:yr.state},getNetworkData(t){var n;const e=t||Ze.activeChain;if(e)return(n=oe.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=oe.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ot.state.filterByNamespace;return(t?[Ze.chains.get(t)]:Array.from(Ze.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?oe.getRequestedCaipNetworks(t):oe.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ze.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ze.lastConnectedSIWECaipNetwork}},oe=Ql(hVe),fVe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Aoe=Ft.getBlockchainApiUrl(),Pa=ys({clientId:null,api:new nN({baseUrl:Aoe,clientId:null}),supportedChains:{http:[],ws:[]}}),sn={state:Pa,async get(t){const{st:e,sv:n}=sn.getSdkProperties(),r=fn.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Pa.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=fn.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Pa.supportedChains.http.length||await sn.getSupportedNetworks()}catch{return!1}return Pa.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await sn.get({path:"v1/supported-chains"});return Pa.supportedChains=t,t}catch{return Pa.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await sn.isNetworkSupported(e))return{avatar:"",name:""};const r=_t.getIdentityFromCacheForAddress(t);if(r)return r;const s=await sn.get({path:`/v1/identity/${t}`,params:{sender:oe.state.activeCaipAddress?Ft.getPlainAddress(oe.state.activeCaipAddress):void 0}});return _t.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await sn.isNetworkSupported((a=oe.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?sn.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await sn.isNetworkSupported((o=oe.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?sn.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await sn.isNetworkSupported((n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?sn.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await sn.isNetworkSupported((n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Pa.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:fn.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await sn.isNetworkSupported((r=oe.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?sn.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=sn.getSdkProperties();if(!await sn.isNetworkSupported((s=oe.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return sn.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await sn.isNetworkSupported((o=oe.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Pa.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ca.CONVERT_SLIPPAGE_TOLERANCE},projectId:fn.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=sn.getSdkProperties();if(!await sn.isNetworkSupported((o=oe.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return sn.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=sn.getSdkProperties();if(!await sn.isNetworkSupported((l=oe.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return yg.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=_t.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await sn.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return _t.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await sn.isNetworkSupported((n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?sn.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await sn.isNetworkSupported((n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?sn.get({path:`/v1/profile/reverse/${t}`,params:{sender:yr.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await sn.isNetworkSupported((n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?sn.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await sn.isNetworkSupported((i=oe.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Pa.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await sn.isNetworkSupported((a=oe.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Pa.api.post({path:"/v1/generators/onrampurl",params:{projectId:fn.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await sn.isNetworkSupported((e=oe.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await sn.get({path:"/v1/onramp/options"})}catch{return fVe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await sn.isNetworkSupported((s=oe.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Pa.api.post({path:"/v1/onramp/quote",params:{projectId:fn.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await sn.isNetworkSupported((n=oe.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?sn.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await sn.isNetworkSupported((s=oe.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Pa.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:fn.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Pa.clientId=t,Pa.api=new nN({baseUrl:Aoe,clientId:t})}},iM={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return wm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},U4={async getMyTokensWithBalance(t){const e=yr.state.address,n=oe.state.activeCaipNetwork,r=Ot.getConnectorId("eip155")===Ie.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=_t.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===Ie.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await sn.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=iM.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await kt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await kt.walletGetAssets({account:t,chainFilter:[s]});if(!iM.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>iM.createBalance(l,e.caipNetworkId));return _t.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},id=ys({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),pVe={state:id,replaceState(t){t&&Object.assign(id,eC(t))},subscribe(t){return oe.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return oe.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){oe.setAccountProp("status",t,e)},getCaipAddress(t){return oe.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ft.getPlainAddress(t):void 0;e===oe.state.activeChain&&(oe.state.activeCaipAddress=t),oe.setAccountProp("caipAddress",t,e),oe.setAccountProp("address",n,e)},setBalance(t,e,n){oe.setAccountProp("balance",t,n),oe.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){oe.setAccountProp("profileName",t,e)},setProfileImage(t,e){oe.setAccountProp("profileImage",t,e)},setUser(t,e){oe.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){oe.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){oe.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){oe.setAccountProp("currentTab",t,oe.state.activeChain)},setTokenBalance(t,e){t&&oe.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){oe.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=oe.getAccountProp("addressLabels",n)||new Map;r.set(t,e),oe.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=oe.getAccountProp("addressLabels",e)||new Map;n.delete(t),oe.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){oe.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){oe.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&oe.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){oe.setAccountProp("socialWindow",t?eC(t):void 0,e)},setFarcasterUrl(t,e){oe.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;id.balanceLoading=!0;const e=(i=oe.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=oe.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=oe.state.activeCaipAddress,s=r?Ft.getPlainAddress(r):void 0;if(id.lastRetry&&!Ft.isAllowedRetry(id.lastRetry,30*ca.ONE_SEC_MS))return id.balanceLoading=!1,[];try{if(s&&e&&n){const a=await U4.getMyTokensWithBalance();return yr.setTokenBalance(a,n),id.lastRetry=void 0,id.balanceLoading=!1,a}}catch(a){id.lastRetry=Date.now(),t==null||t(a),yg.showError("Token Balance Unavailable")}finally{id.balanceLoading=!1}return[]},resetAccount(t){oe.resetAccount(t)}},yr=Ql(pVe),gVe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=oe.state.activeCaipNetwork,r=dn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=yr.getCaipAddress(oe.state.activeChain),o=t.chainNamespace!==oe.state.activeChain,a=yr.getCaipAddress(t.chainNamespace),l=Ot.getConnectorId(oe.state.activeChain)===Ie.CONNECTOR_ID.AUTH,u=Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?dn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?dn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):dn.push("SwitchNetwork",{...r,network:t})}},Oa=ys({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),mVe={state:Oa,subscribe(t){return dc(Oa,()=>t(Oa))},subscribeKey(t,e){return Ea(Oa,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=oe.state.activeChain,r=e&&e!==n,s=(i=oe.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(kt.state.wcBasic?Zt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Zt.prefetch(),Ot.setFilterByNamespace(t==null?void 0:t.namespace),rs.setLoading(!0,e),e&&r){const a=((o=oe.getNetworkData(e))==null?void 0:o.caipNetwork)||oe.getRequestedCaipNetworks(e)[0];a&&gVe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=oe.state.noAdapters;fn.state.manualWCControl||a&&!s?Ft.isMobile()?dn.reset("AllWallets"):dn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?dn.reset(t.view,t.data):s?dn.reset("Account"):dn.reset("Connect")}Oa.open=!0,fv.set({open:!0}),Ps.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=fn.state.enableEmbedded,e=!!oe.state.activeCaipAddress;Oa.open&&Ps.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Oa.open=!1,dn.reset("Connect"),rs.clearLoading(),t?e?dn.replace("Account"):dn.push("Connect"):fv.set({open:!1}),kt.resetUri()},setLoading(t,e){e&&Oa.loadingNamespaceMap.set(e,t),Oa.loading=t,fv.set({loading:t})},clearLoading(){Oa.loadingNamespaceMap.clear(),Oa.loading=!1},shake(){Oa.shake||(Oa.shake=!0,setTimeout(()=>{Oa.shake=!1},500))}},rs=Ql(mVe),mq=2147483648,yVe={convertEVMChainIdToCoinType(t){if(t>=mq)throw new Error("Invalid chainId");return(mq|t)>>>0}},ll=ys({suggestions:[],loading:!1}),wVe={state:ll,subscribe(t){return dc(ll,()=>t(ll))},subscribeKey(t,e){return Ea(ll,t,e)},async resolveName(t){var e,n;try{return await sn.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await sn.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ll.loading=!0,ll.suggestions=[];const e=await sn.getEnsNameSuggestions(t);return ll.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ll.suggestions}catch(e){const n=ST.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ll.loading=!1}},async getNamesForAddress(t){try{if(!oe.state.activeCaipNetwork)return[];const n=_t.getEnsFromCacheForAddress(t);if(n)return n;const r=await sn.reverseLookupEnsName({address:t});return _t.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ST.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=oe.state.activeCaipNetwork,n=yr.state.address,r=Ot.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ll.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});dn.pushTransactionStack({onCancel(){dn.replace("RegisterAccountName")}});const i=await kt.signMessage(s);ll.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=yVe.convertEVMChainIdToCoinType(Number(o));await sn.registerEnsName({coinType:a,address:n,signature:i,message:s}),yr.setProfileName(t,e.chainNamespace),dn.replace("RegisterAccountNameSuccess")}catch(s){const i=ST.parseEnsApiError(s,`Error registering name ${t}`);throw dn.replace("RegisterAccountName"),new Error(i)}finally{ll.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ST=Ql(wVe);let Lm=null;const Np={getSIWX(){return fn.state.siwx},async initializeIfEnabled(){var i;const t=fn.state.siwx,e=oe.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(oe.checkIfSupportedNetwork(n))try{if(Lm&&await Lm,(await t.getSessions(`${n}:${r}`,s)).length)return;await rs.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=kt._getClient())==null?void 0:i.disconnect().catch(console.error)),dn.reset("Connect"),yg.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=fn.state.siwx,e=Ft.getPlainAddress(oe.getActiveCaipAddress()),n=oe.getActiveCaipNetwork(),r=kt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ot.getConnectorId(n.chainNamespace)===Ie.CONNECTOR_ID.AUTH&&dn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),oe.setLastConnectedSIWECaipNetwork(n),rs.close(),Ps.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!rs.state.open||dn.state.view==="ApproveTransaction")&&await rs.open({view:"SIWXSignMessage"}),yg.showError("Error signing message"),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=oe.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Ft.getPlainAddress(oe.getActiveCaipAddress())||""));s&&s.length>0?await oe.switchActiveNetwork(r):await kt.disconnect()}else await kt.disconnect()}else rs.close();rs.close(),Ps.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=oe.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ft.getPlainAddress(oe.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=fn.state.siwx,e=Ft.getPlainAddress(oe.getActiveCaipAddress()),n=oe.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=dn.state.view==="ApproveTransaction",r=dn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Np.getSIWX();if(!i||!s.includes(Ie.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=oe.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Np.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Lm)return Lm;const r=Np.getSIWX();return r?(Lm=r.addSession({data:t,message:e,signature:n}).finally(()=>{Lm=null}),Lm):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Np.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=oe.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(yg.showLoading("Authenticating...",{autoClose:!1}),yr.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Ps.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Np.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Np.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{yg.hide()}}return!0},getSIWXEventProperties(){var e;const t=oe.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=oe.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:rh(t)===yo.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Ac={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Ie.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Mc={ConnectorExplorerIds:{[Ie.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Ie.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Ie.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Ie.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Ie.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Ac.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Ac.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Ac.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Ac.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Ac.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Ac.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Ac.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Ac.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Ac.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Ac.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Ac.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Ie.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ie.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ie.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Ie.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Ie.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Ie.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Ie.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Ie.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Ie.CONNECTOR_ID.COINBASE]:"Coinbase",[Ie.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Ie.CONNECTOR_ID.LEDGER]:"Ledger",[Ie.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Ie.CONNECTOR_ID.INJECTED]:"INJECTED",[Ie.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Ie.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Ie.CONNECTOR_ID.AUTH]:"AUTH",[Ac.CONNECTOR_TYPE_AUTH]:"AUTH"}},Ja={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ac.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=oe.state.activeChain;return Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ot.getConnectorId(e)===Ie.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},bVe=new AbortController,lp={EmbeddedWalletAbortController:bVe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},vVe="rpc.walletconnect.org";function yq(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const oM=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],s_={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===vVe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Ie.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Ie.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return oM.includes(e)?yq(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Mc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>s_.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(ug(a.url,a.config))}),oM.includes(t.caipNetworkId)&&r.push(ug(yq(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(ug(a))}),FR(r)},extendWagmiTransports(t,e,n){if(oM.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return FR([n,ug(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Ie.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=_t.getActiveCaipNetworkId(),n=oe.getAllRequestedCaipNetworks(),r=Array.from(((c=oe.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},wq={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Xi={set(t,e){kd.isClient&&localStorage.setItem(`${vt.STORAGE_KEY}${t}`,e)},get(t){return kd.isClient?localStorage.getItem(`${vt.STORAGE_KEY}${t}`):null},delete(t,e){kd.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${vt.STORAGE_KEY}${t}`))}},Ix=30*1e3,kd={checkIfAllowedToTriggerEmail(){const t=Xi.get(vt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ix){const n=Math.ceil((Ix-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Xi.get(vt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ix)return Math.ceil((Ix-e)/1e3)}return 0},checkIfRequestExists(t){return yo.NOT_SAFE_RPC_METHODS.includes(t.method)||yo.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(wq.transactionHash))||(t==null?void 0:t.match(wq.signedMessage)))?vt.RPC_RESPONSE_TYPE_TX:vt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return yo.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},js=A.object({message:A.string()});function at(t){return A.literal(vt[t])}const zP=A.object({serializedMessage:A.string().optional(),accountAddress:A.string(),chainId:A.string(),notBefore:A.string().optional(),domain:A.string(),uri:A.string(),version:A.string(),nonce:A.string(),statement:A.string().optional(),resources:A.array(A.string()).optional(),requestId:A.string().optional(),issuedAt:A.string().optional(),expirationTime:A.string().optional()});A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const EVe=A.object({chainId:A.string().or(A.number()),rpcUrl:A.optional(A.string())}),CVe=A.object({email:A.string().email()}),_Ve=A.object({otp:A.string()}),AVe=A.object({uri:A.string(),preferredAccountType:A.optional(A.string()),chainId:A.optional(A.string().or(A.number())),siwxMessage:A.optional(zP),rpcUrl:A.optional(A.string())}),SVe=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string()),siwxMessage:A.optional(zP),rpcUrl:A.optional(A.string())}),IVe=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),NVe=A.object({email:A.string().email()}),xVe=A.object({otp:A.string()}),TVe=A.object({otp:A.string()}),RVe=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),kVe=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),PVe=A.object({type:A.string()}),OVe=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),DVe=A.object({url:A.string()}),MVe=A.object({userName:A.string()}),BVe=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([yo.ACCOUNT_TYPES.EOA,yo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string()),signature:A.string().optional(),message:A.string().optional(),siwxMessage:A.optional(zP)}),LVe=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),UVe=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([yo.ACCOUNT_TYPES.EOA,yo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string()),signature:A.string().optional(),message:A.string().optional(),siwxMessage:A.optional(zP)}),$Ve=A.object({uri:A.string()}),FVe=A.object({isConnected:A.boolean()}),jVe=A.object({chainId:A.string().or(A.number())}),WVe=A.object({chainId:A.string().or(A.number())}),zVe=A.object({newEmail:A.string().email()}),HVe=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const GVe=A.object({version:A.string().optional()}),qVe=A.object({type:A.string(),address:A.string()}),VVe=A.any(),KVe=A.object({method:A.literal("eth_accounts")}),YVe=A.object({method:A.literal("eth_blockNumber")}),QVe=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),JVe=A.object({method:A.literal("eth_chainId")}),ZVe=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),XVe=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),eKe=A.object({method:A.literal("eth_gasPrice")}),tKe=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),nKe=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),rKe=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),sKe=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),iKe=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),oKe=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),aKe=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),cKe=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),lKe=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),uKe=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),dKe=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),hKe=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),fKe=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),pKe=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),gKe=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),mKe=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),yKe=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),wKe=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),bKe=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),vKe=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),EKe=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),CKe=A.object({method:A.literal("eth_newBlockFilter")}),_Ke=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),AKe=A.object({method:A.literal("eth_newPendingTransactionFilter")}),SKe=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),IKe=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),NKe=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),bq=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),xKe=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),TKe=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),RKe=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),kKe=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),PKe=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),OKe=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),DKe=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),MKe=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),BKe=A.object({method:A.literal("wallet_getCapabilities"),params:A.array(A.string().or(A.number()).optional()).optional()}),LKe=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),UKe=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),$Ke=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),vq=A.object({token:A.string()}),ct=A.object({id:A.string().optional()}),P1={appEvent:ct.extend({type:at("APP_SWITCH_NETWORK"),payload:EVe}).or(ct.extend({type:at("APP_CONNECT_EMAIL"),payload:CVe})).or(ct.extend({type:at("APP_CONNECT_DEVICE")})).or(ct.extend({type:at("APP_CONNECT_OTP"),payload:_Ve})).or(ct.extend({type:at("APP_CONNECT_SOCIAL"),payload:AVe})).or(ct.extend({type:at("APP_GET_FARCASTER_URI")})).or(ct.extend({type:at("APP_CONNECT_FARCASTER")})).or(ct.extend({type:at("APP_GET_USER"),payload:A.optional(SVe)})).or(ct.extend({type:at("APP_GET_SOCIAL_REDIRECT_URI"),payload:IVe})).or(ct.extend({type:at("APP_SIGN_OUT")})).or(ct.extend({type:at("APP_IS_CONNECTED"),payload:A.optional(vq)})).or(ct.extend({type:at("APP_GET_CHAIN_ID")})).or(ct.extend({type:at("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ct.extend({type:at("APP_INIT_SMART_ACCOUNT")})).or(ct.extend({type:at("APP_SET_PREFERRED_ACCOUNT"),payload:PVe})).or(ct.extend({type:at("APP_RPC_REQUEST"),payload:bq.or($Ke).or(KVe).or(YVe).or(QVe).or(JVe).or(ZVe).or(XVe).or(eKe).or(tKe).or(nKe).or(rKe).or(sKe).or(iKe).or(oKe).or(aKe).or(cKe).or(lKe).or(uKe).or(dKe).or(hKe).or(fKe).or(pKe).or(gKe).or(mKe).or(yKe).or(wKe).or(bKe).or(vKe).or(EKe).or(CKe).or(_Ke).or(AKe).or(SKe).or(IKe).or(NKe).or(bq).or(xKe).or(TKe).or(RKe).or(kKe).or(PKe).or(OKe).or(MKe).or(DKe).or(BKe).or(LKe).or(UKe).and(A.object({chainId:A.string().or(A.number()).optional(),chainNamespace:A.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:A.string().optional()}))})).or(ct.extend({type:at("APP_UPDATE_EMAIL"),payload:NVe})).or(ct.extend({type:at("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:xVe})).or(ct.extend({type:at("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:TVe})).or(ct.extend({type:at("APP_SYNC_THEME"),payload:RVe})).or(ct.extend({type:at("APP_SYNC_DAPP_DATA"),payload:kVe})).or(ct.extend({type:at("APP_RELOAD")})).or(ct.extend({type:at("APP_RPC_ABORT")})),frameEvent:ct.extend({type:at("FRAME_SWITCH_NETWORK_ERROR"),payload:js}).or(ct.extend({type:at("FRAME_SWITCH_NETWORK_SUCCESS"),payload:WVe})).or(ct.extend({type:at("FRAME_CONNECT_EMAIL_SUCCESS"),payload:OVe})).or(ct.extend({type:at("FRAME_CONNECT_EMAIL_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:DVe})).or(ct.extend({type:at("FRAME_GET_FARCASTER_URI_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:MVe})).or(ct.extend({type:at("FRAME_CONNECT_FARCASTER_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_CONNECT_OTP_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_CONNECT_OTP_SUCCESS")})).or(ct.extend({type:at("FRAME_CONNECT_DEVICE_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ct.extend({type:at("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:BVe})).or(ct.extend({type:at("FRAME_CONNECT_SOCIAL_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_GET_USER_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_GET_USER_SUCCESS"),payload:UVe})).or(ct.extend({type:at("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:$Ve})).or(ct.extend({type:at("FRAME_SIGN_OUT_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_SIGN_OUT_SUCCESS")})).or(ct.extend({type:at("FRAME_IS_CONNECTED_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_IS_CONNECTED_SUCCESS"),payload:FVe})).or(ct.extend({type:at("FRAME_GET_CHAIN_ID_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_GET_CHAIN_ID_SUCCESS"),payload:jVe})).or(ct.extend({type:at("FRAME_RPC_REQUEST_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_RPC_REQUEST_SUCCESS"),payload:VVe})).or(ct.extend({type:at("FRAME_SESSION_UPDATE"),payload:vq})).or(ct.extend({type:at("FRAME_UPDATE_EMAIL_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_UPDATE_EMAIL_SUCCESS"),payload:LVe})).or(ct.extend({type:at("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ct.extend({type:at("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:zVe})).or(ct.extend({type:at("FRAME_SYNC_THEME_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_SYNC_THEME_SUCCESS")})).or(ct.extend({type:at("FRAME_SYNC_DAPP_DATA_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ct.extend({type:at("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:HVe})).or(ct.extend({type:at("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:qVe})).or(ct.extend({type:at("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_READY"),payload:GVe})).or(ct.extend({type:at("FRAME_RELOAD_ERROR"),payload:js})).or(ct.extend({type:at("FRAME_RELOAD_SUCCESS")}))};function aM(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function FKe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=Ie.BLOCKCHAIN_API_RPC_URL}){const i=new URL(Hqe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class jKe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=Ie.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!aM(vt.FRAME_EVENT_KEY,u))return;const d=P1.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}kd.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{kd.isClient&&window.addEventListener("message",({data:a})=>{if(!aM(vt.FRAME_EVENT_KEY,a))return;const c=P1.frameEvent.parse(a);o(c)})},onAppEvent:o=>{kd.isClient&&window.addEventListener("message",({data:a})=>{if(!aM(vt.APP_EVENT_KEY,a))return;const c=P1.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(kd.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");P1.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(kd.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");P1.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),kd.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=FKe({projectId:e,chainId:r,version:qqe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class WKe{constructor(e){var i;const n=hw({level:Gqe}),{logger:r,chunkLoggerController:s}=mP({opts:n});this.logger=vo(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class zKe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new WKe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new jKe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Xi.get(vt.EMAIL_LOGIN_USED_KEY)}getEmail(){return Xi.get(vt.EMAIL)}getUsername(){return Xi.get(vt.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:vt.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{kd.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:vt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:vt.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:vt.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:vt.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:vt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:vt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:vt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:vt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:vt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:vt.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:vt.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:vt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:vt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:vt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:vt.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:vt.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:vt.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:vt.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:vt.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:vt.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(yo.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:vt.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===vt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===vt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:yo.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{yo.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:vt.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[vt.APP_SYNC_DAPP_DATA,vt.APP_SYNC_THEME,vt.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[vt.APP_CONNECT_EMAIL,vt.APP_CONNECT_DEVICE,vt.APP_CONNECT_OTP,vt.APP_CONNECT_SOCIAL,vt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,y){var w,C,N;m.id===u&&((C=y==null?void 0:(w=y.logger).info)==null||C.call(w,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Xi.set(vt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Xi.set(vt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Xi.set(vt.EMAIL,e),Xi.set(vt.EMAIL_LOGIN_USED_KEY,"true"),Xi.delete(vt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Xi.delete(vt.EMAIL_LOGIN_USED_KEY),Xi.delete(vt.EMAIL),Xi.delete(vt.LAST_USED_CHAIN_KEY),Xi.delete(vt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Xi.set(vt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Xi.get(vt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Xi.set(vt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=mg.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class pv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return pv.instance||(pv.instance=new zKe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),pv.instance}}const HKe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},Eq={filterOutDuplicatesByRDNS(t){const e=fn.state.enableEIP6963?Ot.state.connectors:[],n=_t.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ft.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ot.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=_t.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ot.state,{featuredWalletIds:n}=fn.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=fn.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ot.state.connectors;if(n)return n;const{injected:s,announced:i}=IT.getConnectorsByType(r,Zt.state.recommended,Zt.state.featured),o=s.filter(IT.showConnector),a=i.filter(IT.showConnector);return o.length||a.length?["wallet","email","social"]:HKe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Zt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Zt.state.excludedWallets.some(r=>Ja.isLowerCaseMatch(r.name,t.name));return e||n}},IT={getConnectorsByType(t,e,n){const{customWallets:r}=fn.state,s=_t.getRecentWallets(),i=Eq.filterOutDuplicateWallets(e),o=Eq.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Zt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Zt.state.excludedWallets.some(i=>Ja.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ft.isMobile()||Ft.isMobile()&&!e&&!kt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(oe.state.chains.values()).some(n=>Ot.getConnectorId(n.namespace)===Ie.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=fn.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:fn.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ft.isMobile())return{accounts:[],chainId:void 0};if(t.id===Ie.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Ml`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Ml`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Ml`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const NT={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([NT.getAddresses(t),NT.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:NT.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Mc.NetworkImageIds[e.id]]}]})}},cb={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function rN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const Cq=rN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),_q=rN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});rN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});rN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});rN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const GKe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},u0={getMethodsByChainNamespace(t){return GKe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case Cq.caipNetworkId:u.chains.push(Cq.deprecatedCaipNetworkId);break;case _q.caipNetworkId:u.chains.push(_q.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ST.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=u0.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(u0.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>Ft.isCaipAddress(d)).map(d=>mg.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>mg.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};let qKe=class{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Ie.CHAIN.EVM:await this.syncEVMConnections(e);break;case Ie.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Ie.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Ie.CONNECTOR_ID.WALLET_CONNECT){const c=u0.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await IT.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==Ie.CONNECTOR_ID.AUTH&&a.id!==Ie.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Ie.CONNECTOR_ID.WALLET_CONNECT){const c=u0.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,m,y;if(a.id===Ie.CONNECTOR_ID.WALLET_CONNECT){const w=u0.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(C=>({address:C.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>Ft.createAccount(Ie.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:Ie.CHAIN.BITCOIN,publicKey:((h=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:Ie.CHAIN.BITCOIN,publicKey:((g=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Ja.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Ja.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Ja.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Ja.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Ja.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}},Soe=class{constructor({provider:e,namespace:n}){this.id=Ie.CONNECTOR_ID.WALLET_CONNECT,this.name=Mc.ConnectorNamesMap[Ie.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Mc.ConnectorImageIds[Ie.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=oe.getCaipNetworks.bind(oe),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=fn.state.universalProviderConfigOverride,s=u0.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Np.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:VKe})}};const VKe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],KKe=[Ie.CONNECTOR_ID.AUTH,Ie.CONNECTOR_ID.WALLET_CONNECT];let YKe=class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>oe.getCaipNetworks(n),this.getConnectorId=n=>Ot.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new qKe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:Ie.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Ie.CONNECTOR_ID.AUTH,type:"AUTH",name:Ie.CONNECTOR_NAMES.AUTH,provider:e,imageId:Mc.ConnectorImageIds[Ie.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Ja.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){yr.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=rh(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Soe);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Ft.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Ft.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Ft.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Ja.isLowerCaseMatch(this.getConnectorId(Ie.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Ft.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Ja.isLowerCaseMatch(this.getConnectorId(Ie.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?NT.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Ja.isLowerCaseMatch(this.getConnectorId(Ie.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(KKe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}};function QKe(t){let e=[],n,r;function s(a){return pk.parseEvmChainId(a)||1}function i(){var a;return n||(n=pv.getInstance({projectId:t.options.projectId,chainId:(a=oe.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Vm.open(lp.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Vm.open(lp.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Vm.open(lp.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:lp.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>oe.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const m=pk.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=m||y,!l)throw new Error("ChainId not found in provider")}const u=rh("eip155"),{address:d,chainId:h,accounts:f}=await Np.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:Ie.CHAIN.EVM});e=(f==null?void 0:f.map(m=>m.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:Ie.CONNECTOR_ID.AUTH,name:Ie.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:Ie.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=pv.getInstance({projectId:t.options.projectId,chainId:(c=oe.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:lp.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Vm.open(lp.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Vm.open(lp.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Vm.open(lp.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>oe.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=oe.state.activeChain===Ie.CHAIN.EVM;if(Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ot.getConnectorId(h)===Ie.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Jd(new Error("chain not found on connector."));const d=await this.getProvider(),h=rh("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Jd(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(of)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}$4.type="walletConnect";function $4(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:$4.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=oe.getCaipNetworks(),m=await this.getProvider();if(!m)throw new Ap;a||(a=this.onDisplayUri,m.on("display_uri",a));const y=await this.isChainsStale();m.session&&y&&await m.disconnect();const w=fn.state.universalProviderConfigOverride;if(!m.session||y){const M=u0.createNamespaces(g,w);await m.connect({optionalNamespaces:M,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(W=>Number(W.id)))}const C=await this.getAccounts(),N=await this.getChainId(),S=(p=(f=(h=m.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,P=S==null?void 0:S.some(M=>Number(M.split(":")[1])===N);let O=1;P?O=N:S!=null&&S[0]&&(O=Number(S[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),m.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const L=w==null?void 0:w.defaultChain;return m.setDefaultChain(L??`eip155:${O}`),{accounts:C,chainId:O}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new yi(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var m,y,w;const d=await this.getProvider();if(!((m=d==null?void 0:d.session)!=null&&m.namespaces))return[];const h=(w=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[Ie.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(C=>C.split(":")[2]))??[],p=new Set;return f.filter(C=>{const N=C==null?void 0:C.toLowerCase();return p.has(N)?!1:(p.add(N),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=_t.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const m=_t.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],w=y==null?void 0:y.find(C=>C.id===m);w&&w.chainNamespace===Ie.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,m,y,w;const d=(g=e.getCaipNetwork(Ie.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(y=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[Ie.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:w[0],p=oe.getCaipNetworks().find(C=>C.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,m,y,w;const f=await this.getProvider();if(!f)throw new Ap;const p=oe.getCaipNetworks().find(C=>C.id===h);if(!p)throw new Jd(new GA);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:It(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const C=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...C,h]),{...p,id:p.id}}catch(C){const N=C;if(/(?:user rejected)/iu.test(N.message))throw new yi(N);try{let S;d!=null&&d.blockExplorerUrls?S=d.blockExplorerUrls:S=(g=p.blockExplorers)!=null&&g.default.url?[(m=p.blockExplorers)==null?void 0:m.default.url]:[];const P=((w=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:w.http)||[],O={blockExplorerUrls:S,chainId:It(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:P};await f.request({method:"wallet_addEthereumChain",params:[O]});const L=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...L,h]),{...p,id:p.id}}catch(S){throw new yi(S)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>of(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(oe.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[Ie.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const O1=ys({pendingTransactions:0}),Aq={state:O1,subscribeKey(t,e){return Ea(O1,t,e)},increase(t){O1[t]+=1},decrease(t){O1[t]-=1},reset(t){O1[t]=0}};function JKe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function ZKe(t){if(Ft.isSafeApp()){const{safe:e}=await ro(async()=>{const{safe:n}=await import("./index-6M4scuoQ.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function XKe(t){try{const{coinbaseWallet:e}=await ro(async()=>{const{coinbaseWallet:n}=await import("./index-6M4scuoQ.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const eYe={enable:!1,pollingInterval:3e4};class tYe extends YKe{constructor(e){const n=s_.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=Ie.CHAIN.EVM,this.adapterType=Ie.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...eYe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===Ie.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ft.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=cv(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ft.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=cv(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===Ie.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=s_.getCaipNetworkId(s);i?n[s.id]=s_.extendWagmiTransports(s,e.projectId,i):n[s.id]=s_.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Z1e({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=O1e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),Aq.increase("pendingTransactions")}});const e=Aq.subscribeKey("pendingTransactions",n=>{var r;n>=Ie.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){pte(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),gte(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===Ie.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:_t.getConnectedSocialProvider(),username:_t.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await XKe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await ZKe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push($4(e,n)),e.enableEIP6963!==!1&&r.push(G2({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(QKe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Mc.ConnectorNamesMap[r.id]??r.name,imageId:Mc.ConnectorImageIds[r.id],type:Mc.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===Ie.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await R1e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=cv(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await x1e(this.wagmiConfig,s);const i=await T1e(this.wagmiConfig,s);return await yte(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(pk.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await wte(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await E1e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return rCe(e.value,e.decimals)}formatUnits(e){return wm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===Ie.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===Ie.CONNECTOR_ID.AUTH||e.id===Ie.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Mc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Mc.ConnectorNamesMap[e.id]??e.name,imageId:Mc.ConnectorImageIds[e.id],type:Mc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===Ie.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){mte(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=fu(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ft.isSafeApp()&&n===Ie.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await oT(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await oT(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await BL(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,m;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===Ie.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((w,C)=>Ja.isLowerCaseMatch(w,r)?-1:Ja.isLowerCaseMatch(C,r)?1:0);return(m=this.wagmiConfig)==null||m.setState(w=>({...w,connections:new Map(w.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await oT(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await ML(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=_t.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await A1e(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});_t.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=fu(this.wagmiConfig).find(i=>Ja.isLowerCaseMatch(i.connector.id,e.id));return await OL(this.wagmiConfig,{connector:n}),fn.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=fu(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await OL(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await BL(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=fu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=JKe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=fu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=fu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=fu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:Ie.CONNECTOR_ID.AUTH,type:"AUTH",name:Ie.CONNECTOR_NAMES.AUTH,provider:e,imageId:Mc.ConnectorImageIds[Ie.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=fu(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(oe.state.activeChain==="eip155")return;ML(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Soe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const nYe=Symbol(),Sq=Object.getPrototypeOf,k5=new WeakMap,rYe=t=>t&&(k5.has(t)?k5.get(t):Sq(t)===Object.prototype||Sq(t)===Array.prototype),sYe=t=>rYe(t)&&t[nYe]||null,Iq=(t,e=!0)=>{k5.set(t,e)},mk={},F4=t=>typeof t=="object"&&t!==null,iYe=t=>F4(t)&&!sN.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Ioe=(t,e)=>{const n=P5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Iq(r,!0),P5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(sN.has(i))Iq(i,!1);else if(am.has(i)){const[c,l]=am.get(i);a.value=Ioe(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},oYe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(Nq(l,o)||NS.has(o)&&Nq(l,NS.get(o))))return!0;n(i),F4(o)&&(o=sYe(o)||o);const u=!am.has(o)&&cYe(o)?ws(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),am=new WeakMap,sN=new WeakSet,P5=new WeakMap,i_=[1,1],NS=new WeakMap;let Nq=Object.is,aYe=(t,e)=>new Proxy(t,e),cYe=iYe,lYe=Ioe,uYe=oYe;function ws(t={}){if(!F4(t))throw new Error("object required");const e=NS.get(t);if(e)return e;let n=i_[0];const r=new Set,s=(m,y=++i_[0])=>{n!==y&&(n=y,r.forEach(w=>w(m,y)))};let i=i_[1];const o=(m=++i_[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const w=y[1](m);w>n&&(n=w)})),n),a=m=>(y,w)=>{const C=[...y];C[1]=[m,...C[1]],s(C,w)},c=new Map,l=(m,y)=>{const w=!sN.has(y)&&am.get(y);if(w){if((mk?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=w[2](a(m));c.set(m,[w,C])}else c.set(m,[w])}},u=m=>{var y;const w=c.get(m);w&&(c.delete(m),(y=w[1])==null||y.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,C],N)=>{if((mk?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const S=w[2](a(N));c.set(N,[w,S])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,C],N)=>{C&&(C(),c.set(N,[w]))})});let h=!0;const f=uYe(()=>h,l,u,s),p=aYe(t,f);NS.set(t,p);const g=[t,o,d];return am.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),h=!1,p}function ya(t,e,n){const r=am.get(t);(mk?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function xS(t){const e=am.get(t);(mk?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return lYe(n,r())}function G0(t){return sN.add(t),t}function dYe(){return{proxyStateMap:am,refSet:sN,snapCache:P5,versionHolder:i_,proxyCache:NS}}function Ca(t,e,n,r){let s=t[e];return ya(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:hYe,snapCache:fYe}=dYe(),Nx=t=>hYe.has(t);function pYe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=fYe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return Nx(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ws(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}const D1=ws({connection:null}),lb={state:D1,subscribeKey(t,e){return Ca(D1,t,e)},subscribe(t){return ya(D1,()=>t(D1))},setConnection(t){D1.connection=G0(t)}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ud=BigInt(0),Yo=BigInt(1),cM=BigInt(2),gYe=BigInt(8),mYe={zip215:!0};function yYe(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function wYe(t,e={}){const{Fp:n,Fn:r}=ste("edwards",t,e),{h:s,n:i}=t;xI(e,{},{uvRatio:"function"});const o=cM<<BigInt(r.BYTES*8)-Yo,a=g=>n.create(g),c=e.uvRatio||((g,m)=>{try{return{isValid:!0,value:n.sqrt(n.div(g,m))}}catch{return{isValid:!1,value:ud}}});if(!yYe(n,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function l(g,m,y=!1){const w=y?Yo:ud;return $b("coordinate "+g,m,w,o),m}function u(g){if(!(g instanceof f))throw new Error("ExtendedPoint expected")}const d=MR((g,m)=>{const{ex:y,ey:w,ez:C}=g,N=g.is0();m==null&&(m=N?gYe:n.inv(C));const S=a(y*m),P=a(w*m),O=a(C*m);if(N)return{x:ud,y:Yo};if(O!==Yo)throw new Error("invZ was invalid");return{x:S,y:P}}),h=MR(g=>{const{a:m,d:y}=t;if(g.is0())throw new Error("bad point: ZERO");const{ex:w,ey:C,ez:N,et:S}=g,P=a(w*w),O=a(C*C),L=a(N*N),M=a(L*L),W=a(P*m),F=a(L*a(W+O)),V=a(M+a(y*a(P*O)));if(F!==V)throw new Error("bad point: equation left != right (1)");const $=a(w*C),v=a(N*S);if($!==v)throw new Error("bad point: equation left != right (2)");return!0});class f{constructor(m,y,w,C){this.ex=l("x",m),this.ey=l("y",y),this.ez=l("z",w,!0),this.et=l("t",C),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof f)throw new Error("extended point not allowed");const{x:y,y:w}=m||{};return l("x",y),l("y",w),new f(y,w,Yo,a(y*w))}static normalizeZ(m){return Xee(f,"ez",m)}static msm(m,y){return rte(f,r,m,y)}_setWindowSize(m){this.precompute(m)}precompute(m=8,y=!0){return p.setWindowSize(this,m),y||this.multiply(cM),this}assertValidity(){h(this)}equals(m){u(m);const{ex:y,ey:w,ez:C}=this,{ex:N,ey:S,ez:P}=m,O=a(y*P),L=a(N*C),M=a(w*P),W=a(S*C);return O===L&&M===W}is0(){return this.equals(f.ZERO)}negate(){return new f(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:m}=t,{ex:y,ey:w,ez:C}=this,N=a(y*y),S=a(w*w),P=a(cM*a(C*C)),O=a(m*N),L=y+w,M=a(a(L*L)-N-S),W=O+S,F=W-P,V=O-S,$=a(M*F),v=a(W*V),E=a(M*V),_=a(F*W);return new f($,v,_,E)}add(m){u(m);const{a:y,d:w}=t,{ex:C,ey:N,ez:S,et:P}=this,{ex:O,ey:L,ez:M,et:W}=m,F=a(C*O),V=a(N*L),$=a(P*w*W),v=a(S*M),E=a((C+N)*(O+L)-F-V),_=v-$,R=v+$,x=a(V-y*F),B=a(E*_),j=a(R*x),U=a(E*x),I=a(_*R);return new f(B,j,I,U)}subtract(m){return this.add(m.negate())}multiply(m){const y=m;$b("scalar",y,Yo,i);const{p:w,f:C}=p.wNAFCached(this,y,f.normalizeZ);return f.normalizeZ([w,C])[0]}multiplyUnsafe(m,y=f.ZERO){const w=m;return $b("scalar",w,ud,i),w===ud?f.ZERO:this.is0()||w===Yo?this:p.wNAFCachedUnsafe(this,w,f.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return p.wNAFCachedUnsafe(this,i).is0()}toAffine(m){return d(this,m)}clearCofactor(){return s===Yo?this:this.multiplyUnsafe(s)}static fromBytes(m,y=!1){return Wl(m),this.fromHex(m,y)}static fromHex(m,y=!1){const{d:w,a:C}=t,N=n.BYTES;m=Zs("pointHex",m,N),x0("zip215",y);const S=m.slice(),P=m[N-1];S[N-1]=P&-129;const O=HA(S),L=y?o:n.ORDER;$b("pointHex.y",O,ud,L);const M=a(O*O),W=a(M-Yo),F=a(w*M-C);let{isValid:V,value:$}=c(W,F);if(!V)throw new Error("Point.fromHex: invalid y coordinate");const v=($&Yo)===Yo,E=(P&128)!==0;if(!y&&$===ud&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&($=a(-$)),f.fromAffine({x:$,y:O})}static fromPrivateScalar(m){return f.BASE.multiply(m)}toBytes(){const{x:m,y}=this.toAffine(),w=B2(y,n.BYTES);return w[w.length-1]|=m&Yo?128:0,w}toRawBytes(){return this.toBytes()}toHex(){return DE(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}f.BASE=new f(t.Gx,t.Gy,Yo,a(t.Gx*t.Gy)),f.ZERO=new f(ud,Yo,Yo,ud),f.Fp=n,f.Fn=r;const p=nte(f,r.BYTES*8);return f}function bYe(t,e){xI(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n,hash:r}=e,{BASE:s,Fp:i,Fn:o}=t,a=o.ORDER,c=e.randomBytes||GZ,l=e.adjustScalarBytes||(S=>S),u=e.domain||((S,P,O)=>{if(x0("phflag",O),P.length||O)throw new Error("Contexts/pre-hash are not supported");return S});function d(S){return o.create(S)}function h(S){return d(HA(S))}function f(S){const P=i.BYTES;S=Zs("private key",S,P);const O=Zs("hashed private key",r(S),2*P),L=l(O.slice(0,P)),M=O.slice(P,2*P),W=h(L);return{head:L,prefix:M,scalar:W}}function p(S){const{head:P,prefix:O,scalar:L}=f(S),M=s.multiply(L),W=M.toBytes();return{head:P,prefix:O,scalar:L,point:M,pointBytes:W}}function g(S){return p(S).pointBytes}function m(S=Uint8Array.of(),...P){const O=sf(...P);return h(r(u(O,Zs("context",S),!!n)))}function y(S,P,O={}){S=Zs("message",S),n&&(S=n(S));const{prefix:L,scalar:M,pointBytes:W}=p(P),F=m(O.context,L,S),V=s.multiply(F).toBytes(),$=m(O.context,V,W,S),v=d(F+$*M);$b("signature.s",v,ud,a);const E=i.BYTES,_=sf(V,B2(v,E));return Zs("result",_,E*2)}const w=mYe;function C(S,P,O,L=w){const{context:M,zip215:W}=L,F=i.BYTES;S=Zs("signature",S,2*F),P=Zs("message",P),O=Zs("publicKey",O,F),W!==void 0&&x0("zip215",W),n&&(P=n(P));const V=HA(S.slice(F,2*F));let $,v,E;try{$=t.fromHex(O,W),v=t.fromHex(S.slice(0,F),W),E=s.multiplyUnsafe(V)}catch{return!1}if(!W&&$.isSmallOrder())return!1;const _=m(M,v.toBytes(),$.toBytes(),P);return v.add($.multiplyUnsafe(_)).subtract(E).clearCofactor().is0()}return s.precompute(8),{getPublicKey:g,sign:y,verify:C,utils:{getExtendedPublicKey:p,randomPrivateKey:()=>c(i.BYTES),precompute(S=8,P=t.BASE){return P.precompute(S,!1)}},Point:t}}function vYe(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=RC(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:i}}function EYe(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function CYe(t){const{CURVE:e,curveOpts:n,eddsaOpts:r}=vYe(t),s=wYe(e,n),i=bYe(s,r);return EYe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const _Ye=BigInt(1),xq=BigInt(2);BigInt(3);const AYe=BigInt(5),SYe=BigInt(8),HP={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:SYe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function IYe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=HP.p,a=t*t%i*t%i,c=zs(a,xq,i)*a%i,l=zs(c,_Ye,i)*t%i,u=zs(l,AYe,i)*l%i,d=zs(u,e,i)*u%i,h=zs(d,n,i)*d%i,f=zs(h,r,i)*h%i,p=zs(f,s,i)*f%i,g=zs(p,s,i)*f%i,m=zs(g,e,i)*u%i;return{pow_p_5_8:zs(m,xq,i)*t%i,b2:a}}function NYe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Tq=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function xYe(t,e){const n=HP.p,r=Xs(e*e*e,n),s=Xs(r*r*e,n),i=IYe(t*s).pow_p_5_8;let o=Xs(t*r*i,n);const a=Xs(e*o*o,n),c=o,l=Xs(o*Tq,n),u=a===t,d=a===Xs(-t,n),h=a===Xs(-t*Tq,n);return u&&(o=c),(d||h)&&(o=l),RCe(o,n)&&(o=Xs(-o,n)),{isValid:u||d,value:o}}const TYe=RC(HP.p,void 0,!0),RYe={...HP,Fp:TYe,hash:Swe,adjustScalarBytes:NYe,uvRatio:xYe},iN=CYe(RYe);var j4={exports:{}};const kYe={},PYe=Object.freeze(Object.defineProperty({__proto__:null,default:kYe},Symbol.toStringTag,{value:"Module"})),OYe=oI(PYe);j4.exports;(function(t){(function(e,n){function r($,v){if(!$)throw new Error(v||"Assertion failed")}function s($,v){$.super_=v;var E=function(){};E.prototype=v.prototype,$.prototype=new E,$.prototype.constructor=$}function i($,v,E){if(i.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((v==="le"||v==="be")&&(E=v,v=10),this._init($||0,v||10,E||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=OYe.Buffer}catch{}i.isBN=function(v){return v instanceof i?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===i.wordSize&&Array.isArray(v.words)},i.max=function(v,E){return v.cmp(E)>0?v:E},i.min=function(v,E){return v.cmp(E)<0?v:E},i.prototype._init=function(v,E,_){if(typeof v=="number")return this._initNumber(v,E,_);if(typeof v=="object")return this._initArray(v,E,_);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),v=v.toString().replace(/\s+/g,"");var R=0;v[0]==="-"&&(R++,this.negative=1),R<v.length&&(E===16?this._parseHex(v,R,_):(this._parseBase(v,E,R),_==="le"&&this._initArray(this.toArray(),E,_)))},i.prototype._initNumber=function(v,E,_){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),E,_)},i.prototype._initArray=function(v,E,_){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var x,B,j=0;if(_==="be")for(R=v.length-1,x=0;R>=0;R-=3)B=v[R]|v[R-1]<<8|v[R-2]<<16,this.words[x]|=B<<j&67108863,this.words[x+1]=B>>>26-j&67108863,j+=24,j>=26&&(j-=26,x++);else if(_==="le")for(R=0,x=0;R<v.length;R+=3)B=v[R]|v[R+1]<<8|v[R+2]<<16,this.words[x]|=B<<j&67108863,this.words[x+1]=B>>>26-j&67108863,j+=24,j>=26&&(j-=26,x++);return this._strip()};function a($,v){var E=$.charCodeAt(v);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;r(!1,"Invalid character in "+$)}function c($,v,E){var _=a($,E);return E-1>=v&&(_|=a($,E-1)<<4),_}i.prototype._parseHex=function(v,E,_){this.length=Math.ceil((v.length-E)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var x=0,B=0,j;if(_==="be")for(R=v.length-1;R>=E;R-=2)j=c(v,E,R)<<x,this.words[B]|=j&67108863,x>=18?(x-=18,B+=1,this.words[B]|=j>>>26):x+=8;else{var U=v.length-E;for(R=U%2===0?E+1:E;R<v.length;R+=2)j=c(v,E,R)<<x,this.words[B]|=j&67108863,x>=18?(x-=18,B+=1,this.words[B]|=j>>>26):x+=8}this._strip()};function l($,v,E,_){for(var R=0,x=0,B=Math.min($.length,E),j=v;j<B;j++){var U=$.charCodeAt(j)-48;R*=_,U>=49?x=U-49+10:U>=17?x=U-17+10:x=U,r(U>=0&&x<_,"Invalid character"),R+=x}return R}i.prototype._parseBase=function(v,E,_){this.words=[0],this.length=1;for(var R=0,x=1;x<=67108863;x*=E)R++;R--,x=x/E|0;for(var B=v.length-_,j=B%R,U=Math.min(B,B-j)+_,I=0,H=_;H<U;H+=R)I=l(v,H,H+R,E),this.imuln(x),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(j!==0){var re=1;for(I=l(v,H,v.length,E),H=0;H<j;H++)re*=E;this.imuln(re),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},i.prototype.copy=function(v){v.words=new Array(this.length);for(var E=0;E<this.length;E++)v.words[E]=this.words[E];v.length=this.length,v.negative=this.negative,v.red=this.red};function u($,v){$.words=v.words,$.length=v.length,$.negative=v.negative,$.red=v.red}if(i.prototype._move=function(v){u(v,this)},i.prototype.clone=function(){var v=new i(null);return this.copy(v),v},i.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(v,E){v=v||10,E=E|0||1;var _;if(v===16||v==="hex"){_="";for(var R=0,x=0,B=0;B<this.length;B++){var j=this.words[B],U=((j<<R|x)&16777215).toString(16);x=j>>>24-R&16777215,R+=2,R>=26&&(R-=26,B--),x!==0||B!==this.length-1?_=h[6-U.length]+U+_:_=U+_}for(x!==0&&(_=x.toString(16)+_);_.length%E!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(v===(v|0)&&v>=2&&v<=36){var I=f[v],H=p[v];_="";var re=this.clone();for(re.negative=0;!re.isZero();){var ne=re.modrn(H).toString(v);re=re.idivn(H),re.isZero()?_=ne+_:_=h[I-ne.length]+ne+_}for(this.isZero()&&(_="0"+_);_.length%E!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(v,E){return this.toArrayLike(o,v,E)}),i.prototype.toArray=function(v,E){return this.toArrayLike(Array,v,E)};var g=function(v,E){return v.allocUnsafe?v.allocUnsafe(E):new v(E)};i.prototype.toArrayLike=function(v,E,_){this._strip();var R=this.byteLength(),x=_||Math.max(1,R);r(R<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var B=g(v,x),j=E==="le"?"LE":"BE";return this["_toArrayLike"+j](B,R),B},i.prototype._toArrayLikeLE=function(v,E){for(var _=0,R=0,x=0,B=0;x<this.length;x++){var j=this.words[x]<<B|R;v[_++]=j&255,_<v.length&&(v[_++]=j>>8&255),_<v.length&&(v[_++]=j>>16&255),B===6?(_<v.length&&(v[_++]=j>>24&255),R=0,B=0):(R=j>>>24,B+=2)}if(_<v.length)for(v[_++]=R;_<v.length;)v[_++]=0},i.prototype._toArrayLikeBE=function(v,E){for(var _=v.length-1,R=0,x=0,B=0;x<this.length;x++){var j=this.words[x]<<B|R;v[_--]=j&255,_>=0&&(v[_--]=j>>8&255),_>=0&&(v[_--]=j>>16&255),B===6?(_>=0&&(v[_--]=j>>24&255),R=0,B=0):(R=j>>>24,B+=2)}if(_>=0)for(v[_--]=R;_>=0;)v[_--]=0},Math.clz32?i.prototype._countBits=function(v){return 32-Math.clz32(v)}:i.prototype._countBits=function(v){var E=v,_=0;return E>=4096&&(_+=13,E>>>=13),E>=64&&(_+=7,E>>>=7),E>=8&&(_+=4,E>>>=4),E>=2&&(_+=2,E>>>=2),_+E},i.prototype._zeroBits=function(v){if(v===0)return 26;var E=v,_=0;return E&8191||(_+=13,E>>>=13),E&127||(_+=7,E>>>=7),E&15||(_+=4,E>>>=4),E&3||(_+=2,E>>>=2),E&1||_++,_},i.prototype.bitLength=function(){var v=this.words[this.length-1],E=this._countBits(v);return(this.length-1)*26+E};function m($){for(var v=new Array($.bitLength()),E=0;E<v.length;E++){var _=E/26|0,R=E%26;v[E]=$.words[_]>>>R&1}return v}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,E=0;E<this.length;E++){var _=this._zeroBits(this.words[E]);if(v+=_,_!==26)break}return v},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},i.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var E=0;E<v.length;E++)this.words[E]=this.words[E]|v.words[E];return this._strip()},i.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},i.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},i.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},i.prototype.iuand=function(v){var E;this.length>v.length?E=v:E=this;for(var _=0;_<E.length;_++)this.words[_]=this.words[_]&v.words[_];return this.length=E.length,this._strip()},i.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},i.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},i.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},i.prototype.iuxor=function(v){var E,_;this.length>v.length?(E=this,_=v):(E=v,_=this);for(var R=0;R<_.length;R++)this.words[R]=E.words[R]^_.words[R];if(this!==E)for(;R<E.length;R++)this.words[R]=E.words[R];return this.length=E.length,this._strip()},i.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},i.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},i.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},i.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var E=Math.ceil(v/26)|0,_=v%26;this._expand(E),_>0&&E--;for(var R=0;R<E;R++)this.words[R]=~this.words[R]&67108863;return _>0&&(this.words[R]=~this.words[R]&67108863>>26-_),this._strip()},i.prototype.notn=function(v){return this.clone().inotn(v)},i.prototype.setn=function(v,E){r(typeof v=="number"&&v>=0);var _=v/26|0,R=v%26;return this._expand(_+1),E?this.words[_]=this.words[_]|1<<R:this.words[_]=this.words[_]&~(1<<R),this._strip()},i.prototype.iadd=function(v){var E;if(this.negative!==0&&v.negative===0)return this.negative=0,E=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,E=this.isub(v),v.negative=1,E._normSign();var _,R;this.length>v.length?(_=this,R=v):(_=v,R=this);for(var x=0,B=0;B<R.length;B++)E=(_.words[B]|0)+(R.words[B]|0)+x,this.words[B]=E&67108863,x=E>>>26;for(;x!==0&&B<_.length;B++)E=(_.words[B]|0)+x,this.words[B]=E&67108863,x=E>>>26;if(this.length=_.length,x!==0)this.words[this.length]=x,this.length++;else if(_!==this)for(;B<_.length;B++)this.words[B]=_.words[B];return this},i.prototype.add=function(v){var E;return v.negative!==0&&this.negative===0?(v.negative=0,E=this.sub(v),v.negative^=1,E):v.negative===0&&this.negative!==0?(this.negative=0,E=v.sub(this),this.negative=1,E):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},i.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var E=this.iadd(v);return v.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var _=this.cmp(v);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,x;_>0?(R=this,x=v):(R=v,x=this);for(var B=0,j=0;j<x.length;j++)E=(R.words[j]|0)-(x.words[j]|0)+B,B=E>>26,this.words[j]=E&67108863;for(;B!==0&&j<R.length;j++)E=(R.words[j]|0)+B,B=E>>26,this.words[j]=E&67108863;if(B===0&&j<R.length&&R!==this)for(;j<R.length;j++)this.words[j]=R.words[j];return this.length=Math.max(this.length,j),R!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(v){return this.clone().isub(v)};function y($,v,E){E.negative=v.negative^$.negative;var _=$.length+v.length|0;E.length=_,_=_-1|0;var R=$.words[0]|0,x=v.words[0]|0,B=R*x,j=B&67108863,U=B/67108864|0;E.words[0]=j;for(var I=1;I<_;I++){for(var H=U>>>26,re=U&67108863,ne=Math.min(I,v.length-1),ge=Math.max(0,I-$.length+1);ge<=ne;ge++){var te=I-ge|0;R=$.words[te]|0,x=v.words[ge]|0,B=R*x+re,H+=B/67108864|0,re=B&67108863}E.words[I]=re|0,U=H|0}return U!==0?E.words[I]=U|0:E.length--,E._strip()}var w=function(v,E,_){var R=v.words,x=E.words,B=_.words,j=0,U,I,H,re=R[0]|0,ne=re&8191,ge=re>>>13,te=R[1]|0,he=te&8191,me=te>>>13,_e=R[2]|0,Ce=_e&8191,Be=_e>>>13,Te=R[3]|0,xe=Te&8191,je=Te>>>13,Ue=R[4]|0,rt=Ue&8191,Rt=Ue>>>13,qe=R[5]|0,pt=qe&8191,nn=qe>>>13,gn=R[6]|0,Fn=gn&8191,Qn=gn>>>13,fr=R[7]|0,Tn=fr&8191,z=fr>>>13,T=R[8]|0,D=T&8191,K=T>>>13,X=R[9]|0,ue=X&8191,ve=X>>>13,ln=x[0]|0,Dt=ln&8191,Gt=ln>>>13,Jn=x[1]|0,Je=Jn&8191,bs=Jn>>>13,Ff=x[2]|0,pr=Ff&8191,Qr=Ff>>>13,jf=x[3]|0,Pr=jf&8191,Wr=jf>>>13,Em=x[4]|0,zr=Em&8191,cs=Em>>>13,Cw=x[5]|0,Or=Cw&8191,nr=Cw>>>13,ai=x[6]|0,vs=ai&8191,Es=ai>>>13,_w=x[7]|0,jn=_w&8191,ls=_w>>>13,qo=x[8]|0,Vn=qo&8191,us=qo>>>13,Aw=x[9]|0,Hr=Aw&8191,ds=Aw>>>13;_.negative=v.negative^E.negative,_.length=19,U=Math.imul(ne,Dt),I=Math.imul(ne,Gt),I=I+Math.imul(ge,Dt)|0,H=Math.imul(ge,Gt);var Wf=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Wf>>>26)|0,Wf&=67108863,U=Math.imul(he,Dt),I=Math.imul(he,Gt),I=I+Math.imul(me,Dt)|0,H=Math.imul(me,Gt),U=U+Math.imul(ne,Je)|0,I=I+Math.imul(ne,bs)|0,I=I+Math.imul(ge,Je)|0,H=H+Math.imul(ge,bs)|0;var Zl=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Zl>>>26)|0,Zl&=67108863,U=Math.imul(Ce,Dt),I=Math.imul(Ce,Gt),I=I+Math.imul(Be,Dt)|0,H=Math.imul(Be,Gt),U=U+Math.imul(he,Je)|0,I=I+Math.imul(he,bs)|0,I=I+Math.imul(me,Je)|0,H=H+Math.imul(me,bs)|0,U=U+Math.imul(ne,pr)|0,I=I+Math.imul(ne,Qr)|0,I=I+Math.imul(ge,pr)|0,H=H+Math.imul(ge,Qr)|0;var Cm=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Cm>>>26)|0,Cm&=67108863,U=Math.imul(xe,Dt),I=Math.imul(xe,Gt),I=I+Math.imul(je,Dt)|0,H=Math.imul(je,Gt),U=U+Math.imul(Ce,Je)|0,I=I+Math.imul(Ce,bs)|0,I=I+Math.imul(Be,Je)|0,H=H+Math.imul(Be,bs)|0,U=U+Math.imul(he,pr)|0,I=I+Math.imul(he,Qr)|0,I=I+Math.imul(me,pr)|0,H=H+Math.imul(me,Qr)|0,U=U+Math.imul(ne,Pr)|0,I=I+Math.imul(ne,Wr)|0,I=I+Math.imul(ge,Pr)|0,H=H+Math.imul(ge,Wr)|0;var zf=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(zf>>>26)|0,zf&=67108863,U=Math.imul(rt,Dt),I=Math.imul(rt,Gt),I=I+Math.imul(Rt,Dt)|0,H=Math.imul(Rt,Gt),U=U+Math.imul(xe,Je)|0,I=I+Math.imul(xe,bs)|0,I=I+Math.imul(je,Je)|0,H=H+Math.imul(je,bs)|0,U=U+Math.imul(Ce,pr)|0,I=I+Math.imul(Ce,Qr)|0,I=I+Math.imul(Be,pr)|0,H=H+Math.imul(Be,Qr)|0,U=U+Math.imul(he,Pr)|0,I=I+Math.imul(he,Wr)|0,I=I+Math.imul(me,Pr)|0,H=H+Math.imul(me,Wr)|0,U=U+Math.imul(ne,zr)|0,I=I+Math.imul(ne,cs)|0,I=I+Math.imul(ge,zr)|0,H=H+Math.imul(ge,cs)|0;var _m=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(_m>>>26)|0,_m&=67108863,U=Math.imul(pt,Dt),I=Math.imul(pt,Gt),I=I+Math.imul(nn,Dt)|0,H=Math.imul(nn,Gt),U=U+Math.imul(rt,Je)|0,I=I+Math.imul(rt,bs)|0,I=I+Math.imul(Rt,Je)|0,H=H+Math.imul(Rt,bs)|0,U=U+Math.imul(xe,pr)|0,I=I+Math.imul(xe,Qr)|0,I=I+Math.imul(je,pr)|0,H=H+Math.imul(je,Qr)|0,U=U+Math.imul(Ce,Pr)|0,I=I+Math.imul(Ce,Wr)|0,I=I+Math.imul(Be,Pr)|0,H=H+Math.imul(Be,Wr)|0,U=U+Math.imul(he,zr)|0,I=I+Math.imul(he,cs)|0,I=I+Math.imul(me,zr)|0,H=H+Math.imul(me,cs)|0,U=U+Math.imul(ne,Or)|0,I=I+Math.imul(ne,nr)|0,I=I+Math.imul(ge,Or)|0,H=H+Math.imul(ge,nr)|0;var Sw=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Sw>>>26)|0,Sw&=67108863,U=Math.imul(Fn,Dt),I=Math.imul(Fn,Gt),I=I+Math.imul(Qn,Dt)|0,H=Math.imul(Qn,Gt),U=U+Math.imul(pt,Je)|0,I=I+Math.imul(pt,bs)|0,I=I+Math.imul(nn,Je)|0,H=H+Math.imul(nn,bs)|0,U=U+Math.imul(rt,pr)|0,I=I+Math.imul(rt,Qr)|0,I=I+Math.imul(Rt,pr)|0,H=H+Math.imul(Rt,Qr)|0,U=U+Math.imul(xe,Pr)|0,I=I+Math.imul(xe,Wr)|0,I=I+Math.imul(je,Pr)|0,H=H+Math.imul(je,Wr)|0,U=U+Math.imul(Ce,zr)|0,I=I+Math.imul(Ce,cs)|0,I=I+Math.imul(Be,zr)|0,H=H+Math.imul(Be,cs)|0,U=U+Math.imul(he,Or)|0,I=I+Math.imul(he,nr)|0,I=I+Math.imul(me,Or)|0,H=H+Math.imul(me,nr)|0,U=U+Math.imul(ne,vs)|0,I=I+Math.imul(ne,Es)|0,I=I+Math.imul(ge,vs)|0,H=H+Math.imul(ge,Es)|0;var Iw=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Iw>>>26)|0,Iw&=67108863,U=Math.imul(Tn,Dt),I=Math.imul(Tn,Gt),I=I+Math.imul(z,Dt)|0,H=Math.imul(z,Gt),U=U+Math.imul(Fn,Je)|0,I=I+Math.imul(Fn,bs)|0,I=I+Math.imul(Qn,Je)|0,H=H+Math.imul(Qn,bs)|0,U=U+Math.imul(pt,pr)|0,I=I+Math.imul(pt,Qr)|0,I=I+Math.imul(nn,pr)|0,H=H+Math.imul(nn,Qr)|0,U=U+Math.imul(rt,Pr)|0,I=I+Math.imul(rt,Wr)|0,I=I+Math.imul(Rt,Pr)|0,H=H+Math.imul(Rt,Wr)|0,U=U+Math.imul(xe,zr)|0,I=I+Math.imul(xe,cs)|0,I=I+Math.imul(je,zr)|0,H=H+Math.imul(je,cs)|0,U=U+Math.imul(Ce,Or)|0,I=I+Math.imul(Ce,nr)|0,I=I+Math.imul(Be,Or)|0,H=H+Math.imul(Be,nr)|0,U=U+Math.imul(he,vs)|0,I=I+Math.imul(he,Es)|0,I=I+Math.imul(me,vs)|0,H=H+Math.imul(me,Es)|0,U=U+Math.imul(ne,jn)|0,I=I+Math.imul(ne,ls)|0,I=I+Math.imul(ge,jn)|0,H=H+Math.imul(ge,ls)|0;var Nw=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Nw>>>26)|0,Nw&=67108863,U=Math.imul(D,Dt),I=Math.imul(D,Gt),I=I+Math.imul(K,Dt)|0,H=Math.imul(K,Gt),U=U+Math.imul(Tn,Je)|0,I=I+Math.imul(Tn,bs)|0,I=I+Math.imul(z,Je)|0,H=H+Math.imul(z,bs)|0,U=U+Math.imul(Fn,pr)|0,I=I+Math.imul(Fn,Qr)|0,I=I+Math.imul(Qn,pr)|0,H=H+Math.imul(Qn,Qr)|0,U=U+Math.imul(pt,Pr)|0,I=I+Math.imul(pt,Wr)|0,I=I+Math.imul(nn,Pr)|0,H=H+Math.imul(nn,Wr)|0,U=U+Math.imul(rt,zr)|0,I=I+Math.imul(rt,cs)|0,I=I+Math.imul(Rt,zr)|0,H=H+Math.imul(Rt,cs)|0,U=U+Math.imul(xe,Or)|0,I=I+Math.imul(xe,nr)|0,I=I+Math.imul(je,Or)|0,H=H+Math.imul(je,nr)|0,U=U+Math.imul(Ce,vs)|0,I=I+Math.imul(Ce,Es)|0,I=I+Math.imul(Be,vs)|0,H=H+Math.imul(Be,Es)|0,U=U+Math.imul(he,jn)|0,I=I+Math.imul(he,ls)|0,I=I+Math.imul(me,jn)|0,H=H+Math.imul(me,ls)|0,U=U+Math.imul(ne,Vn)|0,I=I+Math.imul(ne,us)|0,I=I+Math.imul(ge,Vn)|0,H=H+Math.imul(ge,us)|0;var Am=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Am>>>26)|0,Am&=67108863,U=Math.imul(ue,Dt),I=Math.imul(ue,Gt),I=I+Math.imul(ve,Dt)|0,H=Math.imul(ve,Gt),U=U+Math.imul(D,Je)|0,I=I+Math.imul(D,bs)|0,I=I+Math.imul(K,Je)|0,H=H+Math.imul(K,bs)|0,U=U+Math.imul(Tn,pr)|0,I=I+Math.imul(Tn,Qr)|0,I=I+Math.imul(z,pr)|0,H=H+Math.imul(z,Qr)|0,U=U+Math.imul(Fn,Pr)|0,I=I+Math.imul(Fn,Wr)|0,I=I+Math.imul(Qn,Pr)|0,H=H+Math.imul(Qn,Wr)|0,U=U+Math.imul(pt,zr)|0,I=I+Math.imul(pt,cs)|0,I=I+Math.imul(nn,zr)|0,H=H+Math.imul(nn,cs)|0,U=U+Math.imul(rt,Or)|0,I=I+Math.imul(rt,nr)|0,I=I+Math.imul(Rt,Or)|0,H=H+Math.imul(Rt,nr)|0,U=U+Math.imul(xe,vs)|0,I=I+Math.imul(xe,Es)|0,I=I+Math.imul(je,vs)|0,H=H+Math.imul(je,Es)|0,U=U+Math.imul(Ce,jn)|0,I=I+Math.imul(Ce,ls)|0,I=I+Math.imul(Be,jn)|0,H=H+Math.imul(Be,ls)|0,U=U+Math.imul(he,Vn)|0,I=I+Math.imul(he,us)|0,I=I+Math.imul(me,Vn)|0,H=H+Math.imul(me,us)|0,U=U+Math.imul(ne,Hr)|0,I=I+Math.imul(ne,ds)|0,I=I+Math.imul(ge,Hr)|0,H=H+Math.imul(ge,ds)|0;var mc=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(mc>>>26)|0,mc&=67108863,U=Math.imul(ue,Je),I=Math.imul(ue,bs),I=I+Math.imul(ve,Je)|0,H=Math.imul(ve,bs),U=U+Math.imul(D,pr)|0,I=I+Math.imul(D,Qr)|0,I=I+Math.imul(K,pr)|0,H=H+Math.imul(K,Qr)|0,U=U+Math.imul(Tn,Pr)|0,I=I+Math.imul(Tn,Wr)|0,I=I+Math.imul(z,Pr)|0,H=H+Math.imul(z,Wr)|0,U=U+Math.imul(Fn,zr)|0,I=I+Math.imul(Fn,cs)|0,I=I+Math.imul(Qn,zr)|0,H=H+Math.imul(Qn,cs)|0,U=U+Math.imul(pt,Or)|0,I=I+Math.imul(pt,nr)|0,I=I+Math.imul(nn,Or)|0,H=H+Math.imul(nn,nr)|0,U=U+Math.imul(rt,vs)|0,I=I+Math.imul(rt,Es)|0,I=I+Math.imul(Rt,vs)|0,H=H+Math.imul(Rt,Es)|0,U=U+Math.imul(xe,jn)|0,I=I+Math.imul(xe,ls)|0,I=I+Math.imul(je,jn)|0,H=H+Math.imul(je,ls)|0,U=U+Math.imul(Ce,Vn)|0,I=I+Math.imul(Ce,us)|0,I=I+Math.imul(Be,Vn)|0,H=H+Math.imul(Be,us)|0,U=U+Math.imul(he,Hr)|0,I=I+Math.imul(he,ds)|0,I=I+Math.imul(me,Hr)|0,H=H+Math.imul(me,ds)|0;var Sm=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Sm>>>26)|0,Sm&=67108863,U=Math.imul(ue,pr),I=Math.imul(ue,Qr),I=I+Math.imul(ve,pr)|0,H=Math.imul(ve,Qr),U=U+Math.imul(D,Pr)|0,I=I+Math.imul(D,Wr)|0,I=I+Math.imul(K,Pr)|0,H=H+Math.imul(K,Wr)|0,U=U+Math.imul(Tn,zr)|0,I=I+Math.imul(Tn,cs)|0,I=I+Math.imul(z,zr)|0,H=H+Math.imul(z,cs)|0,U=U+Math.imul(Fn,Or)|0,I=I+Math.imul(Fn,nr)|0,I=I+Math.imul(Qn,Or)|0,H=H+Math.imul(Qn,nr)|0,U=U+Math.imul(pt,vs)|0,I=I+Math.imul(pt,Es)|0,I=I+Math.imul(nn,vs)|0,H=H+Math.imul(nn,Es)|0,U=U+Math.imul(rt,jn)|0,I=I+Math.imul(rt,ls)|0,I=I+Math.imul(Rt,jn)|0,H=H+Math.imul(Rt,ls)|0,U=U+Math.imul(xe,Vn)|0,I=I+Math.imul(xe,us)|0,I=I+Math.imul(je,Vn)|0,H=H+Math.imul(je,us)|0,U=U+Math.imul(Ce,Hr)|0,I=I+Math.imul(Ce,ds)|0,I=I+Math.imul(Be,Hr)|0,H=H+Math.imul(Be,ds)|0;var Im=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Im>>>26)|0,Im&=67108863,U=Math.imul(ue,Pr),I=Math.imul(ue,Wr),I=I+Math.imul(ve,Pr)|0,H=Math.imul(ve,Wr),U=U+Math.imul(D,zr)|0,I=I+Math.imul(D,cs)|0,I=I+Math.imul(K,zr)|0,H=H+Math.imul(K,cs)|0,U=U+Math.imul(Tn,Or)|0,I=I+Math.imul(Tn,nr)|0,I=I+Math.imul(z,Or)|0,H=H+Math.imul(z,nr)|0,U=U+Math.imul(Fn,vs)|0,I=I+Math.imul(Fn,Es)|0,I=I+Math.imul(Qn,vs)|0,H=H+Math.imul(Qn,Es)|0,U=U+Math.imul(pt,jn)|0,I=I+Math.imul(pt,ls)|0,I=I+Math.imul(nn,jn)|0,H=H+Math.imul(nn,ls)|0,U=U+Math.imul(rt,Vn)|0,I=I+Math.imul(rt,us)|0,I=I+Math.imul(Rt,Vn)|0,H=H+Math.imul(Rt,us)|0,U=U+Math.imul(xe,Hr)|0,I=I+Math.imul(xe,ds)|0,I=I+Math.imul(je,Hr)|0,H=H+Math.imul(je,ds)|0;var _a=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(_a>>>26)|0,_a&=67108863,U=Math.imul(ue,zr),I=Math.imul(ue,cs),I=I+Math.imul(ve,zr)|0,H=Math.imul(ve,cs),U=U+Math.imul(D,Or)|0,I=I+Math.imul(D,nr)|0,I=I+Math.imul(K,Or)|0,H=H+Math.imul(K,nr)|0,U=U+Math.imul(Tn,vs)|0,I=I+Math.imul(Tn,Es)|0,I=I+Math.imul(z,vs)|0,H=H+Math.imul(z,Es)|0,U=U+Math.imul(Fn,jn)|0,I=I+Math.imul(Fn,ls)|0,I=I+Math.imul(Qn,jn)|0,H=H+Math.imul(Qn,ls)|0,U=U+Math.imul(pt,Vn)|0,I=I+Math.imul(pt,us)|0,I=I+Math.imul(nn,Vn)|0,H=H+Math.imul(nn,us)|0,U=U+Math.imul(rt,Hr)|0,I=I+Math.imul(rt,ds)|0,I=I+Math.imul(Rt,Hr)|0,H=H+Math.imul(Rt,ds)|0;var Xl=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Xl>>>26)|0,Xl&=67108863,U=Math.imul(ue,Or),I=Math.imul(ue,nr),I=I+Math.imul(ve,Or)|0,H=Math.imul(ve,nr),U=U+Math.imul(D,vs)|0,I=I+Math.imul(D,Es)|0,I=I+Math.imul(K,vs)|0,H=H+Math.imul(K,Es)|0,U=U+Math.imul(Tn,jn)|0,I=I+Math.imul(Tn,ls)|0,I=I+Math.imul(z,jn)|0,H=H+Math.imul(z,ls)|0,U=U+Math.imul(Fn,Vn)|0,I=I+Math.imul(Fn,us)|0,I=I+Math.imul(Qn,Vn)|0,H=H+Math.imul(Qn,us)|0,U=U+Math.imul(pt,Hr)|0,I=I+Math.imul(pt,ds)|0,I=I+Math.imul(nn,Hr)|0,H=H+Math.imul(nn,ds)|0;var Aa=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,U=Math.imul(ue,vs),I=Math.imul(ue,Es),I=I+Math.imul(ve,vs)|0,H=Math.imul(ve,Es),U=U+Math.imul(D,jn)|0,I=I+Math.imul(D,ls)|0,I=I+Math.imul(K,jn)|0,H=H+Math.imul(K,ls)|0,U=U+Math.imul(Tn,Vn)|0,I=I+Math.imul(Tn,us)|0,I=I+Math.imul(z,Vn)|0,H=H+Math.imul(z,us)|0,U=U+Math.imul(Fn,Hr)|0,I=I+Math.imul(Fn,ds)|0,I=I+Math.imul(Qn,Hr)|0,H=H+Math.imul(Qn,ds)|0;var Qu=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Qu>>>26)|0,Qu&=67108863,U=Math.imul(ue,jn),I=Math.imul(ue,ls),I=I+Math.imul(ve,jn)|0,H=Math.imul(ve,ls),U=U+Math.imul(D,Vn)|0,I=I+Math.imul(D,us)|0,I=I+Math.imul(K,Vn)|0,H=H+Math.imul(K,us)|0,U=U+Math.imul(Tn,Hr)|0,I=I+Math.imul(Tn,ds)|0,I=I+Math.imul(z,Hr)|0,H=H+Math.imul(z,ds)|0;var $s=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+($s>>>26)|0,$s&=67108863,U=Math.imul(ue,Vn),I=Math.imul(ue,us),I=I+Math.imul(ve,Vn)|0,H=Math.imul(ve,us),U=U+Math.imul(D,Hr)|0,I=I+Math.imul(D,ds)|0,I=I+Math.imul(K,Hr)|0,H=H+Math.imul(K,ds)|0;var Hf=(j+U|0)+((I&8191)<<13)|0;j=(H+(I>>>13)|0)+(Hf>>>26)|0,Hf&=67108863,U=Math.imul(ue,Hr),I=Math.imul(ue,ds),I=I+Math.imul(ve,Hr)|0,H=Math.imul(ve,ds);var eu=(j+U|0)+((I&8191)<<13)|0;return j=(H+(I>>>13)|0)+(eu>>>26)|0,eu&=67108863,B[0]=Wf,B[1]=Zl,B[2]=Cm,B[3]=zf,B[4]=_m,B[5]=Sw,B[6]=Iw,B[7]=Nw,B[8]=Am,B[9]=mc,B[10]=Sm,B[11]=Im,B[12]=_a,B[13]=Xl,B[14]=Aa,B[15]=Qu,B[16]=$s,B[17]=Hf,B[18]=eu,j!==0&&(B[19]=j,_.length++),_};Math.imul||(w=y);function C($,v,E){E.negative=v.negative^$.negative,E.length=$.length+v.length;for(var _=0,R=0,x=0;x<E.length-1;x++){var B=R;R=0;for(var j=_&67108863,U=Math.min(x,v.length-1),I=Math.max(0,x-$.length+1);I<=U;I++){var H=x-I,re=$.words[H]|0,ne=v.words[I]|0,ge=re*ne,te=ge&67108863;B=B+(ge/67108864|0)|0,te=te+j|0,j=te&67108863,B=B+(te>>>26)|0,R+=B>>>26,B&=67108863}E.words[x]=j,_=B,B=R}return _!==0?E.words[x]=_:E.length--,E._strip()}function N($,v,E){return C($,v,E)}i.prototype.mulTo=function(v,E){var _,R=this.length+v.length;return this.length===10&&v.length===10?_=w(this,v,E):R<63?_=y(this,v,E):R<1024?_=C(this,v,E):_=N(this,v,E),_},i.prototype.mul=function(v){var E=new i(null);return E.words=new Array(this.length+v.length),this.mulTo(v,E)},i.prototype.mulf=function(v){var E=new i(null);return E.words=new Array(this.length+v.length),N(this,v,E)},i.prototype.imul=function(v){return this.clone().mulTo(v,this)},i.prototype.imuln=function(v){var E=v<0;E&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var _=0,R=0;R<this.length;R++){var x=(this.words[R]|0)*v,B=(x&67108863)+(_&67108863);_>>=26,_+=x/67108864|0,_+=B>>>26,this.words[R]=B&67108863}return _!==0&&(this.words[R]=_,this.length++),this.length=v===0?1:this.length,E?this.ineg():this},i.prototype.muln=function(v){return this.clone().imuln(v)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(v){var E=m(v);if(E.length===0)return new i(1);for(var _=this,R=0;R<E.length&&E[R]===0;R++,_=_.sqr());if(++R<E.length)for(var x=_.sqr();R<E.length;R++,x=x.sqr())E[R]!==0&&(_=_.mul(x));return _},i.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26,R=67108863>>>26-E<<26-E,x;if(E!==0){var B=0;for(x=0;x<this.length;x++){var j=this.words[x]&R,U=(this.words[x]|0)-j<<E;this.words[x]=U|B,B=j>>>26-E}B&&(this.words[x]=B,this.length++)}if(_!==0){for(x=this.length-1;x>=0;x--)this.words[x+_]=this.words[x];for(x=0;x<_;x++)this.words[x]=0;this.length+=_}return this._strip()},i.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},i.prototype.iushrn=function(v,E,_){r(typeof v=="number"&&v>=0);var R;E?R=(E-E%26)/26:R=0;var x=v%26,B=Math.min((v-x)/26,this.length),j=67108863^67108863>>>x<<x,U=_;if(R-=B,R=Math.max(0,R),U){for(var I=0;I<B;I++)U.words[I]=this.words[I];U.length=B}if(B!==0)if(this.length>B)for(this.length-=B,I=0;I<this.length;I++)this.words[I]=this.words[I+B];else this.words[0]=0,this.length=1;var H=0;for(I=this.length-1;I>=0&&(H!==0||I>=R);I--){var re=this.words[I]|0;this.words[I]=H<<26-x|re>>>x,H=re&j}return U&&H!==0&&(U.words[U.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(v,E,_){return r(this.negative===0),this.iushrn(v,E,_)},i.prototype.shln=function(v){return this.clone().ishln(v)},i.prototype.ushln=function(v){return this.clone().iushln(v)},i.prototype.shrn=function(v){return this.clone().ishrn(v)},i.prototype.ushrn=function(v){return this.clone().iushrn(v)},i.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26,R=1<<E;if(this.length<=_)return!1;var x=this.words[_];return!!(x&R)},i.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(E!==0&&_++,this.length=Math.min(_,this.length),E!==0){var R=67108863^67108863>>>E<<E;this.words[this.length-1]&=R}return this._strip()},i.prototype.maskn=function(v){return this.clone().imaskn(v)},i.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},i.prototype._iaddn=function(v){this.words[0]+=v;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},i.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},i.prototype.addn=function(v){return this.clone().iaddn(v)},i.prototype.subn=function(v){return this.clone().isubn(v)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(v,E,_){var R=v.length+_,x;this._expand(R);var B,j=0;for(x=0;x<v.length;x++){B=(this.words[x+_]|0)+j;var U=(v.words[x]|0)*E;B-=U&67108863,j=(B>>26)-(U/67108864|0),this.words[x+_]=B&67108863}for(;x<this.length-_;x++)B=(this.words[x+_]|0)+j,j=B>>26,this.words[x+_]=B&67108863;if(j===0)return this._strip();for(r(j===-1),j=0,x=0;x<this.length;x++)B=-(this.words[x]|0)+j,j=B>>26,this.words[x]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(v,E){var _=this.length-v.length,R=this.clone(),x=v,B=x.words[x.length-1]|0,j=this._countBits(B);_=26-j,_!==0&&(x=x.ushln(_),R.iushln(_),B=x.words[x.length-1]|0);var U=R.length-x.length,I;if(E!=="mod"){I=new i(null),I.length=U+1,I.words=new Array(I.length);for(var H=0;H<I.length;H++)I.words[H]=0}var re=R.clone()._ishlnsubmul(x,1,U);re.negative===0&&(R=re,I&&(I.words[U]=1));for(var ne=U-1;ne>=0;ne--){var ge=(R.words[x.length+ne]|0)*67108864+(R.words[x.length+ne-1]|0);for(ge=Math.min(ge/B|0,67108863),R._ishlnsubmul(x,ge,ne);R.negative!==0;)ge--,R.negative=0,R._ishlnsubmul(x,1,ne),R.isZero()||(R.negative^=1);I&&(I.words[ne]=ge)}return I&&I._strip(),R._strip(),E!=="div"&&_!==0&&R.iushrn(_),{div:I||null,mod:R}},i.prototype.divmod=function(v,E,_){if(r(!v.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var R,x,B;return this.negative!==0&&v.negative===0?(B=this.neg().divmod(v,E),E!=="mod"&&(R=B.div.neg()),E!=="div"&&(x=B.mod.neg(),_&&x.negative!==0&&x.iadd(v)),{div:R,mod:x}):this.negative===0&&v.negative!==0?(B=this.divmod(v.neg(),E),E!=="mod"&&(R=B.div.neg()),{div:R,mod:B.mod}):this.negative&v.negative?(B=this.neg().divmod(v.neg(),E),E!=="div"&&(x=B.mod.neg(),_&&x.negative!==0&&x.isub(v)),{div:B.div,mod:x}):v.length>this.length||this.cmp(v)<0?{div:new i(0),mod:this}:v.length===1?E==="div"?{div:this.divn(v.words[0]),mod:null}:E==="mod"?{div:null,mod:new i(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new i(this.modrn(v.words[0]))}:this._wordDiv(v,E)},i.prototype.div=function(v){return this.divmod(v,"div",!1).div},i.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},i.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},i.prototype.divRound=function(v){var E=this.divmod(v);if(E.mod.isZero())return E.div;var _=E.div.negative!==0?E.mod.isub(v):E.mod,R=v.ushrn(1),x=v.andln(1),B=_.cmp(R);return B<0||x===1&&B===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},i.prototype.modrn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var _=(1<<26)%v,R=0,x=this.length-1;x>=0;x--)R=(_*R+(this.words[x]|0))%v;return E?-R:R},i.prototype.modn=function(v){return this.modrn(v)},i.prototype.idivn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var _=0,R=this.length-1;R>=0;R--){var x=(this.words[R]|0)+_*67108864;this.words[R]=x/v|0,_=x%v}return this._strip(),E?this.ineg():this},i.prototype.divn=function(v){return this.clone().idivn(v)},i.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var E=this,_=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var R=new i(1),x=new i(0),B=new i(0),j=new i(1),U=0;E.isEven()&&_.isEven();)E.iushrn(1),_.iushrn(1),++U;for(var I=_.clone(),H=E.clone();!E.isZero();){for(var re=0,ne=1;!(E.words[0]&ne)&&re<26;++re,ne<<=1);if(re>0)for(E.iushrn(re);re-- >0;)(R.isOdd()||x.isOdd())&&(R.iadd(I),x.isub(H)),R.iushrn(1),x.iushrn(1);for(var ge=0,te=1;!(_.words[0]&te)&&ge<26;++ge,te<<=1);if(ge>0)for(_.iushrn(ge);ge-- >0;)(B.isOdd()||j.isOdd())&&(B.iadd(I),j.isub(H)),B.iushrn(1),j.iushrn(1);E.cmp(_)>=0?(E.isub(_),R.isub(B),x.isub(j)):(_.isub(E),B.isub(R),j.isub(x))}return{a:B,b:j,gcd:_.iushln(U)}},i.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var E=this,_=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var R=new i(1),x=new i(0),B=_.clone();E.cmpn(1)>0&&_.cmpn(1)>0;){for(var j=0,U=1;!(E.words[0]&U)&&j<26;++j,U<<=1);if(j>0)for(E.iushrn(j);j-- >0;)R.isOdd()&&R.iadd(B),R.iushrn(1);for(var I=0,H=1;!(_.words[0]&H)&&I<26;++I,H<<=1);if(I>0)for(_.iushrn(I);I-- >0;)x.isOdd()&&x.iadd(B),x.iushrn(1);E.cmp(_)>=0?(E.isub(_),R.isub(x)):(_.isub(E),x.isub(R))}var re;return E.cmpn(1)===0?re=R:re=x,re.cmpn(0)<0&&re.iadd(v),re},i.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var E=this.clone(),_=v.clone();E.negative=0,_.negative=0;for(var R=0;E.isEven()&&_.isEven();R++)E.iushrn(1),_.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;_.isEven();)_.iushrn(1);var x=E.cmp(_);if(x<0){var B=E;E=_,_=B}else if(x===0||_.cmpn(1)===0)break;E.isub(_)}while(!0);return _.iushln(R)},i.prototype.invm=function(v){return this.egcd(v).a.umod(v)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(v){return this.words[0]&v},i.prototype.bincn=function(v){r(typeof v=="number");var E=v%26,_=(v-E)/26,R=1<<E;if(this.length<=_)return this._expand(_+1),this.words[_]|=R,this;for(var x=R,B=_;x!==0&&B<this.length;B++){var j=this.words[B]|0;j+=x,x=j>>>26,j&=67108863,this.words[B]=j}return x!==0&&(this.words[B]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(v){var E=v<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var _;if(this.length>1)_=1;else{E&&(v=-v),r(v<=67108863,"Number is too big");var R=this.words[0]|0;_=R===v?0:R<v?-1:1}return this.negative!==0?-_|0:_},i.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var E=this.ucmp(v);return this.negative!==0?-E|0:E},i.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var E=0,_=this.length-1;_>=0;_--){var R=this.words[_]|0,x=v.words[_]|0;if(R!==x){R<x?E=-1:R>x&&(E=1);break}}return E},i.prototype.gtn=function(v){return this.cmpn(v)===1},i.prototype.gt=function(v){return this.cmp(v)===1},i.prototype.gten=function(v){return this.cmpn(v)>=0},i.prototype.gte=function(v){return this.cmp(v)>=0},i.prototype.ltn=function(v){return this.cmpn(v)===-1},i.prototype.lt=function(v){return this.cmp(v)===-1},i.prototype.lten=function(v){return this.cmpn(v)<=0},i.prototype.lte=function(v){return this.cmp(v)<=0},i.prototype.eqn=function(v){return this.cmpn(v)===0},i.prototype.eq=function(v){return this.cmp(v)===0},i.red=function(v){return new F(v)},i.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(v){return this.red=v,this},i.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},i.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},i.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},i.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},i.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},i.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},i.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},i.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var S={k256:null,p224:null,p192:null,p25519:null};function P($,v){this.name=$,this.p=new i(v,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var v=new i(null);return v.words=new Array(Math.ceil(this.n/13)),v},P.prototype.ireduce=function(v){var E=v,_;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),_=E.bitLength();while(_>this.n);var R=_<this.n?-1:E.ucmp(this.p);return R===0?(E.words[0]=0,E.length=1):R>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},P.prototype.split=function(v,E){v.iushrn(this.n,0,E)},P.prototype.imulK=function(v){return v.imul(this.k)};function O(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(O,P),O.prototype.split=function(v,E){for(var _=4194303,R=Math.min(v.length,9),x=0;x<R;x++)E.words[x]=v.words[x];if(E.length=R,v.length<=9){v.words[0]=0,v.length=1;return}var B=v.words[9];for(E.words[E.length++]=B&_,x=10;x<v.length;x++){var j=v.words[x]|0;v.words[x-10]=(j&_)<<4|B>>>22,B=j}B>>>=22,v.words[x-10]=B,B===0&&v.length>10?v.length-=10:v.length-=9},O.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var E=0,_=0;_<v.length;_++){var R=v.words[_]|0;E+=R*977,v.words[_]=E&67108863,E=R*64+(E/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function L(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(L,P);function M(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(M,P);function W(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(W,P),W.prototype.imulK=function(v){for(var E=0,_=0;_<v.length;_++){var R=(v.words[_]|0)*19+E,x=R&67108863;R>>>=26,v.words[_]=x,E=R}return E!==0&&(v.words[v.length++]=E),v},i._prime=function(v){if(S[v])return S[v];var E;if(v==="k256")E=new O;else if(v==="p224")E=new L;else if(v==="p192")E=new M;else if(v==="p25519")E=new W;else throw new Error("Unknown prime "+v);return S[v]=E,E};function F($){if(typeof $=="string"){var v=i._prime($);this.m=v.p,this.prime=v}else r($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}F.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},F.prototype._verify2=function(v,E){r((v.negative|E.negative)===0,"red works only with positives"),r(v.red&&v.red===E.red,"red works only with red numbers")},F.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(u(v,v.umod(this.m)._forceRed(this)),v)},F.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},F.prototype.add=function(v,E){this._verify2(v,E);var _=v.add(E);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},F.prototype.iadd=function(v,E){this._verify2(v,E);var _=v.iadd(E);return _.cmp(this.m)>=0&&_.isub(this.m),_},F.prototype.sub=function(v,E){this._verify2(v,E);var _=v.sub(E);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},F.prototype.isub=function(v,E){this._verify2(v,E);var _=v.isub(E);return _.cmpn(0)<0&&_.iadd(this.m),_},F.prototype.shl=function(v,E){return this._verify1(v),this.imod(v.ushln(E))},F.prototype.imul=function(v,E){return this._verify2(v,E),this.imod(v.imul(E))},F.prototype.mul=function(v,E){return this._verify2(v,E),this.imod(v.mul(E))},F.prototype.isqr=function(v){return this.imul(v,v.clone())},F.prototype.sqr=function(v){return this.mul(v,v)},F.prototype.sqrt=function(v){if(v.isZero())return v.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var _=this.m.add(new i(1)).iushrn(2);return this.pow(v,_)}for(var R=this.m.subn(1),x=0;!R.isZero()&&R.andln(1)===0;)x++,R.iushrn(1);r(!R.isZero());var B=new i(1).toRed(this),j=B.redNeg(),U=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new i(2*I*I).toRed(this);this.pow(I,U).cmp(j)!==0;)I.redIAdd(j);for(var H=this.pow(I,R),re=this.pow(v,R.addn(1).iushrn(1)),ne=this.pow(v,R),ge=x;ne.cmp(B)!==0;){for(var te=ne,he=0;te.cmp(B)!==0;he++)te=te.redSqr();r(he<ge);var me=this.pow(H,new i(1).iushln(ge-he-1));re=re.redMul(me),H=me.redSqr(),ne=ne.redMul(H),ge=he}return re},F.prototype.invm=function(v){var E=v._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},F.prototype.pow=function(v,E){if(E.isZero())return new i(1).toRed(this);if(E.cmpn(1)===0)return v.clone();var _=4,R=new Array(1<<_);R[0]=new i(1).toRed(this),R[1]=v;for(var x=2;x<R.length;x++)R[x]=this.mul(R[x-1],v);var B=R[0],j=0,U=0,I=E.bitLength()%26;for(I===0&&(I=26),x=E.length-1;x>=0;x--){for(var H=E.words[x],re=I-1;re>=0;re--){var ne=H>>re&1;if(B!==R[0]&&(B=this.sqr(B)),ne===0&&j===0){U=0;continue}j<<=1,j|=ne,U++,!(U!==_&&(x!==0||re!==0))&&(B=this.mul(B,R[j]),U=0,j=0)}I=26}return B},F.prototype.convertTo=function(v){var E=v.umod(this.m);return E===v?E.clone():E},F.prototype.convertFrom=function(v){var E=v.clone();return E.red=null,E},i.mont=function(v){return new V(v)};function V($){F.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,F),V.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},V.prototype.convertFrom=function(v){var E=this.imod(v.mul(this.rinv));return E.red=null,E},V.prototype.imul=function(v,E){if(v.isZero()||E.isZero())return v.words[0]=0,v.length=1,v;var _=v.imul(E),R=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=_.isub(R).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},V.prototype.mul=function(v,E){if(v.isZero()||E.isZero())return new i(0)._forceRed(this);var _=v.mul(E),R=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=_.isub(R).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},V.prototype.invm=function(v){var E=this.imod(v._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(t,ti)})(j4);var Noe=j4.exports;const Rq=ih(Noe);var O5={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=mn,r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(O5,O5.exports);var xoe=O5.exports,xx=xoe.Buffer;function DYe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=xx.from(f)),!xx.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,g=0,m=0,y=f.length;m!==y&&f[m]===0;)m++,p++;for(var w=(y-m)*l+1>>>0,C=new Uint8Array(w);m!==y;){for(var N=f[m],S=0,P=w-1;(N!==0||S<g)&&P!==-1;P--,S++)N+=256*C[P]>>>0,C[P]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");g=S,m++}for(var O=w-g;O!==w&&C[O]===0;)O++;for(var L=a.repeat(p);O<w;++O)L+=t.charAt(C[O]);return L}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return xx.alloc(0);for(var p=0,g=0,m=0;f[p]===a;)g++,p++;for(var y=(f.length-p)*c+1>>>0,w=new Uint8Array(y);p<f.length;){var C=f.charCodeAt(p);if(C>255)return;var N=e[C];if(N===255)return;for(var S=0,P=y-1;(N!==0||S<m)&&P!==-1;P--,S++)N+=o*w[P]>>>0,w[P]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=S,p++}for(var O=y-m;O!==y&&w[O]===0;)O++;var L=xx.allocUnsafe(g+(y-O));L.fill(0,0,g);for(var M=g;O!==y;)L[M++]=w[O++];return L}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var MYe=DYe,BYe=MYe,LYe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",UYe=BYe(LYe);const lo=ih(UYe);var ao={},Tx=xoe.Buffer;function $Ye(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=Tx.from(f)),!Tx.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,g=0,m=0,y=f.length;m!==y&&f[m]===0;)m++,p++;for(var w=(y-m)*l+1>>>0,C=new Uint8Array(w);m!==y;){for(var N=f[m],S=0,P=w-1;(N!==0||S<g)&&P!==-1;P--,S++)N+=256*C[P]>>>0,C[P]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");g=S,m++}for(var O=w-g;O!==w&&C[O]===0;)O++;for(var L=a.repeat(p);O<w;++O)L+=t.charAt(C[O]);return L}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return Tx.alloc(0);for(var p=0,g=0,m=0;f[p]===a;)g++,p++;for(var y=(f.length-p)*c+1>>>0,w=new Uint8Array(y);p<f.length;){var C=f.charCodeAt(p);if(C>255)return;var N=e[C];if(N===255)return;for(var S=0,P=y-1;(N!==0||S<m)&&P!==-1;P--,S++)N+=o*w[P]>>>0,w[P]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=S,p++}for(var O=y-m;O!==y&&w[O]===0;)O++;var L=Tx.allocUnsafe(g+(y-O));L.fill(0,0,g);for(var M=g;O!==y;)L[M++]=w[O++];return L}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var FYe=$Ye,jYe=FYe,WYe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",zYe=jYe(WYe);function Zh(t,e,n){return e<=t&&t<=n}function GP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function HYe(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function GYe(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var yk=-1;function W4(t){this.tokens=[].slice.call(t)}W4.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():yk},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var nC=-1;function lM(t,e){if(t)throw TypeError("Decoder error");return e||65533}var wk="utf-8";function bk(t,e){if(!(this instanceof bk))return new bk(t,e);if(t=t!==void 0?String(t).toLowerCase():wk,t!==wk)throw new Error("Encoding not supported. Only utf-8 is supported");e=GP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}bk.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=GP(n),this._streaming||(this._decoder=new qYe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new W4(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==nC);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===nC)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),GYe(i)}};function vk(t,e){if(!(this instanceof vk))return new vk(t,e);if(t=t!==void 0?String(t).toLowerCase():wk,t!==wk)throw new Error("Encoding not supported. Only utf-8 is supported");e=GP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}vk.prototype={encode:function(e,n){e=e?String(e):"",n=GP(n),this._streaming||(this._encoder=new VYe(this._options)),this._streaming=!!n.stream;for(var r=[],s=new W4(HYe(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==nC);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==nC;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function qYe(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===yk&&s!==0)return s=0,lM(e);if(c===yk)return nC;if(s===0){if(Zh(c,0,127))return c;if(Zh(c,194,223))s=1,n=c-192;else if(Zh(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(Zh(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return lM(e);return n=n<<6*s,null}if(!Zh(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),lM(e);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var l=n;return n=s=r=0,l}}function VYe(t){t.fatal,this.handler=function(e,n){if(n===yk)return nC;if(Zh(n,0,127))return n;var r,s;Zh(n,128,2047)?(r=1,s=192):Zh(n,2048,65535)?(r=2,s=224):Zh(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const KYe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:bk,TextEncoder:vk},Symbol.toStringTag,{value:"Module"})),YYe=oI(KYe);var QYe=ti&&ti.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),JYe=ti&&ti.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ch=ti&&ti.__decorate||function(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},ZYe=ti&&ti.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&QYe(e,t,n);return JYe(e,t),e},Toe=ti&&ti.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ao,"__esModule",{value:!0});var Roe=ao.deserializeUnchecked=Boe=ao.deserialize=Moe=ao.serialize=ao.BinaryReader=ao.BinaryWriter=ao.BorshError=ao.baseDecode=ao.baseEncode=void 0;const wg=Toe(Noe),koe=Toe(zYe),XYe=ZYe(YYe),eQe=typeof TextDecoder!="function"?XYe.TextDecoder:TextDecoder,tQe=new eQe("utf-8",{fatal:!0});function nQe(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),koe.default.encode(Buffer.from(t))}ao.baseEncode=nQe;function rQe(t){return Buffer.from(koe.default.decode(t))}ao.baseDecode=rQe;const uM=1024;class la extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ao.BorshError=la;class Poe{constructor(){this.buf=Buffer.alloc(uM),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(uM)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new wg.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new wg.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new wg.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new wg.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(uM)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}ao.BinaryWriter=Poe;function lh(t,e,n){const r=n.value;n.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new la("Reached the end of buffer when deserializing")}throw i}}}class sl{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new wg.default(e,"le")}readU128(){const e=this.readBuffer(16);return new wg.default(e,"le")}readU256(){const e=this.readBuffer(32);return new wg.default(e,"le")}readU512(){const e=this.readBuffer(64);return new wg.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new la(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return tQe.decode(n)}catch(r){throw new la(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let s=0;s<n;++s)r.push(e());return r}}ch([lh],sl.prototype,"readU8",null);ch([lh],sl.prototype,"readU16",null);ch([lh],sl.prototype,"readU32",null);ch([lh],sl.prototype,"readU64",null);ch([lh],sl.prototype,"readU128",null);ch([lh],sl.prototype,"readU256",null);ch([lh],sl.prototype,"readU512",null);ch([lh],sl.prototype,"readString",null);ch([lh],sl.prototype,"readFixedArray",null);ch([lh],sl.prototype,"readArray",null);ao.BinaryReader=sl;function Ooe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function sy(t,e,n,r,s){try{if(typeof r=="string")s[`write${Ooe(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new la(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);s.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new la(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let i=0;i<r[1];i++)sy(t,null,n[i],r[0],s)}else s.writeArray(n,i=>{sy(t,e,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?s.writeU8(0):(s.writeU8(1),sy(t,e,n,r.type,s));break}case"map":{s.writeU32(n.size),n.forEach((i,o)=>{sy(t,e,o,r.key,s),sy(t,e,i,r.value,s)});break}default:throw new la(`FieldType ${r} unrecognized`)}else Doe(t,n,s)}catch(i){throw i instanceof la&&i.addToFieldPath(e),i}}function Doe(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new la(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{sy(t,s,e[s],i,n)});else if(r.kind==="enum"){const s=e[r.field];for(let i=0;i<r.values.length;++i){const[o,a]=r.values[i];if(o===s){n.writeU8(i),sy(t,o,e[o],a,n);break}}}else throw new la(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function sQe(t,e,n=Poe){const r=new n;return Doe(t,e,r),r.toArray()}var Moe=ao.serialize=sQe;function iy(t,e,n,r){try{if(typeof n=="string")return r[`read${Ooe(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const s=[];for(let i=0;i<n[1];i++)s.push(iy(t,null,n[0],r));return s}else return r.readArray(()=>iy(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?iy(t,e,n.type,r):void 0;if(n.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const a=iy(t,e,n.key,r),c=iy(t,e,n.value,r);s.set(a,c)}return s}return z4(t,n,r)}catch(s){throw s instanceof la&&s.addToFieldPath(e),s}}function z4(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new la(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of t.get(e).fields)s[i]=iy(t,i,o,n);return new e(s)}if(r.kind==="enum"){const s=n.readU8();if(s>=r.values.length)throw new la(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],a=iy(t,i,o,n);return new e({[i]:a})}throw new la(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function iQe(t,e,n,r=sl){const s=new r(n),i=z4(t,e,s);if(s.offset<n.length)throw new la(`Unexpected ${n.length-s.offset} bytes after deserialized data`);return i}var Boe=ao.deserialize=iQe;function oQe(t,e,n,r=sl){const s=new r(n);return z4(t,e,s)}Roe=ao.deserializeUnchecked=oQe;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.s16=ye.s8=ye.nu64be=ye.u48be=ye.u40be=ye.u32be=ye.u24be=ye.u16be=eo=ye.nu64=ye.u48=ye.u40=Tt=ye.u32=ye.u24=xl=ye.u16=Un=ye.u8=d0=ye.offset=ye.greedy=ye.Constant=ye.UTF8=ye.CString=ye.Blob=ye.Boolean=ye.BitField=ye.BitStructure=ye.VariantLayout=ye.Union=ye.UnionLayoutDiscriminator=ye.UnionDiscriminator=ye.Structure=ye.Sequence=ye.DoubleBE=ye.Double=ye.FloatBE=ye.Float=ye.NearInt64BE=ye.NearInt64=ye.NearUInt64BE=ye.NearUInt64=ye.IntBE=ye.Int=ye.UIntBE=ye.UInt=ye.OffsetLayout=ye.GreedyCount=ye.ExternalLayout=ye.bindConstructorLayout=ye.nameWithProperty=ye.Layout=ye.uint8ArrayToBuffer=ye.checkUint8Array=void 0;ye.constant=ye.utf8=ye.cstr=Kr=ye.blob=ye.unionLayoutDiscriminator=ye.union=Fo=ye.seq=ye.bits=Et=ye.struct=ye.f64be=ye.f64=ye.f32be=ye.f32=ye.ns64be=ye.s48be=ye.s40be=ye.s32be=ye.s24be=ye.s16be=Lc=ye.ns64=ye.s48=ye.s40=ye.s32=ye.s24=void 0;const H4=mn;function HC(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ye.checkUint8Array=HC;function hr(t){return HC(t),H4.Buffer.from(t.buffer,t.byteOffset,t.length)}ye.uint8ArrayToBuffer=hr;class Rr{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}ye.Layout=Rr;function G4(t,e){return e.property?t+"["+e.property+"]":t}ye.nameWithProperty=G4;function aQe(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Rr))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}ye.bindConstructorLayout=aQe;class Za extends Rr{isCount(){throw new Error("ExternalLayout is abstract")}}ye.ExternalLayout=Za;class Loe extends Za{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){HC(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}ye.GreedyCount=Loe;class q4 extends Za{constructor(e,n=0,r){if(!(e instanceof Rr))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Bl||this.layout instanceof Fu}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}ye.OffsetLayout=q4;class Bl extends Rr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return hr(e).readUIntLE(n,this.span)}encode(e,n,r=0){return hr(n).writeUIntLE(e,r,this.span),this.span}}ye.UInt=Bl;class Fu extends Rr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return hr(e).readUIntBE(n,this.span)}encode(e,n,r=0){return hr(n).writeUIntBE(e,r,this.span),this.span}}ye.UIntBE=Fu;class mw extends Rr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return hr(e).readIntLE(n,this.span)}encode(e,n,r=0){return hr(n).writeIntLE(e,r,this.span),this.span}}ye.Int=mw;class GC extends Rr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return hr(e).readIntBE(n,this.span)}encode(e,n,r=0){return hr(n).writeIntBE(e,r,this.span),this.span}}ye.IntBE=GC;const D5=Math.pow(2,32);function qP(t){const e=Math.floor(t/D5),n=t-e*D5;return{hi32:e,lo32:n}}function VP(t,e){return t*D5+e}class Uoe extends Rr{constructor(e){super(8,e)}decode(e,n=0){const r=hr(e),s=r.readUInt32LE(n),i=r.readUInt32LE(n+4);return VP(i,s)}encode(e,n,r=0){const s=qP(e),i=hr(n);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}ye.NearUInt64=Uoe;class $oe extends Rr{constructor(e){super(8,e)}decode(e,n=0){const r=hr(e),s=r.readUInt32BE(n),i=r.readUInt32BE(n+4);return VP(s,i)}encode(e,n,r=0){const s=qP(e),i=hr(n);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}ye.NearUInt64BE=$oe;class Foe extends Rr{constructor(e){super(8,e)}decode(e,n=0){const r=hr(e),s=r.readUInt32LE(n),i=r.readInt32LE(n+4);return VP(i,s)}encode(e,n,r=0){const s=qP(e),i=hr(n);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}ye.NearInt64=Foe;class joe extends Rr{constructor(e){super(8,e)}decode(e,n=0){const r=hr(e),s=r.readInt32BE(n),i=r.readUInt32BE(n+4);return VP(s,i)}encode(e,n,r=0){const s=qP(e),i=hr(n);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}ye.NearInt64BE=joe;class Woe extends Rr{constructor(e){super(4,e)}decode(e,n=0){return hr(e).readFloatLE(n)}encode(e,n,r=0){return hr(n).writeFloatLE(e,r),4}}ye.Float=Woe;class zoe extends Rr{constructor(e){super(4,e)}decode(e,n=0){return hr(e).readFloatBE(n)}encode(e,n,r=0){return hr(n).writeFloatBE(e,r),4}}ye.FloatBE=zoe;class Hoe extends Rr{constructor(e){super(8,e)}decode(e,n=0){return hr(e).readDoubleLE(n)}encode(e,n,r=0){return hr(n).writeDoubleLE(e,r),8}}ye.Double=Hoe;class Goe extends Rr{constructor(e){super(8,e)}decode(e,n=0){return hr(e).readDoubleBE(n)}encode(e,n,r=0){return hr(n).writeDoubleBE(e,r),8}}ye.DoubleBE=Goe;class qoe extends Rr{constructor(e,n,r){if(!(e instanceof Rr))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof Za&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(n instanceof Za)&&0<e.span&&(s=n*e.span),super(s,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Za&&(s=s.decode(e,n)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(e,n+r),++i}return r}decode(e,n=0){const r=[];let s=0,i=this.count;for(i instanceof Za&&(i=i.decode(e,n));s<i;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),s+=1;return r}encode(e,n,r=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,n,r+o),0);return this.count instanceof Za&&this.count.encode(e.length,n,r),i}}ye.Sequence=qoe;class Voe extends Rr{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof Rr,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(e,n);return n+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){HC(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,n)),n+=s.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const s=r;let i=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,n,r),0>c&&(c=a.getSpan(n,r)))}i=r,r+=c}return i+o-s}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}ye.Structure=Voe;class V4{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}ye.UnionDiscriminator=V4;class Ek extends V4{constructor(e,n){if(!(e instanceof Za&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}ye.UnionLayoutDiscriminator=Ek;class K4 extends Rr{constructor(e,n,r){let s;if(e instanceof Bl||e instanceof Fu)s=new Ek(new q4(e));else if(e instanceof Za&&e.isCount())s=new Ek(e);else if(e instanceof V4)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof Rr))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let i=-1;n&&(i=n.span,0<=i&&(e instanceof Bl||e instanceof Fu)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Bl||e instanceof Fu,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const s=this.discriminator,i=s.decode(e,n),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[a.property]=a.decode(e,n+c)}else r=o.decode(e,n);return r}encode(e,n,r=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],n,r),a+o.encode(e[o.property],n,r+a)}return s.encode(e,n,r)}addVariant(e,n,r){const s=new Koe(this,e,n,r);return this.registry[e]=s,s}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}ye.Union=K4;class Koe extends Rr{constructor(e,n,r,s){if(!(e instanceof K4))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Rr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,n+r)),r+s}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let i=s;if(this.layout&&(this.layout.encode(e[this.property],n,r+s),i+=this.layout.getSpan(n,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}ye.VariantLayout=Koe;function Eb(t){return 0>t&&(t+=4294967296),t}class Y4 extends Rr{constructor(e,n,r){if(!(e instanceof Bl||e instanceof Fu))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Eb(i),this},this._packedGetValue=function(){return s}}decode(e,n=0){const r=this.makeDestinationObject(),s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(e));return r}encode(e,n,r=0){const s=this.word.decode(n,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new Q4(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new Yoe(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}ye.BitStructure=Y4;class Q4{constructor(e,n,r){if(!(e instanceof Y4))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(n+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-n),this.wordMask=Eb(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return Eb(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Eb(e&this.valueMask))throw new TypeError(G4("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=Eb(e<<this.start);this.container._packedSetValue(Eb(n&~this.wordMask)|r)}}ye.BitField=Q4;let Yoe=class extends Q4{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};ye.Boolean=Yoe;let Qoe=class extends Rr{constructor(e,n){if(!(e instanceof Za&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Za||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),hr(e).slice(n,n+r)}encode(e,n,r){let s=this.length;if(this.length instanceof Za&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(G4("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>n.length)throw new RangeError("encoding overruns Uint8Array");const i=hr(e);return hr(n).write(i.toString("hex"),r,s,"hex"),this.length instanceof Za&&this.length.encode(s,n,r),s}};ye.Blob=Qoe;class Joe extends Rr{constructor(e){super(-1,e)}getSpan(e,n=0){HC(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return hr(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=H4.Buffer.from(e,"utf8"),i=s.length;if(r+i>n.length)throw new RangeError("encoding overruns Buffer");const o=hr(n);return s.copy(o,r),o[r+i]=0,i+1}}ye.CString=Joe;class Zoe extends Rr{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return HC(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return hr(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=H4.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>n.length)throw new RangeError("encoding overruns Buffer");return s.copy(hr(n),r),i}}ye.UTF8=Zoe;class Xoe extends Rr{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}ye.Constant=Xoe;ye.greedy=(t,e)=>new Loe(t,e);var d0=ye.offset=(t,e,n)=>new q4(t,e,n),Un=ye.u8=t=>new Bl(1,t),xl=ye.u16=t=>new Bl(2,t);ye.u24=t=>new Bl(3,t);var Tt=ye.u32=t=>new Bl(4,t);ye.u40=t=>new Bl(5,t);ye.u48=t=>new Bl(6,t);var eo=ye.nu64=t=>new Uoe(t);ye.u16be=t=>new Fu(2,t);ye.u24be=t=>new Fu(3,t);ye.u32be=t=>new Fu(4,t);ye.u40be=t=>new Fu(5,t);ye.u48be=t=>new Fu(6,t);ye.nu64be=t=>new $oe(t);ye.s8=t=>new mw(1,t);ye.s16=t=>new mw(2,t);ye.s24=t=>new mw(3,t);ye.s32=t=>new mw(4,t);ye.s40=t=>new mw(5,t);ye.s48=t=>new mw(6,t);var Lc=ye.ns64=t=>new Foe(t);ye.s16be=t=>new GC(2,t);ye.s24be=t=>new GC(3,t);ye.s32be=t=>new GC(4,t);ye.s40be=t=>new GC(5,t);ye.s48be=t=>new GC(6,t);ye.ns64be=t=>new joe(t);ye.f32=t=>new Woe(t);ye.f32be=t=>new zoe(t);ye.f64=t=>new Hoe(t);ye.f64be=t=>new Goe(t);var Et=ye.struct=(t,e,n)=>new Voe(t,e,n);ye.bits=(t,e,n)=>new Y4(t,e,n);var Fo=ye.seq=(t,e,n)=>new qoe(t,e,n);ye.union=(t,e,n)=>new K4(t,e,n);ye.unionLayoutDiscriminator=(t,e)=>new Ek(t,e);var Kr=ye.blob=(t,e)=>new Qoe(t,e);ye.cstr=t=>new Joe(t);ye.utf8=(t,e)=>new Zoe(t,e);ye.constant=(t,e)=>new Xoe(t,e);var cQe=8078e3,lQe=8078001,uQe=8078004,dQe=8078005,hQe=8078006,fQe=8078011;function eae(t){return Array.isArray(t)?"%5B"+t.map(eae).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function pQe([t,e]){return`${t}=${eae(e)}`}function gQe(t){const e=Object.entries(t).map(pQe).join("&");return btoa(e)}function mQe(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${gQe(e)}'`),`${n}\``}}var gv=class extends Error{constructor(...[e,n]){let r,s;if(n){const{cause:o,...a}=n;o&&(s={cause:o}),Object.keys(a).length>0&&(r=a)}const i=mQe(e,r);super(i,s);le(this,"cause",this.cause);le(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function yQe(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function wQe(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(yQe(e,t));return t.write(e,n,0),n}})}function bQe(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function ub(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function vQe(t,e){if(ub(t)!==ub(e))throw new gv(uQe);if(ub(t)&&ub(e)&&t.fixedSize!==e.fixedSize)throw new gv(dQe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!ub(t)&&!ub(e)&&t.maxSize!==e.maxSize)throw new gv(hQe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function EQe(t,e,n=0){if(e.length-n<=0)throw new gv(cQe,{codecDescription:t})}function CQe(t,e,n,r=0){const s=n.length-r;if(s<e)throw new gv(lQe,{bytesLength:s,codecDescription:t,expected:e})}function _Qe(t,e,n,r){if(r<e||r>n)throw new gv(fQe,{codecDescription:t,max:n,min:e,value:r})}function tae(t){return(t==null?void 0:t.endian)!==1}function AQe(t){return wQe({fixedSize:t.size,write(e,n,r){t.range&&_Qe(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,tae(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function SQe(t){return bQe({fixedSize:t.size,read(e,n=0){EQe(t.name,e,n),CQe(t.name,t.size,e,n);const r=new DataView(IQe(e,n,t.size));return[t.get(r,tae(t.config)),n+t.size]}})}function IQe(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var NQe=(t={})=>AQe({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),xQe=(t={})=>SQe({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),TQe=(t={})=>vQe(NQe(t),xQe(t));class RQe extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function kQe(t){return oN(t)&&typeof t[Symbol.iterator]=="function"}function oN(t){return typeof t=="object"&&t!=null}function Ck(t){return oN(t)&&!Array.isArray(t)}function Gu(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function PQe(t){const{done:e,value:n}=t.next();return e?void 0:n}function OQe(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Gu(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*kq(t,e,n,r){kQe(t)||(t=[t]);for(const s of t){const i=OQe(s,e,n,r);i&&(yield i)}}function*J4(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=J4(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?s:[...s,u],coerce:i,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):i&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):oN(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let uh=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,l)=>{const u=s(c,l);return kq(u,l,this,c)}:this.validator=()=>[],i?this.refiner=(c,l)=>{const u=i(c,l);return kq(u,l,this,c)}:this.refiner=()=>[]}assert(e,n){return DQe(e,this,n)}create(e,n){return Ke(e,this,n)}is(e){return nae(e,this)}mask(e,n){return MQe(e,this,n)}validate(e,n={}){return aN(e,this,n)}};function DQe(t,e,n){const r=aN(t,e,{message:n});if(r[0])throw r[0]}function Ke(t,e,n){const r=aN(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function MQe(t,e,n){const r=aN(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function nae(t,e){return!aN(t,e)[0]}function aN(t,e,n={}){const r=J4(t,e,n),s=PQe(r);return s[0]?[new RQe(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function yw(t,e){return new uh({type:t,schema:null,validator:e})}function BQe(){return yw("any",()=>!0)}function Qe(t){return new uh({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Gu(e)}`}})}function sh(){return yw("boolean",t=>typeof t=="boolean")}function Z4(t){return yw("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Gu(e)}`)}function ks(t){const e=Gu(t),n=typeof t;return new uh({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Gu(r)}`}})}function LQe(){return yw("never",()=>!1)}function et(t){return new uh({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function pe(){return yw("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Gu(t)}`)}function Ht(t){return new uh({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function rae(t,e){return new uh({type:"record",schema:null,*entries(n){if(oN(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return Ck(n)||`Expected an object, but received: ${Gu(n)}`},coercer(n){return Ck(n)?{...n}:n}})}function Fe(){return yw("string",t=>typeof t=="string"||`Expected a string, but received: ${Gu(t)}`)}function X4(t){const e=LQe();return new uh({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Gu(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ke(t){const e=Object.keys(t);return new uh({type:"type",schema:t,*entries(n){if(oN(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return Ck(n)||`Expected an object, but received: ${Gu(n)}`},coercer(n){return Ck(n)?{...n}:n}})}function wa(t){const e=t.map(n=>n.type).join(" | ");return new uh({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=J4(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Gu(n)}`,...s]}})}function qC(){return yw("unknown",()=>!0)}function cN(t,e,n){return new uh({...t,coercer:(r,s)=>nae(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}const sae=oI(cGe),UQe=sae.v4,$Qe=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:t};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return UQe()};i.id=o(i,r)}else s===2&&n===null?r.notificationIdNull&&(i.id=null):i.id=n;return i};var FQe=$Qe;const jQe=sae.v4,WQe=FQe,TS=function(t,e){if(!(this instanceof TS))return new TS(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return jQe()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var zQe=TS;TS.prototype.request=function(t,e,n,r){const s=this;let i=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,i=t;else{typeof n=="function"&&(r=n,n=void 0);const l=typeof r=="function";try{i=WQe(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l)return r(u);throw u}if(!l)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(l){return r(l)}return this.callServer(c,function(l,u){s._parseResponse(l,u,r)}),i};TS.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return n(s)}if(n.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return n(null,r.filter(s),r.filter(i))}else return n(null,r.error,r.result);n(null,r)};const HQe=ih(zQe);var GQe=class extends M${constructor(e,n,r){super();le(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,n,r){const s=r||n;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function qQe(t,e){return new GQe(t,e)}var VQe=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},KQe=class extends M${constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,l){super();le(this,"address");le(this,"rpc_id");le(this,"queue");le(this,"options");le(this,"autoconnect");le(this,"ready");le(this,"reconnect");le(this,"reconnect_timer_id");le(this,"reconnect_interval");le(this,"max_reconnects");le(this,"rest_options");le(this,"current_reconnects");le(this,"generate_request_id");le(this,"socket");le(this,"webSocketFactory");le(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new VQe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),c={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,l=>{if(l)return o(l);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=mn.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};iN.utils.randomPrivateKey;iN.getPublicKey;function Pq(t){try{return iN.ExtendedPoint.fromHex(t),!0}catch{return!1}}const iae=(t,e)=>iN.sign(t,e.slice(0,32)),YQe=iN.verify,so=t=>mn.Buffer.isBuffer(t)?t:t instanceof Uint8Array?mn.Buffer.from(t.buffer,t.byteOffset,t.byteLength):mn.Buffer.from(t);class QQe{constructor(e){Object.assign(this,e)}encode(){return mn.Buffer.from(Moe(xT,this))}static decode(e){return Boe(xT,this,e)}static decodeUnchecked(e){return Roe(xT,this,e)}}const xT=new Map;var oae;const JQe=32,Hg=32;function ZQe(t){return t._bn!==void 0}let Oq=1;class st extends QQe{constructor(e){if(super({}),this._bn=void 0,ZQe(e))this._bn=e._bn;else{if(typeof e=="string"){const n=lo.decode(e);if(n.length!=Hg)throw new Error("Invalid public key input");this._bn=new Rq(n)}else this._bn=new Rq(e);if(this._bn.byteLength()>Hg)throw new Error("Invalid public key input")}}static unique(){const e=new st(Oq);return Oq+=1,new st(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return lo.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(mn.Buffer);if(e.length===Hg)return e;const n=mn.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=mn.Buffer.concat([e.toBuffer(),mn.Buffer.from(n),r.toBuffer()]),i=uL(s);return new st(i)}static createProgramAddressSync(e,n){let r=mn.Buffer.alloc(0);e.forEach(function(i){if(i.length>JQe)throw new TypeError("Max seed length exceeded");r=mn.Buffer.concat([r,so(i)])}),r=mn.Buffer.concat([r,n.toBuffer(),mn.Buffer.from("ProgramDerivedAddress")]);const s=uL(r);if(Pq(s))throw new Error("Invalid seeds, address must fall off the curve");return new st(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(mn.Buffer.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new st(e);return Pq(n.toBytes())}}oae=st;st.default=new oae("11111111111111111111111111111111");xT.set(st,{kind:"struct",fields:[["_bn","u256"]]});new st("BPFLoader1111111111111111111111111111111111");const mv=1232,eF=127,_k=64;class aae extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(aae.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class cae extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(cae.prototype,"name",{value:"TransactionExpiredTimeoutError"});class o_ extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(o_.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ak{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Bn=(t="publicKey")=>Kr(32,t),XQe=(t="signature")=>Kr(64,t),Gb=(t="string")=>{const e=Et([Tt("length"),Tt("lengthPadding"),Kr(d0(Tt(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:mn.Buffer.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>Tt().span+Tt().span+mn.Buffer.from(i,"utf8").length,s},eJe=(t="authorized")=>Et([Bn("staker"),Bn("withdrawer")],t),tJe=(t="lockup")=>Et([Lc("unixTimestamp"),Lc("epoch"),Bn("custodian")],t),nJe=(t="voteInit")=>Et([Bn("nodePubkey"),Bn("authorizedVoter"),Bn("authorizedWithdrawer"),Un("commission")],t),rJe=(t="voteAuthorizeWithSeedArgs")=>Et([Tt("voteAuthorizationType"),Bn("currentAuthorityDerivedKeyOwnerPubkey"),Gb("currentAuthorityDerivedKeySeed"),Bn("newAuthorized")],t);function lae(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return lae({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function Uc(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function $c(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Is(t,e){if(!t)throw new Error(e||"Assertion failed")}class KP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new KP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Is(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Is(n.length>0,"Expected at least one writable signer key");const[c]=n[0];Is(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new st(c)),...r.map(([c])=>new st(c)),...s.map(([c])=>new st(c)),...i.map(([c])=>new st(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new st(i),c=e.findIndex(l=>l.equals(a));c>=0&&(Is(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const uae="Reached end of buffer unexpectedly";function Xh(t){if(t.length===0)throw new Error(uae);return t.shift()}function Fc(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(uae);return t.splice(...e)}class Tf{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new st(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:lo.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ak(this.staticAccountKeys)}static compile(e){const n=KP.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new Ak(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:lo.encode(a.data)}));return new Tf({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];$c(n,e);const r=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,p=Array.from(lo.decode(d.data));let g=[];$c(g,h.length);let m=[];return $c(m,p.length),{programIdIndex:f,keyIndicesCount:mn.Buffer.from(g),keyIndices:h,dataLength:mn.Buffer.from(m),data:p}});let s=[];$c(s,r.length);let i=mn.Buffer.alloc(mv);mn.Buffer.from(s).copy(i);let o=s.length;r.forEach(d=>{const f=Et([Un("programIdIndex"),Kr(d.keyIndicesCount.length,"keyIndicesCount"),Fo(Un("keyIndex"),d.keyIndices.length,"keyIndices"),Kr(d.dataLength.length,"dataLength"),Fo(Un("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=f}),i=i.slice(0,o);const a=Et([Kr(1,"numRequiredSignatures"),Kr(1,"numReadonlySignedAccounts"),Kr(1,"numReadonlyUnsignedAccounts"),Kr(n.length,"keyCount"),Fo(Bn("key"),e,"keys"),Bn("recentBlockhash")]),c={numRequiredSignatures:mn.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:mn.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:mn.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:mn.Buffer.from(n),keys:this.accountKeys.map(d=>so(d.toBytes())),recentBlockhash:lo.decode(this.recentBlockhash)};let l=mn.Buffer.alloc(2048);const u=a.encode(c,l);return i.copy(l,u),l.slice(0,u+i.length)}static from(e){let n=[...e];const r=Xh(n);if(r!==(r&eF))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Xh(n),i=Xh(n),o=Uc(n);let a=[];for(let h=0;h<o;h++){const f=Fc(n,0,Hg);a.push(new st(mn.Buffer.from(f)))}const c=Fc(n,0,Hg),l=Uc(n);let u=[];for(let h=0;h<l;h++){const f=Xh(n),p=Uc(n),g=Fc(n,0,p),m=Uc(n),y=Fc(n,0,m),w=lo.encode(mn.Buffer.from(y));u.push({programIdIndex:f,accounts:g,data:w})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:lo.encode(mn.Buffer.from(c)),accountKeys:a,instructions:u};return new Tf(d)}}class RS{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ak(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=KP.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const d=n.extractTableLookup(u);if(d!==void 0){const[h,{writable:f,readonly:p}]=d;r.push(h),s.writable.push(...f),s.readonly.push(...p)}}const[o,a]=n.getMessageComponents(),l=new Ak(a,s).compileInstructions(e.instructions);return new RS({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:r})}serialize(){const e=Array();$c(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();$c(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();$c(i,this.addressTableLookups.length);const o=Et([Un("prefix"),Et([Un("numRequiredSignatures"),Un("numReadonlySignedAccounts"),Un("numReadonlyUnsignedAccounts")],"header"),Kr(e.length,"staticAccountKeysLength"),Fo(Bn(),this.staticAccountKeys.length,"staticAccountKeys"),Bn("recentBlockhash"),Kr(r.length,"instructionsLength"),Kr(n.length,"serializedInstructions"),Kr(i.length,"addressTableLookupsLength"),Kr(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(mv),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:lo.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,l)}serializeInstructions(){let e=0;const n=new Uint8Array(mv);for(const r of this.compiledInstructions){const s=Array();$c(s,r.accountKeyIndexes.length);const i=Array();$c(i,r.data.length);const o=Et([Un("programIdIndex"),Kr(s.length,"encodedAccountKeyIndexesLength"),Fo(Un(),r.accountKeyIndexes.length,"accountKeyIndexes"),Kr(i.length,"encodedDataLength"),Kr(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(mv);for(const r of this.addressTableLookups){const s=Array();$c(s,r.writableIndexes.length);const i=Array();$c(i,r.readonlyIndexes.length);const o=Et([Bn("accountKey"),Kr(s.length,"encodedWritableIndexesLength"),Fo(Un(),r.writableIndexes.length,"writableIndexes"),Kr(i.length,"encodedReadonlyIndexesLength"),Fo(Un(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Xh(n),s=r&eF;Is(r!==s,"Expected versioned message but received legacy message");const i=s;Is(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Xh(n),numReadonlySignedAccounts:Xh(n),numReadonlyUnsignedAccounts:Xh(n)},a=[],c=Uc(n);for(let p=0;p<c;p++)a.push(new st(Fc(n,0,Hg)));const l=lo.encode(Fc(n,0,Hg)),u=Uc(n),d=[];for(let p=0;p<u;p++){const g=Xh(n),m=Uc(n),y=Fc(n,0,m),w=Uc(n),C=new Uint8Array(Fc(n,0,w));d.push({programIdIndex:g,accountKeyIndexes:y,data:C})}const h=Uc(n),f=[];for(let p=0;p<h;p++){const g=new st(Fc(n,0,Hg)),m=Uc(n),y=Fc(n,0,m),w=Uc(n),C=Fc(n,0,w);f.push({accountKey:g,writableIndexes:y,readonlyIndexes:C})}return new RS({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:d,addressTableLookups:f})}}const dae={deserializeMessageVersion(t){const e=t[0],n=e&eF;return n===e?"legacy":n},deserialize:t=>{const e=dae.deserializeMessageVersion(t);if(e==="legacy")return Tf.from(t);if(e===0)return RS.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let up=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const sJe=mn.Buffer.alloc(_k).fill(0);class oo{constructor(e){this.keys=void 0,this.programId=void 0,this.data=mn.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let Xa=class M5{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new oo(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let g=0;g<n.length;g++)if(n[g].programId===void 0)throw new Error(`Transaction instruction index ${g} has undefined program id`);const s=[],i=[];n.forEach(g=>{g.keys.forEach(y=>{i.push({...y})});const m=g.programId.toString();s.includes(m)||s.push(m)}),s.forEach(g=>{i.push({pubkey:new st(g),isSigner:!1,isWritable:!1})});const o=[];i.forEach(g=>{const m=g.pubkey.toString(),y=o.findIndex(w=>w.pubkey.toString()===m);y>-1?(o[y].isWritable=o[y].isWritable||g.isWritable,o[y].isSigner=o[y].isSigner||g.isSigner):o.push(g)}),o.sort(function(g,m){if(g.isSigner!==m.isSigner)return g.isSigner?-1:1;if(g.isWritable!==m.isWritable)return g.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return g.pubkey.toBase58().localeCompare(m.pubkey.toBase58(),"en",y)});const a=o.findIndex(g=>g.pubkey.equals(r));if(a>-1){const[g]=o.splice(a,1);g.isSigner=!0,g.isWritable=!0,o.unshift(g)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const m=o.findIndex(y=>y.pubkey.equals(g.publicKey));if(m>-1)o[m].isSigner||(o[m].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${g.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],h=[];o.forEach(({pubkey:g,isSigner:m,isWritable:y})=>{m?(d.push(g.toString()),c+=1,y||(l+=1)):(h.push(g.toString()),y||(u+=1))});const f=d.concat(h),p=n.map(g=>{const{data:m,programId:y}=g;return{programIdIndex:f.indexOf(y.toString()),accounts:g.keys.map(w=>f.indexOf(w.pubkey.toString())),data:lo.encode(m)}});return p.forEach(g=>{Is(g.programIdIndex>=0),g.accounts.forEach(m=>Is(m>=0))}),new Tf({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=iae(r,s.secretKey);this._addSignature(s.publicKey,so(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Is(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=mn.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||(r.missing=[])).push(i):YQe(s,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];$c(r,n.length);const s=r.length+n.length*64+e.length,i=mn.Buffer.alloc(s);return Is(n.length<256),mn.Buffer.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(Is(o.length===64,"signature has invalid length"),mn.Buffer.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),Is(i.length<=mv,`Transaction too large: ${i.length} > ${mv}`),i}get keys(){return Is(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Is(this.instructions.length===1),this.instructions[0].programId}get data(){return Is(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Uc(n);let s=[];for(let i=0;i<r;i++){const o=Fc(n,0,_k);s.push(lo.encode(mn.Buffer.from(o)))}return M5.populate(Tf.from(n),s)}static populate(e,n=[]){const r=new M5;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==lo.encode(sJe)?null:lo.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new oo({keys:i,programId:e.accountKeys[s.programIdIndex],data:lo.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};class cm{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)Is(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(_k));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();$c(n,this.signatures.length);const r=Et([Kr(n.length,"encodedSignaturesLength"),Fo(XQe(),this.signatures.length,"signatures"),Kr(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let n=[...e];const r=[],s=Uc(n);for(let o=0;o<s;o++)r.push(new Uint8Array(Fc(n,0,_k)));const i=dae.deserialize(new Uint8Array(n));return new cm(i,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));Is(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=iae(n,s.secretKey)}}addSignature(e,n){Is(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Is(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const iJe=160,oJe=64,aJe=iJe/oJe,cJe=1e3/aJe;new st("SysvarC1ock11111111111111111111111111111111");new st("SysvarEpochSchedu1e111111111111111111111111");new st("Sysvar1nstructions1111111111111111111111111");const dM=new st("SysvarRecentB1ockHashes11111111111111111111"),Dq=new st("SysvarRent111111111111111111111111111111111");new st("SysvarRewards111111111111111111111111111111");new st("SysvarS1otHashes111111111111111111111111111");new st("SysvarS1otHistory11111111111111111111111111");new st("SysvarStakeHistory1111111111111111111111111");class Mq extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class xt extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Cb(t){return new Promise(e=>setTimeout(e,t))}function Lo(t,e){const n=t.layout.span>=0?t.layout.span:lae(t,e),r=mn.Buffer.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}const lJe=eo("lamportsPerSignature"),hae=Et([Tt("version"),Tt("state"),Bn("authorizedPubkey"),Bn("nonce"),Et([lJe],"feeCalculator")]),Bq=hae.span;class tF{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=hae.decode(so(e),0);return new tF({authorizedPubkey:new st(n.authorizedPubkey),nonce:new st(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function rC(t){const e=Kr(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=TQe();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const l=i.encode(o);return r(l,a,c)},s}const ul=Object.freeze({Create:{index:0,layout:Et([Tt("instruction"),Lc("lamports"),Lc("space"),Bn("programId")])},Assign:{index:1,layout:Et([Tt("instruction"),Bn("programId")])},Transfer:{index:2,layout:Et([Tt("instruction"),rC("lamports")])},CreateWithSeed:{index:3,layout:Et([Tt("instruction"),Bn("base"),Gb("seed"),Lc("lamports"),Lc("space"),Bn("programId")])},AdvanceNonceAccount:{index:4,layout:Et([Tt("instruction")])},WithdrawNonceAccount:{index:5,layout:Et([Tt("instruction"),Lc("lamports")])},InitializeNonceAccount:{index:6,layout:Et([Tt("instruction"),Bn("authorized")])},AuthorizeNonceAccount:{index:7,layout:Et([Tt("instruction"),Bn("authorized")])},Allocate:{index:8,layout:Et([Tt("instruction"),Lc("space")])},AllocateWithSeed:{index:9,layout:Et([Tt("instruction"),Bn("base"),Gb("seed"),Lc("space"),Bn("programId")])},AssignWithSeed:{index:10,layout:Et([Tt("instruction"),Bn("base"),Gb("seed"),Bn("programId")])},TransferWithSeed:{index:11,layout:Et([Tt("instruction"),rC("lamports"),Gb("seed"),Bn("programId")])},UpgradeNonceAccount:{index:12,layout:Et([Tt("instruction")])}});class sC{constructor(){}static createAccount(e){const n=ul.Create,r=Lo(n,{lamports:e.lamports,space:e.space,programId:so(e.programId.toBuffer())});return new oo({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=ul.TransferWithSeed;n=Lo(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:so(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=ul.Transfer;n=Lo(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new oo({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=ul.AssignWithSeed;n=Lo(s,{base:so(e.basePubkey.toBuffer()),seed:e.seed,programId:so(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ul.Assign;n=Lo(s,{programId:so(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oo({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=ul.CreateWithSeed,r=Lo(n,{base:so(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:so(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new oo({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Xa;"basePubkey"in e&&"seed"in e?n.add(sC.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Bq,programId:this.programId})):n.add(sC.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Bq,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=ul.InitializeNonceAccount,r=Lo(n,{authorized:so(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dM,isSigner:!1,isWritable:!1},{pubkey:Dq,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new oo(s)}static nonceAdvance(e){const n=ul.AdvanceNonceAccount,r=Lo(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dM,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new oo(s)}static nonceWithdraw(e){const n=ul.WithdrawNonceAccount,r=Lo(n,{lamports:e.lamports});return new oo({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:dM,isSigner:!1,isWritable:!1},{pubkey:Dq,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=ul.AuthorizeNonceAccount,r=Lo(n,{authorized:so(e.newAuthorizedPubkey.toBuffer())});return new oo({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=ul.AllocateWithSeed;n=Lo(s,{base:so(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:so(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ul.Allocate;n=Lo(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oo({keys:r,programId:this.programId,data:n})}}sC.programId=new st("11111111111111111111111111111111");new st("BPFLoader2111111111111111111111111111111111");function uJe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hM,Lq;function dJe(){if(Lq)return hM;Lq=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,l,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)l=c[i],u=n(r[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return hM=function(r){var s=n(r,!1);if(s!==void 0)return""+s},hM}var hJe=dJe(),Uq=uJe(hJe);const M1=32;function fM(t){let e=0;for(;t>1;)t/=2,e++;return e}function fJe(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class pJe{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=fM(fJe(e+M1+1))-fM(M1)-1,r=this.getSlotsInEpoch(n),s=e-(r-M1);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*M1:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+fM(M1)):this.slotsPerEpoch}}var gJe=globalThis.fetch;class mJe extends KQe{constructor(e,n,r){const s=i=>{const o=qQe(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function yJe(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const $q=56;class Fq{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=yJe(wJe,e),r=e.length-$q;Is(r>=0,"lookup table is invalid"),Is(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=Et([Fo(Bn(),s,"addresses")]).decode(e.slice($q));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new st(n.authority[0]):void 0,addresses:i.map(o=>new st(o))}}}const wJe={index:1,layout:Et([Tt("typeIndex"),rC("deactivationSlot"),eo("lastExtendedSlot"),Un("lastExtendedStartIndex"),Un(),Fo(Bn(),d0(Un(),-1),"authority")])},bJe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function vJe(t){const e=t.match(bJe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const Us=cN(Z4(st),Fe(),t=>new st(t)),fae=X4([Fe(),ks("base64")]),nF=cN(Z4(mn.Buffer),fae,t=>mn.Buffer.from(t[0],"base64")),EJe=30*1e3;function CJe(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function es(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function jq(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function pae(t){return wa([ke({jsonrpc:ks("2.0"),id:Fe(),result:t}),ke({jsonrpc:ks("2.0"),id:Fe(),error:ke({code:qC(),message:Fe(),data:Ht(BQe())})})])}const _Je=pae(qC());function In(t){return cN(pae(t),_Je,e=>"error"in e?e:{...e,result:Ke(e.result,t)})}function Js(t){return In(ke({context:ke({slot:pe()}),value:t}))}function YP(t){return ke({context:ke({slot:pe()}),value:t})}function pM(t,e){return t===0?new RS({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new st(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:lo.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Tf(e)}const AJe=ke({foundation:pe(),foundationTerm:pe(),initial:pe(),taper:pe(),terminal:pe()}),SJe=In(Qe(et(ke({epoch:pe(),effectiveSlot:pe(),amount:pe(),postBalance:pe(),commission:Ht(et(pe()))})))),IJe=Qe(ke({slot:pe(),prioritizationFee:pe()})),NJe=ke({total:pe(),validator:pe(),foundation:pe(),epoch:pe()}),xJe=ke({epoch:pe(),slotIndex:pe(),slotsInEpoch:pe(),absoluteSlot:pe(),blockHeight:Ht(pe()),transactionCount:Ht(pe())}),TJe=ke({slotsPerEpoch:pe(),leaderScheduleSlotOffset:pe(),warmup:sh(),firstNormalEpoch:pe(),firstNormalSlot:pe()}),RJe=rae(Fe(),Qe(pe())),ww=et(wa([ke({}),Fe()])),kJe=ke({err:ww}),PJe=ks("receivedSignature"),OJe=ke({"solana-core":Fe(),"feature-set":Ht(pe())}),DJe=ke({program:Fe(),programId:Us,parsed:qC()}),MJe=ke({programId:Us,accounts:Qe(Us),data:Fe()}),Wq=Js(ke({err:et(wa([ke({}),Fe()])),logs:et(Qe(Fe())),accounts:Ht(et(Qe(et(ke({executable:sh(),owner:Fe(),lamports:pe(),data:Qe(Fe()),rentEpoch:Ht(pe())}))))),unitsConsumed:Ht(pe()),returnData:Ht(et(ke({programId:Fe(),data:X4([Fe(),ks("base64")])}))),innerInstructions:Ht(et(Qe(ke({index:pe(),instructions:Qe(wa([DJe,MJe]))}))))})),BJe=Js(ke({byIdentity:rae(Fe(),Qe(pe())),range:ke({firstSlot:pe(),lastSlot:pe()})}));function LJe(t,e,n,r,s,i){const o=n||gJe;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(u,d)=>{const h=await new Promise((f,p)=>{try{r(u,d,(g,m)=>f([g,m]))}catch(g){p(g)}});return await o(...h)}),new HQe(async(u,d)=>{const h={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},LZe)};try{let f=5,p,g=500;for(;c?p=await c(t,h):p=await o(t,h),!(p.status!==429||s===!0||(f-=1,f===0));)console.error(`Server responded with ${p.status} ${p.statusText}.  Retrying after ${g}ms delay...`),await Cb(g),g*=2;const m=await p.text();p.ok?d(null,m):d(new Error(`${p.status} ${p.statusText}: ${m}`))}catch(f){f instanceof Error&&d(f)}},{})}function UJe(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function $Je(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const FJe=In(AJe),jJe=In(NJe),WJe=In(IJe),zJe=In(xJe),HJe=In(TJe),GJe=In(RJe),qJe=In(pe()),VJe=Js(ke({total:pe(),circulating:pe(),nonCirculating:pe(),nonCirculatingAccounts:Qe(Us)})),B5=ke({amount:Fe(),uiAmount:et(pe()),decimals:pe(),uiAmountString:Ht(Fe())}),KJe=Js(Qe(ke({address:Us,amount:Fe(),uiAmount:et(pe()),decimals:pe(),uiAmountString:Ht(Fe())}))),YJe=Js(Qe(ke({pubkey:Us,account:ke({executable:sh(),owner:Us,lamports:pe(),data:nF,rentEpoch:pe()})}))),L5=ke({program:Fe(),parsed:qC(),space:pe()}),QJe=Js(Qe(ke({pubkey:Us,account:ke({executable:sh(),owner:Us,lamports:pe(),data:L5,rentEpoch:pe()})}))),JJe=Js(Qe(ke({lamports:pe(),address:Us}))),kS=ke({executable:sh(),owner:Us,lamports:pe(),data:nF,rentEpoch:pe()}),ZJe=ke({pubkey:Us,account:kS}),XJe=cN(wa([Z4(mn.Buffer),L5]),wa([fae,L5]),t=>Array.isArray(t)?Ke(t,nF):t),U5=ke({executable:sh(),owner:Us,lamports:pe(),data:XJe,rentEpoch:pe()}),eZe=ke({pubkey:Us,account:U5}),tZe=ke({state:wa([ks("active"),ks("inactive"),ks("activating"),ks("deactivating")]),active:pe(),inactive:pe()}),nZe=In(Qe(ke({signature:Fe(),slot:pe(),err:ww,memo:et(Fe()),blockTime:Ht(et(pe()))}))),rZe=In(Qe(ke({signature:Fe(),slot:pe(),err:ww,memo:et(Fe()),blockTime:Ht(et(pe()))}))),sZe=ke({subscription:pe(),result:YP(kS)}),iZe=ke({pubkey:Us,account:kS}),oZe=ke({subscription:pe(),result:YP(iZe)}),aZe=ke({parent:pe(),slot:pe(),root:pe()}),cZe=ke({subscription:pe(),result:aZe}),lZe=wa([ke({type:wa([ks("firstShredReceived"),ks("completed"),ks("optimisticConfirmation"),ks("root")]),slot:pe(),timestamp:pe()}),ke({type:ks("createdBank"),parent:pe(),slot:pe(),timestamp:pe()}),ke({type:ks("frozen"),slot:pe(),timestamp:pe(),stats:ke({numTransactionEntries:pe(),numSuccessfulTransactions:pe(),numFailedTransactions:pe(),maxTransactionsPerEntry:pe()})}),ke({type:ks("dead"),slot:pe(),timestamp:pe(),err:Fe()})]),uZe=ke({subscription:pe(),result:lZe}),dZe=ke({subscription:pe(),result:YP(wa([kJe,PJe]))}),hZe=ke({subscription:pe(),result:pe()}),fZe=ke({pubkey:Fe(),gossip:et(Fe()),tpu:et(Fe()),rpc:et(Fe()),version:et(Fe())}),zq=ke({votePubkey:Fe(),nodePubkey:Fe(),activatedStake:pe(),epochVoteAccount:sh(),epochCredits:Qe(X4([pe(),pe(),pe()])),commission:pe(),lastVote:pe(),rootSlot:et(pe())}),pZe=In(ke({current:Qe(zq),delinquent:Qe(zq)})),gZe=wa([ks("processed"),ks("confirmed"),ks("finalized")]),mZe=ke({slot:pe(),confirmations:et(pe()),err:ww,confirmationStatus:Ht(gZe)}),yZe=Js(Qe(et(mZe))),wZe=In(pe()),gae=ke({accountKey:Us,writableIndexes:Qe(pe()),readonlyIndexes:Qe(pe())}),rF=ke({signatures:Qe(Fe()),message:ke({accountKeys:Qe(Fe()),header:ke({numRequiredSignatures:pe(),numReadonlySignedAccounts:pe(),numReadonlyUnsignedAccounts:pe()}),instructions:Qe(ke({accounts:Qe(pe()),data:Fe(),programIdIndex:pe()})),recentBlockhash:Fe(),addressTableLookups:Ht(Qe(gae))})}),mae=ke({pubkey:Us,signer:sh(),writable:sh(),source:Ht(wa([ks("transaction"),ks("lookupTable")]))}),yae=ke({accountKeys:Qe(mae),signatures:Qe(Fe())}),wae=ke({parsed:qC(),program:Fe(),programId:Us}),bae=ke({accounts:Qe(Us),data:Fe(),programId:Us}),bZe=wa([bae,wae]),vZe=wa([ke({parsed:qC(),program:Fe(),programId:Fe()}),ke({accounts:Qe(Fe()),data:Fe(),programId:Fe()})]),vae=cN(bZe,vZe,t=>"accounts"in t?Ke(t,bae):Ke(t,wae)),Eae=ke({signatures:Qe(Fe()),message:ke({accountKeys:Qe(mae),instructions:Qe(vae),recentBlockhash:Fe(),addressTableLookups:Ht(et(Qe(gae)))})}),Sk=ke({accountIndex:pe(),mint:Fe(),owner:Ht(Fe()),programId:Ht(Fe()),uiTokenAmount:B5}),Cae=ke({writable:Qe(Us),readonly:Qe(Us)}),QP=ke({err:ww,fee:pe(),innerInstructions:Ht(et(Qe(ke({index:pe(),instructions:Qe(ke({accounts:Qe(pe()),data:Fe(),programIdIndex:pe()}))})))),preBalances:Qe(pe()),postBalances:Qe(pe()),logMessages:Ht(et(Qe(Fe()))),preTokenBalances:Ht(et(Qe(Sk))),postTokenBalances:Ht(et(Qe(Sk))),loadedAddresses:Ht(Cae),computeUnitsConsumed:Ht(pe())}),sF=ke({err:ww,fee:pe(),innerInstructions:Ht(et(Qe(ke({index:pe(),instructions:Qe(vae)})))),preBalances:Qe(pe()),postBalances:Qe(pe()),logMessages:Ht(et(Qe(Fe()))),preTokenBalances:Ht(et(Qe(Sk))),postTokenBalances:Ht(et(Qe(Sk))),loadedAddresses:Ht(Cae),computeUnitsConsumed:Ht(pe())}),VC=wa([ks(0),ks("legacy")]),bw=ke({pubkey:Fe(),lamports:pe(),postBalance:et(pe()),rewardType:et(Fe()),commission:Ht(et(pe()))}),EZe=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Qe(ke({transaction:rF,meta:et(QP),version:Ht(VC)})),rewards:Ht(Qe(bw)),blockTime:et(pe()),blockHeight:et(pe())}))),CZe=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),rewards:Ht(Qe(bw)),blockTime:et(pe()),blockHeight:et(pe())}))),_Ze=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Qe(ke({transaction:yae,meta:et(QP),version:Ht(VC)})),rewards:Ht(Qe(bw)),blockTime:et(pe()),blockHeight:et(pe())}))),AZe=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Qe(ke({transaction:Eae,meta:et(sF),version:Ht(VC)})),rewards:Ht(Qe(bw)),blockTime:et(pe()),blockHeight:et(pe())}))),SZe=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Qe(ke({transaction:yae,meta:et(sF),version:Ht(VC)})),rewards:Ht(Qe(bw)),blockTime:et(pe()),blockHeight:et(pe())}))),IZe=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),rewards:Ht(Qe(bw)),blockTime:et(pe()),blockHeight:et(pe())}))),NZe=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Qe(ke({transaction:rF,meta:et(QP)})),rewards:Ht(Qe(bw)),blockTime:et(pe())}))),Hq=In(et(ke({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),signatures:Qe(Fe()),blockTime:et(pe())}))),gM=In(et(ke({slot:pe(),meta:et(QP),blockTime:Ht(et(pe())),transaction:rF,version:Ht(VC)}))),Rx=In(et(ke({slot:pe(),transaction:Eae,meta:et(sF),blockTime:Ht(et(pe())),version:Ht(VC)}))),xZe=Js(ke({blockhash:Fe(),lastValidBlockHeight:pe()})),TZe=Js(sh()),RZe=ke({slot:pe(),numTransactions:pe(),numSlots:pe(),samplePeriodSecs:pe()}),kZe=In(Qe(RZe)),PZe=Js(et(ke({feeCalculator:ke({lamportsPerSignature:pe()})}))),OZe=In(Fe()),DZe=In(Fe()),MZe=ke({err:ww,logs:Qe(Fe()),signature:Fe()}),BZe=ke({result:YP(MZe),subscription:pe()}),LZe={"solana-client":"js/1.0.0-maintenance"};class B1{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:d,config:h}=es(u),f=this._buildArgs([],d,void 0,h),p=Uq(f);return l[p]=l[p]??(async()=>{try{const g=await this._rpcRequest("getBlockHeight",f),m=Ke(g,In(pe()));if("error"in m)throw new xt(m.error,"failed to get block height information");return m.result}finally{delete l[p]}})(),await l[p]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=CJe(e),this._rpcWsEndpoint=r||vJe(e),this._rpcClient=LJe(e,s,i,o,a,c),this._rpcRequest=UJe(this._rpcClient),this._rpcBatchRequest=$Je(this._rpcClient),this._rpcWebSocket=new mJe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=Ke(o,Js(pe()));if("error"in a)throw new xt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=Ke(n,In(et(pe())));if("error"in r)throw new xt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Ke(e,In(pe()));if("error"in n)throw new xt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Ke(e,qJe);if("error"in n)throw new xt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=Ke(r,VJe);if("error"in s)throw new xt(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=Ke(s,Js(B5));if("error"in i)throw new xt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=Ke(s,Js(B5));if("error"in i)throw new xt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=es(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=Ke(c,YJe);if("error"in l)throw new xt(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Ke(o,QJe);if("error"in a)throw new xt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Ke(s,JJe);if("error"in i)throw new xt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Ke(s,KJe);if("error"in i)throw new xt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Ke(o,Js(et(kS)));if("error"in a)throw new xt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Ke(o,Js(et(U5)));if("error"in a)throw new xt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=es(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ke(a,Js(Qe(et(U5))));if("error"in c)throw new xt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=es(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ke(a,Js(Qe(et(kS))));if("error"in c)throw new xt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=es(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=Ke(a,In(tZe));if("error"in c)throw new xt(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=es(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:jq(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=Qe(ZJe),u=o.withContext===!0?Ke(c,Js(l)):Ke(c,In(l));if("error"in u)throw new xt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Ke(o,In(Qe(eZe)));if("error"in a)throw new xt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var i;let r;if(typeof e=="string")r=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=lo.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Is(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((c,l)=>{try{r=this.onSignature(n,(d,h)=>{r=void 0;const f={context:h,value:d};c({__type:up.PROCESSED,response:f})},e);const u=new Promise(d=>{r==null?d():s=this._onSubscriptionStateChange(r,h=>{h==="subscribed"&&d()})});(async()=>{if(await u,i)return;const d=await this.getSignatureStatus(n);if(i||d==null)return;const{context:h,value:f}=d;if(f!=null)if(f!=null&&f.err)l(f.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(f.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(f.confirmationStatus==="processed"||f.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:up.PROCESSED,response:{context:h,value:f}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(d=>{const h=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let f=await h();if(!i){for(;f<=r;)if(await Cb(1e3),i||(f=await h(),i))return;d({__type:up.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),l=this.getCancellationPromise(n);let u;try{const d=await Promise.race([l,c,o]);if(d.__type===up.PROCESSED)u=d.response;else throw new aae(s)}finally{i=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(f=>{let p=i,g=null;const m=async()=>{try{const{context:y,value:w}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return g=y.slot,w==null?void 0:w.nonce}catch{return p}};(async()=>{if(p=await m(),!a)for(;;){if(i!==p){f({__type:up.NONCE_INVALID,slotInWhichNonceDidAdvance:g});return}if(await Cb(2e3),a||(p=await m(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let h;try{const f=await Promise.race([d,u,c]);if(f.__type===up.PROCESSED)h=f.response;else{let p;for(;;){const g=await this.getSignatureStatus(o);if(g==null)break;if(g.context.slot<(f.slotInWhichNonceDidAdvance??r)){await Cb(400);continue}p=g;break}if(p!=null&&p.value){const g=e||"finalized",{confirmationStatus:m}=p.value;switch(g){case"processed":case"recent":if(m!=="processed"&&m!=="confirmed"&&m!=="finalized")throw new o_(o);break;case"confirmed":case"single":case"singleGossip":if(m!=="confirmed"&&m!=="finalized")throw new o_(o);break;case"finalized":case"max":case"root":if(m!=="finalized")throw new o_(o);break;default:}h={context:p.context,value:{err:p.value.err}}}else throw new o_(o)}}finally{a=!0,l()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:up.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===up.PROCESSED)a=c.response;else throw new cae(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Ke(e,In(Qe(fZe)));if("error"in n)throw new xt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=Ke(r,pZe);if("error"in s)throw new xt(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=es(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=Ke(i,In(pe()));if("error"in o)throw new xt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=es(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Ke(i,In(Fe()));if("error"in o)throw new xt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=Ke(s,In(Qe(Us)));if("error"in i)throw new xt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);Is(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=Ke(s,yZe);if("error"in i)throw new xt(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=es(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Ke(i,In(pe()));if("error"in o)throw new xt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=Ke(r,FJe);if("error"in s)throw new xt(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=es(r),o=this._buildArgs([e.map(l=>l.toBase58())],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=Ke(a,SJe);if("error"in c)throw new xt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Ke(e,jJe);if("error"in n)throw new xt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=es(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Ke(i,zJe);if("error"in o)throw new xt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Ke(e,HJe);if("error"in n)throw new xt(n.error,"failed to get epoch schedule");const r=n.result;return new pJe(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Ke(e,GJe);if("error"in n)throw new xt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Ke(s,wZe);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Ke(n,kZe);if("error"in r)throw new xt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Ke(s,PZe);if("error"in i)throw new xt(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=so(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=Ke(i,Js(et(pe())));if("error"in o)throw new xt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Ke(s,WJe);if("error"in i)throw new xt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=es(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Ke(i,xZe);if("error"in o)throw new xt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Ke(o,TZe);if("error"in a)throw new xt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Ke(e,In(OJe));if("error"in n)throw new xt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Ke(e,In(Fe()));if("error"in n)throw new xt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ke(o,_Ze);if("error"in a)throw a.error;return a.result}case"none":{const a=Ke(o,CZe);if("error"in a)throw a.error;return a.result}default:{const a=Ke(o,EZe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:d})=>({meta:u,transaction:{...l,message:pM(d,l.message)},version:d}))}:null}}}catch(a){throw new xt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ke(o,SZe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ke(o,IZe);if("error"in a)throw a.error;return a.result}default:{const a=Ke(o,AZe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new xt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=Ke(i,BJe);if("error"in o)throw new xt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Ke(o,gM);if("error"in a)throw new xt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:pM(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=es(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Ke(o,Rx);if("error"in a)throw new xt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=es(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ke(c,Rx);if("error"in l)throw new xt(l.error,"failed to get transactions");return l.result})}async getTransactions(e,n){const{commitment:r,config:s}=es(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ke(c,gM);if("error"in l)throw new xt(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:pM(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=Ke(s,NZe);if("error"in i)throw new xt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Tf(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:Xa.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=Ke(i,In(Qe(pe())));if("error"in o)throw new xt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ke(s,Hq);if("error"in i)throw new xt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ke(s,Hq);if("error"in i)throw new xt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=Ke(s,gM);if("error"in i)throw new xt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Tf(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Xa.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Ke(s,Rx);if("error"in i)throw new xt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Ke(o,Rx);if("error"in a)throw new xt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Ke(i,nZe);if("error"in o)throw new xt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=Ke(i,rZe);if("error"in o)throw new xt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new Fq({key:e,state:Fq.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=tF.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=Ke(r,OZe);if("error"in s)throw new xt(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Cb(100);const r=Date.now()-this._blockhashInfo.lastFetch>=EJe;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Cb(cJe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=es(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Ke(i,Js(pe()));if("error"in o)throw new xt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const g=e.serialize(),m=mn.Buffer.from(g).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const y=n||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(y.innerInstructions=n.innerInstructions);const w=[m,y],C=await this._rpcRequest("simulateTransaction",w),N=Ke(C,Wq);if("error"in N)throw new Error("failed to simulate transaction: "+N.error.message);return N.result}let s;if(e instanceof Xa){let p=e;s=new Xa,s.feePayer=p.feePayer,s.instructions=e.instructions,s.nonceInfo=p.nonceInfo,s.signatures=p.signatures}else s=Xa.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let p=this._disableBlockhashCaching;for(;;){const g=await this._blockhashWithExpiryBlockHeight(p);if(s.lastValidBlockHeight=g.lastValidBlockHeight,s.recentBlockhash=g.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const m=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(m)&&!this._blockhashInfo.transactionSignatures.includes(m)){this._blockhashInfo.simulatedSignatures.push(m);break}else p=!0}}const o=s._compile(),a=o.serialize(),l=s._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const p=(Array.isArray(r)?r:o.nonProgramIds()).map(g=>g.toBase58());u.accounts={encoding:"base64",addresses:p}}i&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const d=[l,u],h=await this._rpcRequest("simulateTransaction",d),f=Ke(h,Wq);if("error"in f){let p;if("data"in f.error&&(p=f.error.data.logs,p&&Array.isArray(p))){const g=`
    `,m=g+p.join(g);console.error(f.error.message,m)}throw new Mq({action:"simulate",signature:"",transactionMessage:f.error.message,logs:p})}return f.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=so(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=Ke(a,DZe);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new Mq({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var i;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=Ke(e,sZe);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=Uq([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Is(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=es(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=Ke(e,oZe);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=es(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:jq(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=Ke(e,BZe);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=Ke(e,cZe);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=Ke(e,uZe);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=Ke(e,dZe);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,l)=>{n(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=Ke(e,hZe);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Et([Tt("instruction"),rC("recentSlot"),Un("bumpSeed")])},FreezeLookupTable:{index:1,layout:Et([Tt("instruction")])},ExtendLookupTable:{index:2,layout:Et([Tt("instruction"),rC(),Fo(Bn(),d0(Tt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Et([Tt("instruction")])},CloseLookupTable:{index:4,layout:Et([Tt("instruction")])}});new st("AddressLookupTab1e1111111111111111111111111");const kx=Object.freeze({RequestUnits:{index:0,layout:Et([Un("instruction"),Tt("units"),Tt("additionalFee")])},RequestHeapFrame:{index:1,layout:Et([Un("instruction"),Tt("bytes")])},SetComputeUnitLimit:{index:2,layout:Et([Un("instruction"),Tt("units")])},SetComputeUnitPrice:{index:3,layout:Et([Un("instruction"),rC("microLamports")])}});class PS{constructor(){}static requestUnits(e){const n=kx.RequestUnits,r=Lo(n,e);return new oo({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=kx.RequestHeapFrame,r=Lo(n,e);return new oo({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=kx.SetComputeUnitLimit,r=Lo(n,e);return new oo({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=kx.SetComputeUnitPrice,r=Lo(n,{microLamports:BigInt(e.microLamports)});return new oo({keys:[],programId:this.programId,data:r})}}PS.programId=new st("ComputeBudget111111111111111111111111111111");Et([Un("numSignatures"),Un("padding"),xl("signatureOffset"),xl("signatureInstructionIndex"),xl("publicKeyOffset"),xl("publicKeyInstructionIndex"),xl("messageDataOffset"),xl("messageDataSize"),xl("messageInstructionIndex")]);new st("Ed25519SigVerify111111111111111111111111111");H2.utils.isValidPrivateKey;H2.getPublicKey;Et([Un("numSignatures"),xl("signatureOffset"),Un("signatureInstructionIndex"),xl("ethAddressOffset"),Un("ethAddressInstructionIndex"),xl("messageDataOffset"),xl("messageDataSize"),Un("messageInstructionIndex"),Kr(20,"ethAddress"),Kr(64,"signature"),Un("recoveryId")]);new st("KeccakSecp256k11111111111111111111111111111");var _ae;new st("StakeConfig11111111111111111111111111111111");class Aae{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}_ae=Aae;Aae.default=new _ae(0,0,st.default);Object.freeze({Initialize:{index:0,layout:Et([Tt("instruction"),eJe(),tJe()])},Authorize:{index:1,layout:Et([Tt("instruction"),Bn("newAuthorized"),Tt("stakeAuthorizationType")])},Delegate:{index:2,layout:Et([Tt("instruction")])},Split:{index:3,layout:Et([Tt("instruction"),Lc("lamports")])},Withdraw:{index:4,layout:Et([Tt("instruction"),Lc("lamports")])},Deactivate:{index:5,layout:Et([Tt("instruction")])},Merge:{index:7,layout:Et([Tt("instruction")])},AuthorizeWithSeed:{index:8,layout:Et([Tt("instruction"),Bn("newAuthorized"),Tt("stakeAuthorizationType"),Gb("authoritySeed"),Bn("authorityOwner")])}});new st("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Et([Tt("instruction"),nJe()])},Authorize:{index:1,layout:Et([Tt("instruction"),Bn("newAuthorized"),Tt("voteAuthorizationType")])},Withdraw:{index:3,layout:Et([Tt("instruction"),Lc("lamports")])},UpdateValidatorIdentity:{index:4,layout:Et([Tt("instruction")])},AuthorizeWithSeed:{index:10,layout:Et([Tt("instruction"),rJe()])}});new st("Vote111111111111111111111111111111111111111");new st("Va1idator1nfo111111111111111111111111111111");ke({name:Fe(),website:Ht(Fe()),details:Ht(Fe()),iconUrl:Ht(Fe()),keybaseUsername:Ht(Fe())});new st("Vote111111111111111111111111111111111111111");Et([Bn("nodePubkey"),Bn("authorizedWithdrawer"),Un("commission"),eo(),Fo(Et([eo("slot"),Tt("confirmationCount")]),d0(Tt(),-8),"votes"),Un("rootSlotValid"),eo("rootSlot"),eo(),Fo(Et([eo("epoch"),Bn("authorizedVoter")]),d0(Tt(),-8),"authorizedVoters"),Et([Fo(Et([Bn("authorizedPubkey"),eo("epochOfLastAuthorizedSwitch"),eo("targetEpoch")]),32,"buf"),eo("idx"),Un("isEmpty")],"priorVoters"),eo(),Fo(Et([eo("epoch"),eo("credits"),eo("prevCredits")]),d0(Tt(),-8),"epochCredits"),Et([eo("slot"),eo("timestamp")],"lastTimestamp")]);const UZe=1e9;var Gq={};const De={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Gq<"u"?Gq.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},$Ze={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=De.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},FZe={bigNumber(t){return t?new ia(t):new ia(0)},multiply(t,e){if(t===void 0||e===void 0)return new ia(0);const n=new ia(t),r=new ia(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},jZe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],WZe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],zZe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],HZe={getERC20Abi:t=>De.USDT_CONTRACT_ADDRESSES.includes(t)?zZe:jZe,getSwapAbi:()=>WZe},bg={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},cn={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function mM(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Jt={setItem(t,e){a_()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(a_())return localStorage.getItem(t)||void 0},removeItem(t){a_()&&localStorage.removeItem(t)},clear(){a_()&&localStorage.clear()}};function a_(){return typeof window<"u"&&typeof localStorage<"u"}function Ik(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const lu={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new st("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new st("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new st("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:De.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${De.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},yM={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5},ua={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[De.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},St={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=St.getActiveNamespace(),e=St.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Jt.setItem(cn.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Jt.getItem(cn.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Jt.removeItem(cn.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Jt.setItem(cn.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Jt.setItem(cn.ACTIVE_CAIP_NETWORK_ID,t),St.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Jt.getItem(cn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Jt.removeItem(cn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=mM(t);Jt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=St.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Jt.setItem(cn.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Jt.getItem(cn.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=mM(t);Jt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Jt.getItem(cn.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=mM(t);return Jt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Jt.setItem(cn.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Jt.getItem(cn.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Jt.removeItem(cn.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Jt.getItem(cn.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Jt.getItem(cn.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Jt.setItem(cn.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Jt.getItem(cn.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Jt.getItem(cn.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Jt.setItem(cn.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=St.getConnectedNamespaces();e.includes(t)||(e.push(t),St.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=St.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),St.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Jt.getItem(cn.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Jt.setItem(cn.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Jt.removeItem(cn.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Jt.getItem(cn.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=St.getBalanceCache();Jt.setItem(cn.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=St.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;St.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=St.getBalanceCache();e[t.caipAddress]=t,Jt.setItem(cn.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Jt.getItem(cn.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=St.getBalanceCache();Jt.setItem(cn.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=St.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),St.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=St.getNativeBalanceCache();e[t.caipAddress]=t,Jt.setItem(cn.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Jt.getItem(cn.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=St.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;St.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=St.getEnsCache();e[t.address]=t,Jt.setItem(cn.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=St.getEnsCache();Jt.setItem(cn.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Jt.getItem(cn.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=St.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;St.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=St.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Jt.setItem(cn.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=St.getIdentityCache();Jt.setItem(cn.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Jt.removeItem(cn.PORTFOLIO_CACHE),Jt.removeItem(cn.NATIVE_BALANCE_CACHE),Jt.removeItem(cn.ENS_CACHE),Jt.removeItem(cn.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Jt.setItem(cn.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Jt.getItem(cn.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=St.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===De.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Jt.setItem(cn.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Jt.getItem(cn.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=St.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Jt.setItem(cn.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Jt.getItem(cn.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=St.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Jt.setItem(cn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=St.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Jt.setItem(cn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(St.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Kt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Kt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ua.TEN_SEC_MS:!0},isAllowedRetry(t,e=ua.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Kt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ua.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Kt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Kt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?St.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Kt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return De.W3M_API_URL},getBlockchainApiUrl(){return De.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return De.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ua.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in De.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function L1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class lN{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await L1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await L1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await L1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await L1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await L1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const GZe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ua.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Kt.isTelegram()){if(Kt.isIos())return t.filter(e=>e!=="google");if(Kt.isMac())return t.filter(e=>e!=="x");if(Kt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Nt=ws({features:ua.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ua.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),yn={state:Nt,subscribeKey(t,e){return Ca(Nt,t,e)},setOptions(t){Object.assign(Nt,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...Nt.remoteFeatures,...t};Nt.remoteFeatures=e,(n=Nt.remoteFeatures)!=null&&n.socials&&(Nt.remoteFeatures.socials=GZe.filterSocialsByPlatform(Nt.remoteFeatures.socials)),(r=Nt.features)!=null&&r.pay&&(Nt.remoteFeatures.email=!1,Nt.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;Nt.features||(Nt.features=ua.DEFAULT_FEATURES);const e={...Nt.features,...t};Nt.features=e,(n=Nt.features)!=null&&n.pay&&Nt.remoteFeatures&&(Nt.remoteFeatures.email=!1,Nt.remoteFeatures.socials=!1)},setProjectId(t){Nt.projectId=t},setCustomRpcUrls(t){Nt.customRpcUrls=t},setAllWallets(t){Nt.allWallets=t},setIncludeWalletIds(t){Nt.includeWalletIds=t},setExcludeWalletIds(t){Nt.excludeWalletIds=t},setFeaturedWalletIds(t){Nt.featuredWalletIds=t},setTokens(t){Nt.tokens=t},setTermsConditionsUrl(t){Nt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Nt.privacyPolicyUrl=t},setCustomWallets(t){Nt.customWallets=t},setIsSiweEnabled(t){Nt.isSiweEnabled=t},setIsUniversalProvider(t){Nt.isUniversalProvider=t},setSdkVersion(t){Nt.sdkVersion=t},setMetadata(t){Nt.metadata=t},setDisableAppend(t){Nt.disableAppend=t},setEIP6963Enabled(t){Nt.enableEIP6963=t},setDebug(t){Nt.debug=t},setEnableWalletConnect(t){Nt.enableWalletConnect=t},setEnableWalletGuide(t){Nt.enableWalletGuide=t},setEnableAuthLogger(t){Nt.enableAuthLogger=t},setEnableWallets(t){Nt.enableWallets=t},setPreferUniversalLinks(t){Nt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ua.SIWX_DEFAULTS))t[e]??(t[e]=n);Nt.siwx=t},setConnectMethodsOrder(t){Nt.features={...Nt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Nt.features={...Nt.features,walletFeaturesOrder:t}},setSocialsOrder(t){Nt.remoteFeatures={...Nt.remoteFeatures,socials:t}},setCollapseWallets(t){Nt.features={...Nt.features,collapseWallets:t}},setEnableEmbedded(t){Nt.enableEmbedded=t},setAllowUnsupportedChain(t){Nt.allowUnsupportedChain=t},setManualWCControl(t){Nt.manualWCControl=t},setEnableNetworkSwitch(t){Nt.enableNetworkSwitch=t},setEnableReconnect(t){Nt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Nt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Nt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Nt.universalProviderConfigOverride},getSnapshot(){return xS(Nt)}},qZe=Object.freeze({enabled:!0,events:[]}),VZe=new lN({baseUrl:Kt.getAnalyticsUrl(),clientId:null}),KZe=5,YZe=60*1e3,dp=ws({...qZe}),QZe={state:dp,subscribeKey(t,e){return Ca(dp,t,e)},async sendError(t,e){if(!dp.enabled)return;const n=Date.now();if(dp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<YZe}).length>=KZe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};dp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=yn.state;await VZe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Kt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){dp.enabled=!0},disable(){dp.enabled=!1},clearEvents(){dp.events=[]}};class iC extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,iC.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,iC):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function qq(t,e){const n=t instanceof iC?t:new iC(t instanceof Error?t.message:String(t),e,t);throw QZe.sendError(n,n.category),n}function Jl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return qq(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return qq(a,e)}},n[r]=i}else n[r]=s}),n}const h0={ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Pd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},JZe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Pd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Pd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Pd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Pd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===De.CHAIN.SOLANA&&t===Pd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Pd.COINBASE.url}/dapp?cb_url=${r}`)}},Ec=ws({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),ZZe={state:Ec,subscribeNetworkImages(t){return ya(Ec.networkImages,()=>t(Ec.networkImages))},subscribeKey(t,e){return Ca(Ec,t,e)},subscribe(t){return ya(Ec,()=>t(Ec))},setWalletImage(t,e){Ec.walletImages[t]=e},setNetworkImage(t,e){Ec.networkImages[t]=e},setChainImage(t,e){Ec.chainImages[t]=e},setConnectorImage(t,e){Ec.connectorImages={...Ec.connectorImages,[t]:e}},setTokenImage(t,e){Ec.tokenImages[t]=e},setCurrencyImage(t,e){Ec.currencyImages[t]=e}},kl=Jl(ZZe),XZe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},wM=ws({networkImagePromises:{}}),eXe={async fetchWalletImage(t){if(t)return await Xt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(wM.networkImagePromises[t]||(wM.networkImagePromises[t]=Xt._fetchNetworkImage(t)),await wM.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return kl.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return kl.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return kl.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return kl.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return kl.state.connectorImages[t.imageId]},getChainImage(t){return kl.state.networkImages[XZe[t]]}},hp=ws({message:"",variant:"info",open:!1}),tXe={state:hp,subscribeKey(t,e){return Ca(hp,t,e)},open(t,e){const{debug:n}=yn.state,{shortMessage:r,longMessage:s}=t;n&&(hp.message=r,hp.variant=e,hp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){hp.open=!1,hp.message="",hp.variant="info"}},Sae=Jl(tXe),nXe=Kt.getAnalyticsUrl(),rXe=new lN({baseUrl:nXe,clientId:null}),sXe=["MODAL_CREATED"],Sh=ws({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Os={state:Sh,subscribe(t){return ya(Sh,()=>t(Sh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=yn.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=wr.state.address;if(sXe.includes(t.data.event)||typeof window>"u")return;await rXe.post({path:"/e",params:Os.getSdkProperties(),body:{eventId:Kt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Sh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===De.HTTP_STATUS_CODES.FORBIDDEN&&!Sh.reportedErrors.FORBIDDEN&&(Sae.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${a_()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Sh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Sh.timestamp=Date.now(),Sh.data=t,((e=yn.state.features)!=null&&e.analytics||t.event==="INITIALIZE")&&Os._sendAnalyticsEvent(Sh)}},iXe=Kt.getApiUrl(),Da=new lN({baseUrl:iXe,clientId:null}),oXe=40,Vq=4,aXe=20,En=ws({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Xt={state:En,subscribeKey(t,e){return Ca(En,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=yn.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return yn.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Da.baseUrl}/getWalletImage/${t}`,n=await Da.getBlob({path:e,params:Xt._getSdkProperties()});kl.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Da.baseUrl}/public/getAssetImage/${t}`,n=await Da.getBlob({path:e,params:Xt._getSdkProperties()});kl.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Da.baseUrl}/public/getAssetImage/${t}`,n=await Da.getBlob({path:e,params:Xt._getSdkProperties()});kl.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Da.baseUrl}/public/getCurrencyImage/${t}`,n=await Da.getBlob({path:e,params:Xt._getSdkProperties()});kl.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Da.baseUrl}/public/getTokenImage/${t}`,n=await Da.getBlob({path:e,params:Xt._getSdkProperties()});kl.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Kt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Pd.COINBASE.id?!0:ce.state.activeChain==="solana"&&(n.id===Pd.SOLFLARE.id||n.id===Pd.PHANTOM.id)):t},async fetchProjectConfig(){return(await Da.get({path:"/appkit/v1/config",params:Xt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Da.get({path:"/projects/v1/origins",params:Xt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===De.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=De.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=ce.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!eXe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Xt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Mt.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Xt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Xt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Xt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Xt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Pd).map(o=>o.id));const r=await Da.get({path:"/getWallets",params:{...Xt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Xt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=yn.state;if(t!=null&&t.length){const e={...Xt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Vq,include:t},{data:n}=await Xt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Xt._fetchWalletImage(i))),En.featured=r,En.allFeatured=r}},async fetchRecommendedWallets(){try{En.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=yn.state,r=[...e??[],...n??[]].filter(Boolean),s=ce.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Vq,include:t,exclude:r,chains:s},{data:o,count:a}=await Xt.fetchWallets(i),c=St.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Xt._fetchWalletImage(d))),En.recommended=o,En.allRecommended=o,En.count=a??0}catch{}finally{En.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=yn.state,s=ce.getRequestedCaipNetworkIds().join(","),i=[...En.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:oXe,include:e,exclude:i,chains:s},{data:a,count:c}=await Xt.fetchWallets(o),l=a.slice(0,aXe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Xt._fetchWalletImage(u))),En.wallets=Kt.uniqueBy([...En.wallets,...Xt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),En.count=c>En.count?c:En.count,En.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Xt.fetchWallets(e);n&&n.forEach(r=>{En.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=yn.state,s=ce.getRequestedCaipNetworkIds().join(",");En.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Xt.fetchWallets(i);Os.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Xt._fetchWalletImage(c)),Kt.wait(300)]),En.search=Xt._filterOutExtensions(o)},initPromise(t,e){const n=En.promises[t];return n||(En.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Xt.initPromise("connectorImages",Xt.fetchConnectorImages),e&&Xt.initPromise("featuredWallets",Xt.fetchFeaturedWallets),n&&Xt.initPromise("recommendedWallets",Xt.fetchRecommendedWallets),r&&Xt.initPromise("networkImages",Xt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=yn.state.features)!=null&&t.analytics&&Xt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Da.get({path:"/getAnalyticsConfig",params:Xt._getSdkProperties()});yn.setFeatures({analytics:t})}catch{yn.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){En.featured=En.allFeatured,En.recommended=En.allRecommended;return}const e=ce.getRequestedCaipNetworkIds().join(",");En.featured=En.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.recommended=En.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.filteredWallets=En.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){En.filteredWallets=[]},setFilterByNamespace(t){if(!t){En.featured=En.allFeatured,En.recommended=En.allRecommended;return}const e=ce.getRequestedCaipNetworkIds().join(",");En.featured=En.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.recommended=En.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.filteredWallets=En.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Br=ws({view:"Connect",history:["Connect"],transactionStack:[]}),cXe={state:Br,subscribeKey(t,e){return Ca(Br,t,e)},pushTransactionStack(t){Br.transactionStack.push(t)},popTransactionStack(t){const e=Br.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),hn.goBack();break;case"cancel":s==null||s(),hn.goBack();break}},push(t,e){t!==Br.view&&(Br.view=t,Br.history.push(t),Br.data=e)},reset(t,e){Br.view=t,Br.history=[t],Br.data=e},replace(t,e){Br.history.at(-1)===t||(Br.view=t,Br.history[Br.history.length-1]=t,Br.data=e)},goBack(){var r;const t=ce.state.activeCaipAddress,e=hn.state.view==="ConnectingFarcaster",n=!t&&e;if(Br.history.length>1){Br.history.pop();const[s]=Br.history.slice(-1);s&&(t&&s==="Connect"?Br.view="Account":Br.view=s)}else ss.close();(r=Br.data)!=null&&r.wallet&&(Br.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){wr.setFarcasterUrl(void 0,ce.state.activeChain);const a=Mt.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=xS(yn.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Br.history.length>1){Br.history=Br.history.slice(0,t+1);const[e]=Br.history.slice(-1);e&&(Br.view=e)}},goBackOrCloseModal(){hn.state.history.length>1?hn.goBack():ss.close()}},hn=Jl(cXe),Ih=ws({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),$5={state:Ih,subscribe(t){return ya(Ih,()=>t(Ih))},setThemeMode(t){Ih.themeMode=t;try{const e=Mt.getAuthConnector();if(e){const n=$5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Ik(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ih.themeVariables={...Ih.themeVariables,...t};try{const e=Mt.getAuthConnector();if(e){const n=$5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Ik(Ih.themeVariables,Ih.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return xS(Ih)}},Px=Jl($5),Iae={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ar=ws({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Iae},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),lXe={state:ar,subscribe(t){return ya(ar,()=>{t(ar)})},subscribeKey(t,e){return Ca(ar,t,e)},initialize(t){t.forEach(e=>{const n=St.getConnectedConnectorId(e);n&&Mt.setConnectorId(n,e)})},setActiveConnector(t){t&&(ar.activeConnector=G0(t))},setConnectors(t){t.filter(s=>!ar.allConnectors.some(i=>i.id===s.id&&Mt.getConnectorName(i.name)===Mt.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ar.allConnectors.push(G0(s))});const n=Mt.getEnabledNamespaces(),r=Mt.getEnabledConnectors(n);ar.connectors=Mt.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ar.filterByNamespaceMap).forEach(e=>{ar.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ar.filterByNamespaceMap[e]=!0}),Mt.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ar.filterByNamespaceMap[t]=e,Mt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Mt.getEnabledNamespaces(),e=Mt.getEnabledConnectors(t),n=Mt.areAllNamespacesEnabled();ar.connectors=Mt.mergeMultiChainConnectors(e),n?Xt.clearFilterByNamespaces():Xt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ar.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ar.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ar.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Mt.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===De.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Mt.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===De.CONNECTOR_ID.AUTH){const s=t,i=xS(yn.state),o=Px.getSnapshot().themeMode,a=Px.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Ik(a,o)}),Mt.setConnectors([t])}else Mt.setConnectors([t])},getAuthConnector(t){var r;const e=t||ce.state.activeChain,n=ar.connectors.find(s=>s.id===De.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ar.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ar.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ar.allConnectors.filter(r=>r.chain===ce.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=xS(yn.state),r=Px.getSnapshot().themeMode,s=Px.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Ik(s,r)})},getConnectorsByNamespace(t){const e=ar.allConnectors.filter(n=>n.chain===t);return Mt.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ce.checkIfSmartAccountEnabled()&&Rf(t)===h0.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Mt.getConnector(t.id,t.rdns);JZe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,ce.state.activeChain),e?hn.push("ConnectingExternal",{connector:e}):hn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Mt.getConnectorsByNamespace(t):Mt.mergeMultiChainConnectors(ar.allConnectors)},setFilterByNamespace(t){ar.filterByNamespace=t,ar.connectors=Mt.getConnectors(t),Xt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ar.activeConnectorIds={...ar.activeConnectorIds,[e]:t},St.setConnectedConnectorId(e,t))},removeConnectorId(t){ar.activeConnectorIds={...ar.activeConnectorIds,[t]:void 0},St.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ar.activeConnectorIds[t]},isConnected(t){return t?!!ar.activeConnectorIds[t]:Object.values(ar.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ar.activeConnectorIds={...Iae}}},Mt=Jl(lXe),uXe=1e3,U1={checkNamespaceConnectorId(t,e){return Mt.getConnectorId(t)===e},isSocialProvider(t){return ua.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Mt.setActiveConnector(e),s==null||s(Kt.isMobile()&&t),r){const l=ss.subscribeKey("open",u=>{u||(hn.state.view!==r&&hn.replace(r),l(),a(new Error("Modal closed")))})}const c=ce.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&ss.close(),c(),o(bg.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=ce.subscribeKey("activeCaipAddress",s=>{s&&(ss.close(),r(),e(bg.parseCaipAddress(s)))});Pt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=wr.state.socialWindow,i=wr.state.socialProvider,o=!1,a=null;const c=ce.subscribeKey("activeCaipAddress",l=>{l&&(e&&ss.close(),c())});return new Promise((l,u)=>{async function d(f){var p,g;if((p=f.data)!=null&&p.resultUri)if(f.origin===De.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=Mt.getAuthConnector();if(m&&!o){s&&(s.close(),wr.setSocialWindow(void 0,ce.state.activeChain),s=wr.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){St.setConnectedSocialProvider(i),await Pt.connectExternal({id:m.id,type:m.type,socialUri:y},m.chain);const w=ce.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(bg.parseCaipAddress(w)),Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(g=ce.getActiveCaipNetwork())==null?void 0:g.caipNetworkId}})}}}catch{i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(wr.setSocialProvider(t,ce.state.activeChain),i=wr.state.socialProvider,Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=ss.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Mt.getAuthConnector();if(p&&!wr.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();wr.setFarcasterUrl(g,ce.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Mt.getAuthConnector();a=Kt.returnOpenHref(`${De.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){wr.setSocialWindow(a,ce.state.activeChain),s=wr.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=ss.subscribeKey("open",c=>{c||(hn.state.view!==e&&hn.replace(e),a(),i(new Error("Modal closed")))})}const o=ce.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&ss.close(),o(),s(bg.parseCaipAddress(a)))})})},async updateEmail(){const t=St.getConnectedConnectorId(ce.state.activeChain),e=Mt.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==De.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return hn.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(ss.close(),clearInterval(i),o(),r({email:a}))},uXe),o=ss.subscribeKey("open",a=>{a||(hn.state.view!=="Connect"&&hn.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ce.checkIfSmartAccountEnabled()&&Rf(t)===h0.ACCOUNT_TYPES.EOA}};function Nae(){var r,s;const t=((r=ce.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ce.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ua.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Rf(t){var n;return(n=ce.getAccountData(t))==null?void 0:n.preferredAccountType}const xae={getConnectionStatus(t,e){const n=Mt.state.activeConnectorIds[e],r=Pt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=yn.state.remoteFeatures)!=null&&a.multiWallet),n=Mt.state.activeConnectorIds[t],r=Pt.getConnections(t),i=(Pt.state.recentConnections.get(t)??[]).filter(c=>Mt.getConnectorById(c.connectorId)),o=xae.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Ym=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),gi=ws({...Ym}),dXe={state:gi,subscribeKey(t,e){return Ca(gi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Kt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){gi.message=Ym.message,gi.variant=Ym.variant,gi.svg=Ym.svg,gi.open=Ym.open,gi.autoClose=Ym.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Ym.autoClose}){gi.open?(gi.open=!1,setTimeout(()=>{gi.message=t,gi.variant=n,gi.svg=e,gi.open=!0,gi.autoClose=r},150)):(gi.message=t,gi.variant=n,gi.svg=e,gi.open=!0,gi.autoClose=r)}},vg=dXe,_s=ws({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),hXe={state:_s,subscribe(t){return ya(_s,()=>t(_s))},setLastNetworkInView(t){_s.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");_s.loading=!0;try{const n=await on.fetchTransactions({account:t,cursor:_s.next,chainId:(e=ce.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=TT.filterSpamTransactions(n.data),s=TT.filterByConnectedChain(r),i=[..._s.transactions,...s];_s.loading=!1,_s.transactions=i,_s.transactionsByYear=TT.groupTransactionsByYearAndMonth(_s.transactionsByYear,s),_s.empty=i.length===0,_s.next=n.next?n.next:void 0}catch{const r=ce.state.activeChain;Os.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:yn.state.projectId,cursor:_s.next,isSmartAccount:Rf(r)===h0.ACCOUNT_TYPES.SMART_ACCOUNT}}),vg.showError("Failed to fetch transactions"),_s.loading=!1,_s.empty=!0,_s.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){_s.next=void 0},resetTransactions(){_s.transactions=[],_s.transactionsByYear={},_s.lastNetworkInView=void 0,_s.loading=!1,_s.empty=!1,_s.next=void 0}},TT=Jl(hXe,"API_ERROR"),Yn=ws({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Um;const fXe={state:Yn,subscribe(t){return ya(Yn,()=>t(Yn))},subscribeKey(t,e){return Ca(Yn,t,e)},_getClient(){return Yn._client},setClient(t){Yn._client=G0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Pt.syncStorageConnections(e)},syncStorageConnections(t){const e=St.getConnections(),n=t??Array.from(ce.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Yn.recentConnections);i.set(r,s),Yn.recentConnections=i}},getConnections(t){return t?Yn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Pt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Kt.isTelegram()||Kt.isSafari()&&Kt.isIos()){if(Um){await Um,Um=void 0;return}if(!Kt.isPairingExpired(Yn==null?void 0:Yn.wcPairingExpiry)){const s=Yn.wcUri;Yn.wcUri=s;return}Um=(e=(t=Pt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Pt.state.status="connecting",await Um,Um=void 0,Yn.wcPairingExpiry=void 0,Pt.state.status="connected"}else await((r=(n=Pt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Pt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&ce.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Pt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||ce.state.activeChain;e&&Mt.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;ss.setLoading(!0,ce.state.activeChain);const n=Mt.getAuthConnector();n&&(wr.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),St.setPreferredAccountTypes(Object.entries(ce.state.chains).reduce((s,[i,o])=>{const a=i,c=Rf(a);return c!==void 0&&(s[a]=c),s},{})),await Pt.reconnectExternal(n),ss.setLoading(!1,ce.state.activeChain),Os.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Pt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Pt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Pt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Pt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Pt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Pt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Pt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Pt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Pt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Pt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Pt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Pt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Yn.wcUri=void 0,Yn.wcPairingExpiry=void 0,Yn.wcLinking=void 0,Yn.recentWallet=void 0,Yn.status="disconnected",TT.resetTransactions(),St.deleteWalletConnectDeepLink()},resetUri(){Yn.wcUri=void 0,Yn.wcPairingExpiry=void 0,Um=void 0},finalizeWcConnection(){var n,r,s;const{wcLinking:t,recentWallet:e}=Pt.state;t&&St.setWalletConnectDeepLink(t),e&&St.setAppKitRecent(e),Os.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=hn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=ce.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(t){Yn.wcBasic=t},setUri(t){Yn.wcUri=t,Yn.wcPairingExpiry=Kt.getPairingExpiry()},setWcLinking(t){Yn.wcLinking=t},setWcError(t){Yn.wcError=t,Yn.buffering=!1},setRecentWallet(t){Yn.recentWallet=t},setBuffering(t){Yn.buffering=t},setStatus(t){Yn.status=t},setIsSwitchingConnection(t){Yn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Pt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new iC("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Yn.connections);n.set(e,t),Yn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=wr.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&U1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Pt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Mt.getConnectorById(t.connectorId),s=t.connectorId===De.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Pt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Pt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Mt.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===De.CONNECTOR_ID.AUTH,a=t.connectorId===De.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&U1.isSocialProvider(i)){const{address:d}=await U1.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){ss.open({view:"ConnectingFarcaster"})},onConnect(){hn.replace("ProfileWallets")}});c=d}else{const{address:d}=await U1.connectEmail({closeModalOnConnect:r,onOpen(){ss.open({view:"EmailLogin"})},onConnect(){hn.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await U1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){ss.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){hn.replace("ProfileWallets")}});c=d}else{const d=await Pt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Pt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=wr.getCaipAddress(n);if(o){const{address:c}=bg.parseCaipAddress(o);i=c}const a=xae.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Pt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Pt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Pt=Jl(fXe),db=ws({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),yv={state:db,subscribe(t){return ya(db,()=>t(db))},subscribeOpen(t){return Ca(db,"open",t)},set(t){Object.assign(db,{...db,...t})}},pXe={async getTokenList(){var r;const t=ce.state.activeCaipNetwork,e=await on.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=ce.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Pt==null?void 0:Pt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await on.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await on.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Pt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await iF.getMyTokensWithBalance(t);return wr.setTokenBalance(e,ce.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Nae(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Nr=ws({tokenBalances:[],loading:!1}),gXe={state:Nr,subscribe(t){return ya(Nr,()=>t(Nr))},subscribeKey(t,e){return Ca(Nr,t,e)},setToken(t){t&&(Nr.token=G0(t))},setTokenAmount(t){Nr.sendTokenAmount=t},setReceiverAddress(t){Nr.receiverAddress=t},setReceiverProfileImageUrl(t){Nr.receiverProfileImageUrl=t},setReceiverProfileName(t){Nr.receiverProfileName=t},setNetworkBalanceInUsd(t){Nr.networkBalanceInUSD=t},setLoading(t){Nr.loading=t},async sendToken(){var t;try{switch(Er.setLoading(!0),(t=ce.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Er.sendEvmToken();return;case"solana":await Er.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Er.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=ce.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Rf(t);if(!Er.state.sendTokenAmount||!Er.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Er.state.token)throw new Error("A token is required");(n=Er.state.token)!=null&&n.address?(Os.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===h0.ACCOUNT_TYPES.SMART_ACCOUNT,token:Er.state.token.address,amount:Er.state.sendTokenAmount,network:((r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Er.sendERC20Token({receiverAddress:Er.state.receiverAddress,tokenAddress:Er.state.token.address,sendTokenAmount:Er.state.sendTokenAmount,decimals:Er.state.token.quantity.decimals})):(Os.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===h0.ACCOUNT_TYPES.SMART_ACCOUNT,token:Er.state.token.symbol||"",amount:Er.state.sendTokenAmount,network:((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Er.sendNativeToken({receiverAddress:Er.state.receiverAddress,sendTokenAmount:Er.state.sendTokenAmount,decimals:Er.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Nr.loading=!0;const e=(i=ce.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ce.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ce.state.activeCaipAddress,s=r?Kt.getPlainAddress(r):void 0;if(Nr.lastRetry&&!Kt.isAllowedRetry(Nr.lastRetry,30*ua.ONE_SEC_MS))return Nr.loading=!1,[];try{if(s&&e&&n){const a=await iF.getMyTokensWithBalance();return Nr.tokenBalances=a,Nr.lastRetry=void 0,a}}catch(a){Nr.lastRetry=Date.now(),t==null||t(a),vg.showError("Token Balance Unavailable")}finally{Nr.loading=!1}return[]},fetchNetworkBalance(){if(Nr.tokenBalances.length===0)return;const t=pXe.mapBalancesToSwapTokens(Nr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Nae());e&&(Nr.networkBalanceInUSD=e?FZe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;hn.pushTransactionStack({});const e=t.receiverAddress,n=wr.state.address,r=Pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Pt.sendTransaction({chainNamespace:De.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Os.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Rf("eip155")===h0.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Er.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Pt._getClient())==null||a.updateBalance("eip155"),Er.resetSend()},async sendERC20Token(t){hn.pushTransactionStack({onSuccess(){hn.replace("Account")}});const e=Pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(wr.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Kt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Pt.writeContract({fromAddress:wr.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:HZe.getERC20Abi(n),chainNamespace:De.CHAIN.EVM}),Er.resetSend()}},async sendSolanaToken(){var t;if(!Er.state.sendTokenAmount||!Er.state.receiverAddress)throw new Error("An amount and receiver address are required");hn.pushTransactionStack({onSuccess(){hn.replace("Account")}}),await Pt.sendTransaction({chainNamespace:"solana",to:Er.state.receiverAddress,value:Er.state.sendTokenAmount}),(t=Pt._getClient())==null||t.updateBalance("solana"),Er.resetSend()},resetSend(){Nr.token=void 0,Nr.sendTokenAmount=void 0,Nr.receiverAddress=void 0,Nr.receiverProfileImageUrl=void 0,Nr.receiverProfileName=void 0,Nr.loading=!1,Nr.tokenBalances=[]}},Er=Jl(gXe),bM={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Ox={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Xe=ws({chains:pYe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),mXe={state:Xe,subscribe(t){return ya(Xe,()=>{t(Xe)})},subscribeKey(t,e){return Ca(Xe,t,e)},subscribeChainProp(t,e,n){let r;return ya(Xe.chains,()=>{var i;const s=n||Xe.activeChain;if(s){const o=(i=Xe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=St.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=yn.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Xe.noAdapters=!0),Xe.noAdapters||(Xe.activeChain=a==null?void 0:a.namespace,Xe.activeCaipNetwork=i,ce.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Xe.activeChain&&yv.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=St.getPreferredAccountTypes()||{},f={...yn.state.defaultAccountTypes,...h};ce.state.chains.set(u,{namespace:u,networkState:ws({...Ox,caipNetwork:d==null?void 0:d[0]}),accountState:ws({...bM,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),ce.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Xe.activeChain===t){const r=Array.from(Xe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&ce.setActiveCaipNetwork(s)}}Xe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Xe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Ox,caipNetwork:r[0]},accountState:bM,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),ce.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Xe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Xe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),ce.setRequestedCaipNetworks(r,t.chainNamespace),Mt.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Xe.chains.get(t);if(n){const o=((r=Xe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&ce.setActiveCaipNetwork(n.caipNetworks[0]),Xe.chains.set(t,{...n,caipNetworks:a}),ce.setRequestedCaipNetworks(a||[],t),a.length===0&&Mt.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Xe.chains.get(t);n&&(n.networkState={...n.networkState||Ox,...e},Xe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Xe.chains.get(t);if(r){const s={...r.accountState||bM,...e};Xe.chains.set(t,{...r,accountState:s}),(Xe.chains.size===1||Xe.activeChain===t)&&(e.caipAddress&&(Xe.activeCaipAddress=e.caipAddress),wr.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Xe.chains.get(t);if(n){const r={...n.networkState||Ox,...e};Xe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){ce.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Xe.activeChain=t;const e=t?Xe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Xe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Xe.activeCaipNetwork=n,ce.setChainNetworkData(t,{caipNetwork:n}),St.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),yv.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Xe.activeChain!==t.chainNamespace&&ce.setIsSwitchingNamespace(!0);const e=Xe.chains.get(t.chainNamespace);Xe.activeChain=t.chainNamespace,Xe.activeCaipNetwork=t,ce.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Xe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Xe.activeCaipAddress=void 0,ce.setAccountProp("caipAddress",Xe.activeCaipAddress,t.chainNamespace),e&&wr.replaceState(e.accountState),Er.resetSend(),yv.set({activeChain:Xe.activeChain,selectedNetworkId:(i=Xe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),St.setActiveCaipNetworkId(t.caipNetworkId),!ce.checkIfSupportedNetwork(t.chainNamespace)&&yn.state.enableNetworkSwitch&&!yn.state.allowUnsupportedChain&&!Pt.state.wcBasic&&ce.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Xe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==ce.state.activeChain,n=(s=ce.getNetworkData(t))==null?void 0:s.caipNetwork,r=ce.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await ce.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=ce.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=ce.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Xe.activeCaipNetwork)==null?void 0:a.id)})),s=ce.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&ss.close()}catch{hn.goBack()}Os.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Xe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Xe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Xe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Xe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Xe.activeChain;if(e&&(n=e),!n)return;const r=(s=Xe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Xe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Xe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Kt.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return Xe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=ce.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){ce.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=ce.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Mt.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Xe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=ce.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Xe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Xe.activeCaipNetwork},getActiveCaipAddress(){return Xe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Xe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=ce.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());ce.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Xe.activeCaipNetwork,r=ce.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Xe.activeChain)return!0;const e=ce.getRequestedCaipNetworks(Xe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){ce.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=$Ze.caipNetworkIdToNumber((r=Xe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Xe.activeChain;if(!e||!t)return!1;const n=ce.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){ss.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Xe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ua.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ce.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=yn.state.defaultAccountTypes[e],r=ce.getAccountProp("preferredAccountType",e);Xe.activeCaipAddress=void 0,ce.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Mt.removeConnectorId(e)},setIsSwitchingNamespace(t){Xe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Xe.chains.forEach(s=>{De.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Xe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=ce.state.chains.get(t))==null?void 0:e.accountState:wr.state},getNetworkData(t){var n;const e=t||Xe.activeChain;if(e)return(n=ce.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=ce.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Mt.state.filterByNamespace;return(t?[Xe.chains.get(t)]:Array.from(Xe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?ce.getRequestedCaipNetworks(t):ce.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Xe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Xe.lastConnectedSIWECaipNetwork}},ce=Jl(mXe),yXe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Tae=Kt.getBlockchainApiUrl(),Ma=ws({clientId:null,api:new lN({baseUrl:Tae,clientId:null}),supportedChains:{http:[],ws:[]}}),on={state:Ma,async get(t){const{st:e,sv:n}=on.getSdkProperties(),r=yn.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ma.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=yn.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ma.supportedChains.http.length||await on.getSupportedNetworks()}catch{return!1}return Ma.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await on.get({path:"v1/supported-chains"});return Ma.supportedChains=t,t}catch{return Ma.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await on.isNetworkSupported(e))return{avatar:"",name:""};const r=St.getIdentityFromCacheForAddress(t);if(r)return r;const s=await on.get({path:`/v1/identity/${t}`,params:{sender:ce.state.activeCaipAddress?Kt.getPlainAddress(ce.state.activeCaipAddress):void 0}});return St.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var o;return await on.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?on.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await on.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?on.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await on.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await on.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ma.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:yn.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await on.isNetworkSupported((r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?on.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=on.getSdkProperties();if(!await on.isNetworkSupported((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return on.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await on.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ma.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ua.CONVERT_SLIPPAGE_TOLERANCE},projectId:yn.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=on.getSdkProperties();if(!await on.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return on.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=on.getSdkProperties();if(!await on.isNetworkSupported((l=ce.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return vg.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=St.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await on.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return St.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await on.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await on.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/profile/reverse/${t}`,params:{sender:wr.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await on.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await on.isNetworkSupported((i=ce.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ma.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await on.isNetworkSupported((a=ce.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ma.api.post({path:"/v1/generators/onrampurl",params:{projectId:yn.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await on.isNetworkSupported((e=ce.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await on.get({path:"/v1/onramp/options"})}catch{return yXe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await on.isNetworkSupported((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ma.api.post({path:"/v1/onramp/quote",params:{projectId:yn.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await on.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await on.isNetworkSupported((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ma.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:yn.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ma.clientId=t,Ma.api=new lN({baseUrl:Tae,clientId:t})}},vM={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return wm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},iF={async getMyTokensWithBalance(t){const e=wr.state.address,n=ce.state.activeCaipNetwork,r=Mt.getConnectorId("eip155")===De.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=St.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===De.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await on.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=vM.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Pt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Pt.walletGetAssets({account:t,chainFilter:[s]});if(!vM.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>vM.createBalance(l,e.caipNetworkId));return St.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},od=ws({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),wXe={state:od,replaceState(t){t&&Object.assign(od,G0(t))},subscribe(t){return ce.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return ce.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){ce.setAccountProp("status",t,e)},getCaipAddress(t){return ce.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Kt.getPlainAddress(t):void 0;e===ce.state.activeChain&&(ce.state.activeCaipAddress=t),ce.setAccountProp("caipAddress",t,e),ce.setAccountProp("address",n,e)},setBalance(t,e,n){ce.setAccountProp("balance",t,n),ce.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){ce.setAccountProp("profileName",t,e)},setProfileImage(t,e){ce.setAccountProp("profileImage",t,e)},setUser(t,e){ce.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ce.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ce.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ce.setAccountProp("currentTab",t,ce.state.activeChain)},setTokenBalance(t,e){t&&ce.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ce.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=ce.getAccountProp("addressLabels",n)||new Map;r.set(t,e),ce.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=ce.getAccountProp("addressLabels",e)||new Map;n.delete(t),ce.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){ce.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ce.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ce.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ce.setAccountProp("socialWindow",t?G0(t):void 0,e)},setFarcasterUrl(t,e){ce.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;od.balanceLoading=!0;const e=(i=ce.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ce.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ce.state.activeCaipAddress,s=r?Kt.getPlainAddress(r):void 0;if(od.lastRetry&&!Kt.isAllowedRetry(od.lastRetry,30*ua.ONE_SEC_MS))return od.balanceLoading=!1,[];try{if(s&&e&&n){const a=await iF.getMyTokensWithBalance();return wr.setTokenBalance(a,n),od.lastRetry=void 0,od.balanceLoading=!1,a}}catch(a){od.lastRetry=Date.now(),t==null||t(a),vg.showError("Token Balance Unavailable")}finally{od.balanceLoading=!1}return[]},resetAccount(t){ce.resetAccount(t)}},wr=Jl(wXe),bXe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=ce.state.activeCaipNetwork,r=hn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=wr.getCaipAddress(ce.state.activeChain),o=t.chainNamespace!==ce.state.activeChain,a=wr.getCaipAddress(t.chainNamespace),l=Mt.getConnectorId(ce.state.activeChain)===De.CONNECTOR_ID.AUTH,u=De.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?hn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?hn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):hn.push("SwitchNetwork",{...r,network:t})}},Ba=ws({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),vXe={state:Ba,subscribe(t){return ya(Ba,()=>t(Ba))},subscribeKey(t,e){return Ca(Ba,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=ce.state.activeChain,r=e&&e!==n,s=(i=ce.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Pt.state.wcBasic?Xt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Xt.prefetch(),Mt.setFilterByNamespace(t==null?void 0:t.namespace),ss.setLoading(!0,e),e&&r){const a=((o=ce.getNetworkData(e))==null?void 0:o.caipNetwork)||ce.getRequestedCaipNetworks(e)[0];a&&bXe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=ce.state.noAdapters;yn.state.manualWCControl||a&&!s?Kt.isMobile()?hn.reset("AllWallets"):hn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?hn.reset(t.view,t.data):s?hn.reset("Account"):hn.reset("Connect")}Ba.open=!0,yv.set({open:!0}),Os.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=yn.state.enableEmbedded,e=!!ce.state.activeCaipAddress;Ba.open&&Os.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ba.open=!1,hn.reset("Connect"),ss.clearLoading(),t?e?hn.replace("Account"):hn.push("Connect"):yv.set({open:!1}),Pt.resetUri()},setLoading(t,e){e&&Ba.loadingNamespaceMap.set(e,t),Ba.loading=t,yv.set({loading:t})},clearLoading(){Ba.loadingNamespaceMap.clear(),Ba.loading=!1},shake(){Ba.shake||(Ba.shake=!0,setTimeout(()=>{Ba.shake=!1},500))}},ss=Jl(vXe),Kq=2147483648,EXe={convertEVMChainIdToCoinType(t){if(t>=Kq)throw new Error("Invalid chainId");return(Kq|t)>>>0}},dl=ws({suggestions:[],loading:!1}),CXe={state:dl,subscribe(t){return ya(dl,()=>t(dl))},subscribeKey(t,e){return Ca(dl,t,e)},async resolveName(t){var e,n;try{return await on.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await on.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{dl.loading=!0,dl.suggestions=[];const e=await on.getEnsNameSuggestions(t);return dl.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],dl.suggestions}catch(e){const n=RT.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{dl.loading=!1}},async getNamesForAddress(t){try{if(!ce.state.activeCaipNetwork)return[];const n=St.getEnsFromCacheForAddress(t);if(n)return n;const r=await on.reverseLookupEnsName({address:t});return St.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=RT.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=ce.state.activeCaipNetwork,n=wr.state.address,r=Mt.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");dl.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});hn.pushTransactionStack({onCancel(){hn.replace("RegisterAccountName")}});const i=await Pt.signMessage(s);dl.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=EXe.convertEVMChainIdToCoinType(Number(o));await on.registerEnsName({coinType:a,address:n,signature:i,message:s}),wr.setProfileName(t,e.chainNamespace),hn.replace("RegisterAccountNameSuccess")}catch(s){const i=RT.parseEnsApiError(s,`Error registering name ${t}`);throw hn.replace("RegisterAccountName"),new Error(i)}finally{dl.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},RT=Jl(CXe);let $m=null;const xp={getSIWX(){return yn.state.siwx},async initializeIfEnabled(){var i;const t=yn.state.siwx,e=ce.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(ce.checkIfSupportedNetwork(n))try{if($m&&await $m,(await t.getSessions(`${n}:${r}`,s)).length)return;await ss.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Pt._getClient())==null?void 0:i.disconnect().catch(console.error)),hn.reset("Connect"),vg.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=yn.state.siwx,e=Kt.getPlainAddress(ce.getActiveCaipAddress()),n=ce.getActiveCaipNetwork(),r=Pt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Mt.getConnectorId(n.chainNamespace)===De.CONNECTOR_ID.AUTH&&hn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ce.setLastConnectedSIWECaipNetwork(n),ss.close(),Os.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ss.state.open||hn.state.view==="ApproveTransaction")&&await ss.open({view:"SIWXSignMessage"}),vg.showError("Error signing message"),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=ce.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Kt.getPlainAddress(ce.getActiveCaipAddress())||""));s&&s.length>0?await ce.switchActiveNetwork(r):await Pt.disconnect()}else await Pt.disconnect()}else ss.close();ss.close(),Os.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=ce.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Kt.getPlainAddress(ce.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=yn.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=ce.getActiveCaipAddress();n=Kt.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=ce.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=hn.state.view==="ApproveTransaction",r=hn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=xp.getSIWX();if(!i||!s.includes(De.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=ce.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await xp.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if($m)return $m;const r=xp.getSIWX();return r?($m=r.addSession({data:t,message:e,signature:n}).finally(()=>{$m=null}),$m):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=xp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=ce.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(vg.showLoading("Authenticating...",{autoClose:!1}),wr.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Os.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:xp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:xp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{vg.hide()}}return!0},getSIWXEventProperties(){var e;const t=ce.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=ce.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Rf(t)===h0.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},pl={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:De.CHAIN.EVM},gf={ConnectorExplorerIds:{[De.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[De.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[De.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[De.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[De.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[pl.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[pl.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[pl.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[pl.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[pl.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[pl.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[pl.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[pl.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[pl.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[pl.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[pl.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[De.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[De.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[De.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[De.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[De.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[De.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[De.CONNECTOR_ID.INJECTED]:"Browser Wallet",[De.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[De.CONNECTOR_ID.COINBASE]:"Coinbase",[De.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[De.CONNECTOR_ID.LEDGER]:"Ledger",[De.CONNECTOR_ID.SAFE]:"Safe"}},Wc={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${pl.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=ce.state.activeChain;return De.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Mt.getConnectorId(e)===De.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}};new AbortController;const _Xe={ALERT_ERRORS:{PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."}}},AXe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},Yq={filterOutDuplicatesByRDNS(t){const e=yn.state.enableEIP6963?Mt.state.connectors:[],n=St.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Kt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Mt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=St.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Mt.state,{featuredWalletIds:n}=yn.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=yn.state.features)==null?void 0:c.connectMethodsOrder),r=e||Mt.state.connectors;if(n)return n;const{injected:s,announced:i}=kT.getConnectorsByType(r,Xt.state.recommended,Xt.state.featured),o=s.filter(kT.showConnector),a=i.filter(kT.showConnector);return o.length||a.length?["wallet","email","social"]:AXe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Xt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Xt.state.excludedWallets.some(r=>Wc.isLowerCaseMatch(r.name,t.name));return e||n}},kT={getConnectorsByType(t,e,n){const{customWallets:r}=yn.state,s=St.getRecentWallets(),i=Yq.filterOutDuplicateWallets(e),o=Yq.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Xt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Xt.state.excludedWallets.some(i=>Wc.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Kt.isMobile()||Kt.isMobile()&&!e&&!Pt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(ce.state.chains.values()).some(n=>Mt.getConnectorId(n.namespace)===De.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=yn.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:yn.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Kt.isMobile())return{accounts:[],chainId:void 0};if(t.id===De.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Ml`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Ml`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Ml`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const PT={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([PT.getAddresses(t),PT.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:PT.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[gf.NetworkImageIds[e.id]]}]})}},hb={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function uN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const Nk=uN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),F5=uN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),SXe=uN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});uN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});uN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const IXe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Gg={getMethodsByChainNamespace(t){return IXe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case Nk.caipNetworkId:u.chains.push(Nk.deprecatedCaipNetworkId);break;case F5.caipNetworkId:u.chains.push(F5.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await RT.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Gg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Gg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>Kt.isCaipAddress(d)).map(d=>bg.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>bg.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class NXe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case De.CHAIN.EVM:await this.syncEVMConnections(e);break;case De.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case De.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===De.CONNECTOR_ID.WALLET_CONNECT){const c=Gg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await kT.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==De.CONNECTOR_ID.AUTH&&a.id!==De.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===De.CONNECTOR_ID.WALLET_CONNECT){const c=Gg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,m,y;if(a.id===De.CONNECTOR_ID.WALLET_CONNECT){const w=Gg.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(C=>({address:C.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>Kt.createAccount(De.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:De.CHAIN.BITCOIN,publicKey:((h=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:De.CHAIN.BITCOIN,publicKey:((g=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Wc.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Wc.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Wc.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Wc.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Wc.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Rae{constructor({provider:e,namespace:n}){this.id=De.CONNECTOR_ID.WALLET_CONNECT,this.name=gf.ConnectorNamesMap[De.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=gf.ConnectorImageIds[De.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ce.getCaipNetworks.bind(ce),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=yn.state.universalProviderConfigOverride,s=Gg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return xp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:xXe})}}const xXe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],TXe=[De.CONNECTOR_ID.AUTH,De.CONNECTOR_ID.WALLET_CONNECT];class RXe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>ce.getCaipNetworks(n),this.getConnectorId=n=>Mt.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new NXe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:De.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:De.CONNECTOR_ID.AUTH,type:"AUTH",name:De.CONNECTOR_NAMES.AUTH,provider:e,imageId:gf.ConnectorImageIds[De.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Wc.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){wr.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Rf(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Rae);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Kt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Kt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Kt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Wc.isLowerCaseMatch(this.getConnectorId(De.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Kt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Wc.isLowerCaseMatch(this.getConnectorId(De.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?PT.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Wc.isLowerCaseMatch(this.getConnectorId(De.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(TXe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class JP extends Error{constructor(e,n){super(e),this.error=n}}class kXe extends JP{constructor(){super(...arguments),this.name="WalletAccountError"}}class PXe extends JP{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Qq extends JP{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class OXe extends JP{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function f0(t){return"version"in t}const kae="solana:signAndSendTransaction",DXe="solana:signMessage",j5="solana:signTransaction",Pae="standard:connect",MXe="standard:disconnect",Oae="standard:events";function BXe(t){return Pae in t.features&&Oae in t.features&&(kae in t.features||j5 in t.features)}function LXe(t){if(typeof t=="string")return`solana:${t}`}class ZP{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,n){this.listeners[e].push(n)}removeListener(e,n){this.listeners[e]=this.listeners[e].filter(r=>r!==n)}emit(e,n){this.listeners[e].forEach(r=>r(n))}}class UXe extends ZP{constructor(e){super(),this.id=De.CONNECTOR_ID.AUTH,this.name=De.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=De.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){var n,r;const e=(r=(n=ce.state.chains.get(De.CHAIN.SOLANA))==null?void 0:n.accountState)==null?void 0:r.address;return e?new st(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(n=>e.includes(n.caipNetworkId))}async connect(e={}){var s;const n=e.chainId||((s=this.getActiveChain())==null?void 0:s.id),r=Rf("solana");if(await xp.authConnectorAuthenticate({authConnector:this.provider,chainId:LXe(n),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:De.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const n=await this.provider.request({method:"solana_signMessage",params:{message:Qa.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Qa.decode(n.signature)}async signTransaction(e){const n=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=Qa.decode(n.transaction);return f0(e)?cm.deserialize(r):Xa.from(r)}async signAndSendTransaction(e,n){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:n},chainNamespace:this.chain})).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=Qa.decode(r);return f0(i)?cm.deserialize(o):Xa.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Qa.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}class $Xe extends ZP{constructor(e){super(),this.name="Coinbase Wallet",this.id=gf.ConnectorExplorerIds[De.CONNECTOR_ID.COINBASE_SDK],this.explorerId=gf.ConnectorExplorerIds[De.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=De.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===Nk.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return gf.ConnectorImageIds[De.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,n){return(await this.coinbase.signAndSendTransaction(e,n)).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const n=this.coinbase.publicKey;if(e&&!n)throw new Error("Not connected");return n}}class Jq extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class Zq extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var FXe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},W5;class Xq extends Rae{constructor({provider:e,chains:n,getActiveChain:r}){super({caipNetworks:n,namespace:"solana",provider:e}),this.eventEmitter=new ZP,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),W5.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let n=e;return n===lu.CHAIN_IDS.Deprecated_Mainnet?n=lu.CHAIN_IDS.Mainnet:n===lu.CHAIN_IDS.Deprecated_Devnet&&(n=lu.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===n)}).filter(Boolean)}get icon(){return kl.state.connectorImages[this.id]}get version(){return FXe(this,W5,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new st(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new st(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const n=await this.internalRequest("solana_signMessage",{message:Qa.encode(e),pubkey:this.getAccount(!0).address});return Qa.decode(n.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const n=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:n,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const i=Qa.decode(r.signature);return e.addSignature(new st(this.getAccount(!0).publicKey),Buffer.from(i)),e}const s=Buffer.from(r.transaction,"base64");return f0(e)?cm.deserialize(new Uint8Array(s)):Xa.from(s)}async signAndSendTransaction(e,n){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:n});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e),i=await n.sendRawTransaction(s.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Buffer.from(r,"base64");return f0(i)?cm.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),Xa.from(o))})}catch(n){if(n instanceof Zq){const r=[];for(const s of e)r.push(await this.signTransaction(s));return r}throw n}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){var n,r;const e=((r=(n=this.session)==null?void 0:n.namespaces.solana)==null?void 0:r.accounts)||[];return Promise.resolve(e.map(s=>({namespace:this.chain,address:bg.parseCaipAddress(s).address,type:"eoa"})))}internalRequest(e,n){var i;const r=this.chains.find(o=>{var a;return((a=this.getActiveChain())==null?void 0:a.id)===o.id});let s=r==null?void 0:r.caipNetworkId;switch(s){case lu.CHAIN_IDS.Mainnet:this.sessionChains.includes(lu.CHAIN_IDS.Mainnet)||(s=lu.CHAIN_IDS.Deprecated_Mainnet);break;case lu.CHAIN_IDS.Devnet:this.sessionChains.includes(lu.CHAIN_IDS.Devnet)||(s=lu.CHAIN_IDS.Deprecated_Devnet);break}return(i=this.provider)==null?void 0:i.request({method:e,params:n},s)}get sessionChains(){var e;return Gg.getChainsFromNamespaces((e=this.session)==null?void 0:e.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){var s,i;const n=(i=(s=this.session)==null?void 0:s.namespaces.solana)==null?void 0:i.accounts[0];if(!n){if(e)throw new Error("Account not found");return}const r=n.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:Qa.decode(r)}}getRawRPCParams(e){var n;return f0(e)?{}:{feePayer:((n=e.feePayer)==null?void 0:n.toBase58())??"",instructions:e.instructions.map(r=>({data:Qa.encode(new Uint8Array(r.data)),keys:r.keys.map(s=>({isWritable:s.isWritable,isSigner:s.isSigner,pubkey:s.pubkey.toBase58()})),programId:r.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){var n,r;if(!((r=(n=this.session)==null?void 0:n.namespaces.solana)!=null&&r.methods.includes(e)))throw new Zq(e)}}W5=new WeakMap;const Uf=new st("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new st("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const oF=new st("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new st("So11111111111111111111111111111111111111112");new st("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const aF=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var dN={};Object.defineProperty(dN,"__esModule",{value:!0});function jXe(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var WXe=dN.toBigIntLE=jXe;function zXe(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}dN.toBigIntBE=zXe;function HXe(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var GXe=dN.toBufferLE=HXe;function qXe(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}dN.toBufferBE=qXe;const VXe=t=>e=>{const n=Kr(t,e),{encode:r,decode:s}=aF(n),i=n;return i.decode=(o,a)=>{const c=s(o,a);return WXe(Buffer.from(c))},i.encode=(o,a,c)=>{const l=GXe(o,t);return r(l,a,c)},i},q_=VXe(8),Dae=t=>{const e=Un(t),{encode:n,decode:r}=aF(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const c=Number(i);return n(c,o,a)},s},io=t=>{const e=Kr(32,t),{encode:n,decode:r}=aF(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new st(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return n(c,o,a)},s};class KC extends Error{constructor(e){super(e)}}class xk extends KC{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class KXe extends KC{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class Mae extends KC{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class V_ extends KC{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class YXe extends KC{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class QXe extends KC{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var z5;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(z5||(z5={}));var Tk;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(Tk||(Tk={}));const Bae=1,JXe=Et([Un("m"),Un("n"),Dae("isInitialized"),io("signer1"),io("signer2"),io("signer3"),io("signer4"),io("signer5"),io("signer6"),io("signer7"),io("signer8"),io("signer9"),io("signer10"),io("signer11")]),Lae=JXe.span;var Rk;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(Rk||(Rk={}));const Uae=Et([io("mint"),io("owner"),q_("amount"),Tt("delegateOption"),io("delegate"),Un("state"),Tt("isNativeOption"),q_("isNative"),q_("delegatedAmount"),Tt("closeAuthorityOption"),io("closeAuthority")]),Dp=Uae.span;async function eV(t,e,n,r=Uf){const s=await t.getAccountInfo(e,n);return ZXe(e,s,r)}function ZXe(t,e,n=Uf){if(!e)throw new xk;if(!e.owner.equals(n))throw new Mae;if(e.data.length<Dp)throw new V_;const r=Uae.decode(e.data.slice(0,Dp));let s=Buffer.alloc(0);if(e.data.length>Dp){if(e.data.length===Lae)throw new V_;if(e.data[Dp]!=Tk.Account)throw new KXe;s=e.data.slice(Dp+Bae)}return{address:t,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==Rk.Uninitialized,isFrozen:r.state===Rk.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function XXe(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof st?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const $ae=Et([Tt("mintAuthorityOption"),io("mintAuthority"),q_("supply"),Un("decimals"),Dae("isInitialized"),Tt("freezeAuthorityOption"),io("freezeAuthority")]),EM=$ae.span;async function eet(t,e,n,r=Uf){const s=await t.getAccountInfo(e,n);return tet(e,s,r)}function tet(t,e,n=Uf){if(!e)throw new xk;if(!e.owner.equals(n))throw new Mae;if(e.data.length<EM)throw new V_;const r=$ae.decode(e.data.slice(0,EM));let s=Buffer.alloc(0);if(e.data.length>EM){if(e.data.length<=Dp)throw new V_;if(e.data.length===Lae)throw new V_;if(e.data[Dp]!=Tk.Mint)throw new YXe;s=e.data.slice(Dp+Bae)}return{address:t,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function tV(t,e,n=!1,r=Uf,s=oF){if(!n&&!st.isOnCurve(e.toBuffer()))throw new QXe;const[i]=st.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}function net(t,e,n,r,s=Uf,i=oF){return ret(t,e,n,r,Buffer.alloc(0),s,i)}function ret(t,e,n,r,s,i=Uf,o=oF){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:sC.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new oo({keys:a,programId:o,data:s})}const nV=Et([Un("instruction"),q_("amount")]);function set(t,e,n,r,s=[],i=Uf){const o=XXe([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),a=Buffer.alloc(nV.span);return nV.encode({instruction:z5.Transfer,amount:BigInt(r)},a),new oo({keys:o,programId:i,data:a})}async function iet({provider:t,to:e,amount:n,tokenMint:r,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(n<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new st(e),a=new st(r),l=(await eet(s,a)).decimals;if(l<0)throw new Error("Invalid token decimals");const u=Math.floor(n*10**l),d=tV(a,i),h=tV(a,o);try{if((await eV(s,d)).amount<BigInt(u))throw new Error("Insufficient token balance")}catch(w){throw w instanceof xk?new Error("Sender does not have a token account for this mint"):w}let f=!1;try{await eV(s,h)}catch(w){if(w instanceof xk)f=!0;else throw w}const p=[],g=f?yM.UNIT_LIMIT_WITH_ATA_CREATION:yM.UNIT_LIMIT_TRANSFER_ONLY;p.push(PS.setComputeUnitPrice({microLamports:yM.UNIT_PRICE_MICRO_LAMPORTS}),PS.setComputeUnitLimit({units:g})),f&&p.push(net(i,h,o,a)),p.push(set(d,h,i,u,[],Uf));const{blockhash:m,lastValidBlockHeight:y}=await s.getLatestBlockhash();return new Xa({feePayer:i,blockhash:m,lastValidBlockHeight:y}).add(...p)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const rV={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function sV({provider:t,to:e,value:n,connection:r}){if(!t.publicKey)throw Error("No public key found");const s=new st(e),i=Math.floor(n*UZe),{blockhash:o,lastValidBlockHeight:a}=await r.getLatestBlockhash(),c=[PS.setComputeUnitPrice({microLamports:rV.UNIT_PRICE_MICRO_LAMPORTS}),PS.setComputeUnitLimit({units:rV.UNIT_LIMIT}),sC.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new Xa({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var oet=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},aet=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},OT;let $1;const XP=new Set;function cet(t){K_=void 0,XP.add(t)}function uet(t){K_=void 0,XP.delete(t)}const qb={};function det(){if($1||($1=Object.freeze({register:iV,get:het,on:fet}),typeof window>"u"))return $1;const t=Object.freeze({register:iV});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new pet(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return $1}function iV(...t){var e;return t=t.filter(n=>!XP.has(n)),t.length?(t.forEach(n=>cet(n)),(e=qb.register)==null||e.forEach(n=>oV(()=>n(...t))),function(){var r;t.forEach(s=>uet(s)),(r=qb.unregister)==null||r.forEach(s=>oV(()=>s(...t)))}):()=>{}}let K_;function het(){return K_||(K_=[...XP]),K_}function fet(t,e){var n;return(n=qb[t])!=null&&n.push(e)||(qb[t]=[e]),function(){var s;qb[t]=(s=qb[t])==null?void 0:s.filter(i=>e!==i)}}function oV(t){try{t()}catch(e){console.error(e)}}class pet extends Event{get detail(){return oet(this,OT,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),OT.set(this,void 0),aet(this,OT,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}OT=new WeakMap;function get(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const aV={"solana:mainnet":Nk,"solana:testnet":SXe,"solana:devnet":F5};class met extends ZP{constructor({wallet:e,getActiveChain:n,requestedChains:r}){super(),this.chain=De.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=n,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return gf.ConnectorExplorerIds[e]||e}get name(){return this.wallet.name==="Trust"?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return gf.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new st(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(n=>{var r;return n.id===e||n.id===((r=aV[e])==null?void 0:r.id)})).filter(Boolean)}async connect(){await this.getWalletFeature(Pae).connect();const n=this.getAccount(!0),r=new st(n.publicKey);return this.emit("connect",r),n.address}async disconnect(){await this.getWalletFeature(MXe).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const n=this.getWalletFeature(DXe),r=this.getAccount(!0),[s]=await n.signMessage({message:e,account:r});if(!s)throw new OXe("Empty result");return s.signature}async signTransaction(e){const n=this.getWalletFeature(j5),r=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await n.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new Qq("Empty result");return this.emit("pendingTransaction",void 0),f0(e)?cm.deserialize(i.signedTransaction):Xa.from(i.signedTransaction)}async signAndSendTransaction(e,n){const r=this.getWalletFeature(kae),s=this.getAccount(!0),[i]=await r.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...n,preflightCommitment:get(n==null?void 0:n.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new PXe("Empty result");return this.emit("pendingTransaction",void 0),Qa.encode(i.signature)}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){const n=this.getWalletFeature(j5),r=this.getAccount(!0),s=this.getActiveChainName();return(await n.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:r,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new Qq("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),f0(c)?cm.deserialize(o):Xa.from(o)})}async request(e){return Promise.reject(new Jq("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const n=this.wallet.accounts[0];if(e&&!n)throw new kXe;return n}getWalletFeature(e){if(!(e in this.wallet.features))throw new Jq(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(aV).find(([,n])=>{var r;return n.id===((r=this.getActiveChain())==null?void 0:r.id)});if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(Oae).on("change",n=>{if(n.accounts){const r=n.accounts[0];r&&this.emit("accountsChanged",new st(r.publicKey))}})}}const{get:yet,on:cV}=det();let fp=[];function wet(t,e,n){const r=[cV("register",(...s)=>{fp=[...fp,...lV(s,t,e)],n(...fp)}),cV("unregister",(...s)=>{fp=fp.filter(i=>s.some(o=>o.name===i.wallet.name)),n(...fp)})];return fp=lV(yet(),t,e),n(...fp),()=>r.forEach(s=>s())}function lV(t,e,n){return t.filter(r=>r.name!=="WalletConnect"&&BXe(r)).map(r=>new met({wallet:r,requestedChains:e,getActiveChain:n}))}const bet=[De.CONNECTOR_ID.AUTH,De.CONNECTOR_ID.WALLET_CONNECT];class vet extends RXe{constructor(e={}){super({adapterType:De.ADAPTER_TYPES.SOLANA,namespace:De.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){var i,o;super.construct(e);const n=St.getActiveCaipNetworkId(),r=((i=e.networks)==null?void 0:i.find(a=>a.caipNetworkId===n))||((o=e.networks)==null?void 0:o[0]),s=r==null?void 0:r.rpcUrls.default.http[0];s&&lb.setConnection(new B1(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new UXe({w3mFrameProvider:e,getActiveChain:()=>ce.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,n){e.projectId||Sae.open(_Xe.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>n.getCaipNetwork(this.namespace);Kt.isClient()&&"coinbaseSolana"in window&&this.addConnector(new $Xe({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),wet(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const n=this.connectors.find(r=>r.id===e.id);return n?{accounts:await n.getAccounts()}:{accounts:[]}}async signMessage(e){const n=e.provider;if(!n)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await n.signMessage(new TextEncoder().encode(e.message));return{signature:Qa.encode(r)}}async estimateGas(e){const n=lb.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const s=await(await sV({provider:e.provider,connection:n,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(n);return{gas:BigInt(s||0)}}async sendTransaction(e){const n=lb.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const r=e.provider,s=e.tokenMint?await iet({provider:r,connection:n,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await sV({provider:r,connection:n,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await r.sendTransaction(s,n);return await new Promise(o=>{const a=setInterval(async()=>{const c=await n.getSignatureStatus(i);c!=null&&c.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){var l,u,d,h,f;const n=this.connectors.find(p=>p.id===e.id);if(!n)throw new Error("Provider not found");const r={...n,...e.id===De.CONNECTOR_ID.AUTH?{provider:n}:{}},s=e.rpcUrl||((u=(l=this.getCaipNetworks())==null?void 0:l.find(p=>p.id===e.chainId))==null?void 0:u.rpcUrls.default.http[0]);if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=(d=this.connectionManager)==null?void 0:d.getConnection({address:e.address,connectorId:n.id,connections:this.connections,connectors:this.connectors});if(i!=null&&i.account)return this.emit("accountChanged",{address:i.account.address,chainId:(h=i.caipNetwork)==null?void 0:h.id,connector:r}),{id:n.id,address:i.account.address,chainId:e.chainId,provider:n,type:n.type};const o=await n.connect({chainId:e.chainId,socialUri:e.socialUri});lb.setConnection(new B1(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:r});const a=n.id===De.CONNECTOR_ID.AUTH,c=(f=this.getCaipNetworks())==null?void 0:f.find(p=>p.id===e.chainId);return this.addConnection({connectorId:n.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:St.getConnectedSocialProvider(),username:St.getConnectedSocialUsername()}:void 0}),n.id!==De.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(n.id,n.provider),{id:n.id,address:o,chainId:e.chainId,provider:n,type:n.type}}async getBalance(e){var c,l,u,d;const n=e.address,r=(c=this.getCaipNetworks())==null?void 0:c.find(h=>h.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new B1((d=(u=(l=r==null?void 0:r.rpcUrls)==null?void 0:l.default)==null?void 0:u.http)==null?void 0:d[0],this.connectionSettings),i=`${r==null?void 0:r.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=St.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async h=>{var f,p;try{const m=(await s.getBalance(new st(n))/lu.LAMPORTS_PER_SOL).toString();if(St.updateNativeBalanceCache({caipAddress:i,balance:m,symbol:((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");h({balance:m,symbol:(p=e.caipNetwork)==null?void 0:p.nativeCurrency.symbol})}catch{h({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){var r,s,i;await super.switchNetwork(e);const{caipNetwork:n}=e;(i=(s=(r=n==null?void 0:n.rpcUrls)==null?void 0:r.default)==null?void 0:s.http)!=null&&i[0]&&lb.setConnection(new B1(n.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,n){if(bet.includes(e))return;const r=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",s),n.on("accountsChanged",r),n.on("connect",r),this.providerHandlers[e]={provider:n,disconnect:s,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const n=De.CONNECTOR_ID.WALLET_CONNECT;Gg.listenWcProvider({universalProvider:e,namespace:De.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:s=>this.onAccountsChanged(s,n,!1)});const r=new Xq({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>ce.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await ro(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-BdIL3hTE.js");return{SolanaWalletConnectStandardWallet:i}},[]);s.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){var i,o;const n=await super.connectWalletConnect(e),r=(o=(i=this.getCaipNetworks())==null?void 0:i.find(a=>a.id===e))==null?void 0:o.rpcUrls.default.http[0],s=new B1(r,this.connectionSettings);return lb.setConnection(s),n}async disconnect(e){if(e.id){const n=this.connectors.find(s=>s.id===e.id);if(!n)throw new Error("Provider not found");const r=this.connections.find(s=>Wc.isLowerCaseMatch(s.connectorId,e.id));return await n.provider.disconnect(),this.deleteConnection(n.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:n,getConnectorStorageInfo:r}){var s;await((s=this.connectionManager)==null?void 0:s.syncConnections({connectors:this.connectors,caipNetwork:n,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenSolanaProviderEvents.bind(this),getConnectionStatusInfo:r})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new Xq({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>ce.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>Wc.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}}const Fae={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},jae="7c65f27254d6ddd24cf7eedf2685c4fb",Eet={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Cet=new vet,Wae=new tYe({networks:[eoe,Xie,Fae],projectId:jae,ssr:!1});WHe({adapters:[Wae,Cet],networks:[eoe,Xie,Fae,C5,kHe,_5],projectId:jae,metadata:Eet,features:{analytics:!1}});const cF=()=>{if(!oR)throw new Error("[FIREBASE] Database not initialized");return oR},q0=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,kk=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=cF(),s=Nc(r,`leaderboard/${t}`),i=await Zm(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await b_(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",q0(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},_et=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:q0(e),redPlayer:q0(n)}),await kk(e,t==="blue"?"win":t==="red"?"loss":"draw"),await kk(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},zae=async(t=20)=>{try{const e=cF(),n=Nc(e,"leaderboard"),r=await Zm(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Hae=async()=>{try{const t=cF(),e=Nc(t,"leaderboard/0x0000000000000000000000000000000000000000");return await xQ(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},ad=()=>{if(!oR)throw new Error("[FIREBASE] Database not initialized");return oR},Qi={async getGame(t){try{const e=ad(),n=Nc(e,`chess_games/${t}`),r=await Zm(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=ad(),r=Nc(n,`chess_games/${t}`);await b_(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=ad(),r=Nc(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=Tj(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=ad(),r=Nc(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await b_(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await Zm(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=ad(),e=Nc(t,"chess_games"),n=await Zm(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=ad(),e=Nc(t,"chess_games"),n=await Zm(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=ad(),n=Nc(e,`chess_games/${t}`);await xQ(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=ad(),n=Nc(e,`leaderboard/${t.username}`);await b_(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=ad(),e=Nc(t,"leaderboard"),n=await Zm(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=ad(),n=Nc(e,"leaderboard");return Tj(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Aet="6.15.0";function Iet(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function ta(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Yt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&Iet(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Vb(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Vb(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Vb(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Vb(r,e)}: ${Vb(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ho(t,e){return t&&t.code===e}function lF(t){return ho(t,"CALL_EXCEPTION")}function Ss(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Vb(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Vb(a))}}i.push(`code=${e}`),i.push(`version=${Aet}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Yt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Yt(s,{shortMessage:r}),s}function Re(t,e,n,r){if(!t)throw Ss(e,n,r)}function ae(t,e,n,r){Re(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Gae(t,e,n){n==null&&(n=""),n&&(n=": "+n),Re(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Re(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function eO(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),Re(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function qae(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}ae(!1,"invalid BytesLike value",e||"value",t)}function Dn(t,e){return qae(t,e,!1)}function oa(t,e){return qae(t,e,!0)}function as(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function uF(t){return as(t,!0)||t instanceof Uint8Array}const uV="0123456789abcdef";function nt(t){const e=Dn(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=uV[(s&240)>>4]+uV[s&15]}return n}function Ks(t){return"0x"+t.map(e=>nt(e).substring(2)).join("")}function wv(t){return as(t,!0)?(t.length-2)/2:Dn(t).length}function Hs(t,e,n){const r=Dn(t);return n!=null&&n>r.length&&Re(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),nt(r.slice(e??0,n??r.length))}function Vae(t,e,n){const r=Dn(t);Re(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),nt(s)}function kf(t,e){return Vae(t,e,!0)}function Net(t,e){return Vae(t,e,!1)}const tO=BigInt(0),Ru=BigInt(1),Kb=9007199254740991;function xet(t,e){const n=nO(t,"value"),r=BigInt(Mn(e,"width"));if(Re(n>>r===tO,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Ru){const s=(Ru<<r)-Ru;return-((~n&s)+Ru)}return n}function Kae(t,e){let n=Ct(t,"value");const r=BigInt(Mn(e,"width")),s=Ru<<r-Ru;if(n<tO){n=-n,Re(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ru<<r)-Ru;return(~n&i)+Ru}else Re(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function c_(t,e){const n=nO(t,"value"),r=BigInt(Mn(e,"bits"));return n&(Ru<<r)-Ru}function Ct(t,e){switch(typeof t){case"bigint":return t;case"number":return ae(Number.isInteger(t),"underflow",e||"value",t),ae(t>=-Kb&&t<=Kb,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){ae(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}ae(!1,"invalid BigNumberish value",e||"value",t)}function nO(t,e){const n=Ct(t,e);return Re(n>=tO,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const dV="0123456789abcdef";function dF(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=dV[n>>4],e+=dV[n&15];return BigInt(e)}return Ct(t)}function Mn(t,e){switch(typeof t){case"bigint":return ae(t>=-Kb&&t<=Kb,"overflow",e||"value",t),Number(t);case"number":return ae(Number.isInteger(t),"underflow",e||"value",t),ae(t>=-Kb&&t<=Kb,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Mn(BigInt(t),e)}catch(n){ae(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}ae(!1,"invalid numeric value",e||"value",t)}function Tet(t){return Mn(dF(t))}function lm(t,e){let r=nO(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Mn(e,"width");for(Re(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Ai(t){const e=nO(t,"value");if(e===tO)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Iu(t){let e=nt(uF(t)?t:Ai(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const hV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const fV=BigInt(58);function Ret(t){const e=Dn(t);let n=dF(e),r="";for(;n;)r=hV[Number(n%fV)]+r,n/=fV;for(let s=0;s<e.length&&!e[s];s++)r=hV[0]+r;return r}function ket(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Dn(e)}function Pet(t){const e=Dn(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Dv;class Yae{constructor(e,n,r){le(this,"filter");le(this,"emitter");se(this,Dv);q(this,Dv,n),Yt(this,{emitter:e,filter:r})}async removeListener(){k(this,Dv)!=null&&await this.emitter.off(this.filter,k(this,Dv))}}Dv=new WeakMap;function Oet(t,e,n,r,s){ae(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Qae(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function Det(t,e,n,r,s){return t==="OVERLONG"?(ae(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Qae(t,e,n))}const Met=Object.freeze({error:Oet,ignore:Qae,replace:Det});function Bet(t,e){e==null&&(e=Met.error);const n=Dn(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function mf(t,e){ae(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);ae(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Let(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Pk(t,e){return Let(Bet(t,e))}function Jae(t){async function e(n,r){Re(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();Re(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),Re(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Ss("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=Ss("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const Uet=12,$et=250;let pV=Jae();const Fet=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),jet=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let CM=!1;async function Zae(t,e){try{const n=t.match(Fet);if(!n)throw new Error("invalid data");return new qg(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?ket(n[3]):zet(n[3]))}catch{return new qg(599,"BAD REQUEST (invalid data: URI)",{},null,new um(t))}}function Xae(t){async function e(n,r){try{const s=n.match(jet);if(!s)throw new Error("invalid link");return new um(`${t}${s[2]}`)}catch{return new qg(599,"BAD REQUEST (invalid IPFS URI)",{},null,new um(n))}}return e}const Dx={data:Zae,ipfs:Xae("https://gateway.ipfs.io/ipfs/")},ece=new WeakMap;var By,Gp;class Wet{constructor(e){se(this,By);se(this,Gp);q(this,By,[]),q(this,Gp,!1),ece.set(e,()=>{if(!k(this,Gp)){q(this,Gp,!0);for(const n of k(this,By))setTimeout(()=>{n()},0);q(this,By,[])}})}addListener(e){Re(!k(this,Gp),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),k(this,By).push(e)}get cancelled(){return k(this,Gp)}checkSignal(){Re(!this.cancelled,"cancelled","CANCELLED",{})}}By=new WeakMap,Gp=new WeakMap;function Mx(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Mv,Bv,yu,$h,Lv,Uv,ki,Tc,Fh,Ly,Uy,$y,wd,wu,qp,Fy,l_;const Hk=class Hk{constructor(e){se(this,Fy);se(this,Mv);se(this,Bv);se(this,yu);se(this,$h);se(this,Lv);se(this,Uv);se(this,ki);se(this,Tc);se(this,Fh);se(this,Ly);se(this,Uy);se(this,$y);se(this,wd);se(this,wu);se(this,qp);q(this,Uv,String(e)),q(this,Mv,!1),q(this,Bv,!0),q(this,yu,{}),q(this,$h,""),q(this,Lv,3e5),q(this,wu,{slotInterval:$et,maxAttempts:Uet}),q(this,qp,null)}get url(){return k(this,Uv)}set url(e){q(this,Uv,String(e))}get body(){return k(this,ki)==null?null:new Uint8Array(k(this,ki))}set body(e){if(e==null)q(this,ki,void 0),q(this,Tc,void 0);else if(typeof e=="string")q(this,ki,mf(e)),q(this,Tc,"text/plain");else if(e instanceof Uint8Array)q(this,ki,e),q(this,Tc,"application/octet-stream");else if(typeof e=="object")q(this,ki,mf(JSON.stringify(e))),q(this,Tc,"application/json");else throw new Error("invalid body")}hasBody(){return k(this,ki)!=null}get method(){return k(this,$h)?k(this,$h):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),q(this,$h,String(e).toUpperCase())}get headers(){const e=Object.assign({},k(this,yu));return k(this,Fh)&&(e.authorization=`Basic ${Pet(mf(k(this,Fh)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&k(this,Tc)&&(e["content-type"]=k(this,Tc)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){k(this,yu)[String(e).toLowerCase()]=String(n)}clearHeaders(){q(this,yu,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return k(this,Fh)||null}setCredentials(e,n){ae(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),q(this,Fh,`${e}:${n}`)}get allowGzip(){return k(this,Bv)}set allowGzip(e){q(this,Bv,!!e)}get allowInsecureAuthentication(){return!!k(this,Mv)}set allowInsecureAuthentication(e){q(this,Mv,!!e)}get timeout(){return k(this,Lv)}set timeout(e){ae(e>=0,"timeout must be non-zero","timeout",e),q(this,Lv,e)}get preflightFunc(){return k(this,Ly)||null}set preflightFunc(e){q(this,Ly,e)}get processFunc(){return k(this,Uy)||null}set processFunc(e){q(this,Uy,e)}get retryFunc(){return k(this,$y)||null}set retryFunc(e){q(this,$y,e)}get getUrlFunc(){return k(this,qp)||pV}set getUrlFunc(e){q(this,qp,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${k(this,ki)?nt(k(this,ki)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(k(this,wu).slotInterval=e.slotInterval),e.maxAttempts!=null&&(k(this,wu).maxAttempts=e.maxAttempts)}send(){return Re(k(this,wd)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),q(this,wd,new Wet(this)),Se(this,Fy,l_).call(this,0,gV()+this.timeout,0,this,new qg(0,"",{},null,this))}cancel(){Re(k(this,wd)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=ece.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Re(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Hk(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,q(s,yu,Object.assign({},k(this,yu))),k(this,ki)&&q(s,ki,new Uint8Array(k(this,ki))),q(s,Tc,k(this,Tc)),s}clone(){const e=new Hk(this.url);return q(e,$h,k(this,$h)),k(this,ki)&&q(e,ki,k(this,ki)),q(e,Tc,k(this,Tc)),q(e,yu,Object.assign({},k(this,yu))),q(e,Fh,k(this,Fh)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),q(e,Ly,k(this,Ly)),q(e,Uy,k(this,Uy)),q(e,$y,k(this,$y)),q(e,wu,Object.assign({},k(this,wu))),q(e,qp,k(this,qp)),e}static lockConfig(){CM=!0}static getGateway(e){return Dx[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(CM)throw new Error("gateways locked");Dx[e]=n}static registerGetUrl(e){if(CM)throw new Error("gateways locked");pV=e}static createGetUrlFunc(e){return Jae(e)}static createDataGateway(){return Zae}static createIpfsGatewayFunc(e){return Xae(e)}};Mv=new WeakMap,Bv=new WeakMap,yu=new WeakMap,$h=new WeakMap,Lv=new WeakMap,Uv=new WeakMap,ki=new WeakMap,Tc=new WeakMap,Fh=new WeakMap,Ly=new WeakMap,Uy=new WeakMap,$y=new WeakMap,wd=new WeakMap,wu=new WeakMap,qp=new WeakMap,Fy=new WeakSet,l_=async function(e,n,r,s,i){var u,d,h;if(e>=k(this,wu).maxAttempts)return i.makeServerError("exceeded maximum retry limit");Re(gV()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Het(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Dx){const f=await Dx[a](o.url,Mx(k(s,wd)));if(f instanceof qg){let p=f;if(this.processFunc){Mx(k(s,wd));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Mx(k(s,wd)));let l=new qg(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return Se(u=o.redirect(f),Fy,l_).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=k(this,wu).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),Se(d=o.clone(),Fy,l_).call(d,e+1,n,p,s,l)}if(this.processFunc){Mx(k(s,wd));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=k(this,wu).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),Se(h=o.clone(),Fy,l_).call(h,e+1,n,p,s,l)}}return l};let um=Hk;var KS,YS,QS,Rc,$v,jy;const TF=class TF{constructor(e,n,r,s,i){se(this,KS);se(this,YS);se(this,QS);se(this,Rc);se(this,$v);se(this,jy);q(this,KS,e),q(this,YS,n),q(this,QS,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),q(this,Rc,s==null?null:new Uint8Array(s)),q(this,$v,i||null),q(this,jy,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${k(this,Rc)?nt(k(this,Rc)):"null"}>`}get statusCode(){return k(this,KS)}get statusMessage(){return k(this,YS)}get headers(){return Object.assign({},k(this,QS))}get body(){return k(this,Rc)==null?null:new Uint8Array(k(this,Rc))}get bodyText(){try{return k(this,Rc)==null?"":Pk(k(this,Rc))}catch{Re(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Re(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new TF(599,r,this.headers,this.body,k(this,$v)||void 0);return q(s,jy,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:ae(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Yt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return k(this,Rc)!=null}get request(){return k(this,$v)}ok(){return k(this,jy).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=k(this,jy);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{k(this,Rc)&&(s=Pk(k(this,Rc)))}catch{}Re(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};KS=new WeakMap,YS=new WeakMap,QS=new WeakMap,Rc=new WeakMap,$v=new WeakMap,jy=new WeakMap;let qg=TF;function gV(){return new Date().getTime()}function zet(t){return mf(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Het(t){return new Promise(e=>setTimeout(e,t))}function Get(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function mV(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function yV(t,e,n,r){const s=[];for(;n<e+1+r;){const i=tce(t,n);s.push(i.result),n+=i.consumed,Re(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function tce(t,e){Re(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Re(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=mV(t,e+1,r);return n(e+1+r+s),yV(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),yV(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=mV(t,e+1,r);n(e+1+r+s);const i=nt(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=nt(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Get(t[e])}}function hN(t){const e=Dn(t,"data"),n=tce(e,0);return ae(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function wV(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function nce(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(nce(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=wV(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Dn(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=wV(e.length);return n.unshift(183+n.length),n.concat(e)}const bV="0123456789abcdef";function dm(t){let e="0x";for(const n of nce(t))e+=bV[n>>4],e+=bV[n&15];return e}const da=32,H5=new Uint8Array(da),qet=["then"],Bx={},rce=new WeakMap;function oy(t){return rce.get(t)}function vV(t,e){rce.set(t,e)}function F1(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function G5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof oC?G5(oy(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof oC&&(o=G5(oy(o),o,n)),r[s]=o),r},{})}var Fv;const Yb=class Yb extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==Bx&&(s=n,i=[],o=!1);super(s.length);se(this,Fv);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(vV(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),q(this,Fv,[]),k(this,Fv)==null&&k(this,Fv),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Mn(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&F1(`index ${f}`,p),p}if(qet.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return vV(c,oy(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&F1(`index ${i}`,s),n&&s instanceof Yb&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=oy(this);return r.reduce((s,i,o)=>(Re(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),G5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=oy(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Yb(Bx,i,o)}filter(n,r){const s=oy(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&F1(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Yb(Bx,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&F1(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=oy(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&F1(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Yb(Bx,n,r)}};Fv=new WeakMap;let oC=Yb;function EV(t){let e=Ai(t);return Re(e.length<=da,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:da,offset:e.length}),e.length!==da&&(e=oa(Ks([H5.slice(e.length%da),e]))),e}class $f{constructor(e,n,r,s){le(this,"name");le(this,"type");le(this,"localName");le(this,"dynamic");Yt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){ae(!1,e,this.localName,n)}}var jh,Wy,jv,DT;class q5{constructor(){se(this,jv);se(this,jh);se(this,Wy);q(this,jh,[]),q(this,Wy,0)}get data(){return Ks(k(this,jh))}get length(){return k(this,Wy)}appendWriter(e){return Se(this,jv,DT).call(this,oa(e.data))}writeBytes(e){let n=oa(e);const r=n.length%da;return r&&(n=oa(Ks([n,H5.slice(r)]))),Se(this,jv,DT).call(this,n)}writeValue(e){return Se(this,jv,DT).call(this,EV(e))}writeUpdatableValue(){const e=k(this,jh).length;return k(this,jh).push(H5),q(this,Wy,k(this,Wy)+da),n=>{k(this,jh)[e]=EV(n)}}}jh=new WeakMap,Wy=new WeakMap,jv=new WeakSet,DT=function(e){return k(this,jh).push(e),q(this,Wy,k(this,Wy)+e.length),e.length};var ja,kc,zy,Hy,Vp,J0,K5,sce;const RF=class RF{constructor(e,n,r){se(this,J0);le(this,"allowLoose");se(this,ja);se(this,kc);se(this,zy);se(this,Hy);se(this,Vp);Yt(this,{allowLoose:!!n}),q(this,ja,oa(e)),q(this,zy,0),q(this,Hy,null),q(this,Vp,r??1024),q(this,kc,0)}get data(){return nt(k(this,ja))}get dataLength(){return k(this,ja).length}get consumed(){return k(this,kc)}get bytes(){return new Uint8Array(k(this,ja))}subReader(e){const n=new RF(k(this,ja).slice(k(this,kc)+e),this.allowLoose,k(this,Vp));return q(n,Hy,this),n}readBytes(e,n){let r=Se(this,J0,sce).call(this,0,e,!!n);return Se(this,J0,K5).call(this,e),q(this,kc,k(this,kc)+r.length),r.slice(0,e)}readValue(){return dF(this.readBytes(da))}readIndex(){return Tet(this.readBytes(da))}};ja=new WeakMap,kc=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Vp=new WeakMap,J0=new WeakSet,K5=function(e){var n;if(k(this,Hy))return Se(n=k(this,Hy),J0,K5).call(n,e);q(this,zy,k(this,zy)+e),Re(k(this,Vp)<1||k(this,zy)<=k(this,Vp)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${k(this,Vp)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:oa(k(this,ja)),offset:k(this,kc),length:e,info:{bytesRead:k(this,zy),dataLength:this.dataLength}})},sce=function(e,n,r){let s=Math.ceil(n/da)*da;return k(this,kc)+s>k(this,ja).length&&(this.allowLoose&&r&&k(this,kc)+n<=k(this,ja).length?s=n:Re(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:oa(k(this,ja)),length:k(this,ja).length,offset:k(this,kc)+s})),k(this,ja).slice(k(this,kc),k(this,kc)+s)};let V5=RF;function Ok(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function hF(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Vet(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ok(t.outputLen),Ok(t.blockLen)}function aC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ice(t,e){hF(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const _M=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oce=t=>t instanceof Uint8Array,Ket=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),AM=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),cd=(t,e)=>t<<32-e|t>>>e,Yet=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Yet)throw new Error("Non little-endian hardware is not supported");function Qet(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rO(t){if(typeof t=="string"&&(t=Qet(t)),!oce(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Jet(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!oce(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class fF{clone(){return this._cloneInto()}}function pF(t){const e=r=>t().update(rO(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Zet(t=32){if(_M&&typeof _M.getRandomValues=="function")return _M.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class ace extends fF{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Vet(e);const r=rO(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return aC(this),this.iHash.update(e),this}digestInto(e){aC(this),hF(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cce=(t,e,n)=>new ace(t,e).update(n).digest();cce.create=(t,e)=>new ace(t,e);function Xet(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class lce extends fF{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=AM(this.buffer)}update(e){aC(this);const{view:n,buffer:r,blockLen:s}=this;e=rO(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=AM(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aC(this),ice(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Xet(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=AM(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const ett=(t,e,n)=>t&e^~t&n,ttt=(t,e,n)=>t&e^t&n^e&n,ntt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pp=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gp=new Uint32Array(64);class rtt extends lce{constructor(){super(64,32,8,!1),this.A=pp[0]|0,this.B=pp[1]|0,this.C=pp[2]|0,this.D=pp[3]|0,this.E=pp[4]|0,this.F=pp[5]|0,this.G=pp[6]|0,this.H=pp[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)gp[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=gp[d-15],f=gp[d-2],p=cd(h,7)^cd(h,18)^h>>>3,g=cd(f,17)^cd(f,19)^f>>>10;gp[d]=g+gp[d-7]+p+gp[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=cd(a,6)^cd(a,11)^cd(a,25),f=u+h+ett(a,c,l)+ntt[d]+gp[d]|0,g=(cd(r,2)^cd(r,13)^cd(r,22))+ttt(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){gp.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const uce=pF(()=>new rtt),Lx=BigInt(2**32-1),Y5=BigInt(32);function dce(t,e=!1){return e?{h:Number(t&Lx),l:Number(t>>Y5&Lx)}:{h:Number(t>>Y5&Lx)|0,l:Number(t&Lx)|0}}function hce(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=dce(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const stt=(t,e)=>BigInt(t>>>0)<<Y5|BigInt(e>>>0),itt=(t,e,n)=>t>>>n,ott=(t,e,n)=>t<<32-n|e>>>n,att=(t,e,n)=>t>>>n|e<<32-n,ctt=(t,e,n)=>t<<32-n|e>>>n,ltt=(t,e,n)=>t<<64-n|e>>>n-32,utt=(t,e,n)=>t>>>n-32|e<<64-n,dtt=(t,e)=>e,htt=(t,e)=>t,fce=(t,e,n)=>t<<n|e>>>32-n,pce=(t,e,n)=>e<<n|t>>>32-n,gce=(t,e,n)=>e<<n-32|t>>>64-n,mce=(t,e,n)=>t<<n-32|e>>>64-n;function ftt(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const ptt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gtt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mtt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ytt=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,wtt=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),btt=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Sn={fromBig:dce,split:hce,toBig:stt,shrSH:itt,shrSL:ott,rotrSH:att,rotrSL:ctt,rotrBH:ltt,rotrBL:utt,rotr32H:dtt,rotr32L:htt,rotlSH:fce,rotlSL:pce,rotlBH:gce,rotlBL:mce,add:ftt,add3L:ptt,add3H:gtt,add4L:mtt,add4H:ytt,add5H:btt,add5L:wtt},[vtt,Ett]=Sn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),mp=new Uint32Array(80),yp=new Uint32Array(80);class Ctt extends lce{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)mp[C]=e.getUint32(n),yp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=mp[C-15]|0,S=yp[C-15]|0,P=Sn.rotrSH(N,S,1)^Sn.rotrSH(N,S,8)^Sn.shrSH(N,S,7),O=Sn.rotrSL(N,S,1)^Sn.rotrSL(N,S,8)^Sn.shrSL(N,S,7),L=mp[C-2]|0,M=yp[C-2]|0,W=Sn.rotrSH(L,M,19)^Sn.rotrBH(L,M,61)^Sn.shrSH(L,M,6),F=Sn.rotrSL(L,M,19)^Sn.rotrBL(L,M,61)^Sn.shrSL(L,M,6),V=Sn.add4L(O,F,yp[C-7],yp[C-16]),$=Sn.add4H(V,P,W,mp[C-7],mp[C-16]);mp[C]=$|0,yp[C]=V|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Sn.rotrSH(d,h,14)^Sn.rotrSH(d,h,18)^Sn.rotrBH(d,h,41),S=Sn.rotrSL(d,h,14)^Sn.rotrSL(d,h,18)^Sn.rotrBL(d,h,41),P=d&f^~d&g,O=h&p^~h&m,L=Sn.add5L(w,S,O,Ett[C],yp[C]),M=Sn.add5H(L,y,N,P,vtt[C],mp[C]),W=L|0,F=Sn.rotrSH(r,s,28)^Sn.rotrBH(r,s,34)^Sn.rotrBH(r,s,39),V=Sn.rotrSL(r,s,28)^Sn.rotrBL(r,s,34)^Sn.rotrBL(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Sn.add(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=Sn.add3L(W,V,v);r=Sn.add3H(E,M,F,$),s=E|0}({h:r,l:s}=Sn.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Sn.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Sn.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Sn.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Sn.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Sn.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Sn.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=Sn.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){mp.fill(0),yp.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _tt=pF(()=>new Ctt);function Att(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const CV=Att();CV.crypto||CV.msCrypto;function Stt(t){switch(t){case"sha256":return uce.create();case"sha512":return _tt.create()}ae(!1,"invalid hashing algorithm name","algorithm",t)}const[yce,wce,bce]=[[],[],[]],Itt=BigInt(0),j1=BigInt(1),Ntt=BigInt(2),xtt=BigInt(7),Ttt=BigInt(256),Rtt=BigInt(113);for(let t=0,e=j1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],yce.push(2*(5*r+n)),wce.push((t+1)*(t+2)/2%64);let s=Itt;for(let i=0;i<7;i++)e=(e<<j1^(e>>xtt)*Rtt)%Ttt,e&Ntt&&(s^=j1<<(j1<<BigInt(i))-j1);bce.push(s)}const[ktt,Ptt]=hce(bce,!0),_V=(t,e,n)=>n>32?gce(t,e,n):fce(t,e,n),AV=(t,e,n)=>n>32?mce(t,e,n):pce(t,e,n);function Ott(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=_V(l,u,1)^n[a],h=AV(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=wce[o],c=_V(s,i,a),l=AV(s,i,a),u=yce[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=ktt[r],t[1]^=Ptt[r]}n.fill(0)}class gF extends fF{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ok(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ket(this.state)}keccak(){Ott(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){aC(this);const{blockLen:n,state:r}=this;e=rO(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){aC(this,!1),hF(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ok(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ice(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new gF(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Dtt=(t,e,n)=>pF(()=>new gF(e,t,n)),Mtt=Dtt(1,136,256/8);let vce=!1;const Ece=function(t){return Mtt(t)};let Cce=Ece;function di(t){const e=Dn(t,"data");return nt(Cce(e))}di._=Ece;di.lock=function(){vce=!0};di.register=function(t){if(vce)throw new TypeError("keccak256 is locked");Cce=t};Object.freeze(di);const _ce=function(t){return Stt("sha256").update(t).digest()};let Ace=_ce,Sce=!1;function YC(t){const e=Dn(t,"data");return nt(Ace(e))}YC._=_ce;YC.lock=function(){Sce=!0};YC.register=function(t){if(Sce)throw new Error("sha256 is locked");Ace=t};Object.freeze(YC);Object.freeze(YC);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ice=BigInt(0),sO=BigInt(1),Btt=BigInt(2),iO=t=>t instanceof Uint8Array,Ltt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cC(t){if(!iO(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Ltt[t[n]];return e}function Nce(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function mF(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function lC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function p0(t){return mF(cC(t))}function yF(t){if(!iO(t))throw new Error("Uint8Array expected");return mF(cC(Uint8Array.from(t).reverse()))}function uC(t,e){return lC(t.toString(16).padStart(e*2,"0"))}function wF(t,e){return uC(t,e).reverse()}function Utt(t){return lC(Nce(t))}function pu(t,e,n){let r;if(typeof e=="string")try{r=lC(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(iO(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function OS(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!iO(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function $tt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ftt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function jtt(t){let e;for(e=0;t>Ice;t>>=sO,e+=1);return e}function Wtt(t,e){return t>>BigInt(e)&sO}const ztt=(t,e,n)=>t|(n?sO:Ice)<<BigInt(e),bF=t=>(Btt<<BigInt(t-1))-sO,SM=t=>new Uint8Array(t),SV=t=>Uint8Array.from(t);function xce(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=SM(t),s=SM(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=SM())=>{s=a(SV([0]),d),r=a(),d.length!==0&&(s=a(SV([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return OS(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const Htt={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function fN(t,e,n={}){const r=(s,i,o)=>{const a=Htt[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const Gtt=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Wtt,bitLen:jtt,bitMask:bF,bitSet:ztt,bytesToHex:cC,bytesToNumberBE:p0,bytesToNumberLE:yF,concatBytes:OS,createHmacDrbg:xce,ensureBytes:pu,equalBytes:$tt,hexToBytes:lC,hexToNumber:mF,numberToBytesBE:uC,numberToBytesLE:wF,numberToHexUnpadded:Nce,numberToVarBytesBE:Utt,utf8ToBytes:Ftt,validateObject:fN},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zi=BigInt(0),ii=BigInt(1),ay=BigInt(2),qtt=BigInt(3),Q5=BigInt(4),IV=BigInt(5),NV=BigInt(8);BigInt(9);BigInt(16);function Va(t,e){const n=t%e;return n>=zi?n:e+n}function Vtt(t,e,n){if(n<=zi||e<zi)throw new Error("Expected power/modulo > 0");if(n===ii)return zi;let r=ii;for(;e>zi;)e&ii&&(r=r*t%n),t=t*t%n,e>>=ii;return r}function hl(t,e,n){let r=t;for(;e-- >zi;)r*=r,r%=n;return r}function J5(t,e){if(t===zi||e<=zi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Va(t,e),r=e,s=zi,i=ii;for(;n!==zi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==ii)throw new Error("invert: does not exist");return Va(s,e)}function Ktt(t){const e=(t-ii)/ay;let n,r,s;for(n=t-ii,r=0;n%ay===zi;n/=ay,r++);for(s=ay;s<t&&Vtt(s,e,t)!==t-ii;s++);if(r===1){const o=(t+ii)/Q5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+ii)/ay;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,ii<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function Ytt(t){if(t%Q5===qtt){const e=(t+ii)/Q5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%NV===IV){const e=(t-IV)/NV;return function(r,s){const i=r.mul(s,ay),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,ay),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return Ktt(t)}const Qtt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Jtt(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Qtt.reduce((r,s)=>(r[s]="function",r),e);return fN(t,n)}function Ztt(t,e,n){if(n<zi)throw new Error("Expected power > 0");if(n===zi)return t.ONE;if(n===ii)return e;let r=t.ONE,s=e;for(;n>zi;)n&ii&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ii;return r}function Xtt(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Tce(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ent(t,e,n=!1,r={}){if(t<=zi)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Tce(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ytt(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:bF(s),ZERO:zi,ONE:ii,create:c=>Va(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return zi<=c&&c<t},is0:c=>c===zi,isOdd:c=>(c&ii)===ii,neg:c=>Va(-c,t),eql:(c,l)=>c===l,sqr:c=>Va(c*c,t),add:(c,l)=>Va(c+l,t),sub:(c,l)=>Va(c-l,t),mul:(c,l)=>Va(c*l,t),pow:(c,l)=>Ztt(a,c,l),div:(c,l)=>Va(c*J5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>J5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Xtt(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?wF(c,i):uC(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?yF(c):p0(c)}});return Object.freeze(a)}function Rce(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function kce(t){const e=Rce(t);return e+Math.ceil(e/2)}function tnt(t,e,n=!1){const r=t.length,s=Rce(e),i=kce(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?p0(t):yF(t),a=Va(o,e-ii)+ii;return n?wF(a,s):uC(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nnt=BigInt(0),IM=BigInt(1);function rnt(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>nnt;)i&IM&&(o=o.add(a)),a=a.double(),i>>=IM;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let m=Number(o&d);o>>=f,m>c&&(m-=h,o+=IM);const y=g,w=g+Math.abs(m)-1,C=p%2!==0,N=m<0;m===0?u=u.add(n(C,i[y])):l=l.add(n(N,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Pce(t){return Jtt(t.Fp),fN(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Tce(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function snt(t){const e=Pce(t);fN(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:int,hexToBytes:ont}=Gtt,Ay={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Ay;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:int(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ay,n=typeof t=="string"?ont(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Ay._parseInt(n.subarray(2)),{d:o,l:a}=Ay._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},ef=BigInt(0),Il=BigInt(1);BigInt(2);const xV=BigInt(3);BigInt(4);function ant(t){const e=snt(t),{Fp:n}=e,r=e.toBytes||((p,g,m)=>{const y=g.toAffine();return OS(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),m=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:m,y}});function i(p){const{a:g,b:m}=e,y=n.sqr(p),w=n.mul(y,p);return n.add(n.add(w,n.mul(p,g)),m)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&ef<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:m,wrapPrivateKey:y,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=cC(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(m*2,"0")}let C;try{C=typeof p=="bigint"?p:p0(pu("private key",p,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof p}`)}return y&&(C=Va(C,w)),a(C),C}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,m,y){if(this.px=g,this.py=m,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:m,y}=g||{};if(!g||!n.isValid(m)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=C=>n.eql(C,n.ZERO);return w(m)&&w(y)?d.ZERO:new d(m,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const m=n.invertBatch(g.map(y=>y.pz));return g.map((y,w)=>y.toAffine(m[w])).map(d.fromAffine)}static fromHex(g){const m=d.fromAffine(s(pu("pointHex",g)));return m.assertValidity(),m}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:m}=this.toAffine();if(!n.isValid(g)||!n.isValid(m))throw new Error("bad point: x or y not FE");const y=n.sqr(m),w=i(g);if(!n.eql(y,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:m,py:y,pz:w}=this,{px:C,py:N,pz:S}=g,P=n.eql(n.mul(m,S),n.mul(C,w)),O=n.eql(n.mul(y,S),n.mul(N,w));return P&&O}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:m}=e,y=n.mul(m,xV),{px:w,py:C,pz:N}=this;let S=n.ZERO,P=n.ZERO,O=n.ZERO,L=n.mul(w,w),M=n.mul(C,C),W=n.mul(N,N),F=n.mul(w,C);return F=n.add(F,F),O=n.mul(w,N),O=n.add(O,O),S=n.mul(g,O),P=n.mul(y,W),P=n.add(S,P),S=n.sub(M,P),P=n.add(M,P),P=n.mul(S,P),S=n.mul(F,S),O=n.mul(y,O),W=n.mul(g,W),F=n.sub(L,W),F=n.mul(g,F),F=n.add(F,O),O=n.add(L,L),L=n.add(O,L),L=n.add(L,W),L=n.mul(L,F),P=n.add(P,L),W=n.mul(C,N),W=n.add(W,W),L=n.mul(W,F),S=n.sub(S,L),O=n.mul(W,M),O=n.add(O,O),O=n.add(O,O),new d(S,P,O)}add(g){u(g);const{px:m,py:y,pz:w}=this,{px:C,py:N,pz:S}=g;let P=n.ZERO,O=n.ZERO,L=n.ZERO;const M=e.a,W=n.mul(e.b,xV);let F=n.mul(m,C),V=n.mul(y,N),$=n.mul(w,S),v=n.add(m,y),E=n.add(C,N);v=n.mul(v,E),E=n.add(F,V),v=n.sub(v,E),E=n.add(m,w);let _=n.add(C,S);return E=n.mul(E,_),_=n.add(F,$),E=n.sub(E,_),_=n.add(y,w),P=n.add(N,S),_=n.mul(_,P),P=n.add(V,$),_=n.sub(_,P),L=n.mul(M,E),P=n.mul(W,$),L=n.add(P,L),P=n.sub(V,L),L=n.add(V,L),O=n.mul(P,L),V=n.add(F,F),V=n.add(V,F),$=n.mul(M,$),E=n.mul(W,E),V=n.add(V,$),$=n.sub(F,$),$=n.mul(M,$),E=n.add(E,$),F=n.mul(V,E),O=n.add(O,F),F=n.mul(_,E),P=n.mul(v,P),P=n.sub(P,F),F=n.mul(v,V),L=n.mul(_,L),L=n.add(L,F),new d(P,O,L)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,m=>{const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,C)=>w.toAffine(y[C])).map(d.fromAffine)})}multiplyUnsafe(g){const m=d.ZERO;if(g===ef)return m;if(a(g),g===Il)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:w,k1:C,k2neg:N,k2:S}=y.splitScalar(g),P=m,O=m,L=this;for(;C>ef||S>ef;)C&Il&&(P=P.add(L)),S&Il&&(O=O.add(L)),L=L.double(),C>>=Il,S>>=Il;return w&&(P=P.negate()),N&&(O=O.negate()),O=new d(n.mul(O.px,y.beta),O.py,O.pz),P.add(O)}multiply(g){a(g);let m=g,y,w;const{endo:C}=e;if(C){const{k1neg:N,k1:S,k2neg:P,k2:O}=C.splitScalar(m);let{p:L,f:M}=this.wNAF(S),{p:W,f:F}=this.wNAF(O);L=f.constTimeNegate(N,L),W=f.constTimeNegate(P,W),W=new d(n.mul(W.px,C.beta),W.py,W.pz),y=L.add(W),w=M.add(F)}else{const{p:N,f:S}=this.wNAF(m);y=N,w=S}return d.normalizeZ([y,w])[0]}multiplyAndAddUnsafe(g,m,y){const w=d.BASE,C=(S,P)=>P===ef||P===Il||!S.equals(w)?S.multiplyUnsafe(P):S.multiply(P),N=C(this,m).add(C(g,y));return N.is0()?void 0:N}toAffine(g){const{px:m,py:y,pz:w}=this,C=this.is0();g==null&&(g=C?n.ONE:n.inv(w));const N=n.mul(m,g),S=n.mul(y,g),P=n.mul(w,g);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:N,y:S}}isTorsionFree(){const{h:g,isTorsionFree:m}=e;if(g===Il)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:m}=e;return g===Il?this:m?m(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return cC(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=rnt(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function cnt(t){const e=Pce(t);return fN(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function lnt(t){const e=cnt(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(E){return ef<E&&E<n.ORDER}function a(E){return Va(E,r)}function c(E){return J5(E,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=ant({...e,toBytes(E,_,R){const x=_.toAffine(),B=n.toBytes(x.x),j=OS;return R?j(Uint8Array.from([_.hasEvenY()?2:3]),B):j(Uint8Array.from([4]),B,n.toBytes(x.y))},fromBytes(E){const _=E.length,R=E[0],x=E.subarray(1);if(_===s&&(R===2||R===3)){const B=p0(x);if(!o(B))throw new Error("Point is not on curve");const j=d(B);let U=n.sqrt(j);const I=(U&Il)===Il;return(R&1)===1!==I&&(U=n.neg(U)),{x:B,y:U}}else if(_===i&&R===4){const B=n.fromBytes(x.subarray(0,n.BYTES)),j=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:B,y:j}}else throw new Error(`Point of length ${_} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=E=>cC(uC(E,e.nByteLength));function p(E){const _=r>>Il;return E>_}function g(E){return p(E)?a(-E):E}const m=(E,_,R)=>p0(E.slice(_,R));class y{constructor(_,R,x){this.r=_,this.s=R,this.recovery=x,this.assertValidity()}static fromCompact(_){const R=e.nByteLength;return _=pu("compactSignature",_,R*2),new y(m(_,0,R),m(_,R,2*R))}static fromDER(_){const{r:R,s:x}=Ay.toSig(pu("DER",_));return new y(R,x)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new y(this.r,this.s,_)}recoverPublicKey(_){const{r:R,s:x,recovery:B}=this,j=O(pu("msgHash",_));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const U=B===2||B===3?R+e.n:R;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const I=B&1?"03":"02",H=l.fromHex(I+f(U)),re=c(U),ne=a(-j*re),ge=a(x*re),te=l.BASE.multiplyAndAddUnsafe(H,ne,ge);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return lC(this.toDERHex())}toDERHex(){return Ay.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return lC(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(E){try{return u(E),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const E=kce(e.n);return tnt(e.randomBytes(E),e.n)},precompute(E=8,_=l.BASE){return _._setWindowSize(E),_.multiply(BigInt(3)),_}};function C(E,_=!0){return l.fromPrivateKey(E).toRawBytes(_)}function N(E){const _=E instanceof Uint8Array,R=typeof E=="string",x=(_||R)&&E.length;return _?x===s||x===i:R?x===2*s||x===2*i:E instanceof l}function S(E,_,R=!0){if(N(E))throw new Error("first arg must be private key");if(!N(_))throw new Error("second arg must be public key");return l.fromHex(_).multiply(u(E)).toRawBytes(R)}const P=e.bits2int||function(E){const _=p0(E),R=E.length*8-e.nBitLength;return R>0?_>>BigInt(R):_},O=e.bits2int_modN||function(E){return a(P(E))},L=bF(e.nBitLength);function M(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(ef<=E&&E<L))throw new Error(`bigint expected < 2^${e.nBitLength}`);return uC(E,e.nByteLength)}function W(E,_,R=F){if(["recovered","canonical"].some(me=>me in R))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:B}=e;let{lowS:j,prehash:U,extraEntropy:I}=R;j==null&&(j=!0),E=pu("msgHash",E),U&&(E=pu("prehashed msgHash",x(E)));const H=O(E),re=u(_),ne=[M(re),M(H)];if(I!=null){const me=I===!0?B(n.BYTES):I;ne.push(pu("extraEntropy",me))}const ge=OS(...ne),te=H;function he(me){const _e=P(me);if(!h(_e))return;const Ce=c(_e),Be=l.BASE.multiply(_e).toAffine(),Te=a(Be.x);if(Te===ef)return;const xe=a(Ce*a(te+Te*re));if(xe===ef)return;let je=(Be.x===Te?0:2)|Number(Be.y&Il),Ue=xe;return j&&p(xe)&&(Ue=g(xe),je^=1),new y(Te,Ue,je)}return{seed:ge,k2sig:he}}const F={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function $(E,_,R=F){const{seed:x,k2sig:B}=W(E,_,R),j=e;return xce(j.hash.outputLen,j.nByteLength,j.hmac)(x,B)}l.BASE._setWindowSize(8);function v(E,_,R,x=V){var Be;const B=E;if(_=pu("msgHash",_),R=pu("publicKey",R),"strict"in x)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:U}=x;let I,H;try{if(typeof B=="string"||B instanceof Uint8Array)try{I=y.fromDER(B)}catch(Te){if(!(Te instanceof Ay.Err))throw Te;I=y.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:Te,s:xe}=B;I=new y(Te,xe)}else throw new Error("PARSE");H=l.fromHex(R)}catch(Te){if(Te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&I.hasHighS())return!1;U&&(_=e.hash(_));const{r:re,s:ne}=I,ge=O(_),te=c(ne),he=a(ge*te),me=a(re*te),_e=(Be=l.BASE.multiplyAndAddUnsafe(H,he,me))==null?void 0:Be.toAffine();return _e?a(_e.x)===re:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:S,sign:$,verify:v,ProjectivePoint:l,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function unt(t){return{hash:t,hmac:(e,...n)=>cce(t,e,Jet(...n)),randomBytes:Zet}}function dnt(t,e){const n=r=>lnt({...t,...unt(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oce=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),TV=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hnt=BigInt(1),Z5=BigInt(2),RV=(t,e)=>(t+e/Z5)/e;function fnt(t){const e=Oce,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=hl(u,n,e)*u%e,h=hl(d,n,e)*u%e,f=hl(h,Z5,e)*l%e,p=hl(f,s,e)*f%e,g=hl(p,i,e)*p%e,m=hl(g,a,e)*g%e,y=hl(m,c,e)*m%e,w=hl(y,a,e)*g%e,C=hl(w,n,e)*u%e,N=hl(C,o,e)*p%e,S=hl(N,r,e)*l%e,P=hl(S,Z5,e);if(!X5.eql(X5.sqr(P),t))throw new Error("Cannot find square root");return P}const X5=ent(Oce,void 0,void 0,{sqrt:fnt}),Ep=dnt({a:BigInt(0),b:BigInt(7),Fp:X5,n:TV,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=TV,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-hnt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=RV(i*t,e),c=RV(-r*t,e);let l=Va(t-a*n-c*s,e),u=Va(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},uce);BigInt(0);Ep.ProjectivePoint;const DS="0x0000000000000000000000000000000000000000",kV="0x0000000000000000000000000000000000000000000000000000000000000000",PV=BigInt(0),OV=BigInt(1),DV=BigInt(2),MV=BigInt(27),BV=BigInt(28),Ux=BigInt(35),fb={};function LV(t){return kf(Ai(t),32)}var Wv,bd,zv,Gy;const du=class du{constructor(e,n,r,s){se(this,Wv);se(this,bd);se(this,zv);se(this,Gy);eO(e,fb,"Signature"),q(this,Wv,n),q(this,bd,r),q(this,zv,s),q(this,Gy,null)}get r(){return k(this,Wv)}set r(e){ae(wv(e)===32,"invalid r","value",e),q(this,Wv,nt(e))}get s(){return ae(parseInt(k(this,bd).substring(0,3))<8,"non-canonical s; use ._s","s",k(this,bd)),k(this,bd)}set s(e){ae(wv(e)===32,"invalid s","value",e),q(this,bd,nt(e))}get _s(){return k(this,bd)}isValid(){return parseInt(k(this,bd).substring(0,3))<8}get v(){return k(this,zv)}set v(e){const n=Mn(e,"value");ae(n===27||n===28,"invalid v","v",e),q(this,zv,n)}get networkV(){return k(this,Gy)}get legacyChainId(){const e=this.networkV;return e==null?null:du.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Dn(this.s);return this.yParity&&(e[0]|=128),nt(e)}get compactSerialized(){return Ks([this.r,this.yParityAndS])}get serialized(){return Ks([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new du(fb,this.r,this._s,this.v);return this.networkV&&q(e,Gy,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ct(e,"v");return n==MV||n==BV?PV:(ae(n>=Ux,"invalid EIP-155 v","v",e),(n-Ux)/DV)}static getChainIdV(e,n){return Ct(e)*DV+BigInt(35+n-27)}static getNormalizedV(e){const n=Ct(e);return n===PV||n===MV?27:n===OV||n===BV?28:(ae(n>=Ux,"invalid v","v",e),n&OV?27:28)}static from(e){function n(l,u){ae(l,u,"signature",e)}if(e==null)return new du(fb,kV,kV,27);if(typeof e=="string"){const l=Dn(e,"signature");if(l.length===64){const u=nt(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new du(fb,u,nt(d),h)}if(l.length===65){const u=nt(l.slice(0,32)),d=nt(l.slice(32,64)),h=du.getNormalizedV(l[64]);return new du(fb,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof du)return e.clone();const r=e.r;n(r!=null,"missing r");const s=LV(r),i=function(l,u){if(l!=null)return LV(l);if(u!=null){n(as(u,32),"invalid yParityAndS");const d=Dn(u);return d[0]&=127,nt(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ct(l);return{networkV:h>=Ux?h:void 0,v:du.getNormalizedV(h)}}if(u!=null)return n(as(u,32),"invalid yParityAndS"),{v:Dn(u)[0]&128?28:27};if(d!=null){switch(Mn(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new du(fb,s,i,a);return o&&q(c,Gy,o),n(e.yParity==null||Mn(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Wv=new WeakMap,bd=new WeakMap,zv=new WeakMap,Gy=new WeakMap;let lc=du;var Wh;const cy=class cy{constructor(e){se(this,Wh);ae(wv(e)===32,"invalid private key","privateKey","[REDACTED]"),q(this,Wh,nt(e))}get privateKey(){return k(this,Wh)}get publicKey(){return cy.computePublicKey(k(this,Wh))}get compressedPublicKey(){return cy.computePublicKey(k(this,Wh),!0)}sign(e){ae(wv(e)===32,"invalid digest length","digest",e);const n=Ep.sign(oa(e),oa(k(this,Wh)),{lowS:!0});return lc.from({r:lm(n.r,32),s:lm(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=cy.computePublicKey(e);return nt(Ep.getSharedSecret(oa(k(this,Wh)),Dn(n),!1))}static computePublicKey(e,n){let r=Dn(e,"key");if(r.length===32){const i=Ep.getPublicKey(r,!!n);return nt(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Ep.ProjectivePoint.fromHex(r);return nt(s.toRawBytes(n))}static recoverPublicKey(e,n){ae(wv(e)===32,"invalid digest length","digest",e);const r=lc.from(n);let s=Ep.Signature.fromCompact(oa(Ks([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(oa(e));return ae(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Ep.ProjectivePoint.fromHex(cy.computePublicKey(e).substring(2)),i=Ep.ProjectivePoint.fromHex(cy.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Wh=new WeakMap;let MS=cy;const pnt=BigInt(0),gnt=BigInt(36);function UV(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Dn(di(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const vF={};for(let t=0;t<10;t++)vF[String(t)]=String(t);for(let t=0;t<26;t++)vF[String.fromCharCode(65+t)]=String(10+t);const $V=15;function mnt(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>vF[r]).join("");for(;e.length>=$V;){let r=e.substring(0,$V);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const ynt=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function wnt(t){t=t.toLowerCase();let e=pnt;for(let n=0;n<t.length;n++)e=e*gnt+ynt[t[n]];return e}function _r(t){if(ae(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=UV(t);return ae(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ae(t.substring(2,4)===mnt(t),"bad icap checksum","address",t);let e=wnt(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return UV("0x"+e)}ae(!1,"invalid address","address",t)}function bnt(t){const e=_r(t.from);let r=Ct(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,_r(Hs(di(dm([e,r])),12))}function Dce(t){return t&&typeof t.getAddress=="function"}async function NM(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Re(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),ae(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),_r(n)}function ha(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?_r(t):(Re(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),NM(t,e.resolveName(t)));if(Dce(t))return NM(t,t.getAddress());if(t&&typeof t.then=="function")return NM(t,t);ae(!1,"unsupported addressable value","target",t)}const kh={};function gt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new jo(kh,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function cr(t,e){return new jo(kh,`bytes${e||""}`,t,{size:e})}const FV=Symbol.for("_ethers_typed");var qy;const Ph=class Ph{constructor(e,n,r,s){le(this,"type");le(this,"value");se(this,qy);le(this,"_typedSymbol");s==null&&(s=null),eO(kh,e,"Typed"),Yt(this,{_typedSymbol:FV,type:n,value:r}),q(this,qy,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return k(this,qy)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return k(this,qy)===!0?-1:k(this,qy)===!1?this.value.length:null}static from(e,n){return new Ph(kh,e,n)}static uint8(e){return gt(e,8)}static uint16(e){return gt(e,16)}static uint24(e){return gt(e,24)}static uint32(e){return gt(e,32)}static uint40(e){return gt(e,40)}static uint48(e){return gt(e,48)}static uint56(e){return gt(e,56)}static uint64(e){return gt(e,64)}static uint72(e){return gt(e,72)}static uint80(e){return gt(e,80)}static uint88(e){return gt(e,88)}static uint96(e){return gt(e,96)}static uint104(e){return gt(e,104)}static uint112(e){return gt(e,112)}static uint120(e){return gt(e,120)}static uint128(e){return gt(e,128)}static uint136(e){return gt(e,136)}static uint144(e){return gt(e,144)}static uint152(e){return gt(e,152)}static uint160(e){return gt(e,160)}static uint168(e){return gt(e,168)}static uint176(e){return gt(e,176)}static uint184(e){return gt(e,184)}static uint192(e){return gt(e,192)}static uint200(e){return gt(e,200)}static uint208(e){return gt(e,208)}static uint216(e){return gt(e,216)}static uint224(e){return gt(e,224)}static uint232(e){return gt(e,232)}static uint240(e){return gt(e,240)}static uint248(e){return gt(e,248)}static uint256(e){return gt(e,256)}static uint(e){return gt(e,256)}static int8(e){return gt(e,-8)}static int16(e){return gt(e,-16)}static int24(e){return gt(e,-24)}static int32(e){return gt(e,-32)}static int40(e){return gt(e,-40)}static int48(e){return gt(e,-48)}static int56(e){return gt(e,-56)}static int64(e){return gt(e,-64)}static int72(e){return gt(e,-72)}static int80(e){return gt(e,-80)}static int88(e){return gt(e,-88)}static int96(e){return gt(e,-96)}static int104(e){return gt(e,-104)}static int112(e){return gt(e,-112)}static int120(e){return gt(e,-120)}static int128(e){return gt(e,-128)}static int136(e){return gt(e,-136)}static int144(e){return gt(e,-144)}static int152(e){return gt(e,-152)}static int160(e){return gt(e,-160)}static int168(e){return gt(e,-168)}static int176(e){return gt(e,-176)}static int184(e){return gt(e,-184)}static int192(e){return gt(e,-192)}static int200(e){return gt(e,-200)}static int208(e){return gt(e,-208)}static int216(e){return gt(e,-216)}static int224(e){return gt(e,-224)}static int232(e){return gt(e,-232)}static int240(e){return gt(e,-240)}static int248(e){return gt(e,-248)}static int256(e){return gt(e,-256)}static int(e){return gt(e,-256)}static bytes1(e){return cr(e,1)}static bytes2(e){return cr(e,2)}static bytes3(e){return cr(e,3)}static bytes4(e){return cr(e,4)}static bytes5(e){return cr(e,5)}static bytes6(e){return cr(e,6)}static bytes7(e){return cr(e,7)}static bytes8(e){return cr(e,8)}static bytes9(e){return cr(e,9)}static bytes10(e){return cr(e,10)}static bytes11(e){return cr(e,11)}static bytes12(e){return cr(e,12)}static bytes13(e){return cr(e,13)}static bytes14(e){return cr(e,14)}static bytes15(e){return cr(e,15)}static bytes16(e){return cr(e,16)}static bytes17(e){return cr(e,17)}static bytes18(e){return cr(e,18)}static bytes19(e){return cr(e,19)}static bytes20(e){return cr(e,20)}static bytes21(e){return cr(e,21)}static bytes22(e){return cr(e,22)}static bytes23(e){return cr(e,23)}static bytes24(e){return cr(e,24)}static bytes25(e){return cr(e,25)}static bytes26(e){return cr(e,26)}static bytes27(e){return cr(e,27)}static bytes28(e){return cr(e,28)}static bytes29(e){return cr(e,29)}static bytes30(e){return cr(e,30)}static bytes31(e){return cr(e,31)}static bytes32(e){return cr(e,32)}static address(e){return new Ph(kh,"address",e)}static bool(e){return new Ph(kh,"bool",!!e)}static bytes(e){return new Ph(kh,"bytes",e)}static string(e){return new Ph(kh,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Ph(kh,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===FV}static dereference(e,n){if(Ph.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};qy=new WeakMap;let jo=Ph;class vnt extends $f{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=jo.dereference(n,"string");try{r=_r(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return _r(lm(e.readValue(),20))}}class Ent extends $f{constructor(n){super(n.name,n.type,"_",n.dynamic);le(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Mce(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return Re(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),Re(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else ae(!1,"invalid tuple value","tuple",n);ae(e.length===r.length,"types/value length mismatch","tuple",n);let s=new q5,i=new q5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Bce(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(ho(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(ho(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),oC.fromItems(n,r)}class Cnt extends $f{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);le(this,"coder");le(this,"length");Yt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=jo.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Gae(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Mce(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Re(r*da<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*da,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Ent(this.coder));return Bce(n,s)}}class _nt extends $f{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=jo.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Lce extends $f{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=oa(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Ant extends Lce{constructor(e){super("bytes",e)}decode(e){return nt(super.decode(e))}}class Snt extends $f{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);le(this,"size");Yt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=oa(jo.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return nt(n.readBytes(this.size))}}const Int=new Uint8Array([]);class Nnt extends $f{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Int)}decode(e){return e.readBytes(0),null}}const xnt=BigInt(0),Tnt=BigInt(1),Rnt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class knt extends $f{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);le(this,"size");le(this,"signed");Yt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ct(jo.dereference(r,this.type)),i=c_(Rnt,da*8);if(this.signed){let o=c_(i,this.size*8-1);(s>o||s<-(o+Tnt))&&this._throwError("value out-of-bounds",r),s=Kae(s,8*da)}else(s<xnt||s>c_(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=c_(n.readValue(),this.size*8);return this.signed&&(r=xet(r,this.size*8)),r}}class Pnt extends Lce{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,mf(jo.dereference(n,"string")))}decode(e){return Pk(super.decode(e))}}class $x extends $f{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);le(this,"coders");Yt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=jo.dereference(r,"tuple");return Mce(n,this.coders,s)}decode(n){return Bce(n,this.coders)}}function xM(t,e){return{address:_r(t),storageKeys:e.map((n,r)=>(ae(as(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function vw(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(ae(n.length===2,"invalid slot set",`value[${r}]`,n),xM(n[0],n[1])):(ae(n!=null&&typeof n=="object","invalid address-slot set","value",t),xM(n.address,n.storageKeys)));ae(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return xM(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Uce(t){return{address:_r(t.address),nonce:Ct(t.nonce!=null?t.nonce:0),chainId:Ct(t.chainId!=null?t.chainId:0),signature:lc.from(t.signature)}}function Ont(t){let e;return typeof t=="string"?e=MS.computePublicKey(t,!1):e=t.publicKey,_r(di("0x"+e.substring(4)).substring(26))}function Dnt(t,e){return Ont(MS.recoverPublicKey(t,e))}const Bi=BigInt(0),Mnt=BigInt(2),Bnt=BigInt(27),Lnt=BigInt(28),Unt=BigInt(35),$nt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),TM=4096*32;function Fnt(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Dn(t.blobToKzgCommitment(nt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Dn(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Dn(t.blobToKZGCommitment(nt(r)));ae(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Dn(t.computeBlobProof(nt(r),nt(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Dn(t.computeBlobKZGProof(nt(r),nt(s)));ae(!1,"unsupported KZG library","kzg",t)}}}function jV(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=YC(e).substring(4),"0x"+n}function QC(t){return t==="0x"?null:_r(t)}function oO(t,e){try{return vw(t)}catch(n){ae(!1,n.message,e,t)}}function jnt(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:QC(s[1]),nonce:Fr(s[2],"nonce"),chainId:Fr(s[0],"chainId"),signature:lc.from({yParity:Ew(s[3],"yParity"),r:kf(s[4],32),s:kf(s[5],32)})})}return n}catch(n){ae(!1,n.message,e,t)}}function Ew(t,e){return t==="0x"?0:Mn(t,e)}function Fr(t,e){if(t==="0x")return Bi;const n=Ct(t,e);return ae(n<=$nt,"value exceeds uint size",e,n),n}function qn(t,e){const n=Ct(t,"value"),r=Ai(n);return ae(r.length<=32,"value too large",`tx.${e}`,n),r}function aO(t){return vw(t).map(e=>[e.address,e.storageKeys])}function Wnt(t){return t.map(e=>[qn(e.chainId,"chainId"),e.address,qn(e.nonce,"nonce"),qn(e.signature.yParity,"yParity"),Ai(e.signature.r),Ai(e.signature.s)])}function znt(t,e){ae(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)ae(as(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function Hnt(t){const e=hN(t);ae(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Ew(e[0],"nonce"),gasPrice:Fr(e[1],"gasPrice"),gasLimit:Fr(e[2],"gasLimit"),to:QC(e[3]),value:Fr(e[4],"value"),data:nt(e[5]),chainId:Bi};if(e.length===6)return n;const r=Fr(e[6],"v"),s=Fr(e[7],"r"),i=Fr(e[8],"s");if(s===Bi&&i===Bi)n.chainId=r;else{let o=(r-Unt)/Mnt;o<Bi&&(o=Bi),n.chainId=o,ae(o!==Bi||r===Bnt||r===Lnt,"non-canonical legacy v","v",e[6]),n.signature=lc.from({r:kf(e[7],32),s:kf(e[8],32),v:r})}return n}function Gnt(t,e){const n=[qn(t.nonce,"nonce"),qn(t.gasPrice||0,"gasPrice"),qn(t.gasLimit,"gasLimit"),t.to||"0x",qn(t.value,"value"),t.data];let r=Bi;if(t.chainId!=Bi)r=Ct(t.chainId,"tx.chainId"),ae(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Bi&&(n.push(Ai(r)),n.push("0x"),n.push("0x")),dm(n);let s=BigInt(27+e.yParity);return r!==Bi?s=lc.getChainIdV(r,e.v):BigInt(e.v)!==s&&ae(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Ai(s)),n.push(Ai(e.r)),n.push(Ai(e.s)),dm(n)}function cO(t,e){let n;try{if(n=Ew(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ae(!1,"invalid yParity","yParity",e[0])}const r=kf(e[1],32),s=kf(e[2],32),i=lc.from({r,s,yParity:n});t.signature=i}function qnt(t){const e=hN(Dn(t).slice(1));ae(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",nt(t));const n={type:2,chainId:Fr(e[0],"chainId"),nonce:Ew(e[1],"nonce"),maxPriorityFeePerGas:Fr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fr(e[4],"gasLimit"),to:QC(e[5]),value:Fr(e[6],"value"),data:nt(e[7]),accessList:oO(e[8],"accessList")};return e.length===9||cO(n,e.slice(9)),n}function Vnt(t,e){const n=[qn(t.chainId,"chainId"),qn(t.nonce,"nonce"),qn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),qn(t.maxFeePerGas||0,"maxFeePerGas"),qn(t.gasLimit,"gasLimit"),t.to||"0x",qn(t.value,"value"),t.data,aO(t.accessList||[])];return e&&(n.push(qn(e.yParity,"yParity")),n.push(Ai(e.r)),n.push(Ai(e.s))),Ks(["0x02",dm(n)])}function Knt(t){const e=hN(Dn(t).slice(1));ae(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",nt(t));const n={type:1,chainId:Fr(e[0],"chainId"),nonce:Ew(e[1],"nonce"),gasPrice:Fr(e[2],"gasPrice"),gasLimit:Fr(e[3],"gasLimit"),to:QC(e[4]),value:Fr(e[5],"value"),data:nt(e[6]),accessList:oO(e[7],"accessList")};return e.length===8||cO(n,e.slice(8)),n}function Ynt(t,e){const n=[qn(t.chainId,"chainId"),qn(t.nonce,"nonce"),qn(t.gasPrice||0,"gasPrice"),qn(t.gasLimit,"gasLimit"),t.to||"0x",qn(t.value,"value"),t.data,aO(t.accessList||[])];return e&&(n.push(qn(e.yParity,"recoveryParam")),n.push(Ai(e.r)),n.push(Ai(e.s))),Ks(["0x01",dm(n)])}function Qnt(t){let e=hN(Dn(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];ae(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),ae(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),ae(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),ae(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),ae(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}ae(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",nt(t));const s={type:3,chainId:Fr(e[0],"chainId"),nonce:Ew(e[1],"nonce"),maxPriorityFeePerGas:Fr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fr(e[4],"gasLimit"),to:QC(e[5]),value:Fr(e[6],"value"),data:nt(e[7]),accessList:oO(e[8],"accessList"),maxFeePerBlobGas:Fr(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),ae(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),ae(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)ae(as(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||cO(s,e.slice(11)),s}function Jnt(t,e,n){const r=[qn(t.chainId,"chainId"),qn(t.nonce,"nonce"),qn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),qn(t.maxFeePerGas||0,"maxFeePerGas"),qn(t.gasLimit,"gasLimit"),t.to||DS,qn(t.value,"value"),t.data,aO(t.accessList||[]),qn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),znt(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(qn(e.yParity,"yParity")),r.push(Ai(e.r)),r.push(Ai(e.s)),n)?Ks(["0x03",dm([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Ks(["0x03",dm(r)])}function Znt(t){const e=hN(Dn(t).slice(1));ae(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",nt(t));const n={type:4,chainId:Fr(e[0],"chainId"),nonce:Ew(e[1],"nonce"),maxPriorityFeePerGas:Fr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fr(e[4],"gasLimit"),to:QC(e[5]),value:Fr(e[6],"value"),data:nt(e[7]),accessList:oO(e[8],"accessList"),authorizationList:jnt(e[9],"authorizationList")};return e.length===10||cO(n,e.slice(10)),n}function Xnt(t,e){const n=[qn(t.chainId,"chainId"),qn(t.nonce,"nonce"),qn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),qn(t.maxFeePerGas||0,"maxFeePerGas"),qn(t.gasLimit,"gasLimit"),t.to||"0x",qn(t.value,"value"),t.data,aO(t.accessList||[]),Wnt(t.authorizationList||[])];return e&&(n.push(qn(e.yParity,"yParity")),n.push(Ai(e.r)),n.push(Ai(e.s))),Ks(["0x04",dm(n)])}var bu,Hv,Gv,qv,Vv,Kv,Yv,Qv,Jv,Zv,Xv,eE,Vy,Kp,vd,Yp,tE,nE,MT;const pd=class pd{constructor(){se(this,nE);se(this,bu);se(this,Hv);se(this,Gv);se(this,qv);se(this,Vv);se(this,Kv);se(this,Yv);se(this,Qv);se(this,Jv);se(this,Zv);se(this,Xv);se(this,eE);se(this,Vy);se(this,Kp);se(this,vd);se(this,Yp);se(this,tE);q(this,bu,null),q(this,Hv,null),q(this,qv,0),q(this,Vv,Bi),q(this,Kv,null),q(this,Yv,null),q(this,Qv,null),q(this,Gv,"0x"),q(this,Jv,Bi),q(this,Zv,Bi),q(this,Xv,null),q(this,eE,null),q(this,Vy,null),q(this,Kp,null),q(this,vd,null),q(this,Yp,null),q(this,tE,null)}get type(){return k(this,bu)}set type(e){switch(e){case null:q(this,bu,null);break;case 0:case"legacy":q(this,bu,0);break;case 1:case"berlin":case"eip-2930":q(this,bu,1);break;case 2:case"london":case"eip-1559":q(this,bu,2);break;case 3:case"cancun":case"eip-4844":q(this,bu,3);break;case 4:case"pectra":case"eip-7702":q(this,bu,4);break;default:ae(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=k(this,Hv);return e==null&&this.type===3?DS:e}set to(e){q(this,Hv,e==null?null:_r(e))}get nonce(){return k(this,qv)}set nonce(e){q(this,qv,Mn(e,"value"))}get gasLimit(){return k(this,Vv)}set gasLimit(e){q(this,Vv,Ct(e))}get gasPrice(){const e=k(this,Kv);return e==null&&(this.type===0||this.type===1)?Bi:e}set gasPrice(e){q(this,Kv,e==null?null:Ct(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=k(this,Yv);return e??(this.type===2||this.type===3?Bi:null)}set maxPriorityFeePerGas(e){q(this,Yv,e==null?null:Ct(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=k(this,Qv);return e??(this.type===2||this.type===3?Bi:null)}set maxFeePerGas(e){q(this,Qv,e==null?null:Ct(e,"maxFeePerGas"))}get data(){return k(this,Gv)}set data(e){q(this,Gv,nt(e))}get value(){return k(this,Jv)}set value(e){q(this,Jv,Ct(e,"value"))}get chainId(){return k(this,Zv)}set chainId(e){q(this,Zv,Ct(e))}get signature(){return k(this,Xv)||null}set signature(e){q(this,Xv,e==null?null:lc.from(e))}get accessList(){const e=k(this,eE)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){q(this,eE,e==null?null:vw(e))}get authorizationList(){const e=k(this,tE)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){q(this,tE,e==null?null:e.map(n=>Uce(n)))}get maxFeePerBlobGas(){const e=k(this,Vy);return e==null&&this.type===3?Bi:e}set maxFeePerBlobGas(e){q(this,Vy,e==null?null:Ct(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=k(this,Kp);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ae(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)ae(as(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}q(this,Kp,e)}get blobs(){return k(this,Yp)==null?null:k(this,Yp).map(e=>Object.assign({},e))}set blobs(e){if(e==null){q(this,Yp,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(uF(i)){Re(k(this,vd),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Dn(i);if(ae(o.length<=TM,"blob is too large",`blobs[${s}]`,i),o.length!==TM){const l=new Uint8Array(TM);l.set(o),o=l}const a=k(this,vd).blobToKzgCommitment(o),c=nt(k(this,vd).computeBlobKzgProof(o,a));n.push({data:nt(o),commitment:nt(a),proof:c}),r.push(jV(1,a))}else{const o=nt(i.commitment);n.push({data:nt(i.data),commitment:o,proof:nt(i.proof)}),r.push(jV(1,o))}}q(this,Yp,n),q(this,Kp,r)}get kzg(){return k(this,vd)}set kzg(e){e==null?q(this,vd,null):q(this,vd,Fnt(e))}get hash(){return this.signature==null?null:di(Se(this,nE,MT).call(this,!0,!1))}get unsignedHash(){return di(this.unsignedSerialized)}get from(){return this.signature==null?null:Dnt(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:MS.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Se(this,nE,MT).call(this,!0,!0)}get unsignedSerialized(){return Se(this,nE,MT).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=k(this,Vy)!=null||k(this,Kp);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Re(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Re(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Re(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return pd.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new pd;if(typeof e=="string"){const r=Dn(e);if(r[0]>=127)return pd.from(Hnt(r));switch(r[0]){case 1:return pd.from(Knt(r));case 2:return pd.from(qnt(r));case 3:return pd.from(Qnt(r));case 4:return pd.from(Znt(r))}Re(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new pd;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=lc.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(ae(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ae(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ae(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ae(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};bu=new WeakMap,Hv=new WeakMap,Gv=new WeakMap,qv=new WeakMap,Vv=new WeakMap,Kv=new WeakMap,Yv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,Xv=new WeakMap,eE=new WeakMap,Vy=new WeakMap,Kp=new WeakMap,vd=new WeakMap,Yp=new WeakMap,tE=new WeakMap,nE=new WeakSet,MT=function(e,n){Re(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return Gnt(this,r);case 1:return Ynt(this,r);case 2:return Vnt(this,r);case 3:return Jnt(this,r,n?this.blobs:null);case 4:return Xnt(this,r)}Re(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Dk=pd;function V0(t){return di(mf(t))}var ert="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const WV=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),zV=4;function trt(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let S=1;S<r;S++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let m=0;for(let S=0;S<d;S++)m=m<<1|u();let y=[],w=0,C=h;for(;;){let S=Math.floor(((m-w+1)*s-1)/C),P=0,O=r;for(;O-P>1;){let W=P+O>>>1;S<i[W]?O=W:P=W}if(P==0)break;y.push(P);let L=w+Math.floor(C*i[P]/s),M=w+Math.floor(C*i[P+1]/s)-1;for(;!((L^M)&f);)m=m<<1&g|u(),L=L<<1&g,M=M<<1&g|1;for(;L&~M&p;)m=m&f|m<<1&g>>>1|u(),L=L<<1^f,M=(M^f)<<1|f|1;w=L,C=1+M-L}let N=r-4;return y.map(S=>{switch(S-N){case 3:return N+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return N+256+(t[a++]<<8|t[a++]);case 1:return N+t[a++];default:return S-1}})}function nrt(t){let e=0;return()=>t[e++]}function $ce(t){return nrt(trt(rrt(t)))}function rrt(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function srt(t){return t&1?~t>>1:t>>1}function irt(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=srt(e());return n}function BS(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Fce(t){return LS(()=>{let e=BS(t);if(e.length)return e})}function jce(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(ort(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(art(n,t))}return e.flat()}function LS(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Wce(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)irt(t,n).forEach((i,o)=>r[o].push(i));return r}function ort(t,e){let n=1+e(),r=e(),s=LS(e);return Wce(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function art(t,e){let n=1+e();return Wce(n,1+t,e).map(s=>[s[0],s.slice(1)])}function crt(t){let e=[],n=BS(t);return s(r([]),[]),e;function r(i){let o=t(),a=LS(()=>{let c=BS(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function lrt(t){return t.toString(16).toUpperCase().padStart(2,"0")}function zce(t){return`{${lrt(t)}}`}function urt(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function dC(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function drt(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var hrt="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const US=44032,Mk=4352,Bk=4449,Lk=4519,Hce=19,Gce=21,hC=28,Uk=Gce*hC,frt=Hce*Uk,prt=US+frt,grt=Mk+Hce,mrt=Bk+Gce,yrt=Lk+hC;function u_(t){return t>>24&255}function qce(t){return t&16777215}let e6,HV,t6,BT;function wrt(){let t=$ce(hrt);e6=new Map(Fce(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),HV=new Set(BS(t)),t6=new Map,BT=new Map;for(let[e,n]of jce(t)){if(!HV.has(e)&&n.length==2){let[r,s]=n,i=BT.get(r);i||(i=new Map,BT.set(r,i)),i.set(s,e)}t6.set(e,n.reverse())}}function Vce(t){return t>=US&&t<prt}function brt(t,e){if(t>=Mk&&t<grt&&e>=Bk&&e<mrt)return US+(t-Mk)*Uk+(e-Bk)*hC;if(Vce(t)&&e>Lk&&e<yrt&&(t-US)%hC==0)return t+(e-Lk);{let n=BT.get(t);return n&&(n=n.get(e),n)?n:-1}}function Kce(t){e6||wrt();let e=[],n=[],r=!1;function s(i){let o=e6.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Vce(i)){let o=i-US,a=o/Uk|0,c=o%Uk/hC|0,l=o%hC;s(Mk+a),s(Bk+c),l>0&&s(Lk+l)}else{let o=t6.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=u_(e[0]);for(let o=1;o<e.length;o++){let a=u_(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=u_(e[--c]),i<=a))break}i=u_(e[o])}}return e}function vrt(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=u_(i),a=qce(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=brt(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Yce(t){return Kce(t).map(qce)}function Ert(t){return vrt(Kce(t))}const GV=45,Qce=".",Jce=65039,Zce=1,$k=t=>Array.from(t);function $S(t,e){return t.P.has(e)||t.Q.has(e)}class Crt extends Array{get is_emoji(){return!0}}let n6,Xce,Sy,r6,ele,bv,RM,_b,Qm,qV,s6;function EF(){if(n6)return;let t=$ce(ert);const e=()=>BS(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));n6=new Map(jce(t)),Xce=n(),Sy=e(),r6=new Set(e().map(u=>Sy[u])),Sy=new Set(Sy),ele=n(),n();let s=Fce(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};bv=LS(u=>{let d=LS(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=dC(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),RM=n(),_b=new Map;let a=e().concat($k(RM)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),RM.has(u)||_b.set(u,f)});for(let{V:u,M:d}of new Set(_b.values())){let h=[];for(let p of u){let g=bv.filter(y=>$S(y,p)),m=h.find(({G:y})=>g.some(w=>y.has(w)));m||(m={G:new Set,V:[]},h.push(m)),m.V.push(p),r(m.G,g)}let f=h.flatMap(p=>$k(p.G));for(let{G:p,V:g}of h){let m=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,m)}}Qm=new Set;let c=new Set;const l=u=>Qm.has(u)?c.add(u):Qm.add(u);for(let u of bv){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Qm)!_b.has(u)&&!c.has(u)&&_b.set(u,Zce);r(Qm,Yce(Qm)),qV=crt(t).map(u=>Crt.from(u)).sort(drt),s6=new Map;for(let u of qV){let d=[s6];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Jce?d.push(...f):d=f}for(let h of d)h.V=u}}function CF(t){return(tle(t)?"":`${_F(lO([t]))} `)+zce(t)}function _F(t){return`"${t}"‎`}function _rt(t){if(t.length>=4&&t[2]==GV&&t[3]==GV)throw new Error(`invalid label extension: "${dC(t.slice(0,4))}"`)}function Art(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function Srt(t){let e=t[0],n=WV.get(e);if(n)throw Y_(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=WV.get(e);if(o){if(s==i)throw Y_(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw Y_(`trailing ${n}`)}function lO(t,e=1/0,n=zce){let r=[];Irt(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];tle(a)&&(r.push(dC(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(dC(t.slice(s,i))),r.join("")}function Irt(t){return EF(),Sy.has(t)}function tle(t){return EF(),ele.has(t)}function Nrt(t){return krt(xrt(t,Ert,Drt))}function xrt(t,e,n){if(!t)return[];EF();let r=0;return t.split(Qce).map(s=>{let i=urt(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=Ort(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(Art(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))_rt(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Sy.has(u[0]))throw Y_("leading combining mark");for(let g=1;g<c;g++){let m=a[g];if(!m.is_emoji&&Sy.has(m[0]))throw Y_(`emoji + combining mark: "${dC(a[g-1])} + ${lO([m[0]])}"`)}Srt(u);let f=$k(new Set(h)),[p]=Rrt(f);Prt(p,h),Trt(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function Trt(t,e){let n,r=[];for(let s of e){let i=_b.get(s);if(i===Zce)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):$k(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>$S(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function Rrt(t){let e=bv;for(let n of t){let r=e.filter(s=>$S(s,n));if(!r.length)throw bv.some(s=>$S(s,n))?rle(e[0],n):nle(n);if(e=r,r.length==1)break}return e}function krt(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${_F(lO(e,63))}: ${s}`)}return dC(r)}).join(Qce)}function nle(t){return new Error(`disallowed character: ${CF(t)}`)}function rle(t,e){let n=CF(e),r=bv.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Y_(t){return new Error(`illegal placement: ${t}`)}function Prt(t,e){for(let n of e)if(!$S(t,n))throw rle(t,n);if(t.M){let n=Yce(e);for(let r=1,s=n.length;r<s;r++)if(r6.has(n[r])){let i=r+1;for(let o;i<s&&r6.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${CF(o)}`);if(i-r>zV)throw new Error(`excessive non-spacing marks: ${_F(lO(n.slice(r-1,i)))} (${i-r}/${zV})`);r=i}}}function Ort(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=Mrt(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Qm.has(o))s.push(o);else{let a=n6.get(o);if(a)s.push(...a);else if(!Xce.has(o))throw nle(o)}}}return s.length&&r.push(e(s)),r}function Drt(t){return t.filter(e=>e!=Jce)}function Mrt(t,e){let n=s6,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const sle=new Uint8Array(32);sle.fill(0);function VV(t){return ae(t.length!==0,"invalid ENS name; empty component","comp",t),t}function ile(t){const e=mf(Brt(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(VV(e.slice(r,s))),r=s+1);return ae(r<e.length,"invalid ENS name; empty component","name",t),n.push(VV(e.slice(r))),n}function Brt(t){try{if(t.length===0)throw new Error("empty label");return Nrt(t)}catch(e){ae(!1,`invalid ENS name (${e.message})`,"name",t)}}function i6(t){ae(typeof t=="string","invalid ENS name; not a string","name",t),ae(t.length,"invalid ENS name (empty label)","name",t);let e=sle;const n=ile(t);for(;n.length;)e=di(Ks([e,di(n.pop())]));return nt(e)}function Lrt(t,e){const n=e;return ae(n<=255,"DNS encoded label cannot exceed 255","length",n),nt(Ks(ile(t).map(r=>{ae(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const ole=new Uint8Array(32);ole.fill(0);const Urt=BigInt(-1),ale=BigInt(0),cle=BigInt(1),$rt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Frt(t){const e=Dn(t),n=e.length%32;return n?Ks([e,ole.slice(n)]):nt(e)}const jrt=lm(cle,32),Wrt=lm(ale,32),KV={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kM=["name","version","chainId","verifyingContract","salt"];function YV(t){return function(e){return ae(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const zrt={name:YV("name"),version:YV("version"),chainId:function(t){const e=Ct(t,"domain.chainId");return ae(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Iu(e)},verifyingContract:function(t){try{return _r(t).toLowerCase()}catch{}ae(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Dn(t,"domain.salt");return ae(e.length===32,'invalid domain value "salt"',"domain.salt",t),nt(e)}};function PM(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);ae(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=c_($rt,n?r-1:r),i=n?(s+cle)*Urt:ale;return function(o){const a=Ct(o,"value");return ae(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),lm(n?Kae(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return ae(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Dn(r);return ae(s.length===n,`invalid length for ${t}`,"value",r),Frt(r)}}}switch(t){case"address":return function(e){return kf(_r(e),32)};case"bool":return function(e){return e?jrt:Wrt};case"bytes":return function(e){return di(e)};case"string":return function(e){return V0(e)}}return null}function QV(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function Fx(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var JS,zh,rE,Gk,lle;const yl=class yl{constructor(e){se(this,Gk);le(this,"primaryType");se(this,JS);se(this,zh);se(this,rE);q(this,zh,new Map),q(this,rE,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=Fx(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),q(this,JS,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){ae(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=Fx(u.type).base;ae(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!PM(d)&&(ae(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);ae(o.length!==0,"missing primary type","types",e),ae(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Yt(this,{primaryType:o[0]});function a(c,l){ae(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),k(this,zh).set(c,QV(c,i[c])+u.map(d=>QV(d,i[d])).join(""))}}get types(){return JSON.parse(k(this,JS))}getEncoder(e){let n=k(this,rE).get(e);return n||(n=Se(this,Gk,lle).call(this,e),k(this,rE).set(e,n)),n}encodeType(e){const n=k(this,zh).get(e);return ae(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return di(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(PM(e))return r(e,n);const s=Fx(e).array;if(s)return ae(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});ae(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new yl(e)}static getPrimaryType(e){return yl.from(e).primaryType}static hashStruct(e,n,r){return yl.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=KV[r];ae(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>kM.indexOf(r.name)-kM.indexOf(s.name)),yl.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Ks(["0x1901",yl.hashDomain(e),yl.from(n).hash(r)])}static hash(e,n,r){return di(yl.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!as(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=yl.from(n);o.visit(r,(a,c)=>(a==="address"&&!as(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){yl.hashDomain(e);const s={},i=[];kM.forEach(c=>{const l=e[c];l!=null&&(s[c]=zrt[c](l),i.push({name:c,type:KV[c]}))});const o=yl.from(n);n=o.types;const a=Object.assign({},n);return ae(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return nt(Dn(l));if(c.match(/^u?int/))return Ct(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return ae(typeof l=="string","invalid string","value",l),l}ae(!1,"unsupported type","type",c)})}}};JS=new WeakMap,zh=new WeakMap,rE=new WeakMap,Gk=new WeakSet,lle=function(e){{const s=PM(e);if(s)return s}const n=Fx(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{ae(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return k(this,zh).has(s)&&(a=a.map(di)),di(Ks(a))}}const r=this.types[e];if(r){const s=V0(k(this,zh).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return k(this,zh).has(c)?di(l):l});return o.unshift(s),Ks(o)}}ae(!1,`unknown type: ${e}`,"type",e)};let Fk=yl;function fa(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const Hrt="external public payable override",Grt=fa(Hrt.split(" ")),ule="constant external internal payable private public pure view override",qrt=fa(ule.split(" ")),dle="constructor error event fallback function receive struct",hle=fa(dle.split(" ")),fle="calldata memory storage payable indexed",Vrt=fa(fle.split(" ")),Krt="tuple returns",Yrt=[dle,fle,Krt,ule].join(" "),Qrt=fa(Yrt.split(" ")),Jrt={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Zrt=new RegExp("^(\\s*)"),Xrt=new RegExp("^([0-9]+)"),est=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),ple=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),gle=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var to,vu,ZS,o6;const qk=class qk{constructor(e){se(this,ZS);se(this,to);se(this,vu);q(this,to,0),q(this,vu,e.slice())}get offset(){return k(this,to)}get length(){return k(this,vu).length-k(this,to)}clone(){return new qk(k(this,vu))}reset(){q(this,to,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=Se(this,ZS,o6).call(this,k(this,to)+1,e.match+1);return q(this,to,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;k(this,to)<e.match-1;){const r=this.peek().linkNext;n.push(Se(this,ZS,o6).call(this,k(this,to)+1,r)),q(this,to,r)}return q(this,to,e.match+1),n}peek(){if(k(this,to)>=k(this,vu).length)throw new Error("out-of-bounds");return k(this,vu)[k(this,to)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Gf(this,to)._++,e}toString(){const e=[];for(let n=k(this,to);n<k(this,vu).length;n++){const r=k(this,vu)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};to=new WeakMap,vu=new WeakMap,ZS=new WeakSet,o6=function(e=0,n=0){return new qk(k(this,vu).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let qu=qk;function vm(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(Zrt);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=Jrt[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Mn(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(est),a){if(c.text=a[1],i+=c.text.length,Qrt.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(gle)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Xrt),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new qu(e.map(o=>Object.freeze(o)))}function JV(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function uO(t,e){if(e.peekKeyword(hle)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Pf(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function mle(t){let e=Pf(t,qrt);return JV(e,fa("constant payable nonpayable".split(" "))),JV(e,fa("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function yf(t,e){return t.popParams().map(n=>wo.from(n,e))}function yle(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ct(t.pop().text);throw new Error("invalid gas")}return null}function K0(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const tst=new RegExp(/^(.*)\[([0-9]*)\]$/);function ZV(t){const e=t.match(gle);if(ae(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);ae(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);ae(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Ds={},hc=Symbol.for("_ethers_internal"),XV="_ParamTypeInternal",eK="_ErrorInternal",tK="_EventInternal",nK="_ConstructorInternal",rK="_FallbackInternal",sK="_FunctionInternal",iK="_StructInternal";var sE,LT;const wl=class wl{constructor(e,n,r,s,i,o,a,c){se(this,sE);le(this,"name");le(this,"type");le(this,"baseType");le(this,"indexed");le(this,"components");le(this,"arrayLength");le(this,"arrayChildren");if(eO(e,Ds,"ParamType"),Object.defineProperty(this,hc,{value:XV}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Yt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return Se(this,sE,LT).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(wl.isParamType(e))return e;if(typeof e=="string")try{return wl.from(vm(e),n)}catch{ae(!1,"invalid param type","obj",e)}else if(e instanceof qu){let a="",c="",l=null;Pf(e,fa(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>wl.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=ZV(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new wl(Ds,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(Pf(e,Vrt).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new wl(Ds,p,a,c,h,l,d,u)}const r=e.name;ae(!r||typeof r=="string"&&r.match(ple),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(ae(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(tst);if(o){const a=parseInt(o[2]||"-1"),c=wl.from({type:o[1],components:e.components});return new wl(Ds,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>wl.from(l)):null;return new wl(Ds,r||"",i,"tuple",s,a,null,null)}return i=ZV(e.type),new wl(Ds,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[hc]===XV}};sE=new WeakSet,LT=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;Se(u=o,sE,LT).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;Se(u=o[l],sE,LT).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let wo=wl;class Y0{constructor(e,n,r){le(this,"type");le(this,"inputs");eO(e,Ds,"Fragment"),r=Object.freeze(r.slice()),Yt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Y0.from(JSON.parse(e))}catch{}return Y0.from(vm(e))}if(e instanceof qu)switch(e.peekKeyword(hle)){case"constructor":return cf.from(e);case"error":return Ya.from(e);case"event":return Ld.from(e);case"fallback":case"receive":return Bh.from(e);case"function":return Ud.from(e);case"struct":return g0.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return cf.from(e);case"error":return Ya.from(e);case"event":return Ld.from(e);case"fallback":case"receive":return Bh.from(e);case"function":return Ud.from(e);case"struct":return g0.from(e)}Re(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ae(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return cf.isFragment(e)}static isError(e){return Ya.isFragment(e)}static isEvent(e){return Ld.isFragment(e)}static isFunction(e){return Ud.isFragment(e)}static isStruct(e){return g0.isFragment(e)}}class dO extends Y0{constructor(n,r,s,i){super(n,r,i);le(this,"name");ae(typeof s=="string"&&s.match(ple),"invalid identifier","name",s),i=Object.freeze(i.slice()),Yt(this,{name:s})}}function FS(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Ya extends dO{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,hc,{value:eK})}get selector(){return V0(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+FS(e,this.inputs)),n.join(" ")}static from(e){if(Ya.isFragment(e))return e;if(typeof e=="string")return Ya.from(vm(e));if(e instanceof qu){const n=uO("error",e),r=yf(e);return K0(e),new Ya(Ds,n,r)}return new Ya(Ds,e.name,e.inputs?e.inputs.map(wo.from):[])}static isFragment(e){return e&&e[hc]===eK}}class Ld extends dO{constructor(n,r,s,i){super(n,"event",r,s);le(this,"anonymous");Object.defineProperty(this,hc,{value:tK}),Yt(this,{anonymous:i})}get topicHash(){return V0(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+FS(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>wo.from(i)),new Ld(Ds,n,r,!1).topicHash}static from(n){if(Ld.isFragment(n))return n;if(typeof n=="string")try{return Ld.from(vm(n))}catch{ae(!1,"invalid event fragment","obj",n)}else if(n instanceof qu){const r=uO("event",n),s=yf(n,!0),i=!!Pf(n,fa(["anonymous"])).has("anonymous");return K0(n),new Ld(Ds,r,s,i)}return new Ld(Ds,n.name,n.inputs?n.inputs.map(r=>wo.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[hc]===tK}}class cf extends Y0{constructor(n,r,s,i,o){super(n,r,s);le(this,"payable");le(this,"gas");Object.defineProperty(this,hc,{value:nK}),Yt(this,{payable:i,gas:o})}format(n){if(Re(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${FS(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(cf.isFragment(n))return n;if(typeof n=="string")try{return cf.from(vm(n))}catch{ae(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof qu){Pf(n,fa(["constructor"]));const r=yf(n),s=!!Pf(n,Grt).has("payable"),i=yle(n);return K0(n),new cf(Ds,"constructor",r,s,i)}return new cf(Ds,"constructor",n.inputs?n.inputs.map(wo.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[hc]===nK}}class Bh extends Y0{constructor(n,r,s){super(n,"fallback",r);le(this,"payable");Object.defineProperty(this,hc,{value:rK}),Yt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Bh.isFragment(n))return n;if(typeof n=="string")try{return Bh.from(vm(n))}catch{ae(!1,"invalid fallback fragment","obj",n)}else if(n instanceof qu){const r=n.toString(),s=n.peekKeyword(fa(["fallback","receive"]));if(ae(s,"type must be fallback or receive","obj",r),n.popKeyword(fa(["fallback","receive"]))==="receive"){const c=yf(n);return ae(c.length===0,"receive cannot have arguments","obj.inputs",c),Pf(n,fa(["payable"])),K0(n),new Bh(Ds,[],!0)}let o=yf(n);o.length?ae(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[wo.from("bytes")];const a=mle(n);if(ae(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Pf(n,fa(["returns"])).has("returns")){const c=yf(n);ae(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return K0(n),new Bh(Ds,o,a==="payable")}if(n.type==="receive")return new Bh(Ds,[],!0);if(n.type==="fallback"){const r=[wo.from("bytes")],s=n.stateMutability==="payable";return new Bh(Ds,r,s)}ae(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[hc]===rK}}class Ud extends dO{constructor(n,r,s,i,o,a){super(n,"function",r,i);le(this,"constant");le(this,"outputs");le(this,"stateMutability");le(this,"payable");le(this,"gas");Object.defineProperty(this,hc,{value:sK}),o=Object.freeze(o.slice()),Yt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return V0(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+FS(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(FS(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>wo.from(i)),new Ud(Ds,n,"view",r,[],null).selector}static from(n){if(Ud.isFragment(n))return n;if(typeof n=="string")try{return Ud.from(vm(n))}catch{ae(!1,"invalid function fragment","obj",n)}else if(n instanceof qu){const s=uO("function",n),i=yf(n),o=mle(n);let a=[];Pf(n,fa(["returns"])).has("returns")&&(a=yf(n));const c=yle(n);return K0(n),new Ud(Ds,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Ud(Ds,n.name,r,n.inputs?n.inputs.map(wo.from):[],n.outputs?n.outputs.map(wo.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[hc]===sK}}class g0 extends dO{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,hc,{value:iK})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return g0.from(vm(e))}catch{ae(!1,"invalid struct fragment","obj",e)}else if(e instanceof qu){const n=uO("struct",e),r=yf(e);return K0(e),new g0(Ds,n,r)}return new g0(Ds,e.name,e.inputs?e.inputs.map(wo.from):[])}static isFragment(e){return e&&e[hc]===iK}}const Yu=new Map;Yu.set(0,"GENERIC_PANIC");Yu.set(1,"ASSERT_FALSE");Yu.set(17,"OVERFLOW");Yu.set(18,"DIVIDE_BY_ZERO");Yu.set(33,"ENUM_RANGE_ERROR");Yu.set(34,"BAD_STORAGE_DATA");Yu.set(49,"STACK_UNDERFLOW");Yu.set(50,"ARRAY_RANGE_ERROR");Yu.set(65,"OUT_OF_MEMORY");Yu.set(81,"UNINITIALIZED_FUNCTION_CALL");const nst=new RegExp(/^bytes([0-9]*)$/),rst=new RegExp(/^(u?int)([0-9]*)$/);let OM=null,oK=1024;function sst(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Dn(n);if(n=nt(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(nt(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(nt(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Yu.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?_r(e.to):null,data:e.data||"0x"};return e.from&&(c.from=_r(e.from)),Ss(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var Qp,Ab;const Vk=class Vk{constructor(){se(this,Qp)}getDefaultValue(e){const n=e.map(s=>Se(this,Qp,Ab).call(this,wo.from(s)));return new $x(n,"_").defaultValue()}encode(e,n){Gae(n.length,e.length,"types/values length mismatch");const r=e.map(o=>Se(this,Qp,Ab).call(this,wo.from(o))),s=new $x(r,"_"),i=new q5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>Se(this,Qp,Ab).call(this,wo.from(o)));return new $x(s,"_").decode(new V5(n,r,oK))}static _setDefaultMaxInflation(e){ae(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),oK=e}static defaultAbiCoder(){return OM==null&&(OM=new Vk),OM}static getBuiltinCallException(e,n,r){return sst(e,n,r,Vk.defaultAbiCoder())}};Qp=new WeakSet,Ab=function(e){if(e.isArray())return new Cnt(Se(this,Qp,Ab).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new $x(e.components.map(r=>Se(this,Qp,Ab).call(this,r)),e.name);switch(e.baseType){case"address":return new vnt(e.name);case"bool":return new _nt(e.name);case"string":return new Pnt(e.name);case"bytes":return new Ant(e.name);case"":return new Nnt(e.name)}let n=e.type.match(rst);if(n){let r=parseInt(n[2]||"256");return ae(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new knt(r/8,n[1]==="int",e.name)}if(n=e.type.match(nst),n){let r=parseInt(n[1]);return ae(r!==0&&r<=32,"invalid bytes length","param",e),new Snt(r,e.name)}ae(!1,"invalid type","type",e.type)};let jS=Vk;class ist{constructor(e,n,r){le(this,"fragment");le(this,"name");le(this,"signature");le(this,"topic");le(this,"args");const s=e.name,i=e.format();Yt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class ost{constructor(e,n,r,s){le(this,"fragment");le(this,"name");le(this,"args");le(this,"signature");le(this,"selector");le(this,"value");const i=e.name,o=e.format();Yt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class ast{constructor(e,n,r){le(this,"fragment");le(this,"name");le(this,"args");le(this,"signature");le(this,"selector");const s=e.name,i=e.format();Yt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class aK{constructor(e){le(this,"hash");le(this,"_isIndexed");Yt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const cK={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},lK={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&cK[t.toString()]&&(e=cK[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Ed,Cd,_d,Do,Kd,UT,$T;const ly=class ly{constructor(e){se(this,Kd);le(this,"fragments");le(this,"deploy");le(this,"fallback");le(this,"receive");se(this,Ed);se(this,Cd);se(this,_d);se(this,Do);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,q(this,_d,new Map),q(this,Ed,new Map),q(this,Cd,new Map);const r=[];for(const o of n)try{r.push(Y0.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Yt(this,{fragments:Object.freeze(r)});let s=null,i=!1;q(this,Do,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Yt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(ae(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=k(this,_d);break;case"event":c=k(this,Cd);break;case"error":c=k(this,Ed);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Yt(this,{deploy:cf.from("constructor()")}),Yt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return jS.defaultAbiCoder()}getFunctionName(e){const n=Se(this,Kd,UT).call(this,e,null,!1);return ae(n,"no matching function","key",e),n.name}hasFunction(e){return!!Se(this,Kd,UT).call(this,e,null,!1)}getFunction(e,n){return Se(this,Kd,UT).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(k(this,_d).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(k(this,_d).get(s),r)}}getEventName(e){const n=Se(this,Kd,$T).call(this,e,null,!1);return ae(n,"no matching event","key",e),n.name}hasEvent(e){return!!Se(this,Kd,$T).call(this,e,null,!1)}getEvent(e,n){return Se(this,Kd,$T).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(k(this,Cd).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(k(this,Cd).get(s),r)}}getError(e,n){if(as(e)){const s=e.toLowerCase();if(lK[s])return Ya.from(lK[s].signature);for(const i of k(this,Ed).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of k(this,Ed))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Ya.from("error Error(string)"):e==="Panic"?Ya.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");ae(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Ya.from(e).format(),e==="Error(string)")return Ya.from("error Error(string)");if(e==="Panic(uint256)")return Ya.from("error Panic(uint256)");const r=k(this,Ed).get(e);return r||null}forEachError(e){const n=Array.from(k(this,Ed).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(k(this,Ed).get(s),r)}}_decodeParams(e,n){return k(this,Do).decode(e,n)}_encodeParams(e,n){return k(this,Do).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ae(r,"unknown error","fragment",e),e=r}return ae(Hs(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Hs(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ae(r,"unknown error","fragment",e),e=r}return Ks([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ae(r,"unknown function","fragment",e),e=r}return ae(Hs(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Hs(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ae(r,"unknown function","fragment",e),e=r}return Ks([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);ae(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=oa(n);if(s.length%32===0)try{return k(this,Do).decode(e.outputs,s)}catch{r="could not decode result data"}Re(!1,r,"BAD_DATA",{value:nt(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Dn(e,"data"),s=jS.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=nt(r.slice(0,4)),c=this.getError(a);if(c)try{const l=k(this,Do).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);ae(r,"unknown function","fragment",e),e=r}return nt(k(this,Do).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);ae(i,"unknown event","eventFragment",e),e=i}Re(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?V0(o):i.type==="bytes"?di(nt(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=lm(o):i.type.match(/^bytes/)?o=Net(o,32):i.type==="address"&&k(this,Do).encode(["address"],[o]),kf(nt(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){ae(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ae(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);ae(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),ae(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(V0(c));else if(o.type==="bytes")r.push(di(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(k(this,Do).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:k(this,Do).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);ae(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;ae(as(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(wo.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?k(this,Do).decode(s,Ks(r)):null,c=k(this,Do).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new aK(null);else if(o[p])g=new aK(a[h++]);else try{g=a[h++]}catch(m){g=m}else try{g=c[d++]}catch(m){g=m}l.push(g),u.push(f.name||null)}),oC.fromItems(l,u)}parseTransaction(e){const n=Dn(e.data,"tx.data"),r=Ct(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(nt(n.slice(0,4)));if(!s)return null;const i=k(this,Do).decode(s.inputs,n.slice(4));return new ost(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new ist(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=nt(e),r=this.getError(Hs(n,0,4));if(!r)return null;const s=k(this,Do).decode(r.inputs,Hs(n,4));return new ast(r,r.selector,s)}static from(e){return e instanceof ly?e:typeof e=="string"?new ly(JSON.parse(e)):typeof e.formatJson=="function"?new ly(e.formatJson()):typeof e.format=="function"?new ly(e.format("json")):new ly(e)}};Ed=new WeakMap,Cd=new WeakMap,_d=new WeakMap,Do=new WeakMap,Kd=new WeakSet,UT=function(e,n,r){if(as(e)){const i=e.toLowerCase();for(const o of k(this,_d).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of k(this,_d))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;jo.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(jo.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");ae(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=k(this,_d).get(Ud.from(e).format());return s||null},$T=function(e,n,r){if(as(e)){const i=e.toLowerCase();for(const o of k(this,Cd).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of k(this,Cd))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(jo.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");ae(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=k(this,Cd).get(Ld.from(e).format());return s||null};let a6=ly;const wle=BigInt(0);function vv(t){return t??null}function ei(t){return t==null?null:t.toString()}class uK{constructor(e,n,r){le(this,"gasPrice");le(this,"maxFeePerGas");le(this,"maxPriorityFeePerGas");Yt(this,{gasPrice:vv(e),maxFeePerGas:vv(n),maxPriorityFeePerGas:vv(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ei(e),maxFeePerGas:ei(n),maxPriorityFeePerGas:ei(r)}}}function jk(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=nt(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ct(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Mn(t[s],`request.${s}`));return t.accessList&&(e.accessList=vw(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>uF(s)?nt(s):Object.assign({},s))),e}var Hh;class cst{constructor(e,n){le(this,"provider");le(this,"number");le(this,"hash");le(this,"timestamp");le(this,"parentHash");le(this,"parentBeaconBlockRoot");le(this,"nonce");le(this,"difficulty");le(this,"gasLimit");le(this,"gasUsed");le(this,"stateRoot");le(this,"receiptsRoot");le(this,"blobGasUsed");le(this,"excessBlobGas");le(this,"miner");le(this,"prevRandao");le(this,"extraData");le(this,"baseFeePerGas");se(this,Hh);q(this,Hh,e.transactions.map(r=>typeof r!="string"?new WS(r,n):r)),Yt(this,{provider:n,hash:vv(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:vv(e.prevRandao),extraData:e.extraData,baseFeePerGas:vv(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return k(this,Hh).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=k(this,Hh).slice();return e.length===0?[]:(Re(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:m}=this;return{_type:"Block",baseFeePerGas:ei(e),difficulty:ei(n),extraData:r,gasLimit:ei(s),gasUsed:ei(i),blobGasUsed:ei(this.blobGasUsed),excessBlobGas:ei(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return k(this,Hh).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=k(this,Hh)[e];else{const r=e.toLowerCase();for(const s of k(this,Hh))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;ae(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return lst(this)}}Hh=new WeakMap;class pN{constructor(e,n){le(this,"provider");le(this,"transactionHash");le(this,"blockHash");le(this,"blockNumber");le(this,"removed");le(this,"address");le(this,"data");le(this,"topics");le(this,"index");le(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Yt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Re(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Re(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Re(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return ust(this)}}var XS;class ble{constructor(e,n){le(this,"provider");le(this,"to");le(this,"from");le(this,"contractAddress");le(this,"hash");le(this,"index");le(this,"blockHash");le(this,"blockNumber");le(this,"logsBloom");le(this,"gasUsed");le(this,"blobGasUsed");le(this,"cumulativeGasUsed");le(this,"gasPrice");le(this,"blobGasPrice");le(this,"type");le(this,"status");le(this,"root");se(this,XS);q(this,XS,Object.freeze(e.logs.map(s=>new pN(s,n))));let r=wle;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Yt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return k(this,XS)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:ei(this.cumulativeGasUsed),from:n,gasPrice:ei(this.gasPrice),blobGasUsed:ei(this.blobGasUsed),blobGasPrice:ei(this.blobGasPrice),gasUsed:ei(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Ele(this)}reorderedEvent(e){return Re(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),vle(this,e)}}XS=new WeakMap;var Jp;const kF=class kF{constructor(e,n){le(this,"provider");le(this,"blockNumber");le(this,"blockHash");le(this,"index");le(this,"hash");le(this,"type");le(this,"to");le(this,"from");le(this,"nonce");le(this,"gasLimit");le(this,"gasPrice");le(this,"maxPriorityFeePerGas");le(this,"maxFeePerGas");le(this,"maxFeePerBlobGas");le(this,"data");le(this,"value");le(this,"chainId");le(this,"signature");le(this,"accessList");le(this,"blobVersionedHashes");le(this,"authorizationList");se(this,Jp);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,q(this,Jp,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:ei(this.chainId),data:l,from:a,gasLimit:ei(this.gasLimit),gasPrice:ei(this.gasPrice),hash:s,maxFeePerGas:ei(this.maxFeePerGas),maxPriorityFeePerGas:ei(this.maxPriorityFeePerGas),maxFeePerBlobGas:ei(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:ei(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ta({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=k(this,Jp),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await ta({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<k(this,Jp)&&(o=k(this,Jp)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const m of g)if(m===this.hash)return;for(let m=0;m<g.length;m++){const y=await g.getTransaction(m);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(y.hash);if(w==null||h-w.blockNumber+1<r)return;let C="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?C="repriced":y.data==="0x"&&y.from===y.to&&y.value===wle&&(C="cancelled"),Re(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:w})}}o++}},l=h=>{if(h==null||h.status!==0)return h;Re(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(Ss("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const m=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),i>=0){const y=async()=>{try{await c()}catch(w){if(ho(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Re(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ele(this)}reorderedEvent(e){return Re(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Re(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),vle(this,e)}replaceableTransaction(e){ae(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new kF(this,this.provider);return q(n,Jp,e),n}};Jp=new WeakMap;let WS=kF;function lst(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function vle(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Ele(t){return{orphan:"drop-transaction",tx:t}}function ust(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class AF extends pN{constructor(n,r,s){super(n,n.provider);le(this,"interface");le(this,"fragment");le(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Yt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Cle extends pN{constructor(n,r){super(n,n.provider);le(this,"error");Yt(this,{error:r})}}var iE;class dst extends ble{constructor(n,r,s){super(s,r);se(this,iE);q(this,iE,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?k(this,iE).getEvent(n.topics[0]):null;if(r)try{return new AF(n,k(this,iE),r)}catch(s){return new Cle(n,s)}return n})}}iE=new WeakMap;var eI;class SF extends WS{constructor(n,r,s){super(s,r);se(this,eI);q(this,eI,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new dst(k(this,eI),this.provider,s)}}eI=new WeakMap;class _le extends Yae{constructor(n,r,s,i){super(n,r,s);le(this,"log");Yt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class hst extends _le{constructor(e,n,r,s,i){super(e,n,r,new AF(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Yt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const dK=BigInt(0);function Ale(t){return t&&typeof t.call=="function"}function Sle(t){return t&&typeof t.estimateGas=="function"}function hO(t){return t&&typeof t.resolveName=="function"}function Ile(t){return t&&typeof t.sendTransaction=="function"}function Nle(t){if(t!=null){if(hO(t))return t;if(t.provider)return t.provider}}var tI;class fst{constructor(e,n,r){se(this,tI);le(this,"fragment");if(Yt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Q0(e.runner,"resolveName"),i=hO(s)?s:null;q(this,tI,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>ha(h,i))):ha(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return k(this,tI)}}tI=new WeakMap;function Q0(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Iy(t){return t==null?null:t.provider||null}async function xle(t,e){const n=jo.dereference(t,"overrides");ae(typeof n=="object","invalid overrides parameter","overrides",t);const r=jk(n);return ae(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ae(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function pst(t,e,n){const r=Q0(t,"resolveName"),s=hO(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=jo.dereference(c,a),a==="address"?ha(c,s):c))))}function gst(t){const e=async function(o){const a=await xle(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await ha(a.from,Nle(t.runner)));const c=t.interface,l=Ct(a.value||dK,"overrides.value")===dK,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&ae(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ae(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return ae(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),ae(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Q0(t.runner,"call");Re(Ale(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw lF(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;Re(Ile(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Iy(t.runner);return new SF(t.interface,l,c)},s=async function(o){const a=Q0(t.runner,"estimateGas");return Re(Sle(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Yt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function mst(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return Re(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await xle(l.pop()),d.from&&(d.from=await ha(d.from,Nle(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await pst(t.runner,u.inputs,l);return Object.assign({},d,await ta({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;Re(Ile(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Iy(t.runner);return new SF(t.interface,h,d)},o=async function(...l){const u=Q0(t.runner,"estimateGas");return Re(Sle(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Q0(t.runner,"call");Re(Ale(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw lF(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Yt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return Re(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function yst(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return Re(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new fst(t,n(...s),s)};return Yt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return Re(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const Wk=Symbol.for("_ethersInternal_contract"),Tle=new WeakMap;function wst(t,e){Tle.set(t[Wk],e)}function xc(t){return Tle.get(t[Wk])}function bst(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function IF(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(as(o,32))return o;const a=t.interface.getEvent(o);return ae(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?as(e,32)?n=[e]:(r=t.interface.getEvent(e),ae(r,"unknown fragment","event",e),n=[r.topicHash]):bst(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):ae(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function d_(t,e){const{subs:n}=xc(t);return n.get((await IF(t,e)).tag)||null}async function hK(t,e,n){const r=Iy(t.runner);Re(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await IF(t,n),{addr:a,subs:c}=xc(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=m=>{let y=s;if(y==null)try{y=t.interface.getEvent(m.topics[0])}catch{}if(y){const w=y,C=s?t.interface.decodeEventLog(s,m.data,m.topics):[];l6(t,n,C,N=>new hst(t,N,n,w,m))}else l6(t,n,[],w=>new _le(t,w,n,m))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let m=f;f=[],await Promise.all(m),r.off(d,h)}},c.set(i,l)}return l}let c6=Promise.resolve();async function vst(t,e,n,r){await c6;const s=await d_(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),xc(t).subs.delete(s.tag)),i>0}async function l6(t,e,n,r){try{await c6}catch{}const s=vst(t,e,n,r);return c6=s,await s}const jx=["then"];var BK;BK=Wk;const Q_=class Q_{constructor(e,n,r,s){le(this,"target");le(this,"interface");le(this,"runner");le(this,"filters");le(this,BK);le(this,"fallback");ae(typeof e=="string"||Dce(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=a6.from(n);Yt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,Wk,{value:{}});let o,a=null,c=null;if(s){const d=Iy(r);c=new SF(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(as(e))a=e,o=Promise.resolve(e);else{const d=Q0(r,"resolveName");if(!hO(d))throw Ss("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw Ss("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return xc(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return xc(this).addr=d,d});wst(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||jx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!ho(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>jx.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Yt(this,{filters:u}),Yt(this,{fallback:i.receive||i.fallback?gst(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||jx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!ho(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||jx.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new Q_(this.target,this.interface,e)}attach(e){return new Q_(e,this.interface,this.runner)}async getAddress(){return await xc(this).addrPromise}async getDeployedCode(){const e=Iy(this.runner);Re(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Iy(this.runner);return Re(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return xc(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),mst(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),yst(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=xc(this),o=s||await i,{fragment:a,topics:c}=await IF(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Iy(this.runner);return Re(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new AF(d,this.interface,h)}catch(f){return new Cle(d,f)}return new pN(d,u)})}async on(e,n){const r=await hK(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await hK(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await l6(this,e,n,null)}async listenerCount(e){if(e){const s=await d_(this,e);return s?s.listeners.length:0}const{subs:n}=xc(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await d_(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=xc(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await d_(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),xc(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await d_(this,e);if(!n)return this;n.stop(),xc(this).subs.delete(n.tag)}else{const{subs:n}=xc(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Q_{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let u6=Q_;function Est(){return u6}class Ev extends Est(){}function DM(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ae(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class Cst{constructor(e){le(this,"name");Yt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Rle=new RegExp("^(ipfs)://(.*)$","i"),fK=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Rle,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Zp,Ky,Xp,Sb,Kk,kle;const Qb=class Qb{constructor(e,n,r){se(this,Xp);le(this,"provider");le(this,"address");le(this,"name");se(this,Zp);se(this,Ky);Yt(this,{provider:e,address:n,name:r}),q(this,Zp,null),q(this,Ky,new Ev(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return k(this,Zp)==null&&q(this,Zp,(async()=>{try{return await k(this,Ky).supportsInterface("0x9061b923")}catch(e){if(ho(e,"CALL_EXCEPTION"))return!1;throw q(this,Zp,null),e}})()),await k(this,Zp)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await Se(this,Xp,Sb).call(this,"addr(bytes32)");return i==null||i===DS?null:i}catch(i){if(ho(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await Se(this,Xp,Sb).call(this,"addr(bytes32,uint)",[i]);if(as(o,20))return _r(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof Cst&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await Se(this,Xp,Sb).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;Re(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await Se(this,Xp,Sb).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await Se(this,Xp,Sb).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Ret("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Re(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<fK.length;r++){const s=n.match(fK[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=DM(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Ev(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",lm(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=DM(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new um(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:nt(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Rle)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=DM(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Re(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await Se(s=Qb,Kk,kle).call(s,e,r);if(i!=null){const o=new Qb(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Zp=new WeakMap,Ky=new WeakMap,Xp=new WeakSet,Sb=async function(e,n){n=(n||[]).slice();const r=k(this,Ky).interface;n.unshift(i6(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),Re(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[Lrt(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await k(this,Ky)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!ho(i,"CALL_EXCEPTION"))throw i}return null},Kk=new WeakSet,kle=async function(e,n){const r=await Qb.getEnsAddress(e);try{const i=await new Ev(r,["function resolver(bytes32) view returns (address)"],e).resolver(i6(n),{enableCcipRead:!0});return i===DS?null:i}catch(s){throw s}return null},se(Qb,Kk);let zk=Qb;const pK=BigInt(0);function Gn(t,e){return function(n){return n==null?e:t(n)}}function zS(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function gN(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Re(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function _st(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}ae(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function fC(t){return ae(as(t,!0),"invalid data","value",t),t}function uo(t){return ae(as(t,32),"invalid hash","value",t),t}const Ast=gN({address:_r,blockHash:uo,blockNumber:Mn,data:fC,index:Mn,removed:Gn(_st,!1),topics:zS(uo),transactionHash:uo,transactionIndex:Mn},{index:["logIndex"]});function Sst(t){return Ast(t)}const Ist=gN({hash:Gn(uo),parentHash:uo,parentBeaconBlockRoot:Gn(uo,null),number:Mn,timestamp:Mn,nonce:Gn(fC),difficulty:Ct,gasLimit:Ct,gasUsed:Ct,stateRoot:Gn(uo,null),receiptsRoot:Gn(uo,null),blobGasUsed:Gn(Ct,null),excessBlobGas:Gn(Ct,null),miner:Gn(_r),prevRandao:Gn(uo,null),extraData:fC,baseFeePerGas:Gn(Ct)},{prevRandao:["mixHash"]});function Nst(t){const e=Ist(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Ple(n)),e}const xst=gN({transactionIndex:Mn,blockNumber:Mn,transactionHash:uo,address:_r,topics:zS(uo),data:fC,index:Mn,blockHash:uo},{index:["logIndex"]});function Tst(t){return xst(t)}const Rst=gN({to:Gn(_r,null),from:Gn(_r,null),contractAddress:Gn(_r,null),index:Mn,root:Gn(nt),gasUsed:Ct,blobGasUsed:Gn(Ct,null),logsBloom:Gn(fC),blockHash:uo,hash:uo,logs:zS(Tst),blockNumber:Mn,cumulativeGasUsed:Ct,effectiveGasPrice:Gn(Ct),blobGasPrice:Gn(Ct,null),status:Gn(Mn),type:Gn(Mn,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function kst(t){return Rst(t)}function Ple(t){t.to&&Ct(t.to)===pK&&(t.to="0x0000000000000000000000000000000000000000");const e=gN({hash:uo,index:Gn(Mn,void 0),type:n=>n==="0x"||n==null?0:Mn(n),accessList:Gn(vw,null),blobVersionedHashes:Gn(zS(uo,!0),null),authorizationList:Gn(zS(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:_r(n.address),chainId:Ct(n.chainId),nonce:Ct(n.nonce),signature:lc.from(r)}},!1),null),blockHash:Gn(uo,null),blockNumber:Gn(Mn,null),transactionIndex:Gn(Mn,null),from:_r,gasPrice:Gn(Ct),maxPriorityFeePerGas:Gn(Ct),maxFeePerGas:Gn(Ct),maxFeePerBlobGas:Gn(Ct,null),gasLimit:Ct,to:Gn(_r,null),value:Ct,nonce:Mn,data:fC,creates:Gn(_r,null),chainId:Gn(Ct,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=bnt(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=lc.from(t.signature):e.signature=lc.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ct(e.blockHash)===pK&&(e.blockHash=null),e}const Pst="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class mN{constructor(e){le(this,"name");Yt(this,{name:e})}clone(){return new mN(this.name)}}class fO extends mN{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);le(this,"effectiveBlock");le(this,"txBase");le(this,"txCreate");le(this,"txDataZero");le(this,"txDataNonzero");le(this,"txAccessListStorageKey");le(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),ae(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Yt(this,s)}clone(){return new fO(this.effectiveBlock,this)}}class pO extends mN{constructor(n,r){super("org.ethers.plugins.network.Ens");le(this,"address");le(this,"targetNetwork");Yt(this,{address:n||Pst,targetNetwork:r??1})}clone(){return new pO(this.address,this.targetNetwork)}}var nI,rI;class Ost extends mN{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");se(this,nI);se(this,rI);q(this,nI,n),q(this,rI,r)}get url(){return k(this,nI)}get processFunc(){return k(this,rI)}clone(){return this}}nI=new WeakMap,rI=new WeakMap;const MM=new Map;var oE,aE,eg;const Jb=class Jb{constructor(e,n){se(this,oE);se(this,aE);se(this,eg);q(this,oE,e),q(this,aE,Ct(n)),q(this,eg,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return k(this,oE)}set name(e){q(this,oE,e)}get chainId(){return k(this,aE)}set chainId(e){q(this,aE,Ct(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ct(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ct(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ct(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(k(this,eg).values())}attachPlugin(e){if(k(this,eg).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,eg).set(e.name,e.clone()),this}getPlugin(e){return k(this,eg).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Jb(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new fO;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=vw(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(Dst(),e==null)return Jb.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=MM.get(e);if(n)return n();if(typeof e=="bigint")return new Jb("unknown",e);ae(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ae(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Jb(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new pO(e.ensAddress,e.ensNetwork)),n}ae(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=MM.get(e);r&&ae(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),MM.set(e,n)}};oE=new WeakMap,aE=new WeakMap,eg=new WeakMap;let Fd=Jb;function gK(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function mK(t){return new Ost(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:gK(a.maxFee,9),maxPriorityFeePerGas:gK(a.maxPriorityFee,9)}}catch(i){Re(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let yK=!1;function Dst(){if(yK)return;yK=!0;function t(e,n,r){const s=function(){const i=new Fd(e,n);return r.ensNetwork!=null&&i.attachPlugin(new pO(null,r.ensNetwork)),i.attachPlugin(new fO),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Fd.register(e,s),Fd.register(n,s),r.altNames&&r.altNames.forEach(i=>{Fd.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[mK("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[mK("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function d6(t){return JSON.parse(JSON.stringify(t))}var Gh,El,tg,Ad,cE,FT;class Mst{constructor(e){se(this,cE);se(this,Gh);se(this,El);se(this,tg);se(this,Ad);q(this,Gh,e),q(this,El,null),q(this,tg,4e3),q(this,Ad,-2)}get pollingInterval(){return k(this,tg)}set pollingInterval(e){q(this,tg,e)}start(){k(this,El)||(q(this,El,k(this,Gh)._setTimeout(Se(this,cE,FT).bind(this),k(this,tg))),Se(this,cE,FT).call(this))}stop(){k(this,El)&&(k(this,Gh)._clearTimeout(k(this,El)),q(this,El,null))}pause(e){this.stop(),e&&q(this,Ad,-2)}resume(){this.start()}}Gh=new WeakMap,El=new WeakMap,tg=new WeakMap,Ad=new WeakMap,cE=new WeakSet,FT=async function(){try{const e=await k(this,Gh).getBlockNumber();if(k(this,Ad)===-2){q(this,Ad,e);return}if(e!==k(this,Ad)){for(let n=k(this,Ad)+1;n<=e;n++){if(k(this,El)==null)return;await k(this,Gh).emit("block",n)}q(this,Ad,e)}}catch{}k(this,El)!=null&&q(this,El,k(this,Gh)._setTimeout(Se(this,cE,FT).bind(this),k(this,tg)))};var Yy,Qy,ng;class NF{constructor(e){se(this,Yy);se(this,Qy);se(this,ng);q(this,Yy,e),q(this,ng,!1),q(this,Qy,n=>{this._poll(n,k(this,Yy))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){k(this,ng)||(q(this,ng,!0),k(this,Qy).call(this,-2),k(this,Yy).on("block",k(this,Qy)))}stop(){k(this,ng)&&(q(this,ng,!1),k(this,Yy).off("block",k(this,Qy)))}pause(e){this.stop()}resume(){this.start()}}Yy=new WeakMap,Qy=new WeakMap,ng=new WeakMap;var lE,qh;class Bst extends NF{constructor(n,r){super(n);se(this,lE);se(this,qh);q(this,lE,r),q(this,qh,-2)}pause(n){n&&q(this,qh,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(k(this,lE));s!=null&&(k(this,qh)===-2?q(this,qh,s.number):s.number>k(this,qh)&&(r.emit(k(this,lE),s.number),q(this,qh,s.number)))}}lE=new WeakMap,qh=new WeakMap;var Yk;class Lst extends NF{constructor(n,r){super(n);se(this,Yk);q(this,Yk,d6(r))}async _poll(n,r){throw new Error("@TODO")}}Yk=new WeakMap;var uE;class Ust extends NF{constructor(n,r){super(n);se(this,uE);q(this,uE,r)}async _poll(n,r){const s=await r.getTransactionReceipt(k(this,uE));s&&r.emit(k(this,uE),s)}}uE=new WeakMap;var Vh,dE,hE,rg,Cl,Qk,Ole;class xF{constructor(e,n){se(this,Qk);se(this,Vh);se(this,dE);se(this,hE);se(this,rg);se(this,Cl);q(this,Vh,e),q(this,dE,d6(n)),q(this,hE,Se(this,Qk,Ole).bind(this)),q(this,rg,!1),q(this,Cl,-2)}start(){k(this,rg)||(q(this,rg,!0),k(this,Cl)===-2&&k(this,Vh).getBlockNumber().then(e=>{q(this,Cl,e)}),k(this,Vh).on("block",k(this,hE)))}stop(){k(this,rg)&&(q(this,rg,!1),k(this,Vh).off("block",k(this,hE)))}pause(e){this.stop(),e&&q(this,Cl,-2)}resume(){this.start()}}Vh=new WeakMap,dE=new WeakMap,hE=new WeakMap,rg=new WeakMap,Cl=new WeakMap,Qk=new WeakSet,Ole=async function(e){if(k(this,Cl)===-2)return;const n=d6(k(this,dE));n.fromBlock=k(this,Cl)+1,n.toBlock=e;const r=await k(this,Vh).getLogs(n);if(r.length===0){k(this,Cl)<e-60&&q(this,Cl,e-60);return}for(const s of r)k(this,Vh).emit(k(this,dE),s),q(this,Cl,s.blockNumber)};const $st=BigInt(2),Fst=10;function Wx(t){return t&&typeof t.then=="function"}function jT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Dle{constructor(e){le(this,"name");Yt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function jst(t){return JSON.parse(JSON.stringify(t))}function h6(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function BM(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(as(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:jT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:jT("orphan",n),filter:jst(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?h6(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{as(a)?s.push(a):i.push((async()=>{s.push(await ha(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=h6(s.map(a=>a.toLowerCase()))}return{filter:r,tag:jT("event",r),type:"event"}}ae(!1,"unknown ProviderEvent","event",t)}function LM(){return new Date().getTime()}const Wst={cacheTimeout:250,pollingInterval:4e3};var Mo,sg,Bo,fE,Pc,Jy,ig,Kh,sI,_l,pE,gE,kn,Sc,f6,p6,h_,g6,f_,WT;class zst{constructor(e,n){se(this,kn);se(this,Mo);se(this,sg);se(this,Bo);se(this,fE);se(this,Pc);se(this,Jy);se(this,ig);se(this,Kh);se(this,sI);se(this,_l);se(this,pE);se(this,gE);if(q(this,gE,Object.assign({},Wst,n||{})),e==="any")q(this,Jy,!0),q(this,Pc,null);else if(e){const r=Fd.from(e);q(this,Jy,!1),q(this,Pc,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else q(this,Jy,!1),q(this,Pc,null);q(this,Kh,-1),q(this,ig,new Map),q(this,Mo,new Map),q(this,sg,new Map),q(this,Bo,null),q(this,fE,!1),q(this,sI,1),q(this,_l,new Map),q(this,pE,!1)}get pollingInterval(){return k(this,gE).pollingInterval}get provider(){return this}get plugins(){return Array.from(k(this,sg).values())}attachPlugin(e){if(k(this,sg).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,sg).set(e.name,e.connect(this)),this}getPlugin(e){return k(this,sg).get(e)||null}get disableCcipRead(){return k(this,pE)}set disableCcipRead(e){q(this,pE,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new um(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}Re(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}Re(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new cst(Nst(e),this)}_wrapLog(e,n){return new pN(Sst(e),this)}_wrapTransactionReceipt(e,n){return new ble(kst(e),this)}_wrapTransactionResponse(e,n){return new WS(Ple(e),this)}_detectNetwork(){Re(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Re(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Mn(await Se(this,kn,Sc).call(this,{method:"getBlockNumber"}),"%response");return k(this,Kh)>=0&&q(this,Kh,e),e}_getAddress(e){return ha(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(as(e))return as(e,32)?e:Iu(e);if(typeof e=="bigint"&&(e=Mn(e,"blockTag")),typeof e=="number")return e>=0?Iu(e):k(this,Kh)>=0?Iu(k(this,Kh)+e):this.getBlockNumber().then(n=>Iu(n+e));ae(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?h6(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=jk(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=ha(n[s],this);Wx(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);Wx(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(k(this,Pc)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw k(this,Pc)===s&&q(this,Pc,null),i}})();return q(this,Pc,s),(await s).clone()}const e=k(this,Pc),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(k(this,Jy)?(this.emit("network",r,n),k(this,Pc)===e&&q(this,Pc,Promise.resolve(r))):Re(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await ta({_block:Se(this,kn,g6).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await Se(this,kn,Sc).call(this,{method:"getGasPrice"});return Ct(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await Se(this,kn,Sc).call(this,{method:"getPriorityFee"});return Ct(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*$st+c),new uK(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new um(r.url),i=await r.processFunc(n,this,s);return new uK(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return Wx(n)&&(n=await n),Ct(await Se(this,kn,Sc).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await ta({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Se(this,kn,p6).call(this,Se(this,kn,f6).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ct(await Se(this,kn,h_).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Mn(await Se(this,kn,h_).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return nt(await Se(this,kn,h_).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ct(n,"position");return nt(await Se(this,kn,h_).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await ta({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Dk.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await ta({network:this.getNetwork(),params:Se(this,kn,g6).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await ta({network:this.getNetwork(),params:Se(this,kn,Sc).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await ta({network:this.getNetwork(),params:Se(this,kn,Sc).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await Se(this,kn,Sc).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await ta({network:this.getNetwork(),result:Se(this,kn,Sc).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:nt(n)}async getLogs(e){let n=this._getFilter(e);Wx(n)&&(n=await n);const{network:r,params:s}=await ta({network:this.getNetwork(),params:Se(this,kn,Sc).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){Re(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await zk.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=_r(e);const n=i6(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await zk.getEnsAddress(this),i=await new Ev(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===DS)return null;const a=await new Ev(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ho(r,"BAD_DATA")&&r.value==="0x"||ho(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Ss("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){Re(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=k(this,_l).get(e);n&&(n.timer&&clearTimeout(n.timer),k(this,_l).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Gf(this,sI)._++,s=()=>{k(this,_l).delete(r),e()};if(this.paused)k(this,_l).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);k(this,_l).set(r,{timer:i,func:s,time:LM()})}return r}_forEachSubscriber(e){for(const n of k(this,Mo).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Dle(e.type);case"block":{const n=new Mst(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new Bst(this,e.type);case"event":return new xF(this,e.filter);case"transaction":return new Ust(this,e.hash);case"orphan":return new Lst(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of k(this,Mo).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),k(this,Bo)!=null&&n.pause(k(this,Bo));break}}async on(e,n){const r=await Se(this,kn,WT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,k(this,Bo)!=null&&r.subscriber.pause(k(this,Bo))),this}async once(e,n){const r=await Se(this,kn,WT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,k(this,Bo)!=null&&r.subscriber.pause(k(this,Bo))),this}async emit(e,...n){const r=await Se(this,kn,f_).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Yae(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),k(this,Mo).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await Se(this,kn,f_).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of k(this,Mo).values())n+=r.length;return n}async listeners(e){if(e){const r=await Se(this,kn,f_).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of k(this,Mo).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await Se(this,kn,f_).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),k(this,Mo).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await Se(this,kn,WT).call(this,e);r&&s.stop(),k(this,Mo).delete(n)}else for(const[n,{started:r,subscriber:s}]of k(this,Mo))r&&s.stop(),k(this,Mo).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return k(this,fE)}destroy(){this.removeAllListeners();for(const e of k(this,_l).keys())this._clearTimeout(e);q(this,fE,!0)}get paused(){return k(this,Bo)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(q(this,Kh,-1),k(this,Bo)!=null){if(k(this,Bo)==!!e)return;Re(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),q(this,Bo,!!e);for(const n of k(this,_l).values())n.timer&&clearTimeout(n.timer),n.time=LM()-n.time}resume(){if(k(this,Bo)!=null){this._forEachSubscriber(e=>e.resume()),q(this,Bo,null);for(const e of k(this,_l).values()){let n=e.time;n<0&&(n=0),e.time=LM(),setTimeout(e.func,n)}}}}Mo=new WeakMap,sg=new WeakMap,Bo=new WeakMap,fE=new WeakMap,Pc=new WeakMap,Jy=new WeakMap,ig=new WeakMap,Kh=new WeakMap,sI=new WeakMap,_l=new WeakMap,pE=new WeakMap,gE=new WeakMap,kn=new WeakSet,Sc=async function(e){const n=k(this,gE).cacheTimeout;if(n<0)return await this._perform(e);const r=jT(e.method,e);let s=k(this,ig).get(r);return s||(s=this._perform(e),k(this,ig).set(r,s),setTimeout(()=>{k(this,ig).get(r)===s&&k(this,ig).delete(r)},n)),await s},f6=async function(e,n,r){Re(r<Fst,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=jk(e);try{return nt(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&lF(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Hs(i.data,0,4)==="0x556f1830"){const o=i.data,a=await ha(s.to,this);let c;try{c=Kst(Hs(i.data,4))}catch(d){Re(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}Re(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);Re(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Ks([c.selector,Vst([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await Se(this,kn,f6).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},p6=async function(e){const{value:n}=await ta({network:this.getNetwork(),value:e});return n},h_=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await Se(this,kn,p6).call(this,Se(this,kn,Sc).call(this,Object.assign(e,{address:s,blockTag:i})))},g6=async function(e,n){if(as(e,32))return await Se(this,kn,Sc).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await Se(this,kn,Sc).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},f_=async function(e,n){let r=await BM(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await BM({orphan:"drop-log",log:n[0]},this)),k(this,Mo).get(r.tag)||null},WT=async function(e){const n=await BM(e,this),r=n.tag;let s=k(this,Mo).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},k(this,Mo).set(r,s)),s};function Hst(t,e){try{const n=m6(t,e);if(n)return Pk(n)}catch{}return null}function m6(t,e){if(t==="0x")return null;try{const n=Mn(Hs(t,e,e+32)),r=Mn(Hs(t,n,n+32));return Hs(t,n+32,n+32+r)}catch{}return null}function wK(t){const e=Ai(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Gst(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const qst=new Uint8Array([]);function Vst(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(qst),n+=32;for(let r=0;r<t.length;r++){const s=Dn(t[r]);e[r]=wK(n),e.push(wK(s.length)),e.push(Gst(s)),n+=32+Math.ceil(s.length/32)*32}return Ks(e)}const bK="0x0000000000000000000000000000000000000000000000000000000000000000";function Kst(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Re(wv(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Hs(t,0,32);Re(Hs(n,0,12)===Hs(bK,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Hs(n,12);try{const r=[],s=Mn(Hs(t,32,64)),i=Mn(Hs(t,s,s+32)),o=Hs(t,s+32);for(let a=0;a<i;a++){const c=Hst(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{Re(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=m6(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Re(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Re(Hs(t,100,128)===Hs(bK,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Hs(t,96,100);try{const r=m6(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Re(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Fm(t,e){if(t.provider)return t.provider;Re(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function vK(t,e){let n=jk(e);if(n.to!=null&&(n.to=ha(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),ha(r,t)]).then(([s,i])=>(ae(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await ta(n)}class Yst{constructor(e){le(this,"provider");Yt(this,{provider:e||null})}async getNonce(e){return Fm(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await vK(this,e)}async populateTransaction(e){const n=Fm(this,"populateTransaction"),r=await vK(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ct(r.chainId);ae(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?ae(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&ae(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Re(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Re(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Re(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ta(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Fm(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Fm(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Fm(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Fm(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Fm(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Dk.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){Re(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Qst(t){return JSON.parse(JSON.stringify(t))}var Xo,Sd,Zy,og,Xy,mE,hm,y6,w6;class Mle{constructor(e){se(this,hm);se(this,Xo);se(this,Sd);se(this,Zy);se(this,og);se(this,Xy);se(this,mE);q(this,Xo,e),q(this,Sd,null),q(this,Zy,Se(this,hm,y6).bind(this)),q(this,og,!1),q(this,Xy,null),q(this,mE,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){k(this,og)||(q(this,og,!0),Se(this,hm,y6).call(this,-2))}stop(){k(this,og)&&(q(this,og,!1),q(this,mE,!0),Se(this,hm,w6).call(this),k(this,Xo).off("block",k(this,Zy)))}pause(e){e&&Se(this,hm,w6).call(this),k(this,Xo).off("block",k(this,Zy))}resume(){this.start()}}Xo=new WeakMap,Sd=new WeakMap,Zy=new WeakMap,og=new WeakMap,Xy=new WeakMap,mE=new WeakMap,hm=new WeakSet,y6=async function(e){try{k(this,Sd)==null&&q(this,Sd,this._subscribe(k(this,Xo)));let n=null;try{n=await k(this,Sd)}catch(i){if(!ho(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){q(this,Sd,null),k(this,Xo)._recoverSubscriber(this,this._recover(k(this,Xo)));return}const r=await k(this,Xo).getNetwork();if(k(this,Xy)||q(this,Xy,r),k(this,Xy).chainId!==r.chainId)throw new Error("chaid changed");if(k(this,mE))return;const s=await k(this,Xo).send("eth_getFilterChanges",[n]);await this._emitResults(k(this,Xo),s)}catch(n){console.log("@TODO",n)}k(this,Xo).once("block",k(this,Zy))},w6=function(){const e=k(this,Sd);e&&(q(this,Sd,null),e.then(n=>{k(this,Xo).destroyed||k(this,Xo).send("eth_uninstallFilter",[n])}))};var e0;class Jst extends Mle{constructor(n,r){super(n);se(this,e0);q(this,e0,Qst(r))}_recover(n){return new xF(n,k(this,e0))}async _subscribe(n){return await n.send("eth_newFilter",[k(this,e0)])}async _emitResults(n,r){for(const s of r)n.emit(k(this,e0),n._wrapLog(s,n._network))}}e0=new WeakMap;class Zst extends Mle{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const Xst="bigint,boolean,function,number,string,symbol".split(/,/g);function zT(t){if(t==null||Xst.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(zT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function eit(t){return new Promise(e=>{setTimeout(e,t)})}function pb(t){return t&&t.toLowerCase()}function EK(t){return t&&typeof t.pollingInterval=="number"}const Ble={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class UM extends Yst{constructor(n,r){super(n);le(this,"address");r=_r(r),Yt(this,{address:r})}connect(n){Re(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=zT(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await ha(o,this.provider);ae(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await ha(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(ho(u,"CANCELLED")||ho(u,"BAD_DATA")||ho(u,"NETWORK_ERROR")||ho(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(ho(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",Ss("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=zT(n);if(r.from){const i=await ha(r.from,this.provider);ae(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?mf(n):n;return await this.provider.send("personal_sign",[nt(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=zT(s),o=await Fk.resolveNames(n,r,i,async a=>{const c=await ha(a);return ae(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Fk.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?mf(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),nt(r)])}}var t0,yE,Yh,Id,Eu,Al,Wa,iI,b6;class tit extends zst{constructor(n,r){super(n,r);se(this,iI);se(this,t0);se(this,yE);se(this,Yh);se(this,Id);se(this,Eu);se(this,Al);se(this,Wa);q(this,yE,1),q(this,t0,Object.assign({},Ble,r||{})),q(this,Yh,[]),q(this,Id,null),q(this,Al,null),q(this,Wa,null);{let i=null;const o=new Promise(a=>{i=a});q(this,Eu,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(ae(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&q(this,Al,Fd.from(n))):s&&(ae(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),q(this,Al,s))}_getOption(n){return k(this,t0)[n]}get _network(){return Re(k(this,Al),"network is not available yet","NETWORK_ERROR"),k(this,Al)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ct(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(k(this,Al))return k(this,Al)}else return n;return k(this,Wa)?await k(this,Wa):this.ready?(q(this,Wa,(async()=>{try{const r=Fd.from(Ct(await this.send("eth_chainId",[])));return q(this,Wa,null),r}catch(r){throw q(this,Wa,null),r}})()),await k(this,Wa)):(q(this,Wa,(async()=>{const r={id:Gf(this,yE)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],q(this,Wa,null)}catch(i){throw q(this,Wa,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Fd.from(Ct(s.result));throw this.getRpcError(r,s)})()),await k(this,Wa))}_start(){k(this,Eu)==null||k(this,Eu).resolve==null||(k(this,Eu).resolve(),q(this,Eu,null),(async()=>{for(;k(this,Al)==null&&!this.destroyed;)try{q(this,Al,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Ss("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await eit(1e3)}Se(this,iI,b6).call(this)})())}async _waitUntilReady(){if(k(this,Eu)!=null)return await k(this,Eu).promise}_getSubscriber(n){return n.type==="pending"?new Zst(this):n.type==="event"?this._getOption("polling")?new xF(this,n.filter):new Jst(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Dle("orphan"):super._getSubscriber(n)}get ready(){return k(this,Eu)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Iu(Ct(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=nt(n[s]))}),n.accessList&&(r.accessList=vw(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Uce(s);return{address:i.address,nonce:Iu(i.nonce),chainId:Iu(i.chainId),yParity:Iu(i.signature.yParity),r:Iu(i.signature.r),s:Iu(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[pb(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[pb(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[pb(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[pb(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(pb):n.filter.address=pb(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Ss("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return Ss("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=v6(i),l=jS.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(rit(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Ss("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Ss("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Ss("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Ss("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Ss("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Ss("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):Ss("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Ss("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Gf(this,yE)._++,i=new Promise((o,a)=>{k(this,Yh).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return Se(this,iI,b6).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new UM(this,i[n])}const{accounts:s}=await ta({network:this.getNetwork(),accounts:r});n=_r(n);for(const i of s)if(_r(i)===n)return new UM(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new UM(this,r))}destroy(){k(this,Id)&&(clearTimeout(k(this,Id)),q(this,Id,null));for(const{payload:n,reject:r}of k(this,Yh))r(Ss("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));q(this,Yh,[]),super.destroy()}}t0=new WeakMap,yE=new WeakMap,Yh=new WeakMap,Id=new WeakMap,Eu=new WeakMap,Al=new WeakMap,Wa=new WeakMap,iI=new WeakSet,b6=function(){if(k(this,Id))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");q(this,Id,setTimeout(()=>{q(this,Id,null);const r=k(this,Yh);for(q(this,Yh,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==k(this,t0).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>k(this,t0).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(Ss("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=Ss("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var ag;class nit extends tit{constructor(n,r){super(n,r);se(this,ag);let s=this._getOption("pollingInterval");s==null&&(s=Ble.pollingInterval),q(this,ag,s)}_getSubscriber(n){const r=super._getSubscriber(n);return EK(r)&&(r.pollingInterval=k(this,ag)),r}get pollingInterval(){return k(this,ag)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");q(this,ag,n),this._forEachSubscriber(r=>{EK(r)&&(r.pollingInterval=k(this,ag))})}}ag=new WeakMap;function v6(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&as(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=v6(t[e]);if(n)return n}return null}if(typeof t=="string")try{return v6(JSON.parse(t))}catch{}return null}function E6(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)E6(t[n],e);if(typeof t=="string")try{return E6(JSON.parse(t),e)}catch{}}}function rit(t){const e=[];return E6(t,e),e}var wE,bE;const uy=class uy extends nit{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});ae(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);se(this,wE);se(this,bE);q(this,bE,null),s&&s.providerInfo&&q(this,bE,s.providerInfo),q(this,wE,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return k(this,bE)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){ae(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await k(this,wE).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await k(this,wE).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new uy(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new uy(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof uy)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new uy(p,void 0,{providerInfo:g}))}else a(Ss("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new uy(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};wE=new WeakMap,bE=new WeakMap;let C6=uy;const Jm=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],uu="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",As={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},$M={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Nh=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],sit=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function iit(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function oit(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new C6(window.ethereum);return await new Ev(uu,Jm,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const Lle=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=OI(),[i,o]=G.useState(""),[a,c]=G.useState(""),[l,u]=G.useState(!1),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[g,m]=G.useState(!1),{writeContract:y,isPending:w,data:C}=_D(),{writeContract:N,isPending:S,data:P,error:O}=_D(),{writeContract:L,isPending:M,data:W}=_D(),F=CAe(),{isLoading:V}=CD({hash:C}),{isLoading:$,data:v}=CD({hash:P}),{isLoading:E}=CD({hash:W}),{data:_}=V7({address:uu,abi:Jm,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:R}=V7({address:uu,abi:Jm,functionName:"games",args:_?[_]:void 0,query:{enabled:!!_&&_!=="0x000000000000"}}),[x,B]=G.useState(""),j=(Y,Z)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${Y}" from ${Z}`),x&&!Y&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${x}" to "${Y}" from ${Z}`),B(Y)},U=(Y,Z)=>{console.log(`[WAGER_DEBUG] Setting wager to ${Y} TDMT from ${Z}`),Fn!==Y&&console.log(`[WAGER_DEBUG] Wager changed from ${Fn} to ${Y} TDMT`),Qn(Y)},[I,H]=G.useState("moves"),re=async()=>{if(!r||!qe){console.error("[CLAIM] Missing required data for claiming winnings");return}let Y=x;if(!Y&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const Z=await oit(r);Z&&Z!=="0x000000000000"&&(Y=Z,console.log("[CLAIM] Retrieved invite code from contract:",Y))}catch(Z){console.error("[CLAIM] Error getting invite code from contract:",Z)}}if(!Y){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",Y,"Player:",qe,"Address:",r);const Z=await Qi.getGame(Y);if(!Z){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",Z);let Q=null;if(Z.winner&&(Z.blue_player||Z.red_player)&&(Q=Z.winner==="blue"?Z.blue_player:Z.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:Z.winner,winnerAddress:Q})),!Q&&R)if(Z.winner&&(Z.winner==="blue"||Z.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Ee,Ye,$e,ot,jt,Rn;if(Array.isArray(R))[Ee,Ye,$e,ot,jt,Rn]=R;else{console.error("[CLAIM] Unexpected contract data format:",R),alert("Failed to verify winner. Please try again.");return}Q=Z.winner==="blue"?Ee:Ye,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:Z.winner,winnerAddress:Q,player1:Ee,player2:Ye})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",R);let Ee,Ye,$e,ot,jt,Rn;if(Array.isArray(R))[Ee,Ye,$e,ot,jt,Rn]=R;else{console.error("[CLAIM] Unexpected contract data format:",R),alert("Failed to verify winner. Please try again.");return}const rn=String(ot);if(rn.startsWith("0x"))Q=rn;else if(rn==="blue"||rn==="red")Q=rn==="blue"?Ee:Ye;else if(rn==="1"||rn==="2")Q=rn==="1"?Ee:Ye;else{console.error("[CLAIM] Unknown winner format:",ot,"as string:",rn),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:ot,winnerAddress:Q,player1:Ee,player2:Ye,winnerType:typeof ot,winnerValue:ot,address:r,addressType:typeof r})}if(!Q){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:Q,address:r,playerColor:qe,winnerAddressType:typeof Q,addressType:typeof r,addressesMatch:Q===r,winnerAddressLength:Q==null?void 0:Q.length,addressLength:r==null?void 0:r.length}),Q!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:Q,address:r,playerColor:qe}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let de=Y;if(!de&&R){console.log("[CLAIM] Using invite code from contract data as fallback");let Ee,Ye,$e,ot,jt,Rn;if(Array.isArray(R))[Ee,Ye,$e,ot,jt,Rn]=R,de=jt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",R),alert("Failed to get invite code. Please try again.");return}}if(!de||typeof de!="string"||!de.startsWith("0x")||de.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",de),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:de,winner:Q,functionName:"endGame",inviteCodeSource:Z.invite_code?"Firebase":"Contract"}),L({address:uu,abi:Jm,functionName:"endGame",args:[de,Q]}),console.log("[CLAIM] Contract call initiated successfully"),M?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:M,endGameHash:W})}catch(Z){console.error("[CLAIM] Error claiming winnings:",Z),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[ne,ge]=G.useState(Nh),[te,he]=G.useState("blue"),[me,_e]=G.useState(null),[Ce,Be]=G.useState([]),[Te,xe]=G.useState([]),[je,Ue]=G.useState("Waiting for opponent..."),[rt,Rt]=G.useState(As.LOBBY),[qe,pt]=G.useState(null),[nn,gn]=G.useState(null),[Fn,Qn]=G.useState(0),[fr,Tn]=G.useState([]),[z,T]=G.useState(!1),[D,K]=G.useState(null),[X,ue]=G.useState(null),[ve,ln]=G.useState(""),[Dt,Gt]=G.useState(0),[Jn]=G.useState(!0);G.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Je,bs]=G.useState(!1),[Ff,pr]=G.useState(null),[Qr,jf]=G.useState(!1),[Pr,Wr]=G.useState(null),[Em,zr]=G.useState(!1),[cs,Cw]=G.useState(!0),[Or,nr]=G.useState(null),[ai,vs]=G.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[Es,_w]=G.useState([]),[jn,ls]=G.useState(null),qo=G.useRef(null),Vn=G.useRef(null),us=G.useRef(r);G.useEffect(()=>{us.current=r},[r]),G.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",P),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",$),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",X),console.log("[JOIN RECEIPT DEBUG] - condition:",P&&!$&&X),P&&!$&&X&&(console.log("[CONTRACT] Join transaction confirmed:",P),r===X.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),pt("red"),gn(X.gameData.blue_player)),Qi.updateGame(X.inviteCode,{...X.gameData,red_player:X.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),Rt(As.ACTIVE),Ue("Game started!"),_a(X.inviteCode),console.log("[CONTRACT] Clearing pending join data"),ue(null)}).catch(Y=>{console.error("Error updating game in database:",Y),Ue("Joined game on contract but failed to update database"),ue(null)}))},[P,$,X,r]),G.useEffect(()=>{W&&!E&&(console.log("[CLAIM] End game transaction confirmed:",W),Ue("Winnings claimed successfully! Transaction hash: "+W.slice(0,10)+"..."),p(!1))},[W,E]),G.useEffect(()=>{M===!1&&f&&!W&&(console.log("[CLAIM] End game transaction rejected or failed"),Ue("Claim transaction was rejected. Please try again."),p(!1))},[M,f,W]),G.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",C),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",V),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",D),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",x),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",C&&!V&&D&&!x),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!C),console.log("[CREATE DEBUG] - not waiting for receipt:",!V),console.log("[CREATE DEBUG] - pendingGameData exists:",!!D),console.log("[CREATE DEBUG] - no inviteCode set:",!x),C&&!V&&D&&!x?(console.log("[CONTRACT] Create game transaction confirmed:",C),Qi.createGame(D).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),B(D.invite_code),pt("blue"),U(Dt,"create game success"),Rt(As.WAITING),Ue("Waiting for opponent to join..."),_a(D.invite_code),setTimeout(()=>{Zl()},1e3),K(null),T(!1)}).catch(Y=>{console.error("[FIREBASE] Error creating game after transaction:",Y),Ue("Transaction confirmed but failed to create game in database"),K(null),T(!1)})):C&&!V&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!D),console.log("[CREATE DEBUG] - inviteCode already set:",!!x))},[C,V,D,Dt]),G.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",D)},[D]),G.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",X),X){const Y=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),ue(null)},3e4);return()=>clearTimeout(Y)}},[X]),G.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",w),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",D),console.log("[CREATE REJECTION DEBUG] - createGameHash:",C),console.log("[CREATE REJECTION DEBUG] - condition:",w===!1&&D&&!C),w===!1&&D&&!C&&(console.log("[CONTRACT] Create game transaction rejected or failed"),Ue("Transaction was rejected. Please try again."),K(null),T(!1))},[w,D,C]),G.useEffect(()=>{S===!1&&X&&!P&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",S),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",X),console.log("[CONTRACT] Rejection details - joinGameHash:",P),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",_),Ue("Transaction was rejected. Please try again."),j("","join transaction rejection"),pt(null),U(0,"join transaction rejection"),gn(null),Rt(As.LOBBY),Ue(""),ue(null))},[S,X,P,r,_]),G.useEffect(()=>{r&&_!==void 0&&(g||(_!=="0x000000000000"&&R||_==="0x000000000000")&&Aw())},[r,_,R,g]),G.useEffect(()=>{m(!1)},[r]),G.useEffect(()=>()=>{Im(),qo.current&&qo.current(),Vn.current&&clearTimeout(Vn.current)},[]);const Aw=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),_&&_!=="0x000000000000"&&!R){console.log("[GAME_STATE] Waiting for contract data...");return}if(_&&_!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",_),R)){let Q,de,Ee,Ye,$e,ot;if(Array.isArray(R))[Q,de,Ee,Ye,$e,ot]=R;else{console.error("[GAME_STATE] Unexpected contract data format:",R);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:Q,player2:de,isActive:Ee,winner:Ye,inviteCode:$e,wagerAmount:ot}),!$e){console.error("[GAME_STATE] Invalid invite code:",$e);return}const jt=Q===r?"blue":"red",Rn=Q===r?de:Q;console.log("[GAME_STATE] Player is",jt,"opponent is",Rn),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",Q),console.log("[DEBUG] - player2 (red):",de),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",Q===r),console.log("[DEBUG] - player2 === address:",de===r);const rn=await Qi.getGame($e);if(rn){if(console.log("[GAME_STATE] Found game in Firebase:",rn),B($e),pt(jt),U(parseFloat(rn.bet_amount)/1e18,"checkPlayerGameState Firebase"),gn(Rn),rn.game_state==="waiting")Rt(As.WAITING),Ue("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(rn.game_state==="active"||rn.game_state==="test_update"){if(Rt(As.ACTIVE),Ue("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",rn.game_state,")"),rn.board){const hi=rn.board;ge(Aa(hi)),he(rn.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",rn.game_state,"- treating as active"),Rt(As.ACTIVE),Ue("Game in progress"),rn.board){const hi=rn.board;ge(Aa(hi)),he(rn.current_player||"blue")}_a($e),m(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",rt),console.log("[GAME_STATE] Game state from Firebase:",rn.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const hi={invite_code:$e,game_title:`Game ${$e.slice(-6)}`,bet_amount:ot?ot.toString():"0",blue_player:Q,red_player:de,game_state:Ee?"active":"waiting",board:{positions:Xl(Nh),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:uu,is_public:!0};if(await Qi.createGame(hi),console.log("[GAME_STATE] Successfully synced game to Firebase:",hi),B($e),pt(jt),U(parseFloat(hi.bet_amount)/1e18,"checkPlayerGameState sync"),gn(Rn),Ee?(Rt(As.ACTIVE),Ue("Game in progress")):(Rt(As.WAITING),Ue("Waiting for opponent to join...")),hi.board){const Jle=hi.board;ge(Aa(Jle)),he(hi.current_player||"blue")}_a($e),m(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const Z=(await Qi.getActiveGames()).filter(Q=>Q.chain==="sanko"&&(Q.blue_player===r||Q.red_player===r)&&["waiting","active"].includes(Q.game_state));if(Z&&Z.length>0){const Q=Z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",Q),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",Q.blue_player),console.log("[DEBUG] - red_player:",Q.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",Q.blue_player===r),console.log("[DEBUG] - red_player === address:",Q.red_player===r),B(Q.invite_code),pt(Q.blue_player===r?"blue":"red"),U(parseFloat(Q.bet_amount)/1e18,"checkPlayerGameState fallback"),gn(Q.blue_player===r?Q.red_player:Q.blue_player),Q.game_state==="waiting")Rt(As.WAITING),Ue("Waiting for opponent to join...");else if(Q.game_state==="active"||Q.game_state==="test_update"){if(Rt(As.ACTIVE),Ue("Game in progress"),Q.board){const de=Q.board;ge(Aa(de)),he(Q.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",Q.game_state,"- treating as active"),Rt(As.ACTIVE),Ue("Game in progress"),Q.board){const de=Q.board;ge(Aa(de)),he(Q.current_player||"blue")}_a(Q.invite_code),m(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Rt(As.LOBBY),T(!1),m(!0)}catch(Y){console.error("[GAME_STATE] Error in checkPlayerGameState:",Y)}},Hr=async()=>{try{await Hae();const Y=await zae(20);_w(Y)}catch(Y){console.error("Error loading leaderboard:",Y)}},ds=async Y=>{if(console.log("[SCORE] updateScore called with:",Y,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",q0(r)),await kk(r,Y)?console.log("[SCORE] Successfully updated score for:",q0(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(Z){console.error("[SCORE] Error updating score:",Z)}},Wf=async(Y,Z,Q)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:Y,bluePlayer:Z,redPlayer:Q}),!Z||!Q){console.error("[SCORE] Missing player addresses from contract");return}await _et(Y,Z,Q)?(console.log("[SCORE] Successfully updated both players scores"),await Hr()):console.error("[SCORE] Failed to update both players scores")}catch(de){console.error("[SCORE] Error updating both players scores:",de)}},Zl=async()=>{try{const Y=await Qi.getOpenGames();console.log("[FIREBASE] Loaded open games:",Y),await Cm(Y),Tn(Y)}catch(Y){console.error("Error loading open games:",Y)}},Cm=async Y=>{if(console.log("[CLEANUP] Checking for ghost games..."),!F){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const Z of Y)try{const Q=Z.invite_code;if(!Q||typeof Q!="string"||!Q.startsWith("0x")||Q.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",Z.invite_code,Q);continue}const de=await F.readContract({address:uu,abi:Jm,functionName:"games",args:[Q]});(!de||Array.isArray(de)&&de[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",Z.invite_code,"- removing from Firebase"),await Qi.deleteGame(Z.invite_code),console.log("[CLEANUP] Ghost game removed:",Z.invite_code))}catch(Q){console.error("[CLEANUP] Error checking game:",Z.invite_code,Q)}},zf=async()=>{if(!(!r||Dt<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Dt),T(!0);try{const Y=iit();console.log("[CREATE] Generated invite code:",Y);const Z={invite_code:Y,game_title:`Chess Game ${Y.slice(-6)}`,bet_amount:(Dt*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:Xl(Nh),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:uu,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",Z),console.log("[CREATE] Calling contract with args:",[Y,BigInt(Math.floor(Dt*1e18))]),y({address:uu,abi:Jm,functionName:"createGame",args:[Y],value:BigInt(Math.floor(Dt*1e18))}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",Z),K(Z),Ue("Creating game... Please confirm transaction in your wallet.")}catch(Y){console.error("[CREATE] Error creating game:",Y),Ue("Failed to create game. Please try again.")}finally{T(!1)}}},_m=async Y=>{if(r)try{const Z=await Qi.getGame(Y);if(!Z||Z.game_state!=="waiting"){Ue("Game not found or already full");return}const Q=parseFloat(Z.bet_amount),de=Q/1e18;if(B(Y),pt("red"),U(de,"joinGame"),gn(Z.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:Y,playerColor:"red",wagerAmountTDMT:de,opponent:Z.blue_player,address:r}),r===Z.blue_player){console.error("[JOIN] Player cannot join their own game"),Ue("You cannot join your own game");return}if(_&&_!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",_),Ue("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Ye=await window.ethereum.request({method:"eth_chainId"}),$e=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Ye),console.log("[JOIN] Wallet state check - connectedAccounts:",$e),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Ye){console.error("[JOIN] Error checking wallet state:",Ye)}console.log("[JOIN] Contract call parameters - contractAddress:",uu),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[Y]);const Ee=BigInt(Q);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",Q),console.log("[JOIN] Contract call parameters - wagerValue (wei):",Ee),console.log("[JOIN] Contract call parameters - value as hex:","0x"+Ee.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",Ee.toString()),Ue("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",uu),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[Y]),console.log("[JOIN] - value:",Ee),console.log("[JOIN] - value as BigInt:",Ee.toString()),N({address:uu,abi:Jm,functionName:"joinGame",args:[Y],value:Ee}),console.log("[JOIN] writeJoinGame called, setting pending data..."),ue({inviteCode:Y,gameData:Z,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(Z){console.error("[JOIN] Error joining game:",Z),Ue("Failed to join game. Please try again."),j("","join game error"),pt(null),U(0,"join game error"),gn(null)}},[Sw,Iw]=G.useState(null),[Nw,Am]=G.useState(""),[mc,Sm]=G.useState(!0),Im=()=>{console.log("[FIREBASE] No fallback to stop")},_a=Y=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",Y),qo.current&&(console.log("[FIREBASE] Removing existing subscription"),qo.current());const Z=Qi.subscribeToGame(Y,Q=>{const de=us.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",de),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",Q),console.log("[DEBUG] Blue player from Firebase:",Q==null?void 0:Q.blue_player),console.log("[DEBUG] Red player from Firebase:",Q==null?void 0:Q.red_player),console.log("[DEBUG] Blue player type:",typeof(Q==null?void 0:Q.blue_player)),console.log("[DEBUG] Red player type:",typeof(Q==null?void 0:Q.red_player)),console.log("[DEBUG] Current address type:",typeof de),console.log("[DEBUG] Current playerColor state:",qe),console.log("[DEBUG] Pending join game data:",!!X),!Q){console.log("[DEBUG] No game data received");return}if(X&&de===X.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",qe),Q.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),ue(null)),Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"&&gn(Q.blue_player===de?Q.red_player:Q.blue_player);else if(de&&Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Ye=de.toLowerCase()===Q.blue_player.toLowerCase(),$e=de.toLowerCase()===Q.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Ye),console.log("[DEBUG] Red player match:",$e),console.log("[DEBUG] Blue comparison:",`${de.toLowerCase()} === ${Q.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${de.toLowerCase()} === ${Q.red_player.toLowerCase()}`),Ye&&qe!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),pt("blue"),gn(Q.red_player)):$e&&qe!=="red"?(console.log("[DEBUG] Setting player color to RED"),pt("red"),gn(Q.blue_player)):!Ye&&!$e&&qe!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),pt(null),gn(null)):console.log("[DEBUG] Player color already correctly set to:",qe)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!de),console.log("[DEBUG] - blue_player:",!!Q.blue_player),console.log("[DEBUG] - red_player:",Q==null?void 0:Q.red_player),console.log("[DEBUG] - Current playerColor state:",qe),console.log("[DEBUG] - Contract game data available:",!!R),qe&&(qe==="blue"||qe==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",qe);return}else if(R&&Array.isArray(R)&&de){const[Ye,$e]=R;if(Ye&&$e){const ot=Ye.toLowerCase()===de.toLowerCase()?"blue":"red",jt=Ye.toLowerCase()===de.toLowerCase()?$e:Ye;console.log("[DEBUG] Setting playerColor from contract fallback:",ot),pt(ot),gn(jt)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!qe||qe!=="blue"&&qe!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),pt(null));Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"&&gn(Q.blue_player===de?Q.red_player:Q.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",Q.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof Q.bet_amount),console.log("[WAGER DEBUG] Full gameData:",Q),console.log("[WAGER DEBUG] parsed value:",Q.bet_amount?parseFloat(Q.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",Q.bet_amount?parseFloat(Q.bet_amount)/1e18:"null");let Ee=0;Q.bet_amount&&!isNaN(parseFloat(Q.bet_amount))?(Ee=parseFloat(Q.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",Ee)):R&&Array.isArray(R)&&R[5]?(Ee=parseFloat(R[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",Ee)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),U(Ee,"Firebase subscription"),Q.board&&ge(Aa(Q.board)),Q.current_player&&he(Q.current_player),Q.game_state==="active"?(Rt(As.ACTIVE),Ue("Game in progress")):Q.game_state==="finished"?(Rt(As.FINISHED),Ue("Game finished")):Q.game_state==="waiting"&&(Rt(As.WAITING),Ue("Waiting for opponent to join..."))});qo.current=Z,console.log("[FIREBASE] Firebase subscription setup complete for game:",Y)};G.useEffect(()=>(x&&_a(x),()=>{qo.current&&qo.current()}),[x,r]),G.useEffect(()=>{if(R&&!qe&&r){console.log("[FALLBACK] Setting playerColor from contract data");let Y,Z,Q,de,Ee,Ye;if(Array.isArray(R))[Y,Z,Q,de,Ee,Ye]=R;else{console.error("[FALLBACK] Unexpected contract data format:",R);return}const $e=Y===r?"blue":"red",ot=Y===r?Z:Y;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",Y),console.log("[FALLBACK] - player2 (red):",Z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",$e),console.log("[FALLBACK] - opponent:",ot),console.log("[FALLBACK] - inviteCode from contract:",Ee),pt($e),gn(ot),!x&&Ee&&(console.log("[FALLBACK] Setting missing inviteCode:",Ee),B(Ee)),x&&Qi.getGame(x).then(jt=>{jt&&(!jt.blue_player||!jt.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),zle()),jt&&jt.game_state==="active"&&X&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),ue(null))}).catch(jt=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",jt)})}},[R,qe,r,x]),G.useEffect(()=>{if(v&&X){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",v.transactionHash),console.log("[RECEIPT] Pending data:",X);const{inviteCode:Y,gameData:Z,address:Q}=X;Qi.updateGame(Y,{red_player:Q,blue_player:Z.blue_player,bet_amount:Z.bet_amount,game_state:"active",last_move:null,board:{positions:Xl(Nh),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),Ue("Game started! You are the red player."),Rt(As.ACTIVE),ue(null)}).catch(de=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",de),Ue("Game joined but failed to update game state. Please refresh.")})}},[v,X]),G.useEffect(()=>{O&&(console.error("[ERROR] Join transaction failed:",O),Ue(`Failed to join game: ${O.message||"Transaction rejected"}`),j("","join game error effect"),pt(null),U(0,"join game error effect"),gn(null),ue(null))},[O]);const Xl=Y=>{const Z={};return Y.forEach((Q,de)=>{Q.forEach((Ee,Ye)=>{Z[`${de}_${Ye}`]=Ee})}),Z},Aa=Y=>{if(!Y||!Y.positions)return console.warn("[BOARD] No board data available, using initial board"),Nh;if(console.log("[BOARD] Attempting to reconstruct board from:",Y),console.log("[BOARD] Positions type:",typeof Y.positions),console.log("[BOARD] Positions is array:",Array.isArray(Y.positions)),console.log("[BOARD] Positions value:",Y.positions),typeof Y.positions=="object"&&!Array.isArray(Y.positions)){const Z=Y.positions,Q=Y.rows||8,de=Y.cols||8,Ee=Array(Q).fill(null).map(()=>Array(de).fill(null));for(let Ye=0;Ye<Q;Ye++)for(let $e=0;$e<de;$e++){const ot=`${Ye}_${$e}`;Ee[Ye][$e]=Z[ot]||null}return console.log("[BOARD] Reconstructed from flat structure:",Ee),Ee}return Array.isArray(Y.positions)?(console.log("[BOARD] Found array structure, length:",Y.positions.length),Y.positions.length===8?Y.positions.every((Q,de)=>{const Ee=Array.isArray(Q)&&Q.length===8;return Ee||console.warn(`[BOARD] Row ${de} is invalid:`,Q,"Type:",typeof Q,"Length:",Q==null?void 0:Q.length),Ee})?(console.log("[BOARD] Using legacy array structure"),Y.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Nh):(console.warn("[BOARD] Array has wrong length:",Y.positions.length,"expected 8"),Nh)):(console.warn("[BOARD] Unknown board structure, using initial board:",Y),Nh)},Qu=Y=>`${Y.slice(0,6)}...${Y.slice(-4)}`,$s=Y=>Y&&Y===Y.toUpperCase()?"red":"blue",Hf=(Y,Z)=>Y>=0&&Y<8&&Z>=0&&Z<8,eu=(Y,Z)=>{const Q=Z==="red"?"K":"k";let de=-1,Ee=-1;for(let $e=0;$e<8;$e++){for(let ot=0;ot<8;ot++)if(Y[$e][ot]===Q){de=$e,Ee=ot;break}if(de!==-1)break}return de===-1?!1:xw(de,Ee,Z==="red"?"blue":"red",Y)},xw=(Y,Z,Q,de)=>{if(!de||!Array.isArray(de)||de.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",de),!1;for(let Ee=0;Ee<8;Ee++){if(!de[Ee]||!Array.isArray(de[Ee])||de[Ee].length!==8)return console.warn("[SAFETY] Invalid board row structure:",de[Ee]),!1;for(let Ye=0;Ye<8;Ye++){const $e=de[Ee][Ye];if($e&&$s($e)===Q&&Ve($e,Ee,Ye,Y,Z,!1,Q,de,!0))return!0}}return!1},Ju=(Y,Z,Q,de,Ee,Ye=ne)=>{const $e=Ye[Y][Z];if(!$e)return!1;const ot=Ye.map(jt=>[...jt]);return ot[Q][de]=$e,ot[Y][Z]=null,eu(ot,Ee)},Nm=(Y,Z,Q,de,Ee,Ye)=>{const $e=Y==="blue"?-1:1,ot=Y==="blue"?6:1;if(!Hf(de,Ee)||Y==="blue"&&de>=Z||Y==="red"&&de<=Z)return!1;if(Q===Ee&&de===Z+$e)return Ye[de][Ee]===null;if(Q===Ee&&Z===ot&&de===Z+2*$e)return Ye[Z+$e][Q]===null&&Ye[de][Ee]===null;if(Math.abs(Q-Ee)===1&&de===Z+$e){const jt=Ye[de][Ee];if(jt!==null&&$s(jt)!==Y)return!0;if(jt===null&&ai.lastPawnDoubleMove){const{row:Rn,col:rn}=ai.lastPawnDoubleMove;if(Rn===Z&&rn===Ee){const hi=Ye[Z][Ee];if(hi&&hi.toLowerCase()==="p"&&$s(hi)!==Y)return!0}}}return!1},ee=(Y,Z,Q,de,Ee)=>Y===Q||Z===de,ie=(Y,Z,Q,de)=>{const Ee=Math.abs(Y-Q),Ye=Math.abs(Z-de);return Ee===2&&Ye===1||Ee===1&&Ye===2},be=(Y,Z,Q,de,Ee)=>Math.abs(Y-Q)===Math.abs(Z-de),we=(Y,Z,Q,de,Ee)=>ee(Y,Z,Q,de)||be(Y,Z,Q,de),fe=(Y,Z,Q,de,Ee)=>{const Ye=Math.abs(Z-de),$e=Math.abs(Q-Ee);if(Ye<=1&&$e<=1)return!0;if(Ye===0&&$e===2){if(Y==="blue"&&!ai.blueKingMoved){if(Ee===6&&!ai.blueRooksMove.right||Ee===2&&!ai.blueRooksMove.left)return!0}else if(Y==="red"&&!ai.redKingMoved&&(Ee===6&&!ai.redRooksMove.right||Ee===2&&!ai.redRooksMove.left))return!0}return!1},He=(Y,Z,Q,de,Ee)=>{const Ye=Y===Q?0:(Q-Y)/Math.abs(Q-Y),$e=Z===de?0:(de-Z)/Math.abs(de-Z);let ot=Y+Ye,jt=Z+$e;for(;ot!==Q||jt!==de;){if(Ee[ot][jt]!==null)return!1;ot+=Ye,jt+=$e}return!0},Ve=(Y,Z,Q,de,Ee,Ye=!0,$e=$s(Y),ot=ne,jt=!1)=>{if(!Y||!Hf(de,Ee))return!1;const Rn=ot[de][Ee];if(Rn&&$s(Rn)===$e)return!1;let rn=!1;switch(Y.toUpperCase()){case"P":rn=Nm($e,Z,Q,de,Ee,ot);break;case"R":rn=ee(Z,Q,de,Ee)&&He(Z,Q,de,Ee,ot);break;case"N":rn=ie(Z,Q,de,Ee);break;case"B":rn=be(Z,Q,de,Ee)&&He(Z,Q,de,Ee,ot);break;case"Q":rn=we(Z,Q,de,Ee)&&He(Z,Q,de,Ee,ot);break;case"K":rn=fe($e,Z,Q,de,Ee);break}return!(!rn||Ye&&Ju(Z,Q,de,Ee,$e,ot))},At=(Y,Z=ne,Q=te)=>{const de=[],Ee=Z[Y.row][Y.col];if(!Ee||$s(Ee)!==Q)return de;const Ye=Ee.toLowerCase();if(Ye==="p"){const $e=Q==="blue"?-1:1,ot=Q==="blue"?6:1,jt=Y.row+$e;if(jt>=0&&jt<8&&Ve(Ee,Y.row,Y.col,jt,Y.col,!0,Q,Z,!0)&&de.push({row:jt,col:Y.col}),Y.row===ot){const Rn=Y.row+2*$e;Rn>=0&&Rn<8&&Ve(Ee,Y.row,Y.col,Rn,Y.col,!0,Q,Z,!0)&&de.push({row:Rn,col:Y.col})}for(const Rn of[-1,1]){const rn=Y.col+Rn,hi=Y.row+$e;rn>=0&&rn<8&&hi>=0&&hi<8&&Ve(Ee,Y.row,Y.col,hi,rn,!0,Q,Z,!0)&&de.push({row:hi,col:rn})}}else if(Ye==="n"){const $e=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[ot,jt]of $e){const Rn=Y.row+ot,rn=Y.col+jt;Rn>=0&&Rn<8&&rn>=0&&rn<8&&Ve(Ee,Y.row,Y.col,Rn,rn,!0,Q,Z,!0)&&de.push({row:Rn,col:rn})}}else for(let $e=0;$e<8;$e++)for(let ot=0;ot<8;ot++)Ve(Ee,Y.row,Y.col,$e,ot,!0,Q,Z,!0)&&de.push({row:$e,col:ot});return de},Zn=(Y,Z=ne)=>{if(!eu(Z,Y))return!1;for(let Q=0;Q<8;Q++)for(let de=0;de<8;de++){const Ee=Z[Q][de];if(Ee&&$s(Ee)===Y&&At({row:Q,col:de},Z,Y).length>0)return!1}return!0},br=(Y,Z=ne)=>{if(eu(Z,Y))return!1;for(let Q=0;Q<8;Q++)for(let de=0;de<8;de++){const Ee=Z[Q][de];if(Ee&&$s(Ee)===Y&&At({row:Q,col:de},Z,Y).length>0)return!1}return!0},Cs=(Y,Z)=>{if(console.log("[CLICK] Square clicked:",{row:Y,col:Z}),console.log("[CLICK] Game mode:",rt,"Player color:",qe),console.log("[CLICK] Current player:",te,"Player color:",qe),rt!==As.ACTIVE||!qe){console.log("[CLICK] Game not active or no player color");return}const Q=ne[Y][Z],de=Q?$s(Q):null;if(console.log("[CLICK] Piece at square:",Q,"Piece color:",de),te!==qe){console.log("[CLICK] Not player's turn. Current:",te,"Player:",qe);return}if(Q&&de===qe){_e({row:Y,col:Z});const Ee=At({row:Y,col:Z});Be(Ee);return}if(me&&Ce.some(Ee=>Ee.row===Y&&Ee.col===Z)){gr(me,{row:Y,col:Z}),_e(null),Be([]);return}_e(null),Be([])},gr=async(Y,Z)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:Y,to:Z,playerColor:qe,currentPlayer:te}),!qe||te!==qe){console.log("[PROMOTION DEBUG] Early return - playerColor:",qe,"currentPlayer:",te);return}const Q=ne[Y.row][Y.col];if(!Q){console.log("[PROMOTION DEBUG] No piece at position:",Y);return}if(console.log("[PROMOTION DEBUG] Piece:",Q,"isPawn:",Q.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",te,"to.row:",Z.row),console.log("[PROMOTION DEBUG] Player color:",qe),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",Q.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",te==="red"&&Z.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",te==="blue"&&Z.row===0),console.log("[PROMOTION DEBUG] - Full condition:",Q.toUpperCase()==="P"&&(te==="red"&&Z.row===7||te==="blue"&&Z.row===0)),Q.toUpperCase()==="P"&&(te==="red"&&Z.row===7||te==="blue"&&Z.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",Q,"at position:",Z),Wr({from:Y,to:Z}),jf(!0);return}await Tw(Y,Z)},Tw=async(Y,Z,Q="q")=>{if(!qe||te!==qe||!ne[Y.row][Y.col])return;const Ye=ne[Z.row][Z.col]!==null;if(xm(Ye?"capture":"move"),Ye){nr({row:Z.row,col:Z.col,show:!0}),setTimeout(()=>{PF(Y,Z,Q),nr(null)},500);return}PF(Y,Z,Q)},PF=async(Y,Z,Q="q")=>{if(!qe||te!==qe)return;const de=ne[Y.row][Y.col];if(!de)return;const Ee=ne.map(Rn=>[...Rn]);let Ye=de;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",de,"isPawn:",de.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",qe,"to.row:",Z.row),console.log("[PROMOTION DEBUG] - promotion condition:",de.toUpperCase()==="P"&&(qe==="red"&&Z.row===7||qe==="blue"&&Z.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",Q),de.toUpperCase()==="P"&&(qe==="red"&&Z.row===7||qe==="blue"&&Z.row===0)&&(Ye=qe==="red"?Q.toUpperCase():Q.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Ye)),$le(Ee,Y,Z,de),Ee[Z.row][Z.col]=Ye,Ee[Y.row][Y.col]=null,Fle(Y,Z,de);const $e=te==="blue"?"red":"blue";eu(Ee,$e)&&xm("check");let ot="active",jt=null;if(Zn($e,Ee))ot="finished",jt=te,Ue(`${te==="red"?"Red":"Blue"} wins by checkmate!`),xm(te===qe?"victory":"loser"),Ule(),console.log("[SCORE] Updating scores - Winner:",te,"Loser:",$e),console.log("[SCORE] Contract game data:",R),console.log("[SCORE] Player game invite code:",_),R&&R.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Wf(te,R[0],R[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await ds(te===qe?"win":"loss"),await Hr()),jt===qe&&(console.log("[CONTRACT] Triggering automatic payout for winner:",jt),setTimeout(()=>{re()},2e3));else if(br($e,Ee)){const Rn=te;ot="finished",Ue(`${Rn==="red"?"Red":"Blue"} wins by stalemate!`),xm(Rn===qe?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",Rn,"Loser:",$e),console.log("[SCORE] Contract game data:",R),console.log("[SCORE] Player game invite code:",_),R&&R.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Wf(Rn,R[0],R[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await ds(Rn===qe?"win":"loss"),await Hr()),Rn===qe&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",Rn),setTimeout(()=>{re()},2e3))}try{if(!x){console.error("[BUG] inviteCode is missing when trying to update game!"),Ue("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",x,"gameData:",{board:{positions:Ee},current_player:$e,game_state:ot,winner:jt,last_move:{from:Y,to:Z}});const rn={...await Qi.getGame(x),board:{positions:Xl(Ee),rows:8,cols:8},current_player:$e,game_state:ot,winner:jt,last_move:{from:Y,to:Z}};console.log("[FIREBASE] Storing data in Firebase:",rn),await Qi.updateGame(x,rn),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Rn){console.error("[DATABASE] Error updating game:",Rn)}ge(Ee),he($e),ls({from:Y,to:Z}),jf(!1),Wr(null)},Ule=()=>{zr(!0);for(let Y=0;Y<50;Y++)setTimeout(()=>{const Z=document.createElement("div");Z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Z),setTimeout(()=>Z.remove(),300)},Y*100);Vn.current&&clearTimeout(Vn.current),Vn.current=setTimeout(()=>{zr(!1)},5e3)},$le=(Y,Z,Q,de)=>{if(de.toLowerCase()==="k"&&Math.abs(Z.col-Q.col)===2){if(Q.col===6)Y[Z.row][7]=null,Y[Z.row][5]=$s(de)==="blue"?"r":"R";else if(Q.col===2){const Ee=Y[Z.row][3];Y[Z.row][0]=null,Y[Z.row][3]=$s(de)==="blue"?"r":"R",Ee&&Ee.toLowerCase()==="q"&&(Y[Z.row][4]=Ee)}}de.toLowerCase()==="p"&&Math.abs(Z.col-Q.col)===1&&Y[Q.row][Q.col]===null&&ai.lastPawnDoubleMove&&ai.lastPawnDoubleMove.row===Z.row&&ai.lastPawnDoubleMove.col===Q.col&&(Y[Z.row][Q.col]=null)},Fle=(Y,Z,Q)=>{const de={...ai};Q.toLowerCase()==="k"?$s(Q)==="blue"?de.blueKingMoved=!0:de.redKingMoved=!0:Q.toLowerCase()==="r"&&($s(Q)==="blue"?(Y.col===0&&(de.blueRooksMove.left=!0),Y.col===7&&(de.blueRooksMove.right=!0)):(Y.col===0&&(de.redRooksMove.left=!0),Y.col===7&&(de.redRooksMove.right=!0))),Q.toLowerCase()==="p"&&Math.abs(Y.row-Z.row)===2?de.lastPawnDoubleMove={row:Z.row,col:Z.col}:de.lastPawnDoubleMove=null,vs(de)},xm=Y=>{if(!cs)return;let Z="";switch(Y){case"move":Z="/images/move.mp3";break;case"capture":Z="/images/capture.mp3";break;case"check":Z="/images/play.mp3";break;case"checkmate":Z="/images/victory.mp3";break;case"victory":Z="/images/victory.mp3";break;case"loser":Z="/images/loser.mp3";break;case"upgrade":Z="/images/upgrade.mp3";break;default:Z="/images/move.mp3"}try{const Q=new Audio(Z);Q.volume=.3,Q.play().catch(de=>console.warn("Audio play failed:",de))}catch(Q){console.warn("Sound play failed:",Q)}},jle=async()=>{if(x)try{console.log("[RESET] Resetting corrupted game data for:",x);const Y={board:{positions:Xl(Nh),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Qi.updateGame(x,Y),console.log("[RESET] Successfully reset game data"),Ue("Game reset successfully. You can now make moves.")}catch(Y){console.error("[RESET] Error resetting game data:",Y),Ue("Failed to reset game. Please try again.")}},Wle=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(Y){console.error("Error checking stuck games:",Y)}},zle=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!x||!r){console.log("[FIX] Missing inviteCode or address");return}try{const Y=await Qi.getGame(x);if(!Y){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",Y),R&&Array.isArray(R)){const[Z,Q,de,Ee,Ye,$e]=R;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",Z),console.log("[FIX] - Contract player2 (red):",Q),console.log("[FIX] - Contract isActive:",de),console.log("[FIX] - Firebase blue_player:",Y.blue_player),console.log("[FIX] - Firebase red_player:",Y.red_player),console.log("[FIX] - Firebase game_state:",Y.game_state);let ot=!1;const jt={};Q&&Q!=="0x0000000000000000000000000000000000000000"&&(!Y.red_player||Y.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),jt.red_player=Q,ot=!0),Z&&Z!=="0x0000000000000000000000000000000000000000"&&(!Y.blue_player||Y.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),jt.blue_player=Z,ot=!0),Z&&Q&&Z!=="0x0000000000000000000000000000000000000000"&&Q!=="0x0000000000000000000000000000000000000000"&&(Y.game_state==="waiting"||!Y.game_state)&&(console.log("[FIX] Activating game in Firebase"),jt.game_state="active",jt.current_player="blue",ot=!0),de&&Y.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),jt.game_state="active",ot=!0),ot?(console.log("[FIX] Updating Firebase with:",jt),await Qi.updateGame(x,jt),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(Y){console.error("[FIX] Error fixing missing player data:",Y)}},Hle=(Y,Z)=>{if(!ne||!Array.isArray(ne)||ne.length!==8||!ne[Y]||!Array.isArray(ne[Y])||ne[Y].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:Y,col:Z,board:ne}),b.jsx("div",{className:"square error",children:b.jsx("div",{className:"error-indicator",children:"!"})},`${Y}-${Z}`);const Q=ne[Y][Z],de=(me==null?void 0:me.row)===Y&&(me==null?void 0:me.col)===Z,Ee=Ce.some(ot=>ot.row===Y&&ot.col===Z),Ye=jn&&(jn.from.row===Y&&jn.from.col===Z||jn.to.row===Y&&jn.to.col===Z),$e=Q&&Q.toUpperCase()==="K"&&eu(ne,$s(Q));return b.jsxs("div",{className:`square ${de?"selected":""} ${Ee?"legal-move":""} ${Ye?"last-move":""} ${$e?"square-in-check":""}`,onClick:()=>Cs(Y,Z),children:[Q&&b.jsx("div",{className:"piece",style:{backgroundImage:$M[Q]?`url(${$M[Q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Ee&&b.jsx("div",{className:"legal-move-indicator"})]},`${Y}-${Z}`)},Gle=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",Qr,"promotionMove:",Pr),!Qr||!Pr)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",Qr,"promotionMove:",Pr),null;const Y=te==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:Y.map(Z=>b.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",Z),Tw(Pr.from,Pr.to,Z),jf(!1),Wr(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:$M[Z],alt:Z,style:{width:"40px",height:"40px"}})},Z))})]})})},qle=()=>b.jsxs("div",{className:"piece-gallery",children:[b.jsx("h3",{children:"Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:sit.map(Y=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{pr(Ff===Y.key?null:Y.key)},children:[b.jsx("img",{src:Y.img,alt:Y.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:Y.name}),Ff===Y.key&&b.jsx("div",{className:"piece-gallery-desc",children:Y.desc})]},Y.key))})]}),OF=()=>b.jsxs("div",{className:"chess-multiplayer-lobby",children:[b.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"status-bar",children:["Connected: ",Qu(r)]}),b.jsxs("div",{className:"lobby-content",children:[b.jsxs("div",{className:"open-games",children:[b.jsx("h3",{children:"Open Games"}),b.jsxs("div",{className:"games-list",children:[fr.map(Y=>b.jsxs("div",{className:"game-item",children:[b.jsxs("div",{className:"game-info",children:[b.jsx("div",{className:"game-id",children:Y.game_title||"Untitled Game"}),b.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(Y.bet_amount)/1e18).toFixed(2)," tDMT"]}),b.jsxs("div",{className:"title",children:["Created by: ",Qu(Y.blue_player)]})]}),b.jsx("button",{className:"join-btn",onClick:()=>_m(Y.invite_code),children:"Join Game"})]},Y.invite_code)),fr.length===0&&b.jsx("div",{className:"no-games",children:"No open games available"})]})]}),b.jsxs("div",{className:"actions",children:[b.jsx("button",{className:"create-btn",onClick:()=>T(!0),disabled:z,children:"Create New Game"}),b.jsx("button",{onClick:Zl,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"}),b.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🏠 Back to Chess Home"})]}),z&&b.jsxs("div",{className:"create-form",children:[b.jsx("h3",{children:"Create New Game"}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Wager (tDMT):"}),b.jsx("input",{type:"number",value:Dt,onChange:Y=>Gt(Number(Y.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{className:"create-confirm-btn",onClick:zf,disabled:Dt<=0,children:"Create Game"}),b.jsx("button",{className:"cancel-btn",onClick:()=>T(!1),children:"Cancel"})]})]})]})]}):b.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Vle=()=>b.jsxs("div",{className:"chess-multiplayer-waiting",children:[b.jsx("h2",{children:"Waiting for Opponent"}),b.jsxs("div",{className:"game-code",children:["Invite Code: ",b.jsx("strong",{children:x})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("p",{children:["Wager: ",Fn," tDMT"]}),b.jsx("p",{children:"Share this invite code with your opponent"})]})]}),Kle=()=>b.jsxs("div",{className:"chess-game",children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"♔ Multiplayer Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),b.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:"×"})]})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("div",{className:"game-status-section",children:[b.jsx("span",{className:`status ${je.includes("Check")?"check-status":""}`,children:je}),b.jsxs("span",{className:`current-player ${te==="red"?"red-turn":"blue-turn"}`,children:["Current: ",te==="red"?"♔ Red":"♔ Blue"]})]}),b.jsxs("div",{className:"game-details-section",children:[b.jsxs("span",{className:"wager-display",children:["💰 ",Fn," tDMT"]}),nn&&b.jsxs("span",{className:"opponent-info",children:["vs ",Qu(nn)]})]}),rt===As.FINISHED&&b.jsxs("div",{className:"game-finished-actions",children:[b.jsx("button",{onClick:re,disabled:f,className:"claim-winnings-btn",children:f?"⏳ Claiming...":"🏆 Claim Winnings"}),b.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:"🏠 Back to Chess Home"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"sidebar-tabs",children:[b.jsx("button",{className:`tab-button ${I==="moves"?"active":""}`,onClick:()=>H("moves"),children:"📝 Moves"}),b.jsx("button",{className:`tab-button ${I==="leaderboard"?"active":""}`,onClick:()=>H("leaderboard"),children:"🏆 Leaderboard"})]}),I==="moves"&&b.jsxs("div",{className:"move-history",children:[b.jsx("h4",{children:"Move History"}),b.jsx("div",{className:"moves",children:Te.slice().reverse().map((Y,Z)=>b.jsx("div",{className:"move",children:Y},Te.length-1-Z))})]}),I==="leaderboard"&&b.jsxs("div",{className:"leaderboard",children:[b.jsx("h4",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"#"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"W"}),b.jsx("th",{children:"L"}),b.jsx("th",{children:"D"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Es.map((Y,Z)=>b.jsxs("tr",{children:[b.jsx("td",{children:Z+1}),b.jsx("td",{children:Y.username}),b.jsx("td",{children:Y.wins}),b.jsx("td",{children:Y.losses}),b.jsx("td",{children:Y.draws}),b.jsx("td",{children:Y.points})]},Y.username))})]})})]})]}),b.jsxs("div",{className:"center-area",children:[b.jsxs("div",{className:"chessboard-container",children:[b.jsx("div",{className:"chessboard",children:Array.from({length:8},(Y,Z)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(Q,de)=>Hle(Z,de))},Z))}),Or&&Or.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Or.row*12.5}%`,left:`${Or.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:b.jsx("div",{className:"explosion-effect",children:"💥"})})]}),b.jsxs("div",{className:"game-controls",children:[b.jsx("div",{className:"control-section",children:je.includes("corrupted")&&b.jsx("button",{className:"reset-game-btn",onClick:jle,children:"🔄 Reset Game"})}),b.jsx("div",{className:"settings-section",children:b.jsxs("div",{className:"sound-controls",children:[b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"sound-toggle",checked:cs,onChange:Y=>Cw(Y.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎵 Sound Effects"})]}),b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"victory-toggle",checked:Em,onChange:Y=>zr(Y.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎉 Victory Celebration"})]})]})}),d&&b.jsx("button",{className:"claim-winnings-btn",onClick:re,disabled:f||M||E,children:f||M||E?"⏳ Claiming...":"🏆 Claim Winnings"})]})]}),b.jsx("div",{className:"right-sidebar"})]}),Je&&b.jsx("div",{className:"piece-gallery-panel",children:qle()}),Gle(),Em&&b.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[b.jsx("div",{className:"balloons-container"}),b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[b.jsx("button",{onClick:()=>Rt(As.LOBBY),children:"Back to Lobby"}),b.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),Yle=()=>null;G.useEffect(()=>{Hr(),Zl(),Wle();const Y=setInterval(Zl,3e4);return()=>{clearInterval(Y),qo.current&&qo.current(),Vn.current&&clearTimeout(Vn.current)}},[]),console.log("[RENDER] Current game mode:",rt,"Game ID:",x);const Qle=(()=>{switch(rt){case As.LOBBY:return OF();case As.WAITING:return Vle();case As.ACTIVE:case As.FINISHED:return Kle();default:return OF()}})();return b.jsxs(b.Fragment,{children:[Qle,Yle()]})},FM={AI:"ai"},ait=1992,zx={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},CK=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],cit=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],lit=()=>{const[t,e]=G.useState(!1),n=G.useRef(null),r=G.useRef(!1);G.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=G.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=G.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},uit=()=>{const[t,e]=G.useState(null),[n,r]=G.useState(!1),s=G.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=G.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},dit=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=OI(),i=DI();_Ae();const{open:o}=eN(),[a,c]=G.useState(FM.AI),[l,u]=G.useState(()=>JSON.parse(JSON.stringify(CK))),[d,h]=G.useState("blue"),[f,p]=G.useState(null),[g,m]=G.useState("active"),[y,w]=G.useState("hard"),[C,N]=G.useState("Connect wallet to play"),[S,P]=G.useState([]),[O,L]=G.useState([]),[M,W]=G.useState([]),[F,V]=G.useState(null),[$,v]=G.useState(!1),[E,_]=G.useState(!1),[R,x]=G.useState(null),[B,j]=G.useState(null),[U]=G.useState(""),[I]=G.useState(.1),[H,re]=G.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ne=G.useRef(null),ge=G.useRef(!1),te=G.useRef(l),he=G.useRef(null),me=G.useRef(null),_e=G.useRef(!1),Ce=G.useRef(!1),[Be,Te]=G.useState(!1),[xe,je]=G.useState(!1),[Ue,rt]=G.useState(!1),[Rt]=G.useState(!0);G.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:qe}=lit(),{getOpeningData:pt}=uit(),[nn,gn]=G.useState("loading"),[Fn,Qn]=G.useState(!1),[fr,Tn]=G.useState([]),[z,T]=G.useState(!1),[D,K]=G.useState(()=>{const ee=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],ie=Math.floor(Math.random()*ee.length),be=ee[ie];return console.log("[DEBUG] Initial random chessboard selected:",be,"(index:",ie,")"),be}),[X,ue]=G.useState(!0),[ve,ln]=G.useState(!1);G.useEffect(()=>{!s||!r?(N("Connect wallet to play"),v(!1),Te(!1),o()):i!==ait?(N("Switch to Sanko Testnet to play"),v(!1),Te(!1),o()):N("Select game mode")},[s,r,i,o]);const Dt=()=>{const ee=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],ie=Math.floor(Math.random()*ee.length),be=ee[ie];return console.log("[DEBUG] Random chessboard selected:",be,"(index:",ie,")"),be};G.useEffect(()=>{if(qe)gn("ready");else{const ee=window.setTimeout(()=>{qe||(gn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(ee)}},[qe]),G.useEffect(()=>{te.current=l},[l]),G.useEffect(()=>(!ne.current&&typeof Worker<"u"&&(ne.current=new Worker("/aiWorker.js"),ne.current.onmessage=ee=>{console.log("[DEBUG] AI worker response received:",ee.data);const{move:ie,nodes:be}=ee.data;ie&&ge.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",ie),console.log("[DEBUG] AI searched",be,"nodes"),ge.current=!1,me.current&&(window.clearTimeout(me.current),me.current=null),he.current&&he.current(ie.from,ie.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ne.current.onerror=ee=>{console.error("[DEBUG] AI worker error:",ee),N("AI worker error - using fallback mode"),ge.current=!1}),()=>{ne.current&&(ne.current.terminate(),ne.current=null),me.current&&(window.clearTimeout(me.current),me.current=null)}),[]),G.useEffect(()=>{Gt()},[]);const Gt=async()=>{try{await Hae();const ee=await zae(20);L(ee),console.log("Leaderboard data loaded:",ee)}catch(ee){N("Failed to load leaderboard"),console.error("Leaderboard error:",ee)}},Jn=async ee=>{if(console.log("[DEBUG] updateScore called with:",ee),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",q0(r)),await kk(r,ee)?(console.log("[DEBUG] Successfully updated score for:",q0(r)),await Gt()):console.error("[DEBUG] Failed to update score")}catch(ie){console.error("[DEBUG] Error in updateScore:",ie)}},Je=ee=>ee&&ee===ee.toUpperCase()?"red":"blue",bs=(ee,ie)=>ee>=0&&ee<8&&ie>=0&&ie<8,Ff=(ee,ie)=>`${String.fromCharCode(97+ie)}${8-ee}`,pr=(ee,ie)=>{const be=ie==="blue"?"k":"K";let we=null;for(let Ve=0;Ve<8;Ve++){for(let At=0;At<8;At++)if(ee[Ve][At]===be){we={row:Ve,col:At};break}if(we)break}if(!we)return console.log(`King not found for ${ie}`),!1;const fe=ie==="blue"?"red":"blue",He=Qr(we.row,we.col,fe,ee);return console.log(`${ie} king at ${we.row},${we.col} under attack: ${He}`),He},Qr=(ee,ie,be,we)=>{for(let fe=0;fe<8;fe++)for(let He=0;He<8;He++){const Ve=we[fe][He];if(Ve&&Je(Ve)===be&&nr(Ve,fe,He,ee,ie,!1,be,we,!0))return!0}return!1},jf=(ee,ie,be,we,fe,He=l)=>{const Ve=He.map(Zn=>[...Zn]),At=Ve[ee][ie];return Ve[be][we]=At,Ve[ee][ie]=null,pr(Ve,fe)},Pr=(ee,ie,be,we,fe,He)=>{const Ve=ee==="blue"?-1:1,At=ee==="blue"?6:1;if(!bs(we,fe)||ee==="blue"&&we>=ie||ee==="red"&&we<=ie)return!1;const Zn=Math.abs(we-ie),br=Math.abs(fe-be);if((Zn===1&&br===0||Zn===2&&br===0&&ie===At||Zn===1&&br===1)&&Zn<=2&&br<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:ee,from:`${ie},${be}`,to:`${we},${fe}`}),be===fe&&we===ie+Ve)return He[we][fe]===null;if(be===fe&&ie===At&&we===ie+2*Ve)return He[ie+Ve][be]===null&&He[we][fe]===null;if(Math.abs(be-fe)===1&&we===ie+Ve){const gr=He[we][fe];return gr!==null&&Je(gr)!==ee}if(Math.abs(be-fe)===1&&we===ie+Ve){const gr=He[ie][fe];if(gr&&Je(gr)!==ee&&gr.toLowerCase()==="p"&&H.lastPawnDoubleMove&&H.lastPawnDoubleMove.row===ie&&H.lastPawnDoubleMove.col===fe)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},Wr=(ee,ie,be,we,fe)=>ee!==be&&ie!==we?!1:Or(ee,ie,be,we,fe),Em=(ee,ie,be,we)=>{const fe=Math.abs(ee-be),He=Math.abs(ie-we);return fe===2&&He===1||fe===1&&He===2},zr=(ee,ie,be,we,fe)=>Math.abs(ee-be)!==Math.abs(ie-we)?!1:Or(ee,ie,be,we,fe),cs=(ee,ie,be,we,fe)=>Wr(ee,ie,be,we,fe)||zr(ee,ie,be,we,fe),Cw=(ee,ie,be,we,fe)=>{const He=Math.abs(ie-we),Ve=Math.abs(be-fe);if(He<=1&&Ve<=1)return!0;if(He===0&&Ve===2){if(ee==="blue"&&!H.blueKingMoved){if(fe===6&&!H.blueRooksMove.right||fe===2&&!H.blueRooksMove.left)return!0}else if(ee==="red"&&!H.redKingMoved&&(fe===6&&!H.redRooksMove.right||fe===2&&!H.redRooksMove.left))return!0}return!1},Or=(ee,ie,be,we,fe)=>{const He=ee===be?0:(be-ee)/Math.abs(be-ee),Ve=ie===we?0:(we-ie)/Math.abs(we-ie);let At=ee+He,Zn=ie+Ve;for(;At!==be||Zn!==we;){if(fe[At][Zn]!==null)return!1;At+=He,Zn+=Ve}return!0},nr=(ee,ie,be,we,fe,He=!0,Ve=Je(ee),At=l,Zn=!1)=>{if(!bs(we,fe))return Zn||console.log("[ILLEGAL MOVE] Out of board:",{piece:ee,startRow:ie,startCol:be,endRow:we,endCol:fe}),!1;const br=At[we][fe];if(br&&Je(br)===Ve)return Zn||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:ee,startRow:ie,startCol:be,endRow:we,endCol:fe}),!1;const Cs=ee.toLowerCase();let gr=!1;switch(Cs){case"p":gr=Pr(Ve,ie,be,we,fe,At);break;case"r":gr=Wr(ie,be,we,fe,At);break;case"n":gr=Em(ie,be,we,fe);break;case"b":gr=zr(ie,be,we,fe,At);break;case"q":gr=cs(ie,be,we,fe,At);break;case"k":gr=Cw(Ve,ie,be,we,fe);break}return gr?gr&&He&&jf(ie,be,we,fe,Ve,At)?(Zn||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:ee,startRow:ie,startCol:be,endRow:we,endCol:fe}),!1):gr:(Zn||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:ee,startRow:ie,startCol:be,endRow:we,endCol:fe,playerColor:Ve,pieceType:Cs,targetPiece:At[we][fe],targetPieceColor:At[we][fe]?Je(At[we][fe]):null}),!1)},ai=(ee,ie=l,be=d)=>{const we=[],fe=ie[ee.row][ee.col];if(!fe||Je(fe)!==be)return we;const He=fe.toLowerCase();if(He==="p"){const Ve=be==="blue"?-1:1,At=be==="blue"?6:1,Zn=ee.row+Ve;if(Zn>=0&&Zn<8&&nr(fe,ee.row,ee.col,Zn,ee.col,!0,be,ie,!0)&&we.push({row:Zn,col:ee.col}),ee.row===At){const br=ee.row+2*Ve;br>=0&&br<8&&nr(fe,ee.row,ee.col,br,ee.col,!0,be,ie,!0)&&we.push({row:br,col:ee.col})}for(const br of[-1,1]){const Cs=ee.col+br,gr=ee.row+Ve;Cs>=0&&Cs<8&&gr>=0&&gr<8&&nr(fe,ee.row,ee.col,gr,Cs,!0,be,ie,!0)&&we.push({row:gr,col:Cs})}}else if(He==="n"){const Ve=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[At,Zn]of Ve){const br=ee.row+At,Cs=ee.col+Zn;br>=0&&br<8&&Cs>=0&&Cs<8&&nr(fe,ee.row,ee.col,br,Cs,!0,be,ie,!0)&&we.push({row:br,col:Cs})}}else for(let Ve=0;Ve<8;Ve++)for(let At=0;At<8;At++)nr(fe,ee.row,ee.col,Ve,At,!0,be,ie,!0)&&we.push({row:Ve,col:At});return we},vs=(ee,ie=l)=>{if(!pr(ie,ee))return!1;for(let be=0;be<8;be++)for(let we=0;we<8;we++){const fe=ie[be][we];if(fe&&Je(fe)===ee&&ai({row:be,col:we},ie,ee).length>0)return!1}return!0},Es=(ee,ie=l)=>{if(pr(ie,ee))return!1;for(let be=0;be<8;be++)for(let we=0;we<8;we++){const fe=ie[be][we];if(fe&&Je(fe)===ee&&ai({row:be,col:we},ie,ee).length>0)return!1}return!0},_w=(ee,ie)=>{if(g!=="active"||ge.current)return;const be=l[ee][ie],we=be?Je(be):null;if(f&&M.some(fe=>fe.row===ee&&fe.col===ie)){jn(f,{row:ee,col:ie});return}if(be&&we===d){const fe=ai({row:ee,col:ie});p({row:ee,col:ie}),W(fe);return}p(null),W([])},jn=(ee,ie,be=!1)=>{const we=l[ee.row][ee.col];if(console.log("[MOVE ATTEMPT]",{from:ee,to:ie,piece:we,isAIMove:be,board:JSON.parse(JSON.stringify(l)),moveHistory:S}),!!we){if(we.toLowerCase()==="p"&&(Je(we)==="blue"&&ie.row===0||Je(we)==="red"&&ie.row===7)){x({from:ee,to:ie}),_(!0);return}Am(ee,ie,"q",be)}};he.current=jn;const ls=G.useCallback((ee,ie,be=!1)=>{T(!0);const we=l.map(Ve=>[...Ve]),fe=we[ee.row][ee.col];if(!fe)return;we[ie.row][ie.col]=fe,we[ee.row][ee.col]=null,Sw(we,ee,ie,fe);const He=Iw(ee,ie);if(P(Ve=>{const At=[...Ve,He];return console.log("[MOVE HISTORY UPDATED]",At),At}),V({from:ee,to:ie}),p(null),W([]),S.length<10&&!be){const Ve=_K(we,d==="blue"?"red":"blue");pt(Ve).then(At=>{At&&At.moves&&At.moves.length>0&&(Tn(At.moves.slice(0,3)),Qn(!0),setTimeout(()=>Qn(!1),5e3))})}Nw(ee,ie,fe),h(Ve=>{const At=Ve==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",At),qo(we,At),At}),qo(we,d==="blue"?"red":"blue"),u(we),ge.current=!1,_e.current=!1,Ce.current=!1,T(!1)},[l,d,S,pt]);G.useEffect(()=>{if(!ge.current&&a==="ai"&&d==="red"&&!_e.current&&!z)if(ge.current=!0,y==="easy")setTimeout(()=>{const ee=Vn(l);ee?jn(ee.from,ee.to,!0):ge.current=!1},600);else{N("AI is calculating...");const ee=_K(l,d);if(Ce.current)return;Ce.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:ee,difficulty:y,movetime:3e3})}).then(be=>{if(be.ok)return be.json();throw new Error("API call failed")}).then(be=>{console.log("[DEBUG] Stockfish API response:",be);const we=be.bestmove||be.move;if(we&&we!=="(none)"&&we.length===4){const fe=we.charCodeAt(0)-97,He=parseInt(we[1]),Ve=we.charCodeAt(2)-97,At=parseInt(we[3]),Zn=8-He,br=8-At;if(console.log("[DEBUG] Parsed move:",{fromCol:fe,fromRowStockfish:He,toCol:Ve,toRowStockfish:At,fromRow:Zn,toRow:br}),fe>=0&&fe<8&&Zn>=0&&Zn<8&&Ve>=0&&Ve<8&&br>=0&&br<8){const Cs={from:{row:Zn,col:fe},to:{row:br,col:Ve}},gr=l[Zn][fe];if(console.log("[DEBUG] Move validation:",{piece:gr,moveObj:Cs,isValid:gr&&Je(gr)==="red"&&nr(gr,Zn,fe,br,Ve,!0,"red",l)}),gr&&Je(gr)==="red"&&nr(gr,Zn,fe,br,Ve,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",Cs),jn(Cs.from,Cs.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Tw=Vn(l);Tw&&jn(Tw.from,Tw.to,!0),ge.current=!1,Ce.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Cs=Vn(l);Cs&&jn(Cs.from,Cs.to,!0),ge.current=!1,Ce.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const fe=Vn(l);fe&&jn(fe.from,fe.to,!0),ge.current=!1,Ce.current=!1}}).catch(be=>{console.error("[DEBUG] Stockfish API error:",be),N("AI error. Falling back to random moves.");const we=Vn(l);we&&jn(we.from,we.to,!0),ge.current=!1,Ce.current=!1})}},[d,a,y,l,H,qe]);const qo=(ee,ie)=>{console.log("Checking game end for player:",ie);const be=ee.some(fe=>fe.some(He=>He==="k")),we=ee.some(fe=>fe.some(He=>He==="K"));if(!be)return console.log("[GAME END] KING CAPTURED - Red wins!"),m("checkmate"),N("King captured! Red wins!"),Jn("loss"),rt(!0),setTimeout(()=>rt(!1),3e3),"checkmate";if(!we)return console.log("[GAME END] KING CAPTURED - Blue wins!"),m("checkmate"),N("King captured! You win!"),Jn("win"),rt(!0),setTimeout(()=>rt(!1),3e3),"checkmate";if(console.log("Is king in check:",pr(ee,ie)),vs(ie,ee)){console.log("[GAME END] CHECKMATE",{winner:ie==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(ee)),moveHistory:S}),m("checkmate");const fe=ie==="blue"?"red":"blue";return fe==="blue"?(N("Checkmate! You win!"),mc("victory"),_a(!0),ln(!0),Sm(),Jn("win"),rt(!0),setTimeout(()=>rt(!1),3e3)):(N(`Checkmate! ${fe==="red"?"AI":"Opponent"} wins!`),mc("loser"),Aa(!0),Jn("loss"),rt(!0),setTimeout(()=>rt(!1),3e3)),"checkmate"}if(Es(ie,ee)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(ee)),moveHistory:S}),m("stalemate");const fe=ie==="blue"?"red":"blue";return fe==="blue"?(N("Stalemate! You win!"),mc("victory"),_a(!0),ln(!0),Sm(),Jn("win"),rt(!0),setTimeout(()=>rt(!1),3e3)):(N(`Stalemate! ${fe==="red"?"AI":"Opponent"} wins!`),mc("loser"),Aa(!0),Jn("loss"),rt(!0),setTimeout(()=>rt(!1),3e3)),"stalemate"}return pr(ee,ie)?(console.log("CHECK detected!"),mc("check"),N(`${ie==="blue"?"Blue":"Red"} is in check!`)):N("Your turn"),null},Vn=ee=>{const ie=[];for(let fe=0;fe<8;fe++)for(let He=0;He<8;He++){const Ve=ee[fe][He];Ve&&Je(Ve)==="red"&&ie.push({row:fe,col:He})}for(let fe=ie.length-1;fe>0;fe--){const He=Math.floor(Math.random()*(fe+1));[ie[fe],ie[He]]=[ie[He],ie[fe]]}const be=[],we=[];for(const fe of ie){const He=ai(fe,ee,"red");for(const Ve of He){const At=ee[Ve.row][Ve.col];if(At&&Je(At)==="blue"){const br={p:100,n:320,b:330,r:500,q:900,k:2e4}[At.toLowerCase()]||0;be.push({from:fe,to:Ve,value:br})}else we.push({from:fe,to:Ve})}}if(be.length>0&&Math.random()<.3){be.sort((fe,He)=>fe.value-He.value);for(const fe of be){const He=ee.map(At=>[...At]),Ve=He[fe.from.row][fe.from.col];if(He[fe.to.row][fe.to.col]=Ve,He[fe.from.row][fe.from.col]=null,!pr(He,"red"))return{from:fe.from,to:fe.to}}}for(const fe of we){const He=ee.map(At=>[...At]),Ve=He[fe.from.row][fe.from.col];if(He[fe.to.row][fe.to.col]=Ve,He[fe.from.row][fe.from.col]=null,!pr(He,"red"))return fe}be.sort((fe,He)=>fe.value-He.value);for(const fe of be){const He=ee.map(At=>[...At]),Ve=He[fe.from.row][fe.from.col];if(He[fe.to.row][fe.to.col]=Ve,He[fe.from.row][fe.from.col]=null,!pr(He,"red"))return{from:fe.from,to:fe.to}}return null},us=()=>{u(JSON.parse(JSON.stringify(CK))),h("blue"),p(null),m("active"),P([]),W([]),V(null),v(!1),N("Select game mode"),re({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ge.current&&(ge.current=!1)},Aw=()=>{if(eu(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){v(!1),Te(!1);return}v(!0),Te(!1),N("Game started! Your turn");const ee=Dt();K(ee),console.log("[DEBUG] Game started with chessboard:",ee)},Hr=ee=>`${ee.slice(0,6)}...${ee.slice(-4)}`,ds=(ee,ie)=>{const be=l[ee][ie],we=(f==null?void 0:f.row)===ee&&(f==null?void 0:f.col)===ie,fe=M.some(Ve=>Ve.row===ee&&Ve.col===ie),He=F&&(F.from.row===ee&&F.from.col===ie||F.to.row===ee&&F.to.col===ie);return b.jsxs("div",{className:`square ${we?"selected":""} ${fe?"legal-move":""} ${He?"last-move":""}`,onClick:()=>_w(ee,ie),children:[be&&b.jsx("div",{className:"piece",style:{backgroundImage:zx[be]?`url(${zx[be]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),fe&&b.jsx("div",{className:"legal-move-indicator"})]},`${ee}-${ie}`)},Wf=()=>{if(!E||!R)return null;const ee=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",children:ee.map(ie=>b.jsx("div",{className:"promotion-piece",onClick:()=>{Am(R.from,R.to,ie),_(!1),x(null)},style:{backgroundImage:zx[ie]?`url(${zx[ie]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},ie))})]})})},[Zl,Cm]=G.useState(null),zf=(ee=!1,ie="Click a piece to learn more about it.")=>b.jsxs("div",{className:`piece-gallery${ee?" piece-gallery-sm":""}`,children:[b.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:cit.map(be=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Cm(Zl===be.key?null:be.key)},children:[b.jsx("img",{src:be.img,alt:be.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:be.name}),Zl===be.key&&b.jsx("div",{className:"piece-gallery-desc",children:be.desc})]},be.key))}),b.jsx("div",{className:"piece-gallery-tip",children:ie})]}),_m=()=>b.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:b.jsx("div",{className:"difficulty-controls-col",children:b.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[b.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),b.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[b.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>w("easy"),children:"Easy"}),b.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>w("hard"),children:"Hard"})]}),b.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{Aw()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[b.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),Sw=(ee,ie,be,we)=>{if(we.toLowerCase()==="p"&&(Je(we)==="blue"&&be.row===0||Je(we)==="red"&&be.row===7)){const fe=Je(we)==="blue"?"q":"Q";ee[be.row][be.col]=fe}if(we.toLowerCase()==="k"&&Math.abs(ie.col-be.col)===2){if(be.col===6)ee[ie.row][7]=null,ee[ie.row][5]=Je(we)==="blue"?"r":"R";else if(be.col===2){const fe=ee[ie.row][3];ee[ie.row][0]=null,ee[ie.row][3]=Je(we)==="blue"?"r":"R",fe&&fe.toLowerCase()==="q"&&(ee[ie.row][4]=fe)}}},Iw=(ee,ie,be,we)=>{const fe=Ff(ee.row,ee.col),He=Ff(ie.row,ie.col);return`${fe}-${He}`},Nw=(ee,ie,be)=>{const we={...H};be.toLowerCase()==="k"?Je(be)==="blue"?we.blueKingMoved=!0:we.redKingMoved=!0:be.toLowerCase()==="r"&&(Je(be)==="blue"?(ee.col===0&&(we.blueRooksMove.left=!0),ee.col===7&&(we.blueRooksMove.right=!0)):(ee.col===0&&(we.redRooksMove.left=!0),ee.col===7&&(we.redRooksMove.right=!0))),be.toLowerCase()==="p"&&Math.abs(ee.row-ie.row)===2?we.lastPawnDoubleMove={row:ie.row,col:ie.col}:we.lastPawnDoubleMove=null,re(we)},Am=(ee,ie,be="q",we=!1)=>{l[ee.row][ee.col];const He=l[ie.row][ie.col]!==null;if(mc(He?"capture":"move"),He){j({row:ie.row,col:ie.col,show:!0}),setTimeout(()=>{ls(ee,ie,we),j(null)},500);return}ls(ee,ie,we)},mc=ee=>{if(!X)return;let ie="";switch(ee){case"move":ie="/images/move.mp3";break;case"capture":ie="/images/capture.mp3";break;case"check":ie="/images/play.mp3";break;case"checkmate":ie="/images/victory.mp3";break;case"victory":ie="/images/victory.mp3";break;case"loser":ie="/images/loser.mp3";break;case"upgrade":ie="/images/upgrade.mp3";break;default:ie="/images/move.mp3"}new Audio(ie).play().catch(()=>{})},Sm=()=>{mc("victory");for(let ee=0;ee<50;ee++)setTimeout(()=>{const ie=document.createElement("div");ie.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(ie),setTimeout(()=>ie.remove(),3e3)},ee*100);for(let ee=0;ee<15;ee++)setTimeout(()=>{const ie=document.createElement("div"),be=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],we=be[Math.floor(Math.random()*be.length)];ie.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${we};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(ie),setTimeout(()=>ie.remove(),6e3)},ee*200);setTimeout(()=>ln(!1),5e3)},[Im,_a]=G.useState(!1),[Xl,Aa]=G.useState(!1),Qu=()=>{_a(!1),Aa(!1)},$s=()=>{Qu(),us()},Hf=()=>{Qu(),v(!1)},eu=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},xw=a==="online",[Ju,Nm]=G.useState("leaderboard");return b.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Rt?" chess-dark-mode":""}${$?" game-active":""}`,children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,children:"_"}),b.jsx("button",{onClick:t,children:"×"})]})]}),b.jsx("div",{className:"game-stable-layout",children:b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"left-sidebar",children:[Ju==="leaderboard"&&b.jsxs("div",{className:"leaderboard-compact",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table-compact",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Rank"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Array.isArray(O)&&O.slice(0,8).map((ee,ie)=>{if(typeof ee=="object"&&ee!==null&&"username"in ee&&"wins"in ee&&"losses"in ee&&"draws"in ee&&"points"in ee){const be=ee;return b.jsxs("tr",{children:[b.jsx("td",{children:ie+1}),b.jsx("td",{children:Hr(be.username)}),b.jsx("td",{children:be.points})]},be.username)}return null})})]})})]}),Ju==="moves"&&$&&b.jsxs("div",{className:"move-history-compact",children:[b.jsx("div",{className:"move-history-title",children:"Moves"}),b.jsx("ul",{className:"move-history-list-compact",children:S.slice().reverse().map((ee,ie)=>b.jsx("li",{children:ee},S.length-1-ie))})]}),Ju==="gallery"&&b.jsx("div",{className:"piece-gallery-compact",children:zf(!0,"Click pieces to learn more")})]}),b.jsxs("div",{className:"center-area",children:[$&&b.jsxs("div",{className:"game-info-compact",children:[b.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===FM.AI&&b.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),xw&&b.jsxs("span",{className:"wager-display",children:["Wager: ",I," tDMT"]})]}),$?b.jsxs("div",{className:"chess-main-area",children:[b.jsx("div",{className:"chessboard-container",children:b.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${D})`},children:[Array.from({length:8},(ee,ie)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(be,we)=>ds(ie,we))},ie)),B&&B.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${B.row*12.5}%`,left:`${B.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:b.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),b.jsxs("div",{className:"game-controls-compact",children:[b.jsxs("div",{className:"sidebar-toggle-group",children:[b.jsx("button",{className:Ju==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:Ju==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("moves"),children:"Moves"}),b.jsx("button",{className:Ju==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("gallery"),children:"Gallery"})]}),b.jsx("button",{onClick:$s,children:"New Game"}),b.jsx("button",{onClick:Hf,children:"Menu"})]})]}):Be?_m():xw?b.jsx(Lle,{onClose:t,onMinimize:e,fullscreen:n}):b.jsxs("div",{className:"game-mode-panel-streamlined",children:[b.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:b.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),b.jsxs("div",{className:"mode-selection-compact",children:[b.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),b.jsx("button",{className:`mode-btn-compact ${xw?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===FM.AI&&b.jsx("button",{className:"start-btn-compact",onClick:()=>Te(!0),children:"Start Game"}),xw&&b.jsxs("div",{className:"pvp-info",children:[b.jsx("p",{children:"Challenge other players with tDMT wagers"}),b.jsx("p",{children:"Create or join games instantly"})]}),b.jsxs("div",{className:"help-section-compact",children:[b.jsx("h4",{children:"How to Play"}),b.jsxs("div",{className:"help-content",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),b.jsx("p",{children:b.jsx("strong",{children:"Piece Movements:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Special Rules:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Game Modes:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Multiplayer:"})," wage tDMT and challenge other players on Sanko testnet. Winner takes the pot minus 5% house fee."]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Multiplayer Flow:"})}),b.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsx("li",{children:"Connect your wallet to Sanko testnet"}),b.jsx("li",{children:"Create a game and set your wager amount in tDMT"}),b.jsx("li",{children:"Share your invite code with an opponent"}),b.jsx("li",{children:"Opponent joins and matches your wager"}),b.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),b.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Lawb Chess Testnet Contract:"})," ",b.jsx("a",{href:"https://testnet.sankoscan.io/address/0x3112AF5728520F52FD1C6710dD7bD52285a68e47?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"})]}),b.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Network Name:"})," Sanko Testnet"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"RPC URL:"})," https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Chain ID:"})," 1992"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Currency Symbol:"})," tDMT"]})]})]})]}),b.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:b.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),b.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[b.jsx("button",{className:Ju==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:Ju==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("gallery"),children:"Gallery"})]})]})]})]})}),xe&&zf(!0),E&&Wf(),Ue&&b.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),Im&&b.jsxs("div",{className:"victory-overlay",children:[b.jsx("div",{className:"balloons-container"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Victory!"}),b.jsx("button",{onClick:$s,children:"New Game"})]})})]}),Xl&&b.jsxs("div",{className:"defeat-overlay",children:[b.jsx("div",{className:"blood-overlay"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Defeat!"}),b.jsx("button",{onClick:$s,children:"Try Again"})]})})]})]})};function _K(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const AK=()=>{const[t,e]=G.useState("singleplayer"),n=()=>{window.location.href="/"};return b.jsx("div",{className:"chess-page",children:b.jsx("div",{className:"chess-content",children:t==="singleplayer"?b.jsx(dit,{onClose:n}):b.jsx(Lle,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},hit=new F_e,fit=typeof window<"u"&&window.location.hostname.startsWith("chess."),pit=()=>wqe("(max-width: 768px)")?b.jsx(yqe,{}):b.jsx(lqe,{});oB.createRoot(document.getElementById("root")).render(b.jsx(Gc.StrictMode,{children:b.jsx(t_e,{config:Wae.wagmiConfig,children:b.jsx(oAe,{client:hit,children:b.jsx(aqe,{children:b.jsx(sqe,{children:fit?b.jsx(AT,{path:"/*",element:b.jsx(AK,{})}):b.jsxs(b.Fragment,{children:[b.jsx(AT,{path:"/",element:b.jsx(pit,{})}),b.jsx(AT,{path:"/chess",element:b.jsx(AK,{})})]})})})})})}));export{vT as $,wt as A,qt as B,lt as C,rl as D,B_ as E,ms as F,UW as G,Go as H,zo as I,Lt as J,SU as K,J1 as L,Fi as M,dke as N,Oe as O,bg as P,Au as Q,hn as R,lu as S,Xa as T,ep as U,Qa as V,mo as W,gke as X,Lr as Y,Vot as Z,v5 as _,st as a,qke as a0,$_ as a1,Wot as a2,$i as a3,ih as a4,ti as a5,Hot as a6,qie as a7,E5 as a8,ZE as a9,f6e as aA,A6e as aB,kot as aC,Tot as aD,NP as aE,Dot as aF,Pot as aG,oI as aH,Nit as aI,DE as aJ,uL as aK,M$ as aL,Noe as aM,xoe as aN,Vl as aO,mn as aP,OYe as aQ,ql as aR,Dee as aS,qEe as aT,ro as aa,Lit as ab,of as ac,Jd as ad,GA as ae,It as af,yi as ag,Ap as ah,Nee as ai,G2 as aj,Ne as ak,c$ as al,Si as am,Ube as an,$2 as ao,b$ as ap,zbe as aq,TI as ar,jl as as,ym as at,T_ as au,Qd as av,_6e as aw,Rot as ax,tH as ay,_se as az,cm as b,CT as c,Ha as d,$r as e,ut as f,af as g,Bt as h,Ml as i,J as j,xs as k,Tu as l,Nn as m,qot as n,jc as o,Vt as p,Ga as q,Got as r,a5e as s,Md as t,hHe as u,bt as v,xd as w,jot as x,mr as y,ere as z};
